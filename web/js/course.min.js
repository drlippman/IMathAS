function ahah(a,b){document.getElementById(b).innerHTML=" Fetching data... ",window.XMLHttpRequest?req=new XMLHttpRequest:window.ActiveXObject&&(req=new ActiveXObject("Microsoft.XMLHTTP")),"undefined"!=typeof req&&(req.onreadystatechange=function(){ahahDone(a,b)},req.open("GET",a,!0),req.send(""))}function ahahDone(url,target){if(4==req.readyState)if(200==req.status){document.getElementById(target).innerHTML=req.responseText,usingASCIIMath&&rendermathnode(document.getElementById(target)),usingASCIISvg&&setTimeout("drawPics()",100),$("#"+target+" a").each(setuptracklinks),$("#"+target+' a[href*="youtu"]').each(setupvideoembeds),$("#"+target+' a[href*="vimeo"]').each(setupvideoembeds);for(var x=document.getElementById(target).getElementsByTagName("script"),i=0;i<x.length;i++)if(x[i].src){var script=document.createElement("script");script.src=x[i].src;var pn=x[i].parentNode;pn.replaceChild(script,x[i])}else eval(x[i].text)}else document.getElementById(target).innerHTML=" AHAH Error:\n"+req.status+"\n"+req.statusText}function toggleblock(a,b){var c=document.getElementById("block"+a),d=document.getElementById("img"+a);oblist=oblist.split(","),plblist=plblist.split(",");var e=arraysearch(a,oblist);"blockitems"==c.className?(-1==arraysearch(a,loadedblocks)&&loadedblocks.push(a),c.className="hidden",null!=d&&(d.src=imasroot+"/img/expand.gif"),e>-1&&oblist.splice(e,1)):(-1==arraysearch(a,loadedblocks)&&(ahah(getbiaddr+b,"block"+a),-1==arraysearch(b,plblist)&&plblist.push(b)),c.className="blockitems",null!=d&&(d.src=imasroot+"/img/collapse.gif"),-1==e&&oblist.push(a)),oblist=oblist.join(","),plblist=plblist.join(","),document.cookie="openblocks-"+cid+"="+oblist,document.cookie="prevloadedblocks-"+cid+"="+plblist}function showcalcontents(a){var b="";if("number"==typeof a){var c=new Date;c.setTime(a);for(var d=0;28>d;d++)moday=c.getMonth()+1+"-"+c.getDate(),null!=caleventsarr[moday].data&&(b+='<div style="background-color:#ddf;">'+caleventsarr[moday].date+"</div>",b+=showcalcontentsid(moday)),c.setDate(c.getDate()+1)}else if(null!=caleventsarr[a.id]){b+='<div style="background-color:#ddf;">'+caleventsarr[a.id].date+"</div>",b+=showcalcontentsid(a.id);var e=document.getElementById("mcelink");if(null!=e){var f=e.href;f=f.replace(/^(.*?cid=\d+).*$/,"$1"),e.href=f+"&addto="+Date.parse(caleventsarr[a.id].date)/1e3}}document.getElementById("caleventslist").innerHTML=b;for(var g=document.getElementsByTagName("td"),h=0;h<g.length;h++)g[h].style.backgroundColor="#fff";"number"!=typeof a&&(a.style.backgroundColor="#fdd")}function showcalcontentsid(a){var b="";if(null!=caleventsarr[a].data){b+='<ul class=qview style="margin-top: 2px;">';for(var c=0;c<caleventsarr[a].data.length;c++)"A"==caleventsarr[a].data[c].type?(b+='<li><span class="calitem" style="background-color:'+caleventsarr[a].data[c].color+'; padding: 0px 5px 0px 5px;">'+caleventsarr[a].data[c].tag+"</span> ",null==caleventsarr[a].data[c].id||caleventsarr[a].data[c].hasOwnProperty("inactive")?b+=caleventsarr[a].data[c].name:(b+='<a href="../assessment/showtest.php?cid='+cid+"&id="+caleventsarr[a].data[c].id+'"',null!=caleventsarr[a].data[c].timelimit&&(b+="onclick=\"return confirm('This assessment has a time limit. Click OK to start or continue working on the assessment.')\" "),b+=">",b+=caleventsarr[a].data[c].name+"</a>"),b+=" Due "+caleventsarr[a].data[c].time,1==caleventsarr[a].data[c].allowlate&&(b+=' <a href="redeemlatepass.php?cid='+cid+"&aid="+caleventsarr[a].data[c].id+'">Use LatePass</a>'),1==caleventsarr[a].data[c].undolate&&(b+=' <a href="redeemlatepass.php?cid='+cid+"&aid="+caleventsarr[a].data[c].id+'&undo=true">Un-use LatePass</a>'),null!=caleventsarr[a].data[c].editlink&&(b+=' <a href="addassessment.php?cid='+cid+"&id="+caleventsarr[a].data[c].id+'">Settings</a>',b+=' <a href="addquestions.php?cid='+cid+"&aid="+caleventsarr[a].data[c].id+'">Questions</a>',b+=' <a href="gb-itemanalysis.php?asid=average&cid='+cid+"&aid="+caleventsarr[a].data[c].id+'">Grades</a>'),b+="</li>"):"AR"==caleventsarr[a].data[c].type?(b+='<li><span class="calitem" style="background-color: '+caleventsarr[a].data[c].color+';padding: 0px 5px 0px 5px;">'+caleventsarr[a].data[c].tag+"</span> ",null!=caleventsarr[a].data[c].id?(b+='href="../assessment/showtest.php?cid='+cid+"&id="+caleventsarr[a].data[c].id+'">',b+=caleventsarr[a].data[c].name+"</a>"):b+=caleventsarr[a].data[c].name,b+=" Review until "+caleventsarr[a].data[c].time,null!=caleventsarr[a].data[c].editlink&&(b+=' <a href="addassessment.php?cid='+cid+"&id="+caleventsarr[a].data[c].id+'">Settings</a>',b+=' <a href="isolateassessgrade.php?cid='+cid+"&aid="+caleventsarr[a].data[c].id+'">Grades</a>'),b+="</li>"):"I"==caleventsarr[a].data[c].type?(b+='<li><span class="calitem" style="background-color: '+caleventsarr[a].data[c].color+'; padding: 0px 5px 0px 5px;">'+caleventsarr[a].data[c].tag+"</span> ",null!=caleventsarr[a].data[c].folder?(b+='<a href="../course/course.php?cid='+cid+"&folder="+caleventsarr[a].data[c].folder+"#inline"+caleventsarr[a].data[c].id+'">',b+=caleventsarr[a].data[c].name+"</a>"):b+=caleventsarr[a].data[c].name,null!=caleventsarr[a].data[c].editlink&&(b+=' <a href="addinlinetext.php?cid='+cid+"&id="+caleventsarr[a].data[c].id+'">Modify</a>'),b+="</li>"):"L"==caleventsarr[a].data[c].type?(b+='<li><span class="calitem" style="background-color: '+caleventsarr[a].data[c].color+'; padding: 0px 5px 0px 5px;">'+caleventsarr[a].data[c].tag+"</span> ",null!=caleventsarr[a].data[c].id?(""==caleventsarr[a].data[c].link?(b+="<a onclick=\"recclick('linkedviacal',"+caleventsarr[a].data[c].id+",'"+caleventsarr[a].data[c].id+"');\" ",b+='href="../course/showlinkedtext.php?cid='+cid+"&id="+caleventsarr[a].data[c].id+'">'):(b+="<a onclick=\"recclick('linkedviacal',"+caleventsarr[a].data[c].id+",'"+caleventsarr[a].data[c].link+"');\" ",b+='href="'+caleventsarr[a].data[c].link+'">'),b+=caleventsarr[a].data[c].name+"</a>"):b+=caleventsarr[a].data[c].name,null!=caleventsarr[a].data[c].editlink&&(b+=' <a href="addlinkedtext.php?cid='+cid+"&id="+caleventsarr[a].data[c].id+'">Modify</a>'),b+="</li>"):"FP"==caleventsarr[a].data[c].type?(b+='<li><span class="calitem" style="background-color: '+caleventsarr[a].data[c].color+'; padding: 0px 5px 0px 5px;">'+caleventsarr[a].data[c].tag+"</span> ",null!=caleventsarr[a].data[c].id?(b+='<a href="../forums/thread.php?cid='+cid+"&forum="+caleventsarr[a].data[c].id+'">',b+=caleventsarr[a].data[c].name+"</a>"):b+=caleventsarr[a].data[c].name,b+=" New Threads Due "+caleventsarr[a].data[c].time,null!=caleventsarr[a].data[c].editlink&&(b+=' <a href="addforum.php?cid='+cid+"&id="+caleventsarr[a].data[c].id+'">Modify</a>'),b+="</li>"):"FR"==caleventsarr[a].data[c].type?(b+='<li><span class="calitem" style="background-color: '+caleventsarr[a].data[c].color+'; padding: 0px 5px 0px 5px;">'+caleventsarr[a].data[c].tag+"</span> ",null!=caleventsarr[a].data[c].id?(b+='<a href="../forums/thread.php?cid='+cid+"&forum="+caleventsarr[a].data[c].id+'">',b+=caleventsarr[a].data[c].name+"</a>"):b+=caleventsarr[a].data[c].name,b+=" Replies Due "+caleventsarr[a].data[c].time,null!=caleventsarr[a].data[c].editlink&&(b+=' <a href="addforum.php?cid='+cid+"&id="+caleventsarr[a].data[c].id+'">Modify</a>'),b+="</li>"):"C"==caleventsarr[a].data[c].type&&(b+='<li><span class="calitem" style="background-color: #0ff; padding: 0px 5px 0px 5px;">'+caleventsarr[a].data[c].tag+"</span> ",b+=caleventsarr[a].data[c].name,b+="</li>");b+="</ul>"}return b}function changecallength(a){window.location=calcallback+"&callength="+a.value}function playlistnextvid(){var a=$(this).parents(".playlistbar").get(0).id.substr(11);if(null!=curvid[a]){var b=curvid[a];b<playlist[a].length-1&&playliststart(a,b+1)}}function playlistprevvid(){var a=$(this).parents(".playlistbar").get(0).id.substr(11);if(null!=curvid[a]){var b=curvid[a];b>0&&playliststart(a,b-1)}}function playlisttogglelist(){var a=$(this).parents(".playlistbar").get(0).id.substr(11),b=$("#playlistwrap"+a),c=$("#playlistbar"+a);"none"==b.find(".playlisttext").css("display")?(b.find(".playlisttext").show(),b.find(".playlistvid").hide(),c.find(".vidtracks").removeClass("vidtracks").addClass("vidtracksA")):(b.find(".playlisttext").hide(),b.find(".playlistvid").show(),c.find(".vidtracksA").removeClass("vidtracksA").addClass("vidtracks"))}function playliststart(a,b,c){null!==c&&$(c).hide();var d=$("#playlistwrap"+a),e=$("#playlistbar"+a),f=d.find("iframe"),g=location.protocol+"//www.youtube.com/embed/"+playlist[a][b].vidid;playlist[a][b].start>0?(g+="?start="+playlist[a][b].start+"&",playlist[a][b].end>0&&(g+="end="+playlist[a][b].end+"&")):g+=playlist[a][b].end>0?"?end="+playlist[a][b].end+"&":"?",g+="rel=0&autoplay=1",curvid[a]=b,"none"!=d.find(".playlisttext").css("display")&&(d.find(".playlisttext").hide(),d.find(".playlistvid").show()),0==f.length?(d.find(".playlistvid").append($("<iframe/>",{id:"videoiframe"+a,width:640,height:400,src:g,frameborder:0,allowfullscreen:1})).fitVids(),e.find(".vidplay").hide(),e.find(".vidff").show().bind("click",playlistnextvid).css("cursor","pointer"),e.find(".vidrewI").show().bind("click",playlistprevvid).css("cursor","pointer"),e.find(".vidtracksA").removeClass("vidtracksA").addClass("vidtracks").css("cursor","pointer").bind("click",playlisttogglelist).next().css("cursor","pointer").bind("click",playlisttogglelist)):d.find("iframe").attr("src",g),e.find(".playlisttitle").html(playlist[a][b].name+' <a target="_blank" href="http://www.youtube.com/watch?v='+playlist[a][b].vidid+'"><img src="'+imasroot+'/img/extlink.png"/></a>'),0==b?e.find(".vidrew,.vidrewI").removeClass("vidrew").addClass("vidrewI"):e.find(".vidrew,.vidrewI").addClass("vidrew").removeClass("vidrewI"),b==playlist[a].length-1?e.find(".vidff,.vidffI").removeClass("vidff").addClass("vidffI"):e.find(".vidff,.vidffI").removeClass("vidffI").addClass("vidff")}var loadedblocks=new Array;jQuery(document).ready(function(a){a(".caldl").attr("title",_("Bring this day to top"))});var playlist=[],curvid=[],players=[];