<html><body>
<h1>Macro Library sagecell</h1>
<p>Sagecell integration documentation, Version 2.0, Mar 2019</p>
<ol>
  <li><a href="#qc">Integration via Macros in Question Common Control</a></li>
  <li><a href="#qt">Integration via JavaScript in Question Text</a></li>
</ol>
<h2 id="qc">Integration via Macros in Question Common Control</h2>
<p>
This library provides functions to create SageCells and transfer their output into answerboxes. To use the library in a question, make sure to call
</p>
<pre>loadlibrary("sagecell1");</pre>
<p>
before calling the functions.
</p>

<ul>
<li><a href="#sagecell">sagecell</a></li>
<li><a href="#sagecellTransfer">sagecellTransfer</a></li>
</ul>
<h3><a name="sagecell">sagecell</a></h3>
<p>
<i>sagecell(script)</i> generates a SageCell with content <i>script</i>.
<p>
Usage example: <i>$s=sagecell("1+1")</i>, place $s in question text
</p>
<h3><a name="sagecellTransfer">sagecellTransfer</a></h3>
<p>
<i>sagecellTransfer(script,questionNr,[label,partNr])</i> generates a SageCell with content <i>script</i> and a button with <i>label</i> (default: "Transfer"). Clicking the button transfers the content of the SageCell output into the answerbox. For multipart questions, <i>partNr</i> determines the index of the target answerbox.
</p>
<p>
Usage example: <i>$s = sagecellTransfer("1+1",$thisq,"Use as Answer to Part 2",1)</i>, place $s in question text.
</p>

<h2 id="qt">Integration via HTML in Question Text</h2>
<p>There is not need to actually load this macro library. This documentation
describes how to set up your HTML to enable SageCell integration.</p>

<p>For a basic SageCell that students can use for calculations, but for which
their work is NOT retained when they submit the question, you can put in your HTML
a <code>pre</code> tag with class <code>converttosagecell</code>, and put your
starting/default Sage code inside of it. Like this:</p>

<pre>
&lt;pre class="converttosagecell"&gt;
  x = var('x')
  integral(sin(x), x)
&lt;/pre&gt;
</pre>

<p>If you want to store the student's code so they can modify it and you can
view it, then you'll need to add an <code>essay</code> part to your question.
See the example below for an example of how you could set it up, 
including providing default Sage code</p>

<p>Question Type: Multipart.  Question Code:</p>
<pre>
$anstypes = "essay,numfunc"
$answeights = "0,1"
$scoremethod = "singlescore"
$a = rand(2,8)

$answer[1]= "-$a cos(x)"
</pre>

<p>Question text:</p>
<pre>
&lt;p&gt;Modify the Sagecell below to find the integral of `$a sin(x)`&lt;/p&gt;
&lt;div class="converttosagecell"&gt;
  $answerbox[0]
  &lt;pre class="hidden"&gt;
    x = var('x')
    integral(sin(x), x)
  &lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;Answer: $answerbox[1]&lt;/p&gt;
</pre>
</body>
</html>
   