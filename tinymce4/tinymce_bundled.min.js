!function(_e){"use strict";var s,c,d,m,a,u,l,f,g,e,y,n,t,P,B,h,o,i,M,p,r,v,b,x,Ae,I,w,De,L,C,F,S,N,T,E,k,R,H,_,A,D,O,z,W,U,j,V,q,Y,X,K,G,J,Q,Z,ee,te,ne,re,oe,ie,ae,ue,se,ce,le,fe,de,me,Oe,ge,he,pe,ve,be,ye,xe,Pe,we,Ce,Se,Ne,Te,Ee,ke,Re,Be,Me,Ie,Le,Fe,He,ze,We,Ue,je,Ve,qe,$e,Ye,Xe,Ke,Ge,Je,Qe,Ze,et,tt,nt,rt,ot,it,at,ut,st,ct,lt,ft,dt,mt,gt,ht,pt,vt,bt,yt,xt,wt,Ct,St,Nt,Tt,Et,kt,Rt,_t,At,Dt,Ot,Pt,Bt,Mt,It,Lt,Ft,Ht,zt,Wt,Ut,jt,Vt,qt,$t,Yt,Xt,Kt,Gt,Jt,Qt,Zt,en,tn,nn,rn,on,an,un,sn,cn,ln,fn,dn,mn,gn,hn,pn,vn,bn,yn,xn,wn,Cn,Sn,Nn,Tn,En,kn,Rn,_n,An,Dn,On,Pn,Bn,Mn,In,Ln,Fn,Hn,zn,Wn,Un,jn,Vn,qn,$n,Yn,Xn,Kn,Gn,Jn,Qn,Zn,er,tr,nr,rr,or,ir,ar,ur,sr,cr,lr,fr,dr,mr,gr,hr,pr,vr,br,yr,xr,wr,Cr,Sr,Nr,Tr,Er,kr,Rr,_r,Ar,Dr,Or,Pr,Br,Mr,Ir,Lr,Fr,Hr,zr,Wr,Ur,jr,Vr,qr,$r,Yr,Xr,Kr,Gr,Jr,Qr,Zr,eo,to,no,ro,oo,io,ao,uo,so,co,lo,fo,mo,go,ho,po,vo,bo,yo,xo,wo,Co,So,No,To,Eo,ko,Ro,_o,Ao,Do,Oo,Po,Bo,Mo,Io,Lo,Fo,Ho,zo,Wo,Uo,jo,Vo,qo,$o,Yo,Xo,Ko,Go,Jo,Qo,Zo,ei,ti,ni,ri,oi,ii,ai,ui,si,ci,li,fi,di,mi,gi,hi,pi,vi,bi,yi,xi,wi,Ci,Si,Ni,Ti,Ei,ki,Ri,_i,Ai,Di,Oi,Pi,Bi,Mi,Ii,Li,Fi,Hi,zi,Wi,Ui,ji,Vi,qi,$i,Yi,Xi,Ki,Gi,Ji,Qi,Zi,ea,ta,na,ra,oa,ia,aa,ua,sa,ca,la,fa,da,ma,ga,ha,pa,va,ba,ya,xa,wa,Ca,Sa,Na,Ta,Ea,ka,Ra,_a,Aa,Da,Oa,Pa,Ba,Ma,Ia,La,Fa,Ha,za,Wa,Ua,ja,Va,qa,$a,Ya,Xa,Ka,Ga,Ja,Qa,Za,eu,tu,nu,ru,ou,iu,au,uu,su,cu,lu,fu,du,mu,gu,hu,pu,vu,bu,yu,xu,wu,Cu,Su,Nu,Tu,Eu,ku,Ru,_u,Au,Du,Ou,Pu,Bu,Mu,Iu,Lu,Fu,Hu,zu,Wu,Uu,ju,Vu,qu,$u,Yu,Xu,Ku,Gu,Ju,Qu,Zu,es,ts,ns,rs,os,is,as,us,ss,cs,ls,fs,ds,ms,gs,hs,ps,vs,bs,ys,xs,ws,Cs,Ss,Ns,Ts,Es,ks,Rs,_s,As,Ds,Os,Ps,Bs,Ms,Is,Ls,Fs,Hs,zs,Ws,Us,js,Vs,qs,$s,Ys,Xs,Ks,Gs,Js,Qs,Zs,ec,tc,nc,rc,oc,ic,ac,uc,sc,cc,lc,fc,dc,mc,gc,hc,pc,vc,bc,yc,xc,wc,Cc,Sc,Nc,Tc,Ec,kc,Rc,_c,Ac,Dc,Oc,Pc,Bc,Mc,Ic,Lc,Fc,Hc,zc,Wc,Uc,jc,Vc,qc,$c,Yc,Xc,Kc,Gc,Jc,Qc,Zc,el,tl,nl,rl,ol,il,al,ul,sl,cl,ll,fl,dl,ml,gl,hl,pl,vl,bl,yl,xl,wl,Cl,Sl,Nl,Tl,El,kl,Rl,_l,Al,Dl,Ol,Pl,Bl,Ml,Il,Ll,Fl,Hl,zl,Wl,Ul,jl,Vl,ql,$l,Yl,Xl,Kl,Gl,Jl,Ql,Zl,ef,tf,nf,rf,of,af,uf,sf,cf,lf,ff,df,mf,gf,hf,pf,vf,bf,yf,xf,wf,Cf,Sf,Nf,Tf,Ef,kf,Rf,_f,Af,Df,Of,Pf,Bf,Mf,If,Lf,Ff,Hf,zf,Wf,Uf,jf,Vf,qf,$f,Yf,Xf,Kf,Gf,Jf,Qf,Zf,ed,td,nd,rd,od,id,ad,ud,sd,cd,ld,fd,dd,md,gd,hd,pd,vd,bd,yd,xd,wd,Cd,Sd,Nd,Td,Ed,kd,Rd,_d,Ad,Dd,Od,Pd,Bd,Md,Id,Ld,Fd,Hd,zd,Wd,Ud,jd,Vd,qd,$d,Yd,Xd,Kd,Gd,Jd,Qd,Zd,em,tm,nm,rm,om,im,am,um,sm,cm,lm,fm,dm,mm,gm,hm,pm,vm,bm,ym,xm,wm,Cm,Sm,Nm,Tm,Em,km,Rm,_m,Am,Dm,Om,Pm,Bm,Mm,Im,Lm,Fm,Hm,zm,Wm,Um,jm,Vm,qm,$m,Ym,Xm,Km,Gm,Jm,Qm,Zm,eg,tg,ng,rg,og,ig,ag,ug,sg,cg,lg,fg,dg,mg,gg,hg,pg,vg,bg,yg,xg,wg,Cg,Sg,Ng,Tg,Eg,kg,Rg,_g,Ag,Dg,Og,Pg,Bg,Mg,Ig,Lg,Fg,Hg,zg,Wg,Ug,jg,Vg,qg,$g,Yg,Xg,Kg,Gg,Jg,Qg,Zg,eh,th,nh,rh,oh,ih,ah,uh,sh,ch,lh,fh,dh,mh,gh,hh,ph,vh,bh,yh,xh,wh,Ch,Sh,Nh,Th,Eh,kh,Rh,_h,Ah,Dh,Oh,Ph,Bh,Mh,Ih,Lh,Fh,Hh,zh,Wh,Uh,jh,Vh,qh,$h,Yh,Xh,Kh,Gh,Jh,Qh,Zh,ep,tp,np,rp,op,ip,ap,up,sp,cp,lp,fp,dp,mp,gp,hp,pp,vp,bp,yp,xp,wp,Cp,Sp,Np,Tp,Ep,kp,Rp,_p,Ap,Dp,Op,Pp,Bp,Mp,Ip,Lp,Fp,Hp,zp,Wp,Up,jp,Vp,qp,$p,Yp,Xp,Kp,Gp,Jp,Qp,Zp,ev,tv,nv,rv,ov,iv,av,uv,sv,cv,lv,fv,dv,mv,gv,hv,pv,vv,bv,yv,xv,wv,Cv,Sv,Nv,Tv,Ev,kv,Rv,_v,Av,Dv,Ov,Pv,Bv,Mv,Iv,Lv,Fv,Hv,zv,Wv,Uv,jv,Vv,qv,$v,Yv,Xv,Kv,Gv,Jv,Qv,Zv,eb,tb,nb,rb,ob,ib,ab,ub,sb,cb,lb,fb,db,mb,gb,hb,pb,vb,bb,yb,xb,wb,Cb,Sb,Nb,Tb,Eb,kb,Rb,_b,Ab,Db,Ob,Pb,Bb,Mb,Ib,Lb,Fb,Hb,zb,Wb,Ub,jb,Vb,qb,$b,Yb,Xb,Kb,Gb,Jb,Qb,Zb,ey,ty,ny,ry,oy,iy,ay,uy,sy,cy,ly,fy,dy,my,gy,hy,py,vy,by,yy,xy,wy,Cy,Sy,Ny,Ty,Ey,ky,Ry,_y,Ay,Dy,Oy,Py,By,My,Iy,Ly,Fy,Hy,zy,Wy,Uy,jy,Vy,qy,$y,Yy,Xy,Ky,Gy,Jy,Qy,Zy,ex,tx,nx,rx,ox,ix,ax,ux,sx,cx,lx,fx,dx,mx,gx,hx,px,vx,bx,yx,xx,wx,Cx,Sx,Nx,Tx,Ex,kx,Rx,_x,Ax,Dx,Ox,Px,Bx,Mx,Ix,Lx,Fx,Hx,zx,Wx,Ux,jx,Vx,qx,$x,Yx,Xx,Kx,Gx,Jx,Qx,Zx,ew,tw,nw,rw,ow,iw,aw,uw,sw,cw,lw,fw,dw,mw,gw,hw,pw,vw,bw,yw,xw,ww,Cw,Sw,Nw,Tw,Ew,kw,Rw,_w,Aw,Dw,Ow,Pw,Bw,Mw,Iw,Lw,Fw,Hw,zw,Ww,Uw,jw,Vw,qw,$w,Yw,Xw,Kw,Gw,Jw,Qw,Zw,eC,tC,nC,rC,oC,iC,aC,uC,sC,cC,lC,fC,dC,mC,gC,hC,pC,vC,bC,yC,xC,wC,CC,SC,NC,TC,EC,kC,RC,_C,AC,DC,OC,PC,BC,MC,IC,LC,FC,HC,zC,WC,UC,jC,VC,qC,$C,YC,XC,KC,GC,JC,QC,ZC,eS,tS,nS,rS,oS,iS,aS,uS,sS,cS,lS,fS,dS,mS,gS,hS,pS,vS,bS,yS,xS,wS,CS,SS,NS,TS,ES,kS,RS,_S,AS,DS,OS,PS,BS,MS,IS,LS,FS,HS,zS,WS,US,jS,VS,qS,$S,YS,XS,KS,GS,JS,QS,ZS,eN,tN,nN,rN,oN,iN,aN,uN,sN,cN,lN,fN,dN,mN,gN,hN,pN,vN,bN,yN,xN,wN,CN,SN,NN,TN,EN,kN,RN,_N,AN,DN,ON,PN,BN,MN,IN,LN,FN,HN,zN,WN,UN,jN,VN,qN,$N,YN,XN,KN,GN,JN,QN,ZN,eT,tT,nT,rT,oT,iT,aT,uT,sT,cT,lT,fT,dT,mT,gT,hT,pT,vT,bT,yT,xT,wT,CT,ST,NT,TT,ET,kT,RT,_T,AT,DT,OT,PT,BT,MT,IT,LT,FT,HT,zT,WT,UT,jT,VT,qT,$T,YT,XT,KT,GT,JT,QT,ZT,eE,tE,nE,rE,oE,iE,aE,uE,sE,cE,lE,fE,dE,mE,gE,hE,pE,vE,bE,yE,xE,wE,CE,SE,NE,TE,EE,kE,RE,_E,AE,DE,OE,PE,BE,ME,IE,LE,FE,HE,zE,WE,UE,jE,VE,qE,$E,YE,XE,KE,GE,JE,QE,ZE,ek,tk,nk,rk,ok,ik,ak,uk,sk,ck,lk,fk,dk,mk,gk,hk,pk,vk,bk,yk,xk,wk,Ck,Sk,Nk,Tk,Ek,kk,Rk,_k,Ak,Dk,Ok,Pk,Bk,Mk,Ik,Lk,Fk,Hk,zk,Wk,Uk,jk,Vk,qk,$k,Yk,Xk,Kk,Gk,Jk,Qk,Zk,eR,tR,nR,rR,oR,iR,aR,uR,sR,cR,lR,fR,dR,mR,gR,hR,pR,vR,bR,yR,xR,wR,CR,SR,NR,TR,ER,kR,RR,_R,AR,DR,OR,PR,BR,MR,IR,LR,FR,HR,zR,WR,UR,jR,VR,qR,$R,YR,XR,KR,GR,JR,QR,ZR,e_,t_,n_,r_,o_,i_,a_,u_,s_,c_,l_,f_,d_,m_,g_,h_,p_,v_,b_,y_,x_,w_,C_,S_,N_,T_,E_,k_,R_,__,A_,D_,O_,P_,B_,M_,I_,L_,F_,H_,z_,W_,U_,j_,V_,q_,$_,Y_,X_,K_,G_,J_,Q_,Z_,eA,tA,nA,rA,oA,iA,aA,uA,sA,cA,lA,fA,dA,mA,gA,hA,pA,vA,bA,yA,xA,wA,CA,SA,NA,TA,EA,kA,RA,_A,AA,DA,OA,PA,BA,MA,IA,LA,FA,HA,zA,WA,UA,jA,VA,qA,$A,YA,XA,KA,GA,JA,QA,ZA,eD,tD,nD,rD,oD,iD,aD,uD,sD,cD,lD,fD,dD,mD,gD,hD,pD,vD,bD,yD,xD,wD,CD,SD,ND,TD,ED,kD,RD,_D,AD,DD,OD,PD,BD,MD,ID,LD,FD,HD,zD,WD,UD,jD,VD,qD,$D,YD,XD,KD,GD,JD,QD,ZD,eO,tO,nO,rO,oO,iO,aO,uO,sO,cO,lO,fO,dO,mO,gO,hO,pO,vO,bO,yO,xO,wO,CO,SO,NO,TO,EO,kO,RO,_O,AO,DO,OO=function(){var e,t=[];for(e=0;e<arguments.length;e++)t[e]=arguments[e]},PO=function(n,r){return function(){var e,t=[];for(e=0;e<arguments.length;e++)t[e]=arguments[e];return n(r.apply(null,t))}},BO=function(e){return function(){return e}},MO=function(e){return e};function IO(r){var e,o=[];for(e=1;e<arguments.length;e++)o[e-1]=arguments[e];return function(){var e,t,n=[];for(e=0;e<arguments.length;e++)n[e]=arguments[e];return t=o.concat(n),r.apply(null,t)}}s=function(n){return function(){var e,t=[];for(e=0;e<arguments.length;e++)t[e]=arguments[e];return!n.apply(null,t)}},d=BO(!(c=function(e){return function(){throw new Error(e)}})),m=BO(!0),cO={fold:function(e,t){return e()},is:a=d,isSome:a,isNone:u=m,getOr:sO=function(e){return e},getOrThunk:uO=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:function(){return null},getOrUndefined:function(){},or:sO,orThunk:uO,map:l=function(){return f},ap:l,each:function(){},bind:l,flatten:l,exists:a,forall:u,filter:l,equals:aO=function(e){return e.isNone()},equals_:aO,toArray:function(){return[]},toString:BO("none()")},Object.freeze&&Object.freeze(cO),f=cO,e=function(e){return null==e?f:g(e)},y={some:g=function(n){var e=function(){return n},t=function(){return i},r=function(e){return g(e(n))},o=function(e){return e(n)},i={fold:function(e,t){return t(n)},is:function(e){return n===e},isSome:u,isNone:a,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:t,orThunk:t,map:r,ap:function(e){return e.fold(l,function(e){return g(e(n))})},each:function(e){e(n)},bind:o,flatten:e,exists:o,forall:o,filter:function(e){return e(n)?i:f},equals:function(e){return e.is(n)},equals_:function(e,t){return e.fold(a,function(e){return t(n,e)})},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return i},none:l,from:e},n=function(e){if(null===e)return"null";var t=typeof e;return"object"===t&&Array.prototype.isPrototypeOf(e)?"array":"object"===t&&String.prototype.isPrototypeOf(e)?"string":t},P=(t=function(t){return function(e){return n(e)===t}})("string"),B=t("object"),h=t("array"),o=t("null"),i=t("boolean"),M=t("function"),p=t("number"),lO=Array.prototype.indexOf,fO=function(e,t){return lO.call(e,t)},dO=function(e,t){return T(e,t)},r=void 0===lO?dO:fO,v=function(e,t){var n=r(e,t);return-1===n?y.none():y.some(n)},b=function(e,t){return-1<r(e,t)},x=function(e,t){return N(e,t).isSome()},Ae=function(e,t){var n,r,o=e.length,i=new Array(o);for(n=0;n<o;n++)r=e[n],i[n]=t(r,n,e);return i},I=function(e,t){var n,r;for(n=0,r=e.length;n<r;n++)t(e[n],n,e)},w=function(e,t){var n;for(n=e.length-1;0<=n;n--)t(e[n],n,e)},De=function(e,t){var n,r,o,i=[],a=[];for(n=0,r=e.length;n<r;n++)(t(o=e[n],n,e)?i:a).push(o);return{pass:i,fail:a}},L=function(e,t){var n,r,o,i=[];for(n=0,r=e.length;n<r;n++)t(o=e[n],n,e)&&i.push(o);return i},C=function(e,t,n){return w(e,function(e){n=t(n,e)}),n},F=function(e,t,n){return I(e,function(e){n=t(n,e)}),n},S=function(e,t){var n,r,o;for(n=0,r=e.length;n<r;n++)if(t(o=e[n],n,e))return y.some(o);return y.none()},N=function(e,t){var n,r;for(n=0,r=e.length;n<r;n++)if(t(e[n],n,e))return y.some(n);return y.none()},T=function(e,t){for(var n=0,r=e.length;n<r;++n)if(e[n]===t)return n;return-1},E=Array.prototype.push,k=function(e){var t,n,r=[];for(t=0,n=e.length;t<n;++t){if(!Array.prototype.isPrototypeOf(e[t]))throw new Error("Arr.flatten item "+t+" was not an array, input: "+e);E.apply(r,e[t])}return r},R=function(e,t){var n=Ae(e,t);return k(n)},H=function(e,t){var n,r;for(n=0,r=e.length;n<r;++n)if(!0!==t(e[n],n,e))return!1;return!0},_=Array.prototype.slice,A=function(e){var t=_.call(e,0);return t.reverse(),t},D=function(e,t){return L(e,function(e){return!b(t,e)})},O=function(e,t){var n,r,o,i={};for(n=0,r=e.length;n<r;n++)o=e[n],i[String(o)]=t(o,n);return i},z=function(e,t){var n=_.call(e,0);return n.sort(t),n},W=function(e){return 0===e.length?y.none():y.some(e[0])},U=function(e){return 0===e.length?y.none():y.some(e[e.length-1])},j=M(Array.from)?Array.from:function(e){return _.call(e)},V=void 0!==_e.window?_e.window:Function("return this;")(),q=function(e,t){var n,r=null!=t?t:V;for(n=0;n<e.length&&null!=r;++n)r=r[e[n]];return r},Y=function(e,t){var n=e.split(".");return q(n,t)},X=function(e,t){return Y(e,t)},K={getOrDie:function(e,t){var n=X(e,t);if(null==n)throw e+" not available on this browser";return n}},G=function(){return K.getOrDie("URL")},J={createObjectURL:function(e){return G().createObjectURL(e)},revokeObjectURL:function(e){G().revokeObjectURL(e)}},Z=(Q=_e.navigator).userAgent,de=function(e){return"matchMedia"in _e.window&&_e.matchMedia(e).matches},ue=/Android/.test(Z),te=(te=!(ee=/WebKit/.test(Z))&&/MSIE/gi.test(Z)&&/Explorer/gi.test(Q.appName))&&/MSIE (\w+)\./.exec(Z)[1],ne=-1!==Z.indexOf("Trident/")&&(-1!==Z.indexOf("rv:")||-1!==Q.appName.indexOf("Netscape"))&&11,re=-1!==Z.indexOf("Edge/")&&!te&&!ne&&12,te=te||ne||re,oe=!ee&&!ne&&/Gecko/.test(Z),ie=-1!==Z.indexOf("Mac"),ae=/(iPad|iPhone)/.test(Z),se="FormData"in _e.window&&"FileReader"in _e.window&&"URL"in _e.window&&!!J.createObjectURL,ce=de("only screen and (max-device-width: 480px)")&&(ue||ae),le=de("only screen and (min-width: 800px)")&&(ue||ae),fe=-1!==Z.indexOf("Windows Phone"),re&&(ee=!1),me=!ae||se||534<=parseInt(Z.match(/AppleWebKit\/(\d*)/)[1],10),Oe={opera:!1,webkit:ee,ie:te,gecko:oe,mac:ie,iOS:ae,android:ue,contentEditable:me,transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",caretAfter:8!==te,range:_e.window.getSelection&&"Range"in _e.window,documentMode:te&&!re?_e.document.documentMode||7:10,fileApi:se,ceFalse:!1===te||8<te,cacheSuffix:null,container:null,overrideViewPort:null,experimentalShadowDom:!1,canHaveCSP:!1===te||11<te,desktop:!ce&&!le,windowsPhone:fe},ge=function(){var e,i,t;function n(e,t){return function(){e.apply(t,arguments)}}function a(n){var r=this;null!==this._state?t(function(){var e,t=r._state?n.onFulfilled:n.onRejected;if(null!==t){try{e=t(r._value)}catch(e){return void n.reject(e)}n.resolve(e)}else(r._state?n.resolve:n.reject)(r._value)}):this._deferreds.push(n)}function r(e){try{if(e===this)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var t=e.then;if("function"==typeof t)return void c(n(t,e),n(r,this),n(o,this))}this._state=!0,this._value=e,u.call(this)}catch(e){o.call(this,e)}}function o(e){this._state=!1,this._value=e,u.call(this)}function u(){for(var e=0,t=this._deferreds.length;e<t;e++)a.call(this,this._deferreds[e]);this._deferreds=null}function s(e,t,n,r){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r}function c(e,t,n){var r=!1;try{e(function(e){r||(r=!0,t(e))},function(e){r||(r=!0,n(e))})}catch(e){if(r)return;r=!0,n(e)}}return e=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},t=(i=function(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],c(e,n(r,this),n(o,this))}).immediateFn||"function"==typeof setImmediate&&setImmediate||function(e){setTimeout(e,1)},i.prototype.catch=function(e){return this.then(null,e)},i.prototype.then=function(n,r){var o=this;return new i(function(e,t){a.call(o,new s(n,r,e,t))})},i.all=function(){var u=Array.prototype.slice.call(1===arguments.length&&e(arguments[0])?arguments[0]:arguments);return new i(function(r,o){var i,e;if(0===u.length)return r([]);function a(t,e){try{if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if("function"==typeof n)return void n.call(e,function(e){a(t,e)},o)}u[t]=e,0==--i&&r(u)}catch(e){o(e)}}for(i=u.length,e=0;e<u.length;e++)a(e,u[e])})},i.resolve=function(t){return t&&"object"==typeof t&&t.constructor===i?t:new i(function(e){e(t)})},i.reject=function(n){return new i(function(e,t){t(n)})},i.race=function(o){return new i(function(e,t){for(var n=0,r=o.length;n<r;n++)o[n].then(e,t)})},i},he=window.Promise?window.Promise:ge(),ve=function(e,t){var n,r=_e.window.requestAnimationFrame,o=["ms","moz","webkit"],i=function(e){_e.window.setTimeout(e,0)};for(n=0;n<o.length&&!r;n++)r=_e.window[o[n]+"RequestAnimationFrame"];r||(r=i),r(e,t)},xe=function(t,n){var r,e;return(e=function(){var e=arguments;clearTimeout(r),r=be(function(){t.apply(this,e)},n)}).stop=function(){clearTimeout(r)},e},Pe={requestAnimationFrame:function(e,t){pe?pe.then(e):pe=new he(function(e){t||(t=_e.document.body),ve(e,t)}).then(e)},setTimeout:be=function(e,t){return"number"!=typeof t&&(t=0),setTimeout(e,t)},setInterval:ye=function(e,t){return"number"!=typeof t&&(t=1),setInterval(e,t)},setEditorTimeout:function(e,t,n){return be(function(){e.removed||t()},n)},setEditorInterval:function(e,t,n){var r;return r=ye(function(){e.removed?clearInterval(r):t()},n)},debounce:xe,throttle:xe,clearInterval:function(e){return clearInterval(e)},clearTimeout:function(e){return clearTimeout(e)}},we="mce-data-",Ce=/^(?:mouse|contextmenu)|click/,Se={keyLocation:1,layerX:1,layerY:1,returnValue:1,webkitMovementX:1,webkitMovementY:1,keyIdentifier:1},Ne=function(e){return e.isDefaultPrevented===Ee||e.isDefaultPrevented===Te},Te=function(){return!1},Ee=function(){return!0},ke=function(e,t,n,r){e.addEventListener?e.addEventListener(t,n,r||!1):e.attachEvent&&e.attachEvent("on"+t,n)},Re=function(e,t,n,r){e.removeEventListener?e.removeEventListener(t,n,r||!1):e.detachEvent&&e.detachEvent("on"+t,n)},Be=function(e,t){if(e.composedPath){var n=e.composedPath();if(n&&0<n.length)return n[0]}return t},Me=function(e,t){var n,r,o,i,a,u=t||{};for(n in e)Se[n]||(u[n]=e[n]);return!u.target&&e&&e.touches&&(r=e.changedTouches[0]||e.touches[0],u.target=_e.document.elementFromPoint(r.clientX,r.clientY)),u.target||(u.target=u.srcElement||_e.document),Oe.experimentalShadowDom&&(u.target=Be(e,u.target)),e&&Ce.test(e.type)&&void 0===e.pageX&&void 0!==e.clientX&&(i=(o=u.target.ownerDocument||_e.document).documentElement,a=o.body,u.pageX=e.clientX+(i&&i.scrollLeft||a&&a.scrollLeft||0)-(i&&i.clientLeft||a&&a.clientLeft||0),u.pageY=e.clientY+(i&&i.scrollTop||a&&a.scrollTop||0)-(i&&i.clientTop||a&&a.clientTop||0)),u.preventDefault=function(){u.isDefaultPrevented=Ee,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},u.stopPropagation=function(){u.isPropagationStopped=Ee,e&&(e.stopPropagation?e.stopPropagation():e.cancelBubble=!0)},!(u.stopImmediatePropagation=function(){u.isImmediatePropagationStopped=Ee,u.stopPropagation()})===Ne(u)&&(u.isDefaultPrevented=Te,u.isPropagationStopped=Te,u.isImmediatePropagationStopped=Te),void 0===u.metaKey&&(u.metaKey=!1),u},Ie=function(e,t,n){var r,o,i,a,u=e.document,s={type:"ready"};n.domLoaded?t(s):(r=function(){return"complete"===u.readyState||"interactive"===u.readyState&&u.body},o=function(){n.domLoaded||(n.domLoaded=!0,t(s))},i=function(){r()&&(Re(u,"readystatechange",i),o())},a=function(){try{u.documentElement.doScroll("left")}catch(e){return void Pe.setTimeout(a)}o()},!u.addEventListener||Oe.ie&&Oe.ie<11?(ke(u,"readystatechange",i),u.documentElement.doScroll&&e.self===e.top&&a()):r()?o():ke(e,"DOMContentLoaded",o),ke(e,"load",o))},(Le=function(){var m,g=this,h={},p=we+(+new Date).toString(32),v="onmouseenter"in _e.document.documentElement,b="onfocusin"in _e.document.documentElement,y={mouseenter:"mouseover",mouseleave:"mouseout"},x=1;g.domLoaded=!1,g.events=h,m=function(e,t){var n,r,o,i=h[t],a=i&&i[e.type];if(a)for(n=0,r=a.length;n<r;n++)if((o=a[n])&&!1===o.func.call(o.scope,e)&&e.preventDefault(),e.isImmediatePropagationStopped())return},g.bind=function(e,t,n,r){var o,i,a,u,s,c,l,f=_e.window,d=function(e){m(Me(e||f.event),o)};if(e&&3!==e.nodeType&&8!==e.nodeType){for(e[p]?o=e[p]:(o=x++,e[p]=o,h[o]={}),r=r||e,a=(t=t.split(" ")).length;a--;)c=d,s=l=!1,"DOMContentLoaded"===(u=t[a])&&(u="ready"),g.domLoaded&&"ready"===u&&"complete"===e.readyState?n.call(r,Me({type:u})):(v||(s=y[u])&&(c=function(e){var t,n;if(t=e.currentTarget,(n=e.relatedTarget)&&t.contains)n=t.contains(n);else for(;n&&n!==t;)n=n.parentNode;n||((e=Me(e||f.event)).type="mouseout"===e.type?"mouseleave":"mouseenter",e.target=t,m(e,o))}),b||"focusin"!==u&&"focusout"!==u||(l=!0,s="focusin"===u?"focus":"blur",c=function(e){(e=Me(e||f.event)).type="focus"===e.type?"focusin":"focusout",m(e,o)}),(i=h[o][u])?"ready"===u&&g.domLoaded?n({type:u}):i.push({func:n,scope:r}):(h[o][u]=i=[{func:n,scope:r}],i.fakeName=s,i.capture=l,i.nativeHandler=c,"ready"===u?Ie(e,c,g):ke(e,s||u,c,l)));return e=i=0,n}},g.unbind=function(t,e,n){var r,o,i,a,u,s,c,l,f;if(!t||3===t.nodeType||8===t.nodeType)return g;if(r=t[p]){if(s=h[r],e){for(i=(e=e.split(" ")).length;i--;)if(o=s[u=e[i]]){if(n)for(a=o.length;a--;)o[a].func===n&&(c=o.nativeHandler,l=o.fakeName,f=o.capture,(o=o.slice(0,a).concat(o.slice(a+1))).nativeHandler=c,o.fakeName=l,o.capture=f,s[u]=o);n&&0!==o.length||(delete s[u],Re(t,o.fakeName||u,o.nativeHandler,o.capture))}}else{for(u in s)o=s[u],Re(t,o.fakeName||u,o.nativeHandler,o.capture);s={}}for(u in s)return g;delete h[r];try{delete t[p]}catch(e){t[p]=null}}return g},g.fire=function(e,t,n){var r;if(!e||3===e.nodeType||8===e.nodeType)return g;for((n=Me(null,n)).type=t,n.target=e;(r=e[p])&&m(n,r),(e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow)&&!n.isPropagationStopped(););return g},g.clean=function(e){var t,n,r=g.unbind;if(!e||3===e.nodeType||8===e.nodeType)return g;if(e[p]&&r(e),e.getElementsByTagName||(e=e.document),e&&e.getElementsByTagName)for(r(e),t=(n=e.getElementsByTagName("*")).length;t--;)(e=n[t])[p]&&r(e);return g},g.destroy=function(){h={}},g.cancel=function(e){return e&&(e.preventDefault(),e.stopImmediatePropagation()),!1}}).Event=new Le,Le.Event.bind(_e.window,"ready",function(){}),nt="sizzle"+-new Date,rt=_e.window.document,it=ot=0,at=LO(),ut=LO(),st=LO(),ct=function(e,t){return e===t&&(Xe=!0),0},lt="undefined",ft=1<<31,dt={}.hasOwnProperty,gt=(mt=[]).pop,ht=mt.push,pt=mt.push,vt=mt.slice,bt=mt.indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(this[t]===e)return t;return-1},yt="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",St=":("+(wt="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+")+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+(Ct="\\["+(xt="[\\x20\\t\\r\\n\\f]")+"*("+wt+")(?:"+xt+"*([*^$|!~]?=)"+xt+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+wt+"))|)"+xt+"*\\]")+")*)|.*)\\)|)",Nt=new RegExp("^"+xt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+xt+"+$","g"),Tt=new RegExp("^"+xt+"*,"+xt+"*"),Et=new RegExp("^"+xt+"*([>+~]|"+xt+")"+xt+"*"),kt=new RegExp("="+xt+"*([^\\]'\"]*?)"+xt+"*\\]","g"),Rt=new RegExp(St),_t=new RegExp("^"+wt+"$"),At={ID:new RegExp("^#("+wt+")"),CLASS:new RegExp("^\\.("+wt+")"),TAG:new RegExp("^("+wt+"|[*])"),ATTR:new RegExp("^"+Ct),PSEUDO:new RegExp("^"+St),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+xt+"*(even|odd|(([+-]|)(\\d*)n|)"+xt+"*(?:([+-]|)"+xt+"*(\\d+)|))"+xt+"*\\)|)","i"),bool:new RegExp("^(?:"+yt+")$","i"),needsContext:new RegExp("^"+xt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+xt+"*((?:-\\d)?\\d*)"+xt+"*\\)|)(?=[^-]|$)","i")},Dt=/^(?:input|select|textarea|button)$/i,Ot=/^h\d$/i,Pt=/^[^{]+\{\s*\[native \w/,Bt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Mt=/[+~]/,It=/'|\\/g,Lt=new RegExp("\\\\([\\da-f]{1,6}"+xt+"?|("+xt+")|.)","ig"),Ft=function(e,t,n){var r="0x"+t-65536;return r!=r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)};try{pt.apply(mt=vt.call(rt.childNodes),rt.childNodes),mt[rt.childNodes.length].nodeType}catch(e){pt={apply:mt.length?function(e,t){ht.apply(e,vt.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}function LO(){var r=[];return function e(t,n){return r.push(t+" ")>ze.cacheLength&&delete e[r.shift()],e[t+" "]=n}}function FO(e){return e[nt]=!0,e}function HO(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||ft)-(~e.sourceIndex||ft);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function zO(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function WO(n){return function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===n}}function UO(a){return FO(function(i){return i=+i,FO(function(e,t){for(var n,r=a([],e.length,i),o=r.length;o--;)e[n=r[o]]&&(e[n]=!(t[n]=e[n]))})})}function jO(e){return e&&typeof e.getElementsByTagName!==lt&&e}for(Fe in He=(Ht=function(e,t,n,r){var o,i,a,u,s,c,l,f,d,m;if((t?t.ownerDocument||t:rt)!==Ge&&Ke(t),n=n||[],!e||"string"!=typeof e)return n;if(1!==(u=(t=t||Ge).nodeType)&&9!==u)return[];if(Qe&&!r){if(o=Bt.exec(e))if(a=o[1]){if(9===u){if(!(i=t.getElementById(a))||!i.parentNode)return n;if(i.id===a)return n.push(i),n}else if(t.ownerDocument&&(i=t.ownerDocument.getElementById(a))&&tt(t,i)&&i.id===a)return n.push(i),n}else{if(o[2])return pt.apply(n,t.getElementsByTagName(e)),n;if((a=o[3])&&He.getElementsByClassName)return pt.apply(n,t.getElementsByClassName(a)),n}if(He.qsa&&(!Ze||!Ze.test(e))){if(f=l=nt,d=t,m=9===u&&e,1===u&&"object"!==t.nodeName.toLowerCase()){for(c=je(e),(l=t.getAttribute("id"))?f=l.replace(It,"\\$&"):t.setAttribute("id",f),f="[id='"+f+"'] ",s=c.length;s--;)c[s]=f+qO(c[s]);d=Mt.test(e)&&jO(t.parentNode)||t,m=c.join(",")}if(m)try{return pt.apply(n,d.querySelectorAll(m)),n}catch(e){}finally{l||t.removeAttribute("id")}}}return qe(e.replace(Nt,"$1"),t,n,r)}).support={},Ue=Ht.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},Ke=Ht.setDocument=function(e){var t,s=e?e.ownerDocument||e:rt,n=s.defaultView;return s!==Ge&&9===s.nodeType&&s.documentElement?(Je=(Ge=s).documentElement,Qe=!Ue(s),n&&n!==function(e){try{return e.top}catch(e){}return null}(n)&&(n.addEventListener?n.addEventListener("unload",function(){Ke()},!1):n.attachEvent&&n.attachEvent("onunload",function(){Ke()})),He.attributes=!0,He.getElementsByTagName=!0,He.getElementsByClassName=Pt.test(s.getElementsByClassName),He.getById=!0,ze.find.ID=function(e,t){if(typeof t.getElementById!==lt&&Qe){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},ze.filter.ID=function(e){var t=e.replace(Lt,Ft);return function(e){return e.getAttribute("id")===t}},ze.find.TAG=He.getElementsByTagName?function(e,t){if(typeof t.getElementsByTagName!==lt)return t.getElementsByTagName(e)}:function(e,t){var n,r=[],o=0,i=t.getElementsByTagName(e);if("*"!==e)return i;for(;n=i[o++];)1===n.nodeType&&r.push(n);return r},ze.find.CLASS=He.getElementsByClassName&&function(e,t){if(Qe)return t.getElementsByClassName(e)},et=[],Ze=[],He.disconnectedMatch=!0,Ze=Ze.length&&new RegExp(Ze.join("|")),et=et.length&&new RegExp(et.join("|")),t=Pt.test(Je.compareDocumentPosition),tt=t||Pt.test(Je.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},ct=t?function(e,t){if(e===t)return Xe=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!He.sortDetached&&t.compareDocumentPosition(e)===n?e===s||e.ownerDocument===rt&&tt(rt,e)?-1:t===s||t.ownerDocument===rt&&tt(rt,t)?1:Ye?bt.call(Ye,e)-bt.call(Ye,t):0:4&n?-1:1)}:function(e,t){if(e===t)return Xe=!0,0;var n,r=0,o=e.parentNode,i=t.parentNode,a=[e],u=[t];if(!o||!i)return e===s?-1:t===s?1:o?-1:i?1:Ye?bt.call(Ye,e)-bt.call(Ye,t):0;if(o===i)return HO(e,t);for(n=e;n=n.parentNode;)a.unshift(n);for(n=t;n=n.parentNode;)u.unshift(n);for(;a[r]===u[r];)r++;return r?HO(a[r],u[r]):a[r]===rt?-1:u[r]===rt?1:0},s):Ge},Ht.matches=function(e,t){return Ht(e,null,null,t)},Ht.matchesSelector=function(e,t){if((e.ownerDocument||e)!==Ge&&Ke(e),t=t.replace(kt,"='$1']"),He.matchesSelector&&Qe&&(!et||!et.test(t))&&(!Ze||!Ze.test(t)))try{var n=(void 0).call(e,t);if(n||He.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){}return 0<Ht(t,Ge,null,[e]).length},Ht.contains=function(e,t){return(e.ownerDocument||e)!==Ge&&Ke(e),tt(e,t)},Ht.attr=function(e,t){(e.ownerDocument||e)!==Ge&&Ke(e);var n=ze.attrHandle[t.toLowerCase()],r=n&&dt.call(ze.attrHandle,t.toLowerCase())?n(e,t,!Qe):void 0;return void 0!==r?r:He.attributes||!Qe?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},Ht.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},Ht.uniqueSort=function(e){var t,n=[],r=0,o=0;if(Xe=!He.detectDuplicates,Ye=!He.sortStable&&e.slice(0),e.sort(ct),Xe){for(;t=e[o++];)t===e[o]&&(r=n.push(o));for(;r--;)e.splice(n[r],1)}return Ye=null,e},We=Ht.getText=function(e){var t,n="",r=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=We(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[r++];)n+=We(t);return n},(ze=Ht.selectors={cacheLength:50,createPseudo:FO,match:At,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(Lt,Ft),e[3]=(e[3]||e[4]||e[5]||"").replace(Lt,Ft),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||Ht.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&Ht.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return At.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&Rt.test(n)&&(t=je(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(Lt,Ft).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=at[e+" "];return t||(t=new RegExp("(^|"+xt+")"+e+"("+xt+"|$)"))&&at(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==lt&&e.getAttribute("class")||"")})},ATTR:function(n,r,o){return function(e){var t=Ht.attr(e,n);return null==t?"!="===r:!r||(t+="","="===r?t===o:"!="===r?t!==o:"^="===r?o&&0===t.indexOf(o):"*="===r?o&&-1<t.indexOf(o):"$="===r?o&&t.slice(-o.length)===o:"~="===r?-1<(" "+t+" ").indexOf(o):"|="===r&&(t===o||t.slice(0,o.length+1)===o+"-"))}},CHILD:function(m,e,t,g,h){var p="nth"!==m.slice(0,3),v="last"!==m.slice(-4),b="of-type"===e;return 1===g&&0===h?function(e){return!!e.parentNode}:function(e,t,n){var r,o,i,a,u,s,c=p!==v?"nextSibling":"previousSibling",l=e.parentNode,f=b&&e.nodeName.toLowerCase(),d=!n&&!b;if(l){if(p){for(;c;){for(i=e;i=i[c];)if(b?i.nodeName.toLowerCase()===f:1===i.nodeType)return!1;s=c="only"===m&&!s&&"nextSibling"}return!0}if(s=[v?l.firstChild:l.lastChild],v&&d){for(u=(r=(o=l[nt]||(l[nt]={}))[m]||[])[0]===ot&&r[1],a=r[0]===ot&&r[2],i=u&&l.childNodes[u];i=++u&&i&&i[c]||(a=u=0)||s.pop();)if(1===i.nodeType&&++a&&i===e){o[m]=[ot,u,a];break}}else if(d&&(r=(e[nt]||(e[nt]={}))[m])&&r[0]===ot)a=r[1];else for(;(i=++u&&i&&i[c]||(a=u=0)||s.pop())&&((b?i.nodeName.toLowerCase()!==f:1!==i.nodeType)||!++a||(d&&((i[nt]||(i[nt]={}))[m]=[ot,a]),i!==e)););return(a-=h)===g||a%g==0&&0<=a/g}}},PSEUDO:function(e,i){var t,a=ze.pseudos[e]||ze.setFilters[e.toLowerCase()]||Ht.error("unsupported pseudo: "+e);return a[nt]?a(i):1<a.length?(t=[e,e,"",i],ze.setFilters.hasOwnProperty(e.toLowerCase())?FO(function(e,t){for(var n,r=a(e,i),o=r.length;o--;)e[n=bt.call(e,r[o])]=!(t[n]=r[o])}):function(e){return a(e,0,t)}):a}},pseudos:{not:FO(function(e){var r=[],o=[],u=Ve(e.replace(Nt,"$1"));return u[nt]?FO(function(e,t,n,r){for(var o,i=u(e,null,r,[]),a=e.length;a--;)(o=i[a])&&(e[a]=!(t[a]=o))}):function(e,t,n){return r[0]=e,u(r,null,n,o),!o.pop()}}),has:FO(function(t){return function(e){return 0<Ht(t,e).length}}),contains:FO(function(t){return t=t.replace(Lt,Ft),function(e){return-1<(e.textContent||e.innerText||We(e)).indexOf(t)}}),lang:FO(function(n){return _t.test(n||"")||Ht.error("unsupported lang: "+n),n=n.replace(Lt,Ft).toLowerCase(),function(e){var t;do{if(t=Qe?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===n||0===t.indexOf(n+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=_e.window.location&&_e.window.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===Je},focus:function(e){return e===Ge.activeElement&&(!Ge.hasFocus||Ge.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!ze.pseudos.empty(e)},header:function(e){return Ot.test(e.nodeName)},input:function(e){return Dt.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:UO(function(){return[0]}),last:UO(function(e,t){return[t-1]}),eq:UO(function(e,t,n){return[n<0?n+t:n]}),even:UO(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:UO(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:UO(function(e,t,n){for(var r=n<0?n+t:n;0<=--r;)e.push(r);return e}),gt:UO(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=ze.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})ze.pseudos[Fe]=zO(Fe);for(Fe in{submit:!0,reset:!0})ze.pseudos[Fe]=WO(Fe);function VO(){}function qO(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function $O(a,e,t){var u=e.dir,s=t&&"parentNode"===u,c=it++;return e.first?function(e,t,n){for(;e=e[u];)if(1===e.nodeType||s)return a(e,t,n)}:function(e,t,n){var r,o,i=[ot,c];if(n){for(;e=e[u];)if((1===e.nodeType||s)&&a(e,t,n))return!0}else for(;e=e[u];)if(1===e.nodeType||s){if((r=(o=e[nt]||(e[nt]={}))[u])&&r[0]===ot&&r[1]===c)return i[2]=r[2];if((o[u]=i)[2]=a(e,t,n))return!0}}}function YO(o){return 1<o.length?function(e,t,n){for(var r=o.length;r--;)if(!o[r](e,t,n))return!1;return!0}:o[0]}function XO(e,t,n,r,o){for(var i,a=[],u=0,s=e.length,c=null!=t;u<s;u++)(i=e[u])&&(n&&!n(i,r,o)||(a.push(i),c&&t.push(u)));return a}function KO(m,g,h,p,v,e){return p&&!p[nt]&&(p=KO(p)),v&&!v[nt]&&(v=KO(v,e)),FO(function(e,t,n,r){var o,i,a,u=[],s=[],c=t.length,l=e||function(e,t,n){for(var r=0,o=t.length;r<o;r++)Ht(e,t[r],n);return n}(g||"*",n.nodeType?[n]:n,[]),f=!m||!e&&g?l:XO(l,u,m,n,r),d=h?v||(e?m:c||p)?[]:t:f;if(h&&h(f,d,n,r),p)for(o=XO(d,s),p(o,[],n,r),i=o.length;i--;)(a=o[i])&&(d[s[i]]=!(f[s[i]]=a));if(e){if(v||m){if(v){for(o=[],i=d.length;i--;)(a=d[i])&&o.push(f[i]=a);v(null,d=[],o,r)}for(i=d.length;i--;)(a=d[i])&&-1<(o=v?bt.call(e,a):u[i])&&(e[o]=!(t[o]=a))}}else d=XO(d===t?d.splice(c,d.length):d),v?v(null,t,d,r):pt.apply(t,d)})}function GO(e){for(var r,t,n,o=e.length,i=ze.relative[e[0].type],a=i||ze.relative[" "],u=i?1:0,s=$O(function(e){return e===r},a,!0),c=$O(function(e){return-1<bt.call(r,e)},a,!0),l=[function(e,t,n){return!i&&(n||t!==$e)||((r=t).nodeType?s(e,t,n):c(e,t,n))}];u<o;u++)if(t=ze.relative[e[u].type])l=[$O(YO(l),t)];else{if((t=ze.filter[e[u].type].apply(null,e[u].matches))[nt]){for(n=++u;n<o&&!ze.relative[e[n].type];n++);return KO(1<u&&YO(l),1<u&&qO(e.slice(0,u-1).concat({value:" "===e[u-2].type?"*":""})).replace(Nt,"$1"),t,u<n&&GO(e.slice(u,n)),n<o&&GO(e=e.slice(n)),n<o&&qO(e))}l.push(t)}return YO(l)}function JO(e,u){var t=e,n=function(e,t,n,r){var o,i;if(e){if(!r&&e[t])return e[t];if(e!==u){if(o=e[n])return o;for(i=e.parentNode;i&&i!==u;i=i.parentNode)if(o=i[n])return o}}},r=function(e,t,n,r){var o,i,a;if(e){if(o=e[n],u&&o===u)return;if(o){if(!r)for(a=o[t];a;a=a[t])if(!a[t])return a;return o}if((i=e.parentNode)&&i!==u)return i}};this.current=function(){return t},this.next=function(e){return t=n(t,"firstChild","nextSibling",e)},this.prev=function(e){return t=n(t,"lastChild","previousSibling",e)},this.prev2=function(e){return t=r(t,"lastChild","previousSibling",e)}}function QO(i){var e,t,n,r,o,a,u,s,c,l,f,d,m,S,g,h,p,v,b,y,N={},x={},T=[],w={},C={},E=function(e,t,n){var r=i[e];return r?r=na(r,/[, ]/,na(r.toUpperCase(),/[, ]/)):(r=ea[e])||(r=na(t," ",na(t.toUpperCase()," ")),r=oa(r,n),ea[e]=r),r};return n=sa((i=i||{}).schema),!1===i.verify_html&&(i.valid_elements="*[*]"),e=ca(i.valid_styles),t=ca(i.invalid_styles,"map"),s=ca(i.valid_classes,"map"),r=E("whitespace_elements","pre script noscript style textarea video audio iframe object code"),o=E("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),a=E("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),u=E("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls"),l=E("non_empty_elements","td th iframe video audio object script pre code",a),f=E("move_caret_before_on_enter_elements","table",l),d=E("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),c=E("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",d),m=E("text_inline_elements","span strong b em i font strike u var cite dfn code mark q sup sub samp"),ra((i.special||"script noscript noframes noembed title style textarea xmp").split(" "),function(e){C[e]=new RegExp("</"+e+"[^>]*>","gi")}),S=function(e){return new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$")},g=function(e){var t,n,r,o,i,a,u,s,c,l,f,d,m,g,h,p,v,b,y,x=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)\])?$/,w=/^([!\-])?(\w+[\\:]:\w+|[^=:<]+)?(?:([=:<])(.*))?$/,C=/[*?+]/;if(e)for(e=ua(e,","),N["@"]&&(p=N["@"].attributes,v=N["@"].attributesOrder),t=0,n=e.length;t<n;t++)if(i=x.exec(e[t])){if(g=i[1],c=i[2],h=i[3],s=i[5],a={attributes:d={},attributesOrder:m=[]},"#"===g&&(a.paddEmpty=!0),"-"===g&&(a.removeEmpty=!0),"!"===i[4]&&(a.removeEmptyAttrs=!0),p){for(b in p)d[b]=p[b];m.push.apply(m,v)}if(s)for(r=0,o=(s=ua(s,"|")).length;r<o;r++)if(i=w.exec(s[r])){if(u={},f=i[1],l=i[2].replace(/[\\:]:/g,":"),g=i[3],y=i[4],"!"===f&&(a.attributesRequired=a.attributesRequired||[],a.attributesRequired.push(l),u.required=!0),"-"===f){delete d[l],m.splice(aa(m,l),1);continue}g&&("="===g&&(a.attributesDefault=a.attributesDefault||[],a.attributesDefault.push({name:l,value:y}),u.defaultValue=y),":"===g&&(a.attributesForced=a.attributesForced||[],a.attributesForced.push({name:l,value:y}),u.forcedValue=y),"<"===g&&(u.validValues=na(y,"?"))),C.test(l)?(a.attributePatterns=a.attributePatterns||[],u.pattern=S(l),a.attributePatterns.push(u)):(d[l]||m.push(l),d[l]=u)}p||"@"!==c||(p=d,v=m),h&&(a.outputName=c,N[h]=a),C.test(c)?(a.pattern=S(c),T.push(a)):N[c]=a}},h=function(e){N={},T=[],g(e),ra(n,function(e,t){x[t]=e.children})},p=function(e){var a=/^(~)?(.+)$/;e&&(ea.text_block_elements=ea.block_elements=null,ra(ua(e,","),function(e){var t,n=a.exec(e),r="~"===n[1],o=r?"span":"div",i=n[2];x[i]=x[o],w[i]=o,r||(c[i.toUpperCase()]={},c[i]={}),N[i]||(t=N[o],delete(t=oa({},t)).removeEmptyAttrs,delete t.removeEmpty,N[i]=t),ra(x,function(e,t){e[o]&&(x[t]=e=oa({},x[t]),e[i]=e[o])})}))},v=function(e){var o=/^([+\-]?)(\w+)\[([^\]]+)\]$/;ea[i.schema]=null,e&&ra(ua(e,","),function(e){var t,n,r=o.exec(e);r&&(n=r[1],t=n?x[r[2]]:x[r[2]]={"#comment":{}},t=x[r[2]],ra(ua(r[3],"|"),function(e){"-"===n?delete t[e]:t[e]={}}))})},b=function(e){var t,n=N[e];if(n)return n;for(t=T.length;t--;)if((n=T[t]).pattern.test(e))return n},i.valid_elements?h(i.valid_elements):(ra(n,function(e,t){N[t]={attributes:e.attributes,attributesOrder:e.attributesOrder},x[t]=e.children}),"html5"!==i.schema&&ra(ua("strong/b em/i"),function(e){e=ua(e,"/"),N[e[1]].outputName=e[0]}),ra(ua("ol ul sub sup blockquote span font a table tbody tr strong em b i"),function(e){N[e]&&(N[e].removeEmpty=!0)}),ra(ua("p h1 h2 h3 h4 h5 h6 th td pre div address caption li"),function(e){N[e].paddEmpty=!0}),ra(ua("span"),function(e){N[e].removeEmptyAttrs=!0})),p(i.custom_elements),v(i.valid_children),g(i.extended_valid_elements),v("+ol[ul|ol],+ul[ul|ol]"),ra({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},function(e,t){N[t]&&(N[t].parentsRequired=ua(e))}),i.invalid_elements&&ra(ia(i.invalid_elements),function(e){N[e]&&delete N[e]}),b("span")||g("span[!data-mce-type|*]"),y=function(e,t){var n,r,o=b(e);if(o){if(!t)return!0;if(o.attributes[t])return!0;if(n=o.attributePatterns)for(r=n.length;r--;)if(n[r].pattern.test(e))return!0}return!1},{children:x,elements:N,getValidStyles:function(){return e},getValidClasses:function(){return s},getBlockElements:function(){return c},getInvalidStyles:function(){return t},getShortEndedElements:function(){return a},getTextBlockElements:function(){return d},getTextInlineElements:function(){return m},getBoolAttrs:function(){return u},getElementRule:b,getSelfClosingElements:function(){return o},getNonEmptyElements:function(){return l},getMoveCaretBeforeOnEnterElements:function(){return f},getWhiteSpaceElements:function(){return r},getSpecialElements:function(){return C},isValidChild:function(e,t){var n=x[e.toLowerCase()];return!(!n||!n[t.toLowerCase()])},isValid:y,getCustomElements:function(){return w},addValidElements:g,setValidElements:h,addCustomElements:p,addValidChildren:v}}function ZO(p,e){var v,t,u,s,b=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,y=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,x=/\s*([^:]+):\s*([^;]+);?/g,w=/\s+$/,C={},S="\ufeff";for(p=p||{},e&&(u=e.getValidStyles(),s=e.getInvalidStyles()),t=("\\\" \\' \\; \\: ; : "+S).split(" "),v=0;v<t.length;v++)C[t[v]]=S+v,C[S+v]=t[v];return{toHex:function(e){return e.replace(b,la)},parse:function(e){var t,n,r,o,s={},u=p.url_converter,c=p.url_converter_scope||this,i=function(e,t,n){var r,o,i,a,u=s[e+"-top"+t];if(u&&(r=s[e+"-right"+t])&&(o=s[e+"-bottom"+t])&&(i=s[e+"-left"+t])){for(v=(a=[u,r,o,i]).length-1;v--&&a[v]===a[v+1];);-1<v&&n||(s[e+t]=-1===v?a[0]:a.join(" "),delete s[e+"-top"+t],delete s[e+"-right"+t],delete s[e+"-bottom"+t],delete s[e+"-left"+t])}},a=function(e){var t,n=s[e];if(n){for(t=(n=n.split(" ")).length;t--;)if(n[t]!==n[0])return!1;return s[e]=n[0],!0}},l=function(e,t,n,r){a(t)&&a(n)&&a(r)&&(s[e]=s[t]+" "+s[n]+" "+s[r],delete s[t],delete s[n],delete s[r])},f=function(e){return o=!0,C[e]},d=function(e,t){return o&&(e=e.replace(/\uFEFF[0-9]/g,function(e){return C[e]})),t||(e=e.replace(/\\([\'\";:])/g,"$1")),e},m=function(e){return String.fromCharCode(parseInt(e.slice(1),16))},g=function(e){return e.replace(/\\[0-9a-f]+/gi,m)},h=function(e,t,n,r,o,i){if(o=o||i)return"'"+(o=d(o)).replace(/\'/g,"\\'")+"'";if(t=d(t||n||r),!p.allow_script_urls){var a=t.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(a))return"";if(!p.allow_svg_data_urls&&/^data:image\/svg/i.test(a))return""}return u&&(t=u.call(c,t,"style")),"url('"+t.replace(/\'/g,"\\'")+"')"};if(e){for(e=(e=e.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,f).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(e){return e.replace(/[;:]/g,f)});t=x.exec(e);)if(x.lastIndex=t.index+t[0].length,n=t[1].replace(w,"").toLowerCase(),r=t[2].replace(w,""),n&&r){if(n=g(n),r=g(r),-1!==n.indexOf(S)||-1!==n.indexOf('"'))continue;if(!p.allow_script_urls&&("behavior"===n||/expression\s*\(|\/\*|\*\//.test(r)))continue;"font-weight"===n&&"700"===r?r="bold":"color"!==n&&"background-color"!==n||(r=r.toLowerCase()),r=(r=r.replace(b,la)).replace(y,h),s[n]=o?d(r,!0):r}i("border","",!0),i("border","-width"),i("border","-color"),i("border","-style"),i("padding",""),i("margin",""),l("border","border-width","border-style","border-color"),"medium none"===s.border&&delete s.border,"none"===s["border-image"]&&delete s["border-image"]}return s},serialize:function(i,e){var t,n,a="",r=function(e){var t,n,r,o;if(t=u[e])for(n=0,r=t.length;n<r;n++)e=t[n],(o=i[e])&&(a+=(0<a.length?" ":"")+e+": "+o+";")},o=function(e,t){var n;return!((n=s["*"])&&n[e]||(n=s[t])&&n[e])};if(e&&u)r("*"),r(e);else for(t in i)!(n=i[t])||s&&!o(t,e)||(a+=(0<a.length?" ":"")+t+": "+n+";");return a}}}function eP(a,u){var s,r,i,o,t,e,n,c,l,f,d,m,g,h,p,v,b,y,x,w,C,S,N,T,E,k,R,_,A,D,O,P,B,M,I,L,F,H,z,W,U,j,V,q,$,Y,X,K,G,J,Q,Z,ee,te,ne,re,oe,ie,ae,ue,se,ce,le,fe,de,me,ge,he,pe,ve,be,ye,xe,we,Ce,Se,Ne,Te,Ee,ke,Re=this;return void 0===u&&(u={}),r={},i=_e.window,o={},n=e=!(t=0),ye=a,void 0===(xe={contentCssCors:u.contentCssCors})&&(xe={}),we=0,Ce={},Se=xe.maxLoadTime||5e3,Ne=function(e){ye.getElementsByTagName("head")[0].appendChild(e)},Ee=function(t){return jo.nu(function(e){Te(t,PO(e,BO(Xo.value(t))),PO(e,BO(Xo.error(t))))})},ke=function(e){return e.fold(MO,MO)},c={load:Te=function(e,t,n){var o,r,i,a,u=function(){for(var e=a.passed,t=e.length;t--;)e[t]();a.status=2,a.passed=[],a.failed=[]},s=function(){for(var e=a.failed,t=e.length;t--;)e[t]();a.status=3,a.passed=[],a.failed=[]},c=function(){var e=_e.navigator.userAgent.match(/WebKit\/(\d*)/);return!!(e&&parseInt(e[1],10)<536)},l=function(e,t){e()||((new Date).getTime()-i<Se?Pe.setTimeout(t):s())},f=function(){l(function(){for(var e,t,n=ye.styleSheets,r=n.length;r--;)if((t=(e=n[r]).ownerNode?e.ownerNode:e.owningElement)&&t.id===o.id)return u(),!0},f)},d=function(){l(function(){try{var e=r.sheet.cssRules;return u(),!!e}catch(e){}},d)};if(e=un._addCacheSuffix(e),Ce[e]?a=Ce[e]:(a={passed:[],failed:[]},Ce[e]=a),t&&a.passed.push(t),n&&a.failed.push(n),1!==a.status)if(2!==a.status)if(3!==a.status){if(a.status=1,(o=ye.createElement("link")).rel="stylesheet",o.type="text/css",o.id="u"+we++,o.async=!1,o.defer=!1,i=(new Date).getTime(),xe.contentCssCors&&(o.crossOrigin="anonymous"),"onload"in o&&!c())o.onload=f,o.onerror=s;else{if(0<_e.navigator.userAgent.indexOf("Firefox"))return(r=ye.createElement("style")).textContent='@import "'+e+'"',d(),void Ne(r);f()}Ne(o),o.href=e}else s();else u()},loadAll:function(e,n,r){qo(Ae(e,Ee)).get(function(e){var t=De(e,function(e){return e.isValue()});0<t.fail.length?r(t.fail.map(ke)):n(t.pass.map(ke))})}},l=[],f=u.schema?u.schema:QO({}),d=ZO({url_converter:u.url_converter,url_converter_scope:u.url_converter_scope},u.schema),m=u.ownEvents?new Le(u.proxy):Le.Event,g=f.getBlockElements(),h=kn.overrideDefaults(function(){return{context:a,element:be.getRoot()}}),p=function(e){if("string"==typeof e)return!!g[e];if(e){var t=e.nodeType;if(t)return!(1!==t||!g[e.nodeName])}return!1},v=function(e){if(e&&a&&"string"==typeof e){var t=a.getElementById(e);return t&&t.id!==e?a.getElementsByName(e)[1]:t}return e},b=function(e){return"string"==typeof e&&(e=v(e)),h(e)},y=function(e,t,n){var r,o,i=b(e);return i.length&&(o=(r=s[t])&&r.get?r.get(i,t):i.attr(t)),void 0===o&&(o=n||""),o},x=function(e){var t=v(e);return t?t.attributes:[]},w=function(e,t,n){var r,o,i;""===n&&(n=null),r=(i=b(e)).attr(t),i.length&&((o=s[t])&&o.set?o.set(i,n,t):i.attr(t,n),r!==n&&u.onSetAttrib&&u.onSetAttrib({attrElm:i,attrName:t,attrValue:n}))},C=function(t,e){if(!ma||1!==t.nodeType||e)return t.cloneNode(e);if(e)return null;var n=a.createElement(t.nodeName);return fa(x(t),function(e){w(n,e.nodeName,y(t,e.nodeName))}),n},S=function(){return u.root_element||a.body},N=function(e){var t=e||i,n=t.document,r=n.documentElement;return{x:t.pageXOffset||r.scrollLeft,y:t.pageYOffset||r.scrollTop,w:t.innerWidth||r.clientWidth,h:t.innerHeight||r.clientHeight}},T=function(e,t){return Io.getPos(a.body,v(e),t)},E=function(e,t,n){var r=b(e).css(t,n);u.update_styles&&va(d,r)},k=function(e,t){var n=b(e).css(t);u.update_styles&&va(d,n)},R=function(e,t,n){var r=b(e);return n?r.css(t):("float"===(t=t.replace(/-(\D)/g,function(e,t){return t.toUpperCase()}))&&(t=Oe.ie&&Oe.ie<12?"styleFloat":"cssFloat"),r[0]&&r[0].style?r[0].style[t]:void 0)},_=function(e){var t,n;return e=v(e),t=R(e,"width"),n=R(e,"height"),-1===t.indexOf("px")&&(t=0),-1===n.indexOf("px")&&(n=0),{w:parseInt(t,10)||e.offsetWidth||e.clientWidth,h:parseInt(n,10)||e.offsetHeight||e.clientHeight}},A=function(e){var t,n;return e=v(e),t=T(e),n=_(e),{x:t.x,y:t.y,w:n.w,h:n.h}},D=function(e,t){var n,r,o,i;if(!e)return!1;if(!Array.isArray(e)){if("*"===t)return 1===e.nodeType;if(ga.test(t)){for(r=t.toLowerCase().split(/,/),o=e.nodeName.toLowerCase(),n=r.length-1;0<=n;n--)if(r[n]===o)return!0;return!1}if(e.nodeType&&1!==e.nodeType)return!1}return i=Array.isArray(e)?e:[e],0<Ht(t,i[0].ownerDocument||i[0],null,i).length},O=function(e,t,n,r){var o,i=[],a=v(e);for(r=void 0===r,n=n||("BODY"!==S().nodeName?S().parentNode:null),un.is(t,"string")&&(t="*"===(o=t)?function(e){return 1===e.nodeType}:function(e){return D(e,o)});a&&a!==n&&a.nodeType&&9!==a.nodeType;){if(!t||"function"==typeof t&&t(a)){if(!r)return[a];i.push(a)}a=a.parentNode}return r?i:null},P=function(e,t,n){var r=O(e,t,n,!1);return r&&0<r.length?r[0]:null},B=function(e,t,n){var r=t;if(e)for("string"==typeof t&&(r=function(e){return D(e,t)}),e=e[n];e;e=e[n])if("function"==typeof r&&r(e))return e;return null},M=function(e,t){return B(e,t,"nextSibling")},I=function(e,t){return B(e,t,"previousSibling")},L=function(e,t){return Ht(e,v(t)||u.root_element||a,[])},F=function(e,n,r){var o,t,i="string"==typeof e?v(e):e;return!!i&&(un.isArray(i)&&(i.length||0===i.length)?(o=[],fa(i,function(e,t){e&&("string"==typeof e&&(e=v(e)),o.push(n.call(r,e,t)))}),o):(t=r||Re,n.call(t,i)))},H=function(e,t){b(e).each(function(e,n){fa(t,function(e,t){w(n,t,e)})})},z=function(e,n){var t=b(e);ma?t.each(function(e,t){if(!1!==t.canHaveHTML){for(;t.firstChild;)t.removeChild(t.firstChild);try{t.innerHTML="<br>"+n,t.removeChild(t.firstChild)}catch(e){kn("<div></div>").html("<br>"+n).contents().slice(1).appendTo(t)}return n}}):t.html(n)},W=function(e,n,r,o,i){return F(e,function(e){var t="string"==typeof n?a.createElement(n):n;return H(t,r),o&&("string"!=typeof o&&o.nodeType?t.appendChild(o):"string"==typeof o&&z(t,o)),i?t:e.appendChild(t)})},U=function(e,t,n){return W(a.createElement(e),e,t,n,!0)},j=Zi.decode,V=Zi.encodeAllRaw,q=function(e){var t,n=a.createElement("div"),r=a.createDocumentFragment();for(e&&(n.innerHTML=e);t=n.firstChild;)r.appendChild(t);return r},$=function(e,t){var n=b(e);return t?n.each(function(){for(var e;e=this.firstChild;)3===e.nodeType&&0===e.data.length?this.removeChild(e):this.parentNode.insertBefore(e,this)}).remove():n.remove(),1<n.length?n.toArray():n[0]},Y=function(e){return d.parse(e)},X=function(e,t){return d.serialize(e,t)},K=function(e){var t,n;if(be!==eP.DOM&&a===_e.document){if(r[e])return;r[e]=!0}(n=a.getElementById("mceDefaultStyles"))||((n=a.createElement("style")).id="mceDefaultStyles",n.type="text/css",(t=a.getElementsByTagName("head")[0]).firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n)),n.styleSheet?n.styleSheet.cssText+=e:n.appendChild(a.createTextNode(e))},G=function(e){var n;be===eP.DOM||a!==_e.document?(e||(e=""),n=a.getElementsByTagName("head")[0],fa(e.split(","),function(e){var t;e=un._addCacheSuffix(e),o[e]||(o[e]=!0,t=U("link",{rel:"stylesheet",href:e}),n.appendChild(t))})):eP.DOM.loadCSS(e)},J=function(e,t,n){b(e).toggleClass(t,n).each(function(){""===this.className&&kn(this).attr("class",null)})},Q=function(e,t){b(e).addClass(t)},Z=function(e,t){return b(e).hasClass(t)},ee=function(e){b(e).show()},te=function(e){b(e).hide()},ne=function(e){return"none"===b(e).css("display")},re=function(e){var t="string"==typeof e?v(e):e;return Pi.isElement(t)?t.outerHTML:kn("<div></div>").append(kn(t).clone()).html()},oe=function(e,t){b(e).each(function(){try{if("outerHTML"in this)return void(this.outerHTML=t)}catch(e){}$(kn(this).html(t),!0)})},ie=function(e,t){var r=v(t);return F(e,function(e){var t,n;return t=r.parentNode,(n=r.nextSibling)?t.insertBefore(e,n):t.appendChild(e),e})},ue=function(t,e){var n;return t.nodeName!==e.toUpperCase()&&(n=U(e),fa(x(t),function(e){w(n,e.nodeName,y(t,e.nodeName))}),ae(n,t,!0)),n||t},se=function(e){return d.toHex(un.trim(e))},ce=function(e,t){var n,r,o,i,a,u,s,c=0;if(e=e.firstChild){a=new JO(e,e.parentNode),t=t||(f?f.getNonEmptyElements():null),i=f?f.getWhiteSpaceElements():{};do{if(o=e.nodeType,Pi.isElement(e)){if(s=e.getAttribute("data-mce-bogus")){e=a.next("all"===s);continue}if(u=e.nodeName.toLowerCase(),t&&t[u]){if("br"!==u)return!1;c++,e=a.next();continue}for(n=(r=x(e)).length;n--;)if("name"===(u=r[n].nodeName)||"data-mce-bookmark"===u)return!1}if(8===o)return!1;if(3===o&&!ha.test(e.nodeValue))return!1;if(3===o&&e.parentNode&&i[e.parentNode.nodeName]&&ha.test(e.nodeValue))return!1;e=a.next()}while(e)}return c<=1},le=function(){return a.createRange()},fe=function(e,t,n){var r,o,i,a=le();if(e&&t)return a.setStart(e.parentNode,ba(e)),a.setEnd(t.parentNode,ba(t)),r=a.extractContents(),(a=le()).setStart(t.parentNode,ba(t)+1),a.setEnd(e.parentNode,ba(e)+1),o=a.extractContents(),(i=e.parentNode).insertBefore(Li.trimNode(be,r),e),n?i.insertBefore(n,e):i.insertBefore(t,e),i.insertBefore(Li.trimNode(be,o),e),$(e),n||t},de=function(e,t,n,r){if(un.isArray(e)){for(var o=e.length;o--;)e[o]=de(e[o],t,n,r);return e}return!u.collect||e!==a&&e!==i||l.push([e,t,n,r]),m.bind(e,t,n,r||be)},me=function(e,t,n){var r,o;if(un.isArray(e)){for(r=e.length;r--;)e[r]=me(e[r],t,n);return e}if(l&&(e===a||e===i))for(r=l.length;r--;)e!==(o=l[r])[0]||t&&t!==o[1]||n&&n!==o[2]||m.unbind(o[0],o[1],o[2]);return m.unbind(e,t,n)},ge=function(e,t,n){return m.fire(e,t,n)},pe=function(e){for(var t=S(),n=null;e&&e!==t&&null===(n=he(e));e=e.parentNode);return n},ve=function(){var e,t;if(l)for(e=l.length;e--;)t=l[e],m.unbind(t[0],t[1],t[2]);Ht.setDocument&&Ht.setDocument()},be={doc:a,settings:u,win:i,files:o,stdMode:e,boxModel:n,styleSheetLoader:c,boundEvents:l,styles:d,schema:f,events:m,isBlock:p,$:h,$$:b,root:null,clone:C,getRoot:S,getViewPort:N,getRect:A,getSize:_,getParent:P,getParents:O,get:v,getNext:M,getPrev:I,select:L,is:D,add:W,create:U,createHTML:function(e,t,n){var r,o="";for(r in o+="<"+e,t)t.hasOwnProperty(r)&&null!==t[r]&&void 0!==t[r]&&(o+=" "+r+'="'+V(t[r])+'"');return void 0!==n?o+">"+n+"</"+e+">":o+" />"},createFragment:q,remove:$,setStyle:E,getStyle:R,setStyles:k,removeAllAttribs:function(e){return F(e,function(e){var t,n=e.attributes;for(t=n.length-1;0<=t;t--)e.removeAttributeNode(n.item(t))})},setAttrib:w,setAttribs:H,getAttrib:y,getPos:T,parseStyle:Y,serializeStyle:X,addStyle:K,loadCSS:G,addClass:Q,removeClass:function(e,t){J(e,t,!1)},hasClass:Z,toggleClass:J,show:ee,hide:te,isHidden:ne,uniqueId:function(e){return(e||"mce_")+t++},setHTML:z,getOuterHTML:re,setOuterHTML:oe,decode:j,encode:V,insertAfter:ie,replace:ae=function(t,e,n){return F(e,function(e){return un.is(e,"array")&&(t=t.cloneNode(!0)),n&&fa(da(e.childNodes),function(e){t.appendChild(e)}),e.parentNode.replaceChild(t,e)})},rename:ue,findCommonAncestor:function(e,t){for(var n,r=e;r;){for(n=t;n&&r!==n;)n=n.parentNode;if(r===n)break;r=r.parentNode}return!r&&e.ownerDocument?e.ownerDocument.documentElement:r},toHex:se,run:F,getAttribs:x,isEmpty:ce,createRng:le,nodeIndex:ba,split:fe,bind:de,unbind:me,fire:ge,getContentEditable:he=function(e){if(e&&Pi.isElement(e)){var t=e.getAttribute("data-mce-contenteditable");return t&&"inherit"!==t?t:"inherit"!==e.contentEditable?e.contentEditable:null}return null},getContentEditableParent:pe,destroy:ve,isChildOf:function(e,t){for(;e;){if(t===e)return!0;e=e.parentNode}return!1},dumpRng:function(e){return"startContainer: "+e.startContainer.nodeName+", startOffset: "+e.startOffset+", endContainer: "+e.endContainer.nodeName+", endOffset: "+e.endOffset}},s=pa(d,u,function(){return be}),be}function tP(){var r=this,o=[],a={},u={},i=[],e=function(e){if(u[e])return u[e].instance},s=function(e){var t;return u[e]&&(t=u[e].dependencies),t||[]},t=function(e,t){var n=tP.language;if(n&&!1!==tP.languageLoad){if(t)if(-1!==(t=","+t+",").indexOf(","+n.substr(0,2)+","))n=n.substr(0,2);else if(-1===t.indexOf(","+n+","))return;Na.ScriptLoader.add(a[e]+"/langs/"+n+".js")}},n=function(t,e,n){o.push(e),u[t]={instance:e,dependencies:n};var r=De(i,function(e){return e.name===t});return i=r.fail,Ta(r.pass,function(e){e.callback()}),e},c=function(e){delete a[e],delete u[e]},l=function(e,t){return"object"==typeof t?t:"string"==typeof e?{prefix:"",resource:t,suffix:""}:{prefix:e.prefix,resource:t,suffix:e.suffix}},f=function(e,t){var n=r.urls[e];Ta(t,function(e){Na.ScriptLoader.add(n+"/"+e)})},d=function(e,n,t,r){var o=s(e);Ta(o,function(e){var t=l(n,e);m(t.resource,t,void 0,void 0)}),t&&(r?t.call(r):t.call(Na))},m=function(e,t,n,r,o){if(!a[e]){var i="string"==typeof t?t:t.prefix+t.resource+t.suffix;0!==i.indexOf("/")&&-1===i.indexOf("://")&&(i=tP.baseURL+"/"+i),a[e]=i.substring(0,i.lastIndexOf("/")),u[e]?d(e,t,n,r):Na.ScriptLoader.add(i,function(){return d(e,t,n,r)},r,o)}},g=function(e,t){u.hasOwnProperty(e)?t():i.push({name:e,callback:t})};return{items:o,urls:a,lookup:u,_listeners:i,get:e,dependencies:s,requireLangPack:t,add:n,remove:c,createUrl:l,addComponents:f,load:m,waitFor:g}}function nP(e,t,n,r,o){return e(n,r)?y.some(n):M(o)&&o(n)?y.none():t(n,r,o)}function rP(t,n,e){var r=function(){return Rs(t),0===n},o=function(){return Rs(t)?n>=t.data.length:n>=t.childNodes.length},i=function(){var e;return(e=Os(t.ownerDocument)).setStart(t,n),e.setEnd(t,n),e},a=function(){return e||(e=Ws(rP(t,n))),e},u=function(){return 0<a().length},s=function(e){return e&&t===e.container()&&n===e.offset()},c=function(e){return Ds(t,e?n-1:n)};return{container:BO(t),offset:BO(n),toRange:i,getClientRects:a,isVisible:u,isAtStart:r,isAtEnd:o,isEqual:s,getNode:c}}function oP(r){var n,o=du();return fu(r,o),n=lu(r,o),{register:function(e,t){o.register(e,t)},annotate:function(t,n){o.lookup(t).each(function(e){$f(r,t,e,n)})},annotationChanged:function(e,t){n.addListener(e,t)},remove:function(e){au(r,y.some(e)).each(function(e){var t=e.elements;I(t,Ma)})},getAll:function(e){var t=cu(r,e);return Hr(t,function(e){return Ae(e,function(e){return e.dom()})})}}}function iP(e){var u,s,c,l,f,d=[];return u=(e=e||{}).indent,s=xd(e.indent_before||""),c=xd(e.indent_after||""),l=Zi.getEncodeFunc(e.entity_encoding||"raw",e.entities),f="html"===e.element_format,{start:function(e,t,n){var r,o,i,a;if(u&&s[e]&&0<d.length&&0<(a=d[d.length-1]).length&&"\n"!==a&&d.push("\n"),d.push("<",e),t)for(r=0,o=t.length;r<o;r++)i=t[r],d.push(" ",i.name,'="',l(i.value,!0),'"');d[d.length]=!n||f?">":" />",n&&u&&c[e]&&0<d.length&&0<(a=d[d.length-1]).length&&"\n"!==a&&d.push("\n")},end:function(e){var t;d.push("</",e,">"),u&&c[e]&&0<d.length&&0<(t=d[d.length-1]).length&&"\n"!==t&&d.push("\n")},text:function(e,t){0<e.length&&(d[d.length]=t?e:l(e))},cdata:function(e){d.push("<![CDATA[",e,"]]>")},comment:function(e){d.push("\x3c!--",e,"--\x3e")},pi:function(e,t){t?d.push("<?",e," ",l(t),"?>"):d.push("<?",e,"?>"),u&&d.push("\n")},doctype:function(e){d.push("<!DOCTYPE",e,">",u?"\n":"")},reset:function(){d.length=0},getContent:function(){return d.join("").replace(/\n$/,"")}}}function aP(t,g){var h;return void 0===g&&(g=QO()),h=iP(t),(t=t||{}).validate=!("validate"in t)||t.validate,{serialize:function(e){var f,d=t.validate,m={3:function(e){h.text(e.value,e.raw)},8:function(e){h.comment(e.value)},7:function(e){h.pi(e.name,e.value)},10:function(e){h.doctype(e.value)},4:function(e){h.cdata(e.value)},11:function(e){if(e=e.firstChild)for(;f(e),e=e.next;);}};return h.reset(),f=function(e){var t,n,r,o,i,a,u,s,c,l=m[e.type];if(l)l(e);else{if(t=e.name,n=e.shortEnded,r=e.attributes,d&&r&&1<r.length&&((a=[]).map={},c=g.getElementRule(e.name))){for(u=0,s=c.attributesOrder.length;u<s;u++)(o=c.attributesOrder[u])in r.map&&(i=r.map[o],a.map[o]=i,a.push({name:o,value:i}));for(u=0,s=r.length;u<s;u++)(o=r[u].name)in a.map||(i=r.map[o],a.map[o]=i,a.push({name:o,value:i}));r=a}if(h.start(e.name,r,n),!n){if(e=e.firstChild)for(;f(e),e=e.next;);h.end(t)}}},1!==e.type||t.inner?m[11](e):f(e),h.getContent()}}}function uP(u){var o,i,a,t,n,e,r,s,c,l,f,d,m,g={state:{},exec:{},value:{}},h=u.settings;u.on("PreInit",function(){o=u.dom,i=u.selection,h=u.settings,a=u.formatter}),rx(this,{execCommand:function(t,n,r,e){var o,i,a=!1;if(!u.removed){if(/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(t)||e&&e.skip_focus?Ky(u):u.focus(),(e=u.fire("BeforeExecCommand",{command:t,ui:n,value:r})).isDefaultPrevented())return!1;if(i=t.toLowerCase(),o=g.exec[i])return o(i,n,r),u.fire("ExecCommand",{command:t,ui:n,value:r}),!0;if(nx(u.plugins,function(e){if(e.execCommand&&e.execCommand(t,n,r))return u.fire("ExecCommand",{command:t,ui:n,value:r}),!(a=!0)}),a)return a;if(u.theme&&u.theme.execCommand&&u.theme.execCommand(t,n,r))return u.fire("ExecCommand",{command:t,ui:n,value:r}),!0;try{a=u.getDoc().execCommand(t,n,r)}catch(e){}return!!a&&(u.fire("ExecCommand",{command:t,ui:n,value:r}),!0)}},queryCommandState:n=function(e){var t;if(!u.quirks.isHidden()&&!u.removed){if(e=e.toLowerCase(),t=g.state[e])return t(e);try{return u.getDoc().queryCommandState(e)}catch(e){}return!1}},queryCommandValue:function(e){var t;if(!u.quirks.isHidden()&&!u.removed){if(e=e.toLowerCase(),t=g.value[e])return t(e);try{return u.getDoc().queryCommandValue(e)}catch(e){}}},queryCommandSupported:function(e){if(e=e.toLowerCase(),g.exec[e])return!0;try{return u.getDoc().queryCommandSupported(e)}catch(e){}return!1},addCommands:e=function(e,n){n=n||"exec",nx(e,function(t,e){nx(e.toLowerCase().split(","),function(e){g[n][e]=t})})},addCommand:function(e,o,i){e=e.toLowerCase(),g.exec[e]=function(e,t,n,r){return o.call(i||u,t,n,r)}},addQueryStateHandler:function(e,t,n){e=e.toLowerCase(),g.state[e]=function(){return t.call(n||u)}},addQueryValueHandler:r=function(e,t,n){e=e.toLowerCase(),g.value[e]=function(){return t.call(n||u)}},hasCustomCommand:function(e){return e=e.toLowerCase(),!!g.exec[e]}}),s=function(e,t,n){return void 0===t&&(t=!1),void 0===n&&(n=null),u.getDoc().execCommand(e,t,n)},c=function(e){return a.match(e)},l=function(e,t){a.toggle(e,t?{value:t}:void 0),u.nodeChanged()},f=function(e){t=i.getBookmark(e)},d=function(){i.moveToBookmark(t)},e({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){u.undoManager.add()},"Cut,Copy,Paste":function(e){var t,n,r=u.getDoc();try{s(e)}catch(e){t=!0}"paste"!==e||r.queryCommandEnabled(e)||(t=!0),!t&&r.queryCommandSupported(e)||(n=u.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead."),Oe.mac&&(n=n.replace(/Ctrl\+/g,"+")),u.notificationManager.open({text:n,type:"error"}))},unlink:function(){if(i.isCollapsed()){var e=u.dom.getParent(u.selection.getStart(),"a");e&&u.dom.remove(e,!0)}else a.remove("link")},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull,JustifyNone":function(e){var t=e.substring(7);"full"===t&&(t="justify"),nx("left,center,right,justify".split(","),function(e){t!==e&&a.remove("align"+e)}),"none"!==t&&l("align"+t)},"InsertUnorderedList,InsertOrderedList":function(e){var t,n;s(e),(t=o.getParent(i.getNode(),"ol,ul"))&&(n=t.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(n.nodeName)&&(f(),o.split(n,t),d()))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){l(e)},"ForeColor,HiliteColor":function(e,t,n){l(e,n)},FontName:function(e,t,n){iy(u,n)},FontSize:function(e,t,n){uy(u,n)},RemoveFormat:function(e){a.remove(e)},mceBlockQuote:function(){l("blockquote")},FormatBlock:function(e,t,n){return l(n||"p")},mceCleanup:function(){var e=i.getBookmark();u.setContent(u.getContent()),i.moveToBookmark(e)},mceRemoveNode:function(e,t,n){var r=n||i.getNode();r!==u.getBody()&&(f(),u.dom.remove(r,!0),d())},mceSelectNodeDepth:function(e,t,n){var r=0;o.getParent(i.getNode(),function(e){if(1===e.nodeType&&r++===n)return i.select(e),!1},u.getBody())},mceSelectNode:function(e,t,n){i.select(n)},mceInsertContent:function(e,t,n){Hd(u,n)},mceInsertRawHTML:function(e,t,n){i.setContent("tiny_mce_marker");var r=u.getContent();u.setContent(r.replace(/tiny_mce_marker/g,function(){return n}))},mceToggleFormat:function(e,t,n){l(n)},mceSetContent:function(e,t,n){u.setContent(n)},"Indent,Outdent":function(e){tx(u,e)},mceRepaint:function(){},InsertHorizontalRule:function(){u.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){u.hasVisual=!u.hasVisual,u.addVisual()},mceReplaceContent:function(e,t,n){u.execCommand("mceInsertContent",!1,n.replace(/\{\$selection\}/g,i.getContent({format:"text"})))},mceInsertLink:function(e,t,n){var r;"string"==typeof n&&(n={href:n}),r=o.getParent(i.getNode(),"a"),n.href=n.href.replace(" ","%20"),r&&n.href||a.remove("link"),n.href&&a.apply("link",n,r)},selectAll:function(){var e,t=o.getParent(i.getStart(),Pi.isContentEditableTrue);t&&((e=o.createRng()).selectNodeContents(t),i.setRng(e))},delete:function(){wb(u)},forwardDelete:function(){Cb(u)},mceNewDocument:function(){u.setContent("")},InsertLineBreak:function(e,t,n){return By(u,n),!0}}),e({JustifyLeft:(m=function(n){return function(){var e=i.isCollapsed()?[o.getParent(i.getNode(),o.isBlock)]:i.getSelectedBlocks(),t=ox(e,function(e){return!!a.matchNode(e,n)});return-1!==ix(t,!0)}})("alignleft"),JustifyCenter:m("aligncenter"),JustifyRight:m("alignright"),JustifyFull:m("alignjustify"),"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){return c(e)},mceBlockQuote:function(){return c("blockquote")},Outdent:function(){var e;if(h.inline_styles){if((e=o.getParent(i.getStart(),o.isBlock))&&0<parseInt(e.style.paddingLeft,10))return!0;if((e=o.getParent(i.getEnd(),o.isBlock))&&0<parseInt(e.style.paddingLeft,10))return!0}return n("InsertUnorderedList")||n("InsertOrderedList")||!h.inline_styles&&!!o.getParent(i.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList":function(e){var t=o.getParent(i.getNode(),"ul,ol");return t&&("insertunorderedlist"===e&&"UL"===t.tagName||"insertorderedlist"===e&&"OL"===t.tagName)}},"state"),e({Undo:function(){u.undoManager.undo()},Redo:function(){u.undoManager.redo()}}),r("FontName",function(){return ay(u)},this),r("FontSize",function(){return sy(u)},this)}function sP(i){var e=this,a={},n=[],u=function(e){var t,n,r={};for(n in Dx(Ox(e,"+"),function(e){e in Bx?r[e]=!0:/^[0-9]{2,}$/.test(e)?r.keyCode=parseInt(e,10):(r.charCode=e.charCodeAt(0),r.keyCode=Px[e]||e.toUpperCase().charCodeAt(0))}),t=[r.keyCode],Bx)r[n]?t.push(n):r[n]=!1;return r.id=t.join(","),r.access&&(r.alt=!0,Oe.mac?r.ctrl=!0:r.shift=!0),r.meta&&(Oe.mac?r.meta=!0:(r.ctrl=!0,r.meta=!1)),r},s=function(e,t,n,r){var o;return(o=un.map(Ox(e,">"),u))[o.length-1]=un.extend(o[o.length-1],{func:n,scope:r||i}),un.extend(o[0],{desc:i.translate(t),subpatterns:o.slice(1)})},r=function(e){return e.altKey||e.ctrlKey||e.metaKey},o=function(e){return"keydown"===e.type&&112<=e.keyCode&&e.keyCode<=123},c=function(e,t){return!!t&&t.ctrl===e.ctrlKey&&t.meta===e.metaKey&&t.alt===e.altKey&&t.shift===e.shiftKey&&!!(e.keyCode===t.keyCode||e.charCode&&e.charCode===t.charCode)&&(e.preventDefault(),!0)},l=function(e){return e.func?e.func.call(e.scope):null};i.on("keyup keypress keydown",function(t){!r(t)&&!o(t)||t.isDefaultPrevented()||(Dx(a,function(e){if(c(t,e))return n=e.subpatterns.slice(0),"keydown"===t.type&&l(e),!0}),c(t,n[0])&&(1===n.length&&"keydown"===t.type&&l(n[0]),n.shift()))}),e.add=function(e,n,r,o){var t;return"string"==typeof(t=r)?r=function(){i.execCommand(t,!1,null)}:un.isArray(t)&&(r=function(){i.execCommand(t[0],t[1],t[2])}),Dx(Ox(un.trim(e.toLowerCase())),function(e){var t=s(e,n,r,o);a[t.id]=t}),!0},e.remove=function(e){var t=s(e);return!!a[t.id]&&(delete a[t.id],!0)}}function cP(n){var r=[],o=function(){var e,t=n.theme;return t&&t.getNotificationManagerImpl?t.getNotificationManagerImpl():{open:e=function(){throw new Error("Theme did not provide a NotificationManager implementation.")},close:e,reposition:e,getArgs:e}},e=function(){return y.from(r[0])},i=function(e,t){return!(e.type!==t.type||e.text!==t.text||e.progressBar||e.timeout||t.progressBar||t.timeout)},a=function(){0<r.length&&o().reposition(r)},u=function(e){r.push(e)},s=function(t){N(r,function(e){return e===t}).each(function(e){r.splice(e,1)})},c=function(t){if(!n.removed&&sw(n))return S(r,function(e){return i(o().getArgs(e),t)}).getOrThunk(function(){n.editorManager.setActive(n);var e=o().open(t,function(){s(e),a()});return u(e),a(),e})},t=function(){e().each(function(e){o().close(e),s(e),a()})},l=function(){return r},f=function(t){t.on("SkinLoaded",function(){var e=t.settings.service_message;e&&c({text:e,type:"warning",timeout:0,icon:""})}),t.on("ResizeEditor ResizeWindow",function(){Pe.requestAnimationFrame(a)}),t.on("remove",function(){I(r.slice(),function(e){o().close(e)})})};return f(n),{open:c,close:t,getNotifications:l}}function lP(r){var n=[],o=function(){var e,t=r.theme;return t&&t.getWindowManagerImpl?t.getWindowManagerImpl():{open:e=function(){throw new Error("Theme did not provide a WindowManager implementation.")},alert:e,confirm:e,close:e,getParams:e,setParams:e}},i=function(e,t){return function(){return t?t.apply(e,arguments):void 0}},t=function(e){r.fire("OpenWindow",{win:e})},a=function(e){r.fire("CloseWindow",{win:e})},u=function(e){n.push(e),t(e)},s=function(t){N(n,function(e){return e===t}).each(function(e){n.splice(e,1),a(t),0===n.length&&r.focus()})},e=function(){return y.from(n[n.length-1])},c=function(e,t){r.editorManager.setActive(r),Xy(r);var n=o().open(e,t,s);return u(n),n},l=function(e,t,n){var r=o().alert(e,i(n||this,t),s);u(r)},f=function(e,t,n){var r=o().confirm(e,i(n||this,t),s);u(r)},d=function(){e().each(function(e){o().close(e),s(e)})},m=function(){return e().map(o().getParams).getOr(null)},g=function(t){e().each(function(e){o().setParams(e,t)})},h=function(){return n};return r.on("remove",function(){I(n.slice(0),function(e){o().close(e)})}),{windows:n,open:c,alert:l,confirm:f,close:d,getParams:m,setParams:g,getWindows:h}}function fP(){return new(K.getOrDie("XMLHttpRequest"))}function dP(p){var v,e,t,n,r,o,i,a,u,s,c,l,f,d,m,g=(s=[],c=function(e){return{"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png"}[e.toLowerCase()]||"dat"},l=function(e,t,n,r){if(P(e))return f({id:e,name:r,blob:t,base64:n});if(B(e))return f(e);throw new Error("Unknown input type")},f=function(e){var t,n;if(!e.blob||!e.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");return t=e.id||Bw.uuid("blobid"),n=e.name||t,{id:BO(t),name:BO(n),filename:BO(n+"."+c(e.blob.type)),blob:BO(e.blob),base64:BO(e.base64),blobUri:BO(e.blobUri||J.createObjectURL(e.blob)),uri:BO(e.uri)}},{create:l,add:function(e){d(e.id())||s.push(e)},get:d=function(t){return m(function(e){return e.id()===t})},getByUri:function(t){return m(function(e){return e.blobUri()===t})},findFirst:m=function(e){return L(s,e)[0]},removeByUri:function(t){s=L(s,function(e){return e.blobUri()!==t||(J.revokeObjectURL(e.blobUri()),!1)})},destroy:function(){I(s,function(e){J.revokeObjectURL(e.blobUri())}),s=[]}}),b=(t=1,n=2,r={},o=function(e,t){return{status:e,resultUri:t}},a=function(e){return!!i(e)&&r[e].status===t},u=function(e){return!!i(e)&&r[e].status===n},{hasBlobUri:i=function(e){return e in r},getResultUri:function(e){var t=r[e];return t?t.resultUri:null},isPending:a,isUploaded:u,markPending:function(e){r[e]=o(t,null)},markUploaded:function(e,t){r[e]=o(n,t)},removeFailed:function(e){delete r[e]},destroy:function(){r={}}}),h=[],y=function(t){return function(e){return p.selection?t(e):[]}},x=function(){return"?"+(new Date).getTime()},w=function(e,t,n){for(var r=0;-1!==(r=e.indexOf(t,r))&&(e=e.substring(0,r)+n+e.substr(r+t.length),r+=n.length-t.length+1),-1!==r;);return e},C=function(e,t,n){return e=w(e,'src="'+t+'"','src="'+n+'"'),e=w(e,'data-mce-src="'+t+'"','data-mce-src="'+n+'"')},S=function(t,n){I(p.undoManager.data,function(e){"fragmented"===e.type?e.fragments=Ae(e.fragments,function(e){return C(e,t,n)}):e.content=C(e.content,t,n)})},N=function(){return p.notificationManager.open({text:p.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0})},T=function(e,t){g.removeByUri(e.src),S(e.src,t),p.$(e).attr({src:Wb(p)?t+x():t,"data-mce-src":p.convertURL(t,"src")})},E=function(n){var s,a,r,u,c,t,o,l,f,d,i,m,g,h,e;return v||(s=b,a={url:jb(p),basePath:Vb(p),credentials:qb(p),handler:$b(p)},r={},u=function(e,t){return e?e.replace(/\/$/,"")+"/"+t.replace(/^\//,""):t},c=function(){var e=nO.activeEditor,t=$(e.dom.doc).find('img[src^="blob:"]').get(0);t&&e.execCommand("mceRemoveNode",!1,t)},t=function(e,t,n,r){var o,i;(o=fP()).open("POST",a.url),o.withCredentials=a.credentials,o.upload.onprogress=function(e){r(e.loaded/e.total*100)},o.onerror=function(){c(),n("Image upload failed due to a XHR Transport error. Code: "+o.status)},o.onload=function(){var e;return o.status<200||300<=o.status?(c(),void n("HTTP Error: "+o.status)):(e=JSON.parse(o.responseText))&&"string"==typeof e.location?void t(u(a.basePath,e.location)):(c(),void n("Invalid JSON: "+o.responseText))},(i=new _e.FormData).append("file",e.blob(),e.filename()),o.send(i)},o=function(){return new he(function(e){e([])})},l=function(e,t){return{url:t,blobInfo:e,status:!0}},f=function(e,t){return{url:"",blobInfo:e,status:!1,error:t}},d=function(e,t){un.each(r[e],function(e){e(t)}),delete r[e]},i=function(i,a,u){return s.markPending(i.blobUri()),new he(function(t){var n,r,e,o;try{r=function(){n&&n.close()},e=function(e){r(),s.markUploaded(i.blobUri(),e),d(i.blobUri(),l(i,e)),t(l(i,e))},o=function(e){r(),s.removeFailed(i.blobUri()),d(i.blobUri(),f(i,e)),t(f(i,e))},a(i,e,o,function(e){e<0||100<e||(n||(n=u()),n.progressBar.value(e))})}catch(e){t(f(i,e.message))}})},m=function(e){return e===t},g=function(e){var t=e.blobUri();return new he(function(e){r[t]=r[t]||[],r[t].push(e)})},h=function(e,t){return e=un.grep(e,function(e){return!s.isUploaded(e.blobUri())}),he.all(un.map(e,function(e){return s.isPending(e.blobUri())?g(e):i(e,a.handler,t)}))},!(e=function(e,t){return!a.url&&m(a.handler)?o():h(e,t)})===M(a.handler)&&(a.handler=t),v={upload:e}),A().then(y(function(r){var e;return e=Ae(r,function(e){return e.blobInfo}),v.upload(e,N).then(y(function(e){var t=Ae(e,function(e,t){var n=r[t].image;return e.status&&Ub(p)?T(n,e.url):e.error&&bw.uploadError(p,e.error),{element:n,status:e.status}});return n&&n(t),t}))}))},k=function(e){if(zb(p))return E(e)},R=function(t){return!1!==H(h,function(e){return e(t)})&&(0!==t.getAttribute("src").indexOf("data:")||Hb(p)(t))},_=function(e){h.push(e)},A=function(){var o,i,a;return e||(o=b,i=g,a={},e={findAll:function(e,n){var t,r;return n||(n=BO(!0)),t=L(Dw(e),function(e){var t=e.src;return!!Oe.fileApi&&!e.hasAttribute("data-mce-bogus")&&!e.hasAttribute("data-mce-placeholder")&&!(!t||t===Oe.transparentSrc)&&(0===t.indexOf("blob:")?!o.isUploaded(t)&&n(e):0===t.indexOf("data:")&&n(e))}),r=Ae(t,function(n){if(a[n.src])return new he(function(t){a[n.src].then(function(e){if("string"==typeof e)return e;t({image:n,blobInfo:e.blobInfo})})});var e=new he(function(e,t){Aw(i,n,e,t)}).then(function(e){return delete a[e.image.src],e}).catch(function(e){return delete a[n.src],e});return a[n.src]=e}),he.all(r)}}),e.findAll(p.getBody(),R).then(y(function(e){return e=L(e,function(e){return"string"!=typeof e||(bw.displayError(p,e),!1)}),I(e,function(e){S(e.image.src,e.blobInfo.blobUri()),e.image.src=e.blobInfo.blobUri(),e.image.removeAttribute("data-mce-src")}),e}))},D=function(){g.destroy(),b.destroy(),e=v=null},O=function(e){return e.replace(/src="(blob:[^"]+)"/g,function(e,n){var t,r=b.getResultUri(n);return r?'src="'+r+'"':((t=g.getByUri(n))||(t=F(p.editorManager.get(),function(e,t){return e||t.editorUpload&&t.editorUpload.blobCache.getByUri(n)},null)),t?'src="data:'+t.blob().type+";base64,"+t.base64()+'"':e)})};return p.on("setContent",function(){zb(p)?k():A()}),p.on("RawSaveContent",function(e){e.content=O(e.content)}),p.on("getContent",function(e){e.source_view||"raw"===e.format||(e.content=O(e.content))}),p.on("PostRender",function(){p.parser.addNodeFilter("img",function(e){I(e,function(e){var t,n=e.attr("src");g.getByUri(n)||(t=b.getResultUri(n))&&e.attr("src",t)})})}),{blobCache:g,addFilter:_,uploadImages:E,uploadImagesAuto:k,scanForImages:A,destroy:D}}function mP(i){var r,o=[],t=function(e){var t,n;if((n=i.$(e).parentsUntil(i.getBody()).add(e)).length===o.length){for(t=n.length;0<=t&&n[t]===o[t];t--);if(-1===t)return o=n,!0}return o=n,!1};"onselectionchange"in i.getDoc()||i.on("NodeChange Click MouseUp KeyUp Focus",function(e){var t,n;n={startContainer:(t=i.selection.getRng()).startContainer,startOffset:t.startOffset,endContainer:t.endContainer,endOffset:t.endOffset},"nodechange"!==e.type&&cy(n,r)||i.fire("SelectionChange"),r=n}),i.on("contextmenu",function(){i.fire("SelectionChange")}),i.on("SelectionChange",function(){var e=i.selection.getStart(!0);!e||!Oe.range&&i.selection.isCollapsed()||Yw(i)&&!t(e)&&i.dom.isChildOf(e,i.getBody())&&i.nodeChanged({selectionChange:!0})}),i.on("MouseUp",function(e){!e.isDefaultPrevented()&&Yw(i)&&("IMG"===i.selection.getNode().nodeName?Pe.setEditorTimeout(i,function(){i.nodeChanged()}):i.nodeChanged())}),this.nodeChanged=function(e){var t,n,r,o=i.selection;i.initialized&&o&&!i.settings.disable_nodechange&&!i.readonly&&(r=i.getBody(),(t=o.getStart(!0)||r).ownerDocument===i.getDoc()&&i.dom.isChildOf(t,r)||(t=r),n=[],i.dom.getParent(t,function(e){if(e===r)return!0;n.push(e)}),(e=e||{}).element=t,e.parents=n,i.fire("NodeChange",e))}}function gP(H,z){var e,W,U,j,V,q,$,Y;return void 0===z&&(z=QO()),!(e=function(){})!==(H=H||{}).fix_self_closing&&(H.fix_self_closing=!0),W=H.comment?H.comment:e,U=H.cdata?H.cdata:e,j=H.text?H.text:e,V=H.start?H.start:e,q=H.end?H.end:e,$=H.pi?H.pi:e,Y=H.doctype?H.doctype:e,{parse:function(e){for(var t,n,r,c,o,i,a,l,u,s,f,d,m,g,h,p,v,b,y,x,w=0,C=[],S=0,N=Zi.decode,T=un.makeMap("src,href,data,background,formaction,poster,xlink:href"),E=/((java|vb)script|mhtml):/i,k=function(e){var t,n;for(t=C.length;t--&&C[t].name!==e;);if(0<=t){for(n=C.length-1;t<=n;n--)(e=C[n]).valid&&q(e.name);C.length=t}},R=function(e,t,n,r,o){var i,a,u,s=/[\s\u0000-\u001F]+/g;if(n=(t=t.toLowerCase())in P?t:N(n||r||o||""),B&&!l&&!1===QC(t)){if(!(i=g[t])&&h){for(a=h.length;a--&&!(i=h[a]).pattern.test(t););-1===a&&(i=null)}if(!i)return;if(i.validValues&&!(n in i.validValues))return}if(T[t]&&!H.allow_script_urls){u=n.replace(s,"");try{u=decodeURIComponent(u)}catch(e){u=unescape(u)}if(E.test(u))return;if(eS(H,u))return}l&&(t in T||0===t.indexOf("on"))||(c.map[t]=n,c.push({name:t,value:n}))},_=new RegExp("<(?:(?:!--([\\w\\W]*?)--\x3e)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)>)|(?:([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/|\\s+)>))","g"),A=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g,D=z.getShortEndedElements(),O=H.self_closing_elements||z.getSelfClosingElements(),P=z.getBoolAttrs(),B=H.validate,M=H.remove_internals,I=H.fix_self_closing,L=z.getSpecialElements(),F=e+">";t=_.exec(F);){if(w<t.index&&j(N(e.substr(w,t.index-w))),n=t[6])":"===(n=n.toLowerCase()).charAt(0)&&(n=n.substr(1)),k(n);else if(n=t[7]){if(t.index+t[0].length>e.length){j(N(e.substr(t.index))),w=t.index+t[0].length;continue}if(":"===(n=n.toLowerCase()).charAt(0)&&(n=n.substr(1)),u=n in D,I&&O[n]&&0<C.length&&C[C.length-1].name===n&&k(n),null!==(x=nS(A,t[8]))){if("all"===x){w=tS(z,e,_.lastIndex),_.lastIndex=w;continue}f=!1}if(!B||(s=z.getElementRule(n))){if(f=!0,B&&(g=s.attributes,h=s.attributePatterns),(m=t[8])?((l=-1!==m.indexOf("data-mce-type"))&&M&&(f=!1),(c=[]).map={},m.replace(A,R)):(c=[]).map={},B&&!l){if(p=s.attributesRequired,v=s.attributesDefault,b=s.attributesForced,s.removeEmptyAttrs&&!c.length&&(f=!1),b)for(o=b.length;o--;)a=(d=b[o]).name,"{$uid}"===(y=d.value)&&(y="mce_"+S++),c.map[a]=y,c.push({name:a,value:y});if(v)for(o=v.length;o--;)(a=(d=v[o]).name)in c.map||("{$uid}"===(y=d.value)&&(y="mce_"+S++),c.map[a]=y,c.push({name:a,value:y}));if(p){for(o=p.length;o--&&!(p[o]in c.map););-1===o&&(f=!1)}if(d=c.map["data-mce-bogus"]){if("all"===d){w=tS(z,e,_.lastIndex),_.lastIndex=w;continue}f=!1}}f&&V(n,c,u)}else f=!1;if(r=L[n]){r.lastIndex=w=t.index+t[0].length,w=(t=r.exec(e))?(f&&(i=e.substr(w,t.index-w)),t.index+t[0].length):(i=e.substr(w),e.length),f&&(0<i.length&&j(i,!0),q(n)),_.lastIndex=w;continue}u||(m&&m.indexOf("/")===m.length-1?f&&q(n):C.push({name:n,valid:f}))}else(n=t[1])?(">"===n.charAt(0)&&(n=" "+n),H.allow_conditional_comments||"[if"!==n.substr(0,3).toLowerCase()||(n=" "+n),W(n)):(n=t[2])?U(ZC(n)):(n=t[3])?Y(n):(n=t[4])&&$(n,t[5]);w=t.index+t[0].length}for(w<e.length&&j(N(e.substr(w))),o=C.length-1;0<=o;o--)(n=C[o]).valid&&q(n.name)}}}function hP(u){var s,r,t,n,o=this,c=0,l=[],i=0,f=function(){return 0===i},a=function(e){f()&&(o.typing=e)},d=function(e){u.setDirty(e)},m=function(e){a(!1),o.add({},e)},g=function(){o.typing&&(a(!1),o.add())};return u.on("init",function(){o.add()}),u.on("BeforeExecCommand",function(e){var t=e.command;"Undo"!==t&&"Redo"!==t&&"mceRepaint"!==t&&(g(),o.beforeChange())}),u.on("ExecCommand",function(e){var t=e.command;"Undo"!==t&&"Redo"!==t&&"mceRepaint"!==t&&m(e)}),u.on("ObjectResizeStart Cut",function(){o.beforeChange()}),u.on("SaveContent ObjectResized blur",m),u.on("DragEnd",m),u.on("KeyUp",function(e){var t=e.keyCode;e.isDefaultPrevented()||((33<=t&&t<=36||37<=t&&t<=40||45===t||e.ctrlKey)&&(m(),u.nodeChanged()),46!==t&&8!==t||u.nodeChanged(),r&&o.typing&&!1===PS(DS(u),l[0])&&(!1===u.isDirty()&&(d(!0),u.fire("change",{level:l[0],lastLevel:null})),u.fire("TypingUndo"),r=!1,u.nodeChanged()))}),u.on("KeyDown",function(e){var t,n=e.keyCode;e.isDefaultPrevented()||(33<=n&&n<=36||37<=n&&n<=40||45===n?o.typing&&m(e):(t=e.ctrlKey&&!e.altKey||e.metaKey,!(n<16||20<n)||224===n||91===n||o.typing||t||(o.beforeChange(),a(!0),o.add({},e),r=!0)))}),u.on("MouseDown",function(e){o.typing&&m(e)}),t=function(e){return"insertReplacementText"===e.inputType},n=function(e){return"insertText"===e.inputType&&null===e.data},u.on("input",function(e){e.inputType&&(t(e)||n(e))&&m(e)}),u.addShortcut("meta+z","","Undo"),u.addShortcut("meta+y,meta+shift+z","","Redo"),u.on("AddUndo Undo Redo ClearUndos",function(e){e.isDefaultPrevented()||u.nodeChanged()}),o={data:l,typing:!1,beforeChange:function(){f()&&(s=wc.getUndoBookmark(u.selection))},add:function(e,t){var n,r,o,i=u.settings,a=DS(u);if(e=e||{},e=un.extend(e,a),!1===f()||u.removed)return null;if(r=l[c],u.fire("BeforeAddUndo",{level:e,lastLevel:r,originalEvent:t}).isDefaultPrevented())return null;if(r&&PS(r,e))return null;if(l[c]&&(l[c].beforeBookmark=s),i.custom_undo_redo_levels&&l.length>i.custom_undo_redo_levels){for(n=0;n<l.length-1;n++)l[n]=l[n+1];l.length--,c=l.length}return e.bookmark=wc.getUndoBookmark(u.selection),c<l.length-1&&(l.length=c+1),l.push(e),c=l.length-1,o={level:e,lastLevel:r,originalEvent:t},u.fire("AddUndo",o),0<c&&(d(!0),u.fire("change",o)),e},undo:function(){var e;return o.typing&&(o.add(),o.typing=!1,a(!1)),0<c&&(e=l[--c],OS(u,e,!0),d(!0),u.fire("undo",{level:e})),e},redo:function(){var e;return c<l.length-1&&(e=l[++c],OS(u,e,!1),d(!0),u.fire("redo",{level:e})),e},clear:function(){l=[],c=0,o.typing=!1,o.data=l,u.fire("ClearUndos")},hasUndo:function(){return 0<c||o.typing&&l[0]&&!PS(DS(u),l[0])},hasRedo:function(){return c<l.length-1&&!o.typing},transact:function(e){return g(),o.beforeChange(),o.ignore(e),o.add()},ignore:function(e){try{i++,e()}finally{i--}},extra:function(e,t){var n,r;o.transact(e)&&(r=l[c].bookmark,n=l[c-1],OS(u,n,!0),o.transact(t)&&(l[c-1].beforeBookmark=r))}}}function pP(e){var t,n,r,o,i,a=(t=e,n={},r=function(e){return e?n[e]:n},i=function(e){return e&&n[e]&&delete n[e],n},(o=function(e,t){e&&("string"!=typeof e?un.each(e,function(e,t){o(t,e)}):(t=t.length?t:[t],un.each(t,function(e){void 0===e.deep&&(e.deep=!e.selector),void 0===e.split&&(e.split=!e.selector||e.inline),void 0===e.remove&&e.selector&&!e.inline&&(e.remove="none"),e.selector&&e.inline&&(e.mixed=!0,e.block_expand=!0),"string"==typeof e.classes&&(e.classes=e.classes.split(/\s+/))}),n[e]=t))})(kN.get(t.dom)),o(t.settings.formats),{get:r,register:o,unregister:i}),u=Fa(null);return MN(e),eb(e),{get:a.get,register:a.register,unregister:a.unregister,apply:IO(CN.applyFormat,e),remove:IO(nN,e),toggle:IO(BN,e,a),match:IO(Mv.match,e),matchAll:IO(Mv.matchAll,e),matchNode:IO(Mv.matchNode,e),canApply:IO(Mv.canApply,e),formatChanged:IO(EN,e,u),getCssText:IO(PN,e)}}function vP(R,_){var A,D,O,P,B,v,e,t;return void 0===_&&(_=QO()),A={},D=[],O={},P={},(R=R||{}).validate=!("validate"in R)||R.validate,R.root_name=R.root_name||"body",B=function(e){var t,n,r,o,i,a,u,s,c,l,f,d=oT("tr,td,th,tbody,thead,tfoot,table"),m=_.getNonEmptyElements(),g=_.getWhiteSpaceElements(),h=_.getTextBlockElements(),p=_.getSpecialElements();for(t=0;t<e.length;t++)if((n=e[t]).parent&&!n.fixed)if(h[n.name]&&"li"===n.parent.name){for(l=n.next;l&&h[l.name];)l.name="li",l.fixed=!0,n.parent.insert(l,n.parent),l=l.next;n.unwrap(n)}else{for(o=[n],r=n.parent;r&&!_.isValidChild(r.name,n.name)&&!d[r.name];r=r.parent)o.push(r);if(r&&1<o.length){for(o.reverse(),i=a=v(o[0].clone()),c=0;c<o.length-1;c++){for(_.isValidChild(a.name,o[c].name)?(u=v(o[c].clone()),a.append(u)):u=a,s=o[c].firstChild;s&&s!==o[c+1];)f=s.next,u.append(s),s=f;a=u}tT(_,m,g,i)?r.insert(n,o[0],!0):(r.insert(i,o[0],!0),r.insert(n,i)),r=o[0],(tT(_,m,g,r)||ZN(r,"br"))&&r.empty().remove()}else if(n.parent){if("li"===n.name){if((l=n.prev)&&("ul"===l.name||"ul"===l.name)){l.append(n);continue}if((l=n.next)&&("ul"===l.name||"ul"===l.name)){l.insert(n,l.firstChild,!0);continue}n.wrap(v(new GN("ul",1)));continue}_.isValidChild(n.parent.name,"div")&&_.isValidChild("div",n.name)?n.wrap(v(new GN("div",1))):p[n.name]?n.empty().remove():n.unwrap()}}},e=function(e,a){var t,n,r,o,i,u,s,c,l,f,d,m,g,h,p,v,b,y,x,w,C,S,N,T,E,k=[];if(a=a||{},O={},P={},l=uT(oT("script,style,head,html,body,title,meta,param"),_.getBlockElements()),m=_.getNonEmptyElements(),g=_.children,h=R.validate,p="forced_root_block"in a?a.forced_root_block:R.forced_root_block,v=_.getWhiteSpaceElements(),b=/^[ \t\r\n]+/,y=/[ \t\r\n]+$/,x=/[ \t\r\n]+/g,w=/^[ \t\r\n]+$/,f=v.hasOwnProperty(a.context)||v.hasOwnProperty(R.root_name),C=function(){var e,t,n=E.firstChild,r=function(e){e&&((n=e.firstChild)&&3===n.type&&(n.value=n.value.replace(b,"")),(n=e.lastChild)&&3===n.type&&(n.value=n.value.replace(y,"")))};if(_.isValidChild(E.name,p.toLowerCase())){for(;n;)e=n.next,3===n.type||1===n.type&&"p"!==n.name&&!l[n.name]&&!n.attr("data-mce-type")?(t||((t=S(p,1)).attr(R.forced_root_block_attrs),E.insert(t,n)),t.append(n)):(r(t),t=null),n=e;r(t)}},S=function(e,t){var n,r=new GN(e,t);return e in A&&((n=O[e])?n.push(r):O[e]=[r]),r},N=function(e){var t,n,r,o,i=_.getBlockElements();for(t=e.prev;t&&3===t.type;){if(0<(r=t.value.replace(y,"")).length)return void(t.value=r);if(n=t.next){if(3===n.type&&n.value.length){t=t.prev;continue}if(!i[n.name]&&"script"!==n.name&&"style"!==n.name){t=t.prev;continue}}o=t.prev,t.remove(),t=o}},T=function(e){var t,n={};for(t in e)"li"!==t&&"p"!==t&&(n[t]=e[t]);return n},t=rS({validate:h,allow_script_urls:R.allow_script_urls,allow_conditional_comments:R.allow_conditional_comments,self_closing_elements:T(_.getSelfClosingElements()),cdata:function(e){d.append(S("#cdata",4)).value=e},text:function(e,t){var n;f||(e=e.replace(x," "),nT(d.lastChild,l)&&(e=e.replace(b,""))),0!==e.length&&((n=S("#text",3)).raw=!!t,d.append(n).value=e)},comment:function(e){d.append(S("#comment",8)).value=e},pi:function(e,t){d.append(S(e,7)).value=t,N(d)},doctype:function(e){d.append(S("#doctype",10)).value=e,N(d)},start:function(e,t,n){var r,o,i,a,u;if(i=h?_.getElementRule(e):{}){for((r=S(i.outputName||e,1)).attributes=t,r.shortEnded=n,d.append(r),(u=g[d.name])&&g[r.name]&&!u[r.name]&&k.push(r),o=D.length;o--;)(a=D[o].name)in t.map&&((s=P[a])?s.push(r):P[a]=[r]);l[e]&&N(r),n||(d=r),!f&&v[e]&&(f=!0)}},end:function(e){var t,n,r,o,i;if(n=h?_.getElementRule(e):{}){if(l[e]&&!f){if((t=d.firstChild)&&3===t.type)if(0<(r=t.value.replace(b,"")).length)t.value=r,t=t.next;else for(o=t.next,t.remove(),t=o;t&&3===t.type;)r=t.value,o=t.next,(0===r.length||w.test(r))&&(t.remove(),t=o),t=o;if((t=d.lastChild)&&3===t.type)if(0<(r=t.value.replace(y,"")).length)t.value=r,t=t.prev;else for(o=t.prev,t.remove(),t=o;t&&3===t.type;)r=t.value,o=t.prev,(0===r.length||w.test(r))&&(t.remove(),t=o),t=o}if(f&&v[e]&&(f=!1),n.removeEmpty&&tT(_,m,v,d)&&!d.attributes.map.name&&!d.attr("id"))return i=d.parent,l[d.name]?d.empty().remove():d.unwrap(),void(d=i);n.paddEmpty&&(QN(d)||tT(_,m,v,d))&&JN(R,a,l,d),d=d.parent}}},_),E=d=new GN(a.context||R.root_name,11),t.parse(e),h&&k.length&&(a.context?a.invalid=!0:B(k)),p&&("body"===E.name||a.isRootContent)&&C(),!a.invalid){for(c in O){for(s=A[c],i=(n=O[c]).length;i--;)n[i].parent||n.splice(i,1);for(r=0,o=s.length;r<o;r++)s[r](n,c,a)}for(r=0,o=D.length;r<o;r++)if((s=D[r]).name in P){for(i=(n=P[s.name]).length;i--;)n[i].parent||n.splice(i,1);for(i=0,u=s.callbacks.length;i<u;i++)s.callbacks[i](n,s.name,a)}}return E},rT(t={schema:_,addAttributeFilter:function(e,n){iT(aT(e),function(e){var t;for(t=0;t<D.length;t++)if(D[t].name===e)return void D[t].callbacks.push(n);D.push({name:e,callbacks:[n]})})},getAttributeFilters:function(){return[].concat(D)},addNodeFilter:function(e,n){iT(aT(e),function(e){var t=A[e];t||(A[e]=t=[]),t.push(n)})},getNodeFilters:function(){var e,t=[];for(e in A)A.hasOwnProperty(e)&&t.push({name:e,callbacks:A[e]});return t},filterNode:v=function(e){var t,n,r;(n=e.name)in A&&((r=O[n])?r.push(e):O[n]=[e]),t=D.length;for(;t--;)(n=D[t].name)in e.attributes.map&&((r=P[n])?r.push(e):P[n]=[e]);return e},parse:e},R),$N.register(t,R),t}function bP(e,t){var a,u,s,n,r,c,l,o=(a=e,r=["data-mce-selected"],c=(u=t)&&u.dom?u.dom:ya.DOM,l=u&&u.schema?u.schema:QO(a),a.entity_encoding=a.entity_encoding||"named",a.remove_trailing_brs=!("remove_trailing_brs"in a)||a.remove_trailing_brs,s=vP(a,l),FN.register(s,a,c),n=function(e,t){var n=LN({format:"html"},t||{}),r=WN.process(u,e,n),o=lT(c,r,n),i=fT(s,o,n);return"tree"===n.format?i:mT(u,a,l,i,n)},{schema:l,addNodeFilter:s.addNodeFilter,addAttributeFilter:s.addAttributeFilter,serialize:n,addRules:function(e){l.addValidElements(e)},setRules:function(e){l.setValidElements(e)},addTempAttr:IO(sT,s,r),getTempAttrs:function(){return r}});return{schema:o.schema,addNodeFilter:o.addNodeFilter,addAttributeFilter:o.addAttributeFilter,serialize:o.serialize,addRules:o.addRules,setRules:o.setRules,addTempAttr:o.addTempAttr,getTempAttrs:o.getTempAttrs}}function yP(e){return{getBookmark:IO(ff,e),moveToBookmark:IO(df,e)}}function xP(a){var o=un.each,i=YC.BACKSPACE,u=YC.DELETE,s=a.dom,c=a.selection,e=a.settings,t=a.parser,n=Oe.gecko,r=Oe.ie,l=Oe.webkit,f="data:text/mce-internal,",d=r?"Text":"URL",m=function(e,t){try{a.getDoc().execCommand(e,!1,t)}catch(e){}},g=function(e){return e.isDefaultPrevented()},h=function(e){var t,n;e.dataTransfer&&(a.selection.isCollapsed()&&"IMG"===e.target.tagName&&c.select(e.target),0<(t=a.selection.getContent()).length&&(n=f+escape(a.id)+","+escape(t),e.dataTransfer.setData(d,n)))},p=function(e){var t;return e.dataTransfer&&(t=e.dataTransfer.getData(d))&&0<=t.indexOf(f)?(t=t.substr(f.length).split(","),{id:unescape(t[0]),html:unescape(t[1])}):null},v=function(e,t){a.queryCommandSupported("mceInsertClipboardContent")?a.execCommand("mceInsertClipboardContent",!1,{content:e,internal:t}):a.execCommand("mceInsertContent",!1,e)},b=function(){var r=function(e){var t=s.create("body"),n=e.cloneContents();return t.appendChild(n),c.serializer.serialize(t,{format:"html"})},o=function(e){var t=r(e),n=s.createRng();return n.selectNode(a.getBody()),t===r(n)};a.on("keydown",function(e){var t,n,r=e.keyCode;if(!g(e)&&(r===u||r===i)){if(t=a.selection.isCollapsed(),n=a.getBody(),t&&!s.isEmpty(n))return;if(!t&&!o(a.selection.getRng()))return;e.preventDefault(),a.setContent(""),n.firstChild&&s.isBlock(n.firstChild)?a.selection.setCursorLocation(n.firstChild,0):a.selection.setCursorLocation(n,0),a.nodeChanged()}})},y=function(){a.shortcuts.add("meta+a",null,"SelectAll")},x=function(){a.settings.content_editable||s.bind(a.getDoc(),"mousedown mouseup",function(e){var t;if(e.target===a.getDoc().documentElement)if(t=c.getRng(),a.getBody().focus(),"mousedown"===e.type){if(Au(t.startContainer))return;c.placeCaretAt(e.clientX,e.clientY)}else c.setRng(t)})},w=function(){a.on("keydown",function(e){var t,n;if(!g(e)&&e.keyCode===i){if(!a.getBody().getElementsByTagName("hr").length)return;if(c.isCollapsed()&&0===c.getRng().startOffset){if(n=(t=c.getNode()).previousSibling,"HR"===t.nodeName)return s.remove(t),void e.preventDefault();n&&n.nodeName&&"hr"===n.nodeName.toLowerCase()&&(s.remove(n),e.preventDefault())}}})},C=function(){_e.Range.prototype.getClientRects||a.on("mousedown",function(e){if(!g(e)&&"HTML"===e.target.nodeName){var t=a.getBody();t.blur(),Pe.setEditorTimeout(a,function(){t.focus()})}})},S=function(){a.on("click",function(e){var t=e.target;/^(IMG|HR)$/.test(t.nodeName)&&"false"!==s.getContentEditableParent(t)&&(e.preventDefault(),a.selection.select(t),a.nodeChanged()),"A"===t.nodeName&&s.hasClass(t,"mce-item-anchor")&&(e.preventDefault(),c.select(t))})},N=function(){var n=function(){var e=s.getAttribs(c.getStart().cloneNode(!1));return function(){var t=c.getStart();t!==a.getBody()&&(s.setAttrib(t,"style",null),o(e,function(e){t.setAttributeNode(e.cloneNode(!0))}))}},r=function(){return!c.isCollapsed()&&s.getParent(c.getStart(),s.isBlock)!==s.getParent(c.getEnd(),s.isBlock)};a.on("keypress",function(e){var t;if(!g(e)&&(8===e.keyCode||46===e.keyCode)&&r())return t=n(),a.getDoc().execCommand("delete",!1,null),t(),e.preventDefault(),!1}),s.bind(a.getDoc(),"cut",function(e){var t;!g(e)&&r()&&(t=n(),Pe.setEditorTimeout(a,function(){t()}))})},T=function(){a.on("keydown",function(e){if(!g(e)&&e.keyCode===i&&c.isCollapsed()&&0===c.getRng().startOffset){var t=c.getNode().previousSibling;if(t&&t.nodeName&&"table"===t.nodeName.toLowerCase())return e.preventDefault(),!1}})},E=function(){a.on("keydown",function(e){var t,n,r,o,i;if(!g(e)&&e.keyCode===YC.BACKSPACE&&(n=(t=c.getRng()).startContainer,r=t.startOffset,o=s.getRoot(),i=n,t.collapsed&&0===r)){for(;i&&i.parentNode&&i.parentNode.firstChild===i&&i.parentNode!==o;)i=i.parentNode;"BLOCKQUOTE"===i.tagName&&(a.formatter.toggle("blockquote",null,i),(t=s.createRng()).setStart(n,0),t.setEnd(n,0),c.setRng(t))}})},k=function(){e.readonly||a.on("BeforeExecCommand MouseDown",function(){m("StyleWithCSS",!1),m("enableInlineTableEditing",!1),e.object_resizing||m("enableObjectResizing",!1)})},R=function(){a.on("SetContent ExecCommand",function(e){"setcontent"!==e.type&&"mceInsertLink"!==e.command||o(s.select("a"),function(e){var t=e.parentNode,n=s.getRoot();if(t.lastChild===e){for(;t&&!s.isBlock(t);){if(t.parentNode.lastChild!==t||t===n)return;t=t.parentNode}s.add(t,"br",{"data-mce-bogus":1})}})})},_=function(){e.forced_root_block&&a.on("init",function(){m("DefaultParagraphSeparator",e.forced_root_block)})},A=function(){a.on("keyup focusin mouseup",function(e){YC.modifierPressed(e)||c.normalize()},!0)},D=function(){a.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},O=function(){a.inline||a.on("keydown",function(){_e.document.activeElement===_e.document.body&&a.getWin().focus()})},P=function(){a.inline||(a.contentStyles.push("body {min-height: 150px}"),a.on("click",function(e){var t;if("HTML"===e.target.nodeName){if(11<Oe.ie)return void a.getBody().focus();t=a.selection.getRng(),a.getBody().focus(),a.selection.setRng(t),a.selection.normalize(),a.nodeChanged()}}))},B=function(){Oe.mac&&a.on("keydown",function(e){!YC.metaKeyPressed(e)||e.shiftKey||37!==e.keyCode&&39!==e.keyCode||(e.preventDefault(),a.selection.getSel().modify("move",37===e.keyCode?"backward":"forward","lineboundary"))})},M=function(){m("AutoUrlDetect",!1)},I=function(){a.on("click",function(e){var t=e.target;do{if("A"===t.tagName)return void e.preventDefault()}while(t=t.parentNode)}),a.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},L=function(){a.on("init",function(){a.dom.bind(a.getBody(),"submit",function(e){e.preventDefault()})})},F=function(){t.addNodeFilter("br",function(e){for(var t=e.length;t--;)"Apple-interchange-newline"===e[t].attr("class")&&e[t].remove()})},H=function(){a.on("dragstart",function(e){h(e)}),a.on("drop",function(e){var t,n;g(e)||(t=p(e))&&t.id!==a.id&&(e.preventDefault(),n=_T(e.x,e.y,a.getDoc()),c.setRng(n),v(t.html,!0))})},z=function(){},W=function(){var e;return!n||a.removed?0:!(e=a.selection.getSel())||!e.rangeCount||0===e.rangeCount};return E(),b(),Oe.windowsPhone||A(),l&&(x(),S(),_(),L(),T(),F(),Oe.iOS?(O(),P(),I()):y()),11<=Oe.ie&&(P(),T()),Oe.ie&&(y(),M(),H()),n&&(w(),C(),N(),k(),R(),D(),B(),T()),{refreshContentEditable:z,isHidden:W}}function wP(n){var e=function(e,t){return If(n,e,t)},t=function(t){return wy(n,t).fold(BO(!1),function(e){return t.setStart(e.startContainer,e.startOffset),t.setEnd(e.endContainer,e.endOffset),!0})};return{walk:e,split:Lv,normalize:t}}VO.prototype=ze.filters=ze.pseudos,ze.setFilters=new VO,je=Ht.tokenize=function(e,t){var n,r,o,i,a,u,s,c=ut[e+" "];if(c)return t?0:c.slice(0);for(a=e,u=[],s=ze.preFilter;a;){for(i in n&&!(r=Tt.exec(a))||(r&&(a=a.slice(r[0].length)||a),u.push(o=[])),n=!1,(r=Et.exec(a))&&(n=r.shift(),o.push({value:n,type:r[0].replace(Nt," ")}),a=a.slice(n.length)),ze.filter)!(r=At[i].exec(a))||s[i]&&!(r=s[i](r))||(n=r.shift(),o.push({value:n,type:i,matches:r}),a=a.slice(n.length));if(!n)break}return t?a.length:a?Ht.error(e):ut(e,u).slice(0)},Ve=Ht.compile=function(e,t){var n,p,v,b,y,r,o=[],i=[],a=st[e+" "];if(!a){for(t||(t=je(e)),n=t.length;n--;)(a=GO(t[n]))[nt]?o.push(a):i.push(a);(a=st(e,(p=i,b=0<(v=o).length,y=0<p.length,r=function(e,t,n,r,o){var i,a,u,s=0,c="0",l=e&&[],f=[],d=$e,m=e||y&&ze.find.TAG("*",o),g=ot+=null==d?1:Math.random()||.1,h=m.length;for(o&&($e=t!==Ge&&t);c!==h&&null!=(i=m[c]);c++){if(y&&i){for(a=0;u=p[a++];)if(u(i,t,n)){r.push(i);break}o&&(ot=g)}b&&((i=!u&&i)&&s--,e&&l.push(i))}if(s+=c,b&&c!==s){for(a=0;u=v[a++];)u(l,f,t,n);if(e){if(0<s)for(;c--;)l[c]||f[c]||(f[c]=gt.call(r));f=XO(f)}pt.apply(r,f),o&&!e&&0<f.length&&1<s+v.length&&Ht.uniqueSort(r)}return o&&(ot=g,$e=d),l},b?FO(r):r))).selector=e}return a},qe=Ht.select=function(e,t,n,r){var o,i,a,u,s,c="function"==typeof e&&e,l=!r&&je(e=c.selector||e);if(n=n||[],1===l.length){if(2<(i=l[0]=l[0].slice(0)).length&&"ID"===(a=i[0]).type&&He.getById&&9===t.nodeType&&Qe&&ze.relative[i[1].type]){if(!(t=(ze.find.ID(a.matches[0].replace(Lt,Ft),t)||[])[0]))return n;c&&(t=t.parentNode),e=e.slice(i.shift().value.length)}for(o=At.needsContext.test(e)?0:i.length;o--&&(a=i[o],!ze.relative[u=a.type]);)if((s=ze.find[u])&&(r=s(a.matches[0].replace(Lt,Ft),Mt.test(i[0].type)&&jO(t.parentNode)||t))){if(i.splice(o,1),!(e=r.length&&qO(i)))return pt.apply(n,r),n;break}}return(c||Ve(e,l))(r,t,!Qe,n,Mt.test(e)&&jO(t.parentNode)||t),n},He.sortStable=nt.split("").sort(ct).join("")===nt,He.detectDuplicates=!!Xe,Ke(),He.sortDetached=!0,zt=Array.isArray,Wt=function(e){var t,n,r=e;if(!zt(e))for(r=[],t=0,n=e.length;t<n;t++)r[t]=e[t];return r},jt=function(n,r){var o=[];return Ut(n,function(e,t){o.push(r(e,t,n))}),o},Vt=function(n,r){var o=[];return Ut(n,function(e,t){r&&!r(e,t,n)||o.push(e)}),o},$t=function(e,t,n){var r=qt(e,t,n);if(-1!==r)return e[r]},Xt=/^\s*|\s*$/g,Gt=function(e,t){return t?!("array"!==t||!Yt.isArray(e))||typeof e===t:void 0!==e},Jt=function(e,t,n){var r;for(t=t||",","string"==typeof(e=e||[])&&(e=e.split(t)),n=n||{},r=e.length;r--;)n[e[r]]={};return n},Qt=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},Zt=function(e,t,n){var r,o,i,a,u,s=this,c=0;if(e=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(e),i=e[3].match(/(^|\.)(\w+)$/i)[2],!(o=s.createNS(e[3].replace(/\.\w+$/,""),n))[i]){if("static"===e[2])return o[i]=t,void(this.onCreate&&this.onCreate(e[2],e[3],o[i]));t[i]||(t[i]=function(){},c=1),o[i]=t[i],s.extend(o[i].prototype,t),e[5]&&(r=s.resolve(e[5]).prototype,a=e[5].match(/\.(\w+)$/i)[1],u=o[i],o[i]=c?function(){return r[a].apply(this,arguments)}:function(){return this.parent=r[a],u.apply(this,arguments)},o[i].prototype[i]=o[i],s.each(r,function(e,t){o[i].prototype[t]=r[t]}),s.each(t,function(e,t){r[t]?o[i].prototype[t]=function(){return this.parent=r[t],e.apply(this,arguments)}:t!==i&&(o[i].prototype[t]=e)})),s.each(t.static,function(e,t){o[i][t]=e})}},en=function(e,t){var n,r,o,i,a,u,s=[];for(n=2;n<arguments.length;n++)s[n-2]=arguments[n];for(r=1,o=(a=arguments).length;r<o;r++)for(i in t=a[r])t.hasOwnProperty(i)&&void 0!==(u=t[i])&&(e[i]=u);return e},tn=function(e,n,r,o){o=o||this,e&&(r&&(e=e[r]),Yt.each(e,function(e,t){if(!1===n.call(o,e,t,r))return!1;tn(e,n,r,o)}))},nn=function(e,t){var n,r;for(t=t||_e.window,e=e.split("."),n=0;n<e.length;n++)t[r=e[n]]||(t[r]={}),t=t[r];return t},rn=function(e,t){var n,r;for(t=t||_e.window,n=0,r=(e=e.split(".")).length;n<r&&(t=t[e[n]]);n++);return t},on=function(e,t){return!e||Gt(e,"array")?e:Yt.map(e.split(t||","),Kt)},an=function(e){var t=Oe.cacheSuffix;return t&&(e+=(-1===e.indexOf("?")?"?":"&")+t),e},un={trim:Kt=function(e){return null==e?"":(""+e).replace(Xt,"")},isArray:(Yt={isArray:zt,toArray:Wt,each:Ut=function(e,t,n){var r,o;if(!e)return 0;if(n=n||e,void 0!==e.length){for(r=0,o=e.length;r<o;r++)if(!1===t.call(n,e[r],r,e))return 0}else for(r in e)if(e.hasOwnProperty(r)&&!1===t.call(n,e[r],r,e))return 0;return 1},map:jt,filter:Vt,indexOf:function(e,t){var n,r;if(e)for(n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},reduce:function(e,t,n,r){var o=0;for(arguments.length<3&&(n=e[0]);o<e.length;o++)n=t.call(r,n,e[o],o);return n},findIndex:qt=function(e,t,n){var r,o;for(r=0,o=e.length;r<o;r++)if(t.call(n,e[r],r,e))return r;return-1},find:$t,last:function(e){return e[e.length-1]}}).isArray,is:Gt,toArray:Yt.toArray,makeMap:Jt,each:Yt.each,map:Yt.map,grep:Yt.filter,inArray:Yt.indexOf,hasOwn:Qt,extend:en,create:Zt,walk:tn,createNS:nn,resolve:rn,explode:on,_addCacheSuffix:an},sn=_e.document,cn=Array.prototype.push,ln=Array.prototype.slice,fn=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,dn=Le.Event,mn=un.makeMap("children,contents,next,prev"),gn=function(e){return void 0!==e},hn=function(e){return"string"==typeof e},pn=function(e){return e&&e===e.window},vn=function(e,t){var n,r,o;for(o=(t=t||sn).createElement("div"),n=t.createDocumentFragment(),o.innerHTML=e;r=o.firstChild;)n.appendChild(r);return n},bn=function(e,t,n,r){var o;if(hn(t))t=vn(t,Pn(e[0]));else if(t.length&&!t.nodeType){if(t=kn.makeArray(t),r)for(o=t.length-1;0<=o;o--)bn(e,t[o],n,r);else for(o=0;o<t.length;o++)bn(e,t[o],n,r);return e}if(t.nodeType)for(o=e.length;o--;)n.call(e[o],t);return e},yn=function(e,t){return e&&t&&-1!==(" "+e.className+" ").indexOf(" "+t+" ")},xn=function(e,t,n){var r,o;return t=kn(t)[0],e.each(function(){var e=this;n&&r===e.parentNode||(r=e.parentNode,o=t.cloneNode(!1),e.parentNode.insertBefore(o,e)),o.appendChild(e)}),e},wn=un.makeMap("fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom"," "),Cn=un.makeMap("checked compact declare defer disabled ismap multiple nohref noshade nowrap readonly selected"," "),Sn={for:"htmlFor",class:"className",readonly:"readOnly"},Nn={float:"cssFloat"},Tn={},En={},Rn=function(e,t){var n;if(t.indexOf)return t.indexOf(e);for(n=t.length;n--;)if(t[n]===e)return n;return-1},_n=/^\s*|\s*$/g,An=function(e){return null==e?"":(""+e).replace(_n,"")},Dn=function(e,t){var n,r,o,i;if(e)if(void 0===(n=e.length)){for(r in e)if(e.hasOwnProperty(r)&&(i=e[r],!1===t.call(i,r,i)))break}else for(o=0;o<n&&(i=e[o],!1!==t.call(i,o,i));o++);return e},On=function(e,n){var r=[];return Dn(e,function(e,t){n(t,e)&&r.push(t)}),r},Pn=function(e){return e?9===e.nodeType?e:e.ownerDocument:sn},(kn=function(e,t){return new kn.fn.init(e,t)}).fn=kn.prototype={constructor:kn,selector:"",context:null,length:0,init:function(e,t){var n,r,o=this;if(!e)return o;if(e.nodeType)return o.context=o[0]=e,o.length=1,o;if(t&&t.nodeType)o.context=t;else{if(t)return kn(e).attr(t);o.context=t=_e.document}if(hn(e)){if(!(n="<"===(o.selector=e).charAt(0)&&">"===e.charAt(e.length-1)&&3<=e.length?[null,e,null]:fn.exec(e)))return kn(t).find(e);if(n[1])for(r=vn(e,Pn(t)).firstChild;r;)cn.call(o,r),r=r.nextSibling;else{if(!(r=Pn(t).getElementById(n[2])))return o;if(r.id!==n[2])return o.find(e);o.length=1,o[0]=r}}else this.add(e,!1);return o},toArray:function(){return un.toArray(this)},add:function(e,t){var n,r,o=this;if(hn(e))return o.add(kn(e));if(!1!==t)for(n=kn.unique(o.toArray().concat(kn.makeArray(e))),o.length=n.length,r=0;r<n.length;r++)o[r]=n[r];else cn.apply(o,kn.makeArray(e));return o},attr:function(t,n){var e,r=this;if("object"==typeof t)Dn(t,function(e,t){r.attr(e,t)});else{if(!gn(n)){if(r[0]&&1===r[0].nodeType){if((e=Tn[t])&&e.get)return e.get(r[0],t);if(Cn[t])return r.prop(t)?t:void 0;null===(n=r[0].getAttribute(t,2))&&(n=void 0)}return n}this.each(function(){var e;if(1===this.nodeType){if((e=Tn[t])&&e.set)return void e.set(this,n);null===n?this.removeAttribute(t,2):this.setAttribute(t,n,2)}})}return r},removeAttr:function(e){return this.attr(e,null)},prop:function(e,t){var n=this;if("object"==typeof(e=Sn[e]||e))Dn(e,function(e,t){n.prop(e,t)});else{if(!gn(t))return n[0]&&n[0].nodeType&&e in n[0]?n[0][e]:t;this.each(function(){1===this.nodeType&&(this[e]=t)})}return n},css:function(t,n){var e,r,o=this,i=function(e){return e.replace(/-(\D)/g,function(e,t){return t.toUpperCase()})},a=function(e){return e.replace(/[A-Z]/g,function(e){return"-"+e})};if("object"==typeof t)Dn(t,function(e,t){o.css(e,t)});else if(gn(n))t=i(t),"number"!=typeof n||wn[t]||(n=n.toString()+"px"),o.each(function(){var e=this.style;if((r=En[t])&&r.set)r.set(this,n);else{try{this.style[Nn[t]||t]=n}catch(e){}null!==n&&""!==n||(e.removeProperty?e.removeProperty(a(t)):e.removeAttribute(t))}});else{if(e=o[0],(r=En[t])&&r.get)return r.get(e);if(!e.ownerDocument.defaultView)return e.currentStyle?e.currentStyle[i(t)]:"";try{return e.ownerDocument.defaultView.getComputedStyle(e,null).getPropertyValue(a(t))}catch(e){return}}return o},remove:function(){for(var e,t=this,n=this.length;n--;)e=t[n],dn.clean(e),e.parentNode&&e.parentNode.removeChild(e);return this},empty:function(){for(var e,t=this,n=this.length;n--;)for(e=t[n];e.firstChild;)e.removeChild(e.firstChild);return this},html:function(t){var n,r=this;if(gn(t)){n=r.length;try{for(;n--;)r[n].innerHTML=t}catch(e){kn(r[n]).empty().append(t)}return r}return r[0]?r[0].innerHTML:""},text:function(e){var t,n=this;if(gn(e)){for(t=n.length;t--;)"innerText"in n[t]?n[t].innerText=e:n[0].textContent=e;return n}return n[0]?n[0].innerText||n[0].textContent:""},append:function(){return bn(this,arguments,function(e){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.appendChild(e)})},prepend:function(){return bn(this,arguments,function(e){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.insertBefore(e,this.firstChild)},!0)},before:function(){return this[0]&&this[0].parentNode?bn(this,arguments,function(e){this.parentNode.insertBefore(e,this)}):this},after:function(){return this[0]&&this[0].parentNode?bn(this,arguments,function(e){this.parentNode.insertBefore(e,this.nextSibling)},!0):this},appendTo:function(e){return kn(e).append(this),this},prependTo:function(e){return kn(e).prepend(this),this},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){return xn(this,e)},wrapAll:function(e){return xn(this,e,!0)},wrapInner:function(e){return this.each(function(){kn(this).contents().wrapAll(e)}),this},unwrap:function(){return this.parent().each(function(){kn(this).replaceWith(this.childNodes)})},clone:function(){var e=[];return this.each(function(){e.push(this.cloneNode(!0))}),kn(e)},addClass:function(e){return this.toggleClass(e,!0)},removeClass:function(e){return this.toggleClass(e,!1)},toggleClass:function(o,i){var e=this;return"string"!=typeof o||(-1!==o.indexOf(" ")?Dn(o.split(" "),function(){e.toggleClass(this,i)}):e.each(function(e,t){var n,r;(r=yn(t,o))!==i&&(n=t.className,r?t.className=An((" "+n+" ").replace(" "+o+" "," ")):t.className+=n?" "+o:o)})),e},hasClass:function(e){return yn(this[0],e)},each:function(e){return Dn(this,e)},on:function(e,t){return this.each(function(){dn.bind(this,e,t)})},off:function(e,t){return this.each(function(){dn.unbind(this,e,t)})},trigger:function(e){return this.each(function(){"object"==typeof e?dn.fire(this,e.type,e):dn.fire(this,e)})},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},slice:function(){return new kn(ln.apply(this,arguments))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},find:function(e){var t,n,r=[];for(t=0,n=this.length;t<n;t++)kn.find(e,this[t],r);return kn(r)},filter:function(n){return kn("function"==typeof n?On(this.toArray(),function(e,t){return n(t,e)}):kn.filter(n,this.toArray()))},closest:function(n){var r=[];return n instanceof kn&&(n=n[0]),this.each(function(e,t){for(;t;){if("string"==typeof n&&kn(t).is(n)){r.push(t);break}if(t===n){r.push(t);break}t=t.parentNode}}),kn(r)},offset:function(e){var t,n,r,o,i=0,a=0;return e?this.css(e):((t=this[0])&&(r=(n=t.ownerDocument).documentElement,t.getBoundingClientRect&&(i=(o=t.getBoundingClientRect()).left+(r.scrollLeft||n.body.scrollLeft)-r.clientLeft,a=o.top+(r.scrollTop||n.body.scrollTop)-r.clientTop)),{left:i,top:a})},push:cn,sort:[].sort,splice:[].splice},un.extend(kn,{extend:un.extend,makeArray:function(e){return pn(e)||e.nodeType?[e]:un.toArray(e)},inArray:Rn,isArray:un.isArray,each:Dn,trim:An,grep:On,find:Ht,expr:Ht.selectors,unique:Ht.uniqueSort,text:Ht.getText,contains:Ht.contains,filter:function(e,t,n){var r=t.length;for(n&&(e=":not("+e+")");r--;)1!==t[r].nodeType&&t.splice(r,1);return t=1===t.length?kn.find.matchesSelector(t[0],e)?[t[0]]:[]:kn.find.matches(e,t)}}),Bn=function(e,t,n){var r=[],o=e[t];for("string"!=typeof n&&n instanceof kn&&(n=n[0]);o&&9!==o.nodeType;){if(void 0!==n){if(o===n)break;if("string"==typeof n&&kn(o).is(n))break}1===o.nodeType&&r.push(o),o=o[t]}return r},Mn=function(e,t,n,r){var o=[];for(r instanceof kn&&(r=r[0]);e;e=e[t])if(!n||e.nodeType===n){if(void 0!==r){if(e===r)break;if("string"==typeof r&&kn(e).is(r))break}o.push(e)}return o},In=function(e,t,n){for(e=e[t];e;e=e[t])if(e.nodeType===n)return e;return null},Dn({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return Bn(e,"parentNode")},next:function(e){return In(e,"nextSibling",1)},prev:function(e){return In(e,"previousSibling",1)},children:function(e){return Mn(e.firstChild,"nextSibling",1)},contents:function(e){return un.toArray(("iframe"===e.nodeName?e.contentDocument||e.contentWindow.document:e).childNodes)}},function(r,o){kn.fn[r]=function(t){var e=this,n=[];return e.each(function(){var e=o.call(n,this,t,n);e&&(kn.isArray(e)?n.push.apply(n,e):n.push(e))}),1<this.length&&(mn[r]||(n=kn.unique(n)),0===r.indexOf("parents")&&(n=n.reverse())),n=kn(n),t?n.filter(t):n}}),Dn({parentsUntil:function(e,t){return Bn(e,"parentNode",t)},nextUntil:function(e,t){return Mn(e,"nextSibling",1,t).slice(1)},prevUntil:function(e,t){return Mn(e,"previousSibling",1,t).slice(1)}},function(o,i){kn.fn[o]=function(t,e){var n=this,r=[];return n.each(function(){var e=i.call(r,this,t,r);e&&(kn.isArray(e)?r.push.apply(r,e):r.push(e))}),1<this.length&&(r=kn.unique(r),0!==o.indexOf("parents")&&"prevUntil"!==o||(r=r.reverse())),r=kn(r),e?r.filter(e):r}}),kn.fn.is=function(e){return!!e&&0<this.filter(e).length},kn.fn.init.prototype=kn.fn,kn.overrideDefaults=function(n){var r,o=function(e,t){return r=r||n(),0===arguments.length&&(e=r.element),t||(t=r.context),new o.fn.init(e,t)};return kn.extend(o,this),o},Ln=function(n,r,e){Dn(e,function(e,t){n[e]=n[e]||{},n[e][r]=t})},Oe.ie&&Oe.ie<8&&(Ln(Tn,"get",{maxlength:function(e){var t=e.maxLength;if(2147483647!==t)return t},size:function(e){var t=e.size;if(20!==t)return t},class:function(e){return e.className},style:function(e){var t=e.style.cssText;if(0!==t.length)return t}}),Ln(Tn,"set",{class:function(e,t){e.className=t},style:function(e,t){e.style.cssText=t}})),Oe.ie&&Oe.ie<9&&(Nn.float="styleFloat",Ln(En,"set",{opacity:function(e,t){var n=e.style;null===t||""===t?n.removeAttribute("filter"):(n.zoom=1,n.filter="alpha(opacity="+100*t+")")}})),kn.attrHooks=Tn,kn.cssHooks=En,Fn=function(n){var r,o=!1;return function(){var e,t=[];for(e=0;e<arguments.length;e++)t[e]=arguments[e];return o||(o=!0,r=n.apply(null,t)),r}},Hn=function(e,t){var n,r;for(n=0;n<e.length;n++)if((r=e[n]).test(t))return r},zn=function(e,t){var n,r=Hn(e,t);return r?jn((n=function(e){return Number(t.replace(r,"$"+e))})(1),n(2)):{major:0,minor:0}},Wn=function(e,t){var n=String(t).toLowerCase();return 0===e.length?Un():zn(e,n)},Un=function(){return jn(0,0)},Vn={nu:jn=function(e,t){return{major:e,minor:t}},detect:Wn,unknown:Un},$n="Chrome",Yn="IE",Xn="Opera",Kn="Firefox",Gn="Safari",Jn=function(e,t){return function(){return t===e}},Zn={unknown:function(){return Qn({current:void 0,version:Vn.unknown()})},nu:Qn=function(e){var t=e.current,n=e.version;return{current:t,version:n,isEdge:Jn(qn,t),isChrome:Jn($n,t),isIE:Jn(Yn,t),isOpera:Jn(Xn,t),isFirefox:Jn(Kn,t),isSafari:Jn(Gn,t)}},edge:BO(qn="Edge"),chrome:BO($n),ie:BO(Yn),opera:BO(Xn),firefox:BO(Kn),safari:BO(Gn)},tr="iOS",nr="Android",rr="Linux",or="OSX",ir="Solaris",ar="FreeBSD",ur=function(e,t){return function(){return t===e}},cr={unknown:function(){return sr({current:void 0,version:Vn.unknown()})},nu:sr=function(e){var t=e.current,n=e.version;return{current:t,version:n,isWindows:ur(er,t),isiOS:ur(tr,t),isAndroid:ur(nr,t),isOSX:ur(or,t),isLinux:ur(rr,t),isSolaris:ur(ir,t),isFreeBSD:ur(ar,t)}},windows:BO(er="Windows"),ios:BO(tr),android:BO(nr),linux:BO(rr),osx:BO(or),solaris:BO(ir),freebsd:BO(ar)},lr=function(e,t,n){var r=e.isiOS()&&!0===/ipad/i.test(n),o=e.isiOS()&&!r,i=e.isAndroid()&&3===e.version.major,a=e.isAndroid()&&4===e.version.major,u=r||i||a&&!0===/mobile/i.test(n),s=e.isiOS()||e.isAndroid(),c=s&&!u,l=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(n);return{isiPad:BO(r),isiPhone:BO(o),isTablet:BO(u),isPhone:BO(c),isTouch:BO(s),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:BO(l)}},fr=function(e,t){var n=String(t).toLowerCase();return S(e,function(e){return e.search(n)})},dr=function(e,n){return fr(e,n).map(function(e){var t=Vn.detect(e.versionRegexes,n);return{current:e.name,version:t}})},mr=function(e,n){return fr(e,n).map(function(e){var t=Vn.detect(e.versionRegexes,n);return{current:e.name,version:t}})},gr=function(e,t){return-1!==e.indexOf(t)},hr=function(e){return e.replace(/^\s+|\s+$/g,"")},pr=function(e){return e.replace(/^\s+/g,"")},vr=function(e){return e.replace(/\s+$/g,"")},xr=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return gr(e,"edge/")&&gr(e,"chrome")&&gr(e,"safari")&&gr(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,br=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/],search:function(e){return gr(e,"chrome")&&!gr(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return gr(e,"msie")||gr(e,"trident")}},{name:"Opera",versionRegexes:[br,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:(yr=function(t){return function(e){return gr(e,t)}})("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:yr("firefox")},{name:"Safari",versionRegexes:[br,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(gr(e,"safari")||gr(e,"mobile/"))&&gr(e,"applewebkit")}}],wr=[{name:"Windows",search:yr("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return gr(e,"iphone")||gr(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:yr("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:yr("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:yr("linux"),versionRegexes:[]},{name:"Solaris",search:yr("sunos"),versionRegexes:[]},{name:"FreeBSD",search:yr("freebsd"),versionRegexes:[]}],Cr={browsers:BO(xr),oses:BO(wr)},Sr=function(e){var t=Cr.browsers(),n=Cr.oses(),r=dr(t,e).fold(Zn.unknown,Zn.nu),o=mr(n,e).fold(cr.unknown,cr.nu),i=lr(o,r,e);return{browser:r,os:o,deviceType:i}},Nr=Fn(function(){var e=_e.navigator.userAgent;return Sr(e)}),Tr={detect:Nr},kr={fromHtml:function(e,t){var n=t||_e.document,r=n.createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||1<r.childNodes.length)throw _e.console.error("HTML does not have a single root node",e),new Error("HTML must have a single root node");return Er(r.childNodes[0])},fromTag:function(e,t){var n=t||_e.document,r=n.createElement(e);return Er(r)},fromText:function(e,t){var n=t||_e.document,r=n.createTextNode(e);return Er(r)},fromDom:Er=function(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:BO(e)}},fromPoint:function(e,t,n){var r=e.dom();return y.from(r.elementFromPoint(t,n)).map(Er)}},_e.Node.ATTRIBUTE_NODE,_e.Node.CDATA_SECTION_NODE,_e.Node.COMMENT_NODE,Rr=_e.Node.DOCUMENT_NODE,_e.Node.DOCUMENT_TYPE_NODE,_e.Node.DOCUMENT_FRAGMENT_NODE,_r=_e.Node.ELEMENT_NODE,Ar=_e.Node.TEXT_NODE,_e.Node.PROCESSING_INSTRUCTION_NODE,_e.Node.ENTITY_REFERENCE_NODE,_e.Node.ENTITY_NODE,_e.Node.NOTATION_NODE,Dr=function(e){return e.dom().nodeName.toLowerCase()},Or=function(e){return e.dom().nodeType},Br=(Pr=function(t){return function(e){return Or(e)===t}})(_r),Mr=Pr(Ar),Ir=Object.keys,Lr=Object.hasOwnProperty,Fr=function(e,t){var n,r,o,i=Ir(e);for(n=0,r=i.length;n<r;n++)t(e[o=i[n]],o,e)},Hr=function(e,r){return zr(e,function(e,t,n){return{k:t,v:r(e,t,n)}})},zr=function(r,o){var i={};return Fr(r,function(e,t){var n=o(e,t,r);i[n.k]=n.v}),i},Wr=function(e,n){var r={},o={};return Fr(e,function(e,t){(n(e,t)?r:o)[t]=e}),{t:r,f:o}},Ur=function(e,t){return Lr.call(e,t)},jr=function(e){return void 0!==e.style},Vr=function(e){var t=Mr(e)?e.dom().parentNode:e.dom();return null!=t&&t.ownerDocument.body.contains(t)},qr=function(e,t,n){if(!(P(n)||i(n)||p(n)))throw _e.console.error("Invalid call to Attr.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")},$r=function(e,t,n){qr(e.dom(),t,n)},Yr=function(e,t){var n=e.dom();Fr(t,function(e,t){qr(n,t,e)})},Xr=function(e,t){var n=e.dom().getAttribute(t);return null===n?void 0:n},Kr=function(e,t){var n=e.dom();return!(!n||!n.hasAttribute)&&n.hasAttribute(t)},Gr=function(e,t){e.dom().removeAttribute(t)},Jr=function(e,t,n){if(!P(n))throw _e.console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);jr(e)&&e.style.setProperty(t,n)},Qr=function(e,t){var n=e.dom();Fr(t,function(e,t){Jr(n,t,e)})},Zr=function(e,t){var n=e.dom(),r=_e.window.getComputedStyle(n),o=r.getPropertyValue(t),i=""!==o||Vr(e)?o:eo(n,t);return null===i?void 0:i},eo=function(e,t){return jr(e)?e.style.getPropertyValue(t):""},to=function(e,t){var n=e.dom(),r=eo(n,t);return y.from(r).filter(function(e){return 0<e.length})},no=function(){var e,t=[];for(e=0;e<arguments.length;e++)t[e]=arguments[e];return function(){var e,n,r=[];for(e=0;e<arguments.length;e++)r[e]=arguments[e];if(t.length!==r.length)throw new Error('Wrong number of arguments to struct. Expected "['+t.length+']", got '+r.length+" arguments");return n={},I(t,function(e,t){n[e]=BO(r[t])}),n}},ro=function(e,t){for(var n=[],r=function(e){return n.push(e),t(e)},o=t(e);(o=o.bind(r)).isSome(););return n},oo=function(){return K.getOrDie("Node")},io=function(e,t,n){return 0!=(e.compareDocumentPosition(t)&n)},ao=function(e,t){return io(e,t,oo().DOCUMENT_POSITION_CONTAINED_BY)},uo=_r,so=Rr,co=function(e,t){var n=e.dom();if(n.nodeType!==uo)return!1;if(void 0!==n.matches)return n.matches(t);if(void 0!==n.msMatchesSelector)return n.msMatchesSelector(t);if(void 0!==n.webkitMatchesSelector)return n.webkitMatchesSelector(t);if(void 0!==n.mozMatchesSelector)return n.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},lo=function(e){return e.nodeType!==uo&&e.nodeType!==so||0===e.childElementCount},fo=function(e,t){var n=void 0===t?_e.document:t.dom();return lo(n)?[]:Ae(n.querySelectorAll(e),kr.fromDom)},mo=function(e,t){var n=void 0===t?_e.document:t.dom();return lo(n)?y.none():y.from(n.querySelector(e)).map(kr.fromDom)},go=function(e,t){return e.dom()===t.dom()},ho=function(e,t){var n=e.dom(),r=t.dom();return n!==r&&n.contains(r)},po=function(e,t){return ao(e.dom(),t.dom())},vo=Tr.detect().browser,bo=vo.isIE()?po:ho,yo=function(e){return kr.fromDom(e.dom().ownerDocument)},xo=function(e){return kr.fromDom(e.dom().ownerDocument.documentElement)},wo=function(e){var t=e.dom(),n=t.ownerDocument.defaultView;return kr.fromDom(n)},Co=function(e){var t=e.dom();return y.from(t.parentNode).map(kr.fromDom)},So=function(e,t){for(var n,r,o=M(t)?t:BO(!1),i=e.dom(),a=[];null!==i.parentNode&&void 0!==i.parentNode&&(n=i.parentNode,r=kr.fromDom(n),a.push(r),!0!==o(r));)i=n;return a},No=function(e){var t=e.dom();return y.from(t.previousSibling).map(kr.fromDom)},To=function(e){var t=e.dom();return y.from(t.nextSibling).map(kr.fromDom)},Eo=function(e){return A(ro(e,No))},ko=function(e){return ro(e,To)},Ro=function(e){var t=e.dom();return Ae(t.childNodes,kr.fromDom)},_o=function(e,t){var n=e.dom().childNodes;return y.from(n[t]).map(kr.fromDom)},Ao=function(e){return _o(e,0)},Do=function(e){return _o(e,e.dom().childNodes.length-1)},Oo=function(e){return e.dom().childNodes.length},no("element","offset"),Po=Tr.detect().browser,Bo=function(e){return S(e,Br)},Mo=function(e){return Po.isFirefox()&&"table"===Dr(e)?Bo(Ro(e)).filter(function(e){return"caption"===Dr(e)}).bind(function(o){return Bo(ko(o)).map(function(e){var t=e.dom().offsetTop,n=o.dom().offsetTop,r=o.dom().offsetHeight;return t<=n?-r:0})}).getOr(0):0},Io={getPos:function(e,t,n){var r,o,i=0,a=0,u=e.ownerDocument;if(n=n||e,t){if(n===e&&t.getBoundingClientRect&&"static"===Zr(kr.fromDom(e),"position"))return{x:i=(o=t.getBoundingClientRect()).left+(u.documentElement.scrollLeft||e.scrollLeft)-u.documentElement.clientLeft,y:a=o.top+(u.documentElement.scrollTop||e.scrollTop)-u.documentElement.clientTop};for(r=t;r&&r!==n&&r.nodeType;)i+=r.offsetLeft||0,a+=r.offsetTop||0,r=r.offsetParent;for(r=t.parentNode;r&&r!==n&&r.nodeType;)i-=r.scrollLeft||0,a-=r.scrollTop||0,r=r.parentNode;a+=Mo(kr.fromDom(t))}return{x:i,y:a}}},Fo=function(t){return Lo(function(e){e(t)})},Ho={nu:Lo=function(e){var n=y.none(),t=[],r=function(n){return Lo(function(t){o(function(e){t(n(e))})})},o=function(e){a()?s(e):t.push(e)},i=function(e){n=y.some(e),u(t),t=[]},a=function(){return n.isSome()},u=function(e){I(e,s)},s=function(t){n.each(function(e){_e.setTimeout(function(){t(e)},0)})};return e(i),{get:o,map:r,isReady:a}},pure:Fo},zo=function(r){return function(){var e,t,n=[];for(e=0;e<arguments.length;e++)n[e]=arguments[e];t=this,_e.setTimeout(function(){r.apply(t,n)},0)}},Uo=function(t){return Wo(function(e){e(t)})},jo={nu:Wo=function(t){var e=function(e){t(zo(e))},n=function(r){return Wo(function(n){e(function(e){var t=r(e);n(t)})})},r=function(n){return Wo(function(t){e(function(e){n(e).get(t)})})},o=function(n){return Wo(function(t){e(function(e){n.get(t)})})},i=function(){return Ho.nu(e)},a=function(){var t=null;return Wo(function(e){null===t&&(t=i()),t.get(e)})};return{map:n,bind:r,anonBind:o,toLazy:i,toCached:a,get:e}},pure:Uo},Vo=function(a,e){return e(function(n){var r=[],o=0,i=function(t){return function(e){r[t]=e,++o>=a.length&&n(r)}};0===a.length?n([]):I(a,function(e,t){e.get(i(t))})})},qo=function(e){return Vo(e,jo.nu)},Xo={value:$o=function(n){var e=function(e){return n===e},t=function(e){return $o(n)},r=function(e){return $o(n)},o=function(e){return $o(e(n))},i=function(e){return $o(n)},a=function(e){e(n)},u=function(e){return e(n)},s=function(e,t){return t(n)},c=function(e){return e(n)},l=function(e){return e(n)},f=function(){return y.some(n)};return{is:e,isValue:m,isError:d,getOr:BO(n),getOrThunk:BO(n),getOrDie:BO(n),or:t,orThunk:r,fold:s,map:o,mapError:i,each:a,bind:u,exists:c,forall:l,toOption:f}},error:Yo=function(n){var e=function(e){return e()},t=function(){return c(String(n))()},r=function(e){return e},o=function(e){return e()},i=function(e){return Yo(n)},a=function(e){return Yo(e(n))},u=function(e){return Yo(n)},s=function(e,t){return e(n)};return{is:d,isValue:d,isError:m,getOr:MO,getOrThunk:e,getOrDie:t,or:r,orThunk:o,fold:s,map:i,mapError:a,each:OO,bind:u,exists:d,forall:m,toOption:y.none}}},Ko=["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"],Go=["area","base","basefont","br","col","frame","hr","img","input","isindex","link","meta","param","embed","source","wbr","track"],Jo=["td","th"],Qo=["thead","tbody","tfoot"],Zo=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],ei=["li","dd","dt"],ti=["ul","ol","dl"],ni=["pre","script","textarea","style"],oi=(ri=function(t){var n;return function(e){return(n=n||O(t,BO(!0))).hasOwnProperty(Dr(e))}})(["h1","h2","h3","h4","h5","h6"]),ii=ri(Ko),ai=function(e){return Br(e)&&!ii(e)},ui=function(e){return Br(e)&&"br"===Dr(e)},si=ri(Zo),ci=ri(ti),li=ri(ei),fi=ri(Go),di=ri(Qo),mi=ri(Jo),gi=ri(ni),pi=(hi=function(t){return function(e){return!!e&&e.nodeType===t}})(1),vi=function(e){var r=e.toLowerCase().split(" ");return function(e){var t,n;if(e&&e.nodeType)for(n=e.nodeName.toLowerCase(),t=0;t<r.length;t++)if(n===r[t])return!0;return!1}},bi=function(r,e){var o=e.toLowerCase().split(" ");return function(e){var t,n;if(pi(e))for(t=0;t<o.length;t++)if(((n=e.ownerDocument.defaultView.getComputedStyle(e,null))?n.getPropertyValue(r):null)===o[t])return!0;return!1}},yi=function(t,n){return function(e){return pi(e)&&e[t]===n}},xi=function(t,e){return function(e){return pi(e)&&e.hasAttribute(t)}},wi=function(t,n){return function(e){return pi(e)&&e.getAttribute(t)===n}},Ci=function(e){return pi(e)&&e.hasAttribute("data-mce-bogus")},Si=function(e){return pi(e)&&"all"===e.getAttribute("data-mce-bogus")},Ni=function(e){return pi(e)&&"TABLE"===e.tagName},Ti=function(t){return function(e){if(pi(e)){if(e.contentEditable===t)return!0;if(e.getAttribute("data-mce-contenteditable")===t)return!0}return!1}},Ei=hi(3),ki=hi(8),Ri=hi(9),_i=hi(11),Ai=vi("br"),Di=Ti("true"),Oi=Ti("false"),Pi={isText:Ei,isElement:pi,isComment:ki,isDocument:Ri,isDocumentFragment:_i,isBr:Ai,isContentEditableTrue:Di,isContentEditableFalse:Oi,matchNodeNames:vi,hasPropValue:yi,hasAttribute:xi,hasAttributeValue:wi,matchStyleValues:bi,isBogus:Ci,isBogusAll:Si,isTable:Ni},Bi=function(e){var t=e.previousSibling&&"SPAN"===e.previousSibling.nodeName,n=e.nextSibling&&"SPAN"===e.nextSibling.nodeName;return t&&n},Mi=function(e){return e&&"SPAN"===e.tagName&&"bookmark"===e.getAttribute("data-mce-type")},Li={trimNode:Ii=function(e,t){var n,r,o=t.childNodes;if(!Pi.isElement(t)||!Mi(t)){for(n=o.length-1;0<=n;n--)Ii(e,o[n]);if(!1===Pi.isDocument(t)){if(Pi.isText(t)&&0<t.nodeValue.length){if(r=un.trim(t.nodeValue).length,e.isBlock(t.parentNode)||0<r)return;if(0===r&&Bi(t))return}else if(Pi.isElement(t)&&(1===(o=t.childNodes).length&&Mi(o[0])&&t.parentNode.insertBefore(o[0],t),o.length||fi(kr.fromDom(t))))return;e.remove(t)}return t}}},Fi=un.makeMap,Ui=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,ji=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Vi=/[<>&\"\']/g,qi=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,$i={128:"",130:"",131:"",132:"",133:"",134:"",135:"",136:"",137:"",138:"",139:"",140:"",142:"",145:"",146:"",147:"",148:"",149:"",150:"",151:"",152:"",153:"",154:"",155:"",156:"",158:"",159:""},zi={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},Wi={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},Yi=function(e){var t;return(t=kr.fromTag("div").dom()).innerHTML=e,t.textContent||t.innerText||e},Hi=(Xi=function(e,t){var n,r,o,i={};if(e){for(e=e.split(","),t=t||10,n=0;n<e.length;n+=2)r=String.fromCharCode(parseInt(e[n],t)),zi[r]||(o="&"+e[n+1]+";",i[r]=o,i[o]=r);return i}})("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),Qi=function(e,t){var n=Xi(t)||Hi,r=function(e,t){return e.replace(t?Ui:ji,function(e){return void 0!==zi[e]?zi[e]:void 0!==n[e]?n[e]:1<e.length?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":"&#"+e.charCodeAt(0)+";"})},o=function(e,t){return Ji(e,t,n)},i=Fi(e.replace(/\+/g,","));return i.named&&i.numeric?r:i.named?t?o:Ji:i.numeric?Gi:Ki},Zi={encodeRaw:Ki=function(e,t){return e.replace(t?Ui:ji,function(e){return zi[e]||e})},encodeAllRaw:function(e){return(""+e).replace(Vi,function(e){return zi[e]||e})},encodeNumeric:Gi=function(e,t){return e.replace(t?Ui:ji,function(e){return 1<e.length?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":zi[e]||"&#"+e.charCodeAt(0)+";"})},encodeNamed:Ji=function(e,t,n){return n=n||Hi,e.replace(t?Ui:ji,function(e){return zi[e]||n[e]||e})},getEncodeFunc:Qi,decode:function(e){return e.replace(qi,function(e,t){return t?65535<(t="x"===t.charAt(0).toLowerCase()?parseInt(t.substr(1),16):parseInt(t,10))?(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t))):$i[t]||String.fromCharCode(t):Wi[e]||Hi[e]||Yi(e)})}},ea={},ta={},na=un.makeMap,ra=un.each,oa=un.extend,ia=un.explode,aa=un.inArray,ua=function(e,t){return(e=un.trim(e))?e.split(t||" "):[]},sa=function(e){var u,t,n,r,o,i,s={},a=function(e,t,n){var r,o,i,a=function(e,t){var n,r,o={};for(n=0,r=e.length;n<r;n++)o[e[n]]=t||{};return o};for(t=t||"","string"==typeof(n=n||[])&&(n=ua(n)),r=(e=ua(e)).length;r--;)i={attributes:a(o=ua([u,t].join(" "))),attributesOrder:o,children:a(n,ta)},s[e[r]]=i},c=function(e,t){var n,r,o,i;for(n=(e=ua(e)).length,t=ua(t);n--;)for(r=s[e[n]],o=0,i=t.length;o<i;o++)r.attributes[t[o]]={},r.attributesOrder.push(t[o])};return ea[e]?ea[e]:(u="id accesskey class dir lang style tabindex title role",t="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",n="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==e&&(u+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",t+=" article aside details dialog figure main header footer hgroup section nav",n+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),"html5-strict"!==e&&(u+=" xml:lang",n=[n,i="acronym applet basefont big font strike tt"].join(" "),ra(ua(i),function(e){a(e,"",n)}),t=[t,o="center dir isindex noframes"].join(" "),r=[t,n].join(" "),ra(ua(o),function(e){a(e,"",r)})),r=r||[t,n].join(" "),a("html","manifest","head body"),a("head","","base command link meta noscript script style title"),a("title hr noscript br"),a("base","href target"),a("link","href rel media hreflang type sizes hreflang"),a("meta","name http-equiv content charset"),a("style","media type scoped"),a("script","src async defer type charset"),a("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",r),a("address dt dd div caption","",r),a("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",n),a("blockquote","cite",r),a("ol","reversed start type","li"),a("ul","","li"),a("li","value",r),a("dl","","dt dd"),a("a","href target rel media hreflang type",n),a("q","cite",n),a("ins del","cite datetime",r),a("img","src sizes srcset alt usemap ismap width height"),a("iframe","src name width height",r),a("embed","src type width height"),a("object","data type typemustmatch name usemap form width height",[r,"param"].join(" ")),a("param","name value"),a("map","name",[r,"area"].join(" ")),a("area","alt coords shape href target rel media hreflang type"),a("table","border","caption colgroup thead tfoot tbody tr"+("html4"===e?" col":"")),a("colgroup","span","col"),a("col","span"),a("tbody thead tfoot","","tr"),a("tr","","td th"),a("td","colspan rowspan headers",r),a("th","colspan rowspan headers scope abbr",r),a("form","accept-charset action autocomplete enctype method name novalidate target",r),a("fieldset","disabled form name",[r,"legend"].join(" ")),a("label","form for",n),a("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),a("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===e?r:n),a("select","disabled form multiple name required size","option optgroup"),a("optgroup","disabled label","option"),a("option","disabled label selected value"),a("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),a("menu","type label",[r,"li"].join(" ")),a("noscript","",r),"html4"!==e&&(a("wbr"),a("ruby","",[n,"rt rp"].join(" ")),a("figcaption","",r),a("mark rt rp summary bdi","",n),a("canvas","width height",r),a("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[r,"track source"].join(" ")),a("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[r,"track source"].join(" ")),a("picture","","img source"),a("source","src srcset type media sizes"),a("track","kind src srclang label default"),a("datalist","",[n,"option"].join(" ")),a("article section nav aside main header footer","",r),a("hgroup","","h1 h2 h3 h4 h5 h6"),a("figure","",[r,"figcaption"].join(" ")),a("time","datetime",n),a("dialog","open",r),a("command","type label icon disabled checked radiogroup command"),a("output","for form name",n),a("progress","value max",n),a("meter","value min max low high optimum",n),a("details","open",[r,"summary"].join(" ")),a("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!==e&&(c("script","language xml:space"),c("style","xml:space"),c("object","declare classid code codebase codetype archive standby align border hspace vspace"),c("embed","align name hspace vspace"),c("param","valuetype type"),c("a","charset name rev shape coords"),c("br","clear"),c("applet","codebase archive code object alt name width height align hspace vspace"),c("img","name longdesc align border hspace vspace"),c("iframe","longdesc frameborder marginwidth marginheight scrolling align"),c("font basefont","size color face"),c("input","usemap align"),c("select","onchange"),c("textarea"),c("h1 h2 h3 h4 h5 h6 div p legend caption","align"),c("ul","type compact"),c("li","type"),c("ol dl menu dir","compact"),c("pre","width xml:space"),c("hr","align noshade size width"),c("isindex","prompt"),c("table","summary width frame rules cellspacing cellpadding align bgcolor"),c("col","width align char charoff valign"),c("colgroup","width align char charoff valign"),c("thead","align char charoff valign"),c("tr","align char charoff valign bgcolor"),c("th","axis align char charoff valign nowrap bgcolor width height"),c("form","accept"),c("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),c("tfoot","align char charoff valign"),c("tbody","align char charoff valign"),c("area","nohref"),c("body","background bgcolor text link vlink alink")),"html4"!==e&&(c("input button select textarea","autofocus"),c("input textarea","placeholder"),c("a","download"),c("link script img","crossorigin"),c("iframe","sandbox seamless allowfullscreen")),ra(ua("a form meter progress dfn"),function(e){s[e]&&delete s[e].children[e]}),delete s.caption.children.table,delete s.script,ea[e]=s)},ca=function(e,n){var r;return e&&(r={},"string"==typeof e&&(e={"*":e}),ra(e,function(e,t){r[t]=r[t.toUpperCase()]="map"===n?na(e,/[, ]/):ia(e,/[, ]/)})),r},la=function(e,t,n,r){var o=function(e){return 1<(e=parseInt(e,10).toString(16)).length?e:"0"+e};return"#"+o(t)+o(n)+o(r)},fa=un.each,da=un.grep,ma=Oe.ie,ga=/^([a-z0-9],?)+$/i,ha=/^[ \t\r\n]*$/,pa=function(n,r,o){var e={},i=r.keep_values,t={set:function(e,t,n){r.url_converter&&(t=r.url_converter.call(r.url_converter_scope||o(),t,n,e[0])),e.attr("data-mce-"+n,t).attr(n,t)},get:function(e,t){return e.attr("data-mce-"+t)||e.attr(t)}};return e={style:{set:function(e,t){null===t||"object"!=typeof t?(i&&e.attr("data-mce-style",t),e.attr("style",t)):e.css(t)},get:function(e){var t=e.attr("data-mce-style")||e.attr("style");return t=n.serialize(n.parse(t),e[0].nodeName)}}},i&&(e.href=e.src=t),e},va=function(e,t){var n=t.attr("style"),r=e.serialize(e.parse(n),t[0].nodeName);r||(r=null),t.attr("data-mce-style",r)},ba=function(e,t){var n,r,o=0;if(e)for(n=e.nodeType,e=e.previousSibling;e;e=e.previousSibling)r=e.nodeType,(!t||3!==r||r!==n&&e.nodeValue.length)&&(o++,n=r);return o},(mO=eP||(eP={})).DOM=mO(_e.document),mO.nodeIndex=ba,xa=(ya=eP).DOM,wa=un.each,Ca=un.grep,Sa=function(e){return"function"==typeof e},(Na=function(){var o=0,u=1,s=2,c=3,l={},i=[],f={},d=[],m=0,g=function(e,t,n){var r=xa,o=function(){r.remove(a),u&&(u.onreadystatechange=u.onload=u=null),t()},i=function(){Sa(n)?n():"undefined"!=typeof console&&console.log&&console.log("Failed to load script: "+e)},a=r.uniqueId(),u=_e.document.createElement("script");u.id=a,u.type="text/javascript",u.src=un._addCacheSuffix(e),u.onload=o,u.onerror=i,(_e.document.getElementsByTagName("head")[0]||_e.document.body).appendChild(u)};this.isDone=function(e){return l[e]===s},this.markDone=function(e){l[e]=s},this.add=this.load=function(e,t,n,r){void 0===l[e]&&(i.push(e),l[e]=o),t&&(f[e]||(f[e]=[]),f[e].push({success:t,failure:r,scope:n||this}))},this.remove=function(e){delete l[e],delete f[e]},this.loadQueue=function(e,t,n){this.loadScripts(i,e,t,n)},this.loadScripts=function(n,e,t,r){var o,i=[],a=function(t,e){wa(f[e],function(e){Sa(e[t])&&e[t].call(e.scope)}),f[e]=void 0};d.push({success:e,failure:r,scope:t||this}),(o=function(){var e,t=Ca(n);n.length=0,wa(t,function(e){l[e]!==s?l[e]!==c?l[e]!==u&&(l[e]=u,m++,g(e,function(){l[e]=s,m--,a("success",e),o()},function(){l[e]=c,m--,i.push(e),a("failure",e),o()})):a("failure",e):a("success",e)}),m||(e=d.slice(0),d.length=0,wa(e,function(e){0===i.length?Sa(e.success)&&e.success.call(e.scope):Sa(e.failure)&&e.failure.call(e.scope,i)}))})()}}).ScriptLoader=new Na,Ta=un.each,(gO=tP||(tP={})).PluginManager=gO(),gO.ThemeManager=gO(),Ea=function(t,n){Co(t).each(function(e){e.dom().insertBefore(n.dom(),t.dom())})},ka=function(e,t){To(e).fold(function(){Co(e).each(function(e){_a(e,t)})},function(e){Ea(e,t)})},Ra=function(t,n){Ao(t).fold(function(){_a(t,n)},function(e){t.dom().insertBefore(n.dom(),e.dom())})},_a=function(e,t){e.dom().appendChild(t.dom())},Aa=function(e,t){Ea(e,t),_a(t,e)},Da=function(t,e){I(e,function(e){Ea(t,e)})},Oa=function(t,e){I(e,function(e){_a(t,e)})},Pa=function(e){e.dom().textContent="",I(Ro(e),function(e){Ba(e)})},Ba=function(e){var t=e.dom();null!==t.parentNode&&t.parentNode.removeChild(t)},Ma=function(e){var t=Ro(e);0<t.length&&Da(e,t),Ba(e)},Ia=function(n,r){var o=null,e=function(){null!==o&&(_e.clearTimeout(o),o=null)},t=function(){var e,t=[];for(e=0;e<arguments.length;e++)t[e]=arguments[e];null===o&&(o=_e.setTimeout(function(){n.apply(null,t),o=null},r))};return{cancel:e,throttle:t}},La=function(n,r){var o=null,e=function(){null!==o&&(_e.clearTimeout(o),o=null)},t=function(){var e,t=[];for(e=0;e<arguments.length;e++)t[e]=arguments[e];null!==o&&_e.clearTimeout(o),o=_e.setTimeout(function(){n.apply(null,t),o=null},r)};return{cancel:e,throttle:t}},Fa=function(e){var t=e,n=function(){return t},r=function(e){t=e},o=function(){return Fa(n())};return{get:n,set:r,clone:o}},Ha=function(e,t){var n=Xr(e,t);return void 0===n||""===n?[]:n.split(" ")},za=function(e,t,n){var r=Ha(e,t),o=r.concat([n]);return $r(e,t,o.join(" ")),!0},Wa=function(e,t,n){var r=L(Ha(e,t),function(e){return e!==n});return 0<r.length?$r(e,t,r.join(" ")):Gr(e,t),!1},Ua=function(e){return void 0!==e.dom().classList},ja=function(e){return Ha(e,"class")},Va=function(e,t){return za(e,"class",t)},qa=function(e,t){return Wa(e,"class",t)},$a=function(e,t){Ua(e)?e.dom().classList.add(t):Va(e,t)},Ya=function(e){0===(Ua(e)?e.dom().classList:ja(e)).length&&Gr(e,"class")},Xa=function(e,t){Ua(e)?e.dom().classList.remove(t):qa(e,t),Ya(e)},Ka=function(e,t){return Ua(e)&&e.dom().classList.contains(t)},Ga=function(e,t){var n=[];return I(Ro(e),function(e){t(e)&&(n=n.concat([e])),n=n.concat(Ga(e,t))}),n},Ja=function(e,t){return fo(t,e)},Qa=function(e,t,n){for(var r,o=e.dom(),i=M(n)?n:BO(!1);o.parentNode;){if(o=o.parentNode,t(r=kr.fromDom(o)))return y.some(r);if(i(r))break}return y.none()},Za=function(e,t,n){return nP(function(e){return t(e)},Qa,e,t,n)},eu=function(e,t,n){return Qa(e,function(e){return co(e,t)},n)},tu=function(e,t){return mo(t,e)},nu=function(e,t,n){return nP(co,eu,e,t,n)},ru=BO("mce-annotation"),ou=BO("data-mce-annotation"),iu=BO("data-mce-annotation-uid"),au=function(r,e){var t=r.selection.getRng(),n=kr.fromDom(t.startContainer),o=kr.fromDom(r.getBody()),i=e.fold(function(){return"."+ru()},function(e){return"["+ou()+'="'+e+'"]'}),a=_o(n,t.startOffset).getOr(n),u=nu(a,i,function(e){return go(e,o)}),s=function(e,t){return Kr(e,t)?y.some(Xr(e,t)):y.none()};return u.bind(function(e){return s(e,""+iu()).bind(function(n){return s(e,""+ou()).map(function(e){var t=su(r,n);return{uid:n,name:e,elements:t}})})})},uu=function(e){return Br(e)&&Ka(e,ru())},su=function(e,t){var n=kr.fromDom(e.getBody());return Ja(n,"["+iu()+'="'+t+'"]')},cu=function(e,t){var n=kr.fromDom(e.getBody()),r=Ja(n,"["+ou()+'="'+t+'"]'),o={};return I(r,function(e){var t=Xr(e,iu()),n=o.hasOwnProperty(t)?o[t]:[];o[t]=n.concat([e])}),o},lu=function(n,e){var i=Fa({}),a=function(){return{listeners:[],previous:Fa(y.none())}},o=function(e,t){r(e,function(e){return t(e),e})},r=function(e,t){var n=i.get(),r=n.hasOwnProperty(e)?n[e]:a(),o=t(r);n[e]=o,i.set(n)},u=function(t,n,r){o(t,function(e){I(e.listeners,function(e){return e(!0,t,{uid:n,nodes:Ae(r,function(e){return e.dom()})})})})},s=function(t){o(t,function(e){I(e.listeners,function(e){return e(!1,t)})})},t=La(function(){var e=i.get(),t=z(Ir(e));I(t,function(e){r(e,function(o){var i=o.previous.get();return au(n,y.some(e)).fold(function(){i.isSome()&&(s(e),o.previous.set(y.none()))},function(e){var t=e.uid,n=e.name,r=e.elements;i.is(t)||(u(n,t,r),o.previous.set(y.some(t)))}),{previous:o.previous,listeners:o.listeners}})})},30);return n.on("remove",function(){t.cancel()}),n.on("nodeChange",function(){t.throttle()}),{addListener:function(e,t){r(e,function(e){return{previous:e.previous,listeners:e.listeners.concat([t])}})}}},fu=function(e,n){e.on("init",function(){e.serializer.addNodeFilter("span",function(e){I(e,function(t){var e;(e=t,y.from(e.attributes.map[ou()]).bind(n.lookup)).each(function(e){!1===e.persistent&&t.unwrap()})})})})},du=function(){var n={},e=function(e,t){n[e]={name:e,settings:t}},t=function(e){return n.hasOwnProperty(e)?y.from(n[e]).map(function(e){return e.settings}):y.none()};return{register:e,lookup:t}},mu=0,gu=function(e){var t=new Date,n=t.getTime(),r=Math.floor(1e9*Math.random());return e+"_"+r+ ++mu+String(n)},hu=function(t,e){I(e,function(e){$a(t,e)})},pu=function(e,t){return kr.fromDom(e.dom().cloneNode(t))},vu=function(e){return pu(e,!1)},bu=function(e){return pu(e,!0)},yu=function(e,t){var n=t||_e.document,r=n.createElement("div");return r.innerHTML=e,Ro(kr.fromDom(r))},xu=function(e){return e.dom().innerHTML},wu=function(e,t){var n=yo(e),r=n.dom(),o=kr.fromDom(r.createDocumentFragment()),i=yu(t,r);Oa(o,i),Pa(e),_a(e,o)},Su=function(e){return e===Cu},Nu=Cu="\ufeff",Tu=function(e){return e.replace(new RegExp(Cu,"g"),"")},Eu=Pi.isElement,ku=Pi.isText,Ru=function(e){return ku(e)&&(e=e.parentNode),Eu(e)&&e.hasAttribute("data-mce-caret")},_u=function(e){return ku(e)&&Su(e.data)},Au=function(e){return Ru(e)||_u(e)},Du=function(e){return e.firstChild!==e.lastChild||!Pi.isBr(e.firstChild)},Ou=function(e,t){var n,r,o;if(r=e.ownerDocument.createTextNode(Nu),o=e.parentNode,t){if(n=e.previousSibling,ku(n)){if(Au(n))return n;if(Fu(n))return n.splitText(n.data.length-1)}o.insertBefore(r,e)}else{if(n=e.nextSibling,ku(n)){if(Au(n))return n;if(Lu(n))return n.splitText(1),n}e.nextSibling?o.insertBefore(r,e.nextSibling):o.appendChild(r)}return r},Pu=function(e){var t=e.container();return!(!e||!Pi.isText(t))&&(t.data.charAt(e.offset())===Nu||e.isAtStart()&&_u(t.previousSibling))},Bu=function(e){var t=e.container();return!(!e||!Pi.isText(t))&&(t.data.charAt(e.offset()-1)===Nu||e.isAtEnd()&&_u(t.nextSibling))},Mu=function(){var e=_e.document.createElement("br");return e.setAttribute("data-mce-bogus","1"),e},Iu=function(e,t,n){var r,o;return(r=t.ownerDocument.createElement(e)).setAttribute("data-mce-caret",n?"before":"after"),r.setAttribute("data-mce-bogus","all"),r.appendChild(Mu()),o=t.parentNode,n?o.insertBefore(r,t):t.nextSibling?o.insertBefore(r,t.nextSibling):o.appendChild(r),r},Lu=function(e){return ku(e)&&e.data[0]===Nu},Fu=function(e){return ku(e)&&e.data[e.data.length-1]===Nu},Hu=function(e){var t=e.getElementsByTagName("br"),n=t[t.length-1];Pi.isBogus(n)&&n.parentNode.removeChild(n)},zu=function(e){return e&&e.hasAttribute("data-mce-caret")?(Hu(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("_moz_abspos"),e):null},Wu=function(e){return Ru(e.startContainer)},Uu=Pi.isContentEditableTrue,ju=Pi.isContentEditableFalse,Vu=Pi.isBr,qu=Pi.isText,$u=Pi.matchNodeNames("script style textarea"),Yu=Pi.matchNodeNames("img input textarea hr iframe video audio object"),Xu=Pi.matchNodeNames("table"),Ku=Au,Gu=function(e){return!Ku(e)&&(qu(e)?!$u(e.parentNode):Yu(e)||Vu(e)||Xu(e)||Qu(e))},Ju=function(e){return Pi.isElement(e)&&"true"===e.getAttribute("unselectable")},Qu=function(e){return!1===Ju(e)&&ju(e)},Zu=function(e,t){for(e=e.parentNode;e&&e!==t;e=e.parentNode){if(Qu(e))return!1;if(Uu(e))return!0}return!0},es=function(e){return!!Qu(e)&&!0!==F(j(e.getElementsByTagName("*")),function(e,t){return e||Uu(t)},!1)},ts=function(e){return Yu(e)||es(e)},ns=function(e,t){return Gu(e)&&Zu(e,t)},rs=Math.round,os=function(e){return e?{left:rs(e.left),top:rs(e.top),bottom:rs(e.bottom),right:rs(e.right),width:rs(e.width),height:rs(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0}},is=function(e,t){return e=os(e),t||(e.left=e.left+e.width),e.right=e.left,e.width=0,e},as=function(e,t){return e.left===t.left&&e.top===t.top&&e.bottom===t.bottom&&e.right===t.right},us=function(e,t,n){return 0<=e&&e<=Math.min(t.height,n.height)/2},ss=function(e,t){return e.bottom-e.height/2<t.top||!(e.top>t.bottom)&&us(t.top-e.bottom,e,t)},cs=function(e,t){return e.top>t.bottom||!(e.bottom<t.top)&&us(t.bottom-e.top,e,t)},ls=function(e,t,n){return t>=e.left&&t<=e.right&&n>=e.top&&n<=e.bottom},fs=function(e,t){return t.left>e.left&&t.right<e.right?0:t.left<e.left?t.left-e.left:t.right-e.right},ds=function(e,t){return t.top>e.top&&t.bottom<e.bottom?0:t.top<e.top?t.top-e.top:t.bottom-e.bottom},ms=function(e,t){return{x:fs(e,t),y:ds(e,t)}},gs=function(e){var t=e.startContainer,n=e.startOffset;return t.hasChildNodes()&&e.endOffset===n+1?t.childNodes[n]:null},hs=function(e,t){return 1===e.nodeType&&e.hasChildNodes()&&(t>=e.childNodes.length&&(t=e.childNodes.length-1),e=e.childNodes[t]),e},ps=new RegExp("[-----------------------------------------------------------------------------------------------------------------------------------]"),vs=function(e){return"string"==typeof e&&768<=e.charCodeAt(0)&&ps.test(e)},bs=function(e,t){var n,r,o=[];for(n=0;n<e.length;n++){if(!(r=e[n]).isSome())return y.none();o.push(r.getOrDie())}return y.some(t.apply(null,o))},ys=[].slice,xs=function(){var e,n,t=[];for(e=0;e<arguments.length;e++)t[e]=arguments[e];return n=ys.call(arguments),function(e){for(var t=0;t<n.length;t++)if(!n[t](e))return!1;return!0}},ws=function(){var e,n,t=[];for(e=0;e<arguments.length;e++)t[e]=arguments[e];return n=ys.call(arguments),function(e){for(var t=0;t<n.length;t++)if(n[t](e))return!0;return!1}},Cs=Pi.isElement,Ss=Gu,Ns=Pi.matchStyleValues("display","block table"),Ts=Pi.matchStyleValues("float","left right"),Es=xs(Cs,Ss,s(Ts)),ks=s(Pi.matchStyleValues("white-space","pre pre-line pre-wrap")),Rs=Pi.isText,_s=Pi.isBr,As=ya.nodeIndex,Ds=hs,Os=function(e){return"createRange"in e?e.createRange():ya.DOM.createRng()},Ps=function(e){return e&&/[\r\n\t ]/.test(e)},Bs=function(e){return!!e.setStart&&!!e.setEnd},Ms=function(e){var t,n=e.startContainer,r=e.startOffset;return!!(Ps(e.toString())&&ks(n.parentNode)&&Pi.isText(n)&&(t=n.data,Ps(t[r-1])||Ps(t[r+1])))},Is=function(e){var t,n=e.ownerDocument,r=Os(n),o=n.createTextNode(""),i=e.parentNode;return i.insertBefore(o,e),r.setStart(o,0),r.setEnd(o,1),t=os(r.getBoundingClientRect()),i.removeChild(o),t},Ls=function(e){var t,n=e.startContainer,r=e.endContainer,o=e.startOffset,i=e.endOffset;return n===r&&Pi.isText(r)&&0===o&&1===i?((t=e.cloneRange()).setEndAfter(r),Hs(t)):null},Fs=function(e){return 0===e.left&&0===e.right&&0===e.top&&0===e.bottom},Hs=function(e){var t,n;return t=0<(n=e.getClientRects()).length?os(n[0]):os(e.getBoundingClientRect()),!Bs(e)&&_s(e)&&Fs(t)?Is(e):Fs(t)&&Bs(e)?Ls(e):t},zs=function(e,t){var n=is(e,t);return n.width=1,n.right=n.left+1,n},Ws=function(e){var t,n,r=[],o=function(e){0!==e.height&&(0<r.length&&as(e,r[r.length-1])||r.push(e))},i=function(e,t){var n=Os(e.ownerDocument);if(t<e.data.length){if(vs(e.data[t]))return r;if(vs(e.data[t-1])&&(n.setStart(e,t),n.setEnd(e,t+1),!Ms(n)))return o(zs(Hs(n),!1)),r}0<t&&(n.setStart(e,t-1),n.setEnd(e,t),Ms(n)||o(zs(Hs(n),!1))),t<e.data.length&&(n.setStart(e,t),n.setEnd(e,t+1),Ms(n)||o(zs(Hs(n),!0)))};if(Rs(e.container()))return i(e.container(),e.offset()),r;if(Cs(e.container()))if(e.isAtEnd())n=Ds(e.container(),e.offset()),Rs(n)&&i(n,n.data.length),Es(n)&&!_s(n)&&o(zs(Hs(n),!1));else{if(n=Ds(e.container(),e.offset()),Rs(n)&&i(n,0),Es(n)&&e.isAtEnd())return o(zs(Hs(n),!1)),r;t=Ds(e.container(),e.offset()-1),Es(t)&&!_s(t)&&(Ns(t)||Ns(n)||!Es(n))&&o(zs(Hs(t),!1)),Es(n)&&o(zs(Hs(n),!0))}return r},(hO=rP||(rP={})).fromRangeStart=function(e){return hO(e.startContainer,e.startOffset)},hO.fromRangeEnd=function(e){return hO(e.endContainer,e.endOffset)},hO.after=function(e){return hO(e.parentNode,As(e)+1)},hO.before=function(e){return hO(e.parentNode,As(e))},hO.isAbove=function(e,t){return bs([W(t.getClientRects()),U(e.getClientRects())],ss).getOr(!1)},hO.isBelow=function(e,t){return bs([U(t.getClientRects()),W(e.getClientRects())],cs).getOr(!1)},hO.isAtStart=function(e){return!!e&&e.isAtStart()},hO.isAtEnd=function(e){return!!e&&e.isAtEnd()},hO.isTextPosition=function(e){return!!e&&Pi.isText(e.container())},hO.isElementPosition=function(e){return!1===hO.isTextPosition(e)},Us=rP,js=Pi.isText,Vs=Pi.isBogus,qs=ya.nodeIndex,$s=function(e){var t=e.parentNode;return Vs(t)?$s(t):t},Ys=function(e){return e?Yt.reduce(e.childNodes,function(e,t){return Vs(t)&&"BR"!==t.nodeName?e=e.concat(Ys(t)):e.push(t),e},[]):[]},Xs=function(e,t){for(;(e=e.previousSibling)&&js(e);)t+=e.data.length;return t},Ks=function(t){return function(e){return t===e}},Gs=function(e){var r,t,n;return r=Ys($s(e)),t=Yt.findIndex(r,Ks(e),e),r=r.slice(0,t+1),n=Yt.reduce(r,function(e,t,n){return js(t)&&js(r[n-1])&&e++,e},0),r=Yt.filter(r,Pi.matchNodeNames(e.nodeName)),(t=Yt.findIndex(r,Ks(e),e))-n},Js=function(e){return(js(e)?"text()":e.nodeName.toLowerCase())+"["+Gs(e)+"]"},Qs=function(e,t,n){var r=[];for(t=t.parentNode;!(t===e||n&&n(t));t=t.parentNode)r.push(t);return r},Zs=function(e,t){var n,r,o,i,a,u=[];return n=t.container(),r=t.offset(),js(n)?o=Xs(n,r):(r>=(i=n.childNodes).length?(o="after",r=i.length-1):o="before",n=i[r]),u.push(Js(n)),a=Qs(e,n),a=Yt.filter(a,s(Pi.isBogus)),(u=u.concat(Yt.map(a,function(e){return Js(e)}))).reverse().join("/")+","+o},ec=function(e,t,n){var r=Ys(e);return r=Yt.filter(r,function(e,t){return!js(e)||!js(r[t-1])}),(r=Yt.filter(r,Pi.matchNodeNames(t)))[n]},tc=function(e,t){for(var n,r=e,o=0;js(r);){if(n=r.data.length,o<=t&&t<=o+n){e=r,t-=o;break}if(!js(r.nextSibling)){e=r,t=n;break}o+=n,r=r.nextSibling}return js(e)&&t>e.data.length&&(t=e.data.length),Us(e,t)},nc=function(e,t){var n,r,o;return t?(t=(n=t.split(","))[0].split("/"),o=1<n.length?n[1]:"before",(r=Yt.reduce(t,function(e,t){return(t=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(t))?("text()"===t[1]&&(t[1]="#text"),ec(e,t[1],parseInt(t[2],10))):null},e))?js(r)?tc(r,parseInt(o,10)):(o="after"===o?qs(r)+1:qs(r),Us(r.parentNode,o)):null):null},rc=function(e,t){Pi.isText(t)&&0===t.data.length&&e.remove(t)},oc=function(e,t,n){t.insertNode(n),rc(e,n.previousSibling),rc(e,n.nextSibling)},ic=function(t,e,n){var r=y.from(n.firstChild),o=y.from(n.lastChild);e.insertNode(n),r.each(function(e){return rc(t,e.previousSibling)}),o.each(function(e){return rc(t,e.nextSibling)})},ac=function(e,t,n){Pi.isDocumentFragment(n)?ic(e,t,n):oc(e,t,n)},uc=Pi.isContentEditableFalse,sc=function(e,t,n){var r,o;for(o=e(t.data.slice(0,n)).length,r=t.previousSibling;r&&Pi.isText(r);r=r.previousSibling)o+=e(r.data).length;return o},cc=function(e,t,n,r,o){var i,a=r[o?"startContainer":"endContainer"],u=r[o?"startOffset":"endOffset"],s=[],c=0,l=e.getRoot();for(Pi.isText(a)?s.push(n?sc(t,a,u):u):(u>=(i=a.childNodes).length&&i.length&&(c=1,u=Math.max(0,i.length-1)),s.push(e.nodeIndex(i[u],n)+c));a&&a!==l;a=a.parentNode)s.push(e.nodeIndex(a,n));return s},lc=function(e,t,n,r){var o=t.dom,i={};return i.start=cc(o,e,n,r,!0),t.isCollapsed()||(i.end=cc(o,e,n,r,!1)),i},fc=function(e,t,n){var r=0;return un.each(e.select(t),function(e){if("all"!==e.getAttribute("data-mce-bogus"))return e!==n&&void r++}),r},dc=function(e,t){var n,r=t?"start":"end",o=e[r+"Container"],i=e[r+"Offset"];Pi.isElement(o)&&"TR"===o.nodeName&&(o=(n=o.childNodes)[Math.min(t?i:i-1,n.length-1)])&&(i=t?0:o.childNodes.length,e["set"+(t?"Start":"End")](o,i))},mc=function(e){return dc(e,!0),dc(e,!1),e},gc=function(e,t){var n;if(Pi.isElement(e)&&(e=hs(e,t),uc(e)))return e;if(Au(e)){if(Pi.isText(e)&&Ru(e)&&(e=e.parentNode),n=e.previousSibling,uc(n))return n;if(n=e.nextSibling,uc(n))return n}},hc=function(e){return gc(e.startContainer,e.startOffset)||gc(e.endContainer,e.endOffset)},vc=function(e){var t=e.getRng();return{start:Zs(e.dom.getRoot(),Us.fromRangeStart(t)),end:Zs(e.dom.getRoot(),Us.fromRangeEnd(t))}},bc=function(e){return{rng:e.getRng()}},yc=function(e,t,n){var r={"data-mce-type":"bookmark",id:t,style:"overflow:hidden;line-height:0px"};return n?e.create("span",r,"&#xFEFF;"):e.create("span",r)},xc=function(e,t){var n,r,o,i=e.dom,a=e.getRng(),u=i.uniqueId(),s=e.isCollapsed(),c=e.getNode(),l=c.nodeName;return"IMG"===l?{name:l,index:fc(i,l,c)}:(n=mc(a.cloneRange()),s||(n.collapse(!1),r=yc(i,u+"_end",t),ac(i,n,r)),(a=mc(a)).collapse(!0),o=yc(i,u+"_start",t),ac(i,a,o),e.moveToBookmark({id:u,keep:1}),{id:u})},wc={getBookmark:function(e,t,n){return 2===t?pc(Tu,n,e):3===t?vc(e):t?bc(e):xc(e,!1)},getUndoBookmark:IO(pc=function(e,t,n){var r,o=n.getNode(),i=o?o.nodeName:null,a=n.getRng();return uc(o)||"IMG"===i?{name:i,index:fc(n.dom,i,o)}:(r=hc(a))?{name:i=r.tagName,index:fc(n.dom,i,r)}:lc(e,n,t,a)},MO,!0),getPersistentBookmark:xc},Cc="_mce_caret",Sc=function(e){return Pi.isElement(e)&&e.id===Cc},Nc=function(e,t){for(;t&&t!==e;){if(t.id===Cc)return t;t=t.parentNode}return null},Tc=Pi.isElement,Ec=Pi.isText,kc=function(e){var t=e.parentNode;t&&t.removeChild(e)},Rc=function(e){try{return e.nodeValue}catch(e){return""}},_c=function(e,t){0===t.length?kc(e):e.nodeValue=t},Ac=function(e){var t=Tu(e);return{count:e.length-t.length,text:t}},Dc=function(e,t){return Ic(e),t},Oc=function(e,t){var n=Ac(e.data.substr(0,t.offset())),r=Ac(e.data.substr(t.offset())),o=n.text+r.text;return 0<o.length?(_c(e,o),Us(e,t.offset()-n.count)):t},Pc=function(e,t){var n=t.container(),r=v(j(n.childNodes),e).map(function(e){return e<t.offset()?Us(n,t.offset()-1):t}).getOr(t);return Ic(e),r},Bc=function(e,t){return Ec(e)&&t.container()===e?Oc(e,t):Dc(e,t)},Mc=function(e,t){return t.container()===e.parentNode?Pc(e,t):Dc(e,t)},Lc={removeAndReposition:function(e,t){return Us.isTextPosition(t)?Bc(e,t):Mc(e,t)},remove:Ic=function(e){if(Tc(e)&&Au(e)&&(Du(e)?e.removeAttribute("data-mce-caret"):kc(e)),Ec(e)){var t=Tu(Rc(e));_c(e,t)}}},Fc=Tr.detect().browser,Hc=Pi.isContentEditableFalse,zc=function(e){return Pi.isElement(e)&&/^(TD|TH)$/i.test(e.tagName)},Wc=function(e,t,n){var r,o,i,a,u,s=is(t.getBoundingClientRect(),n);return i="BODY"===e.tagName?(r=e.ownerDocument.documentElement,o=e.scrollLeft||r.scrollLeft,e.scrollTop||r.scrollTop):(u=e.getBoundingClientRect(),o=e.scrollLeft-u.left,e.scrollTop-u.top),s.left+=o,s.right+=o,s.top+=i,s.bottom+=i,s.width=1,0<(a=t.offsetWidth-t.clientWidth)&&(n&&(a*=-1),s.left+=a,s.right+=a),s},Uc=function(e){var t,n,r,o,i;for(t=kn("*[contentEditable=false]",e),o=0;o<t.length;o++)r=(n=t[o]).previousSibling,Fu(r)&&(1===(i=r.data).length?r.parentNode.removeChild(r):r.deleteData(i.length-1,1)),r=n.nextSibling,Lu(r)&&(1===(i=r.data).length?r.parentNode.removeChild(r):r.deleteData(0,1))},jc=function(i,a,e){var t,u,s=Fa(y.none()),n=function(t,e){var n,r,o;return c(),zc(e)?null:(a(e)?(u=Iu("p",e,t),n=Wc(i,e,t),kn(u).css("top",n.top),o=kn('<div class="mce-visual-caret" data-mce-bogus="all"></div>').css(n).appendTo(i)[0],s.set(y.some({caret:o,element:e,before:t})),s.get().each(function(e){t&&kn(e.caret).addClass("mce-visual-caret-before")}),l(),(r=e.ownerDocument.createRange()).setStart(u,0),r.setEnd(u,0)):(u=Ou(e,t),r=e.ownerDocument.createRange(),Hc(u.nextSibling)?(r.setStart(u,0),r.setEnd(u,0)):(r.setStart(u,1),r.setEnd(u,1))),r)},c=function(){Uc(i),u&&(Lc.remove(u),u=null),s.get().each(function(e){kn(e.caret).remove(),s.set(y.none())}),clearInterval(t)},l=function(){t=Pe.setInterval(function(){e()?kn("div.mce-visual-caret",i).toggleClass("mce-visual-caret-hidden"):kn("div.mce-visual-caret",i).addClass("mce-visual-caret-hidden")},500)},r=function(){s.get().each(function(e){var t=Wc(i,e.element,e.before);kn(e.caret).css(t)})},o=function(){return Pe.clearInterval(t)},f=function(){return".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}"};return{show:n,hide:c,getCss:f,reposition:r,destroy:o}},Vc=function(){return Fc.isIE()||Fc.isEdge()||Fc.isFirefox()},qc=function(e){return Hc(e)||Pi.isTable(e)&&Vc()},$c=Pi.isContentEditableFalse,Yc=Pi.matchStyleValues("display","block table table-cell table-caption list-item"),Xc=Au,Kc=Ru,Gc=Pi.isElement,Jc=Gu,Qc=function(e){return 0<e},Zc=function(e){return e<0},el=function(e,t){for(var n;n=e(t);)if(!Kc(n))return n;return null},tl=function(e,t,n,r,o){var i=new JO(e,r);if(Zc(t)){if(($c(e)||Kc(e))&&n(e=el(i.prev,!0)))return e;for(;e=el(i.prev,o);)if(n(e))return e}if(Qc(t)){if(($c(e)||Kc(e))&&n(e=el(i.next,!0)))return e;for(;e=el(i.next,o);)if(n(e))return e}return null},nl=function(e,t){for(;e&&e!==t;){if(Yc(e))return e;e=e.parentNode}return null},rl=function(e,t,n){return nl(e.container(),n)===nl(t.container(),n)},ol=function(e,t){var n,r;return t?(n=t.container(),r=t.offset(),Gc(n)?n.childNodes[r+e]:null):null},al=function(e,t,n){return nl(t,e)===nl(n,e)},ul=function(e,t,n){var r,o;for(o=e?"previousSibling":"nextSibling";n&&n!==t;){if(r=n[o],Xc(r)&&(r=r[o]),$c(r)){if(al(t,r,n))return r;break}if(Jc(r))break;n=n.parentNode}return null},sl=IO(il=function(e,t){var n=t.ownerDocument.createRange();return e?(n.setStartBefore(t),n.setEndBefore(t)):(n.setStartAfter(t),n.setEndAfter(t)),n},!0),cl=IO(il,!1),ll=function(e,t,n){var r,o,i=IO(ul,!0,t),a=IO(ul,!1,t),u=n.startContainer,s=n.startOffset;if(Ru(u)){if(Gc(u)||(u=u.parentNode),"before"===(o=u.getAttribute("data-mce-caret"))&&(r=u.nextSibling,qc(r)))return sl(r);if("after"===o&&(r=u.previousSibling,qc(r)))return cl(r)}if(!n.collapsed)return n;if(Pi.isText(u)){if(Xc(u)){if(1===e){if(r=a(u))return sl(r);if(r=i(u))return cl(r)}if(-1===e){if(r=i(u))return cl(r);if(r=a(u))return sl(r)}return n}if(Fu(u)&&s>=u.data.length-1)return 1===e&&(r=a(u))?sl(r):n;if(Lu(u)&&s<=1)return-1===e&&(r=i(u))?cl(r):n;if(s===u.data.length)return(r=a(u))?sl(r):n;if(0===s)return(r=i(u))?cl(r):n}return n},fl=function(e,t){return y.from(ol(e?0:-1,t)).filter($c)},dl=function(e,t,n){var r=ll(e,t,n);return-1===e?rP.fromRangeStart(r):rP.fromRangeEnd(r)},ml=function(e){return y.from(e.getNode()).map(kr.fromDom)},gl=function(e){return y.from(e.getNode(!0)).map(kr.fromDom)},hl=function(e,t){for(;t=e(t);)if(t.isVisible())return t;return t},pl=function(e,t){var n=rl(e,t);return!(n||!Pi.isBr(e.getNode()))||n},(pO=vl||(vl={}))[pO.Backwards=-1]="Backwards",pO[pO.Forwards=1]="Forwards",bl=Pi.isContentEditableFalse,yl=Pi.isText,xl=Pi.isElement,wl=Pi.isBr,Cl=Gu,Sl=ts,Nl=ns,Tl=function(e,t){for(var n=[];e&&e!==t;)n.push(e),e=e.parentNode;return n},El=function(e,t){return e.hasChildNodes()&&t<e.childNodes.length?e.childNodes[t]:null},kl=function(e,t){if(Qc(e)){if(Cl(t.previousSibling)&&!yl(t.previousSibling))return Us.before(t);if(yl(t))return Us(t,0)}if(Zc(e)){if(Cl(t.nextSibling)&&!yl(t.nextSibling))return Us.after(t);if(yl(t))return Us(t,t.data.length)}return Zc(e)?wl(t)?Us.before(t):Us.after(t):Us.before(t)},Rl=function(e,t){var n=t.nextSibling;return n&&Cl(n)?yl(n)?Us(n,0):Us.before(n):_l(vl.Forwards,Us.after(t),e)},_l=function(e,t,n){var r,o,i,a,u,s,c;if(!xl(n)||!t)return null;if(t.isEqual(Us.after(n))&&n.lastChild){if(u=Us.after(n.lastChild),Zc(e)&&Cl(n.lastChild)&&xl(n.lastChild))return wl(n.lastChild)?Us.before(n.lastChild):u}else u=t;if(s=u.container(),c=u.offset(),yl(s)){if(Zc(e)&&0<c)return Us(s,--c);if(Qc(e)&&c<s.length)return Us(s,++c);r=s}else{if(Zc(e)&&0<c&&(o=El(s,c-1),Cl(o)))return!Sl(o)&&(i=tl(o,e,Nl,o))?yl(i)?Us(i,i.data.length):Us.after(i):yl(o)?Us(o,o.data.length):Us.before(o);if(Qc(e)&&c<s.childNodes.length&&(o=El(s,c),Cl(o)))return wl(o)?Rl(n,o):!Sl(o)&&(i=tl(o,e,Nl,o))?yl(i)?Us(i,0):Us.before(i):yl(o)?Us(o,0):Us.after(o);r=o||u.getNode()}return(Qc(e)&&u.isAtEnd()||Zc(e)&&u.isAtStart())&&(r=tl(r,e,BO(!0),n,!0),Nl(r,n))?kl(e,r):(o=tl(r,e,Nl,n),!(a=Yt.last(L(Tl(s,n),bl)))||o&&a.contains(o)?o?kl(e,o):null:u=Qc(e)?Us.after(a):Us.before(a))},Al=function(t){return{next:function(e){return _l(vl.Forwards,e,t)},prev:function(e){return _l(vl.Backwards,e,t)}}},Dl=function(e,t,n){var r=e?Us.before(n):Us.after(n);return Fl(e,t,r)},Ol=function(e){return Pi.isBr(e)?Us.before(e):Us.after(e)},Pl=function(e){return Us.isTextPosition(e)?0===e.offset():Gu(e.getNode())},Bl=function(e){if(Us.isTextPosition(e)){var t=e.container();return e.offset()===t.data.length}return Gu(e.getNode(!0))},Ml=function(e,t){return!Us.isTextPosition(e)&&!Us.isTextPosition(t)&&e.getNode()===t.getNode(!0)},Il=function(e){return!Us.isTextPosition(e)&&Pi.isBr(e.getNode())},Ll=function(e,t,n){return e?!Ml(t,n)&&!Il(t)&&Bl(t)&&Pl(n):!Ml(n,t)&&Pl(t)&&Bl(n)},Hl=function(t,n,r){return Fl(t,n,r).bind(function(e){return rl(r,e,n)&&Ll(t,r,e)?Fl(t,n,e):y.some(e)})},zl=function(t,n,e,r){return Hl(t,n,e).bind(function(e){return r(e)?zl(t,n,e,r):y.some(e)})},Wl=function(e,t){var n=e?t.firstChild:t.lastChild;return Pi.isText(n)?y.some(Us(n,e?0:n.data.length)):n?Gu(n)?y.some(e?Us.before(n):Ol(n)):Dl(e,t,n):y.none()},Ul=IO(Fl=function(e,t,n){var r=Al(t);return y.from(e?r.next(n):r.prev(n))},!0),jl=IO(Fl,!1),Vl={fromPosition:Fl,nextPosition:Ul,prevPosition:jl,navigate:Hl,navigateIgnore:zl,positionIn:Wl,firstPositionIn:IO(Wl,!0),lastPositionIn:IO(Wl,!1)},ql=function(e){return"string"==typeof e.start},$l=function(e){return e.hasOwnProperty("rng")},Yl=function(e){return e.hasOwnProperty("id")},Xl=function(e){return e.hasOwnProperty("name")},Kl=function(e){return un.isArray(e.start)},Gl=function(e,t){return!e.isBlock(t)||t.innerHTML||Oe.ie||(t.innerHTML='<br data-mce-bogus="1" />'),t},Jl=function(e,t){var n,r;return n=e.createRng(),r=nc(e.getRoot(),t.start),n.setStart(r.container(),r.offset()),r=nc(e.getRoot(),t.end),n.setEnd(r.container(),r.offset()),n},Ql=function(e,t){var n=e.ownerDocument.createTextNode(Nu);e.appendChild(n),t.setStart(n,0),t.setEnd(n,0)},Zl=function(e){return!1===e.hasChildNodes()},ef=function(e,t){return Vl.lastPositionIn(e).fold(function(){return!1},function(e){return t.setStart(e.container(),e.offset()),t.setEnd(e.container(),e.offset()),!0})},tf=function(e,t,n){return!(!Zl(t)||!Nc(e,t)||(Ql(t,n),0))},nf=function(e,t,n,r){var o,i,a,u,s=n[t?"start":"end"],c=e.getRoot();if(s){for(a=s[0],i=c,o=s.length-1;1<=o;o--){if(u=i.childNodes,tf(c,i,r))return!0;if(s[o]>u.length-1)return!!tf(c,i,r)||ef(i,r);i=u[s[o]]}3===i.nodeType&&(a=Math.min(s[0],i.nodeValue.length)),1===i.nodeType&&(a=Math.min(s[0],i.childNodes.length)),t?r.setStart(i,a):r.setEnd(i,a)}return!0},rf=function(e){return Pi.isText(e)&&0<e.data.length},of=function(e,t,n){var r,o,i,a,u,s,c=e.get(n.id+"_"+t),l=n.keep;if(c){if(r=c.parentNode,o="start"===t?l?c.hasChildNodes()?(r=c.firstChild,1):rf(c.nextSibling)?(r=c.nextSibling,0):rf(c.previousSibling)?(r=c.previousSibling,c.previousSibling.data.length):(r=c.parentNode,e.nodeIndex(c)+1):e.nodeIndex(c):l?c.hasChildNodes()?(r=c.firstChild,1):rf(c.previousSibling)?(r=c.previousSibling,c.previousSibling.data.length):(r=c.parentNode,e.nodeIndex(c)):e.nodeIndex(c),u=r,s=o,!l){for(a=c.previousSibling,i=c.nextSibling,un.each(un.grep(c.childNodes),function(e){Pi.isText(e)&&(e.nodeValue=e.nodeValue.replace(/\uFEFF/g,""))});c=e.get(n.id+"_"+t);)e.remove(c,!0);a&&i&&a.nodeType===i.nodeType&&Pi.isText(a)&&!Oe.opera&&(o=a.nodeValue.length,a.appendData(i.nodeValue),e.remove(i),u=a,s=o)}return y.some(Us(u,s))}return y.none()},af=function(e,t){return e.isSome()?e:t},uf=function(e,t){var n=e.createRng();return nf(e,!0,t,n)&&nf(e,!1,t,n)?y.some(n):y.none()},sf=function(r,e){var t=of(r,"start",e),n=of(r,"end",e);return bs([t,af(n,t)],function(e,t){var n=r.createRng();return n.setStart(Gl(r,e.container()),e.offset()),n.setEnd(Gl(r,t.container()),t.offset()),n})},cf=function(n,e){return y.from(n.select(e.name)[e.index]).map(function(e){var t=n.createRng();return t.selectNode(e),t})},lf=function(e,t){var n=e.dom;if(t){if(Kl(t))return uf(n,t);if(ql(t))return y.some(Jl(n,t));if(Yl(t))return sf(n,t);if(Xl(t))return cf(n,t);if($l(t))return y.some(t.rng)}return y.none()},ff=function(e,t,n){return wc.getBookmark(e,t,n)},df=function(t,e){lf(t,e).each(function(e){t.setRng(e)})},hf=function(e,t,n){var r,o,i,a=n.startOffset,u=n.startContainer;if((n.startContainer!==n.endContainer||!gf(n.startContainer.childNodes[n.startOffset]))&&1===u.nodeType)for(a<(i=u.childNodes).length?r=new JO(u=i[a],e.getParent(u,e.isBlock)):(r=new JO(u=i[i.length-1],e.getParent(u,e.isBlock))).next(!0),o=r.current();o;o=r.next())if(3===o.nodeType&&!pf(o))return n.setStart(o,0),void t.setRng(n)},bf=function(e,t,n){return vf(e,e.getStyle(t,n),n)},xf=mf=function(e){return Pi.isElement(e)&&"SPAN"===e.tagName&&"bookmark"===e.getAttribute("data-mce-type")},wf=(yf={isInlineBlock:gf=function(e){return e&&/^(IMG)$/.test(e.nodeName)},moveStart:hf,getNonWhiteSpaceSibling:function(e,t,n){if(e)for(t=t?"nextSibling":"previousSibling",e=n?e:e[t];e;e=e[t])if(1===e.nodeType||!pf(e))return e},isTextBlock:function(e,t){return t.nodeType&&(t=t.nodeName),!!e.schema.getTextBlockElements()[t.toLowerCase()]},isValid:function(e,t,n){return e.schema.isValidChild(t,n)},isWhiteSpaceNode:pf=function(e){return e&&3===e.nodeType&&/^([\t \r\n]+|)$/.test(e.nodeValue)},replaceVars:function(e,n){return"string"!=typeof e?e=e(n):n&&(e=e.replace(/%(\w+)/g,function(e,t){return n[t]||e})),e},isEq:function(e,t){return t=t||"",e=""+((e=e||"").nodeName||e),t=""+(t.nodeName||t),e.toLowerCase()===t.toLowerCase()},normalizeStyleValue:vf=function(e,t,n){return"color"!==n&&"backgroundColor"!==n||(t=e.toHex(t)),"fontWeight"===n&&700===t&&(t="bold"),"fontFamily"===n&&(t=t.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),""+t},getStyle:bf,getTextDecoration:function(t,e){var n;return t.getParent(e,function(e){return(n=t.getStyle(e,"text-decoration"))&&"none"!==n}),n},getParents:function(e,t,n){return e.getParents(t,n,e.getRoot())}}).getParents,Cf=yf.isWhiteSpaceNode,Sf=yf.isTextBlock,Nf=function(e,t){for(void 0===t&&(t=3===e.nodeType?e.length:e.childNodes.length);e&&e.hasChildNodes();)(e=e.childNodes[t])&&(t=3===e.nodeType?e.length:e.childNodes.length);return{node:e,offset:t}},Tf=function(e,t){var n=Nf(e,t);if(n.node){for(;n.node&&0===n.offset&&n.node.previousSibling;)n=Nf(n.node.previousSibling);n.node&&0<n.offset&&3===n.node.nodeType&&" "===n.node.nodeValue.charAt(n.offset-1)&&1<n.offset&&(e=n.node).splitText(n.offset-1)}return e},Ef=function(e){return"BR"===e.nodeName&&e.getAttribute("data-mce-bogus")&&!e.nextSibling},kf=function(e,t){for(var n=t;n;){if(1===n.nodeType&&e.getContentEditable(n))return"false"===e.getContentEditable(n)?n:t;n=n.parentNode}return t},Rf=function(e,t,n,r){var o,i,a=n.nodeValue;return void 0===r&&(r=e?a.length:0),e?(o=a.lastIndexOf(" ",r),-1!==(o=(i=a.lastIndexOf("",r))<o?o:i)&&!t&&(o<r||!e)&&o<=a.length&&o++):(o=a.indexOf(" ",r),i=a.indexOf("",r),o=-1!==o&&(-1===i||o<i)?o:i),o},_f=function(e,t,n,r,o,i){var a,u,s,c;if(3===n.nodeType){if(-1!==(s=Rf(o,i,n,r)))return{container:n,offset:s};c=n}for(a=new JO(n,e.getParent(n,e.isBlock)||t);u=a[o?"prev":"next"]();)if(3!==u.nodeType||xf(u.parentNode)){if(e.isBlock(u)||yf.isEq(u,"BR"))break}else if(-1!==(s=Rf(o,i,c=u)))return{container:u,offset:s};if(c)return{container:c,offset:r=o?0:c.length}},Af=function(e,t,n,r,o){var i,a,u,s;for(3===r.nodeType&&0===r.nodeValue.length&&r[o]&&(r=r[o]),i=wf(e,r),a=0;a<i.length;a++)for(u=0;u<t.length;u++)if(!("collapsed"in(s=t[u])&&s.collapsed!==n.collapsed)&&e.is(i[a],s.selector))return i[a];return r},Df=function(t,e,n,r){var o,i,a=t.dom,u=a.getRoot();if(e[0].wrapper||(o=a.getParent(n,e[0].block,u)),o||(i=a.getParent(n,"LI,TD,TH"),o=a.getParent(3===n.nodeType?n.parentNode:n,function(e){return e!==u&&Sf(t,e)},i)),o&&e[0].wrapper&&(o=wf(a,o,"ul,ol").reverse()[0]||o),!o)for(o=n;o[r]&&!a.isBlock(o[r])&&(o=o[r],!yf.isEq(o,"br")););return o||n},Of=function(e,t,n,r,o,i,a){var u,s,c,l,f;if(u=s=a?n:o,l=a?"previousSibling":"nextSibling",f=e.getRoot(),3===u.nodeType&&!Cf(u)&&(a?0<r:i<u.nodeValue.length))return u;for(;;){if(!t[0].block_expand&&e.isBlock(s))return s;for(c=s[l];c;c=c[l])if(!xf(c)&&!Cf(c)&&!Ef(c))return s;if(s===f||s.parentNode===f){u=s;break}s=s.parentNode}return u},Pf=function(e,t,n,r){var o,i=t.startContainer,a=t.startOffset,u=t.endContainer,s=t.endOffset,c=e.dom;return 1===i.nodeType&&i.hasChildNodes()&&3===(i=hs(i,a)).nodeType&&(a=0),1===u.nodeType&&u.hasChildNodes()&&3===(u=hs(u,t.collapsed?s:s-1)).nodeType&&(s=u.nodeValue.length),i=kf(c,i),u=kf(c,u),(xf(i.parentNode)||xf(i))&&(i=xf(i)?i:i.parentNode,3===(i=t.collapsed?i.previousSibling||i:i.nextSibling||i).nodeType&&(a=t.collapsed?i.length:0)),(xf(u.parentNode)||xf(u))&&(u=xf(u)?u:u.parentNode,3===(u=t.collapsed?u.nextSibling||u:u.previousSibling||u).nodeType&&(s=t.collapsed?0:u.length)),t.collapsed&&((o=_f(c,e.getBody(),i,a,!0,r))&&(i=o.container,a=o.offset),(o=_f(c,e.getBody(),u,s,!1,r))&&(u=o.container,s=o.offset)),n[0].inline&&(u=r?u:Tf(u,s)),(n[0].inline||n[0].block_expand)&&(n[0].inline&&3===i.nodeType&&0!==a||(i=Of(c,n,i,a,u,s,!0)),n[0].inline&&3===u.nodeType&&s!==u.nodeValue.length||(u=Of(c,n,i,a,u,s,!1))),n[0].selector&&!1!==n[0].expand&&!n[0].inline&&(i=Af(c,n,t,i,"previousSibling"),u=Af(c,n,t,u,"nextSibling")),(n[0].block||n[0].selector)&&(i=Df(e,n,i,"previousSibling"),u=Df(e,n,u,"nextSibling"),n[0].block&&(c.isBlock(i)||(i=Of(c,n,i,a,u,s,!0)),c.isBlock(u)||(u=Of(c,n,i,a,u,s,!1)))),1===i.nodeType&&(a=c.nodeIndex(i),i=i.parentNode),1===u.nodeType&&(s=c.nodeIndex(u)+1,u=u.parentNode),{startContainer:i,startOffset:a,endContainer:u,endOffset:s}},Bf=un.each,Mf=function(e,t){var n=e.childNodes;return--t>n.length-1?t=n.length-1:t<0&&(t=0),n[t]||e},If=function(e,t,o){var n,r,i,a,u,s,c,l,f,d,m=t.startContainer,g=t.startOffset,h=t.endContainer,p=t.endOffset,v=e.select("td[data-mce-selected],th[data-mce-selected]");if(0<v.length)Bf(v,function(e){o([e])});else{if(c=function(e){var t;return 3===(t=e[0]).nodeType&&t===m&&g>=t.nodeValue.length&&e.splice(0,1),t=e[e.length-1],0===p&&0<e.length&&t===h&&3===t.nodeType&&e.splice(e.length-1,1),e},l=function(e,t,n){for(var r=[];e&&e!==n;e=e[t])r.push(e);return r},f=function(e,t){do{if(e.parentNode===t)return e;e=e.parentNode}while(e)},d=function(e,t,n){var r=n?"nextSibling":"previousSibling";for(u=(a=e).parentNode;a&&a!==t;a=u)u=a.parentNode,(s=l(a===e?a:a[r],r)).length&&(n||s.reverse(),o(c(s)))},1===m.nodeType&&m.hasChildNodes()&&(m=m.childNodes[g]),1===h.nodeType&&h.hasChildNodes()&&(h=Mf(h,p)),m===h)return o(c([m]));for(n=e.findCommonAncestor(m,h),a=m;a;a=a.parentNode){if(a===h)return d(m,n,!0);if(a===n)break}for(a=h;a;a=a.parentNode){if(a===m)return d(h,n);if(a===n)break}r=f(m,n)||m,i=f(h,n)||h,d(m,r,!0),(s=l(r===m?r:r.nextSibling,"nextSibling",i===h?i.nextSibling:i)).length&&o(c(s)),d(h,i)}},Lf=function(){return"\ufeff"},vO=Mr,bO="text",yO=function(e){if(!vO(e))throw new Error("Can only get "+bO+" value of a "+bO+" node");return SO(e).getOr("")},xO=function(e){try{return wO(e)}catch(e){return y.none()}},wO=function(e){return vO(e)?y.from(e.dom().nodeValue):y.none()},CO=Tr.detect().browser,SO=CO.isIE()&&10===CO.version.major?xO:wO,Ff={get:yO,getOption:SO,set:function(e,t){if(!vO(e))throw new Error("Can only set raw "+bO+" value of a "+bO+" node");e.dom().nodeValue=t}},Hf=function(e){return Ff.get(e)},zf=function(e){return Mr(e)&&Hf(e)===Lf()},Wf=function(t,n,r,o){return Co(n).fold(function(){return"skipping"},function(e){return"br"===o||zf(n)?"valid":uu(n)?"existing":Sc(n)?"caret":yf.isValid(t,r,o)&&yf.isValid(t,Dr(e),r)?"valid":"invalid-child"})},Uf=function(e){return 3===e.startContainer.nodeType&&e.startContainer.nodeValue.length>=e.startOffset&&""===e.startContainer.nodeValue[e.startOffset]},jf=function(e,t){var n=Pf(e,t,[{inline:!0}],Uf(t));t.setStart(n.startContainer,n.startOffset),t.setEnd(n.endContainer,n.endOffset),e.selection.setRng(t)},Vf=function(e,t,n,r){var o,i,a,u,s,c=t.uid,l=void 0===c?gu("mce-annotation"):c,f=function(e,t){var n,r,o={};for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(r=0,n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&(o[n[r]]=e[n[r]]);return o}(t,["uid"]),d=kr.fromTag("span",e);return $a(d,ru()),$r(d,""+iu(),l),$r(d,""+ou(),n),a=void 0===(i=(o=r(l,f)).attributes)?{}:i,s=void 0===(u=o.classes)?[]:u,Yr(d,a),hu(d,s),d},qf=function(o,e,t,n,r){var i=[],a=Vf(o.getDoc(),r,t,n),u=Fa(y.none()),s=function(){u.set(y.none())},c=function(){return u.get().getOrThunk(function(){var e=vu(a);return i.push(e),u.set(y.some(e)),e})},l=function(e){I(e,f)},f=function(e){var t,n,r=Wf(o,e,"span",Dr(e));switch(r){case"invalid-child":s(),t=Ro(e),l(t),s();break;case"valid":n=c(),Aa(e,n)}},d=function(e){var t=Ae(e,kr.fromDom);l(t)};return If(o.dom,e,function(e){s(),d(e)}),i},$f=function(o,i,a,u){o.undoManager.transact(function(){var e,t,n,r=o.selection.getRng();r.collapsed&&jf(o,r),o.selection.getRng().collapsed?(e=Vf(o.getDoc(),u,i,a.decorate),wu(e,""),o.selection.getRng().insertNode(e.dom()),o.selection.select(e.dom())):(t=wc.getPersistentBookmark(o.selection,!1),n=o.selection.getRng(),qf(o,n,i,a.decorate,u),o.selection.moveToBookmark(t))})},Yf=function(e){return e.firstChild&&e.firstChild===e.lastChild},Xf=function(e){return"br"===e.name||""===e.value},Kf=function(e,t){return e.getBlockElements()[t.name]&&Yf(t)&&Xf(t.firstChild)},Gf=function(e,t){var n=e.getNonEmptyElements();return t&&(t.isEmpty(n)||Kf(e,t))},Jf=function(e){var t=e.firstChild,n=e.lastChild;return t&&"META"===t.nodeName&&t.parentNode.removeChild(t),n&&"mce_marker"===n.id&&n.parentNode.removeChild(n),e},Qf=function(e,t,n){var r=t.serialize(n),o=e.createFragment(r);return Jf(o)},ed=function(e){return""===e.data||Pi.isBr(e)},td=function(e){return e&&e.firstChild&&e.firstChild===e.lastChild&&ed(e.firstChild)},nd=function(e){return!e.firstChild||td(e)},od=function(e,t){var n=e.getParent(t,e.isBlock);return n&&"LI"===n.nodeName?n:null},id=function(e,t){var n=t.cloneRange(),r=t.cloneRange();return n.setStartBefore(e),r.setEndAfter(e),[n.cloneContents(),r.cloneContents()]},ad=function(e,t){var n=Us.before(e),r=Al(t),o=r.next(n);return o?o.toRange():null},ud=function(e,t){var n=Us.after(e),r=Al(t),o=r.prev(n);return o?o.toRange():null},sd=function(t,e,n,r){var o=id(t,r),i=t.parentNode;return i.insertBefore(o[0],t),un.each(e,function(e){i.insertBefore(e,t)}),i.insertBefore(o[1],t),i.removeChild(t),ud(e[e.length-1],n)},cd=function(t,e,n){var r=t.parentNode;return un.each(e,function(e){r.insertBefore(e,t)}),ad(t,n)},ld=function(e,t,n,r){return r.insertAfter(t.reverse(),e),ud(t[0],n)},fd=function(e,t){var n=t.firstChild,r=t.lastChild;return n&&"meta"===n.name&&(n=n.next),r&&"mce_marker"===r.attr("id")&&(r=r.prev),Gf(e,r)&&(r=r.prev),!(!n||n!==r||"ul"!==n.name&&"ol"!==n.name)},dd=function(e,o,i,t){var n=Qf(o,e,t),a=od(o,i.startContainer),r=rd(Zf(n.firstChild)),u=1,s=2,c=o.getRoot(),l=function(e){var t=Us.fromRangeStart(i),n=Al(o.getRoot()),r=e===u?n.prev(t):n.next(t);return!r||od(o,r.getNode())!==a};return l(u)?cd(a,r,c):l(s)?ld(a,r,c,o):sd(a,r,c,i)},md=function(e,t){return!!od(e,t)},rd=function(e){return 0<e.length&&nd(e[e.length-1])?e.slice(0,-1):e},Zf=function(e){return un.grep(e.childNodes,function(e){return"LI"===e.nodeName})},gd=un.each,hd=function(o){this.compare=function(e,t){var n,r;return!(e.nodeName!==t.nodeName||!(r=function(e,t){var n,r;for(r in e)if(e.hasOwnProperty(r)){if(void 0===(n=t[r]))return!1;if(e[r]!==n)return!1;delete t[r]}for(r in t)if(t.hasOwnProperty(r))return!1;return!0})((n=function(n){var r={};return gd(o.getAttribs(n),function(e){var t=e.nodeName.toLowerCase();0!==t.indexOf("_")&&"style"!==t&&0!==t.indexOf("data-")&&(r[t]=o.getAttrib(n,t))}),r})(e),n(t))||!r(o.parseStyle(o.getAttrib(e,"style")),o.parseStyle(o.getAttrib(t,"style")))||mf(e)||mf(t))}},pd=function(e){for(var t=[],n=e.dom();n;)t.push(kr.fromDom(n)),n=n.lastChild;return t},vd=function(e){var t=Ja(e,"br"),n=L(pd(e).slice(-1),ui);t.length===n.length&&I(n,Ba)},bd=function(e){Pa(e),_a(e,kr.fromHtml('<br data-mce-bogus="1">'))},yd=function(n){Do(n).each(function(t){No(t).each(function(e){ii(n)&&ui(t)&&ii(e)&&Ba(t)})})},xd=un.makeMap,wd=function(e,t,n,r){var o=_e.document.createRange();return o.setStart(e,t),o.setEnd(n,r),o},Cd=function(t){var n=Us.fromRangeStart(t),r=Us.fromRangeEnd(t),o=t.commonAncestorContainer;return Vl.fromPosition(!1,o,r).map(function(e){return!rl(n,r,o)&&rl(n,e,o)?wd(n.container(),n.offset(),e.container(),e.offset()):t}).getOr(t)},Sd=function(e){return e.collapsed?e:Cd(e)},Nd=function(e,t){return Pi.isText(e)&&""===e.nodeValue[t-1]},Td=function(e,t){var n=e.startContainer,r=e.startOffset,o=function(e){return n[e]&&3===n[e].nodeType};return 3===n.nodeType&&(0<r?t=t.replace(/^&nbsp;/," "):o("previousSibling")||(t=t.replace(/^ /,"&nbsp;")),r<n.length?t=t.replace(/&nbsp;(<br>|)$/," "):o("nextSibling")||(t=t.replace(/(&nbsp;| )(<br>|)$/,"&nbsp;"))),t},Ed=function(e,t){var n,r;return n=e.startContainer,r=e.startOffset,3===n.nodeType&&e.collapsed&&(""===n.data[r]?(n.deleteData(r,1),/[\u00a0| ]$/.test(t)||(t+=" ")):""===n.data[r-1]&&(n.deleteData(r-1,1),/[\u00a0| ]$/.test(t)||(t=" "+t))),t},kd=Pi.matchNodeNames("td th"),Rd=function(e,t){var n=e.selection.getRng(),r=n.startContainer,o=n.startOffset;n.collapsed&&Nd(r,o)&&Pi.isText(r)&&(r.insertData(o-1," "),r.deleteData(o,1),n.setStart(r,o),n.setEnd(r,o),e.selection.setRng(n)),e.selection.setContent(t)},_d=function(e,t,n){var r,o;"all"===n.getAttribute("data-mce-bogus")?n.parentNode.insertBefore(e.dom.createFragment(t),n):(r=n.firstChild,o=n.lastChild,!r||r===o&&"BR"===r.nodeName?e.dom.setHTML(n,t):Rd(e,t))},Ad=function(e,t){y.from(e.getParent(t,"td,th")).map(kr.fromDom).each(yd)},Dd=function(e,t){var n,r,o=e.schema.getTextInlineElements(),i=e.dom;t&&(n=e.getBody(),r=new hd(i),un.each(i.select("*[data-mce-fragment]"),function(e){for(var t=e.parentNode;t&&t!==n;t=t.parentNode)o[e.nodeName.toLowerCase()]&&r.compare(t,e)&&i.remove(e,!0)}))},Od=function(e){for(var t=e;t=t.walk();)1===t.type&&t.attr("data-mce-fragment","1")},Pd=function(e){un.each(e.getElementsByTagName("*"),function(e){e.removeAttribute("data-mce-fragment")})},Bd=function(e){return!!e.getAttribute("data-mce-fragment")},Md=function(e,t){return t&&!e.schema.getShortEndedElements()[t.nodeName]},Id=function(r,e){var t,n,o,i,a,u,s,c=r.dom,l=r.selection,f=function(e){for(var t=r.getBody();e&&e!==t;e=e.parentNode)if("false"===r.dom.getContentEditable(e))return e;return null};if(e){if(r.selection.scrollIntoView(e),t=f(e))return c.remove(e),void l.select(t);u=c.createRng(),(i=e.previousSibling)&&3===i.nodeType?(u.setStart(i,i.nodeValue.length),Oe.ie||(a=e.nextSibling)&&3===a.nodeType&&(i.appendData(a.data),a.parentNode.removeChild(a))):(u.setStartBefore(e),u.setEndBefore(e)),s=function(e){var t=Us.fromRangeStart(e),n=Al(r.getBody());if(t=n.next(t))return t.toRange()},n=c.getParent(e,c.isBlock),c.remove(e),n&&c.isEmpty(n)&&(r.$(n).empty(),u.setStart(n,0),u.setEnd(n,0),kd(n)||Bd(n)||!(o=s(u))?c.add(n,c.create("br",{"data-mce-bogus":"1"})):(u=o,c.remove(n))),l.setRng(u)}},Ld=function(e,t,n){var r,o,i,a,u,s,c,l,f,d,m,g,h,p=e.selection,v=e.dom;if(/^ | $/.test(t)&&(t=Td(p.getRng(),t)),r=e.parser,m=n.merge,o=aP({validate:e.settings.validate},e.schema),d='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;&#x200B;</span>',s={content:t,format:"html",selection:!0,paste:n.paste},(s=e.fire("BeforeSetContent",s)).isDefaultPrevented())e.fire("SetContent",{content:s.content,format:"html",selection:!0,paste:n.paste});else{if(-1===(t=s.content).indexOf("{$caret}")&&(t+="{$caret}"),t=t.replace(/\{\$caret\}/,d),((l=p.getRng()).startContainer||(l.parentElement?l.parentElement():null))===(g=e.getBody())&&p.isCollapsed()&&v.isBlock(g.firstChild)&&Md(e,g.firstChild)&&v.isEmpty(g.firstChild)&&((l=v.createRng()).setStart(g.firstChild,0),l.setEnd(g.firstChild,0),p.setRng(l)),p.isCollapsed()||(e.selection.setRng(Sd(e.selection.getRng())),e.getDoc().execCommand("Delete",!1,null),t=Ed(e.selection.getRng(),t)),h={context:(i=p.getNode()).nodeName.toLowerCase(),data:n.data,insert:!0},u=r.parse(t,h),!0===n.paste&&fd(e.schema,u)&&md(v,i))return l=dd(o,v,e.selection.getRng(),u),e.selection.setRng(l),void e.fire("SetContent",s);if(Od(u),"mce_marker"===(f=u.lastChild).attr("id"))for(f=(c=f).prev;f;f=f.walk(!0))if(3===f.type||!v.isBlock(f.name)){e.schema.isValidChild(f.parent.name,"span")&&f.parent.insert(c,f,"br"===f.name);break}if(e._selectionOverrides.showBlockCaretContainer(i),h.invalid){for(Rd(e,d),i=p.getNode(),a=e.getBody(),9===i.nodeType?i=f=a:f=i;f!==a;)f=(i=f).parentNode;t=i===a?a.innerHTML:v.getOuterHTML(i),t=o.serialize(r.parse(t.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return o.serialize(u)}))),i===a?v.setHTML(a,t):v.setOuterHTML(i,t)}else t=o.serialize(u),_d(e,t,i);Dd(e,m),Id(e,v.get("mce_marker")),Pd(e.getBody()),Ad(e.dom,e.selection.getStart()),e.fire("SetContent",s),e.addVisual()}},Fd=function(e){var t;return"string"!=typeof e?(t=un.extend({paste:e.paste,data:{paste:e.paste}},e),{content:e.content,details:t}):{content:e,details:{}}},Hd=function(e,t){var n=Fd(t);Ld(e,n.content,n.details)},zd=no("sections","settings"),Wd=Tr.detect(),Ud=Wd.deviceType.isTouch(),jd=["lists","autolink","autosave"],Vd={theme:"mobile"},qd=function(e){var t=h(e)?e.join(" "):e,n=Ae(P(t)?t.split(" "):[],hr);return L(n,function(e){return 0<e.length})},$d=function(e){return L(e,IO(b,jd))},Yd=function(n,e){var t=Wr(e,function(e,t){return b(n,t)});return zd(t.t,t.f)},Xd=function(e,t,n){var r=e.sections(),o=r.hasOwnProperty(t)?r[t]:{};return un.extend({},n,o)},Kd=function(e,t){return e.sections().hasOwnProperty(t)},Gd=function(e,t,n){return{id:e,theme:"modern",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:t,add_form_submit_trigger:!0,submit_patch:!0,add_unload_trigger:!0,convert_urls:!0,relative_urls:!0,remove_script_host:!0,object_resizing:!0,doctype:"<!DOCTYPE html>",visual:!0,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",forced_root_block:"p",hidden_input:!0,render_ui:!0,indentation:"40px",inline_styles:!0,convert_fonts_to_spans:!0,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",entity_encoding:"named",url_converter:n.convertURL,url_converter_scope:n,ie7_compat:!0}},Jd=function(e,t){var n=t.external_plugins?t.external_plugins:{};return e&&e.external_plugins?un.extend({},e.external_plugins,n):n},Qd=function(e,t){return[].concat(qd(e)).concat(qd(t))},Zd=function(e,t,n,r){var o=qd(n.forced_plugins),i=qd(r.plugins),a=e&&Kd(t,"mobile")?$d(i):i,u=Qd(o,a);return un.extend(r,{plugins:u.join(" ")})},em=function(e,t){var n=t.settings().inline;return e&&Kd(t,"mobile")&&!n},tm=function(e,t,n,r){var o=Yd(["mobile"],r),i=un.extend(t,n,o.settings(),em(e,o)?Xd(o,"mobile",Vd):{},{validate:!0,content_editable:o.settings().inline,external_plugins:Jd(n,o.settings())});return Zd(e,o,n,i)},nm=function(e,t,n,r,o){var i=Gd(t,n,e);return tm(Ud,i,r,o)},om=IO(rm=function(e,t,n){return y.from(t.settings[n]).filter(e)},P),im=function(e){var n={};return"string"==typeof e?I(0<e.indexOf("=")?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(","),function(e){var t=e.split("=");1<t.length?n[un.trim(t[0])]=un.trim(t[1]):n[un.trim(t[0])]=un.trim(t)}):n=e,n},am=function(t){return function(e){return h(e)&&H(e,t)}},um=function(e,t,n,r){var o=t in e.settings?e.settings[t]:n;return"hash"===r?im(o):"string"===r?rm(P,e,t).getOr(n):"number"===r?rm(p,e,t).getOr(n):"boolean"===r?rm(i,e,t).getOr(n):"object"===r?rm(B,e,t).getOr(n):"array"===r?rm(h,e,t).getOr(n):"string[]"===r?rm(am(P),e,t).getOr(n):"function"===r?rm(M,e,t).getOr(n):o},sm=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,cm=function(e){return sm.test(e)},lm=function(e,t){var n=om(e,"inline_boundaries_selector").getOr("a[href],code");return co(kr.fromDom(t),n)},fm=function(e){return"rtl"===ya.DOM.getStyle(e,"direction",!0)||cm(e.textContent)},dm=function(e,t,n){return L(ya.DOM.getParents(n.container(),"*",t),e)},mm=function(e,t,n){var r=dm(e,t,n);return y.from(r[r.length-1])},gm=function(e,t,n){var r=nl(t,e),o=nl(n,e);return r&&r===o},hm=function(e){return Pu(e)||Bu(e)},vm=IO(pm=function(e,t){if(!t)return t;var n=t.container(),r=t.offset();return e?_u(n)?Pi.isText(n.nextSibling)?Us(n.nextSibling,0):Us.after(n):Pu(t)?Us(n,r+1):t:_u(n)?Pi.isText(n.previousSibling)?Us(n.previousSibling,n.previousSibling.data.length):Us.before(n):Bu(t)?Us(n,r-1):t},!0),bm=IO(pm,!1),ym={isInlineTarget:lm,findRootInline:mm,isRtl:fm,isAtZwsp:hm,normalizePosition:pm,normalizeForwards:vm,normalizeBackwards:bm,hasSameParentBlock:gm},xm=function(t){return function(e){return go(t,kr.fromDom(e.dom().parentNode))}},wm=function(e){var t=e.getBody(),n=t.firstChild&&e.dom.isBlock(t.firstChild)?t.firstChild:t;e.selection.setCursorLocation(n,0)},Cm=function(e,t){return bo(e,t)?Za(t,function(e){return si(e)||li(e)},xm(e)):y.none()},Sm=function(e){e.dom.isEmpty(e.getBody())&&(e.setContent(""),wm(e))},Nm=function(i,a,u){return bs([Vl.firstPositionIn(u),Vl.lastPositionIn(u)],function(e,t){var n=ym.normalizePosition(!0,e),r=ym.normalizePosition(!1,t),o=ym.normalizePosition(!1,a);return i?Vl.nextPosition(u,o).map(function(e){return e.isEqual(r)&&a.isEqual(n)}).getOr(!1):Vl.prevPosition(u,o).map(function(e){return e.isEqual(n)&&a.isEqual(r)}).getOr(!1)}).getOr(!0)},Tm=function(e,t,n){return eu(e,t,n).isSome()},Em=function(e,t){var n=kr.fromDom(e),r=kr.fromDom(t);return Tm(r,"pre,code",IO(go,n))},km=function(e,t){return Pi.isText(t)&&/^[ \t\r\n]*$/.test(t.data)&&!1===Em(e,t)},Rm=function(e){return Pi.isElement(e)&&"A"===e.nodeName&&e.hasAttribute("name")},_m=function(e,t){return Gu(t)&&!1===km(e,t)||Rm(t)||Am(t)},Am=Pi.hasAttribute("data-mce-bookmark"),Dm=Pi.hasAttribute("data-mce-bogus"),Om=Pi.hasAttributeValue("data-mce-bogus","all"),Pm=function(e){var t,n,r=0;if(_m(e,e))return!1;if(!(n=e.firstChild))return!0;t=new JO(n,e);do{if(Om(n))n=t.next(!0);else if(Dm(n))n=t.next();else if(Pi.isBr(n))r++,n=t.next();else{if(_m(e,n))return!1;n=t.next()}}while(n);return r<=1},Bm=function(e){return Pm(e.dom())},Mm=no("block","position"),Im=no("from","to"),Lm=function(e,t){var n=kr.fromDom(e),r=kr.fromDom(t.container());return Cm(n,r).map(function(e){return Mm(e,t)})},Fm=function(e){return!1===go(e.from().block(),e.to().block())},Hm=function(e){return Co(e.from().block()).bind(function(t){return Co(e.to().block()).filter(function(e){return go(t,e)})}).isSome()},zm=function(e){return!1===Pi.isContentEditableFalse(e.from().block())&&!1===Pi.isContentEditableFalse(e.to().block())},Wm=function(t,n,r){return Pi.isBr(r.position().getNode())&&!1===Bm(r.block())?Vl.positionIn(!1,r.block().dom()).bind(function(e){return e.isEqual(r.position())?Vl.fromPosition(n,t,e).bind(function(e){return Lm(t,e)}):y.some(r)}).getOr(r):r},Um=function(t,n,e){var r=Lm(t,Us.fromRangeStart(e)),o=r.bind(function(e){return Vl.fromPosition(n,t,e.position()).bind(function(e){return Lm(t,e).map(function(e){return Wm(t,n,e)})})});return bs([r,o],Im).filter(function(e){return Fm(e)&&Hm(e)&&zm(e)})},jm=function(e,t,n){return n.collapsed?Um(e,t,n):y.none()},Vm=function(e){return e.slice(0,-1)},$m=function(e,t){return qm(e,t,BO(!1))},Ym=function(e,t){return[e].concat($m(e,t))},qm=function(e,t,n){return bo(t,e)?Vm(So(e,function(e){return n(e)||go(e,t)})):[]},Xm=$m,Km=Ym,Gm=function(e){var t=Ro(e);return N(t,ii).fold(function(){return t},function(e){return t.slice(0,e)})},Jm=function(e){var t=Gm(e);return I(t,Ba),t},Qm=function(e,t){var n=Km(t,e);return S(n.reverse(),Bm).each(Ba)},Zm=function(e){return 0===L(Eo(e),function(e){return!Bm(e)}).length},eg=function(e,t,n,r){if(Bm(n))return bd(n),Vl.firstPositionIn(n.dom());Zm(r)&&Bm(t)&&Ea(r,kr.fromTag("br"));var o=Vl.prevPosition(n.dom(),Us.before(r.dom()));return I(Jm(t),function(e){Ea(r,e)}),Qm(e,t),o},tg=function(e,t,n){if(Bm(n))return Ba(n),Bm(t)&&bd(t),Vl.firstPositionIn(t.dom());var r=Vl.lastPositionIn(n.dom());return I(Jm(t),function(e){_a(n,e)}),Qm(e,t),r},ng=function(e,t){var n=Km(t,e);return y.from(n[n.length-1])},rg=function(e,t){return bo(t,e)?ng(t,e):y.none()},og=function(e,t){Vl.positionIn(e,t.dom()).map(function(e){return e.getNode()}).map(kr.fromDom).filter(ui).each(Ba)},ig=function(e,t,n){return og(!0,t),og(!1,n),rg(t,n).fold(IO(tg,e,t,n),IO(eg,e,t,n))},ag=function(e,t,n,r){return t?ig(e,r,n):ig(e,n,r)},ug=function(t,n){var r=kr.fromDom(t.getBody()),e=jm(r.dom(),n,t.selection.getRng()).bind(function(e){return ag(r,n,e.from().block(),e.to().block())});return e.each(function(e){t.selection.setRng(e.toRange())}),e.isSome()},sg=function(n,r){var o=r.getRng();return bs([Cm(n,kr.fromDom(o.startContainer)),Cm(n,kr.fromDom(o.endContainer))],function(e,t){return!1===go(e,t)&&(o.deleteContents(),ag(n,!0,e,t).each(function(e){r.setRng(e.toRange())}),!0)}).getOr(!1)},cg=function(e,t){var n=kr.fromDom(t),r=IO(go,e);return Qa(n,mi,r).isSome()},lg=function(e,t){return cg(e,t.startContainer)||cg(e,t.endContainer)},fg=function(e,t){var n=Vl.prevPosition(e.dom(),Us.fromRangeStart(t)).isNone(),r=Vl.nextPosition(e.dom(),Us.fromRangeEnd(t)).isNone();return!lg(e,t)&&n&&r},dg=function(e){return e.setContent(""),e.selection.setCursorLocation(),!0},mg=function(e){var t=kr.fromDom(e.getBody()),n=e.selection.getRng();return fg(t,n)?dg(e):sg(t,e.selection)},gg=function(e,t){return!e.selection.isCollapsed()&&mg(e)},hg=function(a){var u,n;if(!h(a))throw new Error("cases must be an array");if(0===a.length)throw new Error("there must be at least one case");return u=[],n={},I(a,function(e,r){var o,i,t=Ir(e);if(1!==t.length)throw new Error("one and only one name per case");if(o=t[0],i=e[o],void 0!==n[o])throw new Error("duplicate key detected:"+o);if("cata"===o)throw new Error("cannot have a case named cata (sorry)");if(!h(i))throw new Error("case arguments must be an array");u.push(o),n[o]=function(){var n,e,t=arguments.length;if(t!==i.length)throw new Error("Wrong number of arguments to case "+o+". Expected "+i.length+" ("+i+"), got "+t);for(n=new Array(t),e=0;e<n.length;e++)n[e]=arguments[e];return{fold:function(){if(arguments.length!==a.length)throw new Error("Wrong number of arguments to fold. Expected "+a.length+", got "+arguments.length);return arguments[r].apply(null,n)},match:function(e){var t=Ir(e);if(u.length!==t.length)throw new Error("Wrong number of arguments to match. Expected: "+u.join(",")+"\nActual: "+t.join(","));if(!H(u,function(e){return b(t,e)}))throw new Error("Not all branches were specified when using match. Specified: "+t.join(", ")+"\nRequired: "+u.join(", "));return e[o].apply(null,n)},log:function(e){_e.console.log(e,{constructors:u,constructor:o,params:n})}}}}),n},bg=function(e,t){return ml(t).exists(ui)||vg(!0,e,t).isSome()},yg=function(e,t){return gl(t).exists(ui)||vg(!1,e,t).isSome()},xg=IO(vg=function(e,t,n){var r=L(Km(kr.fromDom(n.container()),t),ii),o=W(r).getOr(t);return Vl.fromPosition(e,o.dom(),n).filter(pg)},!(pg=function(e){return ml(e).exists(ui)})),wg=IO(vg,!0),AO="",Cg=function(e){return AO===e},Ng=function(e){return!Sg(e)&&!Cg(e)},Eg=IO(Tg=function(n,r,o){return y.from(o.container()).filter(Pi.isText).exists(function(e){var t=n?0:-1;return r(e.data.charAt(o.offset()+t))})},!0,Sg=function(e){return/^[\r\n\t ]$/.test(e)}),kg=IO(Tg,!1,Sg),Rg=function(e){var t=e.container();return Pi.isText(t)&&0===t.data.length},Ag=IO(_g=function(e,t){var n=ol(e,t);return Pi.isContentEditableFalse(n)&&!Pi.isBogusAll(n)},0),Dg=IO(_g,-1),Pg=IO(Og=function(e,t){return Pi.isTable(ol(e,t))},0),Bg=IO(Og,-1),Mg=function(e){return mi(kr.fromDom(e))||li(kr.fromDom(e))},Ig=hg([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),Lg=function(e,t){var n=t.getNode(!1===e),r=e?"after":"before";return Pi.isElement(n)&&n.getAttribute("data-mce-caret")===r},Fg=function(t,e,n,r){var o=function(e){return ai(kr.fromDom(e))&&!rl(n,r,t)};return fl(!e,n).fold(function(){return fl(e,r).fold(BO(!1),o)},o)},Hg=function(e,t,n,r){var o=r.getNode(!1===t);return Cm(kr.fromDom(e),kr.fromDom(n.getNode())).map(function(e){return Bm(e)?Ig.remove(e.dom()):Ig.moveToElement(o)}).orThunk(function(){return y.some(Ig.moveToElement(o))})},zg=function(t,n,r){return Vl.fromPosition(n,t,r).bind(function(e){return Mg(e.getNode())?y.none():Fg(t,n,r,e)?y.none():n&&Pi.isContentEditableFalse(e.getNode())?Hg(t,n,r,e):!1===n&&Pi.isContentEditableFalse(e.getNode(!0))?Hg(t,n,r,e):n&&Dg(r)?y.some(Ig.moveToPosition(e)):!1===n&&Ag(r)?y.some(Ig.moveToPosition(e)):y.none()})},Wg=function(e,t){return e&&Pi.isContentEditableFalse(t.nextSibling)?y.some(Ig.moveToElement(t.nextSibling)):!1===e&&Pi.isContentEditableFalse(t.previousSibling)?y.some(Ig.moveToElement(t.previousSibling)):y.none()},Ug=function(t,n,e){return e.fold(function(e){return y.some(Ig.remove(e))},function(e){return y.some(Ig.moveToElement(e))},function(e){return rl(n,e,t)?y.none():y.some(Ig.moveToPosition(e))})},jg=function(t,e,n){return Lg(e,n)?Wg(e,n.getNode(!1===e)).fold(function(){return zg(t,e,n)},y.some):zg(t,e,n).bind(function(e){return Ug(t,n,e)})},Vg=function(e,t,n){var r=ll(t?1:-1,e,n),o=Us.fromRangeStart(r),i=kr.fromDom(e);return!1===t&&Dg(o)?y.some(Ig.remove(o.getNode(!0))):t&&Ag(o)?y.some(Ig.remove(o.getNode())):!1===t&&Ag(o)&&yg(i,o)?xg(i,o).map(function(e){return Ig.remove(e.getNode())}):t&&Dg(o)&&bg(i,o)?wg(i,o).map(function(e){return Ig.remove(e.getNode())}):jg(e,t,o)},qg=function(e){return-1!==" \f\n\r\t\v".indexOf(e)},$g=function(n,r,o){return F(n.split(""),function(e,t){return qg(t)||""===t?e.previousCharIsSpace||""===e.str&&r||e.str.length===n.length-1&&o?{previousCharIsSpace:!1,str:e.str+""}:{previousCharIsSpace:!0,str:e.str+" "}:{previousCharIsSpace:!1,str:e.str+t}},{previousCharIsSpace:!1,str:""}).str},Yg=function(e,t,n){var r,o,i;0!==n&&(r=e.data.slice(t,t+n),o=t+n>=e.data.length,i=0===t,e.replaceData(t,n,$g(r,i,o)))},Xg=function(e,t){var n=e.data.slice(t),r=n.length-pr(n).length;return Yg(e,t,r)},Kg=function(e,t){var n=e.data.slice(0,t),r=n.length-vr(n).length;return Yg(e,t-r,r)},Gg=function(e,t,n){var r=vr(e.data).length;return e.appendData(t.data),Ba(kr.fromDom(t)),n&&Xg(e,r),e},Jg=function(e,t){var n=e.container(),r=e.offset();return!1===Us.isTextPosition(e)&&n===t.parentNode&&r>Us.before(t).offset()},Qg=function(e,t){return Jg(t,e)?Us(t.container(),t.offset()-1):t},Zg=function(e){return Pi.isText(e)?Us(e,0):Us.before(e)},eh=function(e){return Pi.isText(e)?Us(e,e.data.length):Us.after(e)},th=function(e){return Gu(e.previousSibling)?y.some(eh(e.previousSibling)):e.previousSibling?Vl.lastPositionIn(e.previousSibling):y.none()},nh=function(e){return Gu(e.nextSibling)?y.some(Zg(e.nextSibling)):e.nextSibling?Vl.firstPositionIn(e.nextSibling):y.none()},rh=function(e,t){var n=Us.before(t.previousSibling?t.previousSibling:t.parentNode);return Vl.prevPosition(e,n).fold(function(){return Vl.nextPosition(e,Us.after(t))},y.some)},oh=function(e,t){return Vl.nextPosition(e,Us.after(t)).fold(function(){return Vl.prevPosition(e,Us.before(t))},y.some)},ih=function(e,t){return th(t).orThunk(function(){return nh(t)}).orThunk(function(){return rh(e,t)})},ah=function(e,t){return nh(t).orThunk(function(){return th(t)}).orThunk(function(){return oh(e,t)})},uh=function(e,t,n){return e?ah(t,n):ih(t,n)},sh=function(e,t,n){return uh(e,t,n).map(IO(Qg,n))},ch=function(t,n,e){e.fold(function(){t.focus()},function(e){t.selection.setRng(e.toRange(),n)})},lh=function(t){return function(e){return e.dom()===t}},fh=function(e,t){return t&&e.schema.getBlockElements().hasOwnProperty(Dr(t))},dh=function(e){if(Bm(e)){var t=kr.fromHtml('<br data-mce-bogus="1">');return Pa(e),_a(e,t),y.some(Us.before(t.dom()))}return y.none()},mh=function(e,t,a){var n=No(e).filter(function(e){return Pi.isText(e.dom())}),r=To(e).filter(function(e){return Pi.isText(e.dom())});return Ba(e),bs([n,r,t],function(e,t,n){var r=e.dom(),o=t.dom(),i=r.data.length;return Gg(r,o,a),n.container()===o?Us(r,i):n}).orThunk(function(){return a&&(n.each(function(e){return Kg(e.dom(),e.dom().length)}),r.each(function(e){return Xg(e.dom(),0)})),t})},gh=function(e,t){return Ur(e.schema.getTextInlineElements(),Dr(t))},hh=function(t,n,e,r){var o,i,a;void 0===r&&(r=!0),o=sh(n,t.getBody(),e.dom()),i=Qa(e,IO(fh,t),lh(t.getBody())),a=mh(e,o,gh(t,e)),t.dom.isEmpty(t.getBody())?(t.setContent(""),t.selection.setCursorLocation()):i.bind(dh).fold(function(){r&&ch(t,n,a)},function(e){r&&ch(t,n,y.some(e))})},ph=function(t,n){return function(e){return t._selectionOverrides.hideFakeCaret(),hh(t,n,kr.fromDom(e)),!0}},vh=function(n,r){return function(e){var t=r?Us.before(e):Us.after(e);return n.selection.setRng(t.toRange()),!0}},bh=function(t){return function(e){return t.selection.setRng(e.toRange()),!0}},yh=function(t,n){return Vg(t.getBody(),n,t.selection.getRng()).map(function(e){return e.fold(ph(t,n),vh(t,n),bh(t))}).getOr(!1)},xh=function(e){I(Ja(e,".mce-offscreen-selection"),Ba)},wh=function(e,t){var n=e.selection.getNode();return!!Pi.isContentEditableFalse(n)&&(xh(kr.fromDom(e.getBody())),hh(e,t,kr.fromDom(e.selection.getNode())),Sm(e),!0)},Ch=function(e,t){for(;t&&t!==e;){if(Pi.isContentEditableTrue(t)||Pi.isContentEditableFalse(t))return t;t=t.parentNode}return null},Sh=function(e,t){return e.selection.isCollapsed()?yh(e,t):wh(e,t)},Nh=function(e){var t,n=Ch(e.getBody(),e.selection.getNode());return Pi.isContentEditableTrue(n)&&e.dom.isBlock(n)&&e.dom.isEmpty(n)&&(t=e.dom.create("br",{"data-mce-bogus":"1"}),e.dom.setHTML(n,""),n.appendChild(t),e.selection.setRng(Us.before(t).toRange())),!0},Th=Pi.isText,Eh=function(e){return Th(e)&&e.data[0]===Nu},kh=function(e){return Th(e)&&e.data[e.data.length-1]===Nu},Rh=function(e){return e.ownerDocument.createTextNode(Nu)},_h=function(e){if(Th(e.previousSibling))return kh(e.previousSibling)||e.previousSibling.appendData(Nu),e.previousSibling;if(Th(e))return Eh(e)||e.insertData(0,Nu),e;var t=Rh(e);return e.parentNode.insertBefore(t,e),t},Ah=function(e){if(Th(e.nextSibling))return Eh(e.nextSibling)||e.nextSibling.insertData(0,Nu),e.nextSibling;if(Th(e))return kh(e)||e.appendData(Nu),e;var t=Rh(e);return e.nextSibling?e.parentNode.insertBefore(t,e.nextSibling):e.parentNode.appendChild(t),t},Oh=IO(Dh=function(e,t){return e?_h(t):Ah(t)},!0),Ph=IO(Dh,!1),Bh=function(e,t){return Pi.isText(e.container())?Dh(t,e.container()):Dh(t,e.getNode())},Mh=function(e,t){var n=t.get();return n&&e.container()===n&&_u(n)},Ih=function(n,e){return e.fold(function(e){Lc.remove(n.get());var t=Oh(e);return n.set(t),y.some(Us(t,t.length-1))},function(e){return Vl.firstPositionIn(e).map(function(e){if(Mh(e,n))return Us(n.get(),1);Lc.remove(n.get());var t=Bh(e,!0);return n.set(t),Us(t,1)})},function(e){return Vl.lastPositionIn(e).map(function(e){if(Mh(e,n))return Us(n.get(),n.get().length-1);Lc.remove(n.get());var t=Bh(e,!1);return n.set(t),Us(t,t.length-1)})},function(e){Lc.remove(n.get());var t=Ph(e);return n.set(t),y.some(Us(t,1))})},Lh=function(e,t){var n,r;for(n=0;n<e.length;n++)if((r=e[n].apply(null,t)).isSome())return r;return y.none()},Fh=hg([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),Hh=function(e,t){var n=nl(t,e);return n||e},zh=function(e,t,n){var r=ym.normalizeForwards(n),o=Hh(t,r.container());return ym.findRootInline(e,o,r).fold(function(){return Vl.nextPosition(o,r).bind(IO(ym.findRootInline,e,o)).map(function(e){return Fh.before(e)})},y.none)},Wh=function(e,t){return null===Nc(e,t)},Uh=function(e,t,n){return ym.findRootInline(e,t,n).filter(IO(Wh,t))},jh=function(e,t,n){var r=ym.normalizeBackwards(n);return Uh(e,t,r).bind(function(e){return Vl.prevPosition(e,r).isNone()?y.some(Fh.start(e)):y.none()})},Vh=function(e,t,n){var r=ym.normalizeForwards(n);return Uh(e,t,r).bind(function(e){return Vl.nextPosition(e,r).isNone()?y.some(Fh.end(e)):y.none()})},qh=function(e,t,n){var r=ym.normalizeBackwards(n),o=Hh(t,r.container());return ym.findRootInline(e,o,r).fold(function(){return Vl.prevPosition(o,r).bind(IO(ym.findRootInline,e,o)).map(function(e){return Fh.after(e)})},y.none)},$h=function(e){return!1===ym.isRtl(Xh(e))},Xh=function(e){return e.fold(MO,MO,MO,MO)},Kh=function(e){return e.fold(BO("before"),BO("start"),BO("end"),BO("after"))},Gh=function(e){return e.fold(Fh.before,Fh.before,Fh.after,Fh.after)},Jh=function(e){return e.fold(Fh.start,Fh.start,Fh.end,Fh.end)},Qh=function(e,t){return Kh(e)===Kh(t)&&Xh(e)===Xh(t)},Zh=function(n,e,r,t,o,i){return bs([ym.findRootInline(e,r,t),ym.findRootInline(e,r,o)],function(e,t){return e!==t&&ym.hasSameParentBlock(r,e,t)?Fh.after(n?e:t):i}).getOr(i)},ep=function(e,t){return e.fold(BO(!0),function(e){return!Qh(e,t)})},tp=function(t,n,r,o,e){var i=ym.normalizePosition(t,e),a=Vl.fromPosition(t,r,i).map(IO(ym.normalizePosition,t)),u=a.fold(function(){return o.map(Gh)},function(e){return Yh(n,r,e).map(IO(Zh,t,n,r,i,e)).filter(IO(ep,o))});return u.filter($h)},rp=function(e,t,n,r){var o=ym.normalizePosition(e,r),i=Yh(t,n,o);return Yh(t,n,o).bind(IO(np,e)).orThunk(function(){return tp(e,t,n,i,r)})},op=Yh=function(e,t,n){return Lh([zh,jh,Vh,qh],[e,t,n]).filter($h)},IO(ip=rp,!(np=function(e,t){return e?t.fold(PO(y.some,Fh.start),y.none,PO(y.some,Fh.after),y.none):t.fold(y.none,PO(y.some,Fh.before),y.none,PO(y.some,Fh.end))})),IO(rp,!0),ap=Gh,up=Jh,cp=function(e,t,n){var r=e?1:-1;return t.setRng(Us(n.container(),n.offset()+r).toRange()),t.getSel().modify("move",e?"forward":"backward","word"),!0},lp=function(e,t){var n=t.selection.getRng(),r=e?Us.fromRangeEnd(n):Us.fromRangeStart(n);return!!sp(t)&&(e&&Pu(r)?cp(!0,t.selection,r):!(e||!Bu(r))&&cp(!1,t.selection,r))},sp=function(e){return M(e.selection.getSel().modify)},fp=lp,dp=function(e,t){var n=e.dom.createRng();n.setStart(t.container(),t.offset()),n.setEnd(t.container(),t.offset()),e.selection.setRng(n)},mp=function(e){return!1!==e.settings.inline_boundaries},gp=function(e,t){e?t.setAttribute("data-mce-selected","inline-boundary"):t.removeAttribute("data-mce-selected")},hp=function(t,e,n){return Ih(e,n).map(function(e){return dp(t,e),n})},pp=function(t,n,e){var r=t.getBody(),o=Us.fromRangeStart(t.selection.getRng()),i=IO(ym.isInlineTarget,t),a=ip(e,i,r,o);return a.bind(function(e){return hp(t,n,e)})},vp=function(e,t,n){var r=L(t.select('*[data-mce-selected="inline-boundary"]'),e),o=L(n,e);I(D(r,o),IO(gp,!1)),I(D(o,r),IO(gp,!0))},bp=function(e,t){if(e.selection.isCollapsed()&&!0!==e.composing&&t.get()){var n=Us.fromRangeStart(e.selection.getRng());Us.isTextPosition(n)&&!1===ym.isAtZwsp(n)&&(dp(e,Lc.removeAndReposition(t.get(),n)),t.set(null))}},yp=function(n,r,o,e){if(r.selection.isCollapsed()){var t=L(e,n);I(t,function(e){var t=Us.fromRangeStart(r.selection.getRng());op(n,r.getBody(),t).bind(function(e){return hp(r,o,e)})})}},xp=function(e,t,n){return function(){return!!mp(e)&&pp(e,t,n).isSome()}},Cp=function(t){var n=Fa(null),r=IO(ym.isInlineTarget,t);return t.on("NodeChange",function(e){mp(t)&&(vp(r,t.dom,e.parents),bp(t,n),yp(r,t,n,e.parents))}),n},Sp=IO(wp=function(e,t,n){return function(){return!!mp(t)&&fp(e,t)}},!0),Np=IO(wp,!1),Tp={move:xp,moveNextWord:Sp,movePrevWord:Np,setupSelectedState:Cp,setCaretPosition:dp},Ep=function(e){return!1!==e.settings.inline_boundaries},kp=function(e,t){var n=_e.document.createRange();return n.setStart(e.container(),e.offset()),n.setEnd(t.container(),t.offset()),n},Rp=function(o){return bs([Vl.firstPositionIn(o),Vl.lastPositionIn(o)],function(e,t){var n=ym.normalizePosition(!0,e),r=ym.normalizePosition(!1,t);return Vl.nextPosition(o,n).map(function(e){return e.isEqual(r)}).getOr(!0)}).getOr(!0)},_p=function(t,n){return function(e){return Ih(n,e).map(function(e){return Tp.setCaretPosition(t,e),!0}).getOr(!1)}},Ap=function(e,t,n,r){var o=e.getBody(),i=IO(ym.isInlineTarget,e);e.undoManager.ignore(function(){e.selection.setRng(kp(n,r)),e.execCommand("Delete"),op(i,o,Us.fromRangeStart(e.selection.getRng())).map(up).map(_p(e,t))}),e.nodeChanged()},Dp=function(e,t){var n=nl(t,e);return n||e},Op=function(n,r,o,i){var a=Dp(n.getBody(),i.container()),u=IO(ym.isInlineTarget,n),s=op(u,a,i);return s.bind(function(e){return o?e.fold(BO(y.some(up(e))),y.none,BO(y.some(ap(e))),y.none):e.fold(y.none,BO(y.some(ap(e))),y.none,BO(y.some(up(e))))}).map(_p(n,r)).getOrThunk(function(){var t=Vl.navigate(o,a,i),e=t.bind(function(e){return op(u,a,e)});return s.isSome()&&e.isSome()?ym.findRootInline(u,a,i).map(function(e){return!!Rp(e)&&(hh(n,o,kr.fromDom(e)),!0)}).getOr(!1):e.bind(function(e){return t.map(function(e){return o?Ap(n,r,i,e):Ap(n,r,e,i),!0})}).getOr(!1)})},Pp=function(e,t,n){if(e.selection.isCollapsed()&&Ep(e)){var r=Us.fromRangeStart(e.selection.getRng());return Op(e,t,n,r)}return!1},Bp=no("start","end"),Mp=no("rng","table","cells"),Ip=hg([{removeTable:["element"]},{emptyCells:["cells"]}]),Lp=function(e){return IO(go,e)},Fp=function(e,t){return nu(kr.fromDom(e),"td,th",t)},Hp=function(e,t){return eu(e,"table",t)},zp=function(e){return!1===go(e.start(),e.end())},Wp=function(e,n){return Hp(e.start(),n).bind(function(t){return Hp(e.end(),n).bind(function(e){return go(t,e)?y.some(t):y.none()})})},Up=function(e){return Ja(e,"td,th")},jp=function(t,e){return Hp(t.start(),e).bind(function(e){return U(Up(e)).map(function(e){return Bp(t.start(),e)})})},Vp=function(n,e){var t=Fp(e.startContainer,n),r=Fp(e.endContainer,n);return e.collapsed?y.none():bs([t,r],Bp).fold(function(){return t.fold(function(){return r.bind(function(t){return Hp(t,n).bind(function(e){return W(Up(e)).map(function(e){return Bp(e,t)})})})},function(t){return Hp(t,n).bind(function(e){return U(Up(e)).map(function(e){return Bp(t,e)})})})},function(e){return qp(n,e)?y.none():jp(e,n)})},qp=function(e,t){return Wp(t,e).isSome()},$p=function(e,t){var n=Fp(e.startContainer,t),r=Fp(e.endContainer,t);return bs([n,r],Bp).filter(zp).filter(function(e){return qp(t,e)}).orThunk(function(){return Vp(t,e)})},Yp=function(t,e){return Wp(t,e).map(function(e){return Mp(t,e,Up(e))})},Xp=function(e,t){var n=Lp(e);return $p(t,n).bind(function(e){return Yp(e,n)})},Kp=function(e,t){return N(e,function(e){return go(e,t)})},Gp=function(n){return bs([Kp(n.cells(),n.rng().start()),Kp(n.cells(),n.rng().end())],function(e,t){return n.cells().slice(e,t+1)})},Jp=function(n){return Gp(n).map(function(e){var t=n.cells();return e.length===t.length?Ip.removeTable(n.table()):Ip.emptyCells(e)})},Qp=function(e,t){return Xp(e,t).bind(Jp)},ev=function(e){return 1<Zp(e).length},tv=Zp=function(e){var t,n=[];if(e)for(t=0;t<e.rangeCount;t++)n.push(e.getRangeAt(t));return n},nv=function(e){return R(e,function(e){var t=gs(e);return t?[kr.fromDom(t)]:[]})},rv=ev,av=function(e,t){var n=iv(t),r=ov(e);return 0<n.length?n:r},uv=function(e){return av(tv(e.selection.getSel()),kr.fromDom(e.getBody()))},ov=function(e){return L(nv(e),mi)},iv=function(e){return Ja(e,"td[data-mce-selected],th[data-mce-selected]")},sv=av,cv=uv,lv=function(e,t){return I(t,bd),e.selection.setCursorLocation(t[0].dom(),0),!0},fv=function(e,t){return hh(e,!1,t),!0},dv=function(t,e,n){return Qp(e,n).map(function(e){return e.fold(IO(fv,t),IO(lv,t))})},mv=function(e,t){return yv(e,t)},gv=function(t,e,n,r){return vv(e,r).fold(function(){return dv(t,e,n)},function(e){return mv(t,e)}).getOr(!1)},hv=function(e,t){var n=kr.fromDom(e.getBody()),r=e.selection.getRng(),o=cv(e);return 0!==o.length?lv(e,o):gv(e,n,r,t)},pv=function(e,t){return S(Km(t,e),mi)},vv=function(e,t){return S(Km(t,e),function(e){return"caption"===Dr(e)})},bv=function(e,t,n,r,o){return Vl.navigate(n,e.getBody(),o).bind(function(e){return pv(t,kr.fromDom(e.getNode())).map(function(e){return!1===go(e,r)})})},yv=function(e,t){return bd(t),e.selection.setCursorLocation(t.dom(),0),y.some(!0)},xv=function(e,n,r,o){return Vl.firstPositionIn(e.dom()).bind(function(t){return Vl.lastPositionIn(e.dom()).map(function(e){return n?r.isEqual(t)&&o.isEqual(e):r.isEqual(e)&&o.isEqual(t)})}).getOr(!0)},wv=function(e,t){return yv(e,t)},Cv=function(e,t,n){return vv(e,kr.fromDom(n.getNode())).map(function(e){return!1===go(e,t)})},Sv=function(t,n,r,o,i){return Vl.navigate(r,t.getBody(),i).bind(function(e){return xv(o,r,i,e)?wv(t,o):Cv(n,o,e)}).or(y.some(!0))},Nv=function(t,n,r,e){var o=Us.fromRangeStart(t.selection.getRng());return pv(r,e).bind(function(e){return Bm(e)?yv(t,e):bv(t,r,n,e,o)})},Tv=function(e,t,n,r){var o=Us.fromRangeStart(e.selection.getRng());return Bm(r)?yv(e,r):Sv(e,n,t,r,o)},Ev=function(t,n,e){var r=kr.fromDom(t.getBody());return vv(r,e).fold(function(){return Nv(t,n,r,e)},function(e){return Tv(t,n,r,e)}).getOr(!1)},kv=function(e,t){var n=kr.fromDom(e.selection.getStart(!0)),r=cv(e);return e.selection.isCollapsed()&&0===r.length?Ev(e,t,n):hv(e,n)},Rv=yf.isEq,Av=function(t,e,n,r){var o=t.dom.getRoot();return e!==o&&(e=t.dom.getParent(e,function(e){return!!_v(t,e,n)||e.parentNode===o||!!Pv(t,e,n,r,!0)}),Pv(t,e,n,r))},Ov=function(e,t,n,r,o,i){var a,u,s,c=n[r];if(n.onmatch)return n.onmatch(t,n,r);if(c)if(void 0===c.length){for(a in c)if(c.hasOwnProperty(a)){if(u="attributes"===r?e.getAttrib(t,a):yf.getStyle(e,t,a),o&&!u&&!n.exact)return;if((!o||n.exact)&&!Rv(u,yf.normalizeStyleValue(e,yf.replaceVars(c[a],i),a)))return}}else for(s=0;s<c.length;s++)if("attributes"===r?e.getAttrib(t,c[s]):yf.getStyle(e,t,c[s]))return n;return n},Bv=function(r,o,i){var a=[],u={},e=r.selection.getStart();return r.dom.getParent(e,function(e){var t,n;for(t=0;t<o.length;t++)n=o[t],!u[n]&&Pv(r,e,n,i)&&(u[n]=!0,a.push(n))},r.dom.getRoot()),a},Mv={matchNode:Pv=function(e,t,n,r,o){var i,a,u,s,c=e.formatter.get(n),l=e.dom;if(c&&t)for(a=0;a<c.length;a++)if(i=c[a],Dv(e.dom,t,i)&&Ov(l,t,i,"attributes",o,r)&&Ov(l,t,i,"styles",o,r)){if(s=i.classes)for(u=0;u<s.length;u++)if(!e.dom.hasClass(t,s[u]))return;return i}},matchName:Dv=function(e,t,n){return!!Rv(t,n.inline)||!!Rv(t,n.block)||(n.selector?1===t.nodeType&&e.is(t,n.selector):void 0)},match:function(e,t,n,r){var o;return r?Av(e,r,t,n):(r=e.selection.getNode(),!!Av(e,r,t,n)||!((o=e.selection.getStart())===r||!Av(e,o,t,n)))},matchAll:Bv,canApply:function(e,t){var n,r,o,i,a,u=e.formatter.get(t),s=e.dom;if(u)for(n=e.selection.getStart(),r=yf.getParents(s,n),i=u.length-1;0<=i;i--){if(!(a=u[i].selector)||u[i].defaultBlock)return!0;for(o=r.length-1;0<=o;o--)if(s.is(r[o],a))return!0}return!1},matchesUnInheritedFormatSelector:_v=function(e,t,n){var r,o=e.formatter.get(n);if(o)for(r=0;r<o.length;r++)if(!1===o[r].inherit&&e.dom.is(t,o[r].selector))return!0;return!1}},Iv=function(e,t){return e.splitText(t)},Lv=function(e){var t=e.startContainer,n=e.startOffset,r=e.endContainer,o=e.endOffset;return t===r&&Pi.isText(t)?0<n&&n<t.nodeValue.length&&(t=(r=Iv(t,n)).previousSibling,n<o?(t=r=Iv(r,o-=n).previousSibling,o=r.nodeValue.length,n=0):o=0):(Pi.isText(t)&&0<n&&n<t.nodeValue.length&&(t=Iv(t,n),n=0),Pi.isText(r)&&0<o&&o<r.nodeValue.length&&(o=(r=Iv(r,o).previousSibling).nodeValue.length)),{startContainer:t,startOffset:n,endContainer:r,endOffset:o}},Fv=Nu,Hv="_mce_caret",zv=function(e,t){return e.importNode(t,!0)},Wv=function(e){for(var t=[];e;){if(3===e.nodeType&&e.nodeValue!==Fv||1<e.childNodes.length)return[];1===e.nodeType&&t.push(e),e=e.firstChild}return t},Uv=function(e){return 0<Wv(e).length},jv=function(e){var t;if(e)for(e=(t=new JO(e,e)).current();e;e=t.next())if(3===e.nodeType)return e;return null},Vv=function(e){var t=kr.fromTag("span");return Yr(t,{id:Hv,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&_a(t,kr.fromText(Fv)),t},qv=function(e){var t=jv(e);return t&&t.nodeValue.charAt(0)===Fv&&t.deleteData(0,1),t},$v=function(e,t,n){var r,o,i,a,u;void 0===n&&(n=!0),r=e.dom,o=e.selection,Uv(t)?hh(e,!1,kr.fromDom(t),n):(i=o.getRng(),a=r.getParent(t,r.isBlock),u=qv(t),i.startContainer===u&&0<i.startOffset&&i.setStart(u,i.startOffset-1),i.endContainer===u&&0<i.endOffset&&i.setEnd(u,i.endOffset-1),r.remove(t,!0),a&&r.isEmpty(a)&&bd(kr.fromDom(a)),o.setRng(i))},Yv=function(e,t,n){void 0===n&&(n=!0);var r=e.dom,o=e.selection;if(t)$v(e,t,n);else if(!(t=Nc(e.getBody(),o.getStart())))for(;t=r.get(Hv);)$v(e,t,!1)},Xv=function(e,t,n){var r=e.dom,o=r.getParent(n,IO(yf.isTextBlock,e));o&&r.isEmpty(o)?n.parentNode.replaceChild(t,n):(vd(kr.fromDom(n)),r.isEmpty(n)?n.parentNode.replaceChild(t,n):r.insertAfter(t,n))},Kv=function(e,t){return e.appendChild(t),t},Gv=function(e,t){var n=C(e,function(e,t){return Kv(e,t.cloneNode(!1))},t);return Kv(n,n.ownerDocument.createTextNode(Fv))},Jv=function(e,t,n){var r,o,i,a=e.selection,u=a.getRng(!0),s=u.startOffset,c=u.startContainer,l=c.nodeValue,f=Nc(e.getBody(),a.getStart());f&&(r=jv(f)),i=/[^\s\u00a0\u00ad\u200b\ufeff]/,l&&0<s&&s<l.length&&i.test(l.charAt(s))&&i.test(l.charAt(s-1))?(o=a.getBookmark(),u.collapse(!0),u=Pf(e,u,e.formatter.get(t)),u=Lv(u),e.formatter.apply(t,n,u),a.moveToBookmark(o)):(f&&r.nodeValue===Fv||(r=(f=zv(e.getDoc(),Vv(!0).dom())).firstChild,u.insertNode(f),s=1),e.formatter.apply(t,n,f),a.setCursorLocation(r,s))},Qv=function(e,t,n,r){var o,i,a,u,s,c,l,f=e.dom,d=e.selection,m=[],g=d.getRng(),h=g.startContainer,p=g.startOffset,v=h;for(3===h.nodeType&&(p!==h.nodeValue.length&&(i=!0),v=v.parentNode);v;){if(Mv.matchNode(e,v,t,n,r)){a=v;break}v.nextSibling&&(i=!0),m.push(v),v=v.parentNode}a&&(i?(o=d.getBookmark(),g.collapse(!0),s=Pf(e,g,e.formatter.get(t),!0),s=Lv(s),e.formatter.remove(t,n,s),d.moveToBookmark(o)):(u=Nc(e.getBody(),a),c=Vv(!1).dom(),l=Gv(m,c),Xv(e,c,u||a),$v(e,u,!1),d.setCursorLocation(l,1),f.isEmpty(a)&&f.remove(a)))},Zv=function(e,t){var n=e.selection,r=e.getBody();Yv(e,null,!1),8!==t&&46!==t||!n.isCollapsed()||n.getStart().innerHTML!==Fv||Yv(e,Nc(r,n.getStart())),37!==t&&39!==t||Yv(e,Nc(r,n.getStart()))},eb=function(t){t.on("mouseup keydown",function(e){Zv(t,e.keyCode)})},tb=function(e,t){var n=Vv(!1),r=Gv(t,n.dom());return Ea(kr.fromDom(e),n),Ba(kr.fromDom(e)),Us(r,0)},nb=function(e,t){return e.schema.getTextInlineElements().hasOwnProperty(Dr(t))&&!Sc(t.dom())&&!Pi.isBogus(t.dom())},rb=function(e){return Sc(e.dom())&&Uv(e.dom())},ob=function(e,t){var n=Km(t,e);return N(n,ii).fold(BO(n),function(e){return n.slice(0,e)})},ib=function(e){return 1===Ro(e).length},ab=function(e,t,n,r){var o,i=IO(nb,t),a=Ae(L(r,i),function(e){return e.dom()});0===a.length?hh(t,e,n):(o=tb(n.dom(),a),t.selection.setRng(o.toRange()))},ub=function(n,r){var e=kr.fromDom(n.getBody()),t=kr.fromDom(n.selection.getStart()),o=L(ob(e,t),ib);return U(o).map(function(e){var t=Us.fromRangeStart(n.selection.getRng());return!(!Nm(r,t,e.dom())||rb(e)||(ab(r,n,e,o),0))}).getOr(!1)},sb=function(e,t){return!!e.selection.isCollapsed()&&ub(e,t)},cb=Pi.isContentEditableTrue,lb=Pi.isContentEditableFalse,fb=function(e,t,n,r,o){return t._selectionOverrides.showCaret(e,n,r,o)},db=function(e){var t=e.ownerDocument.createRange();return t.selectNode(e),t},mb=function(e,t){return e.fire("BeforeObjectSelected",{target:t}).isDefaultPrevented()?null:db(t)},gb=function(e,t,n){var r,o,i=ll(1,e.getBody(),t),a=Us.fromRangeStart(i),u=a.getNode();return lb(u)?fb(1,e,u,!a.isAtEnd(),!1):(r=a.getNode(!0),lb(r)?fb(1,e,r,!1,!1):(o=e.dom.getParent(a.getNode(),function(e){return lb(e)||cb(e)}),lb(o)?fb(1,e,o,!1,n):null))},hb=function(e,t,n){if(!t||!t.collapsed)return t;var r=gb(e,t,n);return r||t},pb=function(e,t){Pi.isText(t)&&0===t.data.length&&e.remove(t)},vb=function(e,t,n,r,o,i){var a,u=fb(r,e,i.getNode(!o),o,!0);return t.collapsed?(a=t.cloneRange(),o?a.setEnd(u.startContainer,u.startOffset):a.setStart(u.endContainer,u.endOffset),a.deleteContents()):t.deleteContents(),e.selection.setRng(u),pb(e.dom,n),!0},bb=function(e,t){var n,r,o,i,a,u,s,c,l,f=e.selection.getRng();return!!Pi.isText(f.commonAncestorContainer)&&(n=t?vl.Forwards:vl.Backwards,r=Al(e.getBody()),o=IO(hl,r.next),i=IO(hl,r.prev),a=t?o:i,u=t?Ag:Dg,s=dl(n,e.getBody(),f),!!(c=ym.normalizePosition(t,a(s)))&&(u(c)?vb(e,f,s.getNode(),n,t,c):!!((l=a(c))&&u(l)&&pl(c,l))&&vb(e,f,s.getNode(),n,t,l)))},yb=function(e,t){return bb(e,t)},xb=function(e,t){e.getDoc().execCommand(t,!1,null)},wb=function(e){Sh(e,!1)||yb(e,!1)||Pp(e,!1)||ug(e,!1)||kv(e)||gg(e,!1)||sb(e,!1)||(xb(e,"Delete"),Sm(e))},Cb=function(e){Sh(e,!0)||yb(e,!0)||Pp(e,!0)||ug(e,!0)||kv(e)||gg(e,!0)||sb(e,!0)||xb(e,"ForwardDelete")},Sb=function(e,t,n){var r,o=e.getParam(t,n);return-1!==o.indexOf("=")?(r=e.getParam(t,"","hash")).hasOwnProperty(e.id)?r[e.id]:n:o},Nb=function(e){return e.getParam("iframe_attrs",{})},Tb=function(e){return e.getParam("doctype","<!DOCTYPE html>")},Eb=function(e){return e.getParam("document_base_url","")},kb=function(e){return Sb(e,"body_id","tinymce")},Rb=function(e){return Sb(e,"body_class","")},_b=function(e){return e.getParam("content_security_policy","")},Ab=function(e){return e.getParam("br_in_pre",!0)},Db=function(e){if(e.getParam("force_p_newlines",!1))return"p";var t=e.getParam("forced_root_block","p");return!1===t?"":t},Ob=function(e){return e.getParam("forced_root_block_attrs",{})},Pb=function(e){return e.getParam("br_newline_selector",".mce-toc h2,figcaption,caption")},Bb=function(e){return e.getParam("no_newline_selector","")},Mb=function(e){return e.getParam("keep_styles",!0)},Ib=function(e){return e.getParam("end_container_on_empty_block",!1)},Lb=function(e){return un.explode(e.getParam("font_size_style_values",""))},Fb=function(e){return un.explode(e.getParam("font_size_classes",""))},Hb=function(e){return e.getParam("images_dataimg_filter",BO(!0),"function")},zb=function(e){return e.getParam("automatic_uploads",!0,"boolean")},Wb=function(e){return e.getParam("images_reuse_filename",!1,"boolean")},Ub=function(e){return e.getParam("images_replace_blob_uris",!0,"boolean")},jb=function(e){return e.getParam("images_upload_url","","string")},Vb=function(e){return e.getParam("images_upload_base_path","","string")},qb=function(e){return e.getParam("images_upload_credentials",!1,"boolean")},$b=function(e){return e.getParam("images_upload_handler",null,"function")},Yb=function(e){return e.getParam("content_css_cors",!1,"boolean")},Xb=function(t,n,e){var r=function(e){return to(e,t)},o=function(e){return go(kr.fromDom(n),e)};return Za(kr.fromDom(e),function(e){return r(e).isSome()},o).bind(r)},Kb=function(e,t){var n=Math.pow(10,t);return Math.round(e*n)/n},Gb=function(e,t){return/[0-9.]+px$/.test(e)?Kb(72*parseInt(e,10)/96,t||0)+"pt":e},Jb=function(e){return e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,",")},Qb=function(e,t){return y.from(ya.DOM.getStyle(t,e,!0))},ey={getFontSize:(Zb=function(n){return function(t,e){return y.from(e).map(kr.fromDom).filter(Br).bind(function(e){return Xb(n,t,e.dom()).or(Qb(n,e.dom()))}).getOr("")}})("font-size"),getFontFamily:PO(Jb,Zb("font-family")),toPt:Gb},ty=function(e){return Vl.firstPositionIn(e.getBody()).map(function(e){var t=e.container();return Pi.isText(t)?t.parentNode:t})},ny=function(e,t){return e.startContainer===t&&0===e.startOffset},ry=function(n){return y.from(n.selection.getRng()).bind(function(e){var t=n.getBody();return ny(e,t)?y.none():y.from(n.selection.getStart(!0))})},oy=function(e,t){var n,r,o;return/^[0-9\.]+$/.test(t)&&1<=(n=parseInt(t,10))&&n<=7?(r=Lb(e),(o=Fb(e))?o[n-1]||t:r[n-1]||t):t},iy=function(e,t){e.formatter.toggle("fontname",{value:oy(e,t)}),e.nodeChanged()},ay=function(t){return ry(t).fold(function(){return ty(t).map(function(e){return ey.getFontFamily(t.getBody(),e)}).getOr("")},function(e){return ey.getFontFamily(t.getBody(),e)})},uy=function(e,t){e.formatter.toggle("fontsize",{value:oy(e,t)}),e.nodeChanged()},sy=function(t){return ry(t).fold(function(){return ty(t).map(function(e){return ey.getFontSize(t.getBody(),e)}).getOr("")},function(e){return ey.getFontSize(t.getBody(),e)})},cy=function(e,t){return e&&t&&e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset},ly=function(e,t,n){for(;e&&e!==t;){if(n(e))return e;e=e.parentNode}return null},fy=function(e,t,n){return null!==ly(e,t,n)},dy=function(e,t,n){return fy(e,t,function(e){return e.nodeName===n})},my=function(e){return e&&"TABLE"===e.nodeName},gy=function(e){return e&&/^(TD|TH|CAPTION)$/.test(e.nodeName)},hy=function(e,t){return Au(e)&&!1===fy(e,t,Sc)},py=function(e,t,n){for(var r=new JO(t,e.getParent(t.parentNode,e.isBlock)||e.getRoot());t=r[n?"prev":"next"]();)if(Pi.isBr(t))return!0},vy=function(e,t){return e.previousSibling&&e.previousSibling.nodeName===t},by=function(e,t){for(;t&&t!==e;){if(Pi.isContentEditableFalse(t))return!0;t=t.parentNode}return!1},yy=function(e,t,n,r,o){var i,a,u,s=e.getRoot(),c=e.schema.getNonEmptyElements(),l=e.getParent(o.parentNode,e.isBlock)||s;if(r&&Pi.isBr(o)&&t&&e.isEmpty(l))return y.some(rP(o.parentNode,e.nodeIndex(o)));for(i=new JO(o,l);u=i[r?"prev":"next"]();){if("false"===e.getContentEditableParent(u)||hy(u,s))return y.none();if(Pi.isText(u)&&0<u.nodeValue.length)return!1===dy(u,s,"A")?y.some(rP(u,r?u.nodeValue.length:0)):y.none();if(e.isBlock(u)||c[u.nodeName.toLowerCase()])return y.none();a=u}return n&&a?y.some(rP(a,0)):y.none()},xy=function(e,t,n,r){var o,i,a=e.getRoot(),u=!1,s=r[(n?"start":"end")+"Container"],c=r[(n?"start":"end")+"Offset"],l=Pi.isElement(s)&&c===s.childNodes.length,f=e.schema.getNonEmptyElements(),d=n;if(Au(s))return y.none();if(Pi.isElement(s)&&c>s.childNodes.length-1&&(d=!1),Pi.isDocument(s)&&(s=a,c=0),s===a){if(d&&(i=s.childNodes[0<c?c-1:0])){if(Au(i))return y.none();if(f[i.nodeName]||my(i))return y.none()}if(s.hasChildNodes()){if(c=Math.min(!d&&0<c?c-1:c,s.childNodes.length-1),s=s.childNodes[c],c=Pi.isText(s)&&l?s.data.length:0,!t&&s===a.lastChild&&my(s))return y.none();if(by(a,s)||Au(s))return y.none();if(s.hasChildNodes()&&!1===my(s)){o=new JO(i=s,a);do{if(Pi.isContentEditableFalse(i)||Au(i)){u=!1;break}if(Pi.isText(i)&&0<i.nodeValue.length){c=d?0:i.nodeValue.length,s=i,u=!0;break}if(f[i.nodeName.toLowerCase()]&&!gy(i)){c=e.nodeIndex(i),s=i.parentNode,d||c++,u=!0;break}}while(i=d?o.next():o.prev())}}}return t&&(Pi.isText(s)&&0===c&&yy(e,l,t,!0,s).each(function(e){s=e.container(),c=e.offset(),u=!0}),Pi.isElement(s)&&((i=s.childNodes[c])||(i=s.childNodes[c-1]),!i||!Pi.isBr(i)||vy(i,"A")||py(e,i,!1)||py(e,i,!0)||yy(e,l,t,!0,i).each(function(e){s=e.container(),c=e.offset(),u=!0}))),d&&!t&&Pi.isText(s)&&c===s.nodeValue.length&&yy(e,l,t,!1,s).each(function(e){s=e.container(),c=e.offset(),u=!0}),u?y.some(rP(s,c)):y.none()},wy=function(e,t){var n=t.collapsed,r=t.cloneRange(),o=rP.fromRangeStart(t);return xy(e,n,!0,r).each(function(e){n&&rP.isAbove(o,e)||r.setStart(e.container(),e.offset())}),n||xy(e,n,!1,r).each(function(e){r.setEnd(e.container(),e.offset())}),n&&r.collapse(!0),cy(t,r)?y.none():y.some(r)},Cy=function(e,t,n){for(var r,o=new JO(t,n),i=e.getNonEmptyElements();r=o.next();)if(i[r.nodeName.toLowerCase()]||0<r.length)return!0},Sy=function(e,t,n){var r=e.create("span",{},"&nbsp;");n.parentNode.insertBefore(r,n),t.scrollIntoView(r),e.remove(r)},Ny=function(e,t,n,r){var o=e.createRng();r?(o.setStartBefore(n),o.setEndBefore(n)):(o.setStartAfter(n),o.setEndAfter(n)),t.setRng(o)},Ty=function(e,t){var n,r,o,i,a,u,s,c,l,f=e.selection,d=e.dom,m=f.getRng();wy(d,m).each(function(e){m.setStart(e.startContainer,e.startOffset),m.setEnd(e.endContainer,e.endOffset)}),o=m.startOffset,1===(i=m.startContainer).nodeType&&i.hasChildNodes()&&(a=o>i.childNodes.length-1,i=i.childNodes[Math.min(o,i.childNodes.length-1)]||i,o=a&&3===i.nodeType?i.nodeValue.length:0),c=(s=(u=d.getParent(i,d.isBlock))?d.getParent(u.parentNode,d.isBlock):null)?s.nodeName.toUpperCase():"",l=t&&t.ctrlKey,"LI"!==c||l||(u=s),i&&3===i.nodeType&&o>=i.nodeValue.length&&(Cy(e.schema,i,u)||(n=d.create("br"),m.insertNode(n),m.setStartAfter(n),m.setEndAfter(n),r=!0)),n=d.create("br"),ac(d,m,n),Sy(d,f,n),Ny(d,f,n,r),e.undoManager.add()},Ey=function(e,t){var n=kr.fromTag("br");Ea(kr.fromDom(t),n),e.undoManager.add()},ky=function(e,t){_y(e.getBody(),t)||ka(kr.fromDom(t),kr.fromTag("br"));var n=kr.fromTag("br");ka(kr.fromDom(t),n),Sy(e.dom,e.selection,n.dom()),Ny(e.dom,e.selection,n.dom(),!1),e.undoManager.add()},Ry=function(e){return Pi.isBr(e.getNode())},_y=function(e,t){return!!Ry(Us.after(t))||Vl.nextPosition(e,Us.after(t)).map(function(e){return Pi.isBr(e.getNode())}).getOr(!1)},Ay=function(e){return e&&"A"===e.nodeName&&"href"in e},Dy=function(e){return e.fold(BO(!1),Ay,Ay,BO(!1))},Oy=function(e){var t=IO(ym.isInlineTarget,e),n=Us.fromRangeStart(e.selection.getRng());return op(t,e.getBody(),n).filter(Dy)},Py=function(e,t){t.fold(OO,IO(Ey,e),IO(ky,e),OO)},By=function(e,t){var n=Oy(e);n.isSome()?n.each(IO(Py,e)):Ty(e,t)},hg([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),hg([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),My=no("start","soffset","finish","foffset"),Iy=Tr.detect().browser,Ly=function(e,t){var n=Mr(t)?Hf(t).length:Ro(t).length+1;return n<e?n:e<0?0:e},Fy=function(e){return My(e.start(),Ly(e.soffset(),e.start()),e.finish(),Ly(e.foffset(),e.finish()))},Hy=function(e,t){return bo(e,t)||go(e,t)},zy=function(t){return function(e){return Hy(t,e.start())&&Hy(t,e.finish())}},Wy=function(e){return!0===e.inline||Iy.isIE()},Uy=function(e){return My(kr.fromDom(e.startContainer),e.startOffset,kr.fromDom(e.endContainer),e.endOffset)},Vy=function(e){var t=wo(e);return jy(t.dom()).filter(zy(e))},$y=function(e){var t=_e.document.createRange();try{return t.setStart(e.start().dom(),e.soffset()),t.setEnd(e.finish().dom(),e.foffset()),y.some(t)}catch(e){return y.none()}},Xy=function(e){var t=Wy(e)?Vy(kr.fromDom(e.getBody())):y.none();e.bookmark=t.isSome()?t:e.bookmark},jy=function(e){var t=e.getSelection(),n=t&&0!==t.rangeCount?y.from(t.getRangeAt(0)):y.none();return n.map(Uy)},Ky=function(t){Yy(t).each(function(e){t.selection.setRng(e)})},Gy=Yy=function(e){return(e.bookmark?e.bookmark:y.none()).bind(IO(qy,kr.fromDom(e.getBody()))).bind($y)},qy=function(e,t){return y.from(t).filter(zy(e)).map(Fy)},Jy=function(e,t,n,r,o,i){var a,u;"false"!==e.getContentEditable(i)&&(a=n?"margin":"padding",a="TABLE"===i.nodeName?"margin":a,a+="rtl"===e.getStyle(i,"direction",!0)?"Right":"Left","outdent"===t?(u=Math.max(0,parseInt(i.style[a]||0,10)-r),e.setStyle(i,a,u?u+o:"")):(u=parseInt(i.style[a]||0,10)+r+o,e.setStyle(i,a,u)))},Qy=function(e){return ci(e)||li(e)},Zy=function(e){return Co(e).map(Qy).getOr(!1)},ex=function(e){return L(Ae(e.selection.getSelectedBlocks(),kr.fromDom),function(e){return!Qy(e)&&!Zy(e)})},tx=function(e,t){var n=e.settings,r=e.dom,o=e.selection,i=e.formatter,a=/[a-z%]+$/i.exec(n.indentation)[0],u=parseInt(n.indentation,10),s=e.getParam("indent_use_margin",!1);e.queryCommandState("InsertUnorderedList")||e.queryCommandState("InsertOrderedList")||n.forced_root_block||r.getParent(o.getNode(),r.isBlock)||i.apply("div"),I(ex(e),function(e){Jy(r,t,s,u,a,e.dom())})},nx=un.each,rx=un.extend,ox=un.map,ix=un.inArray,ax=un.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend"," "),(ux=function(a){var u,s,e,r,c,t,n,l=this,f={},d=function(){return!1},m=function(){return!0};u=(a=a||{}).scope||l,s=a.toggleEvent||d,e=function(e,t){var n,r,o,i;if(e=e.toLowerCase(),(t=t||{}).type=e,t.target||(t.target=u),t.preventDefault||(t.preventDefault=function(){t.isDefaultPrevented=m},t.stopPropagation=function(){t.isPropagationStopped=m},t.stopImmediatePropagation=function(){t.isImmediatePropagationStopped=m},t.isDefaultPrevented=d,t.isPropagationStopped=d,t.isImmediatePropagationStopped=d),a.beforeFire&&a.beforeFire(t),n=f[e])for(r=0,o=n.length;r<o;r++){if((i=n[r]).once&&c(e,i.func),t.isImmediatePropagationStopped())return t.stopPropagation(),t;if(!1===i.func.call(u,t))return t.preventDefault(),t}return t},r=function(e,t,n,r){var o,i,a;if(!1===t&&(t=d),t)for(t={func:t},r&&un.extend(t,r),a=(i=e.toLowerCase().split(" ")).length;a--;)e=i[a],(o=f[e])||(o=f[e]=[],s(e,!0)),n?o.unshift(t):o.push(t);return l},c=function(e,t){var n,r,o,i,a;if(e)for(n=(i=e.toLowerCase().split(" ")).length;n--;){if(e=i[n],r=f[e],!e){for(o in f)s(o,!1),delete f[o];return l}if(r){if(t)for(a=r.length;a--;)r[a].func===t&&(r=r.slice(0,a).concat(r.slice(a+1)),f[e]=r);else r.length=0;r.length||(s(e,!1),delete f[e])}}else{for(e in f)s(e,!1);f={}}return l},t=function(e,t,n){return r(e,t,n,{once:!0})},n=function(e){return e=e.toLowerCase(),!(!f[e]||0===f[e].length)},l.fire=e,l.on=r,l.off=c,l.once=t,l.has=n}).isNative=function(e){return!!ax[e.toLowerCase()]},sx=function(n){return n._eventDispatcher||(n._eventDispatcher=new ux({scope:n,toggleEvent:function(e,t){ux.isNative(e)&&n.toggleNativeEvent&&n.toggleNativeEvent(e,t)}})),n._eventDispatcher},cx={fire:function(e,t,n){var r,o=this;if(o.removed&&"remove"!==e&&"detach"!==e)return t;if(t=sx(o).fire(e,t,n),!1!==n&&o.parent)for(r=o.parent();r&&!t.isPropagationStopped();)r.fire(e,t,!1),r=r.parent();return t},on:function(e,t,n){return sx(this).on(e,t,n)},off:function(e,t){return sx(this).off(e,t)},once:function(e,t){return sx(this).once(e,t)},hasEventListeners:function(e){return sx(this).has(e)}},lx=function(e,t){return e.fire("PreProcess",t)},fx=function(e,t){return e.fire("PostProcess",t)},dx=function(e){return e.fire("remove")},mx=function(e){return e.fire("detach")},gx=function(e,t){return e.fire("SwitchMode",{mode:t})},hx=function(e,t,n,r){e.fire("ObjectResizeStart",{target:t,width:n,height:r})},px=function(e,t,n,r){e.fire("ObjectResized",{target:t,width:n,height:r})},vx=function(e,t,n){try{e.getDoc().execCommand(t,!1,n)}catch(e){}},bx=function(e,t,n){Ka(e,t)&&!1===n?Xa(e,t):n&&$a(e,t)},yx=function(e,t){bx(kr.fromDom(e.getBody()),"mce-content-readonly",t),t?(e.selection.controlSelection.hideResizeRect(),e.readonly=!0,e.getBody().contentEditable="false"):(e.readonly=!1,e.getBody().contentEditable="true",vx(e,"StyleWithCSS",!1),vx(e,"enableInlineTableEditing",!1),vx(e,"enableObjectResizing",!1),e.focus(),e.nodeChanged())},xx=function(e,t){t!==wx(e)&&(e.initialized?yx(e,"readonly"===t):e.on("init",function(){yx(e,"readonly"===t)}),gx(e,t))},wx=function(e){return e.readonly?"readonly":"design"},Cx=function(e){return!0===e.readonly},Sx=ya.DOM,Tx=function(e,t){return"selectionchange"===t?e.getDoc():!e.inline&&/^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(t)?e.getDoc().documentElement:e.settings.event_root?(e.eventRoot||(e.eventRoot=Sx.select(e.settings.event_root)[0]),e.eventRoot):e.getBody()},Ex=function(e){return!e.hidden&&!e.readonly},kx=function(e,t,n){Ex(e)?e.fire(t,n):Cx(e)&&n.preventDefault()},Rx=function(i,a){var e,t;if(i.delegates||(i.delegates={}),!i.delegates[a]&&!i.removed)if(e=Tx(i,a),i.settings.event_root){if(Nx||(Nx={},i.editorManager.on("removeEditor",function(){var e;if(!i.editorManager.activeEditor&&Nx){for(e in Nx)i.dom.unbind(Tx(i,e));Nx=null}})),Nx[a])return;t=function(e){for(var t,n=e.target,r=i.editorManager.get(),o=r.length;o--;)((t=r[o].getBody())===n||Sx.isChildOf(n,t))&&kx(r[o],a,e)},Nx[a]=t,Sx.bind(e,a,t)}else t=function(e){kx(i,a,e)},Sx.bind(e,a,t),i.delegates[a]=t},_x={bindPendingEventDelegates:function(){var t=this;un.each(t._pendingNativeEvents,function(e){Rx(t,e)})},toggleNativeEvent:function(e,t){var n=this;"focus"!==e&&"blur"!==e&&(t?n.initialized?Rx(n,e):n._pendingNativeEvents?n._pendingNativeEvents.push(e):n._pendingNativeEvents=[e]:n.initialized&&(n.dom.unbind(Tx(n,e),e,n.delegates[e]),delete n.delegates[e]))},unbindAllNativeEvents:function(){var e,t=this,n=t.getBody(),r=t.dom;if(t.delegates){for(e in t.delegates)t.dom.unbind(Tx(t,e),e,t.delegates[e]);delete t.delegates}!t.inline&&n&&r&&(n.onload=null,r.unbind(t.getWin()),r.unbind(t.getDoc())),r&&(r.unbind(n),r.unbind(t.getContainer()))}},Ax=_x=un.extend({},cx,_x),Dx=un.each,Ox=un.explode,Px={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},Bx=un.makeMap("alt,ctrl,shift,meta,access"),Mx=function(e){var t=yo(e).dom();return e.dom()===t.activeElement},Ix=function(e){var t=void 0!==e?e.dom():_e.document;return y.from(t.activeElement).map(kr.fromDom)},Lx=function(t){return Ix(yo(t)).filter(function(e){return t.dom().contains(e.dom())})},Fx=function(t,e){return t.dom.getParent(e,function(e){return"true"===t.dom.getContentEditable(e)})},Hx=function(e){return e.collapsed?y.from(hs(e.startContainer,e.startOffset)).map(kr.fromDom):y.none()},zx=function(t,e){return Hx(e).bind(function(e){return di(e)?y.some(e):!1===bo(t,e)?y.some(t):y.none()})},Wx=function(t,e){zx(kr.fromDom(t.getBody()),e).bind(function(e){return Vl.firstPositionIn(e.dom())}).fold(function(){t.selection.normalize()},function(e){return t.selection.setRng(e.toRange())})},Ux=function(t){if(t.setActive)try{t.setActive()}catch(e){t.focus()}else t.focus()},jx=function(e){return Mx(e)||Lx(e).isSome()},Vx=function(e){return e.iframeElement&&Mx(kr.fromDom(e.iframeElement))},qx=function(e){var t=e.getBody();return t&&jx(kr.fromDom(t))},Yx=function(t){var e,n=t.selection,r=t.settings.content_editable,o=t.getBody(),i=n.getRng();if(t.quirks.refreshContentEditable(),e=Fx(t,n.getNode()),t.$.contains(o,e))return Ux(e),Wx(t,i),void Xx(t);void 0!==t.bookmark&&!1===$x(t)&&Gy(t).each(function(e){t.selection.setRng(e),i=e}),r||(Oe.opera||Ux(o),t.getWin().focus()),(Oe.gecko||r)&&(Ux(o),Wx(t,i)),Xx(t)},Xx=function(e){return e.editorManager.setActive(e)},Kx=function(e,t){e.removed||(t?Xx(e):Yx(e))},Gx=$x=function(e){return e.inline?qx(e):Vx(e)},Qx=function(e,t){return parseInt(Zr(t,e),10)},Zx=IO(Jx=function(e,t){return t.dom()[e]},"clientWidth"),ew=IO(Jx,"clientHeight"),tw=IO(Qx,"margin-top"),nw=IO(Qx,"margin-left"),rw=function(e){return e.dom().getBoundingClientRect()},ow=function(e,t,n){var r=Zx(e),o=ew(e);return 0<=t&&0<=n&&t<=r&&n<=o},iw=function(e,t,n,r){var o=rw(t),i=e?o.left+t.dom().clientLeft+nw(t):0,a=e?o.top+t.dom().clientTop+tw(t):0,u=n-i,s=r-a;return{x:u,y:s}},aw=function(e){return y.from(e).map(kr.fromDom)},uw=function(e,t,n){var r=kr.fromDom(e.getBody()),o=e.inline?r:xo(r),i=iw(e.inline,o,t,n);return ow(o,i.x,i.y)},sw=function(e){var t=e.inline?e.getBody():e.getContentAreaContainer();return aw(t).map(function(e){return bo(yo(e),e)}).getOr(!1)},fw={setCode:function(e){e&&(lw=e,this.rtl=!!this.data[e]&&"rtl"===this.data[e]._dir)},getCode:function(){return lw},rtl:!(lw="en"),add:function(e,t){var n,r=cw[e];for(n in r||(cw[e]=r={}),t)r[n]=t[n];this.setCode(e)},translate:function(e){var n,t=cw[lw]||{},r=function(e){return un.is(e,"function")?Object.prototype.toString.call(e):o(e)?"":""+e},o=function(e){return""===e||null===e||un.is(e,"undefined")},i=function(e){return e=r(e),un.hasOwn(t,e)?r(t[e]):e};return o(e)?"":un.is(e,"object")&&un.hasOwn(e,"raw")?r(e.raw):(un.is(e,"array")&&(n=e.slice(1),e=i(e[0]).replace(/\{([0-9]+)\}/g,function(e,t){return un.hasOwn(n,t)?r(n[t]):e})),i(e).replace(/{context:\w+}$/,""))},data:cw={}},dw=tP.PluginManager,mw=function(e,t){var n;for(n in dw.urls)if(dw.urls[n]+"/plugin"+t+".js"===e)return n;return null},gw=function(e,t){var n=mw(t,e.suffix);return n?fw.translate(["Failed to load plugin: {0} from url {1}",n,t]):fw.translate(["Failed to load plugin url: {0}",t])},hw=function(e,t){e.notificationManager.open({type:"error",text:t})},bw={pluginLoadError:function(e,t){pw(e,gw(e,t))},pluginInitError:function(e,t,n){var r=fw.translate(["Failed to initialize plugin: {0}",t]);vw(r,n),pw(e,r)},uploadError:function(e,t){pw(e,fw.translate(["Failed to upload image: {0}",t]))},displayError:pw=function(e,t){e._skinLoaded?hw(e,t):e.on("SkinLoaded",function(){hw(e,t)})},initError:vw=function(e){var t,n,r=[];for(t=1;t<arguments.length;t++)r[t-1]=arguments[t];(n=_e.window.console)&&(n.error?n.error.apply(n,arguments):n.log.apply(n,arguments))}},yw=tP.PluginManager,xw=tP.ThemeManager,ww=function(e){return K.getOrDie("atob")(e)},Cw=function(o){return new he(function(e,t){var n,r=function(){t("Cannot convert "+o+" to Blob. Resource might not exist or is inaccessible.")};try{(n=fP()).open("GET",o,!0),n.responseType="blob",n.onload=function(){200===this.status?e(this.response):r()},n.onerror=r,n.send()}catch(e){r()}})},Nw=function(a){return new he(function(t){var e,n,r,o,i=Sw(a);try{e=ww(i.data)}catch(e){return void t(new _e.Blob([]))}for(o=e.length,n=new(K.getOrDie("Uint8Array"))(o),r=0;r<n.length;r++)n[r]=e.charCodeAt(r);t(new _e.Blob([n],{type:i.type}))})},Tw=function(e){return 0===e.indexOf("blob:")?Cw(e):0===e.indexOf("data:")?Nw(e):null},Ew=function(n){return new he(function(e){var t=new(K.getOrDie("FileReader"));t.onloadend=function(){e(t.result)},t.readAsDataURL(n)})},kw=Sw=function(e){var t,n=decodeURIComponent(e).split(","),r=/data:([^;]+)/.exec(n[0]);return r&&(t=r[1]),{type:t,data:n[1]}},_w=function(e){return(e||"blobid")+Rw++},Aw=function(n,r,o,t){var i,a;0!==r.src.indexOf("blob:")?(i=kw(r.src).data,(a=n.findFirst(function(e){return e.base64()===i}))?o({image:r,blobInfo:a}):Tw(r.src).then(function(e){a=n.create(_w(),e,i),n.add(a),o({image:r,blobInfo:a})},function(e){t(e)})):(a=n.getByUri(r.src))?o({image:r,blobInfo:a}):Tw(r.src).then(function(t){Ew(t).then(function(e){i=kw(e).data,a=n.create(_w(),t,i),n.add(a),o({image:r,blobInfo:a})})},function(e){t(e)})},Dw=function(e){return e?j(e.getElementsByTagName("img")):[]},Ow=Rw=0,Pw=function(){var e=function(){return Math.round(4294967295*Math.random()).toString(36)},t=(new Date).getTime();return"s"+t.toString(36)+e()+e()+e()},Bw={uuid:function(e){return e+Ow+++Pw()}},Mw=function(e,t){return e.hasOwnProperty(t.nodeName)},Iw=function(e,t){return!!Pi.isText(t)||!!Pi.isElement(t)&&!Mw(e,t)&&!mf(t)},Lw=function(t,e,n){return x(Xm(kr.fromDom(n),kr.fromDom(e)),function(e){return Mw(t,e.dom())})},Fw=function(e,t){if(Pi.isText(t)){if(0===t.nodeValue.length)return!0;if(/^\s+$/.test(t.nodeValue)&&(!t.nextSibling||Mw(e,t.nextSibling)))return!0}return!1},Hw=function(e){var t,n,r,o,i,a,u,s,c,l,f=e.settings,d=e.dom,m=e.selection,g=e.schema,h=g.getBlockElements(),p=m.getStart(),v=e.getBody(),b=f.forced_root_block;if(p&&Pi.isElement(p)&&b&&(l=v.nodeName.toLowerCase(),g.isValidChild(l,b.toLowerCase())&&!Lw(h,v,p))){for(n=(t=m.getRng()).startContainer,r=t.startOffset,o=t.endContainer,i=t.endOffset,c=Gx(e),p=v.firstChild;p;)if(Iw(h,p)){if(Fw(h,p)){p=(u=p).nextSibling,d.remove(u);continue}a||(a=d.create(b,e.settings.forced_root_block_attrs),p.parentNode.insertBefore(a,p),s=!0),p=(u=p).nextSibling,a.appendChild(u)}else a=null,p=p.nextSibling;s&&c&&(t.setStart(n,r),t.setEnd(o,i),m.setRng(t),e.nodeChanged())}},zw=function(e){e.settings.forced_root_block&&e.on("NodeChange",IO(Hw,e))},Ww=function(e){var t=e.startContainer,n=e.startOffset;return Pi.isText(t)?0===n?y.some(kr.fromDom(t)):y.none():y.from(t.childNodes[n]).map(kr.fromDom)},Uw=function(e){var t=e.endContainer,n=e.endOffset;return Pi.isText(t)?n===t.data.length?y.some(kr.fromDom(t)):y.none():y.from(t.childNodes[n-1]).map(kr.fromDom)},jw=function(t){return Ao(t).fold(BO([t]),function(e){return[t].concat(jw(e))})},Vw=function(t){return Do(t).fold(BO([t]),function(e){return"br"===Dr(e)?No(e).map(function(e){return[t].concat(Vw(e))}).getOr([]):[t].concat(Vw(e))})},qw=function(o,e){return bs([Ww(e),Uw(e)],function(e,t){var n=S(jw(o),IO(go,e)),r=S(Vw(o),IO(go,t));return n.isSome()&&r.isSome()}).getOr(!1)},$w=function(e,t,n,r){var o=n,i=new JO(n,o),a=e.schema.getNonEmptyElements();do{if(3===n.nodeType&&0!==un.trim(n.nodeValue).length)return void(r?t.setStart(n,0):t.setEnd(n,n.nodeValue.length));if(a[n.nodeName]&&!/^(TD|TH)$/.test(n.nodeName))return void(r?t.setStartBefore(n):"BR"===n.nodeName?t.setEndBefore(n):t.setEndAfter(n));if(Oe.ie&&Oe.ie<11&&e.isBlock(n)&&e.isEmpty(n))return void(r?t.setStart(n,0):t.setEnd(n,0))}while(n=r?i.next():i.prev());"BODY"===o.nodeName&&(r?t.setStart(o,0):t.setEnd(o,o.childNodes.length))},Yw=function(e){var t=e.selection.getSel();return t&&0<t.rangeCount},Xw=function(e){var t,n,r,o;return o=e.getBoundingClientRect(),n=(t=e.ownerDocument).documentElement,r=t.defaultView,{top:o.top+r.pageYOffset-n.clientTop,left:o.left+r.pageXOffset-n.clientLeft}},Kw=function(e){return e.inline?Xw(e.getBody()):{left:0,top:0}},Gw=function(e){var t=e.getBody();return e.inline?{left:t.scrollLeft,top:t.scrollTop}:{left:0,top:0}},Jw=function(e){var t=e.getBody(),n=e.getDoc().documentElement,r={left:t.scrollLeft,top:t.scrollTop},o={left:t.scrollLeft||n.scrollLeft,top:t.scrollTop||n.scrollTop};return e.inline?r:o},Qw=function(e,t){var n,r;return t.target.ownerDocument!==e.getDoc()?(n=Xw(e.getContentAreaContainer()),r=Jw(e),{left:t.pageX-n.left+r.left,top:t.pageY-n.top+r.top}):{left:t.pageX,top:t.pageY}},Zw=function(e,t,n){return{pageX:n.left-e.left+t.left,pageY:n.top-e.top+t.top}},eC=function(e,t){return Zw(Kw(e),Gw(e),Qw(e,t))},tC=Pi.isContentEditableFalse,nC=Pi.isContentEditableTrue,rC=function(e,t){return tC(t)&&t!==e},oC=function(e,t,n){return t!==n&&!e.dom.isChildOf(t,n)&&!tC(t)},iC=function(e){var t=e.cloneNode(!0);return t.removeAttribute("data-mce-selected"),t},aC=function(e,t,n,r){var o,i=t.cloneNode(!0);return e.dom.setStyles(i,{width:n,height:r}),e.dom.setAttrib(i,"data-mce-selected",null),o=e.dom.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"}),e.dom.setStyles(o,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:r}),e.dom.setStyles(i,{margin:0,boxSizing:"border-box"}),o.appendChild(i),o},uC=function(e,t){e.parentNode!==t&&t.appendChild(e)},sC=function(e,t,n,r,o,i){var a=0,u=0;e.style.left=t.pageX+"px",e.style.top=t.pageY+"px",t.pageX+n>o&&(a=t.pageX+n-o),t.pageY+r>i&&(u=t.pageY+r-i),e.style.width=n-a+"px",e.style.height=r-u+"px"},cC=function(e){e&&e.parentNode&&e.parentNode.removeChild(e)},lC=function(e){return 0===e.button},fC=function(e){return e.element},dC=function(e,t){return{pageX:t.pageX-e.relX,pageY:t.pageY+5}},mC=function(i,a){return function(e){var t,n,r,o;lC(e)&&(t=S(a.dom.getParents(e.target),ws(tC,nC)).getOr(null),rC(a.getBody(),t)&&(n=a.dom.getPos(t),r=a.getBody(),o=a.getDoc().documentElement,i.element=t,i.screenX=e.screenX,i.screenY=e.screenY,i.maxX=(a.inline?r.scrollWidth:o.offsetWidth)-2,i.maxY=(a.inline?r.scrollHeight:o.offsetHeight)-2,i.relX=e.pageX-n.x,i.relY=e.pageY-n.y,i.width=t.offsetWidth,i.height=t.offsetHeight,i.ghost=aC(a,t,i.width,i.height)))}},gC=function(r,o){var i=Pe.throttle(function(e,t){o._selectionOverrides.hideFakeCaret(),o.selection.placeCaretAt(e,t)},0);return function(e){var t,n=Math.max(Math.abs(e.screenX-r.screenX),Math.abs(e.screenY-r.screenY));if(fC(r)&&!r.dragging&&10<n){if(o.fire("dragstart",{target:r.element}).isDefaultPrevented())return;r.dragging=!0,o.focus()}r.dragging&&(t=dC(r,eC(o,e)),uC(r.ghost,o.getBody()),sC(r.ghost,t,r.width,r.height,r.maxX,r.maxY),i(e.clientX,e.clientY))}},hC=function(e){var t=e.getSel().getRangeAt(0),n=t.startContainer;return 3===n.nodeType?n.parentNode:n},pC=function(r,o){return function(e){var t,n;r.dragging&&oC(o,hC(o.selection),r.element)&&(t=iC(r.element),(n=o.fire("drop",{targetClone:t,clientX:e.clientX,clientY:e.clientY})).isDefaultPrevented()||(t=n.targetClone,o.undoManager.transact(function(){cC(r.element),o.insertContent(o.dom.getOuterHTML(t)),o._selectionOverrides.hideFakeCaret()}))),bC(r)}},vC=function(e,t){return function(){e.dragging&&t.fire("dragend"),bC(e)}},bC=function(e){e.dragging=!1,e.element=null,cC(e.ghost)},yC=function(e){var t={},n=ya.DOM,r=_e.document,o=mC(t,e),i=gC(t,e),a=pC(t,e),u=vC(t,e);e.on("mousedown",o),e.on("mousemove",i),e.on("mouseup",a),n.bind(r,"mousemove",i),n.bind(r,"mouseup",u),e.on("remove",function(){n.unbind(r,"mousemove",i),n.unbind(r,"mouseup",u)})},xC=function(n){n.on("drop",function(e){var t=void 0!==e.clientX?n.getDoc().elementFromPoint(e.clientX,e.clientY):null;(tC(t)||tC(n.dom.getContentEditableParent(t)))&&e.preventDefault()})},wC=function(e){yC(e),xC(e)},CC=function(t){var e,n=function(e){return Ae(e,function(e){return(e=os(e)).node=t,e})};return Pi.isElement(t)?n(t.getClientRects()):Pi.isText(t)?((e=t.ownerDocument.createRange()).setStart(t,0),e.setEnd(t,t.data.length),n(e.getClientRects())):void 0},SC=function(e){return F(e,function(e,t){return e.concat(CC(t))},[])},(NO=NC||(NC={}))[NO.Up=-1]="Up",NO[NO.Down=1]="Down",TC=function(e,t,n,r){for(;r=tl(r,e,ns,t);)if(n(r))return},kC=function(e,t){return t.line>e},RC=function(e,t){return t.line===e},_C=IO(EC=function(o,i,a,e,u,t){var n,s=0,c=[],r=function(e){var t,n,r;for(r=SC([e]),-1===o&&(r=r.reverse()),t=0;t<r.length;t++)if(n=r[t],!a(n,l)){if(0<c.length&&i(n,Yt.last(c))&&s++,n.line=s,u(n))return!0;c.push(n)}},l=Yt.last(t.getClientRects());return l&&(r(n=t.getNode()),TC(o,e,r,n)),c},NC.Up,ss,cs),AC=IO(EC,NC.Down,cs,ss),DC=function(e,t,n,r){var o,i,a,u,s,c,l=Al(t),f=[],d=0,m=function(e){return Yt.last(e.getClientRects())};c=m(u=1===e?(o=l.next,i=cs,a=ss,Us.after(r)):(o=l.prev,i=ss,a=cs,Us.before(r)));do{if(u.isVisible()&&!a(s=m(u),c)){if(0<f.length&&i(s,Yt.last(f))&&d++,(s=os(s)).position=u,s.line=d,n(s))return f;f.push(s)}}while(u=o(u));return f},OC=function(t){return function(e){return kC(t,e)}},PC=function(t){return function(e){return RC(t,e)}},BC=Pi.isContentEditableFalse,MC=tl,IC=function(e,t){return Math.abs(e.left-t)},LC=function(e,t){return Math.abs(e.right-t)},FC=function(e,t){return e>=t.left&&e<=t.right},HC=function(e,o){return Yt.reduce(e,function(e,t){var n,r;return n=Math.min(IC(e,o),LC(e,o)),r=Math.min(IC(t,o),LC(t,o)),FC(o,t)?t:FC(o,e)?e:r===n&&BC(t.node)?t:r<n?t:e})},zC=function(e,t,n,r){for(;r=MC(r,e,ns,t);)if(n(r))return},WC=function(e,r){var o=[],t=function(t,e){var n;return n=L(SC([e]),function(e){return!t(e,r)}),o=o.concat(n),0===n.length};return o.push(r),zC(NC.Up,e,IO(t,ss),r.node),zC(NC.Down,e,IO(t,cs),r.node),o},UC=function(e){return L(j(e.getElementsByTagName("*")),qc)},jC=function(e,t){return{node:e.node,before:IC(e,t)<LC(e,t)}},VC=function(e,t,n){var r=SC(UC(e)),o=L(r,function(e){return n>=e.top&&n<=e.bottom}),i=HC(o,t);return i&&(i=HC(WC(e,i),t))&&qc(i.node)?jC(i,t):null},qC=function(n,r,e){return!e.collapsed&&F(e.getClientRects(),function(e,t){return e||ls(t,n,r)},!1)},$C=function(t){var e=Ia(function(){var e;t.removed||t.selection.getRng().collapsed&&(e=hb(t,t.selection.getRng(),!1),t.selection.setRng(e))},0);t.on("focus",function(){e.throttle()}),t.on("blur",function(){e.cancel()})},YC={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,END:35,HOME:36,modifierPressed:function(e){return e.shiftKey||e.ctrlKey||e.altKey||this.metaKeyPressed(e)},metaKeyPressed:function(e){return Oe.mac?e.metaKey:e.ctrlKey&&!e.altKey}},XC=Pi.isContentEditableTrue,KC=Pi.isContentEditableFalse,GC=function(e,t){for(var n=e.getBody();t&&t!==n;){if(XC(t)||KC(t))return t;t=t.parentNode}return null},JC=function(g){var h,e=function(e){return g.dom.isBlock(e)},s=g.getBody(),c=jc(g.getBody(),e,function(){return Gx(g)}),p="sel-"+g.dom.uniqueId(),l=function(e){return g.dom.hasClass(e,"mce-offscreen-selection")},f=function(){var e=g.dom.get(p);return e?e.getElementsByTagName("*")[0]:e},d=function(e){e&&g.selection.setRng(e)},m=function(){return g.selection.getRng()},v=function(e,t,n,r){return void 0===r&&(r=!0),g.fire("ShowCaret",{target:t,direction:e,before:n}).isDefaultPrevented()?null:(r&&g.selection.scrollIntoView(t,-1===e),c.show(n,t))},b=function(e,t){return t=ll(e,s,t),-1===e?Us.fromRangeStart(t):Us.fromRangeEnd(t)},t=function(e){e.hasAttribute("data-mce-caret")&&(zu(e),d(m()),g.selection.scrollIntoView(e[0]))},n=function(){var o,i,a,n,r,u;g.on("mouseup",function(e){var t=m();t.collapsed&&uw(g,e.clientX,e.clientY)&&d(gb(g,t,!1))}),g.on("click",function(e){var t;(t=GC(g,e.target))&&(KC(t)&&(e.preventDefault(),g.focus()),XC(t)&&g.dom.isChildOf(t,g.selection.getNode())&&w())}),g.on("blur NewBlock",function(){w()}),g.on("ResizeWindow FullscreenStateChanged",function(){return c.reposition()}),o=function(e){var t,n,r=Al(e);return!!e.firstChild&&(t=Us.before(e.firstChild),(n=r.next(t))&&!Ag(n)&&!Dg(n))},i=function(e,t){var n=g.dom.getParent(e,g.dom.isBlock),r=g.dom.getParent(t,g.dom.isBlock);return n===r},u=!(a=function(e,t){var n=g.dom.getParent(e,g.dom.isBlock),r=g.dom.getParent(t,g.dom.isBlock);return!(!n||!g.dom.isChildOf(n,r)||!1!==KC(GC(g,n)))||n&&!i(n,r)&&o(n)}),(r=g).on("touchstart",function(){u=!1}),r.on("touchmove",function(){u=!0}),r.on("touchend",function(e){var t=GC(r,e.target);KC(t)&&(u||(e.preventDefault(),x(mb(r,t))))}),g.on("mousedown",function(e){var t,n,r,o=e.target;(o===s||"HTML"===o.nodeName||g.dom.isChildOf(o,s))&&!1!==uw(g,e.clientX,e.clientY)&&((t=GC(g,o))?KC(t)?(e.preventDefault(),x(mb(g,t))):(w(),XC(t)&&e.shiftKey||qC(e.clientX,e.clientY,g.selection.getRng())||(C(),g.selection.placeCaretAt(e.clientX,e.clientY))):!1===qc(o)&&(w(),C(),(n=VC(s,e.clientX,e.clientY))&&(a(e.target,n.node)||(e.preventDefault(),r=v(1,n.node,n.before,!1),g.getBody().focus(),d(r)))))}),g.on("keypress",function(e){YC.modifierPressed(e)||(e.keyCode,KC(g.selection.getNode())&&e.preventDefault())}),g.on("getSelectionRange",function(e){var t=e.range;if(h){if(!h.parentNode)return void(h=null);(t=t.cloneRange()).selectNode(h),e.range=t}}),g.on("setSelectionRange",function(e){var t;(t=x(e.range,e.forward))&&(e.range=t)}),n=function(e){return"mcepastebin"===e.id},g.on("AfterSetSelectionRange",function(e){var t=e.range;y(t)||n(t.startContainer.parentNode)||C(),l(t.startContainer.parentNode)||w()}),g.on("copy",function(e){var t,n=e.clipboardData;e.isDefaultPrevented()||!e.clipboardData||Oe.ie||(t=f())&&(e.preventDefault(),n.clearData(),n.setData("text/html",t.outerHTML),n.setData("text/plain",t.outerText))}),wC(g),$C(g)},r=function(){var e=g.contentStyles,t=".mce-content-body";e.push(c.getCss()),e.push(t+" .mce-offscreen-selection {position: absolute;left: -9999999999px;max-width: 1000000px;}"+t+" *[contentEditable=false] {cursor: default;}"+t+" *[contentEditable=true] {cursor: text;}")},o=function(e){return Au(e)||Lu(e)||Fu(e)},y=function(e){return o(e.startContainer)||o(e.endContainer)},x=function(e,t){var n,r,o,i,a,u,s,c,l,f,d=g.$,m=g.dom;if(!e)return null;if(e.collapsed){if(!y(e))if(!1===t){if(c=b(-1,e),qc(c.getNode(!0)))return v(-1,c.getNode(!0),!1,!1);if(qc(c.getNode()))return v(-1,c.getNode(),!c.isAtEnd(),!1)}else{if(c=b(1,e),qc(c.getNode()))return v(1,c.getNode(),!c.isAtEnd(),!1);if(qc(c.getNode(!0)))return v(1,c.getNode(!0),!1,!1)}return null}return i=e.startContainer,a=e.startOffset,u=e.endOffset,3===i.nodeType&&0===a&&KC(i.parentNode)&&(i=i.parentNode,a=m.nodeIndex(i),i=i.parentNode),1!==i.nodeType?null:(u===a+1&&(n=i.childNodes[a]),KC(n)?(l=f=n.cloneNode(!0),(s=g.fire("ObjectSelected",{target:n,targetClone:l})).isDefaultPrevented()?null:(r=tu(kr.fromDom(g.getBody()),"#"+p).fold(function(){return d([])},function(e){return d([e.dom()])}),l=s.targetClone,0===r.length&&(r=d('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>').attr("id",p)).appendTo(g.getBody()),e=g.dom.createRng(),l===f&&Oe.ie?(r.empty().append('<p style="font-size: 0" data-mce-bogus="all"></p>').append(l),e.setStartAfter(r[0].firstChild.firstChild),e.setEndAfter(l)):(r.empty().append("").append(l).append(""),e.setStart(r[0].firstChild,1),e.setEnd(r[0].lastChild,0)),r.css({top:m.getPos(n,g.getBody()).y}),r[0].focus(),(o=g.selection.getSel()).removeAllRanges(),o.addRange(e),I(Ja(kr.fromDom(g.getBody()),"*[data-mce-selected]"),function(e){Gr(e,"data-mce-selected")}),n.setAttribute("data-mce-selected","1"),h=n,C(),e)):null)},w=function(){h&&(h.removeAttribute("data-mce-selected"),tu(kr.fromDom(g.getBody()),"#"+p).each(Ba),h=null),tu(kr.fromDom(g.getBody()),"#"+p).each(Ba),h=null},i=function(){c.destroy(),h=null},C=function(){c.hide()};return Oe.ceFalse&&(n(),r()),{showCaret:v,showBlockCaretContainer:t,hideFakeCaret:C,destroy:i}},QC=function(e){return 0===e.indexOf("data-")||0===e.indexOf("aria-")},ZC=function(e){return e.replace(/<!--|-->/g,"")},eS=function(e,t){return!e.allow_html_data_urls&&(/^data:image\//i.test(t)?!1===e.allow_svg_data_urls&&/^data:image\/svg\+xml/i.test(t):/^data:/i.test(t))},tS=function(e,t,n){var r,o,i,a,u=1;for(a=e.getShortEndedElements(),(i=/<([!?\/])?([A-Za-z0-9\-_\:\.]+)((?:\s+[^"\'>]+(?:(?:"[^"]*")|(?:\'[^\']*\')|[^>]*))*|\/|\s+)>/g).lastIndex=r=n;o=i.exec(t);){if(r=i.lastIndex,"/"===o[1])u--;else if(!o[1]){if(o[2]in a)continue;u++}if(0===u)break}return r},nS=function(e,t){var n,r,o=e.exec(t);return o?(n=o[1],r=o[2],"string"==typeof n&&"data-mce-bogus"===n.toLowerCase()?r:null):null},(gP||(gP={})).findEndTag=tS,rS=gP,oS=function(e,t){var n=new RegExp(["\\s?("+e.join("|")+')="[^"]+"'].join("|"),"gi");return t.replace(n,"")},aS={trimExternal:iS=function(e,t){var n,r,o,i,a,u=t,s=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,c=e.schema;for(u=oS(e.getTempAttrs(),u),a=c.getShortEndedElements();i=s.exec(u);)r=s.lastIndex,o=i[0].length,n=a[i[1]]?r:rS.findEndTag(c,u,r),u=u.substring(0,r-o)+u.substring(n),s.lastIndex=r-o;return Tu(u)},trimInternal:iS},lS=uS=0,fS=cS=2,dS=sS=1,mS=function(g,h){var e=g.length+h.length+2,p=new Array(e),v=new Array(e),i=function(e,t,n){return{start:e,end:t,diag:n}},c=function(e,t,n,r,o){var i,a,u,s=l(e,t,n,r);if(null===s||s.start===t&&s.diag===t-r||s.end===e&&s.diag===e-n)for(i=e,a=n;i<t||a<r;)i<t&&a<r&&g[i]===h[a]?(o.push([uS,g[i]]),++i,++a):r-n<t-e?(o.push([cS,g[i]]),++i):(o.push([sS,h[a]]),++a);else{for(c(e,s.start,n,s.start-s.diag,o),u=s.start;u<s.end;++u)o.push([uS,g[u]]);c(s.end,t,s.end-s.diag,r,o)}},b=function(e,t,n,r){for(var o=e;o-t<r&&o<n&&g[o]===h[o-t];)++o;return i(e,o,t)},l=function(e,t,n,r){var o,i,a,u,s,c,l,f,d=t-e,m=r-n;if(0===d||0===m)return null;for(o=d-m,p[1+(a=((i=m+d)%2==0?i:i+1)/2)]=e,v[1+a]=t+1,u=0;u<=a;++u){for(s=-u;s<=u;s+=2){for(c=s+a,s===-u||s!==u&&p[c-1]<p[c+1]?p[c]=p[c+1]:p[c]=p[c-1]+1,f=(l=p[c])-e+n-s;l<t&&f<r&&g[l]===h[f];)p[c]=++l,++f;if(o%2!=0&&o-u<=s&&s<=o+u&&v[c-o]<=p[c])return b(v[c-o],s+e-n,t,r)}for(s=o-u;s<=o+u;s+=2){for(c=s+a-o,s===o-u||s!==o+u&&v[c+1]<=v[c-1]?v[c]=v[c+1]-1:v[c]=v[c-1],f=(l=v[c]-1)-e+n-s;e<=l&&n<=f&&g[l]===h[f];)v[c]=l--,f--;if(o%2==0&&-u<=s&&s<=u&&v[c]<=p[c+o])return b(v[c],s+e-n,t,r)}}},t=[];return c(0,g.length,0,h.length,t),t},gS=function(e){return Pi.isElement(e)?e.outerHTML:Pi.isText(e)?Zi.encodeRaw(e.data,!1):Pi.isComment(e)?"\x3c!--"+e.data+"--\x3e":""},hS=function(e){var t,n,r;for(r=_e.document.createElement("div"),t=_e.document.createDocumentFragment(),e&&(r.innerHTML=e);n=r.firstChild;)t.appendChild(n);return t},pS=function(e,t,n){var r,o=hS(t);e.hasChildNodes()&&n<e.childNodes.length?(r=e.childNodes[n]).parentNode.insertBefore(o,r):e.appendChild(o)},vS=function(e,t){if(e.hasChildNodes()&&t<e.childNodes.length){var n=e.childNodes[t];n.parentNode.removeChild(n)}},bS=function(e,t){var n=0;I(e,function(e){e[0]===lS?n++:e[0]===dS?(pS(t,e[1],n),n++):e[0]===fS&&vS(t,n)})},yS=function(e){return L(Ae(j(e.childNodes),gS),function(e){return 0<e.length})},xS=function(e,t){var n=Ae(j(t.childNodes),gS);return bS(mS(n,e),t),t},wS=Fa(y.none()),CS=function(){return wS.get().getOrThunk(function(){var e=_e.document.implementation.createHTMLDocument("undo");return wS.set(y.some(e)),e})},SS=function(e){return-1!==e.indexOf("</iframe>")},ES=function(n){var e,t,r;return e=yS(n.getBody()),t=(r=R(e,function(e){var t=aS.trimInternal(n.serializer,e);return 0<t.length?[t]:[]})).join(""),SS(t)?NS(r):TS(t)},kS=function(e){return"fragmented"===e.type?e.fragments.join(""):e.content},RS=function(e){var t=kr.fromTag("body",CS());return wu(t,kS(e)),I(Ja(t,"*[data-mce-bogus]"),Ma),xu(t)},_S=function(e,t){return kS(e)===kS(t)},AS=function(e,t){return RS(e)===RS(t)},NS=function(e){return{type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}},TS=function(e){return{type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}},DS=ES,OS=function(e,t,n){"fragmented"===t.type?xS(t.fragments,e.getBody()):e.setContent(t.content,{format:"raw"}),e.selection.moveToBookmark(n?t.beforeBookmark:t.bookmark)},PS=function(e,t){return!(!e||!t)&&(!!_S(e,t)||AS(e,t))},BS={},MS=Yt.filter,IS=Yt.each,LS=function(e,t){IS(BS[e],function(e){e(t)})},_O=function(e){var t,n=e.selection.getRng(),r=function(e){return i(e.previousSibling)&&-1!==Yt.indexOf(t,e.previousSibling)},o=function(e,t){kn(t).remove(),kn(e).append("<br><br>").append(t.childNodes)},i=Pi.matchNodeNames("pre");n.collapsed||(t=e.selection.getSelectedBlocks(),IS(MS(MS(t,i),r),function(e){o(e.previousSibling,e)}))},BS[RO="pre"]||(BS[RO]=[]),BS[RO].push(_O),FS=LS,HS=/^(src|href|style)$/,zS=un.each,WS=yf.isEq,US=function(e){return/^(TH|TD)$/.test(e.nodeName)},jS=function(e,t,n){return e.isChildOf(t,n)&&t!==n&&!e.isBlock(n)},VS=function(e,t,n){var r,o,i;return r=t[n?"startContainer":"endContainer"],o=t[n?"startOffset":"endOffset"],Pi.isElement(r)&&(i=r.childNodes.length-1,!n&&o&&o--,r=r.childNodes[i<o?i:o]),Pi.isText(r)&&n&&o>=r.nodeValue.length&&(r=new JO(r,e.getBody()).next()||r),Pi.isText(r)&&!n&&0===o&&(r=new JO(r,e.getBody()).prev()||r),r},qS=function(e,t,n,r){var o=e.create(n,r);return t.parentNode.insertBefore(o,t),o.appendChild(t),o},$S=function(e,t,n,r,o){var i=kr.fromDom(t),a=kr.fromDom(e.create(r,o)),u=n?ko(i):Eo(i);return Oa(a,u),n?(Ea(i,a),Ra(a,i)):(ka(i,a),_a(a,i)),a.dom()},YS=function(e,t,n){return!!WS(t,n.inline)||!!WS(t,n.block)||(n.selector?Pi.isElement(t)&&e.is(t,n.selector):void 0)},XS=function(e,t){return t.links&&"A"===e.tagName},KS=function(e,t,n,r){return!(t=yf.getNonWhiteSpaceSibling(t,n,r))||"BR"===t.nodeName||e.isBlock(t)},GS=function(t,e,n){var r,o=e.parentNode,i=t.dom,a=t.settings.forced_root_block;n.block&&(a?o===i.getRoot()&&(n.list_block&&WS(e,n.list_block)||zS(un.grep(e.childNodes),function(e){yf.isValid(t,a,e.nodeName.toLowerCase())?r?r.appendChild(e):(r=qS(i,e,a),i.setAttribs(r,t.settings.forced_root_block_attrs)):r=0})):i.isBlock(e)&&!i.isBlock(o)&&(KS(i,e,!1)||KS(i,e.firstChild,!0,1)||e.insertBefore(i.create("br"),e.firstChild),KS(i,e,!0)||KS(i,e.lastChild,!1,1)||e.appendChild(i.create("br")))),n.selector&&n.inline&&!WS(n.inline,e)||i.remove(e,1)},QS=function(n,e,r,o,i){var a;return zS(yf.getParents(n.dom,e.parentNode).reverse(),function(e){var t;a||"_start"===e.id||"_end"===e.id||(t=Mv.matchNode(n,e,r,o,i))&&!1!==t.split&&(a=e)}),a},ZS=function(e,t,n,r,o,i,a,u){var s,c,l,f,d,m,g=e.dom;if(n){for(m=n.parentNode,s=r.parentNode;s&&s!==m;s=s.parentNode){for(c=g.clone(s,!1),d=0;d<t.length;d++)if(JS(e,t[d],u,c,c)){c=0;break}c&&(l&&c.appendChild(l),f||(f=c),l=c)}!i||a.mixed&&g.isBlock(n)||(r=g.split(n,r)),l&&(o.parentNode.insertBefore(l,o),f.appendChild(o))}return r},eN=function(a,n,u,e,r){var t,o,i,s,c=a.formatter.get(n),l=c[0],f=!0,d=a.dom,m=a.selection,g=function(e){var t=QS(a,e,n,u,r);return ZS(a,c,t,e,e,!0,l,u)},h=function(e){return mf(e)&&Pi.isElement(e)&&("_start"===e.id||"_end"===e.id)},p=function(e){var t,n,r,o,i;if(Pi.isElement(e)&&d.getContentEditable(e)&&(o=f,f="true"===d.getContentEditable(e),i=!0),t=un.grep(e.childNodes),f&&!i)for(n=0,r=c.length;n<r&&!JS(a,c[n],u,e,e);n++);if(l.deep&&t.length){for(n=0,r=t.length;n<r;n++)p(t[n]);i&&(f=o)}},v=function(e){var t=d.get(e?"_start":"_end"),n=t[e?"firstChild":"lastChild"];return h(n)&&(n=n[e?"firstChild":"lastChild"]),Pi.isText(n)&&0===n.data.length&&(n=e?t.previousSibling||t.nextSibling:t.nextSibling||t.previousSibling),d.remove(t,!0),n},b=function(e){var t,n,r,o=e.commonAncestorContainer;if(e=Pf(a,e,c,!0),l.split){if(e=Lv(e),(t=VS(a,e,!0))!==(n=VS(a,e))){if(/^(TR|TH|TD)$/.test(t.nodeName)&&t.firstChild&&(t="TR"===t.nodeName?t.firstChild.firstChild||t:t.firstChild||t),o&&/^T(HEAD|BODY|FOOT|R)$/.test(o.nodeName)&&US(n)&&n.firstChild&&(n=n.firstChild||n),jS(d,t,n))return r=y.from(t.firstChild).getOr(t),g($S(d,r,!0,"span",{id:"_start","data-mce-type":"bookmark"})),void v(!0);if(jS(d,n,t))return r=y.from(n.lastChild).getOr(n),g($S(d,r,!1,"span",{id:"_end","data-mce-type":"bookmark"})),void v(!1);t=qS(d,t,"span",{id:"_start","data-mce-type":"bookmark"}),n=qS(d,n,"span",{id:"_end","data-mce-type":"bookmark"}),g(t),g(n),t=v(!0),n=v()}else t=n=g(t);e.startContainer=t.parentNode?t.parentNode:t,e.startOffset=d.nodeIndex(t),e.endContainer=n.parentNode?n.parentNode:n,e.endOffset=d.nodeIndex(n)+1}If(d,e,function(e){zS(e,function(e){p(e),Pi.isElement(e)&&"underline"===a.dom.getStyle(e,"text-decoration")&&e.parentNode&&"underline"===yf.getTextDecoration(d,e.parentNode)&&JS(a,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:"underline"}},null,e)})})};if(e)e.nodeType?((o=d.createRng()).setStartBefore(e),o.setEndAfter(e),b(o)):b(e);else if("false"!==d.getContentEditable(m.getNode()))m.isCollapsed()&&l.inline&&!d.select("td[data-mce-selected],th[data-mce-selected]").length?Qv(a,n,u,r):(t=wc.getPersistentBookmark(a.selection,!0),b(m.getRng()),m.moveToBookmark(t),l.inline&&Mv.match(a,n,u,m.getStart())&&yf.moveStart(d,m,m.getRng()),a.nodeChanged());else for(e=m.getNode(),i=0,s=c.length;i<s&&(!c[i].ceFalseOverride||!JS(a,c[i],u,e,e));i++);},tN=JS=function(e,n,r,o,i){var t,a,u,s,c=e.dom;if(!YS(c,o,n)&&!XS(o,n))return!1;if("all"!==n.remove)for(zS(n.styles,function(e,t){e=yf.normalizeStyleValue(c,yf.replaceVars(e,r),t),"number"==typeof t&&(t=e,i=0),(n.remove_similar||!i||WS(yf.getStyle(c,i,t),e))&&c.setStyle(o,t,""),u=1}),u&&""===c.getAttrib(o,"style")&&(o.removeAttribute("style"),o.removeAttribute("data-mce-style")),zS(n.attributes,function(e,t){var n;if(e=yf.replaceVars(e,r),"number"==typeof t&&(t=e,i=0),!i||WS(c.getAttrib(i,t),e)){if("class"===t&&(e=c.getAttrib(o,t))&&(n="",zS(e.split(/\s+/),function(e){/mce\-\w+/.test(e)&&(n+=(n?" ":"")+e)}),n))return void c.setAttrib(o,t,n);"class"===t&&o.removeAttribute("className"),HS.test(t)&&o.removeAttribute("data-mce-"+t),o.removeAttribute(t)}}),zS(n.classes,function(e){e=yf.replaceVars(e,r),i&&!c.hasClass(i,e)||c.removeClass(o,e)}),a=c.getAttribs(o),t=0;t<a.length;t++)if(0!==(s=a[t].nodeName).indexOf("_")&&0!==s.indexOf("data-"))return!1;return"none"!==n.remove?(GS(e,o,n),!0):void 0},nN=eN,rN=un.each,oN=function(e){return e&&1===e.nodeType&&!mf(e)&&!Sc(e)&&!Pi.isBogus(e)},iN=function(e,t){var n;for(n=e;n;n=n[t]){if(3===n.nodeType&&0!==n.nodeValue.length)return e;if(1===n.nodeType&&!mf(n))return n}return e},aN=function(e,t,n){var r,o,i=new hd(e);if(t&&n&&(t=iN(t,"previousSibling"),n=iN(n,"nextSibling"),i.compare(t,n))){for(r=t.nextSibling;r&&r!==n;)r=(o=r).nextSibling,t.appendChild(o);return e.remove(n),un.each(un.grep(n.childNodes),function(e){t.appendChild(e)}),t}return n},uN=function(e,t,n){rN(e.childNodes,function(e){oN(e)&&(t(e)&&n(e),e.hasChildNodes()&&uN(e,t,n))})},sN=function(n,e){return IO(function(e,t){return!(!t||!yf.getStyle(n,t,e))},e)},cN=function(r,e,t){return IO(function(e,t,n){r.setStyle(n,e,t),""===n.getAttribute("style")&&n.removeAttribute("style"),lN(r,n)},e,t)},lN=function(e,t){"SPAN"===t.nodeName&&0===e.getAttribs(t).length&&e.remove(t,!0)},fN=function(e,t){var n;1===t.nodeType&&t.parentNode&&1===t.parentNode.nodeType&&(n=yf.getTextDecoration(e,t.parentNode),e.getStyle(t,"color")&&n?e.setStyle(t,"text-decoration",n):e.getStyle(t,"text-decoration")===n&&e.setStyle(t,"text-decoration",null))},dN=function(r,e,t){if(e.clear_child_styles){var n=e.links?"*:not(a)":"*";rN(r.select(n,t),function(n){oN(n)&&rN(e.styles,function(e,t){r.setStyle(n,t,"")})})}},mN=function(n,e,r,o){rN(e,function(t){rN(n.dom.select(t.inline,o),function(e){oN(e)&&tN(n,t,r,e,t.exact?e:null)}),dN(n.dom,t,o)})},gN=function(e,t,n,r){(t.styles.color||t.styles.textDecoration)&&(un.walk(r,IO(fN,e),"childNodes"),fN(e,r))},hN=function(e,t,n,r){t.styles&&t.styles.backgroundColor&&uN(r,sN(e,"fontSize"),cN(e,"backgroundColor",yf.replaceVars(t.styles.backgroundColor,n)))},pN=function(e,t,n,r){"sub"!==t.inline&&"sup"!==t.inline||(uN(r,sN(e,"fontSize"),cN(e,"fontSize","")),e.remove(e.select("sup"===t.inline?"sub":"sup",r),!0))},vN=function(e,t,n,r){r&&!1!==t.merge_siblings&&(r=aN(e,yf.getNonWhiteSpaceSibling(r),r),r=aN(e,r,yf.getNonWhiteSpaceSibling(r,!0)))},bN=function(t,n,r,o,i){Mv.matchNode(t,i.parentNode,r,o)&&tN(t,n,o,i)||n.merge_with_parents&&t.dom.getParent(i.parentNode,function(e){if(Mv.matchNode(t,e,r,o))return tN(t,n,o,i),!0})},yN=un.each,xN=function(e){return e&&1===e.nodeType&&!mf(e)&&!Sc(e)&&!Pi.isBogus(e)},CN={applyFormat:wN=function(g,h,p,r){var e,t,n,o,i,v=g.formatter.get(h),b=v[0],a=!r&&g.selection.isCollapsed(),u=g.dom,s=g.selection,y=function(n,e){if(e=e||b,n){if(e.onformat&&e.onformat(n,e,p,r),yN(e.styles,function(e,t){u.setStyle(n,t,yf.replaceVars(e,p))}),e.styles){var t=u.getAttrib(n,"style");t&&n.setAttribute("data-mce-style",t)}yN(e.attributes,function(e,t){u.setAttrib(n,t,yf.replaceVars(e,p))}),yN(e.classes,function(e){e=yf.replaceVars(e,p),u.hasClass(n,e)||u.addClass(n,e)})}},x=function(e,t){var n=!1;return!!b.selector&&(yN(e,function(e){if(!("collapsed"in e&&e.collapsed!==a))return u.is(t,e.selector)&&!Sc(t)?(y(t,e),!(n=!0)):void 0}),n)},c=function(s,e,t,c){var l=[],f=!0,d=b.inline||b.block,m=s.create(d);y(m),If(s,e,function(e){var a,u=function(e){var t,n,r=f,o=e.nodeName.toLowerCase(),i=e.parentNode.nodeName.toLowerCase();return 1===e.nodeType&&s.getContentEditable(e)&&(r=f,f="true"===s.getContentEditable(e),t=!0),yf.isEq(o,"br")?(a=0,void(b.block&&s.remove(e))):b.wrapper&&Mv.matchNode(g,e,h,p)?void(a=0):f&&!t&&b.block&&!b.wrapper&&yf.isTextBlock(g,o)&&yf.isValid(g,i,d)?(e=s.rename(e,d),y(e),l.push(e),void(a=0)):void(b.selector&&(n=x(v,e),!b.inline||n)?a=0:!f||t||!yf.isValid(g,d,o)||!yf.isValid(g,i,d)||!c&&3===e.nodeType&&1===e.nodeValue.length&&65279===e.nodeValue.charCodeAt(0)||Sc(e)||b.inline&&s.isBlock(e)?(a=0,yN(un.grep(e.childNodes),u),t&&(f=r),a=0):(a||(a=s.clone(m,!1),e.parentNode.insertBefore(a,e),l.push(a)),a.appendChild(e)))};yN(e,u)}),!0===b.links&&yN(l,function(e){var t=function(e){"A"===e.nodeName&&y(e,b),yN(un.grep(e.childNodes),t)};t(e)}),yN(l,function(e){var t=function(e){var t=0;return yN(e.childNodes,function(e){yf.isWhiteSpaceNode(e)||mf(e)||t++}),t},r=function(e){var t=!1;return yN(e.childNodes,function(e){if(xN(e))return t=e,!1}),t},n=function(e){var t,n;return(t=r(e))&&!mf(t)&&Mv.matchName(s,t,b)&&(n=s.clone(t,!1),y(n),s.replace(n,e,!0),s.remove(t,1)),n||e},o=t(e);!(1<l.length)&&s.isBlock(e)||0!==o?(b.inline||b.wrapper)&&(b.exact||1!==o||(e=n(e)),mN(g,v,p,e),bN(g,b,h,p,e),hN(s,b,p,e),pN(s,b,p,e),vN(s,b,p,e)):s.remove(e,1)})};if("false"!==u.getContentEditable(s.getNode()))b&&(r?r.nodeType?x(v,r)||((t=u.createRng()).setStartBefore(r),t.setEndAfter(r),c(u,Pf(g,t,v),null,!0)):c(u,r,null,!0):a&&b.inline&&!u.select("td[data-mce-selected],th[data-mce-selected]").length?Jv(g,h,p):(i=g.selection.getNode(),g.settings.forced_root_block||!v[0].defaultBlock||u.getParent(i,u.isBlock)||wN(g,v[0].defaultBlock),g.selection.setRng(Sd(g.selection.getRng())),e=wc.getPersistentBookmark(g.selection,!0),c(u,Pf(g,s.getRng(),v),e),b.styles&&gN(u,b,p,i),s.moveToBookmark(e),yf.moveStart(u,s,s.getRng()),g.nodeChanged()),FS(h,g));else for(r=s.getNode(),n=0,o=v.length;n<o;n++)if(v[n].ceFalseOverride&&u.is(r,v[n].selector))return void y(r,v[n])}},SN=un.each,NN=function(e,i){var a={};e.set({}),i.on("NodeChange",function(n){var r=yf.getParents(i.dom,n.element),o={};r=un.grep(r,function(e){return 1===e.nodeType&&!e.getAttribute("data-mce-bogus")}),SN(e.get(),function(e,n){SN(r,function(t){return i.formatter.matchNode(t,n,{},e.similar)?(a[n]||(SN(e,function(e){e(!0,{node:t,format:n,parents:r})}),a[n]=e),o[n]=e,!1):!Mv.matchesUnInheritedFormatSelector(i,t,n)&&void 0})}),SN(a,function(e,t){o[t]||(delete a[t],SN(e,function(e){e(!1,{node:n.element,format:t,parents:r})}))})})},TN=function(e,t,n,r){var o=e.get();SN(t.split(","),function(e){o[e]||(o[e]=[],o[e].similar=r),o[e].push(n)}),e.set(o)},EN=function(e,t,n,r,o){null===t.get()&&NN(t,e),TN(t,n,r,o)},kN={get:function(r){var t={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"left"},inherit:!1,preview:!1,defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"justify"},inherit:!1,defaultBlock:"div",preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(){return!0},onformat:function(n,e,t){un.each(t,function(e,t){r.setAttrib(n,t,e)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return un.each("p h1 h2 h3 h4 h5 h6 div address pre div dt dd samp".split(/\s/),function(e){t[e]={block:e,remove:"all"}}),t}},RN=un.each,_N=ya.DOM,AN=function(e,t){var n,r,o,i=t&&t.schema||QO({}),a=function(e,t){t.classes.length&&_N.addClass(e,t.classes.join(" ")),_N.setAttribs(e,t.attrs)},s=function(e){var t;return r="string"==typeof e?{name:e,classes:[],attrs:{}}:e,t=_N.create(r.name),a(t,r),t},c=function(e,t){var n="string"!=typeof e?e.nodeName.toLowerCase():e,r=i.getElementRule(n),o=r&&r.parentsRequired;return!(!o||!o.length)&&(t&&-1!==un.inArray(o,t)?t:o[0])},l=function(n,e,t){var r,o,i=0<e.length&&e[0],a=i&&i.name,u=c(n,a);if(u)a===u?(o=e[0],e=e.slice(1)):o=u;else if(i)o=e[0],e=e.slice(1);else if(!t)return n;return o&&(r=s(o)).appendChild(n),t&&(r||(r=_N.create("div")).appendChild(n),un.each(t,function(e){var t=s(e);r.insertBefore(t,n)})),l(r,e,o&&o.siblings)};return e&&e.length?(r=e[0],n=s(r),(o=_N.create("div")).appendChild(l(n,e.slice(1),r.siblings)),o):""},DN=function(e){var t,a={classes:[],attrs:{}};return"*"!==(e=a.selector=un.trim(e))&&(t=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,function(e,t,n,r,o){switch(t){case"#":a.attrs.id=n;break;case".":a.classes.push(n);break;case":":-1!==un.inArray("checked disabled enabled read-only required".split(" "),n)&&(a.attrs[n]=n)}if("["===r){var i=o.match(/([\w\-]+)(?:\=\"([^\"]+))?/);i&&(a.attrs[i[1]]=i[2])}return""})),a.name=t||"div",a},PN=function(n,e){var t,r,o,i,a,u,s="",c=n.settings.preview_styles;if(!1===c)return"";if("string"!=typeof c&&(c="font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"),u=function(e){return e.replace(/%(\w+)/g,"")},"string"==typeof e){if(!(e=n.formatter.get(e)))return;e=e[0]}return"preview"in e&&!1===(c=e.preview)?"":(t=e.block||e.inline||"span",r=(i=ON(e.selector)).length?(i[0].name||(i[0].name=t),t=e.selector,AN(i,n)):AN([t],n),o=_N.select(t,r)[0]||r.firstChild,RN(e.styles,function(e,t){(e=u(e))&&_N.setStyle(o,t,e)}),RN(e.attributes,function(e,t){(e=u(e))&&_N.setAttrib(o,t,e)}),RN(e.classes,function(e){e=u(e),_N.hasClass(o,e)||_N.addClass(o,e)}),n.fire("PreviewFormats"),_N.setStyles(r,{position:"absolute",left:-65535}),n.getBody().appendChild(r),a=_N.getStyle(n.getBody(),"fontSize",!0),a=/px$/.test(a)?parseInt(a,10):0,RN(c.split(" "),function(e){var t=_N.getStyle(o,e,!0);if(!("background-color"===e&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(t)&&(t=_N.getStyle(n.getBody(),e,!0),"#ffffff"===_N.toHex(t).toLowerCase())||"color"===e&&"#000000"===_N.toHex(t).toLowerCase())){if("font-size"===e&&/em|%$/.test(t)){if(0===a)return;t=parseFloat(t)/(/%$/.test(t)?100:1)*a+"px"}"border"===e&&t&&(s+="padding:0 2px;"),s+=e+":"+t+";"}}),n.fire("AfterPreviewFormats"),_N.remove(r),s)},ON=function(e){return e&&"string"==typeof e?(e=(e=e.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),un.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),function(e){var t=un.map(e.split(/(?:~\+|~|\+)/),DN),n=t.pop();return t.length&&(n.siblings=t),n}).reverse()):[]},BN=function(e,t,n,r,o){var i=t.get(n);!Mv.match(e,n,r,o)||"toggle"in i[0]&&!i[0].toggle?CN.applyFormat(e,n,r,o):nN(e,n,r,o)},MN=function(e){e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(var t=1;t<=6;t++)e.addShortcut("access+"+t,"",["FormatBlock",!1,"h"+t]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])},IN=Object.prototype.hasOwnProperty,kO=function(e,t){return t},LN=function(){var e,t,n,r,o,i=new Array(arguments.length);for(e=0;e<i.length;e++)i[e]=arguments[e];if(0===i.length)throw new Error("Can't merge zero objects");for(t={},n=0;n<i.length;n++)for(o in r=i[n])IN.call(r,o)&&(t[o]=kO(t[o],r[o]));return t},FN={register:function(t,s,c){t.addAttributeFilter("data-mce-tabindex",function(e,t){for(var n,r=e.length;r--;)(n=e[r]).attr("tabindex",n.attributes.map["data-mce-tabindex"]),n.attr(t,null)}),t.addAttributeFilter("src,href,style",function(e,t){for(var n,r,o=e.length,i="data-mce-"+t,a=s.url_converter,u=s.url_converter_scope;o--;)void 0!==(r=(n=e[o]).attributes.map[i])?(n.attr(t,0<r.length?r:null),n.attr(i,null)):(r=n.attributes.map[t],"style"===t?r=c.serializeStyle(c.parseStyle(r),n.name):a&&(r=a.call(u,r,t,n.name)),n.attr(t,0<r.length?r:null))}),t.addAttributeFilter("class",function(e){for(var t,n,r=e.length;r--;)(n=(t=e[r]).attr("class"))&&(n=t.attr("class").replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),t.attr("class",0<n.length?n:null))}),t.addAttributeFilter("data-mce-type",function(e,t,n){for(var r,o=e.length;o--;)"bookmark"!==(r=e[o]).attributes.map["data-mce-type"]||n.cleanup||(y.from(r.firstChild).exists(function(e){return!Su(e.value)})?r.unwrap():r.remove())}),t.addNodeFilter("noscript",function(e){for(var t,n=e.length;n--;)(t=e[n].firstChild)&&(t.value=Zi.decode(t.value))}),t.addNodeFilter("script,style",function(e,t){for(var n,r,o,i=e.length,a=function(e){return e.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")};i--;)r=(n=e[i]).firstChild?n.firstChild.value:"","script"===t?((o=n.attr("type"))&&n.attr("type","mce-no/type"===o?null:o.replace(/^mce\-/,"")),"xhtml"===s.element_format&&0<r.length&&(n.firstChild.value="// <![CDATA[\n"+a(r)+"\n// ]]>")):"xhtml"===s.element_format&&0<r.length&&(n.firstChild.value="\x3c!--\n"+a(r)+"\n--\x3e")}),t.addNodeFilter("#comment",function(e){for(var t,n=e.length;n--;)0===(t=e[n]).value.indexOf("[CDATA[")?(t.name="#cdata",t.type=4,t.value=t.value.replace(/^\[CDATA\[|\]\]$/g,"")):0===t.value.indexOf("mce:protected ")&&(t.name="#text",t.type=3,t.raw=!0,t.value=unescape(t.value).substr(14))}),t.addNodeFilter("xml:namespace,input",function(e,t){for(var n,r=e.length;r--;)7===(n=e[r]).type?n.remove():1===n.type&&("input"!==t||"type"in n.attributes.map||n.attr("type","text"))}),t.addAttributeFilter("data-mce-type",function(e){I(e,function(e){"format-caret"===e.attr("data-mce-type")&&(e.isEmpty(t.schema.getNonEmptyElements())?e.remove():e.unwrap())})}),t.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-type,data-mce-resize",function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)})},trimTrailingBr:function(e){var t,n=function(e){return e&&"br"===e.name},r=e.lastChild;n(r)&&n(t=r.prev)&&(r.remove(),t.remove())}},HN=function(e,t,n){var r,o,i,a=e.dom;return t=t.cloneNode(!0),(r=_e.document.implementation).createHTMLDocument&&(o=r.createHTMLDocument(""),un.each("BODY"===t.nodeName?t.childNodes:[t],function(e){o.body.appendChild(o.importNode(e,!0))}),t="BODY"!==t.nodeName?o.body.firstChild:o.body,i=a.doc,a.doc=o),lx(e,LN(n,{node:t})),i&&(a.doc=i),t},zN=function(e,t){return e&&e.hasEventListeners("PreProcess")&&!t.no_events},WN={process:function(e,t,n){return zN(e,n)?HN(e,t,n):t}},UN=function(t,e){I(e,function(e){t.attr(e,null)})},jN=function(e,i,a){e.addNodeFilter("font",function(e){I(e,function(e){var t=i.parse(e.attr("style")),n=e.attr("color"),r=e.attr("face"),o=e.attr("size");n&&(t.color=n),r&&(t["font-family"]=r),o&&(t["font-size"]=a[parseInt(e.attr("size"),10)-1]),e.name="span",e.attr("style",i.serialize(t)),UN(e,["color","face","size"])})})},VN=function(e,n){e.addNodeFilter("strike",function(e){I(e,function(e){var t=n.parse(e.attr("style"));t["text-decoration"]="line-through",e.name="span",e.attr("style",n.serialize(t))})})},qN=function(e,t){var n=ZO();t.convert_fonts_to_spans&&jN(e,n,un.explode(t.font_size_legacy_values)),VN(e,n)},$N={register:function(e,t){t.inline_styles&&qN(e,t)}},YN=/^[ \t\r\n]*$/,XN={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},KN=function(e,t,n){var r,o,i=n?"lastChild":"firstChild",a=n?"prev":"next";if(e[i])return e[i];if(e!==t){if(r=e[a])return r;for(o=e.parent;o&&o!==t;o=o.parent)if(r=o[a])return r}},GN=function(){function u(e,t){this.name=e,1===(this.type=t)&&(this.attributes=[],this.attributes.map={})}return u.create=function(e,t){var n,r;if(n=new u(e,XN[e]||1),t)for(r in t)n.attr(r,t[r]);return n},u.prototype.replace=function(e){return e.parent&&e.remove(),this.insert(e,this),this.remove(),this},u.prototype.attr=function(e,t){var n,r,o=this;if("string"!=typeof e){for(r in e)o.attr(r,e[r]);return o}if(n=o.attributes){if(void 0===t)return n.map[e];if(null===t){if(e in n.map)for(delete n.map[e],r=n.length;r--;)if(n[r].name===e)return n=n.splice(r,1),o;return o}if(e in n.map){for(r=n.length;r--;)if(n[r].name===e){n[r].value=t;break}}else n.push({name:e,value:t});return n.map[e]=t,o}},u.prototype.clone=function(){var e,t,n,r,o,i=this,a=new u(i.name,i.type);if(n=i.attributes){for((o=[]).map={},e=0,t=n.length;e<t;e++)"id"!==(r=n[e]).name&&(o[o.length]={name:r.name,value:r.value},o.map[r.name]=r.value);a.attributes=o}return a.value=i.value,a.shortEnded=i.shortEnded,a},u.prototype.wrap=function(e){return this.parent.insert(e,this),e.append(this),this},u.prototype.unwrap=function(){var e,t,n=this;for(e=n.firstChild;e;)t=e.next,n.insert(e,n,!0),e=t;n.remove()},u.prototype.remove=function(){var e=this.parent,t=this.next,n=this.prev;return e&&(e.firstChild===this?(e.firstChild=t)&&(t.prev=null):n.next=t,e.lastChild===this?(e.lastChild=n)&&(n.next=null):t.prev=n,this.parent=this.next=this.prev=null),this},u.prototype.append=function(e){var t,n=this;return e.parent&&e.remove(),(t=n.lastChild)?((t.next=e).prev=t,n.lastChild=e):n.lastChild=n.firstChild=e,e.parent=n,e},u.prototype.insert=function(e,t,n){var r;return e.parent&&e.remove(),r=t.parent||this,n?(t===r.firstChild?r.firstChild=e:t.prev.next=e,e.prev=t.prev,(e.next=t).prev=e):(t===r.lastChild?r.lastChild=e:t.next.prev=e,e.next=t.next,(e.prev=t).next=e),e.parent=r,e},u.prototype.getAll=function(e){var t,n=this,r=[];for(t=n.firstChild;t;t=KN(t,n))t.name===e&&r.push(t);return r},u.prototype.empty=function(){var e,t,n,r=this;if(r.firstChild){for(e=[],n=r.firstChild;n;n=KN(n,r))e.push(n);for(t=e.length;t--;)(n=e[t]).parent=n.firstChild=n.lastChild=n.next=n.prev=null}return r.firstChild=r.lastChild=null,r},u.prototype.isEmpty=function(e,t,n){var r,o,i=this,a=i.firstChild;if(t=t||{},a)do{if(1===a.type){if(a.attributes.map["data-mce-bogus"])continue;if(e[a.name])return!1;for(r=a.attributes.length;r--;)if("name"===(o=a.attributes[r].name)||0===o.indexOf("data-mce-bookmark"))return!1}if(8===a.type)return!1;if(3===a.type&&!YN.test(a.value))return!1;if(3===a.type&&a.parent&&t[a.parent.name]&&YN.test(a.value))return!1;if(n&&n(a))return!1}while(a=KN(a,i));return!0},u.prototype.walk=function(e){return KN(this,null,e)},u}(),JN=function(e,t,n,r){(e.padd_empty_with_br||t.insert)&&n[r.name]?r.empty().append(new GN("br",1)).shortEnded=!0:r.empty().append(new GN("#text",3)).value=""},QN=function(e){return ZN(e,"#text")&&""===e.firstChild.value},ZN=function(e,t){return e&&e.firstChild&&e.firstChild===e.lastChild&&e.firstChild.name===t},eT=function(e,t){var n=e.getElementRule(t.name);return n&&n.paddEmpty},tT=function(t,e,n,r){return r.isEmpty(e,n,function(e){return eT(t,e)})},nT=function(e,t){return e&&(t[e.name]||"br"===e.name)},rT=function(e,h){var p=e.schema;h.remove_trailing_brs&&e.addNodeFilter("br",function(e,t,n){var r,o,i,a,u,s,c,l,f=e.length,d=un.extend({},p.getBlockElements()),m=p.getNonEmptyElements(),g=p.getNonEmptyElements();for(d.body=1,r=0;r<f;r++)if(i=(o=e[r]).parent,d[o.parent.name]&&o===i.lastChild){for(u=o.prev;u;){if("span"!==(s=u.name)||"bookmark"!==u.attr("data-mce-type")){if("br"!==s)break;if("br"===s){o=null;break}}u=u.prev}o&&(o.remove(),tT(p,m,g,i)&&(c=p.getElementRule(i.name))&&(c.removeEmpty?i.remove():c.paddEmpty&&JN(h,n,d,i)))}else{for(a=o;i&&i.firstChild===a&&i.lastChild===a&&!d[(a=i).name];)i=i.parent;a===i&&!0!==h.padd_empty_with_br&&((l=new GN("#text",3)).value="",o.replace(l))}}),e.addAttributeFilter("href",function(e){var t,n=e.length,r=function(e){return e.split(" ").filter(function(e){return 0<e.length}).concat(["noopener"]).sort().join(" ")},o=function(e){var t=e?un.trim(e):"";return/\b(noopener)\b/g.test(t)?t:r(t)};if(!h.allow_unsafe_link_target)for(;n--;)"a"===(t=e[n]).name&&"_blank"===t.attr("target")&&t.attr("rel",o(t.attr("rel")))}),h.allow_html_in_named_anchor||e.addAttributeFilter("id,name",function(e){for(var t,n,r,o,i=e.length;i--;)if("a"===(o=e[i]).name&&o.firstChild&&!o.attr("href"))for(r=o.parent,t=o.lastChild;n=t.prev,r.insert(t,o),t=n;);}),h.fix_list_elements&&e.addNodeFilter("ul,ol",function(e){for(var t,n,r,o=e.length;o--;)"ul"!==(n=(t=e[o]).parent).name&&"ol"!==n.name||(t.prev&&"li"===t.prev.name?t.prev.append(t):((r=new GN("li",1)).attr("style","list-style-type: none"),t.wrap(r)))}),h.validate&&p.getValidClasses()&&e.addAttributeFilter("class",function(e){for(var t,n,r,o,i,a,u,s=e.length,c=p.getValidClasses();s--;){for(n=(t=e[s]).attr("class").split(" "),i="",r=0;r<n.length;r++)o=n[r],u=!1,(a=c["*"])&&a[o]&&(u=!0),a=c[t.name],!u&&a&&a[o]&&(u=!0),u&&(i&&(i+=" "),i+=o);i.length||(i=null),t.attr("class",i)}})},oT=un.makeMap,iT=un.each,aT=un.explode,uT=un.extend,sT=function(e,t,n){-1===un.inArray(t,n)&&(e.addAttributeFilter(n,function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)}),t.push(n))},cT=function(e,t,n){return t.no_events||!e?n:fx(e,LN(t,{content:n})).content},lT=function(e,t,n){var r=Tu(n.getInner?t.innerHTML:e.getOuterHTML(t));return n.selection||gi(kr.fromDom(t))?r:un.trim(r)},fT=function(e,t,n){var r=n.selection?LN({forced_root_block:!1},n):n,o=e.parse(t,r);return FN.trimTrailingBr(o),o},dT=function(e,t,n){return aP(e,t).serialize(n)},mT=function(e,t,n,r,o){var i=dT(t,n,r);return cT(e,o,i)},(yP||(yP={})).isBookmarkNode=mf,gT=yP,hT=Pi.isContentEditableFalse,pT=Pi.isContentEditableTrue,vT=function(e,t){for(;t&&t!==e;){if(pT(t)||hT(t))return t;t=t.parentNode}return null},bT=function(r,a){var u,s,c,l,f,d,m,g,h,p,v,i,b,y,x,w,C,n,e,S,N,T,E,o,k,R,_,A,D,O=a.dom,P=un.each,B=a.getDoc(),M=_e.document,I=Math.abs,L=Math.round,F=a.getBody(),H={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},t=".mce-content-body";return a.contentStyles.push(t+" div.mce-resizehandle {position: absolute;border: 1px solid black;box-sizing: content-box;background: #FFF;width: 7px;height: 7px;z-index: 10000}"+t+" .mce-resizehandle:hover {background: #000}"+t+" img[data-mce-selected],"+t+" hr[data-mce-selected] {outline: 1px solid black;resize: none}"+t+" .mce-clonedresizable {position: absolute;"+(Oe.gecko?"":"outline: 1px dashed black;")+"opacity: .5;filter: alpha(opacity=50);z-index: 10000}"+t+" .mce-resize-helper {background: #555;background: rgba(0,0,0,0.75);border-radius: 3px;border: 1px;color: white;display: none;font-family: sans-serif;font-size: 12px;white-space: nowrap;line-height: 14px;margin: 5px 10px;padding: 5px;position: absolute;z-index: 10001}"),C=function(e){return e&&("IMG"===e.nodeName||a.dom.is(e,"figure.image"))},n=function(e,t){return C(e.target)&&!qC(e.clientX,e.clientY,t)},e=function(e){var t=e.target;n(e,a.selection.getRng())&&!e.isDefaultPrevented()&&(e.preventDefault(),a.selection.select(t))},S=function(e){return a.dom.is(e,"figure.image")?e.querySelector("img"):e},N=function(e){var t=a.settings.object_resizing;return!1!==t&&!Oe.iOS&&("string"!=typeof t&&(t="table,img,figure.image,div"),"false"!==e.getAttribute("data-mce-resize")&&e!==a.getBody()&&co(kr.fromDom(e),t))},T=function(e){var t,n,r=e.screenX-f,o=e.screenY-d;b=r*l[2]+h,y=o*l[3]+p,b=b<5?5:b,y=y<5?5:y,(C(u)&&!1!==a.settings.resize_img_proportional?!YC.modifierPressed(e):YC.modifierPressed(e)||C(u)&&l[2]*l[3]!=0)&&(I(r)>I(o)?(y=L(b*v),b=L(y/v)):(b=L(y/v),y=L(b*v))),O.setStyles(S(s),{width:b,height:y}),t=0<(t=l.startPos.x+r)?t:0,n=0<(n=l.startPos.y+o)?n:0,O.setStyles(c,{left:t,top:n,display:"block"}),c.innerHTML=b+" &times; "+y,l[2]<0&&s.clientWidth<=b&&O.setStyle(s,"left",m+(h-b)),l[3]<0&&s.clientHeight<=y&&O.setStyle(s,"top",g+(p-y)),(r=F.scrollWidth-x)+(o=F.scrollHeight-w)!=0&&O.setStyles(c,{left:t-r,top:n-o}),i||(hx(a,u,h,p),i=!0)},E=function(){i=!1;var e=function(e,t){t&&(u.style[e]||!a.schema.isValid(u.nodeName.toLowerCase(),e)?O.setStyle(S(u),e,t):O.setAttrib(S(u),e,t))};e("width",b),e("height",y),O.unbind(B,"mousemove",T),O.unbind(B,"mouseup",E),M!==B&&(O.unbind(M,"mousemove",T),O.unbind(M,"mouseup",E)),O.remove(s),O.remove(c),o(u),px(a,u,b,y),O.setAttrib(u,"style",O.getAttrib(u,"style")),a.nodeChanged()},o=function(e){var t,o,i,n,r;k(),A(),t=O.getPos(e,F),m=t.x,g=t.y,r=e.getBoundingClientRect(),o=r.width||r.right-r.left,i=r.height||r.bottom-r.top,u!==e&&(u=e,b=y=0),n=a.fire("ObjectSelected",{target:e}),N(e)&&!n.isDefaultPrevented()?P(H,function(t,e){var n=function(e){f=e.screenX,d=e.screenY,h=S(u).clientWidth,p=S(u).clientHeight,v=p/h,(l=t).startPos={x:o*t[0]+m,y:i*t[1]+g},x=F.scrollWidth,w=F.scrollHeight,s=u.cloneNode(!0),O.addClass(s,"mce-clonedresizable"),O.setAttrib(s,"data-mce-bogus","all"),s.contentEditable=!1,s.unSelectabe=!0,O.setStyles(s,{left:m,top:g,margin:0}),s.removeAttribute("data-mce-selected"),F.appendChild(s),O.bind(B,"mousemove",T),O.bind(B,"mouseup",E),M!==B&&(O.bind(M,"mousemove",T),O.bind(M,"mouseup",E)),c=O.add(F,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},h+" &times; "+p)},r=O.get("mceResizeHandle"+e);r&&O.remove(r),r=O.add(F,"div",{id:"mceResizeHandle"+e,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+e+"-resize; margin:0; padding:0"}),11===Oe.ie&&(r.contentEditable=!1),O.bind(r,"mousedown",function(e){e.stopImmediatePropagation(),e.preventDefault(),n(e)}),t.elm=r,O.setStyles(r,{left:o*t[0]+m-r.offsetWidth/2,top:i*t[1]+g-r.offsetHeight/2})}):k(),u.setAttribute("data-mce-selected","1")},k=function(){var e,t;for(e in A(),u&&u.removeAttribute("data-mce-selected"),H)(t=O.get("mceResizeHandle"+e))&&(O.unbind(t),O.remove(t))},R=function(e){var t,n=function(e,t){if(e)do{if(e===t)return!0}while(e=e.parentNode)};i||a.removed||(P(O.select("img[data-mce-selected],hr[data-mce-selected]"),function(e){e.removeAttribute("data-mce-selected")}),t="mousedown"===e.type?e.target:r.getNode(),n(t=O.$(t).closest("table,img,figure.image,hr")[0],F)&&(D(),n(r.getStart(!0),t)&&n(r.getEnd(!0),t))?o(t):k())},_=function(e){return hT(vT(a.getBody(),e))},A=function(){var e,t;for(e in H)(t=H[e]).elm&&(O.unbind(t.elm),delete t.elm)},D=function(){try{a.getDoc().execCommand("enableObjectResizing",!1,!1)}catch(e){}},a.on("init",function(){D(),Oe.ie&&11<=Oe.ie&&(a.on("mousedown click",function(e){var t=e.target,n=t.nodeName;i||!/^(TABLE|IMG|HR)$/.test(n)||_(t)||(2!==e.button&&a.selection.select(t,"TABLE"===n),"mousedown"===e.type&&a.nodeChanged())}),a.dom.bind(F,"mscontrolselect",function(e){var t=function(e){Pe.setEditorTimeout(a,function(){a.selection.select(e)})};if(_(e.target))return e.preventDefault(),void t(e.target);/^(TABLE|IMG|HR)$/.test(e.target.nodeName)&&(e.preventDefault(),"IMG"===e.target.tagName&&t(e.target))}));var t=Pe.throttle(function(e){a.composing||R(e)});a.on("nodechange ResizeEditor ResizeWindow drop FullscreenStateChanged",t),a.on("keyup compositionend",function(e){u&&"TABLE"===u.nodeName&&t(e)}),a.on("hide blur",k),a.on("contextmenu",e)}),a.on("remove",A),{isResizable:N,showResizeRect:o,hideResizeRect:k,updateResizeRect:R,destroy:function(){u=s=null}}},yT=function(e){for(var t=0,n=0,r=e;r&&r.nodeType;)t+=r.offsetLeft||0,n+=r.offsetTop||0,r=r.offsetParent;return{x:t,y:n}},xT=function(e,t,n){var r={elm:t,alignToTop:n};return e.fire("scrollIntoView",r),r.isDefaultPrevented()},wT=function(e){if(e.inline)return e.getBody().getBoundingClientRect();var t=e.getWin();return{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight,width:t.innerWidth,height:t.innerHeight}},CT=function(e,t,n){e.inline?(e.getBody().scrollLeft+=t,e.getBody().scrollTop+=n):e.getWin().scrollBy(t,n)},ST=function(e,t,n){var r,o,i,a,u,s=e.dom,c=s.getRoot(),l=0;if(!xT(e,t,n)&&Pi.isElement(t)){if(!1===n&&(l=t.offsetHeight),"BODY"!==c.nodeName&&(u=e.selection.getScrollContainer()))return r=yT(t).y-yT(u).y+l,a=u.clientHeight,void((r<(i=u.scrollTop)||i+a<r+25)&&(u.scrollTop=r<i?r:r-a+25));o=s.getViewPort(e.getWin()),r=s.getPos(t).y+l,i=o.y,a=o.h,(r<o.y||i+a<r+25)&&e.getWin().scrollTo(0,r<i?r:r-a+25)}},NT=function(a,e){W(rP.fromRangeStart(e).getClientRects()).each(function(e){var t=wT(a),n=ms(t,e),r=4,o=0<n.x?n.x+r:n.x-r,i=0<n.y?n.y+r:n.y-r;CT(a,0!==n.x?o:0,0!==n.y?i:0)})},TT=function(e){return Pi.isContentEditableTrue(e)||Pi.isContentEditableFalse(e)},ET=function(e,t,n){for(;e&&e!==t;){if(n(e))return e;e=e.parentNode}return null},kT=function(e,n,t){var r,o,i;if(r=t.elementFromPoint(e,n),o=t.body.createTextRange(),r&&"HTML"!==r.tagName||(r=t.body),o.moveToElementText(r),0<(i=(i=un.toArray(o.getClientRects())).sort(function(e,t){return(e=Math.abs(Math.max(e.top-n,e.bottom-n)))-(t=Math.abs(Math.max(t.top-n,t.bottom-n)))})).length){n=(i[0].bottom+i[0].top)/2;try{return o.moveToPoint(e,n),o.collapse(!0),o}catch(e){}}return null},RT=function(e,t){var n=e&&e.parentElement?e.parentElement():null;return Pi.isContentEditableFalse(ET(n,t,TT))?null:e},_T=function(t,n,r){var o,e,i=r;if(i.caretPositionFromPoint)(e=i.caretPositionFromPoint(t,n))&&((o=r.createRange()).setStart(e.offsetNode,e.offset),o.collapse(!0));else if(r.caretRangeFromPoint)o=r.caretRangeFromPoint(t,n);else if(i.body.createTextRange){o=i.body.createTextRange();try{o.moveToPoint(t,n),o.collapse(!0)}catch(e){o=kT(t,n,r)}return RT(o,r.body)}return o},AT=function(n,e){return Ae(e,function(e){var t=n.fire("GetSelectionRange",{range:e});return t.range!==e?t.range:e})},DT=function(e,t){var n=t||_e.document,r=n.createDocumentFragment();return I(e,function(e){r.appendChild(e.dom())}),kr.fromDom(r)},OT=no("element","width","rows"),PT=no("element","cells"),BT=no("x","y"),MT=function(e,t){var n=parseInt(Xr(e,t),10);return isNaN(n)?1:n},IT=function(e,t,n,r,o){var i,a,u=MT(o,"rowspan"),s=MT(o,"colspan"),c=e.rows();for(i=n;i<n+u;i++)for(c[i]||(c[i]=PT(bu(r),[])),a=t;a<t+s;a++)c[i].cells()[a]=i===n&&a===t?o:vu(o)},LT=function(e,t,n){var r=e.rows(),o=r[n]?r[n].cells():[];return!!o[t]},FT=function(e,t,n){for(;LT(e,t,n);)t++;return t},HT=function(e){return F(e,function(e,t){return t.cells().length>e?t.cells().length:e},0)},zT=function(e,t){var n,r,o,i=e.rows();for(n=0;n<i.length;n++)for(r=i[n].cells(),o=0;o<r.length;o++)if(go(r[o],t))return y.some(BT(o,n));return y.none()},WT=function(e,t,n,r,o){var i,a,u,s=[],c=e.rows();for(i=n;i<=o;i++)a=c[i].cells(),u=t<r?a.slice(t,r+1):a.slice(r,t+1),s.push(PT(c[i].element(),u));return s},UT=function(e,t,n){var r=t.x(),o=t.y(),i=n.x(),a=n.y(),u=o<a?WT(e,r,o,i,a):WT(e,r,a,i,o);return OT(e.element(),HT(u),u)},jT=function(e,t){var n=vu(e.element()),r=kr.fromTag("tbody");return Oa(r,t),_a(n,r),n},VT=function(e){return Ae(e.rows(),function(e){var t=Ae(e.cells(),function(e){var t=bu(e);return Gr(t,"colspan"),Gr(t,"rowspan"),t}),n=vu(e.element());return Oa(n,t),n})},qT=function(e){var o=OT(vu(e),0,[]);return I(Ja(e,"tr"),function(n,r){I(Ja(n,"td,th"),function(e,t){IT(o,FT(o,t,r),r,n,e)})}),OT(o.element(),HT(o.rows()),o.rows())},$T=function(e){return jT(e,VT(e))},YT=function(n,e,r){return zT(n,e).bind(function(t){return zT(n,r).map(function(e){return UT(n,t,e)})})},XT=function(e){return S(e,function(e){return"ul"===Dr(e)||"ol"===Dr(e)})},KT=function(t,n){return S(t,function(e){return"li"===Dr(e)&&qw(e,n)}).fold(BO([]),function(e){return XT(t).map(function(e){return[kr.fromTag("li"),kr.fromTag(Dr(e))]}).getOr([])})},GT=function(e,t){var n=F(t,function(e,t){return _a(t,e),t},e);return 0<t.length?DT([n]):n},JT=function(t){return li(t)?Co(t).filter(ci).fold(BO([]),function(e){return[t,e]}):ci(t)?[t]:[]},QT=function(e,t){var n=kr.fromDom(t.commonAncestorContainer),r=Km(n,e),o=L(r,function(e){return ai(e)||oi(e)}),i=KT(r,t),a=o.concat(i.length?i:JT(n));return Ae(a,vu)},ZT=function(){return DT([])},eE=function(e,t){return GT(kr.fromDom(t.cloneContents()),QT(e,t))},tE=function(e,t){return eu(t,"table",IO(go,e))},nE=function(e,o){return tE(e,o[0]).bind(function(e){var t=o[0],n=o[o.length-1],r=qT(e);return YT(r,t,n).map(function(e){return DT([$T(e)])})}).getOrThunk(ZT)},rE=function(e,t){return 0<t.length&&t[0].collapsed?ZT():eE(e,t[0])},oE=function(e,t){var n=sv(t,e);return 0<n.length?nE(e,n):rE(e,t)},iE=function(r){return y.from(r.selection.getRng()).map(function(e){var t=r.dom.add(r.getBody(),"div",{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},e.cloneContents()),n=Tu(t.innerText);return r.dom.remove(t),n}).getOr("")},aE=function(e,t){var n=e.selection.getRng(),r=e.dom.create("body"),o=e.selection.getSel(),i=AT(e,tv(o)),a=t.contextual?oE(kr.fromDom(e.getBody()),i).dom():n.cloneContents();return a&&r.appendChild(a),e.selection.serializer.serialize(r,t)},uE=function(e,t){if(void 0===t&&(t={}),t.get=!0,t.format=t.format||"html",t.selection=!0,(t=e.fire("BeforeGetContent",t)).isDefaultPrevented())return e.fire("GetContent",t),t.content;if("text"===t.format)return iE(e);t.getInner=!0;var n=aE(e,t);return"tree"===t.format?n:(t.content=e.selection.isCollapsed()?"":n,e.fire("GetContent",t),t.content)},sE=function(e,t,n){var r,o,i,a=e.selection.getRng(),u=e.getDoc();if((n=n||{format:"html"}).set=!0,n.selection=!0,n.content=t,n.no_events||!(n=e.fire("BeforeSetContent",n)).isDefaultPrevented()){if(t=n.content,a.insertNode){t+='<span id="__caret">_</span>',a.startContainer===u&&a.endContainer===u?u.body.innerHTML=t:(a.deleteContents(),0===u.body.childNodes.length?u.body.innerHTML=t:a.createContextualFragment?a.insertNode(a.createContextualFragment(t)):(o=u.createDocumentFragment(),i=u.createElement("div"),o.appendChild(i),i.outerHTML=t,a.insertNode(o))),r=e.dom.get("__caret"),(a=u.createRange()).setStartBefore(r),a.setEndBefore(r),e.selection.setRng(a),e.dom.remove("__caret");try{e.selection.setRng(a)}catch(e){}}else a.item&&(u.execCommand("Delete",!1,null),a=e.getRng()),/^\s+/.test(t)?(a.pasteHTML('<span id="__mce_tmp">_</span>'+t),e.dom.remove("__mce_tmp")):a.pasteHTML(t);n.no_events||e.fire("SetContent",n)}else e.fire("SetContent",n)},cE=function(e,t,n,r,o){var i=n?t.startContainer:t.endContainer,a=n?t.startOffset:t.endOffset;return y.from(i).map(kr.fromDom).map(function(e){return r&&t.collapsed?e:_o(e,o(e,a)).getOr(e)}).bind(function(e){return Br(e)?y.some(e):Co(e)}).map(function(e){return e.dom()}).getOr(e)},lE=function(e,t,n){return cE(e,t,!0,n,function(e,t){return Math.min(Oo(e),t)})},fE=function(e,t,n){return cE(e,t,!1,n,function(e,t){return 0<t?t-1:t})},dE=function(e,t){for(var n=e;e&&Pi.isText(e)&&0===e.length;)e=t?e.nextSibling:e.previousSibling;return e||n},mE=function(e,t){var n,r,o,i,a;return t?(r=t.startContainer,o=t.endContainer,i=t.startOffset,a=t.endOffset,n=t.commonAncestorContainer,!t.collapsed&&(r===o&&a-i<2&&r.hasChildNodes()&&(n=r.childNodes[i]),3===r.nodeType&&3===o.nodeType&&(r=r.length===i?dE(r.nextSibling,!0):r.parentNode,o=0===a?dE(o.previousSibling,!1):o.parentNode,r&&r===o))?r:n&&3===n.nodeType?n.parentNode:n):e},gE=function(e,t,n,r){var o,i,a=[],u=e.getRoot();if(n=e.getParent(n||lE(u,t,t.collapsed),e.isBlock),r=e.getParent(r||fE(u,t,t.collapsed),e.isBlock),n&&n!==u&&a.push(n),n&&r&&n!==r)for(i=new JO(o=n,u);(o=i.next())&&o!==r;)e.isBlock(o)&&a.push(o);return r&&n!==r&&r!==u&&a.push(r),a},hE=function(r,e,o){return y.from(e).map(function(e){var t=r.nodeIndex(e),n=r.createRng();return n.setStart(e.parentNode,t),n.setEnd(e.parentNode,t+1),o&&($w(r,n,e,!0),$w(r,n,e,!1)),n})},pE=un.each,vE=function(e){return!!e.select},bE=function(e){return!(!e||!e.ownerDocument)&&bo(kr.fromDom(e.ownerDocument),kr.fromDom(e))},yE=function(e){return!!e&&(!!vE(e)||bE(e.startContainer)&&bE(e.endContainer))},xE=function(a,u,e,s){var c,l,f,t=function(e,t){var n=a.createRng();e?(n.setStart(e,t),n.setEnd(e,t),y(n),p(!1)):($w(a,n,s.getBody(),!0),y(n))},n=function(e){return uE(s,e)},r=function(e,t){return sE(s,e,t)},o=function(e){return lE(s.getBody(),b(),e)},i=function(e){return fE(s.getBody(),b(),e)},d=function(e,t){return O.getBookmark(e,t)},m=function(e){return O.moveToBookmark(e)},g=function(e,t){return hE(a,e,t).each(y),e},h=function(){var e=b(),t=v();return!(!e||e.item)&&(e.compareEndPoints?0===e.compareEndPoints("StartToEnd",e):!t||e.collapsed)},p=function(e){var t=b();t.collapse(!!e),y(t)},v=function(){return u.getSelection?u.getSelection():u.document.selection},b=function(){var e,t,n,r,o,i=function(e,t,n){try{return t.compareBoundaryPoints(e,n)}catch(e){return-1}};if(!u)return null;if(null==(r=u.document))return null;if(void 0!==s.bookmark&&!1===Gx(s)&&(o=Gy(s)).isSome())return o.map(function(e){return AT(s,[e])[0]}).getOr(r.createRange());try{(e=v())&&(t=0<e.rangeCount?e.getRangeAt(0):e.createRange?e.createRange():r.createRange())}catch(e){}return(t=AT(s,[t])[0])||(t=r.createRange?r.createRange():r.body.createTextRange()),t.setStart&&9===t.startContainer.nodeType&&t.collapsed&&(n=a.getRoot(),t.setStart(n,0),t.setEnd(n,0)),c&&l&&(0===i(t.START_TO_START,t,c)&&0===i(t.END_TO_END,t,c)?t=l:l=c=null),t},y=function(e,t){var n,r,o;if(yE(e))if(o=vE(e)?e:null){l=null;try{o.select()}catch(e){}}else{if(n=v(),e=s.fire("SetSelectionRange",{range:e,forward:t}).range,n){l=e;try{n.removeAllRanges(),n.addRange(e)}catch(e){}!1===t&&n.extend&&(n.collapse(e.endContainer,e.endOffset),n.extend(e.startContainer,e.startOffset)),c=0<n.rangeCount?n.getRangeAt(0):null}e.collapsed||e.startContainer!==e.endContainer||!n.setBaseAndExtent||Oe.ie||e.endOffset-e.startOffset<2&&e.startContainer.hasChildNodes()&&(r=e.startContainer.childNodes[e.startOffset])&&"IMG"===r.tagName&&(n.setBaseAndExtent(e.startContainer,e.startOffset,e.endContainer,e.endOffset),n.anchorNode===e.startContainer&&n.focusNode===e.endContainer||n.setBaseAndExtent(r,0,r,1)),s.fire("AfterSetSelectionRange",{range:e,forward:t})}},x=function(e){return r(a.getOuterHTML(e)),e},w=function(){return mE(s.getBody(),b())},C=function(e,t){return gE(a,b(),e,t)},S=function(){var e,t,n=v();return!(n&&n.anchorNode&&n.focusNode)||((e=a.createRng()).setStart(n.anchorNode,n.anchorOffset),e.collapse(!0),(t=a.createRng()).setStart(n.focusNode,n.focusOffset),t.collapse(!0),e.compareBoundaryPoints(e.START_TO_START,t)<=0)},N=function(){var e,t=b(),n=v();return!rv(n)&&Yw(s)?((e=wy(a,t)).each(function(e){y(e,S())}),e.getOr(t)):t},T=function(e,t){var i;return f||(f={},i={},s.on("NodeChange",function(e){var n=e.element,r=a.getParents(n,null,a.getRoot()),o={};pE(f,function(e,n){pE(r,function(t){if(a.is(t,n))return i[n]||(pE(e,function(e){e(!0,{node:t,selector:n,parents:r})}),i[n]=e),o[n]=e,!1})}),pE(i,function(e,t){o[t]||(delete i[t],pE(e,function(e){e(!1,{node:n,selector:t,parents:r})}))})})),f[e]||(f[e]=[]),f[e].push(t),D},E=function(){for(var e,t=a.getRoot();t&&"BODY"!==t.nodeName;){if(t.scrollHeight>t.clientHeight){e=t;break}t=t.parentNode}return e},k=function(e,t){return ST(s,e,t)},R=function(e,t){return y(_T(e,t,s.getDoc()))},_=function(){var e=b();return e.collapsed?Us.fromRangeStart(e).getClientRects()[0]:e.getBoundingClientRect()},A=function(){u=c=l=null,P.destroy()},D={bookmarkManager:null,controlSelection:null,dom:a,win:u,serializer:e,editor:s,collapse:p,setCursorLocation:t,getContent:n,setContent:r,getBookmark:d,moveToBookmark:m,select:g,isCollapsed:h,isForward:S,setNode:x,getNode:w,getSel:v,setRng:y,getRng:b,getStart:o,getEnd:i,getSelectedBlocks:C,normalize:N,selectorChanged:T,getScrollContainer:E,scrollIntoView:k,placeCaretAt:R,getBoundingClientRect:_,destroy:A},O=gT(D),P=bT(D,s);return D.bookmarkManager=O,D.controlSelection=P,D},(TO=wE||(wE={}))[TO.Br=0]="Br",TO[TO.Block=1]="Block",TO[TO.Wrap=2]="Wrap",TO[TO.Eol=3]="Eol",CE=function(e,t){return e===vl.Backwards?t.reverse():t},SE=function(e,t,n){return e===vl.Forwards?t.next(n):t.prev(n)},NE=function(e,t,n,r){return Pi.isBr(r.getNode(t===vl.Forwards))?wE.Br:!1===rl(n,r)?wE.Block:wE.Wrap},EE=function(n,r,o,e){return r(o,e).breakAt.map(function(e){var t=r(o,e).positions;return n===vl.Backwards?t.concat(e):[e].concat(t)}).getOr([])},kE=function(e,a){return F(e,function(e,i){return e.fold(function(){return y.some(i)},function(o){return bs([W(o.getClientRects()),W(i.getClientRects())],function(e,t){var n=Math.abs(a-e.left),r=Math.abs(a-t.left);return r<=n?i:o}).or(e)})},y.none())},RE=function(t,e){return W(e.getClientRects()).bind(function(e){return kE(t,e.left)})},_E=IO(TE=function(e,t,n,r){for(var o,i,a=Al(n),u=r,s=[];u&&(o=SE(t,a,u));){if(Pi.isBr(o.getNode(!1)))return t===vl.Forwards?{positions:CE(t,s).concat([o]),breakType:wE.Br,breakAt:y.some(o)}:{positions:CE(t,s),breakType:wE.Br,breakAt:y.some(o)};if(o.isVisible()){if(e(u,o))return i=NE(n,t,u,o),{positions:CE(t,s),breakType:i,breakAt:y.some(o)};s.push(o),u=o}else u=o}return{positions:CE(t,s),breakType:wE.Eol,breakAt:y.none()}},rP.isAbove,-1),AE=IO(TE,rP.isBelow,1),DE=function(e,t){return _E(e,t).breakAt.isNone()},OE=function(e,t){return AE(e,t).breakAt.isNone()},PE=IO(EE,-1,_E),BE=IO(EE,1,AE),ME=function(t){return Vl.firstPositionIn(t).map(function(e){return[e].concat(AE(t,e).positions)}).getOr([])},IE=function(t){return Vl.lastPositionIn(t).map(function(e){return _E(t,e).positions.concat(e)}).getOr([])},LE=Pi.isContentEditableFalse,FE=gs;HE=function(e,t,n,r){var o,i,a,u,s,c=e===vl.Forwards,l=c?Ag:Dg;return!r.collapsed&&(o=FE(r),LE(o))?fb(e,t,o,e===vl.Backwards,!0):(i=Wu(r),l(a=dl(e,t.getBody(),r))?mb(t,a.getNode(!c)):(u=ym.normalizePosition(c,n(a)))?l(u)?fb(e,t,u.getNode(!c),c,!0):(s=n(u))&&l(s)&&pl(u,s)?fb(e,t,s.getNode(!c),c,!0):i?hb(t,u.toRange(),!0):null:i?r:null)},zE=function(e,t,n,r){var o,i,a,u,s,c=FE(r),l=dl(e,t.getBody(),r),f=n(t.getBody(),OC(1),l),d=L(f,PC(1)),m=Yt.last(l.getClientRects());if((Ag(l)||Pg(l))&&(c=l.getNode()),(Dg(l)||Bg(l))&&(c=l.getNode(!0)),!m)return null;if(i=m.left,(o=HC(d,i))&&LE(o.node))return a=Math.abs(i-o.left),u=Math.abs(i-o.right),fb(e,t,o.node,a<u,!0);if(c){if(s=DC(e,t.getBody(),OC(1),c),o=HC(L(s,PC(1)),i))return hb(t,o.position.toRange(),!0);if(o=Yt.last(L(s,PC(0))))return hb(t,o.position.toRange(),!0)}},WE=function(e){var t=e.dom.create(Db(e));return(!Oe.ie||11<=Oe.ie)&&(t.innerHTML='<br data-mce-bogus="1">'),t},UE=function(e,t,n){var r,o,i=Al(e.getBody()),a=IO(hl,i.next),u=IO(hl,i.prev);if(n.collapsed&&e.settings.forced_root_block){if(!(r=e.dom.getParent(n.startContainer,"PRE")))return;(1===t?a(Us.fromRangeStart(n)):u(Us.fromRangeStart(n)))||(o=WE(e),1===t?e.$(r).after(o):e.$(r).before(o),e.selection.select(o,!0),e.selection.collapse())}},jE=function(e,t){var n=Al(e.getBody()),r=IO(hl,n.next),o=IO(hl,n.prev),i=t?vl.Forwards:vl.Backwards,a=t?r:o,u=e.selection.getRng(),s=HE(i,e,a,u);return s||(s=UE(e,i,u))||null},VE=function(e,t){var n=t?1:-1,r=t?AC:_C,o=e.selection.getRng(),i=zE(n,e,r,o);return i||(i=UE(e,n,o))||null},qE=function(t,n){return function(){var e=jE(t,n);return!!e&&(t.selection.setRng(e),!0)}},$E=function(t,n){return function(){var e=VE(t,n);return!!e&&(t.selection.setRng(e),!0)}},YE=function(t){return function(e){return t?Dg(e):Ag(e)}},XE=function(r,o){return function(){var e=o?Us.fromRangeEnd(r.selection.getRng()):Us.fromRangeStart(r.selection.getRng()),t=o?AE(r.getBody(),e):_E(r.getBody(),e),n=o?U(t.positions):W(t.positions);return n.filter(YE(o)).fold(BO(!1),function(e){return r.selection.setRng(e.toRange()),!0})}},KE=function(e,t){return{left:e.left-t,top:e.top-t,right:e.right+2*t,bottom:e.bottom+2*t,width:e.width+t,height:e.height+t}},GE=function(n,e){return R(e,function(e){var t=KE(os(e.getBoundingClientRect()),-1);return[{x:t.left,y:n(t),cell:e},{x:t.right,y:n(t),cell:e}]})},JE=function(e,o,i){return F(e,function(e,r){return e.fold(function(){return y.some(r)},function(e){var t=Math.sqrt(Math.abs(e.x-o)+Math.abs(e.y-i)),n=Math.sqrt(Math.abs(r.x-o)+Math.abs(r.y-i));return y.some(n<t?r:e)})},y.none())},ZE=function(e){return e.top},ek=function(e,t){return e.y>t},tk=IO(QE=function(e,t,n,r,o){var i=Ja(kr.fromDom(n),"td,th,caption").map(function(e){return e.dom()}),a=L(GE(e,i),function(e){return t(e,o)});return JE(a,r,o).map(function(e){return e.cell})},function(e){return e.bottom},function(e,t){return e.y<t}),nk=IO(QE,ZE,ek),rk=function(t,n){return W(n.getClientRects()).bind(function(e){return tk(t,e.left,e.top)}).bind(function(e){return RE(IE(e),n)})},ok=function(t,n){return U(n.getClientRects()).bind(function(e){return nk(t,e.left,e.top)}).bind(function(e){return RE(ME(e),n)})},ik=function(e,t){e.selection.setRng(t),NT(e,t)},ak=function(t,n,e){return e.breakAt.map(function(e){return t(n,e).breakAt.isSome()}).getOr(!1)},uk=function(e){return e.breakType===wE.Wrap&&0===e.positions.length},sk=function(e){return e.breakType===wE.Br&&1===e.positions.length},lk=IO(ck=function(e,t,n){var r=e(t,n);return uk(r)||!Pi.isBr(n.getNode())&&sk(r)?!ak(e,t,r):r.breakAt.isNone()},_E),fk=IO(ck,AE),dk=function(e,t,n){var r=Us.fromRangeStart(t);return Vl.positionIn(!e,n).map(function(e){return e.isEqual(r)}).getOr(!1)},mk=function(e,t,n,r){var o,i=e.selection.getRng(),a=t?1:-1;return!(!Vc()||!dk(t,i,n)||(o=fb(a,e,n,!t,!0),ik(e,o),0))},gk=function(t,n,e){return rk(n,e).orThunk(function(){return W(e.getClientRects()).bind(function(e){return kE(PE(t,Us.before(n)),e.left)})}).getOr(Us.before(n))},hk=function(t,n,e){return ok(n,e).orThunk(function(){return W(e.getClientRects()).bind(function(e){return kE(BE(t,Us.after(n)),e.left)})}).getOr(Us.after(n))},pk=function(e,t){var n=t.getNode(e);return Pi.isElement(n)&&"TABLE"===n.nodeName?y.some(n):y.none()},vk=function(n,r,o,e){var i=Db(r);i?r.undoManager.transact(function(){var e,t=kr.fromTag(i);Yr(t,Ob(r)),_a(t,kr.fromTag("br")),n?ka(kr.fromDom(o),t):Ea(kr.fromDom(o),t),(e=r.dom.createRng()).setStart(t.dom(),0),e.setEnd(t.dom(),0),ik(r,e)}):ik(r,e.toRange())},bk=function(n,r,o){var e=pk(!!r,o),i=!1===r;e.fold(function(){return ik(n,o.toRange())},function(t){return Vl.positionIn(i,n.getBody()).filter(function(e){return e.isEqual(o)}).fold(function(){return ik(n,o.toRange())},function(e){return vk(r,n,t,o)})})},yk=function(e,t,n,r){var o,i=e.selection.getRng(),a=Us.fromRangeStart(i),u=e.getBody();return!t&&lk(r,a)?(o=gk(u,n,a),bk(e,t,o),!0):!(!t||!fk(r,a)||(o=hk(u,n,a),bk(e,t,o),0))},xk=function(n,r){return function(){return y.from(n.dom.getParent(n.selection.getNode(),"td,th")).bind(function(t){return y.from(n.dom.getParent(t,"table")).map(function(e){return mk(n,r,e,t)})}).getOr(!1)}},wk=function(n,r){return function(){return y.from(n.dom.getParent(n.selection.getNode(),"td,th")).bind(function(t){return y.from(n.dom.getParent(t,"table")).map(function(e){return yk(n,r,e,t)})}).getOr(!1)}},Ck=function(e){return b(["figcaption"],Dr(e))},Sk=function(e){var t=_e.document.createRange();return t.setStartBefore(e.dom()),t.setEndBefore(e.dom()),t},Nk=function(e,t,n){n?_a(e,t):Ra(e,t)},Tk=function(e,t){var n=kr.fromTag("br");return Nk(e,n,t),Sk(n)},Ek=function(e,t,n,r){var o=kr.fromTag(n),i=kr.fromTag("br");return Yr(o,r),_a(o,i),Nk(e,o,t),Sk(i)},kk=function(e,t,n,r){return""===t?Tk(e,r):Ek(e,r,t,n)},Rk=function(e,t){var n=IO(go,t);return Za(kr.fromDom(e.container()),ii,n).filter(Ck)},_k=function(e,t,n){return t?OE(e.dom(),n):DE(e.dom(),n)},Ak=function(t,n){var r=kr.fromDom(t.getBody()),o=Us.fromRangeStart(t.selection.getRng()),i=Db(t),a=Ob(t);return Rk(o,r).exists(function(){if(_k(r,n,o)){var e=kk(r,i,a,n);return t.selection.setRng(e),!0}return!1})},Dk=function(e,t){return function(){return!!e.selection.isCollapsed()&&Ak(e,t)}},Ok=function(e){return Ae(e,function(e){return LN({shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0,action:OO},e)})},Pk=function(e,t){return t.keyCode===e.keyCode&&t.shiftKey===e.shiftKey&&t.altKey===e.altKey&&t.ctrlKey===e.ctrlKey&&t.metaKey===e.metaKey},Mk=function(e,t){return S(Bk(e,t),function(e){return e.action()})},Bk=function(e,t){return R(Ok(e),function(e){return Pk(e,t)?[e]:[]})},Ik=function(e){var t,n,r=[];for(t=1;t<arguments.length;t++)r[t-1]=arguments[t];return n=Array.prototype.slice.call(arguments,1),function(){return e.apply(null,n)}},Lk=Mk,Fk=function(e,t,n){var r=Tr.detect().os;Lk([{keyCode:YC.RIGHT,action:qE(e,!0)},{keyCode:YC.LEFT,action:qE(e,!1)},{keyCode:YC.UP,action:$E(e,!1)},{keyCode:YC.DOWN,action:$E(e,!0)},{keyCode:YC.RIGHT,action:xk(e,!0)},{keyCode:YC.LEFT,action:xk(e,!1)},{keyCode:YC.UP,action:wk(e,!1)},{keyCode:YC.DOWN,action:wk(e,!0)},{keyCode:YC.RIGHT,action:Tp.move(e,t,!0)},{keyCode:YC.LEFT,action:Tp.move(e,t,!1)},{keyCode:YC.RIGHT,ctrlKey:!r.isOSX(),altKey:r.isOSX(),action:Tp.moveNextWord(e,t)},{keyCode:YC.LEFT,ctrlKey:!r.isOSX(),altKey:r.isOSX(),action:Tp.movePrevWord(e,t)},{keyCode:YC.UP,action:Dk(e,!1)},{keyCode:YC.DOWN,action:Dk(e,!0)}],n).each(function(e){n.preventDefault()})},Hk=function(t,n){t.on("keydown",function(e){!1===e.isDefaultPrevented()&&Fk(t,n,e)})},zk=function(e,t,n){Lk([{keyCode:YC.BACKSPACE,action:Ik(Sh,e,!1)},{keyCode:YC.DELETE,action:Ik(Sh,e,!0)},{keyCode:YC.BACKSPACE,action:Ik(yb,e,!1)},{keyCode:YC.DELETE,action:Ik(yb,e,!0)},{keyCode:YC.BACKSPACE,action:Ik(Pp,e,t,!1)},{keyCode:YC.DELETE,action:Ik(Pp,e,t,!0)},{keyCode:YC.BACKSPACE,action:Ik(kv,e,!1)},{keyCode:YC.DELETE,action:Ik(kv,e,!0)},{keyCode:YC.BACKSPACE,action:Ik(gg,e,!1)},{keyCode:YC.DELETE,action:Ik(gg,e,!0)},{keyCode:YC.BACKSPACE,action:Ik(ug,e,!1)},{keyCode:YC.DELETE,action:Ik(ug,e,!0)},{keyCode:YC.BACKSPACE,action:Ik(sb,e,!1)},{keyCode:YC.DELETE,action:Ik(sb,e,!0)}],n).each(function(e){n.preventDefault()})},Wk=function(e,t){Lk([{keyCode:YC.BACKSPACE,action:Ik(Nh,e)},{keyCode:YC.DELETE,action:Ik(Nh,e)}],t)},Uk=function(t,n){t.on("keydown",function(e){!1===e.isDefaultPrevented()&&zk(t,n,e)}),t.on("keyup",function(e){!1===e.isDefaultPrevented()&&Wk(t,e)})},jk=function(e){for(;e;){if(1===e.nodeType||3===e.nodeType&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}},qk=function(e){return Vk(e).fold(BO(""),function(e){return e.nodeName.toUpperCase()})},$k=function(e){return Vk(e).filter(function(e){return li(kr.fromDom(e))}).isSome()},Yk=function(e,t){var n,r,o,i,a=t,u=e.dom,s=e.schema.getMoveCaretBeforeOnEnterElements();if(t){if(/^(LI|DT|DD)$/.test(t.nodeName)&&(i=jk(t.firstChild))&&/^(UL|OL|DL)$/.test(i.nodeName)&&t.insertBefore(u.doc.createTextNode(""),t.firstChild),o=u.createRng(),t.normalize(),t.hasChildNodes()){for(n=new JO(t,t);r=n.current();){if(Pi.isText(r)){o.setStart(r,0),o.setEnd(r,0);break}if(s[r.nodeName.toLowerCase()]){o.setStartBefore(r),o.setEndBefore(r);break}a=r,r=n.next()}r||(o.setStart(a,0),o.setEnd(a,0))}else Pi.isBr(t)?t.nextSibling&&u.isBlock(t.nextSibling)?(o.setStartBefore(t),o.setEndBefore(t)):(o.setStartAfter(t),o.setEndAfter(t)):(o.setStart(t,0),o.setEnd(t,0));e.selection.setRng(o),u.remove(void 0),e.selection.scrollIntoView(t)}},Xk=function(e,t){for(var n,r=e.getRoot(),o=t;o!==r&&"false"!==e.getContentEditable(o);)"true"===e.getContentEditable(o)&&(n=o),o=o.parentNode;return o!==r?n:r},Kk=Vk=function(e){return y.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock))},Gk=qk,Jk=$k,Qk=function(e,t){return e.firstChild&&e.firstChild.nodeName===t},Zk=function(e,t){return e&&e.parentNode&&e.parentNode.nodeName===t},eR=function(e){return e&&/^(OL|UL|LI)$/.test(e.nodeName)},tR=function(e){return eR(e)&&eR(e.parentNode)},nR=function(e){var t=e.parentNode;return/^(LI|DT|DD)$/.test(t.nodeName)?t:e},rR=function(e,t,n){for(var r=e[n?"firstChild":"lastChild"];r&&!Pi.isElement(r);)r=r[n?"nextSibling":"previousSibling"];return r===t},oR=function(e,t,n,r,o){var i,a,u,s=e.dom,c=e.selection.getRng();n!==e.getBody()&&(tR(n)&&(o="LI"),i=o?t(o):s.create("BR"),rR(n,r,!0)&&rR(n,r,!1)?Zk(n,"LI")?s.insertAfter(i,nR(n)):s.replace(i,n):rR(n,r,!0)?Zk(n,"LI")?(s.insertAfter(i,nR(n)),i.appendChild(s.doc.createTextNode(" ")),i.appendChild(n)):n.parentNode.insertBefore(i,n):rR(n,r,!1)?s.insertAfter(i,nR(n)):(n=nR(n),(a=c.cloneRange()).setStartAfter(r),a.setEndAfter(n),u=a.extractContents(),"LI"===o&&Qk(u,"LI")?(i=u.firstChild,s.insertAfter(u,n)):(s.insertAfter(u,n),s.insertAfter(i,n))),s.remove(r),Yk(e,i))},iR=function(e){I(Ga(kr.fromDom(e),Mr),function(e){var t=e.dom();t.nodeValue=Tu(t.nodeValue)})},aR=function(e,t){return t&&"A"===t.nodeName&&e.isEmpty(t)},uR=function(e){return e&&/^(TD|TH|CAPTION)$/.test(e.nodeName)},sR=function(e){e.innerHTML='<br data-mce-bogus="1">'},cR=function(e,t){return e.nodeName===t||e.previousSibling&&e.previousSibling.nodeName===t},lR=function(e,t){return t&&e.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&"true"!==e.getContentEditable(t)},fR=function(e,t,n){var r,o=n,i=[];if(o){for(;o=o.firstChild;){if(e.isBlock(o))return;Pi.isElement(o)&&!t[o.nodeName.toLowerCase()]&&i.push(o)}for(r=i.length;r--;)!(o=i[r]).hasChildNodes()||o.firstChild===o.lastChild&&""===o.firstChild.nodeValue?e.remove(o):aR(e,o)&&e.remove(o)}},dR=function(e,t,n){return!1===Pi.isText(t)?n:e?1===n&&t.data.charAt(n-1)===Nu?0:n:n===t.data.length-1&&t.data.charAt(n)===Nu?t.data.length:n},mR=function(e){var t=e.cloneRange();return t.setStart(e.startContainer,dR(!0,e.startContainer,e.startOffset)),t.setEnd(e.endContainer,dR(!1,e.endContainer,e.endOffset)),t},gR=function(e){for(;Pi.isText(e)&&(e.nodeValue=e.nodeValue.replace(/^[\r\n]+/,"")),e=e.firstChild;);},hR=function(e,t){for(var n,r=e.getRoot(),o=t;o!==r&&"false"!==e.getContentEditable(o);)"true"===e.getContentEditable(o)&&(n=o),o=o.parentNode;return o!==r?n:r},pR=function(e,t){var n=Db(e);n&&n.toLowerCase()===t.tagName.toLowerCase()&&e.dom.setAttribs(t,Ob(e))},vR=function(e,t,n,r,o){var i,a,u,s,c,l=t||"P",f=e.dom,d=hR(f,r),m=f.getParent(r,f.isBlock);if(!m||!lR(f,m)){if(c=(m=m||d)===e.getBody()||uR(m)?m.nodeName.toLowerCase():m.parentNode.nodeName.toLowerCase(),!m.hasChildNodes())return i=f.create(l),pR(e,i),m.appendChild(i),n.setStart(i,0),n.setEnd(i,0),i;for(u=r;u.parentNode!==m;)u=u.parentNode;for(;u&&!f.isBlock(u);)u=(a=u).previousSibling;if(a&&e.schema.isValidChild(c,l.toLowerCase())){for(i=f.create(l),pR(e,i),a.parentNode.insertBefore(i,a),u=a;u&&!f.isBlock(u);)s=u.nextSibling,i.appendChild(u),u=s;n.setStart(r,o),n.setEnd(r,o)}}return r},bR=function(e,t){var n;t.normalize(),(n=t.lastChild)&&!/^(left|right)$/gi.test(e.getStyle(n,"float",!0))||e.add(t,"br")},yR=function(a,e){var t,u,s,i,c,n,r,o,l,f,d,m,g,h=a.dom,p=a.schema,v=p.getNonEmptyElements(),b=a.selection.getRng(),y=function(e){var t,n,r,o=s,i=p.getTextInlineElements();if(e||"TABLE"===f||"HR"===f?(t=h.create(e||m),pR(a,t)):t=c.cloneNode(!1),r=t,!1===Mb(a))h.setAttrib(t,"style",null),h.setAttrib(t,"class",null);else do{if(i[o.nodeName]){if(Sc(o)||mf(o))continue;n=o.cloneNode(!1),h.setAttrib(n,"id",""),t.hasChildNodes()?n.appendChild(t.firstChild):r=n,t.appendChild(n)}}while((o=o.parentNode)&&o!==u);return sR(r),t},x=function(e){var t,n,r,o;if(o=dR(e,s,i),Pi.isText(s)&&(e?0<o:o<s.nodeValue.length))return!1;if(s.parentNode===c&&g&&!e)return!0;if(e&&Pi.isElement(s)&&s===c.firstChild)return!0;if(cR(s,"TABLE")||cR(s,"HR"))return g&&!e||!g&&e;for(t=new JO(s,c),Pi.isText(s)&&(e&&0===o?t.prev():e||o!==s.nodeValue.length||t.next());n=t.current();){if(Pi.isElement(n)){if(!n.getAttribute("data-mce-bogus")&&(r=n.nodeName.toLowerCase(),v[r]&&"br"!==r))return!1}else if(Pi.isText(n)&&!/^[ \t\r\n]*$/.test(n.nodeValue))return!1;e?t.prev():t.next()}return!0},w=function(){r=/^(H[1-6]|PRE|FIGURE)$/.test(f)&&"HGROUP"!==d?y(m):y(),Ib(a)&&lR(h,l)&&h.isEmpty(c)?r=h.split(l,c):h.insertAfter(r,c),Yk(a,r)};wy(h,b).each(function(e){b.setStart(e.startContainer,e.startOffset),b.setEnd(e.endContainer,e.endOffset)}),s=b.startContainer,i=b.startOffset,m=Db(a),n=e.shiftKey,Pi.isElement(s)&&s.hasChildNodes()&&(g=i>s.childNodes.length-1,s=s.childNodes[Math.min(i,s.childNodes.length-1)]||s,i=g&&Pi.isText(s)?s.nodeValue.length:0),(u=hR(h,s))&&((m&&!n||!m&&n)&&(s=vR(a,m,b,s,i)),c=h.getParent(s,h.isBlock),l=c?h.getParent(c.parentNode,h.isBlock):null,f=c?c.nodeName.toUpperCase():"","LI"!==(d=l?l.nodeName.toUpperCase():"")||e.ctrlKey||(l=(c=l).parentNode,f=d),/^(LI|DT|DD)$/.test(f)&&h.isEmpty(c)?oR(a,y,l,c,m):m&&c===a.getBody()||(m=m||"P",Ru(c)?(r=zu(c),h.isEmpty(c)&&sR(c),Yk(a,r)):x()?w():x(!0)?(r=c.parentNode.insertBefore(y(),c),Yk(a,cR(c,"HR")?r:c)):((t=mR(b).cloneRange()).setEndAfter(c),o=t.extractContents(),iR(o),gR(o),r=o.firstChild,h.insertAfter(o,c),fR(h,v,r),bR(h,c),h.isEmpty(c)&&sR(c),r.normalize(),h.isEmpty(r)?(h.remove(r),w()):Yk(a,r)),h.setAttrib(r,"id",""),a.fire("NewBlock",{newBlock:r})))},xR=function(e,t){return Kk(e).filter(function(e){return 0<t.length&&co(kr.fromDom(e),t)}).isSome()},wR=function(e){return xR(e,Pb(e))},CR=function(e){return xR(e,Bb(e))},SR=hg([{br:[]},{block:[]},{none:[]}]),NR=function(e,t){return CR(e)},TR=function(n){return function(e,t){return""===Db(e)===n}},ER=function(n){return function(e,t){return Jk(e)===n}},kR=function(n,r){return function(e,t){return Gk(e)===n.toUpperCase()===r}},RR=function(e){return kR("pre",e)},_R=function(){return kR("summary",!0)},AR=function(n){return function(e,t){return Ab(e)===n}},DR=function(e,t){return wR(e)},OR=function(e,t){return t},PR=function(e){var t=Db(e),n=Xk(e.dom,e.selection.getStart());return n&&e.schema.isValidChild(n.nodeName,t||"P")},BR=function(e,t){return function(n,r){return F(e,function(e,t){return e&&t(n,r)},!0)?y.some(t):y.none()}},MR=function(e,t){return Lh([BR([NR],SR.none()),BR([_R()],SR.br()),BR([RR(!0),AR(!1),OR],SR.br()),BR([RR(!0),AR(!1)],SR.block()),BR([RR(!0),AR(!0),OR],SR.block()),BR([RR(!0),AR(!0)],SR.br()),BR([ER(!0),OR],SR.br()),BR([ER(!0)],SR.block()),BR([TR(!0),OR,PR],SR.block()),BR([TR(!0)],SR.br()),BR([DR],SR.br()),BR([TR(!1),OR],SR.br()),BR([PR],SR.block())],[e,t.shiftKey]).getOr(SR.none())},IR=function(e,t){MR(e,t).fold(function(){By(e,t)},function(){yR(e,t)},OO)},LR=function(e){e.typing&&(e.typing=!1,e.add())},FR=function(e,t){t.isDefaultPrevented()||(t.preventDefault(),LR(e.undoManager),e.undoManager.transact(function(){!1===e.selection.isCollapsed()&&e.execCommand("Delete"),IR(e,t)}))},HR=function(t){t.on("keydown",function(e){e.keyCode===YC.ENTER&&FR(t,e)})},WR=IO(zR=function(n,r){var e=r.container(),t=r.offset();return Pi.isText(e)?(e.insertData(t,n),y.some(rP(e,t+n.length))):ml(r).map(function(e){var t=kr.fromText(n);return r.isAtEnd()?ka(e,t):Ea(e,t),rP(t.dom(),n.length)})},""),UR=IO(zR," "),qR=IO(VR=function(t,n,r){var e=L(Km(kr.fromDom(r.container()),n),ii);return W(e).fold(function(){return jR(t,n.dom(),r).forall(function(e){return!1===rl(e,r,n.dom())})},function(e){return jR(t,e.dom(),r).isNone()})},!(jR=function(e,t,n){return Vl.navigateIgnore(e,t,n,Rg)})),$R=IO(VR,!0),YR="",XR=function(e){return rP.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd()},KR=function(e,t){var n=L(Km(kr.fromDom(t.container()),e),ii);return W(n).getOr(e)},GR=function(e,t){return XR(t)?kg(t):kg(t)||Vl.prevPosition(KR(e,t).dom(),t).exists(kg)},JR=function(e,t){return XR(t)?Eg(t):Eg(t)||Vl.nextPosition(KR(e,t).dom(),t).exists(Eg)},QR=function(e){return b(["pre","pre-line","pre-wrap"],e)},ZR=function(e){return ml(e).bind(function(e){return Za(e,Br)}).exists(function(e){return QR(Zr(e,"white-space"))})},e_=function(e,t){return Vl.prevPosition(e.dom(),t).isNone()},t_=function(e,t){return Vl.nextPosition(e.dom(),t).isNone()},n_=function(e,t){return e_(e,t)||t_(e,t)||qR(e,t)||$R(e,t)||yg(e,t)||bg(e,t)},r_=function(e,t){return!ZR(t)&&(n_(e,t)||GR(e,t)||JR(e,t))},o_=function(e,t){return!ZR(t)&&(qR(e,t)||yg(e,t)||GR(e,t))},i_=function(e){var t=e.container(),n=e.offset();return Pi.isText(t)&&n<t.data.length?rP(t,n+1):e},a_=function(e,t){var n=i_(t);return!ZR(n)&&($R(e,n)||bg(e,n)||JR(e,n))},u_=function(e,t){return o_(e,t)||a_(e,t)},s_=function(e,t){return Cg(e.charAt(t))},c_=function(e){var t=e.container();return Pi.isText(t)&&gr(t.data,YR)},l_=function(e){return Ae(e.split(""),function(e,t,n){return Cg(e)&&0<t&&t<n.length-1&&Ng(n[t-1])&&Ng(n[t+1])?" ":e}).join("")},f_=function(e,t){var n=t.data,r=rP(t,0);return!(!s_(n,0)||u_(e,r)||(t.data=" "+n.slice(1),0))},d_=function(e){var t=e.data,n=l_(t);return n!==t&&(e.data=n,!0)},m_=function(e,t){var n=t.data,r=rP(t,n.length-1);return!(!s_(n,n.length-1)||u_(e,r)||(t.data=n.slice(0,-1)+" ",0))},g_=function(r,e){return y.some(e).filter(c_).bind(function(e){var t=e.container(),n=f_(r,t)||d_(t)||m_(r,t);return n?y.some(e):y.none()})},h_=function(t){var e=kr.fromDom(t.getBody());t.selection.isCollapsed()&&g_(e,rP.fromRangeStart(t.selection.getRng())).each(function(e){t.selection.setRng(e.toRange())})},p_=function(t){return function(e){return e.fold(function(e){return Vl.prevPosition(t.dom(),Us.before(e))},function(e){return Vl.firstPositionIn(e)},function(e){return Vl.lastPositionIn(e)},function(e){return Vl.nextPosition(t.dom(),Us.after(e))})}},v_=function(t,n){return function(e){return r_(t,e)?WR(n):UR(n)}},b_=function(t){return function(e){return t.selection.setRng(e.toRange()),t.nodeChanged(),!0}},y_=function(e){var t,n,r=Us.fromRangeStart(e.selection.getRng()),o=kr.fromDom(e.getBody());return!!e.selection.isCollapsed()&&(t=IO(ym.isInlineTarget,e),n=Us.fromRangeStart(e.selection.getRng()),op(t,e.getBody(),n).bind(p_(o)).bind(v_(o,r)).exists(b_(e)))},x_=function(e,t){Lk([{keyCode:YC.SPACEBAR,action:Ik(y_,e)}],t).each(function(e){t.preventDefault()})},w_=function(t){t.on("keydown",function(e){!1===e.isDefaultPrevented()&&x_(t,e)})},C_=function(e){return tu(kr.fromDom(e.getBody()),"*[data-mce-caret]").fold(BO(null),function(e){return e.dom()})},S_=function(e){e.selection.setRng(e.selection.getRng())},N_=function(e,t){t.hasAttribute("data-mce-caret")&&(zu(t),S_(e),e.selection.scrollIntoView(t))},T_=function(e,t){var n=C_(e);if(n)return"compositionstart"===t.type?(t.preventDefault(),t.stopPropagation(),void N_(e,n)):void(Du(n)&&(N_(e,n),e.undoManager.add()))},E_=function(e){e.on("keyup compositionstart",IO(T_,e))},k_=Tr.detect().browser,R_=function(e){var t=Ia(function(){e.composing||h_(e)},0);k_.isIE()&&(e.on("keypress",function(e){t.throttle()}),e.on("remove",function(e){t.cancel()}))},__=function(t){R_(t),t.on("input",function(e){!1===e.isComposing&&h_(t)})},A_=function(e,t){Lk([{keyCode:YC.END,action:XE(e,!0)},{keyCode:YC.HOME,action:XE(e,!1)}],t).each(function(e){t.preventDefault()})},D_=function(t){t.on("keydown",function(e){!1===e.isDefaultPrevented()&&A_(t,e)})},O_=function(e){var t=Tp.setupSelectedState(e);E_(e),Hk(e,t),Uk(e,t),HR(e),w_(e),__(e),D_(e)},P_=function(e){return Pi.isElement(e)&&si(kr.fromDom(e))},B_=function(e){var t,n=e.selection.getRng(),r=rP.fromRangeStart(n),o=rP.fromRangeEnd(n);rP.isElementPosition(r)&&(t=r.container(),P_(t)&&Vl.firstPositionIn(t).each(function(e){return n.setStart(e.container(),e.offset())})),rP.isElementPosition(o)&&(t=r.container(),P_(t)&&Vl.lastPositionIn(t).each(function(e){return n.setEnd(e.container(),e.offset())})),e.selection.setRng(Sd(n))},M_=function(t){t.on("click",function(e){3<=e.detail&&B_(t)})},I_=function(t){t.on("click",function(e){t.dom.getParent(e.target,"details")&&e.preventDefault()})},L_=function(e){e.parser.addNodeFilter("details",function(e){I(e,function(e){e.attr("data-mce-open",e.attr("open")),e.attr("open","open")})}),e.serializer.addNodeFilter("details",function(e){I(e,function(e){var t=e.attr("data-mce-open");e.attr("open",P(t)?t:null),e.attr("data-mce-open",null)})})},F_=function(e){I_(e),L_(e)},H_=ya.DOM,z_=function(e,t){var n=kr.fromDom(e.getDoc().head),r=kr.fromTag("style");$r(r,"type","text/css"),_a(r,kr.fromText(t)),_a(n,r)},W_=function(u){var e=vP(u.settings,u.schema);return e.addAttributeFilter("src,href,style,tabindex",function(e,t){for(var n,r,o,i=e.length,a=u.dom;i--;)if(r=(n=e[i]).attr(t),o="data-mce-"+t,!n.attributes.map[o]){if(0===r.indexOf("data:")||0===r.indexOf("blob:"))continue;"style"===t?((r=a.serializeStyle(a.parseStyle(r),n.name)).length||(r=null),n.attr(o,r),n.attr(t,r)):"tabindex"===t?(n.attr(o,r),n.attr(t,null)):n.attr(o,u.convertURL(r,t,n.name))}}),e.addNodeFilter("script",function(e){for(var t,n,r=e.length;r--;)0!==(n=(t=e[r]).attr("type")||"no/type").indexOf("mce-")&&t.attr("type","mce-"+n)}),e.addNodeFilter("#cdata",function(e){for(var t,n=e.length;n--;)(t=e[n]).type=8,t.name="#comment",t.value="[CDATA["+t.value+"]]"}),e.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(e){for(var t,n=e.length,r=u.schema.getNonEmptyElements();n--;)(t=e[n]).isEmpty(r)&&0===t.getAll("br").length&&(t.append(new GN("br",1)).shortEnded=!0)}),e},U_=function(t){t.settings.auto_focus&&Pe.setEditorTimeout(t,function(){var e;(e=!0===t.settings.auto_focus?t:t.editorManager.get(t.settings.auto_focus)).destroyed||e.focus()},100)},j_=function(e){e.bindPendingEventDelegates(),e.initialized=!0,e.fire("init"),e.focus(!0),e.nodeChanged({initial:!0}),e.execCallback("init_instance_callback",e),U_(e)},V_=function(e){return e.inline?H_.styleSheetLoader:e.dom.styleSheetLoader},q_=function(t,e){var n,r,o=t.settings,i=t.getElement(),a=t.getDoc();o.inline||(t.getElement().style.visibility=t.orgVisibility),e||o.content_editable||(a.open(),a.write(t.iframeHTML),a.close()),o.content_editable&&(t.on("remove",function(){var e=this.getBody();H_.removeClass(e,"mce-content-body"),H_.removeClass(e,"mce-edit-focus"),H_.setAttrib(e,"contentEditable",null)}),H_.addClass(i,"mce-content-body"),t.contentDocument=a=o.content_document||_e.document,t.contentWindow=o.content_window||_e.window,t.bodyElement=i,o.content_document=o.content_window=null,o.root_name=i.nodeName.toLowerCase()),(n=t.getBody()).disabled=!0,t.readonly=o.readonly,t.readonly||(t.inline&&"static"===H_.getStyle(n,"position",!0)&&(n.style.position="relative"),n.contentEditable=t.getParam("content_editable_state",!0)),n.disabled=!1,t.editorUpload=dP(t),t.schema=QO(o),t.dom=ya(a,{keep_values:!0,url_converter:t.convertURL,url_converter_scope:t,hex_colors:o.force_hex_style_colors,class_filter:o.class_filter,update_styles:!0,root_element:t.inline?t.getBody():null,collect:o.content_editable,schema:t.schema,contentCssCors:Yb(t),onSetAttrib:function(e){t.fire("SetAttrib",e)}}),t.parser=W_(t),t.serializer=bP(o,t),t.selection=xE(t.dom,t.getWin(),t.serializer,t),t.annotator=oP(t),t.formatter=pP(t),t.undoManager=hP(t),t._nodeChangeDispatcher=new mP(t),t._selectionOverrides=JC(t),F_(t),M_(t),O_(t),zw(t),t.fire("PreInit"),o.browser_spellcheck||o.gecko_spellcheck||(a.body.spellcheck=!1,H_.setAttrib(n,"spellcheck","false")),t.quirks=xP(t),t.fire("PostRender"),o.directionality&&(n.dir=o.directionality),o.nowrap&&(n.style.whiteSpace="nowrap"),o.protect&&t.on("BeforeSetContent",function(t){un.each(o.protect,function(e){t.content=t.content.replace(e,function(e){return"\x3c!--mce:protected "+escape(e)+"--\x3e"})})}),t.on("SetContent",function(){t.addVisual(t.getBody())}),t.load({initial:!0,format:"html"}),t.startContent=t.getContent({format:"raw"}),t.on("compositionstart compositionend",function(e){t.composing="compositionstart"===e.type}),0<t.contentStyles.length&&(r="",un.each(t.contentStyles,function(e){r+=e+"\r\n"}),t.dom.addStyle(r)),V_(t).loadAll(t.contentCSS,function(e){j_(t)},function(e){j_(t)}),o.content_style&&z_(t,o.content_style)},$_=ya.DOM,Y_=function(e,t){var n,r;return!!(_e.document.domain!==_e.window.location.hostname&&Oe.ie&&Oe.ie<12)&&(n=Bw.uuid("mce"),e[n]=function(){q_(e)},r='javascript:(function(){document.open();document.domain="'+_e.document.domain+'";var ed = window.parent.tinymce.get("'+e.id+'");document.write(ed.iframeHTML);document.close();ed.'+n+"(true);})()",$_.setAttrib(t,"src",r),!0)},X_=function(e){var t="number"==typeof e?e+"px":e;return t||""},K_=function(e,t,n,r){var o=kr.fromTag("iframe");return Yr(o,r),Yr(o,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:t}),Qr(o,{width:"100%",height:X_(n),display:"block"}),o},G_=function(e){var t,n,r;return r=Tb(e)+"<html><head>",Eb(e)!==e.documentBaseUrl&&(r+='<base href="'+e.documentBaseURI.getURI()+'" />'),r+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />',t=kb(e),n=Rb(e),_b(e)&&(r+='<meta http-equiv="Content-Security-Policy" content="'+_b(e)+'" />'),r+='</head><body id="'+t+'" class="mce-content-body '+n+'" data-id="'+e.id+'"><br></body></html>'},J_=function(e,t){var n,r=e.editorManager.translate("Rich Text Area. Press ALT-F9 for menu. Press ALT-F10 for toolbar. Press ALT-0 for help"),o=K_(e.id,r,t.height,Nb(e)).dom();return o.onload=function(){o.onload=null,e.fire("load")},n=Y_(e,o),e.contentAreaContainer=t.iframeContainer,e.iframeElement=o,e.iframeHTML=G_(e),$_.add(t.iframeContainer,o),n},Q_=function(e,t){var n=J_(e,t);t.editorContainer&&($_.get(t.editorContainer).style.display=e.orgDisplay,e.hidden=$_.isHidden(t.editorContainer)),e.getElement().style.display="none",$_.setAttrib(e.id,"aria-hidden","true"),n||q_(e)},Z_=ya.DOM,eA=function(t,n,r){var e,o=yw.get(r),i=yw.urls[r]||t.documentBaseUrl.replace(/\/$/,"");if(r=un.trim(r),o&&-1===un.inArray(n,r)){if(un.each(yw.dependencies(r),function(e){eA(t,n,e)}),t.plugins[r])return;try{e=new o(t,i,t.$),(t.plugins[r]=e).init&&(e.init(t,i),n.push(r))}catch(e){bw.pluginInitError(t,r,e)}}},tA=function(e){return e.replace(/^\-/,"")},nA=function(t){var n=[];un.each(t.settings.plugins.split(/[ ,]/),function(e){eA(t,n,tA(e))})},rA=function(e){var t,n=e.settings.theme;P(n)?(e.settings.theme=tA(n),t=xw.get(n),e.theme=new t(e,xw.urls[n]),e.theme.init&&e.theme.init(e,xw.urls[n]||e.documentBaseUrl.replace(/\/$/,""),e.$)):e.theme={}},oA=function(e){var t,n=e.settings,r=e.getElement(),o=n.width||Z_.getStyle(r,"width")||"100%",i=n.height||Z_.getStyle(r,"height")||r.offsetHeight,a=n.min_height||100,u=/^[0-9\.]+(|px)$/i;return u.test(""+o)&&(o=Math.max(parseInt(o,10),100)),u.test(""+i)&&(i=Math.max(parseInt(i,10),a)),t=e.theme.renderUI({targetNode:r,width:o,height:i,deltaWidth:n.delta_width,deltaHeight:n.delta_height}),n.content_editable||(i=(t.iframeHeight||i)+("number"==typeof i?t.deltaHeight||0:""))<a&&(i=a),t.height=i,t},iA=function(e){var t=e.getElement(),n=e.settings.theme(e,t);return n.editorContainer.nodeType&&(n.editorContainer.id=n.editorContainer.id||e.id+"_parent"),n.iframeContainer&&n.iframeContainer.nodeType&&(n.iframeContainer.id=n.iframeContainer.id||e.id+"_iframecontainer"),n.height=n.iframeHeight?n.iframeHeight:t.offsetHeight,n},aA=function(e){return{editorContainer:e,iframeContainer:e}},uA=function(e){var t=Z_.create("div");return Z_.insertAfter(t,e),aA(t)},sA=function(e){var t=e.getElement();return e.inline?aA(null):uA(t)},cA=function(e){var t=e.settings,n=e.getElement();return e.orgDisplay=n.style.display,P(t.theme)?oA(e):M(t.theme)?iA(e):sA(e)},lA=function(t){var e,n=t.settings,r=t.getElement();return t.rtl=n.rtl_ui||t.editorManager.i18n.rtl,t.editorManager.i18n.setCode(n.language),n.aria_label=n.aria_label||Z_.getAttrib(r,"aria-label",t.getLang("aria.rich_text_area")),t.fire("ScriptsLoaded"),rA(t),nA(t),e=cA(t),t.editorContainer=e.editorContainer?e.editorContainer:null,n.content_css&&un.each(un.explode(n.content_css),function(e){t.contentCSS.push(t.documentBaseURI.toAbsolute(e))}),n.content_editable?q_(t):Q_(t,e)},fA=ya.DOM,dA=function(e){return"-"===e.charAt(0)},mA=function(e,t){var n=t.settings;n.language&&"en"!==n.language&&!n.language_url&&(n.language_url=t.editorManager.baseURL+"/langs/"+n.language+".js"),n.language_url&&!t.editorManager.i18n.data[n.language]&&e.add(n.language_url)},gA=function(e,t,n,r){var o,i=t.settings,a=i.theme;P(a)?(dA(a)||xw.urls.hasOwnProperty(a)||((o=i.theme_url)?xw.load(a,t.documentBaseURI.toAbsolute(o)):xw.load(a,"themes/"+a+"/theme"+n+".js")),e.loadQueue(function(){xw.waitFor(a,r)})):r()},hA=function(n,r){un.isArray(n.plugins)&&(n.plugins=n.plugins.join(" ")),un.each(n.external_plugins,function(e,t){yw.load(t,e),n.plugins+=" "+t}),un.each(n.plugins.split(/[ ,]/),function(e){if((e=un.trim(e))&&!yw.urls[e])if(dA(e)){e=e.substr(1,e.length);var t=yw.dependencies(e);un.each(t,function(e){var t={prefix:"plugins/",resource:e,suffix:"/plugin"+r+".js"};e=yw.createUrl(t,e),yw.load(e.resource,e)})}else yw.load(e,{prefix:"plugins/",resource:e,suffix:"/plugin"+r+".js"})})},pA=function(t,e){var n=Na.ScriptLoader;gA(n,t,e,function(){mA(n,t),hA(t.settings,e),n.loadQueue(function(){t.removed||lA(t)},t,function(e){bw.pluginLoadError(t,e[0]),t.removed||lA(t)})})},vA=function(t){var e,n=t.settings,r=t.id,o=function(){fA.unbind(_e.window,"ready",o),t.render()};Le.Event.domLoaded?t.getElement()&&Oe.contentEditable&&(n.inline?t.inline=!0:(t.orgVisibility=t.getElement().style.visibility,t.getElement().style.visibility="hidden"),(e=t.getElement().form||fA.getParent(r,"form"))&&(t.formElement=e,n.hidden_input&&!/TEXTAREA|INPUT/i.test(t.getElement().nodeName)&&(fA.insertAfter(fA.create("input",{type:"hidden",name:r}),r),t.hasHiddenInput=!0),t.formEventDelegate=function(e){t.fire(e.type,e)},fA.bind(e,"submit reset",t.formEventDelegate),t.on("reset",function(){t.setContent(t.startContent,{format:"raw"})}),!n.submit_patch||e.submit.nodeType||e.submit.length||e._mceOldSubmit||(e._mceOldSubmit=e.submit,e.submit=function(){return t.editorManager.triggerSave(),t.setDirty(!1),e._mceOldSubmit(e)})),t.windowManager=lP(t),t.notificationManager=cP(t),"xml"===n.encoding&&t.on("GetContent",function(e){e.save&&(e.content=fA.encode(e.content))}),n.add_form_submit_trigger&&t.on("submit",function(){t.initialized&&t.save()}),n.add_unload_trigger&&(t._beforeUnload=function(){!t.initialized||t.destroyed||t.isHidden()||t.save({format:"raw",no_events:!0,set_dirty:!1})},t.editorManager.on("BeforeUnload",t._beforeUnload)),t.editorManager.add(t),pA(t,t.suffix)):fA.bind(_e.window,"ready",o)},bA=function(e,t,n){var r=e.sidebars?e.sidebars:[];r.push({name:t,settings:n}),e.sidebars=r},yA=un.each,xA=un.trim,wA="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),CA={ftp:21,http:80,https:443,mailto:25},(SA=function(r,e){var t,n,o,i=this;r=xA(r),t=(e=i.settings=e||{}).base_uri,/^([\w\-]+):([^\/]{2})/i.test(r)||/^\s*#/.test(r)?i.source=r:(o=0===r.indexOf("//"),0!==r.indexOf("/")||o||(r=(t&&t.protocol||"http")+"://mce_host"+r),/^[\w\-]*:?\/\//.test(r)||(n=e.base_uri?e.base_uri.path:new SA(_e.document.location.href).directory,r=""==e.base_uri.protocol?"//mce_host"+i.toAbsPath(n,r):(r=/([^#?]*)([#?]?.*)/.exec(r),(t&&t.protocol||"http")+"://mce_host"+i.toAbsPath(n,r[1])+r[2])),r=r.replace(/@@/g,"(mce_at)"),r=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(r),yA(wA,function(e,t){var n=r[t];n&&(n=n.replace(/\(mce_at\)/g,"@@")),i[e]=n}),t&&(i.protocol||(i.protocol=t.protocol),i.userInfo||(i.userInfo=t.userInfo),i.port||"mce_host"!==i.host||(i.port=t.port),i.host&&"mce_host"!==i.host||(i.host=t.host),i.source=""),o&&(i.protocol=""))}).prototype={setPath:function(e){e=/^(.*?)\/?(\w+)?$/.exec(e),this.path=e[0],this.directory=e[1],this.file=e[2],this.source="",this.getURI()},toRelative:function(e){var t,n,r,o=this;return"./"===e?e:"mce_host"!==(e=new SA(e,{base_uri:o})).host&&o.host!==e.host&&e.host||o.port!==e.port||o.protocol!==e.protocol&&""!==e.protocol?e.getURI():(n=o.getURI())===(r=e.getURI())||"/"===n.charAt(n.length-1)&&n.substr(0,n.length-1)===r?n:(t=o.toRelPath(o.path,e.path),e.query&&(t+="?"+e.query),e.anchor&&(t+="#"+e.anchor),t)},toAbsolute:function(e,t){return(e=new SA(e,{base_uri:this})).getURI(t&&this.isSameOrigin(e))},isSameOrigin:function(e){if(this.host==e.host&&this.protocol==e.protocol){if(this.port==e.port)return!0;var t=CA[this.protocol];if(t&&(this.port||t)==(e.port||t))return!0}return!1},toRelPath:function(e,t){var n,r,o,i=0,a="";if(e=(e=e.substring(0,e.lastIndexOf("/"))).split("/"),n=t.split("/"),e.length>=n.length)for(r=0,o=e.length;r<o;r++)if(r>=n.length||e[r]!==n[r]){i=r+1;break}if(e.length<n.length)for(r=0,o=n.length;r<o;r++)if(r>=e.length||e[r]!==n[r]){i=r+1;break}if(1===i)return t;for(r=0,o=e.length-(i-1);r<o;r++)a+="../";for(r=i-1,o=n.length;r<o;r++)a+=r!==i-1?"/"+n[r]:n[r];return a},toAbsPath:function(e,t){var n,r,o,i=0,a=[];for(r=/\/$/.test(t)?"/":"",e=e.split("/"),t=t.split("/"),yA(e,function(e){e&&a.push(e)}),e=a,n=t.length-1,a=[];0<=n;n--)0!==t[n].length&&"."!==t[n]&&(".."!==t[n]?0<i?i--:a.push(t[n]):i++);return 0!==(o=(n=e.length-i)<=0?a.reverse().join("/"):e.slice(0,n).join("/")+"/"+a.reverse().join("/")).indexOf("/")&&(o="/"+o),r&&o.lastIndexOf("/")!==o.length-1&&(o+=r),o},getURI:function(e){var t,n=this;return n.source&&!e||(t="",e||(n.protocol?t+=n.protocol+"://":t+="//",n.userInfo&&(t+=n.userInfo+"@"),n.host&&(t+=n.host),n.port&&(t+=":"+n.port)),n.path&&(t+=n.path),n.query&&(t+="?"+n.query),n.anchor&&(t+="#"+n.anchor),n.source=t),n.source}},SA.parseDataUri=function(e){var t,n;return e=decodeURIComponent(e).split(","),(n=/data:([^;]+)/.exec(e[0]))&&(t=n[1]),{type:t,data:e[1]}},SA.getDocumentBaseUrl=function(e){var t;return t=0!==e.protocol.indexOf("http")&&"file:"!==e.protocol?e.href:e.protocol+"//"+e.host+e.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(t)&&(t=t.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(t)||(t+="/")),t},TA=function(e,t){var n=Db(e),r=new RegExp("^(<"+n+"[^>]*>(&nbsp;|&#160;|\\s||<br \\/>|)<\\/"+n+">[\r\n]*|<br \\/>[\r\n]*)$");return t.replace(r,"")},EA=function(e,t,n){var r;if(t.format=t.format?t.format:NA,t.get=!0,t.getInner=!0,t.no_events||e.fire("BeforeGetContent",t),"raw"===t.format)r=un.trim(aS.trimExternal(e.serializer,n.innerHTML));else if("text"===t.format)r=Tu(n.innerText||n.textContent);else{if("tree"===t.format)return e.serializer.serialize(n,t);r=TA(e,e.serializer.serialize(n,t))}return"text"===t.format||gi(kr.fromDom(n))?t.content=r:t.content=un.trim(r),t.no_events||e.fire("GetContent",t),t.content},kA=function(t,n){return void 0===n&&(n={}),y.from(t.getBody()).fold(BO("tree"===n.format?new GN("body",11):""),function(e){return EA(t,n,e)})},RA=function(e,t){t(e),e.firstChild&&RA(e.firstChild,t),e.next&&RA(e.next,t)},_A=function(e,n,t){var r,o={},i={},a=[];for(r in t.firstChild&&RA(t.firstChild,function(t){I(e,function(e){e.name===t.name&&(o[e.name]?o[e.name].nodes.push(t):o[e.name]={filter:e,nodes:[t]})}),I(n,function(e){"string"==typeof t.attr(e.name)&&(i[e.name]?i[e.name].nodes.push(t):i[e.name]={filter:e,nodes:[t]})})}),o)o.hasOwnProperty(r)&&a.push(o[r]);for(r in i)i.hasOwnProperty(r)&&a.push(i[r]);return a},AA=function(e,t,n){var r=_A(e,t,n);I(r,function(t){I(t.filter.callbacks,function(e){e(t.nodes,t.filter.name,{})})})},DA=NA="html",OA=function(e){return e instanceof GN},PA=function(r){Gx(r)&&Vl.firstPositionIn(r.getBody()).each(function(e){var t=e.getNode(),n=Pi.isTable(t)?Vl.firstPositionIn(t).getOr(e):e;r.selection.setRng(n.toRange())})},BA=function(e,t){e.dom.setHTML(e.getBody(),t),PA(e)},MA=function(e,t,n,r){var o,i;return 0===n.length||/^\s+$/.test(n)?(i='<br data-mce-bogus="1">',"TABLE"===t.nodeName?n="<tr><td>"+i+"</td></tr>":/^(UL|OL)$/.test(t.nodeName)&&(n="<li>"+i+"</li>"),(o=Db(e))&&e.schema.isValidChild(t.nodeName.toLowerCase(),o.toLowerCase())?(n=i,n=e.dom.createHTML(o,e.settings.forced_root_block_attrs,n)):n||(n='<br data-mce-bogus="1">'),BA(e,n),e.fire("SetContent",r)):("raw"!==r.format&&(n=aP({validate:e.validate},e.schema).serialize(e.parser.parse(n,{isRootContent:!0,insert:!0}))),r.content=gi(kr.fromDom(t))?n:un.trim(n),BA(e,r.content),r.no_events||e.fire("SetContent",r)),r.content},IA=function(e,t,n,r){AA(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),n);var o=aP({validate:e.validate},e.schema).serialize(n);return r.content=gi(kr.fromDom(t))?o:un.trim(o),BA(e,r.content),r.no_events||e.fire("SetContent",r),n},LA=function(t,n,r){return void 0===r&&(r={}),r.format=r.format?r.format:DA,r.set=!0,r.content=OA(n)?"":n,OA(n)||r.no_events||(t.fire("BeforeSetContent",r),n=r.content),y.from(t.getBody()).fold(BO(n),function(e){return OA(n)?IA(t,e,n,r):MA(t,e,n,r)})},FA=ya.DOM,HA=function(e){FA.setStyle(e.id,"display",e.orgDisplay)},zA=function(e){return y.from(e).each(function(e){return e.destroy()})},WA=function(e){e.contentAreaContainer=e.formElement=e.container=e.editorContainer=null,e.bodyElement=e.contentDocument=e.contentWindow=null,e.iframeElement=e.targetElm=null,e.selection&&(e.selection=e.selection.win=e.selection.dom=e.selection.dom.doc=null)},UA=function(e){var t=e.formElement;t&&(t._mceOldSubmit&&(t.submit=t._mceOldSubmit,t._mceOldSubmit=null),FA.unbind(t,"submit reset",e.formEventDelegate))},jA=function(e){var t,n,r,o;e.removed||(t=e._selectionOverrides,n=e.editorUpload,r=e.getBody(),o=e.getElement(),r&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&o&&FA.remove(o.nextSibling),dx(e),e.editorManager.remove(e),!e.inline&&r&&HA(e),mx(e),FA.remove(e.getContainer()),zA(t),zA(n),e.destroy())},VA=function(e,t){var n=e.selection,r=e.dom;e.destroyed||(t||e.removed?(t||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),zA(n),zA(r)),UA(e),WA(e),e.destroyed=!0):e.remove())},qA=ya.DOM,$A=un.extend,YA=un.each,XA=un.resolve,KA=Oe.ie,(GA=function(e,t,n){var r=this,o=r.documentBaseUrl=n.documentBaseURL,i=n.baseURI;t=nm(r,e,o,n.defaultSettings,t),r.settings=t,tP.language=t.language||"en",tP.languageLoad=t.language_load,tP.baseURL=n.baseURL,r.id=e,r.setDirty(!1),r.plugins={},r.documentBaseURI=new SA(t.document_base_url,{base_uri:i}),r.baseURI=i,r.contentCSS=[],r.contentStyles=[],r.shortcuts=new sP(r),r.loadedCSS={},r.editorCommands=new uP(r),r.suffix=n.suffix,r.editorManager=n,r.inline=t.inline,r.buttons={},r.menuItems={},t.cache_suffix&&(Oe.cacheSuffix=t.cache_suffix.replace(/^[\?\&]+/,"")),!1===t.override_viewport&&(Oe.overrideViewPort=!1),n.fire("SetupEditor",{editor:r}),r.execCallback("setup",r),r.$=kn.overrideDefaults(function(){return{context:r.inline?r.getBody():r.getDoc(),element:r.getBody()}})}).prototype={render:function(){vA(this)},focus:function(e){Kx(this,e)},hasFocus:function(){return Gx(this)},execCallback:function(e){var t,n,r,o,i=[];for(t=1;t<arguments.length;t++)i[t-1]=arguments[t];if(r=(n=this).settings[e])return n.callbackLookup&&(o=n.callbackLookup[e])&&(r=o.func,o=o.scope),"string"==typeof r&&(o=(o=r.replace(/\.\w+$/,""))?XA(o):0,r=XA(r),n.callbackLookup=n.callbackLookup||{},n.callbackLookup[e]={func:r,scope:o}),r.apply(o||n,Array.prototype.slice.call(arguments,1))},translate:function(e){if(e&&un.is(e,"string")){var n=this.settings.language||"en",r=this.editorManager.i18n;e=r.data[n+"."+e]||e.replace(/\{\#([^\}]+)\}/g,function(e,t){return r.data[n+"."+t]||"{#"+t+"}"})}return this.editorManager.translate(e)},getLang:function(e,t){return this.editorManager.i18n.data[(this.settings.language||"en")+"."+e]||(void 0!==t?t:"{#"+e+"}")},getParam:function(e,t,n){return um(this,e,t,n)},nodeChanged:function(e){this._nodeChangeDispatcher.nodeChanged(e)},addButton:function(e,t){var n=this;t.cmd&&(t.onclick=function(){n.execCommand(t.cmd)}),t.stateSelector&&void 0===t.active&&(t.active=!1),t.text||t.icon||(t.icon=e),t.tooltip=t.tooltip||t.title,n.buttons[e]=t},addSidebar:function(e,t){return bA(this,e,t)},addMenuItem:function(e,t){var n=this;t.cmd&&(t.onclick=function(){n.execCommand(t.cmd)}),n.menuItems[e]=t},addContextToolbar:function(e,t){var n,r=this;r.contextToolbars=r.contextToolbars||[],"string"==typeof e&&(n=e,e=function(e){return r.dom.is(e,n)}),r.contextToolbars.push({id:Bw.uuid("mcet"),predicate:e,items:t})},addCommand:function(e,t,n){this.editorCommands.addCommand(e,t,n)},addQueryStateHandler:function(e,t,n){this.editorCommands.addQueryStateHandler(e,t,n)},addQueryValueHandler:function(e,t,n){this.editorCommands.addQueryValueHandler(e,t,n)},addShortcut:function(e,t,n,r){this.shortcuts.add(e,t,n,r)},execCommand:function(e,t,n,r){return this.editorCommands.execCommand(e,t,n,r)},queryCommandState:function(e){return this.editorCommands.queryCommandState(e)},queryCommandValue:function(e){return this.editorCommands.queryCommandValue(e)},queryCommandSupported:function(e){return this.editorCommands.queryCommandSupported(e)},show:function(){this.hidden&&(this.hidden=!1,this.inline?this.getBody().contentEditable=!0:(qA.show(this.getContainer()),qA.hide(this.id)),this.load(),this.fire("show"))},hide:function(){var e=this,t=e.getDoc();e.hidden||(KA&&t&&!e.inline&&t.execCommand("SelectAll"),e.save(),e.inline?(e.getBody().contentEditable=!1,e===e.editorManager.focusedEditor&&(e.editorManager.focusedEditor=null)):(qA.hide(e.getContainer()),qA.setStyle(e.id,"display",e.orgDisplay)),e.hidden=!0,e.fire("hide"))},isHidden:function(){return!!this.hidden},setProgressState:function(e,t){this.fire("ProgressState",{state:e,time:t})},load:function(e){var t,n=this,r=n.getElement();return n.removed?"":r?((e=e||{}).load=!0,t=n.setContent(void 0!==r.value?r.value:r.innerHTML,e),e.element=r,e.no_events||n.fire("LoadContent",e),e.element=r=null,t):void 0},save:function(e){var t,n,r=this,o=r.getElement();if(o&&r.initialized&&!r.removed)return(e=e||{}).save=!0,e.element=o,e.content=r.getContent(e),e.no_events||r.fire("SaveContent",e),"raw"===e.format&&r.fire("RawSaveContent",e),t=e.content,/TEXTAREA|INPUT/i.test(o.nodeName)?o.value=t:(!e.is_removing&&r.inline||(o.innerHTML=t),(n=qA.getParent(r.id,"form"))&&YA(n.elements,function(e){if(e.name===r.id)return e.value=t,!1})),e.element=o=null,!1!==e.set_dirty&&r.setDirty(!1),t},setContent:function(e,t){return LA(this,e,t)},getContent:function(e){return kA(this,e)},insertContent:function(e,t){t&&(e=$A({content:e},t)),this.execCommand("mceInsertContent",!1,e)},isDirty:function(){return!this.isNotDirty},setDirty:function(e){var t=!this.isNotDirty;this.isNotDirty=!e,e&&e!==t&&this.fire("dirty")},setMode:function(e){xx(this,e)},getContainer:function(){return this.container||(this.container=qA.get(this.editorContainer||this.id+"_parent")),this.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return this.targetElm||(this.targetElm=qA.get(this.id)),this.targetElm},getWin:function(){var e,t=this;return t.contentWindow||(e=t.iframeElement)&&(t.contentWindow=e.contentWindow),t.contentWindow},getDoc:function(){var e,t=this;return t.contentDocument||(e=t.getWin())&&(t.contentDocument=e.document),t.contentDocument},getBody:function(){var e=this.getDoc();return this.bodyElement||(e?e.body:null)},convertURL:function(e,t,n){var r=this.settings;return r.urlconverter_callback?this.execCallback("urlconverter_callback",e,n,!0,t):!r.convert_urls||n&&"LINK"===n.nodeName||0===e.indexOf("file:")||0===e.length?e:r.relative_urls?this.documentBaseURI.toRelative(e):e=this.documentBaseURI.toAbsolute(e,r.remove_script_host)},addVisual:function(e){var n,r=this,o=r.settings,i=r.dom;e=e||r.getBody(),void 0===r.hasVisual&&(r.hasVisual=o.visual),YA(i.select("table,a",e),function(e){var t;switch(e.nodeName){case"TABLE":return n=o.visual_table_class||"mce-item-table",void((t=i.getAttrib(e,"border"))&&"0"!==t||!r.hasVisual?i.removeClass(e,n):i.addClass(e,n));case"A":return void(i.getAttrib(e,"href")||(t=i.getAttrib(e,"name")||e.id,n=o.visual_anchor_class||"mce-item-anchor",t&&r.hasVisual?i.addClass(e,n):i.removeClass(e,n)))}}),r.fire("VisualAid",{element:e,hasVisual:r.hasVisual})},remove:function(){jA(this)},destroy:function(e){VA(this,e)},uploadImages:function(e){return this.editorUpload.uploadImages(e)},_scanForImages:function(){return this.editorUpload.scanForImages()}},$A(GA.prototype,Ax),JA={isEditorUIElement:function(e){return-1!==e.className.toString().indexOf("mce-")}},QA=function(e){return"nodechange"===e.type&&e.selectionChange},ZA=function(e,t){var n=function(){t.throttle()};ya.DOM.bind(_e.document,"mouseup",n),e.on("remove",function(){ya.DOM.unbind(_e.document,"mouseup",n)})},eD=function(e){e.on("focusout",function(){Xy(e)})},tD=function(e,t){e.on("mouseup touchend",function(e){t.throttle()})},nD=function(t,e){Tr.detect().browser.isIE()?eD(t):tD(t,e),t.on("keyup nodechange",function(e){QA(e)||Xy(t)})},rD=function(e){var t=Ia(function(){Xy(e)},0);e.inline&&ZA(e,t),e.on("init",function(){nD(e,t)}),e.on("remove",function(){t.cancel()})},iD=ya.DOM,uD=function(t,e){var n=t?t.settings.custom_ui_selector:"",r=iD.getParent(e,function(e){return aD(e)||!!n&&t.dom.is(e,n)});return null!==r},sD=function(){try{return _e.document.activeElement}catch(e){return _e.document.body}},cD=function(r,e){var t=e.editor;rD(t),t.on("focusin",function(){var e=this,t=r.focusedEditor;t!==e&&(t&&t.fire("blur",{focusedEditor:e}),r.setActive(e),(r.focusedEditor=e).fire("focus",{blurredEditor:t}),e.focus(!0))}),t.on("focusout",function(){var t=this;Pe.setEditorTimeout(t,function(){var e=r.focusedEditor;uD(t,sD())||e!==t||(t.fire("blur",{focusedEditor:null}),r.focusedEditor=null)})}),oD||(oD=function(e){var t=r.activeEditor,n=e.target;t&&n.ownerDocument===_e.document&&(n===_e.document.body||uD(t,n)||r.focusedEditor!==t||(t.fire("blur",{focusedEditor:null}),r.focusedEditor=null))},iD.bind(_e.document,"focusin",oD))},lD=function(e,t){e.focusedEditor===t.editor&&(e.focusedEditor=null),e.activeEditor||(iD.unbind(_e.document,"focusin",oD),oD=null)},fD=function(e){e.on("AddEditor",IO(cD,e)),e.on("RemoveEditor",IO(lD,e))},aD=function(e){return JA.isEditorUIElement(e)},dD=ya.DOM,mD=un.explode,gD=un.each,hD=un.extend,pD=0,yD=!1,wD=[],CD=function(e){return"length"!==e},SD=function(t){var n=t.type;gD(bD.get(),function(e){switch(n){case"scroll":e.fire("ScrollWindow",t);break;case"resize":e.fire("ResizeWindow",t)}})},ND=function(e){e!==yD&&(e?kn(window).on("resize scroll",SD):kn(window).off("resize scroll",SD),yD=e)},TD=function(t){var e,n=wD;for(delete xD[t.id],e=0;e<xD.length;e++)if(xD[e]===t){xD.splice(e,1);break}return wD=L(wD,function(e){return t!==e}),bD.activeEditor===t&&(bD.activeEditor=0<wD.length?wD[0]:null),bD.focusedEditor===t&&(bD.focusedEditor=null),n.length!==wD.length},ED=function(e){return e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(TD(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0,e=null),e},hD(bD={defaultSettings:{},$:kn,majorVersion:"4",minorVersion:"9.4",releaseDate:"2019-03-20",editors:xD=[],i18n:fw,activeEditor:null,settings:{},setup:function(){var e,t,n,r,o,i,a=this,u="",s=SA.getDocumentBaseUrl(_e.document.location);if(/^[^:]+:\/\/\/?[^\/]+\//.test(s)&&(s=s.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(s)||(s+="/")),t=window.tinymce||window.tinyMCEPreInit)e=t.base||t.baseURL,u=t.suffix||".min";else{for(r=_e.document.getElementsByTagName("script"),o=0;o<r.length;o++)if(i=(n=r[o].src).substring(n.lastIndexOf("/")),/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(n)){-1!==i.indexOf(".min")&&(u=".min"),e=n.substring(0,n.lastIndexOf("/"));break}!e&&_e.document.currentScript&&(-1!==(n=_e.document.currentScript.src).indexOf(".min")&&(u=".min"),e=n.substring(0,n.lastIndexOf("/")))}a.baseURL=new SA(s).toAbsolute(e),a.documentBaseURL=s,a.baseURI=new SA(a.baseURL),a.suffix=u,fD(a)},overrideDefaults:function(e){var t,n,r,o=e.base_url;for(r in o&&(this.baseURL=new SA(this.documentBaseURL).toAbsolute(o.replace(/\/+$/,"")),this.baseURI=new SA(this.baseURL)),t=e.suffix,e.suffix&&(this.suffix=t),n=(this.defaultSettings=e).plugin_base_urls)tP.PluginManager.urls[r]=n[r]},init:function(r){var n,u=this,o=un.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option tbody tfoot thead tr script noscript style textarea video audio iframe object menu"," "),t=function(e,t){return e.inline&&t.tagName.toLowerCase()in o},s=function(e){var t=e.id;return t||(t=(t=e.name)&&!dD.get(t)?e.name:dD.uniqueId(),e.setAttribute("id",t)),t},e=function(e){var t=r[e];if(t)return t.apply(u,Array.prototype.slice.call(arguments,2))},i=function(e,t){return t.constructor===RegExp?t.test(e.className):dD.hasClass(e,t)},c=function(t){var e,n=[];if(Oe.ie&&Oe.ie<11)return bw.initError("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tinymce.com/docs/get-started/system-requirements/"),[];if(t.types)return gD(t.types,function(e){n=n.concat(dD.select(e.selector))}),n;if(t.selector)return dD.select(t.selector);if(t.target)return[t.target];switch(t.mode){case"exact":0<(e=t.elements||"").length&&gD(mD(e),function(t){var e;(e=dD.get(t))?n.push(e):gD(_e.document.forms,function(e){gD(e.elements,function(e){e.name===t&&(t="mce_editor_"+pD++,dD.setAttrib(e,"id",t),n.push(e))})})});break;case"textareas":case"specific_textareas":gD(dD.select("textarea"),function(e){t.editor_deselector&&i(e,t.editor_deselector)||t.editor_selector&&!i(e,t.editor_selector)||n.push(e)})}return n},l=function(e){n=e},f=function(){var o,i=0,a=[],n=function(e,t,n){var r=new GA(e,t,u);a.push(r),r.on("init",function(){++i===o.length&&l(a)}),r.targetElm=r.targetElm||n,r.render()};dD.unbind(window,"ready",f),e("onpageload"),o=kn.unique(c(r)),r.types?gD(r.types,function(t){un.each(o,function(e){return!dD.is(e,t.selector)||(n(s(e),hD({},r,t),e),!1)})}):(un.each(o,function(e){ED(u.get(e.id))}),0===(o=un.grep(o,function(e){return!u.get(e.id)})).length?l([]):gD(o,function(e){t(r,e)?bw.initError("Could not initialize inline editor on invalid inline target element",e):n(s(e),r,e)}))};return u.settings=r,dD.bind(window,"ready",f),new he(function(t){n?t(n):l=function(e){t(e)}})},get:function(t){return 0===arguments.length?wD.slice(0):P(t)?S(wD,function(e){return e.id===t}).getOr(null):p(t)&&wD[t]?wD[t]:null},add:function(e){var t=this,n=xD[e.id];return n===e||(null===t.get(e.id)&&(CD(e.id)&&(xD[e.id]=e),xD.push(e),wD.push(e)),ND(!0),t.activeEditor=e,t.fire("AddEditor",{editor:e}),vD||(vD=function(){t.fire("BeforeUnload")},dD.bind(window,"beforeunload",vD))),e},createEditor:function(e,t){return this.add(new GA(e,t,this))},remove:function(e){var t,n,r=this;if(e){if(!P(e))return n=e,o(r.get(n.id))?null:(TD(n)&&r.fire("RemoveEditor",{editor:n}),0===wD.length&&dD.unbind(window,"beforeunload",vD),n.remove(),ND(0<wD.length),n);gD(dD.select(e),function(e){(n=r.get(e.id))&&r.remove(n)})}else for(t=wD.length-1;0<=t;t--)r.remove(wD[t])},execCommand:function(e,t,n){var r=this.get(n);switch(e){case"mceAddEditor":return this.get(n)||new GA(n,this.settings,this).render(),!0;case"mceRemoveEditor":return r&&r.remove(),!0;case"mceToggleEditor":return r?r.isHidden()?r.show():r.hide():this.execCommand("mceAddEditor",0,n),!0}return!!this.activeEditor&&this.activeEditor.execCommand(e,t,n)},triggerSave:function(){gD(wD,function(e){e.save()})},addI18n:function(e,t){fw.add(e,t)},translate:function(e){return fw.translate(e)},setActive:function(e){var t=this.activeEditor;this.activeEditor!==e&&(t&&t.fire("deactivate",{relatedTarget:e}),e.fire("activate",{relatedTarget:t})),this.activeEditor=e}},cx),bD.setup(),kD=bD,(EO=wP||(wP={})).compareRanges=cy,EO.getCaretRangeFromPoint=_T,EO.getSelectedNode=gs,EO.getNode=hs,RD=wP,_D=Math.min,AD=Math.max,DD=Math.round,PD=function(e,t,n,r){var o,i;for(i=0;i<r.length;i++)if((o=OD(e,t,r[i])).x>=n.x&&o.x+o.w<=n.w+n.x&&o.y>=n.y&&o.y+o.h<=n.h+n.y)return r[i];return null},MD=function(e){return BD(e.left,e.top,e.width,e.height)},ID={inflate:function(e,t,n){return BD(e.x-t,e.y-n,e.w+2*t,e.h+2*n)},relativePosition:OD=function(e,t,n){var r,o,i,a,u,s;return r=t.x,o=t.y,i=e.w,a=e.h,u=t.w,s=t.h,"b"===(n=(n||"").split(""))[0]&&(o+=s),"r"===n[1]&&(r+=u),"c"===n[0]&&(o+=DD(s/2)),"c"===n[1]&&(r+=DD(u/2)),"b"===n[3]&&(o-=a),"r"===n[4]&&(r-=i),"c"===n[3]&&(o-=DD(a/2)),"c"===n[4]&&(r-=DD(i/2)),BD(r,o,i,a)},findBestRelativePosition:PD,intersect:function(e,t){var n,r,o,i;return n=AD(e.x,t.x),r=AD(e.y,t.y),o=_D(e.x+e.w,t.x+t.w),i=_D(e.y+e.h,t.y+t.h),o-n<0||i-r<0?null:BD(n,r,o-n,i-r)},clamp:function(e,t,n){var r,o,i,a,u,s,c,l,f,d;return u=e.x,s=e.y,c=e.x+e.w,l=e.y+e.h,f=t.x+t.w,d=t.y+t.h,r=AD(0,t.x-u),o=AD(0,t.y-s),i=AD(0,c-f),a=AD(0,l-d),u+=r,s+=o,n&&(c+=r,l+=o,u-=i,s-=a),BD(u,s,(c-=i)-u,(l-=a)-s)},create:BD=function(e,t,n,r){return{x:e,y:t,w:n,h:r}},fromClientRect:MD},LD={},FD={add:function(e,t){LD[e.toLowerCase()]=t},has:function(e){return!!LD[e.toLowerCase()]},get:function(e){var t=e.toLowerCase(),n=LD.hasOwnProperty(t)?LD[t]:null;if(null===n)throw new Error("Could not find module for type: "+e);return n},create:function(e,t){var n;if("string"==typeof e?(t=t||{}).type=e:e=(t=e).type,e=e.toLowerCase(),!(n=LD[e]))throw new Error("Could not find control by type: "+e);return(n=new n(t)).type=e,n}},HD=un.each,zD=un.extend,(jD=function(){}).extend=WD=function(n){var e,t,r,o=this,i=o.prototype,a=function(){var e,t,n,r=this;if(!UD&&(r.init&&r.init.apply(r,arguments),t=r.Mixins))for(e=t.length;e--;)(n=t[e]).init&&n.init.apply(r,arguments)},u=function(){return this},s=function(r,o){return function(){var e,t=this,n=t._super;return t._super=i[r],e=o.apply(t,arguments),t._super=n,e}};for(t in UD=!0,e=new o,UD=!1,n.Mixins&&(HD(n.Mixins,function(e){for(var t in e)"init"!==t&&(n[t]=e[t])}),i.Mixins&&(n.Mixins=i.Mixins.concat(n.Mixins))),n.Methods&&HD(n.Methods.split(","),function(e){n[e]=u}),n.Properties&&HD(n.Properties.split(","),function(e){var t="_"+e;n[e]=function(e){return void 0!==e?(this[t]=e,this):this[t]}}),n.Statics&&HD(n.Statics,function(e,t){a[t]=e}),n.Defaults&&i.Defaults&&(n.Defaults=zD({},i.Defaults,n.Defaults)),n)"function"==typeof(r=n[t])&&i[t]?e[t]=s(t,r):e[t]=r;return a.prototype=e,(a.constructor=a).extend=WD,a},VD=Math.min,qD=Math.max,$D=Math.round,YD=function(e){var n={},u=0,s=0,c=0,t=function(e,t,n){var r,o,i,a;return o=0,(i=VD(e/=255,VD(t/=255,n/=255)))===(a=qD(e,qD(t,n)))?{h:0,s:0,v:100*(o=i)}:(r=(a-i)/a,{h:$D(60*((e===i?3:n===i?1:5)-(e===i?t-n:n===i?e-t:n-e)/((o=a)-i))),s:$D(100*r),v:$D(100*o)})},r=function(e,t,n){var r,o,i,a;if(e=(parseInt(e,10)||0)%360,t=parseInt(t,10)/100,n=parseInt(n,10)/100,t=qD(0,VD(t,1)),n=qD(0,VD(n,1)),0!==t){switch(r=e/60,i=(o=n*t)*(1-Math.abs(r%2-1)),a=n-o,Math.floor(r)){case 0:u=o,s=i,c=0;break;case 1:u=i,s=o,c=0;break;case 2:u=0,s=o,c=i;break;case 3:u=0,s=i,c=o;break;case 4:u=i,s=0,c=o;break;case 5:u=o,s=0,c=i;break;default:u=s=c=0}u=$D(255*(u+a)),s=$D(255*(s+a)),c=$D(255*(c+a))}else u=s=c=$D(255*n)},o=function(){var e=function(e){return 1<(e=parseInt(e,10).toString(16)).length?e:"0"+e};return"#"+e(u)+e(s)+e(c)},i=function(){return{r:u,g:s,b:c}},a=function(){return t(u,s,c)},l=function(e){var t;return"object"==typeof e?"r"in e?(u=e.r,s=e.g,c=e.b):"v"in e&&r(e.h,e.s,e.v):(t=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)[^\)]*\)/gi.exec(e))?(u=parseInt(t[1],10),s=parseInt(t[2],10),c=parseInt(t[3],10)):(t=/#([0-F]{2})([0-F]{2})([0-F]{2})/gi.exec(e))?(u=parseInt(t[1],16),s=parseInt(t[2],16),c=parseInt(t[3],16)):(t=/#([0-F])([0-F])([0-F])/gi.exec(e))&&(u=parseInt(t[1]+t[1],16),s=parseInt(t[2]+t[2],16),c=parseInt(t[3]+t[3],16)),u=u<0?0:255<u?255:u,s=s<0?0:255<s?255:s,c=c<0?0:255<c?255:c,n};return e&&l(e),n.toRgb=i,n.toHsv=a,n.toHex=o,n.parse=l,n},KD={serialize:XD=function(e,n){var r,o,t,i;if(n=n||'"',null===e)return"null";if("string"==(t=typeof e))return o="\bb\tt\nn\ff\rr\"\"''\\\\",n+e.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(e,t){return'"'===n&&"'"===e?e:(r=o.indexOf(t))+1?"\\"+o.charAt(r+1):(e=t.charCodeAt().toString(16),"\\u"+"0000".substring(e.length)+e)})+n;if("object"!==t)return""+e;if(e.hasOwnProperty&&"[object Array]"===Object.prototype.toString.call(e)){for(r=0,o="[";r<e.length;r++)o+=(0<r?",":"")+XD(e[r],n);return o+"]"}for(i in o="{",e)e.hasOwnProperty(i)&&(o+="function"!=typeof e[i]?(1<o.length?","+n:n)+i+n+":"+XD(e[i],n):"");return o+"}"},parse:function(e){try{return JSON.parse(e)}catch(e){}}},GD={callbacks:{},count:0,send:function(t){var n=this,r=ya.DOM,o=void 0!==t.count?t.count:n.count,i="tinymce_jsonp_"+o;n.callbacks[o]=function(e){r.remove(i),delete n.callbacks[o],t.callback(e)},r.add(r.doc.body,"script",{id:i,src:t.url,type:"text/javascript"}),n.count++}},JD={send:function(e){var t,n=0,r=function(){!e.async||4===t.readyState||1e4<n++?(e.success&&n<1e4&&200===t.status?e.success.call(e.success_scope,""+t.responseText,t,e):e.error&&e.error.call(e.error_scope,1e4<n?"TIMED_OUT":"GENERAL",t,e),t=null):setTimeout(r,10)};if(e.scope=e.scope||this,e.success_scope=e.success_scope||e.scope,e.error_scope=e.error_scope||e.scope,e.async=!1!==e.async,e.data=e.data||"",JD.fire("beforeInitialize",{settings:e}),t=fP()){if(t.overrideMimeType&&t.overrideMimeType(e.content_type),t.open(e.type||(e.data?"POST":"GET"),e.url,e.async),e.crossDomain&&(t.withCredentials=!0),e.content_type&&t.setRequestHeader("Content-Type",e.content_type),e.requestheaders&&un.each(e.requestheaders,function(e){t.setRequestHeader(e.key,e.value)}),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),(t=JD.fire("beforeSend",{xhr:t,settings:e}).xhr).send(e.data),!e.async)return r();setTimeout(r,10)}}},un.extend(JD,cx),QD=un.extend,(ZD=function(e){this.settings=QD({},e),this.count=0}).sendRPC=function(e){return(new ZD).send(e)},ZD.prototype={send:function(n){var r=n.error,o=n.success;(n=QD(this.settings,n)).success=function(e,t){void 0===(e=KD.parse(e))&&(e={error:"JSON Parse error."}),e.error?r.call(n.error_scope||n.scope,e.error,t):o.call(n.success_scope||n.scope,e.result)},n.error=function(e,t){r&&r.call(n.error_scope||n.scope,e,t)},n.data=KD.serialize({id:n.id||"c"+this.count++,method:n.method,params:n.params}),n.content_type="application/json",JD.send(n)}},eO=function(){return n={},r=[],e={getItem:function(e){var t=n[e];return t||null},setItem:function(e,t){r.push(e),n[e]=String(t)},key:function(e){return r[e]},removeItem:function(t){r=r.filter(function(e){return e===t}),delete n[t]},clear:function(){r=[],n={}},length:0},Object.defineProperty(e,"length",{get:function(){return r.length},configurable:!1,enumerable:!1}),e;var n,r,e};try{tO=_e.window.localStorage}catch(e){tO=eO()}nO=kD,rO={geom:{Rect:ID},util:{Promise:he,Delay:Pe,Tools:un,VK:YC,URI:SA,Class:jD,EventDispatcher:ux,Observable:cx,I18n:fw,XHR:JD,JSON:KD,JSONRequest:ZD,JSONP:GD,LocalStorage:tO,Color:YD},dom:{EventUtils:Le,Sizzle:Ht,DomQuery:kn,TreeWalker:JO,DOMUtils:ya,ScriptLoader:Na,RangeUtils:RD,Serializer:bP,ControlSelection:bT,BookmarkManager:gT,Selection:xE,Event:Le.Event},html:{Styles:ZO,Entities:Zi,Node:GN,Schema:QO,SaxParser:rS,DomParser:vP,Writer:iP,Serializer:aP},ui:{Factory:FD},Env:Oe,AddOnManager:tP,Annotator:oP,Formatter:pP,UndoManager:hP,EditorCommands:uP,WindowManager:lP,NotificationManager:cP,EditorObservable:Ax,Shortcuts:sP,Editor:GA,FocusManager:JA,EditorManager:kD,DOM:ya.DOM,ScriptLoader:Na.ScriptLoader,PluginManager:tP.PluginManager,ThemeManager:tP.ThemeManager,trim:un.trim,isArray:un.isArray,is:un.is,toArray:un.toArray,makeMap:un.makeMap,each:un.each,map:un.map,grep:un.grep,inArray:un.inArray,extend:un.extend,create:un.create,walk:un.walk,createNS:un.createNS,resolve:un.resolve,explode:un.explode,_addCacheSuffix:un._addCacheSuffix,isOpera:Oe.opera,isWebKit:Oe.webkit,isIE:Oe.ie,isGecko:Oe.gecko,isMac:Oe.mac},iO=function(e){if("object"==typeof module)try{module.exports=e}catch(e){}},DO=oO=nO=un.extend(nO,rO),window.tinymce=DO,window.tinyMCE=DO,iO(oO)}(window),function(o){"use strict";var e,t,n,r,i=tinymce.util.Tools.resolve("tinymce.PluginManager"),s=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),c=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),a=tinymce.util.Tools.resolve("tinymce.util.VK"),l=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager"),f=tinymce.util.Tools.resolve("tinymce.util.Tools"),u=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),d=function(e){return e&&3===e.nodeType},m=function(e){return e&&/^(OL|UL|DL)$/.test(e.nodeName)},g=function(e){return e&&/^(OL|UL)$/.test(e.nodeName)},h=function(e){return e&&/^(LI|DT|DD)$/.test(e.nodeName)},p=function(e){return e&&/^(DT|DD)$/.test(e.nodeName)},v=function(e){return e&&/^(TH|TD)$/.test(e.nodeName)},b=function(e){return e&&"BR"===e.nodeName},y=function(e,t){return t&&!!e.schema.getTextBlockElements()[t.nodeName]},x=function(e,t){return e&&e.nodeName in t},w=function(e,t){return!!b(t)&&!(!e.isBlock(t.nextSibling)||b(t.previousSibling))},C=function(e,t,n){var r=e.isEmpty(t);return!(n&&0<e.select("span[data-mce-type=bookmark]",t).length)&&r},S=function(e,t){return e.isChildOf(t,e.getRoot())},N=d,T=m,E=g,k=p,R=h,_=v,A=b,D=y,O=x,P=w,B=C,M=S,I=function(e,t){if(N(e))return{container:e,offset:t};var n=s.getNode(e,t);return N(n)?{container:n,offset:t>=e.childNodes.length?n.data.length:0}:n.previousSibling&&N(n.previousSibling)?{container:n.previousSibling,offset:n.previousSibling.data.length}:n.nextSibling&&N(n.nextSibling)?{container:n.nextSibling,offset:0}:{container:e,offset:t}},L=function(e){var t,n=e.cloneRange(),r=I(e.startContainer,e.startOffset);return n.setStart(r.container,r.offset),t=I(e.endContainer,e.endOffset),n.setEnd(t.container,t.offset),n},F=L,H=u.DOM,z=function(o){var i={},e=function(e){var t,n,r;n=o[e?"startContainer":"endContainer"],r=o[e?"startOffset":"endOffset"],1===n.nodeType&&(t=H.create("span",{"data-mce-type":"bookmark"}),n.hasChildNodes()?(r=Math.min(r,n.childNodes.length-1),e?n.insertBefore(t,n.childNodes[r]):H.insertAfter(t,n.childNodes[r])):n.appendChild(t),n=t,r=0),i[e?"startContainer":"endContainer"]=n,i[e?"startOffset":"endOffset"]=r};return e(!0),o.collapsed||e(),i},W=function(i){function e(e){var t,n=function(e){for(var t=e.parentNode.firstChild,n=0;t;){if(t===e)return n;1===t.nodeType&&"bookmark"===t.getAttribute("data-mce-type")||n++,t=t.nextSibling}return-1},r=t=i[e?"startContainer":"endContainer"],o=i[e?"startOffset":"endOffset"];r&&(1===r.nodeType&&(o=n(r),r=r.parentNode,H.remove(t),!r.hasChildNodes()&&H.isBlock(r)&&r.appendChild(H.create("br"))),i[e?"startContainer":"endContainer"]=r,i[e?"startOffset":"endOffset"]=o)}e(!0),e();var t=H.createRng();return t.setStart(i.startContainer,i.startOffset),i.endContainer&&t.setEnd(i.endContainer,i.endOffset),F(t)},U=z,j=W,V=function(e){return function(){return e}},q=function(n){return function(){var e,t=[];for(e=0;e<arguments.length;e++)t[e]=arguments[e];return!n.apply(null,t)}},$=V(!1),Y=V(!0),X=$,K=Y,G=function(){return J},J=(r={fold:function(e,t){return e()},is:X,isSome:X,isNone:K,getOr:n=function(e){return e},getOrThunk:t=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:function(){return null},getOrUndefined:function(){},or:n,orThunk:t,map:G,ap:G,each:function(){},bind:G,flatten:G,exists:X,forall:K,filter:G,equals:e=function(e){return e.isNone()},equals_:e,toArray:function(){return[]},toString:V("none()")},Object.freeze&&Object.freeze(r),r),Q=function(n){var e=function(){return n},t=function(){return i},r=function(e){return Q(e(n))},o=function(e){return e(n)},i={fold:function(e,t){return t(n)},is:function(e){return n===e},isSome:K,isNone:X,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:t,orThunk:t,map:r,ap:function(e){return e.fold(G,function(e){return Q(e(n))})},each:function(e){e(n)},bind:o,flatten:e,exists:o,forall:o,filter:function(e){return e(n)?i:J},equals:function(e){return e.is(n)},equals_:function(e,t){return e.fold(X,function(e){return t(n,e)})},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return i},Z=function(e){return null==e?J:Q(e)},ee={some:Q,none:G,from:Z},te=function(e){if(null===e)return"null";var t=typeof e;return"object"===t&&Array.prototype.isPrototypeOf(e)?"array":"object"===t&&String.prototype.isPrototypeOf(e)?"string":t},ne=function(t){return function(e){return te(e)===t}},re=ne("string"),oe=ne("boolean"),ie=ne("function"),ae=ne("number"),ue=function(e,t){var n,r,o=e.length,i=new Array(o);for(n=0;n<o;n++)r=e[n],i[n]=t(r,n,e);return i},se=function(e,t){var n,r;for(n=0,r=e.length;n<r;n++)t(e[n],n,e)},ce=function(e,t){var n,r,o,i=[];for(n=0,r=e.length;n<r;n++)t(o=e[n],n,e)&&i.push(o);return i},le=function(e,t){var n,r,o,i,a,u,s;if(0===e.length)return[];for(n=t(e[0]),r=[],o=[],i=0,a=e.length;i<a;i++)(s=t(u=e[i]))!==n&&(r.push(o),o=[]),n=s,o.push(u);return 0!==o.length&&r.push(o),r},fe=function(e,t,n){return se(e,function(e){n=t(n,e)}),n},de=function(e,t){var n,r,o;for(n=0,r=e.length;n<r;n++)if(t(o=e[n],n,e))return ee.some(o);return ee.none()},me=Array.prototype.push,ge=function(e){var t,n,r=[];for(t=0,n=e.length;t<n;++t){if(!Array.prototype.isPrototypeOf(e[t]))throw new Error("Arr.flatten item "+t+" was not an array, input: "+e);me.apply(r,e[t])}return r},he=function(e,t){var n=ue(e,t);return ge(n)},pe=Array.prototype.slice,ve=function(e){var t=pe.call(e,0);return t.reverse(),t},be=function(e){return 0===e.length?ee.none():ee.some(e[0])},ye=function(e){return 0===e.length?ee.none():ee.some(e[e.length-1])},xe=(ie(Array.from)&&Array.from,void 0!==o.window?o.window:Function("return this;")()),we=function(e,t){var n,r=null!=t?t:xe;for(n=0;n<e.length&&null!=r;++n)r=r[e[n]];return r},Ce=function(e,t){var n=e.split(".");return we(n,t)},Se=function(e,t){return Ce(e,t)},Ne=function(e,t){var n=Se(e,t);if(null==n)throw e+" not available on this browser";return n},Te=Ne,Ee=function(e){return Te("HTMLElement",e)},ke=function(e){var t=Ce("ownerDocument.defaultView",e);return Ee(t).prototype.isPrototypeOf(e)},Re=ke,_e=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),Ae=function(e){var t=e.selection.getStart(!0);return e.dom.getParent(t,"OL,UL,DL",Le(e,t))},De=function(e,t){return e&&1===t.length&&t[0]===e},Oe=function(e){return f.grep(e.querySelectorAll("ol,ul,dl"),function(e){return T(e)})},Pe=function(e){var t=Ae(e),n=e.selection.getSelectedBlocks();return De(t,n)?Oe(t):f.grep(n,function(e){return T(e)&&t!==e})},Be=function(n,e){var t=f.map(e,function(e){var t=n.dom.getParent(e,"li,dd,dt",Le(n,e));return t||e});return _e.unique(t)},Me=function(e){var t=e.selection.getSelectedBlocks();return f.grep(Be(e,t),function(e){return R(e)})},Ie=function(e){return ce(Me(e),k)},Le=function(e,t){var n=e.dom.getParents(t,"TD,TH"),r=0<n.length?n[0]:e.getBody();return r},Fe=function(e,t){var n=e.dom.getParents(t,"ol,ul",Le(e,t));return ye(n)},He=function(e){var t=Fe(e,e.selection.getStart()),n=ce(e.selection.getSelectedBlocks(),E);return t.toArray().concat(n)},ze=function(e){var t=He(e);return We(e,t)},We=function(t,e){var n=ue(e,function(e){return Fe(t,e).getOr(e)});return _e.unique(n)},Ue=function(e){var t=Ae(e);return Re(t)},je={isList:Ue,getParentList:Ae,getSelectedSubLists:Pe,getSelectedListItems:Me,getClosestListRootElm:Le,getSelectedDlItems:Ie,getSelectedListRoots:ze},Ve=function(e,t){var n=t||o.document,r=n.createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||1<r.childNodes.length)throw o.console.error("HTML does not have a single root node",e),new Error("HTML must have a single root node");return Ye(r.childNodes[0])},qe=function(e,t){var n=t||o.document,r=n.createElement(e);return Ye(r)},$e=function(e,t){var n=t||o.document,r=n.createTextNode(e);return Ye(r)},Ye=function(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:V(e)}},Xe=function(e,t,n){var r=e.dom();return ee.from(r.elementFromPoint(t,n)).map(Ye)},Ke={fromHtml:Ve,fromTag:qe,fromText:$e,fromDom:Ye,fromPoint:Xe},Ge=function(e,t){var n,r,o=[];for(n=0;n<e.length;n++){if(!(r=e[n]).isSome())return ee.none();o.push(r.getOrDie())}return ee.some(t.apply(null,o))},Je=function(e,t){var n=t||o.document,r=n.createDocumentFragment();return se(e,function(e){r.appendChild(e.dom())}),Ke.fromDom(r)},Qe=function(){var e,t=[];for(e=0;e<arguments.length;e++)t[e]=arguments[e];return function(){var e,n,r=[];for(e=0;e<arguments.length;e++)r[e]=arguments[e];if(t.length!==r.length)throw new Error('Wrong number of arguments to struct. Expected "['+t.length+']", got '+r.length+" arguments");return n={},se(t,function(e,t){n[e]=V(r[t])}),n}},Ze=Object.keys,et=function(e,t){var n,r,o,i=Ze(e);for(n=0,r=i.length;n<r;n++)t(e[o=i[n]],o,e)},tt=function(){return Te("Node")},nt=function(e,t,n){return 0!=(e.compareDocumentPosition(t)&n)},rt=function(e,t){return nt(e,t,tt().DOCUMENT_POSITION_CONTAINED_BY)},ot=rt,it=function(n){var r,o=!1;return function(){var e,t=[];for(e=0;e<arguments.length;e++)t[e]=arguments[e];return o||(o=!0,r=n.apply(null,t)),r}},at=function(e,t){var n,r;for(n=0;n<e.length;n++)if((r=e[n]).test(t))return r},ut=function(e,t){var n,r=at(e,t);return r?lt((n=function(e){return Number(t.replace(r,"$"+e))})(1),n(2)):{major:0,minor:0}},st=function(e,t){var n=String(t).toLowerCase();return 0===e.length?ct():ut(e,n)},ct=function(){return lt(0,0)},lt=function(e,t){return{major:e,minor:t}},ft={nu:lt,detect:st,unknown:ct},dt="Edge",mt="Chrome",gt="IE",ht="Opera",pt="Firefox",vt="Safari",bt=function(e,t){return function(){return t===e}},yt=function(){return xt({current:void 0,version:ft.unknown()})},xt=function(e){var t=e.current,n=e.version;return{current:t,version:n,isEdge:bt(dt,t),isChrome:bt(mt,t),isIE:bt(gt,t),isOpera:bt(ht,t),isFirefox:bt(pt,t),isSafari:bt(vt,t)}},wt={unknown:yt,nu:xt,edge:V(dt),chrome:V(mt),ie:V(gt),opera:V(ht),firefox:V(pt),safari:V(vt)},Ct="Windows",St="iOS",Nt="Android",Tt="Linux",Et="OSX",kt="Solaris",Rt="FreeBSD",_t=function(e,t){return function(){return t===e}},At=function(){return Dt({current:void 0,version:ft.unknown()})},Dt=function(e){var t=e.current,n=e.version;return{current:t,version:n,isWindows:_t(Ct,t),isiOS:_t(St,t),isAndroid:_t(Nt,t),isOSX:_t(Et,t),isLinux:_t(Tt,t),isSolaris:_t(kt,t),isFreeBSD:_t(Rt,t)}},Ot={unknown:At,nu:Dt,windows:V(Ct),ios:V(St),android:V(Nt),linux:V(Tt),osx:V(Et),solaris:V(kt),freebsd:V(Rt)},Pt=function(e,t,n){var r=e.isiOS()&&!0===/ipad/i.test(n),o=e.isiOS()&&!r,i=e.isAndroid()&&3===e.version.major,a=e.isAndroid()&&4===e.version.major,u=r||i||a&&!0===/mobile/i.test(n),s=e.isiOS()||e.isAndroid(),c=s&&!u,l=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(n);return{isiPad:V(r),isiPhone:V(o),isTablet:V(u),isPhone:V(c),isTouch:V(s),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:V(l)}},Bt=function(e,t){var n=String(t).toLowerCase();return de(e,function(e){return e.search(n)})},Mt=function(e,n){return Bt(e,n).map(function(e){var t=ft.detect(e.versionRegexes,n);return{current:e.name,version:t}})},It=function(e,n){return Bt(e,n).map(function(e){var t=ft.detect(e.versionRegexes,n);return{current:e.name,version:t}})},Lt=Mt,Ft=It,Ht=function(e,t){return-1!==e.indexOf(t)},zt=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Wt=function(t){return function(e){return Ht(e,t)}},Ut=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return Ht(e,"edge/")&&Ht(e,"chrome")&&Ht(e,"safari")&&Ht(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,zt],search:function(e){return Ht(e,"chrome")&&!Ht(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return Ht(e,"msie")||Ht(e,"trident")}},{name:"Opera",versionRegexes:[zt,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Wt("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Wt("firefox")},{name:"Safari",versionRegexes:[zt,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(Ht(e,"safari")||Ht(e,"mobile/"))&&Ht(e,"applewebkit")}}],jt=[{name:"Windows",search:Wt("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return Ht(e,"iphone")||Ht(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Wt("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:Wt("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Wt("linux"),versionRegexes:[]},{name:"Solaris",search:Wt("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Wt("freebsd"),versionRegexes:[]}],Vt={browsers:V(Ut),oses:V(jt)},qt=function(e){var t=Vt.browsers(),n=Vt.oses(),r=Lt(t,e).fold(wt.unknown,wt.nu),o=Ft(n,e).fold(Ot.unknown,Ot.nu),i=Pt(o,r,e);return{browser:r,os:o,deviceType:i}},$t=qt,Yt=it(function(){var e=o.navigator.userAgent;return $t(e)}),Xt={detect:Yt},Kt=(o.Node.ATTRIBUTE_NODE,o.Node.CDATA_SECTION_NODE,o.Node.COMMENT_NODE,o.Node.DOCUMENT_NODE,o.Node.DOCUMENT_TYPE_NODE,o.Node.DOCUMENT_FRAGMENT_NODE,o.Node.ELEMENT_NODE),Gt=(o.Node.TEXT_NODE,o.Node.PROCESSING_INSTRUCTION_NODE,o.Node.ENTITY_REFERENCE_NODE,o.Node.ENTITY_NODE,o.Node.NOTATION_NODE,Kt),Jt=function(e,t){var n=e.dom();if(n.nodeType!==Gt)return!1;if(void 0!==n.matches)return n.matches(t);if(void 0!==n.msMatchesSelector)return n.msMatchesSelector(t);if(void 0!==n.webkitMatchesSelector)return n.webkitMatchesSelector(t);if(void 0!==n.mozMatchesSelector)return n.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},Qt=function(e,t){return e.dom()===t.dom()},Zt=function(e,t){var n=e.dom(),r=t.dom();return n!==r&&n.contains(r)},en=function(e,t){return ot(e.dom(),t.dom())},tn=Xt.detect().browser,nn=tn.isIE()?en:Zt,rn=Jt,on=function(e){var t=e.dom();return ee.from(t.parentNode).map(Ke.fromDom)},an=function(e){var t=e.dom();return ue(t.childNodes,Ke.fromDom)},un=function(e,t){var n=e.dom().childNodes;return ee.from(n[t]).map(Ke.fromDom)},sn=function(e){return un(e,0)},cn=function(e){return un(e,e.dom().childNodes.length-1)},ln=(Qe("element","offset"),function(t,n){on(t).each(function(e){e.dom().insertBefore(n.dom(),t.dom())})}),fn=function(e,t){e.dom().appendChild(t.dom())},dn=function(t,e){se(e,function(e){ln(t,e)})},mn=function(t,e){se(e,function(e){fn(t,e)})},gn=function(e){var t=e.dom();null!==t.parentNode&&t.parentNode.removeChild(t)},hn=function(e){return e.dom().nodeName.toLowerCase()},pn=function(e,t,n){if(!(re(n)||oe(n)||ae(n)))throw o.console.error("Invalid call to Attr.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")},vn=function(e,t){var n=e.dom();et(t,function(e,t){pn(n,t,e)})},bn=function(e){return fe(e.dom().attributes,function(e,t){return e[t.name]=t.value,e},{})},yn=function(e){return void 0!==e.style},xn=function(e,t,n){if(!re(n))throw o.console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);yn(e)&&e.style.setProperty(t,n)},wn=function(e,t,n){var r=e.dom();xn(r,t,n)},Cn=function(e,t){return Ke.fromDom(e.dom().cloneNode(t))},Sn=function(e){return Cn(e,!0)},Nn=function(e,t){var n=Ke.fromTag(t),r=bn(e);return vn(n,r),n},Tn=function(e,t){var n,r=Nn(e,t);return ln(e,r),n=an(e),mn(r,n),gn(e),r},En=function(e,t){fn(e.item,t.list)},kn=function(e){for(var t=1;t<e.length;t++)En(e[t-1],e[t])},Rn=function(e,t){Ge([ye(e),be(t)],En)},_n=function(e,t){var n={list:Ke.fromTag(t,e),item:Ke.fromTag("li",e)};return fn(n.list,n.item),n},An=function(e,t,n){var r,o=[];for(r=0;r<n;r++)o.push(_n(e,t.listType));return o},Dn=function(e,t){for(var n=0;n<e.length-1;n++)wn(e[n].item,"list-style-type","none");ye(e).each(function(e){vn(e.list,t.listAttributes),vn(e.item,t.itemAttributes),mn(e.item,t.content)})},On=function(e,t){hn(e.list)!==t.listType&&(e.list=Tn(e.list,t.listType)),vn(e.list,t.listAttributes)},Pn=function(e,t,n){var r=Ke.fromTag("li",e);return vn(r,t),mn(r,n),r},Bn=function(e,t){fn(e.list,t),e.item=t},Mn=function(n,e,r){var t=e.slice(0,r.depth);return ye(t).each(function(e){var t=Pn(n,r.itemAttributes,r.content);Bn(e,t),On(e,r)}),t},In=function(e,t,n){var r=An(e,n,n.depth-t.length);return kn(r),Dn(r,n),Rn(t,r),t.concat(r)},Ln=function(n,e){var t=fe(e,function(e,t){return t.depth>e.length?In(n,e,t):Mn(n,e,t)},[]);return be(t).map(function(e){return e.list})},Fn=function(e){return rn(e,"OL,UL")},Hn=function(e){return sn(e).map(Fn).getOr(!1)},zn=function(e){return cn(e).map(Fn).getOr(!1)},Wn=function(e){return 0<e.depth},Un=function(e){return e.isSelected},jn=function(e){var t=an(e),n=zn(e)?t.slice(0,-1):t;return ue(n,Sn)},Vn=function(t,n,r){return on(t).map(function(e){return{depth:n,isSelected:r,content:jn(t),itemAttributes:bn(t),listAttributes:bn(e),listType:hn(e)}})},qn=function(e,t){switch(e){case"Indent":t.depth++;break;case"Outdent":t.depth--;break;case"Flatten":t.depth=0}},$n=Object.prototype.hasOwnProperty,Yn=function(e,t){return t},Xn=function(a){return function(){var e,t,n,r,o,i=new Array(arguments.length);for(e=0;e<i.length;e++)i[e]=arguments[e];if(0===i.length)throw new Error("Can't merge zero objects");for(t={},n=0;n<i.length;n++)for(o in r=i[n])$n.call(r,o)&&(t[o]=a(t[o],r[o]));return t}},Kn=Xn(Yn),Gn=function(e,t){e.listType=t.listType,e.listAttributes=Kn({},t.listAttributes)},Jn=function(e,t){var n,r=e[t].depth;for(n=t-1;0<=n;n--){if(e[n].depth===r)return ee.some(e[n]);if(e[n].depth<r)break}return ee.none()},Qn=function(n){se(n,function(t,e){Jn(n,e).each(function(e){Gn(t,e)})})},Zn=function(e){var t=e,n=function(){return t},r=function(e){t=e},o=function(){return Zn(n())};return{get:n,set:r,clone:o}},er=function(n,r,o,i){return sn(i).filter(Fn).fold(function(){var e,t;return r.each(function(e){Qt(e.start,i)&&o.set(!0)}),e=Vn(i,n,o.get()),r.each(function(e){Qt(e.end,i)&&o.set(!1)}),t=cn(i).filter(Fn).map(function(e){return tr(n,r,o,e)}).getOr([]),e.toArray().concat(t)},function(e){return tr(n,r,o,e)})},tr=function(r,o,i,e){return he(an(e),function(e){var t=Fn(e)?tr:er,n=r+1;return t(n,o,i,e)})},nr=function(e,t){var n=Zn(!1),r=0;return ue(e,function(e){return{sourceList:e,entries:tr(r,t,n,e)}})},rr=tinymce.util.Tools.resolve("tinymce.Env"),or=function(e,t){var n,r,o,i,a,u=e.dom,s=e.schema.getBlockElements(),c=u.createFragment();if(e.settings.forced_root_block&&(o=e.settings.forced_root_block),o&&((r=u.create(o)).tagName===e.settings.forced_root_block&&u.setAttribs(r,e.settings.forced_root_block_attrs),O(t.firstChild,s)||c.appendChild(r)),t)for(;n=t.firstChild;)a=n.nodeName,i||"SPAN"===a&&"bookmark"===n.getAttribute("data-mce-type")||(i=!0),O(n,s)?(c.appendChild(n),r=null):o?(r||(r=u.create(o),c.appendChild(r)),r.appendChild(n)):c.appendChild(n);return e.settings.forced_root_block?i||rr.ie&&!(10<rr.ie)||r.appendChild(u.create("br",{"data-mce-bogus":"1"})):c.appendChild(u.create("br")),c},ir=function(n,e){return ue(e,function(e){var t=Je(e.content);return Ke.fromDom(or(n,t.dom()))})},ar=function(e,t){return Qn(t),Ln(e.contentDocument,t).toArray()},ur=function(t,e){return he(le(e,Wn),function(e){return be(e).map(Wn).getOr(!1)?ar(t,e):ir(t,e)})},sr=function(e,t){se(ce(e,Un),function(e){return qn(t,e)})},cr=function(e){var t=ue(je.getSelectedListItems(e),Ke.fromDom);return Ge([de(t,q(Hn)),de(ve(t),q(Hn))],function(e,t){return{start:e,end:t}})},lr=function(t,e,n){var r=nr(e,cr(t));se(r,function(e){sr(e.entries,n),dn(e.sourceList,ur(t,e.entries)),gn(e.sourceList)})},fr=u.DOM,dr=function(e,t,n){var r,o,i=function(t){f.each(a,function(e){t.parentNode.insertBefore(e,n.parentNode)}),fr.remove(t)},a=fr.select('span[data-mce-type="bookmark"]',t),u=or(e,n),s=fr.createRng();for(s.setStartAfter(n),s.setEndAfter(t),o=(r=s.extractContents()).firstChild;o;o=o.firstChild)if("LI"===o.nodeName&&e.dom.isEmpty(o)){fr.remove(o);break}e.dom.isEmpty(r)||fr.insertAfter(r,t),fr.insertAfter(u,t),B(e.dom,n.parentNode)&&i(n.parentNode),fr.remove(n),B(e.dom,t)&&fr.remove(t)},mr=dr,gr=function(t,n){rn(n,"DD")?Tn(n,"DT"):rn(n,"DT")&&on(n).each(function(e){return mr(t,e.dom(),n.dom())})},hr=function(e){rn(e,"DT")&&Tn(e,"DD")},pr=function(t,e,n){se(n,"Indent"===e?hr:function(e){return gr(t,e)})},vr=function(e,t){var n,r=ue(je.getSelectedListRoots(e),Ke.fromDom),o=ue(je.getSelectedDlItems(e),Ke.fromDom),i=!1;return(r.length||o.length)&&(n=e.selection.getBookmark(),lr(e,r,t),pr(e,t,o),e.selection.moveToBookmark(n),e.selection.setRng(F(e.selection.getRng())),e.nodeChanged(),i=!0),i},br=function(e){return vr(e,"Indent")},yr=function(e){return vr(e,"Outdent")},xr=function(e){return vr(e,"Flatten")},wr=function(e,t,n){var r=n["list-style-type"]?n["list-style-type"]:null;e.setStyle(t,"list-style-type",r)},Cr=function(n,e){f.each(e,function(e,t){n.setAttribute(t,e)})},Sr=function(e,t,n){Cr(t,n["list-attributes"]),f.each(e.select("li",t),function(e){Cr(e,n["list-item-attributes"])})},Nr=function(e,t,n){wr(e,t,n),Sr(e,t,n)},Tr=function(n,r,e){f.each(e,function(e){var t;return n.setStyle(r,((t={})[e]="",t))})},Er=function(e,t,n,r){var o,i;for(o=t[n?"startContainer":"endContainer"],i=t[n?"startOffset":"endOffset"],1===o.nodeType&&(o=o.childNodes[Math.min(i,o.childNodes.length-1)]||o),!n&&A(o.nextSibling)&&(o=o.nextSibling);o.parentNode!==r;){if(D(e,o))return o;if(/^(TD|TH)$/.test(o.parentNode.nodeName))return o;o=o.parentNode}return o},kr=function(n,e,r){var o,t,i=[],a=n.dom,u=Er(n,e,!0,r),s=Er(n,e,!1,r),c=[];for(t=u;t&&(c.push(t),t!==s);t=t.nextSibling);return f.each(c,function(e){if(D(n,e))return i.push(e),void(o=null);if(a.isBlock(e)||A(e))return A(e)&&a.remove(e),void(o=null);var t=e.nextSibling;l.isBookmarkNode(e)&&(D(n,t)||!t&&e.parentNode===r)?o=null:(o||(o=a.create("p"),e.parentNode.insertBefore(o,e),i.push(o)),o.appendChild(e))}),i},Rr=function(e,t,n){var r=e.getStyle(t,"list-style-type"),o=n?n["list-style-type"]:"";return r===(o=null===o?"":o)},_r=function(r,o,i){var e,t,a,n,u;void 0===i&&(i={}),e=r.selection.getRng(!0),a="LI",n=je.getClosestListRootElm(r,r.selection.getStart(!0)),"false"!==(u=r.dom).getContentEditable(r.selection.getNode())&&("DL"===(o=o.toUpperCase())&&(a="DT"),t=U(e),f.each(kr(r,e,n),function(e){var t,n;(n=e.previousSibling)&&T(n)&&n.nodeName===o&&Rr(u,n,i)?(t=n,e=u.rename(e,a),n.appendChild(e)):(t=u.create(o),e.parentNode.insertBefore(t,e),t.appendChild(e),e=u.rename(e,a)),Tr(u,e,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),Nr(u,t,i),Br(r.dom,t)}),r.selection.setRng(j(t)))},Ar=function(e,t){return e&&t&&T(e)&&e.nodeName===t.nodeName},Dr=function(e,t,n){var r=e.getStyle(t,"list-style-type",!0),o=e.getStyle(n,"list-style-type",!0);return r===o},Or=function(e,t){return e.className===t.className},Pr=function(e,t,n){return Ar(t,n)&&Dr(e,t,n)&&Or(t,n)},Br=function(e,t){var n,r;if(n=t.nextSibling,Pr(e,t,n)){for(;r=n.firstChild;)t.appendChild(r);e.remove(n)}if(n=t.previousSibling,Pr(e,t,n)){for(;r=n.lastChild;)t.insertBefore(r,t.firstChild);e.remove(n)}},Mr=function(e,t,n,r){if(t.nodeName!==n){var o=e.rename(t,n);Nr(e,o,r)}else Nr(e,t,r)},Ir=function(t,e,n,r,o){if(e.nodeName!==r||Lr(o)){var i=U(t.selection.getRng(!0));f.each([e].concat(n),function(e){Mr(t.dom,e,r,o)}),t.selection.setRng(j(i))}else xr(t)},Lr=function(e){return"list-style-type"in e},Fr=function(e,t,n,r){if(t!==e.getBody())if(t)if(t.nodeName!==n||Lr(r)){var o=U(e.selection.getRng(!0));Nr(e.dom,t,r),Br(e.dom,e.dom.rename(t,n)),e.selection.setRng(j(o))}else xr(e);else _r(e,n,r)},Hr=function(e,t,n){var r=je.getParentList(e),o=je.getSelectedSubLists(e);n=n||{},r&&0<o.length?Ir(e,r,o,t,n):Fr(e,r,t,n)},zr={toggleList:Hr,mergeWithAdjacentLists:Br},Wr=u.DOM,Ur=function(e,t){var n,r=t.parentNode;"LI"===r.nodeName&&r.firstChild===t&&((n=r.previousSibling)&&"LI"===n.nodeName?(n.appendChild(t),B(e,r)&&Wr.remove(r)):Wr.setStyle(r,"listStyleType","none")),T(r)&&(n=r.previousSibling)&&"LI"===n.nodeName&&n.appendChild(t)},jr=function(t,e){f.each(f.grep(t.select("ol,ul",e)),function(e){Ur(t,e)})},Vr=jr,qr=function(e,t,n,r){var o,i,a=t.startContainer,u=t.startOffset;if(3===a.nodeType&&(n?u<a.data.length:0<u))return a;for(o=e.schema.getNonEmptyElements(),1===a.nodeType&&(a=s.getNode(a,u)),i=new c(a,r),n&&P(e.dom,a)&&i.next();a=i[n?"next":"prev2"]();){if("LI"===a.nodeName&&!a.hasChildNodes())return a;if(o[a.nodeName])return a;if(3===a.nodeType&&0<a.data.length)return a}},$r=function(e,t){var n=t.childNodes;return 1===n.length&&!T(n[0])&&e.isBlock(n[0])},Yr=function(e,t){$r(e,t)&&e.remove(t.firstChild,!0)},Xr=function(e,t,n){var r,o;if(o=$r(e,n)?n.firstChild:n,Yr(e,t),!B(e,t,!0))for(;r=t.firstChild;)o.appendChild(r)},Kr=function(t,e,n){var r,o,i,a=e.parentNode;M(t,e)&&M(t,n)&&(T(n.lastChild)&&(o=n.lastChild),a===n.lastChild&&A(a.previousSibling)&&t.remove(a.previousSibling),(r=n.lastChild)&&A(r)&&e.hasChildNodes()&&t.remove(r),B(t,n,!0)&&t.$(n).empty(),Xr(t,e,n),o&&n.appendChild(o),i=nn(Ke.fromDom(n),Ke.fromDom(e))?t.getParents(e,T,n):[],t.remove(e),se(i,function(e){B(t,e)&&e!==t.getRoot()&&t.remove(e)}))},Gr=function(e,t,n){e.dom.$(n).empty(),Kr(e.dom,t,n),e.selection.setCursorLocation(n)},Jr=function(e,t,n,r){var o,i=e.dom;i.isEmpty(r)?Gr(e,n,r):(o=U(t),Kr(i,n,r),e.selection.setRng(j(o)))},Qr=function(e,t,n,r){var o,i=U(t);Kr(e.dom,n,r),o=j(i),e.selection.setRng(o)},Zr=function(e,t){var n,r,o,i=e.dom,a=e.selection,u=a.getStart(),s=je.getClosestListRootElm(e,u),c=i.getParent(a.getStart(),"LI",s);if(c){if((n=c.parentNode)===e.getBody()&&B(i,n))return!0;if(r=F(a.getRng(!0)),(o=i.getParent(qr(e,r,t,s),"LI",s))&&o!==c)return t?Jr(e,r,o,c):Qr(e,r,c,o),!0;if(!o&&!t)return xr(e),!0}return!1},eo=function(e,t,n){var r=e.getParent(t.parentNode,e.isBlock,n);e.remove(t),r&&e.isEmpty(r)&&e.remove(r)},to=function(e,t){var n,r,o=e.dom,i=e.selection.getStart(),a=je.getClosestListRootElm(e,i),u=o.getParent(i,o.isBlock,a);return!!(u&&o.isEmpty(u)&&(n=F(e.selection.getRng(!0)),r=o.getParent(qr(e,n,t,a),"LI",a)))&&(e.undoManager.transact(function(){eo(o,u,a),zr.mergeWithAdjacentLists(o,r.parentNode),e.selection.select(r,!0),e.selection.collapse(t)}),!0)},no=function(e,t){return Zr(e,t)||to(e,t)},ro=function(e){var t=e.selection.getStart(),n=je.getClosestListRootElm(e,t),r=e.dom.getParent(t,"LI,DT,DD",n);return!!(r||0<je.getSelectedListItems(e).length)&&(e.undoManager.transact(function(){e.execCommand("Delete"),Vr(e.dom,e.getBody())}),!0)},oo=function(e,t){return e.selection.isCollapsed()?no(e,t):ro(e)},io=function(t){t.on("keydown",function(e){e.keyCode===a.BACKSPACE?oo(t,!1)&&e.preventDefault():e.keyCode===a.DELETE&&oo(t,!0)&&e.preventDefault()})},ao=io,uo=oo,so=function(t){return{backspaceDelete:function(e){uo(t,e)}}},co=so,lo=function(t,n){return function(){var e=t.dom.getParent(t.selection.getStart(),"UL,OL,DL");return e&&e.nodeName===n}},fo=function(n){n.on("BeforeExecCommand",function(e){var t=e.command.toLowerCase();"indent"===t?br(n):"outdent"===t&&yr(n)}),n.addCommand("InsertUnorderedList",function(e,t){zr.toggleList(n,"UL",t)}),n.addCommand("InsertOrderedList",function(e,t){zr.toggleList(n,"OL",t)}),n.addCommand("InsertDefinitionList",function(e,t){zr.toggleList(n,"DL",t)}),n.addCommand("RemoveList",function(){xr(n)}),n.addQueryStateHandler("InsertUnorderedList",lo(n,"UL")),n.addQueryStateHandler("InsertOrderedList",lo(n,"OL")),n.addQueryStateHandler("InsertDefinitionList",lo(n,"DL"))},mo=fo,go=function(e){return e.getParam("lists_indent_on_tab",!0)},ho=go,po=function(t){t.on("keydown",function(e){e.keyCode!==a.TAB||a.metaKeyPressed(e)||t.undoManager.transact(function(){(e.shiftKey?yr(t):br(t))&&e.preventDefault()})})},vo=function(e){ho(e)&&po(e),ao(e)},bo=vo,yo=function(e,t){var n;for(n=0;n<e.length;n++)if(t(e[n]))return n;return-1},xo=function(t,i){return function(e){var o=e.control;t.on("NodeChange",function(e){var t=yo(e.parents,_),n=-1!==t?e.parents.slice(0,t):e.parents,r=f.grep(n,T);o.active(0<r.length&&r[0].nodeName===i)})}},wo=function(e){var t,n,r;n="advlist",r=(t=e).settings.plugins?t.settings.plugins:"",-1===f.inArray(r.split(/[ ,]/),n)&&(e.addButton("numlist",{active:!1,title:"Numbered list",cmd:"InsertOrderedList",onPostRender:xo(e,"OL")}),e.addButton("bullist",{active:!1,title:"Bullet list",cmd:"InsertUnorderedList",onPostRender:xo(e,"UL")})),e.addButton("indent",{icon:"indent",title:"Increase indent",cmd:"Indent"})},Co=wo;i.add("lists",function(e){return bo(e),Co(e),mo(e),co(e)})}(window),function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),u=tinymce.util.Tools.resolve("tinymce.util.Tools"),t=function(e,t,n){var r="UL"===t?"InsertUnorderedList":"InsertOrderedList";e.execCommand(r,!1,!1===n?null:{"list-style-type":n})},a=t,n=function(n){n.addCommand("ApplyUnorderedListStyle",function(e,t){a(n,"UL",t["list-style-type"])}),n.addCommand("ApplyOrderedListStyle",function(e,t){a(n,"OL",t["list-style-type"])})},o=n,r=function(e){var t=e.getParam("advlist_number_styles","default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman");return t?t.split(/[ ,]/):[]},i=function(e){var t=e.getParam("advlist_bullet_styles","default,circle,disc,square");return t?t.split(/[ ,]/):[]},s=r,c=i,l=function(e,t){return e.$.contains(e.getBody(),t)},f=function(e){return e&&/^(TH|TD)$/.test(e.nodeName)},d=function(t){return function(e){return e&&/^(OL|UL|DL)$/.test(e.nodeName)&&l(t,e)}},m=function(e){var t=e.dom.getParent(e.selection.getNode(),"ol,ul");return e.dom.getStyle(t,"listStyleType")||""},g=f,h=d,p=m,v=function(e){return e.replace(/\-/g," ").replace(/\b\w/g,function(e){return e.toUpperCase()})},b=function(e){return u.map(e,function(e){var t=v(e),n="default"===e?"":e;return{text:t,data:n}})},y=b,x=function(e,t){var n;for(n=0;n<e.length;n++)if(t(e[n]))return n;return-1},w=function(i,a){return function(e){var o=e.control;i.on("NodeChange",function(e){var t=x(e.parents,g),n=-1!==t?e.parents.slice(0,t):e.parents,r=u.grep(n,h(i));o.active(0<r.length&&r[0].nodeName===a)})}},C=function(n){return function(e){var t=p(n);e.control.items().each(function(e){e.active(e.settings.data===t)})}},S=function(t,e,n,r,o,i){t.addButton(e,{active:!1,type:"splitbutton",tooltip:n,menu:y(i),onPostRender:w(t,o),onshow:C(t),onselect:function(e){a(t,o,e.control.settings.data)},onclick:function(){t.execCommand(r)}})},N=function(e,t,n,r,o,i){e.addButton(t,{active:!1,type:"button",tooltip:n,onPostRender:w(e,o),onclick:function(){e.execCommand(r)}})},T=function(e,t,n,r,o,i){0<i.length?S(e,t,n,r,o,i):N(e,t,n,r,o,i)},E=function(e){T(e,"numlist","Numbered list","InsertOrderedList","OL",s(e)),T(e,"bullist","Bullet list","InsertUnorderedList","UL",c(e))},k=E;e.add("advlist",function(e){var t,n,r;n="lists",r=(t=e).settings.plugins?t.settings.plugins:"",-1!==u.inArray(r.split(/[ ,]/),n)&&(k(e),o(e))})}(),function(u){"use strict";var c,l,f,d,o,m,n,g,h,p,v,b,y,i,r,a,s,x,w,C,S,t,N,T,E,k,R,_,A,D,O,e=tinymce.util.Tools.resolve("tinymce.PluginManager");function P(e){var t,n=this.parent().parent().find("#alt")[0];""==n.value()&&(t=this.value(),n.value(t.substring(t.lastIndexOf("/")+1)))}function B(a){var t=function(e,t,n,r){var o,i;(o=new(x.getOrDie("XMLHttpRequest"))).open("POST",a.url),o.withCredentials=a.credentials,o.upload.onprogress=function(e){r(e.loaded/e.total*100)},o.onerror=function(){n("File upload failed due to a XHR Transport error. Code: "+o.status)},o.onload=function(){var e;o.status<200||300<=o.status?n("HTTP Error: "+o.status):(e=JSON.parse(o.responseText))&&"string"==typeof e.location?t(R(a.basePath,e.location)):n("Invalid JSON: "+o.responseText)},(i=new u.FormData).append("file",e.blob,e.name),i.append("type","attach"),o.send(i)},n=function(n,r){return new w(function(e,t){try{r(n,e,t,k)}catch(e){t(e.message)}})},r=function(e){return e===t},e=function(e){return!a.url&&r(a.handler)?w.reject("Upload url missing from the settings."):n(e,a.handler)};return a=C.extend({credentials:!1,handler:t},a),{upload:e}}function M(e,t){var n,r;(n=t.data.src)?(r={href:n,target:"_blank",class:"attach"},d?(e.focus(),m&&t.data.alt!=o&&("innerText"in d?d.innerText=t.data.alt:d.textContent=t.data.alt),l.setAttribs(d,r),c.select(d),e.undoManager.add()):m?e.insertContent(l.createHTML("a",r,l.encode(t.data.alt))):e.execCommand("mceInsertLink",!1,r)):e.execCommand("unlink")}function I(r){var e,o=[];for(e=1;e<arguments.length;e++)o[e-1]=arguments[e];return function(){var e,t,n=[];for(e=0;e<arguments.length;e++)n[e]=arguments[e];return t=o.concat(n),r.apply(null,t)}}function L(s){function e(){var e,t,n,r,o,i,a,u;c=s.selection,l=s.dom,f=c.getNode(),d=l.getParent(f,"a[href].attach"),m=function(e){var t,n,r=c.getContent();if(/</.test(r)&&(!/^<a [^>]+>[^<]+<\/a>$/.test(r)||-1==r.indexOf("href=")))return!1;if(e){if(0===(t=e.childNodes).length)return!1;for(n=t.length-1;0<=n;n--)if(3!=t[n].nodeType)return!1}return!0}(d),i={},a=(n=s).selection,u=n.dom,r=a.getNode(),o=u.getParent(r,"a[href].attach"),i.alt=o?o.innerText||o.textContent:a.getContent({format:"text"}),i.src=o?u.getAttrib(o,"href"):"",e=i,g(s)||h(s)?(t=[N(s)],(g(s)||h(s))&&t.push(A(s)),s.windowManager.open({title:"Attach File",data:e,bodyType:"tabpanel",body:t,onSubmit:I(M,s)})):s.windowManager.open({title:"Attach File",data:e,body:T(s),onSubmit:I(M,s)})}return{open:function(){e()}}}n=function(e){return!1!==e.settings.image_description},g=function(e){return e.getParam("images_upload_url",!1)},h=function(e){return e.getParam("images_upload_handler",!1)},p=function(e){return e.getParam("images_upload_url")},v=function(e){return e.getParam("images_upload_handler")},b=function(e){return e.getParam("images_upload_base_path")},y=function(e){return e.getParam("images_upload_credentials")},i=void 0!==u.window?u.window:Function("return this;")(),r=function(e,t){var n,r=null!=t?t:i;for(n=0;n<e.length&&null!=r;++n)r=r[e[n]];return r},a=function(e,t){var n=e.split(".");return r(n,t)},s=function(e,t){return a(e,t)},x={getOrDie:function(e,t){var n=s(e,t);if(null==n)throw e+" not available on this browser";return n}},w=tinymce.util.Tools.resolve("tinymce.util.Promise"),C=tinymce.util.Tools.resolve("tinymce.util.Tools"),S=function(e){e.meta=e.control.rootControl.toJSON()},N=function(e){return{title:"General",type:"form",items:t(e)}},T=t=function(e){var t=[{name:"src",type:"filepicker",filetype:"file",size:40,label:"Source",autofocus:!0,onchange:P,onbeforecall:S}];return n(e)&&t.push({name:"alt",type:"textbox",label:"File description",size:40}),t},E=tinymce.util.Tools.resolve("tinymce.ui.Factory"),k=function(){},R=function(e,t){return e?e.replace(/\/$/,"")+"/"+t.replace(/^\//,""):t},_=function(s){return function(e){var t,n=E.get("Throbber"),r=e.control.rootControl,o=new n(r.getEl()),i=e.control.value(),a=B({url:p(s),basePath:b(s),credentials:y(s),handler:v(s)}),u=function(){o.hide()};return o.show(),t={blob:i,name:i.name?i.name:null},a.upload(t).then(function(e){var t=r.find("#src");return t.value(e),r.find("tabpanel")[0].activateTab(0),t.fire("change"),u(),e})}},A=function(e){return{title:"Upload",type:"form",layout:"flex",direction:"column",align:"stretch",padding:"20 20 20 20",items:[{type:"container",layout:"flex",direction:"column",align:"center",spacing:10,items:[{text:"Browse for a file",type:"browsebutton",onchange:_(e)},{text:"OR",type:"label"}]},{text:"Drop a file here",type:"dropzone",height:100,onchange:_(e)}]}},D=function(e){e.addCommand("mceAttach",L(e).open)},O=function(e){e.addButton("attach",{icon:"attach",tooltip:"Attach File",onclick:L(e).open,stateSelector:"a[href].attach"}),e.addMenuItem("attach",{icon:"attach",text:"Attach File",onclick:L(e).open,stateSelector:"a[href].attach",context:"insert",prependToContext:!0})},e.add("attach",function(e){O(e),D(e)})}(window),function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=tinymce.util.Tools.resolve("tinymce.Env"),t=function(e){return e.getParam("autolink_pattern",/^(https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.|(?:mailto:)?[A-Z0-9._%+\-]+@)(.+)$/i)},r=function(e){return e.getParam("default_link_target","")},h=t,p=r,v=function(e,t){return e===t||" "===e||160===e.charCodeAt(0)},o=function(e){s(e,-1,"(")},i=function(e){s(e,0,"")},a=function(e){s(e,-1,"")},u=function(e,t){if(t<0&&(t=0),3===e.nodeType){var n=e.data.length;n<t&&(t=n)}return t},b=function(e,t,n){1!==t.nodeType||t.hasChildNodes()?e.setStart(t,u(t,n)):e.setStartBefore(t)},y=function(e,t,n){1!==t.nodeType||t.hasChildNodes()?e.setEnd(t,u(t,n)):e.setEndAfter(t)},s=function(e,t,n){var r,o,i,a,u,s,c,l,f,d,m=h(e),g=p(e);if("A"!==e.selection.getNode().tagName){if((r=e.selection.getRng(!0).cloneRange()).startOffset<5){if(!(l=r.endContainer.previousSibling)){if(!r.endContainer.firstChild||!r.endContainer.firstChild.nextSibling)return;l=r.endContainer.firstChild.nextSibling}if(f=l.length,b(r,l,f),y(r,l,f),r.endOffset<5)return;o=r.endOffset,a=l}else{if(3!==(a=r.endContainer).nodeType&&a.firstChild){for(;3!==a.nodeType&&a.firstChild;)a=a.firstChild;3===a.nodeType&&(b(r,a,0),y(r,a,a.nodeValue.length))}o=1===r.endOffset?2:r.endOffset-1-t}for(i=o;b(r,a,2<=o?o-2:0),y(r,a,1<=o?o-1:0),o-=1," "!==(d=r.toString())&&""!==d&&160!==d.charCodeAt(0)&&0<=o-2&&d!==n;);v(r.toString(),n)?(b(r,a,o),y(r,a,i),o+=1):(0===r.startOffset?b(r,a,0):b(r,a,o),y(r,a,i)),"."===(s=r.toString()).charAt(s.length-1)&&y(r,a,i-1),(c=(s=r.toString().trim()).match(m))&&("www."===c[1]?c[1]="http://www.":/@$/.test(c[1])&&!/^mailto:/.test(c[1])&&(c[1]="mailto:"+c[1]),u=e.selection.getBookmark(),e.selection.setRng(r),e.execCommand("createlink",!1,c[1]+c[2]),g&&e.dom.setAttrib(e.selection.getNode(),"target",g),e.selection.moveToBookmark(u),e.nodeChanged())}},c=function(t){var e;t.on("keydown",function(e){if(13===e.keyCode)return a(t)}),n.ie?t.on("focus",function(){if(!e){e=!0;try{t.execCommand("AutoUrlDetect",!1,!0)}catch(e){}}}):(t.on("keypress",function(e){if(41===e.keyCode)return o(t)}),t.on("keyup",function(e){if(32===e.keyCode)return i(t)}))},l=c;e.add("autolink",function(e){l(e)})}(),function(u){"use strict";var o,c,r,i,l,a,s,f,d,t,m,g,e,h,p,v,b,y,x,n,w,C,S,N,T,E,k,R,_,A,D,O,P,B,M,I,L,F,H,z,W,U,j,V,q,$,Y,X,K,G,J,Q,Z,ee,te,ne,re,oe,ie,ae,ue,se,ce,le,fe,de,me,ge,he,pe,ve,be,ye,xe,we,Ce,Se,Ne,Te,Ee,ke,Re,_e=tinymce.util.Tools.resolve("tinymce.PluginManager"),Ae=function(e){return!1!==e.settings.image_dimensions},De=function(e){return!0===e.settings.image_advtab},Oe=function(e){return e.getParam("image_prepend_url","")},Pe=function(e){return e.getParam("image_class_list")},Be=function(e){return!1!==e.settings.image_description},Me=function(e){return!0===e.settings.image_title},Ie=function(e){return!0===e.settings.image_caption},Le=function(e){return e.getParam("image_list",!1)},Fe=function(e){return e.getParam("images_upload_url",!1)},He=function(e){return e.getParam("images_upload_handler",!1)},ze=function(e){return e.getParam("images_upload_url")},We=function(e){return e.getParam("images_upload_handler")},Ue=function(e){return e.getParam("images_upload_base_path")},je=function(e){return e.getParam("images_upload_credentials")},Ve=Ae,qe=De,$e=Oe,Ye=Pe,Xe=Be,Ke=Me,Ge=Ie,Je=Le,Qe=Fe,Ze=He,et=ze,tt=We,nt=Ue,rt=je,ot=void 0!==u.window?u.window:Function("return this;")(),it=function(e,t){var n,r=null!=t?t:ot;for(n=0;n<e.length&&null!=r;++n)r=r[e[n]];return r},at=function(e,t){var n=e.split(".");return it(n,t)},ut=function(e,t){return at(e,t)},st=function(e,t){var n=ut(e,t);if(null==n)throw e+" not available on this browser";return n},ct={getOrDie:st};function lt(a){var t=function(e,t,n,r){var o,i;(o=new(ct.getOrDie("XMLHttpRequest"))).open("POST",a.url),o.withCredentials=a.credentials,o.upload.onprogress=function(e){r(e.loaded/e.total*100)},o.onerror=function(){n("Image upload failed due to a XHR Transport error. Code: "+o.status)},o.onload=function(){var e;o.status<200||300<=o.status?n("HTTP Error: "+o.status):(e=JSON.parse(o.responseText))&&"string"==typeof e.location?t(be(a.basePath,e.location)):n("Invalid JSON: "+o.responseText)},(i=new u.FormData).append("file",e.blob(),e.filename()),o.send(i)},n=function(n,r){return new o(function(e,t){try{r(n,e,t,ve)}catch(e){t(e.message)}})},r=function(e){return e===t},e=function(e){return!a.url&&r(a.handler)?o.reject("Upload url missing from the settings."):n(e,a.handler)};return a=c.extend({credentials:!1,handler:t},a),{upload:e}}function ft(r){var e,o=[];for(e=1;e<arguments.length;e++)o[e-1]=arguments[e];return function(){var e,t,n=[];for(e=0;e<arguments.length;e++)n[e]=arguments[e];return t=o.concat(n),r.apply(null,t)}}function dt(i){function e(e){var n,t,r,o=$(i);e&&(t={type:"listbox",label:"Image list",name:"image-list",values:a(e,function(e){e.value=i.convertURL(e.value||e.url,"src")},[{text:"None",value:""}]),value:o.src&&i.convertURL(o.src,"src"),onselect:function(e){var t=n.find("#alt");(!t.value()||e.lastControl&&t.value()===e.lastControl.text())&&t.value(e.control.text()),n.find("#src").value(e.control.value()).fire("change")},onPostRender:function(){t=this}}),n=qe(i)||Qe(i)||Ze(i)?(r=[fe(i,t)],qe(i)&&r.push(ee(i)),(Qe(i)||Ze(i))&&r.push(we(i)),i.windowManager.open({title:"Insert/edit image",data:o,bodyType:"tabpanel",body:r,onSubmit:ft(Ce,i)})):i.windowManager.open({title:"Insert/edit image",data:o,body:de(i,t),onSubmit:ft(Ce,i)}),ae(n)}return{open:function(){t(i,e)}}}o=tinymce.util.Tools.resolve("tinymce.util.Promise"),c=tinymce.util.Tools.resolve("tinymce.util.Tools"),r=tinymce.util.Tools.resolve("tinymce.util.XHR"),i=function(e,t){return Math.max(parseInt(e,10),parseInt(t,10))},l=function(e,n){var t,r=u.document.createElement("img");function o(e,t){r.parentNode&&r.parentNode.removeChild(r),n({width:e,height:t})}r.onload=function(){var e=i(r.width,r.clientWidth),t=i(r.height,r.clientHeight);o(e,t)},r.onerror=function(){o(0,0)},(t=r.style).visibility="hidden",t.position="fixed",t.bottom=t.left="0px",t.width=t.height="auto",u.document.body.appendChild(r),r.src=e},a=function(e,o,t){return function n(e,r){return r=r||[],c.each(e,function(e){var t={text:e.text||e.title};e.menu?t.menu=n(e.menu):(t.value=e.value,o(t)),r.push(t)}),r}(e,t||[])},s=function(e){return e&&(e=e.replace(/px$/,"")),e},f=function(e){return 0<e.length&&/^[0-9]+$/.test(e)&&(e+="px"),e},d=function(e){if(e.margin){var t=e.margin.split(" ");switch(t.length){case 1:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[0],e["margin-bottom"]=e["margin-bottom"]||t[0],e["margin-left"]=e["margin-left"]||t[0];break;case 2:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[0],e["margin-left"]=e["margin-left"]||t[1];break;case 3:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[2],e["margin-left"]=e["margin-left"]||t[1];break;case 4:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[2],e["margin-left"]=e["margin-left"]||t[3]}delete e.margin}return e},t=function(e,t){var n=Je(e);"string"==typeof n?r.send({url:n,success:function(e){t(JSON.parse(e))}}):"function"==typeof n?n(t):t(n)},m=function(e,t,n){function r(){n.onload=n.onerror=null,e.selection&&(e.selection.select(n),e.nodeChanged())}n.onload=function(){t.width||t.height||!Ve(e)||e.dom.setAttribs(n,{width:n.clientWidth,height:n.clientHeight}),r()},n.onerror=r},g=function(r){return new o(function(e,t){var n=new(ct.getOrDie("FileReader"));n.onload=function(){e(n.result)},n.onerror=function(){t(n.error.message)},n.readAsDataURL(r)})},e=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),h=Object.prototype.hasOwnProperty,Re=function(e,t){return t},p=function(){var e,t,n,r,o,i=new Array(arguments.length);for(e=0;e<i.length;e++)i[e]=arguments[e];if(0===i.length)throw new Error("Can't merge zero objects");for(t={},n=0;n<i.length;n++)for(o in r=i[n])h.call(r,o)&&(t[o]=Re(t[o],r[o]));return t},v=e.DOM,b=function(e){return e.style.marginLeft&&e.style.marginRight&&e.style.marginLeft===e.style.marginRight?s(e.style.marginLeft):""},y=function(e){return e.style.marginTop&&e.style.marginBottom&&e.style.marginTop===e.style.marginBottom?s(e.style.marginTop):""},x=function(e){return e.style.borderWidth?s(e.style.borderWidth):""},n=function(e,t){return e.hasAttribute(t)?e.getAttribute(t):""},w=function(e,t){return e.style[t]?e.style[t]:""},C=function(e){return null!==e.parentNode&&"FIGURE"===e.parentNode.nodeName},S=function(e,t,n){e.setAttribute(t,n)},N=function(e){var t=v.create("figure",{class:"image"});v.insertAfter(t,e),t.appendChild(e),t.appendChild(v.create("figcaption",{contentEditable:!0},"Caption")),t.contentEditable="false"},T=function(e){var t=e.parentNode;v.insertAfter(e,t),v.remove(t)},E=function(e){C(e)?T(e):N(e)},k=function(e,t){var n=e.getAttribute("style"),r=t(null!==n?n:"");0<r.length?(e.setAttribute("style",r),e.setAttribute("data-mce-style",r)):e.removeAttribute("style")},R=function(e,r){return function(e,t,n){e.style[t]?(e.style[t]=f(n),k(e,r)):S(e,t,n)}},_=function(e,t){return e.style[t]?s(e.style[t]):n(e,t)},A=function(e,t){var n=f(t);e.style.marginLeft=n,e.style.marginRight=n},D=function(e,t){var n=f(t);e.style.marginTop=n,e.style.marginBottom=n},O=function(e,t){var n=f(t);e.style.borderWidth=n},P=function(e,t){e.style.borderStyle=t},B=function(e){return w(e,"borderStyle")},M=function(e){return"FIGURE"===e.nodeName},I=function(){return{src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:""}},L=function(e,t){var n=u.document.createElement("img");return S(n,"style",t.style),(b(n)||""!==t.hspace)&&A(n,t.hspace),(y(n)||""!==t.vspace)&&D(n,t.vspace),(x(n)||""!==t.border)&&O(n,t.border),(B(n)||""!==t.borderStyle)&&P(n,t.borderStyle),e(n.getAttribute("style"))},F=function(e,t){var n,r=u.document.createElement("img");return U(e,p(t,{caption:!1}),r),S(r,"alt",t.alt),t.caption?((n=v.create("figure",{class:"image"})).appendChild(r),n.appendChild(v.create("figcaption",{contentEditable:!0},"Caption")),n.contentEditable="false",n):r},H=function(e,t){return{src:n(t,"src"),alt:n(t,"alt"),title:n(t,"title"),width:_(t,"width"),height:_(t,"height"),class:n(t,"class"),style:e(n(t,"style")),caption:C(t),hspace:b(t),vspace:y(t),border:x(t),borderStyle:w(t,"borderStyle")}},z=function(e,t,n,r,o){n[r]!==t[r]&&o(e,r,n[r])},W=function(r,o){return function(e,t,n){r(e,n),k(e,o)}},U=function(e,t,n){var r=H(e,n);z(n,r,t,"caption",function(e,t,n){return E(e)}),z(n,r,t,"src",S),z(n,r,t,"alt",S),z(n,r,t,"title",S),z(n,r,t,"width",R("width",e)),z(n,r,t,"height",R("height",e)),z(n,r,t,"class",S),z(n,r,t,"style",W(function(e,t){return S(e,"style",t)},e)),z(n,r,t,"hspace",W(A,e)),z(n,r,t,"vspace",W(D,e)),z(n,r,t,"border",W(O,e)),z(n,r,t,"borderStyle",W(P,e))},j=function(e,t){var n=e.dom.styles.parse(t),r=d(n),o=e.dom.styles.parse(e.dom.styles.serialize(r));return e.dom.styles.serialize(o)},V=function(e){var t=e.selection.getNode(),n=e.dom.getParent(t,"figure.image");return n?e.dom.select("img",n)[0]:t&&("IMG"!==t.nodeName||t.getAttribute("data-mce-object")||t.getAttribute("data-mce-placeholder"))?null:t},q=function(t,e){var n=t.dom,r=n.getParent(e.parentNode,function(e){return t.schema.getTextBlockElements()[e.nodeName]},t.getBody());return r?n.split(r,e):e},$=function(t){var e=V(t);return e?H(function(e){return j(t,e)},e):I()},Y=function(t,e){var n,r,o=F(function(e){return j(t,e)},e);t.dom.setAttrib(o,"data-mce-id","__mcenew"),t.focus(),t.selection.setContent(o.outerHTML),n=t.dom.select('*[data-mce-id="__mcenew"]')[0],t.dom.setAttrib(n,"data-mce-id",null),M(n)?(r=q(t,n),t.selection.select(r)):t.selection.select(n)},X=function(e,t){e.dom.setAttrib(t,"src",t.getAttribute("src"))},K=function(e,t){if(t){var n=e.dom.is(t.parentNode,"figure.image")?t.parentNode:t;e.dom.remove(n),e.focus(),e.nodeChanged(),e.dom.isEmpty(e.getBody())&&(e.setContent(""),e.selection.setCursorLocation())}},G=function(t,e){var n,r=V(t);U(function(e){return j(t,e)},e,r),X(t,r),M(r.parentNode)?(n=r.parentNode,q(t,n),t.selection.select(r.parentNode)):(t.selection.select(r),m(t,e,r))},J=function(e,t){var n=V(e);n?t.src?G(e,t):K(e,n):t.src&&Y(e,t)},Q=function(i){return function(e){var t,n,r=i.dom,o=e.control.rootControl;qe(i)&&(t=o.toJSON(),n=r.parseStyle(t.style),o.find("#vspace").value(""),o.find("#hspace").value(""),((n=d(n))["margin-top"]&&n["margin-bottom"]||n["margin-right"]&&n["margin-left"])&&(n["margin-top"]===n["margin-bottom"]?o.find("#vspace").value(s(n["margin-top"])):o.find("#vspace").value(""),n["margin-right"]===n["margin-left"]?o.find("#hspace").value(s(n["margin-right"])):o.find("#hspace").value("")),n["border-width"]?o.find("#border").value(s(n["border-width"])):o.find("#border").value(""),n["border-style"]?o.find("#borderStyle").value(n["border-style"]):o.find("#borderStyle").value(""),o.find("#style").value(r.serializeStyle(r.parseStyle(r.serializeStyle(n)))))}},Z=function(n,r){r.find("#style").each(function(e){var t=L(function(e){return j(n,e)},p(I(),r.toJSON()));e.value(t)})},ee=function(t){return{title:"Advanced",type:"form",pack:"start",items:[{label:"Style",name:"style",type:"textbox",onchange:Q(t)},{type:"form",layout:"grid",packV:"start",columns:2,padding:0,defaults:{type:"textbox",maxWidth:50,onchange:function(e){Z(t,e.control.rootControl)}},items:[{label:"Vertical space",name:"vspace"},{label:"Border width",name:"border"},{label:"Horizontal space",name:"hspace"},{label:"Border style",type:"listbox",name:"borderStyle",width:90,maxWidth:90,onselect:function(e){Z(t,e.control.rootControl)},values:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]}]}]}},te=function(e,t){e.state.set("oldVal",e.value()),t.state.set("oldVal",t.value())},ne=function(e,t){var n=e.find("#width")[0],r=e.find("#height")[0],o=e.find("#constrain")[0];n&&r&&o&&t(n,r,o.checked())},re=function(e,t,n){var r=e.state.get("oldVal"),o=t.state.get("oldVal"),i=e.value(),a=t.value();n&&r&&o&&i&&a&&(i!==r?(a=Math.round(i/r*a),isNaN(a)||t.value(a)):(i=Math.round(a/o*i),isNaN(i)||e.value(i))),te(e,t)},ie=function(){var e=function(e){oe(e.control.rootControl)};return{type:"container",label:"Dimensions",layout:"flex",align:"center",spacing:5,items:[{name:"width",type:"textbox",maxLength:5,size:5,onchange:e,ariaLabel:"Width"},{type:"label",text:"x"},{name:"height",type:"textbox",maxLength:5,size:5,onchange:e,ariaLabel:"Height"},{name:"constrain",type:"checkbox",checked:!0,text:"Constrain proportions"}]}},ae=function(e){ne(e,te)},ue=oe=function(e){ne(e,re)},se=function(e,t){var n,r,o,i=e.meta||{},a=e.control,u=a.rootControl,s=u.find("#image-list")[0];s&&s.value(t.convertURL(a.value(),"src")),c.each(i,function(e,t){u.find("#"+t).value(e)}),i.width||i.height||(n=t.convertURL(a.value(),"src"),r=$e(t),o=new RegExp("^(?:[a-z]+:)?//","i"),r&&!o.test(n)&&n.substring(0,r.length)!==r&&(n=r+n),a.value(n),l(t.documentBaseURI.toAbsolute(a.value()),function(e){e.width&&e.height&&Ve(t)&&(u.find("#width").value(e.width),u.find("#height").value(e.height),ae(u))}))},ce=function(e){e.meta=e.control.rootControl.toJSON()},fe=function(e,t){return{title:"General",type:"form",items:le(e,t)}},de=le=function(t,e){var n=[{name:"src",type:"filepicker",filetype:"image",label:"Source",autofocus:!0,onchange:function(e){se(e,t)},onbeforecall:ce},e];return Xe(t)&&n.push({name:"alt",type:"textbox",label:"Image description"}),Ke(t)&&n.push({name:"title",type:"textbox",label:"Image Title"}),Ve(t)&&n.push(ie()),Ye(t)&&n.push({name:"class",type:"listbox",label:"Class",values:a(Ye(t),function(e){e.value&&(e.textStyle=function(){return t.formatter.getCssText({inline:"img",classes:[e.value]})})})}),Ge(t)&&n.push({name:"caption",type:"checkbox",label:"Caption"}),n},me=function(){return ct.getOrDie("URL")},ge=function(e){return me().createObjectURL(e)},he=function(e){me().revokeObjectURL(e)},pe=tinymce.util.Tools.resolve("tinymce.ui.Factory"),ve=function(){},be=function(e,t){return e?e.replace(/\/$/,"")+"/"+t.replace(/^\//,""):t},ye=function(s){return function(e){var t=pe.get("Throbber"),n=e.control.rootControl,r=new t(n.getEl()),o=e.control.value(),i=ge(o),a=lt({url:et(s),basePath:nt(s),credentials:rt(s),handler:tt(s)}),u=function(){r.hide(),he(i)};return r.show(),g(o).then(function(e){var t=s.editorUpload.blobCache.create({blob:o,blobUri:i,name:o.name?o.name.replace(/\.[^\.]+$/,""):null,base64:e.split(",")[1]});return a.upload(t).then(function(e){var t=n.find("#src");return t.value(e),n.find("tabpanel")[0].activateTab(0),t.fire("change"),u(),e})}).catch(function(e){s.windowManager.alert(e),u()})}},xe=".jpg,.jpeg,.png,.gif",we=function(e){return{title:"Upload",type:"form",layout:"flex",direction:"column",align:"stretch",padding:"20 20 20 20",items:[{type:"container",layout:"flex",direction:"column",align:"center",spacing:10,items:[{text:"Browse for an image",type:"browsebutton",accept:xe,onchange:ye(e)},{text:"OR",type:"label"}]},{text:"Drop an image here",type:"dropzone",accept:xe,height:100,onchange:ye(e)}]}},Ce=function(t,e){var n=e.control.getRoot();ue(n),t.undoManager.transact(function(){var e=p($(t),n.toJSON());J(t,e)}),t.editorUpload.uploadImagesAuto()},Se=function(e){e.addCommand("mceImage",dt(e).open)},Ne=function(e){var t=e.attr("class");return t&&/\bimage\b/.test(t)},Te=function(o){return function(e){for(var t,n=e.length,r=function(e){e.attr("contenteditable",o?"true":null)};n--;)t=e[n],Ne(t)&&(t.attr("contenteditable",o?"false":null),c.each(t.getAll("figcaption"),r))}},Ee=function(e){e.on("preInit",function(){e.parser.addNodeFilter("figure",Te(!0)),e.serializer.addNodeFilter("figure",Te(!1))})},ke=function(e){e.addButton("image",{icon:"image",tooltip:"Insert/edit image",onclick:dt(e).open,stateSelector:"img:not([data-mce-object],[data-mce-placeholder]),figure.image"}),e.addMenuItem("image",{icon:"image",text:"Image",onclick:dt(e).open,context:"insert",prependToContext:!0})},_e.add("image",function(e){Ee(e),ke(e),Se(e)})}(window),function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=function(e,t){return e.fire("insertCustomChar",{chr:t})},r=t,n=function(e,t){var n=r(e,t).chr;e.execCommand("mceInsertContent",!1,n)},u=n,o=tinymce.util.Tools.resolve("tinymce.util.Tools"),i=function(e){return e.settings.charmap},a=function(e){return e.settings.charmap_append},s=i,c=a,l=o.isArray,f=function(){return[["160","no-break space"],["173","soft hyphen"],["34","quotation mark"],["162","cent sign"],["8364","euro sign"],["163","pound sign"],["165","yen sign"],["169","copyright sign"],["174","registered sign"],["8482","trade mark sign"],["8240","per mille sign"],["181","micro sign"],["183","middle dot"],["8226","bullet"],["8230","three dot leader"],["8242","minutes / feet"],["8243","seconds / inches"],["167","section sign"],["182","paragraph sign"],["223","sharp s / ess-zed"],["8249","single left-pointing angle quotation mark"],["8250","single right-pointing angle quotation mark"],["171","left pointing guillemet"],["187","right pointing guillemet"],["8216","left single quotation mark"],["8217","right single quotation mark"],["8220","left double quotation mark"],["8221","right double quotation mark"],["8218","single low-9 quotation mark"],["8222","double low-9 quotation mark"],["60","less-than sign"],["62","greater-than sign"],["8804","less-than or equal to"],["8805","greater-than or equal to"],["8211","en dash"],["8212","em dash"],["175","macron"],["8254","overline"],["164","currency sign"],["166","broken bar"],["168","diaeresis"],["161","inverted exclamation mark"],["191","turned question mark"],["710","circumflex accent"],["732","small tilde"],["176","degree sign"],["8722","minus sign"],["177","plus-minus sign"],["247","division sign"],["8260","fraction slash"],["215","multiplication sign"],["185","superscript one"],["178","superscript two"],["179","superscript three"],["188","fraction one quarter"],["189","fraction one half"],["190","fraction three quarters"],["402","function / florin"],["8747","integral"],["8721","n-ary sumation"],["8734","infinity"],["8730","square root"],["8764","similar to"],["8773","approximately equal to"],["8776","almost equal to"],["8800","not equal to"],["8801","identical to"],["8712","element of"],["8713","not an element of"],["8715","contains as member"],["8719","n-ary product"],["8743","logical and"],["8744","logical or"],["172","not sign"],["8745","intersection"],["8746","union"],["8706","partial differential"],["8704","for all"],["8707","there exists"],["8709","diameter"],["8711","backward difference"],["8727","asterisk operator"],["8733","proportional to"],["8736","angle"],["180","acute accent"],["184","cedilla"],["170","feminine ordinal indicator"],["186","masculine ordinal indicator"],["8224","dagger"],["8225","double dagger"],["192","A - grave"],["193","A - acute"],["194","A - circumflex"],["195","A - tilde"],["196","A - diaeresis"],["197","A - ring above"],["256","A - macron"],["198","ligature AE"],["199","C - cedilla"],["200","E - grave"],["201","E - acute"],["202","E - circumflex"],["203","E - diaeresis"],["274","E - macron"],["204","I - grave"],["205","I - acute"],["206","I - circumflex"],["207","I - diaeresis"],["298","I - macron"],["208","ETH"],["209","N - tilde"],["210","O - grave"],["211","O - acute"],["212","O - circumflex"],["213","O - tilde"],["214","O - diaeresis"],["216","O - slash"],["332","O - macron"],["338","ligature OE"],["352","S - caron"],["217","U - grave"],["218","U - acute"],["219","U - circumflex"],["220","U - diaeresis"],["362","U - macron"],["221","Y - acute"],["376","Y - diaeresis"],["562","Y - macron"],["222","THORN"],["224","a - grave"],["225","a - acute"],["226","a - circumflex"],["227","a - tilde"],["228","a - diaeresis"],["229","a - ring above"],["257","a - macron"],["230","ligature ae"],["231","c - cedilla"],["232","e - grave"],["233","e - acute"],["234","e - circumflex"],["235","e - diaeresis"],["275","e - macron"],["236","i - grave"],["237","i - acute"],["238","i - circumflex"],["239","i - diaeresis"],["299","i - macron"],["240","eth"],["241","n - tilde"],["242","o - grave"],["243","o - acute"],["244","o - circumflex"],["245","o - tilde"],["246","o - diaeresis"],["248","o slash"],["333","o macron"],["339","ligature oe"],["353","s - caron"],["249","u - grave"],["250","u - acute"],["251","u - circumflex"],["252","u - diaeresis"],["363","u - macron"],["253","y - acute"],["254","thorn"],["255","y - diaeresis"],["563","y - macron"],["913","Alpha"],["914","Beta"],["915","Gamma"],["916","Delta"],["917","Epsilon"],["918","Zeta"],["919","Eta"],["920","Theta"],["921","Iota"],["922","Kappa"],["923","Lambda"],["924","Mu"],["925","Nu"],["926","Xi"],["927","Omicron"],["928","Pi"],["929","Rho"],["931","Sigma"],["932","Tau"],["933","Upsilon"],["934","Phi"],["935","Chi"],["936","Psi"],["937","Omega"],["945","alpha"],["946","beta"],["947","gamma"],["948","delta"],["949","epsilon"],["950","zeta"],["951","eta"],["952","theta"],["953","iota"],["954","kappa"],["955","lambda"],["956","mu"],["957","nu"],["958","xi"],["959","omicron"],["960","pi"],["961","rho"],["962","final sigma"],["963","sigma"],["964","tau"],["965","upsilon"],["966","phi"],["967","chi"],["968","psi"],["969","omega"],["8501","alef symbol"],["982","pi symbol"],["8476","real part symbol"],["978","upsilon - hook symbol"],["8472","Weierstrass p"],["8465","imaginary part"],["8592","leftwards arrow"],["8593","upwards arrow"],["8594","rightwards arrow"],["8595","downwards arrow"],["8596","left right arrow"],["8629","carriage return"],["8656","leftwards double arrow"],["8657","upwards double arrow"],["8658","rightwards double arrow"],["8659","downwards double arrow"],["8660","left right double arrow"],["8756","therefore"],["8834","subset of"],["8835","superset of"],["8836","not a subset of"],["8838","subset of or equal to"],["8839","superset of or equal to"],["8853","circled plus"],["8855","circled times"],["8869","perpendicular"],["8901","dot operator"],["8968","left ceiling"],["8969","right ceiling"],["8970","left floor"],["8971","right floor"],["9001","left-pointing angle bracket"],["9002","right-pointing angle bracket"],["9674","lozenge"],["9824","black spade suit"],["9827","black club suit"],["9829","black heart suit"],["9830","black diamond suit"],["8194","en space"],["8195","em space"],["8201","thin space"],["8204","zero width non-joiner"],["8205","zero width joiner"],["8206","left-to-right mark"],["8207","right-to-left mark"]]},d=function(e){return o.grep(e,function(e){return l(e)&&2===e.length})},m=function(e){return l(e)?[].concat(d(e)):"function"==typeof e?e():[]},g=function(e,t){var n,r=s(e);return r&&(t=m(r)),(n=c(e))?[].concat(t).concat(m(n)):t},h=function(e){return g(e,f())},p=h,v=function(t){var e=function(){return p(t)},n=function(e){u(t,e)};return{getCharMap:e,insertChar:n}},b=v,y=function(e){var t,n,r,o,i,a,u=Math.min(e.length,25),s=Math.ceil(e.length/u),c='<table role="presentation" cellspacing="0" class="mce-charmap"><tbody>';for(n=0;n<s;n++){for(c+="<tr>",t=0;t<u;t++)(r=n*u+t)<e.length?(o=e[r],i=parseInt(o[0],10),a=o?String.fromCharCode(i):"&nbsp;",c+='<td title="'+o[1]+'"><div tabindex="-1" title="'+o[1]+'" role="button" data-chr="'+i+'">'+a+"</div></td>"):c+="<td />";c+="</tr>"}return c+="</tbody></table>"},x=y,w=function(e){for(;e;){if("TD"===e.nodeName)return e;e=e.parentNode}},C=function(i){var e={type:"container",html:x(p(i)),onclick:function(e){var t,n,r,o=e.target;/^(TD|DIV)$/.test(o.nodeName)&&(t=w(o).firstChild)&&t.hasAttribute("data-chr")&&(n=t.getAttribute("data-chr"),r=parseInt(n,10),isNaN(r)||u(i,String.fromCharCode(r)),e.ctrlKey||a.close())},onmouseover:function(e){var t=w(e.target);t&&t.firstChild?(a.find("#preview").text(t.firstChild.firstChild.data),a.find("#previewTitle").text(t.title)):(a.find("#preview").text(" "),a.find("#previewTitle").text(" "))}},a=i.windowManager.open({title:"Special character",spacing:10,padding:10,items:[e,{type:"container",layout:"flex",direction:"column",align:"center",spacing:5,minWidth:160,minHeight:160,items:[{type:"label",name:"preview",text:" ",style:"font-size: 40px; text-align: center",border:1,minWidth:140,minHeight:80},{type:"spacer",minHeight:20},{type:"label",name:"previewTitle",text:" ",style:"white-space: pre-wrap;",border:1,minWidth:140}]}],buttons:[{text:"Close",onclick:function(){a.close()}}]})},S=C,N=function(e){e.addCommand("mceShowCharmap",function(){S(e)})},T=N,E=function(e){e.addButton("charmap",{icon:"charmap",tooltip:"Special character",cmd:"mceShowCharmap"}),e.addMenuItem("charmap",{icon:"charmap",text:"Special character",cmd:"mceShowCharmap",context:"insert"})},k=E;e.add("charmap",function(e){return T(e),k(e),b(e)})}(),function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=function(e){return/^[A-Za-z][A-Za-z0-9\-:._]*$/.test(e)},n=function(e){var t=e.selection.getNode(),n="A"===t.tagName&&""===e.dom.getAttrib(t,"href");return n?t.id||t.name:""},r=function(e,t){var n=e.selection.getNode(),r="A"===n.tagName&&""===e.dom.getAttrib(n,"href");r?(n.removeAttribute("name"),n.id=t,e.undoManager.add()):(e.focus(),e.selection.collapse(!0),e.execCommand("mceInsertContent",!1,e.dom.createHTML("a",{id:t})))},o=t,i=n,a=r,u=function(e,t){return o(t)?(a(e,t),!1):(e.windowManager.alert("Id should start with a letter, followed only by letters, numbers, dashes, dots, colons or underscores."),!0)},s=function(n){var e=i(n);n.windowManager.open({title:"Anchor",body:{type:"textbox",name:"id",size:40,label:"Id",value:e},onsubmit:function(e){var t=e.data.id;u(n,t)&&e.preventDefault()}})},c=s,l=function(e){e.addCommand("mceAnchor",function(){c(e)})},f=l,d=function(e){return!e.attr("href")&&(e.attr("id")||e.attr("name"))&&!e.firstChild},m=function(n){return function(e){for(var t=0;t<e.length;t++)d(e[t])&&e[t].attr("contenteditable",n)}},g=function(e){e.on("PreInit",function(){e.parser.addNodeFilter("a",m("false")),e.serializer.addNodeFilter("a",m(null))})},h=g,p=function(e){e.addButton("anchor",{icon:"anchor",tooltip:"Anchor",cmd:"mceAnchor",stateSelector:"a:not([href])"}),e.addMenuItem("anchor",{icon:"anchor",text:"Anchor",context:"insert",cmd:"mceAnchor"})},v=p;e.add("anchor",function(e){h(e),f(e),v(e)})}(),function(){"use strict";var i,m,a,g,u,s,h,p,v,b,e,c,y,x,f,n,r,o,l,d,w=function(e){var t=e,n=function(){return t},r=function(e){t=e},o=function(){return w(n())};return{get:n,set:r,clone:o}},t=tinymce.util.Tools.resolve("tinymce.PluginManager"),C=tinymce.util.Tools.resolve("tinymce.util.Tools");function S(e){return e&&1===e.nodeType&&"false"===e.contentEditable}i={findAndReplaceDOMText:function(e,t,n,r,o){var i,a,u,h,s,c=[],l=0,p=t.ownerDocument,d=o.getBlockElements(),m=o.getWhiteSpaceElements(),g=o.getShortEndedElements();function f(e,t){var n,r;if(t=t||0,!e[0])throw new Error("findAndReplaceDOMText cannot handle zero-length matches");if(n=e.index,0<t){if(!(r=e[t]))throw new Error("Invalid capture group");n+=e[0].indexOf(r),e[0]=r}return[n,n+e[0].length,[e[0]]]}if(a=function e(t){var n;if(3===t.nodeType)return t.data;if(m[t.nodeName]&&!d[t.nodeName])return"";if(n="",S(t))return"\n";if((d[t.nodeName]||g[t.nodeName])&&(n+="\n"),t=t.firstChild)for(;n+=e(t),t=t.nextSibling;);return n}(t)){if(e.global)for(;i=e.exec(a);)c.push(f(i,r));else i=a.match(e),c.push(f(i,r));return c.length&&(l=c.length,function(e,t,n){var r,o,i,a,u=[],s=0,c=e,l=t.shift(),f=0;e:for(;;){if((d[c.nodeName]||g[c.nodeName]||S(c))&&s++,3===c.nodeType&&(!o&&c.length+s>=l[1]?(o=c,a=l[1]-s):r&&u.push(c),!r&&c.length+s>l[0]&&(r=c,i=l[0]-s),s+=c.length),r&&o){if(c=n({startNode:r,startNodeIndex:i,endNode:o,endNodeIndex:a,innerNodes:u,match:l[2],matchIndex:f}),s-=o.length-a,o=r=null,u=[],f++,!(l=t.shift()))break}else if(m[c.nodeName]&&!d[c.nodeName]||!c.firstChild){if(c.nextSibling){c=c.nextSibling;continue}}else if(!S(c)){c=c.firstChild;continue}for(;;){if(c.nextSibling){c=c.nextSibling;break}if(c.parentNode===e)break e;c=c.parentNode}}}(t,c,(h="function"!=typeof(u=n)?(s=u.nodeType?u:p.createElement(u),function(e,t){var n=s.cloneNode(!1);return n.setAttribute("data-mce-index",t),e&&n.appendChild(p.createTextNode(e)),n}):u,function(e){var t,n,r,o,i,a,u,s,c,l,f,d=e.startNode,m=e.endNode,g=e.matchIndex;if(d===m)return r=(o=d).parentNode,0<e.startNodeIndex&&(t=p.createTextNode(o.data.substring(0,e.startNodeIndex)),r.insertBefore(t,o)),i=h(e.match[0],g),r.insertBefore(i,o),e.endNodeIndex<o.length&&(n=p.createTextNode(o.data.substring(e.endNodeIndex)),r.insertBefore(n,o)),o.parentNode.removeChild(o),i;for(t=p.createTextNode(d.data.substring(0,e.startNodeIndex)),n=p.createTextNode(m.data.substring(e.endNodeIndex)),a=h(d.data.substring(e.startNodeIndex),g),u=0,s=e.innerNodes.length;u<s;++u)c=e.innerNodes[u],l=h(c.data,g),c.parentNode.replaceChild(l,c);return f=h(m.data.substring(0,e.endNodeIndex),g),(r=d.parentNode).insertBefore(t,d),r.insertBefore(a,d),r.removeChild(d),(r=m.parentNode).insertBefore(f,m),r.insertBefore(n,m),r.removeChild(m),f}))),l}}},m=function(e){var t=e.getAttribute("data-mce-index");return"number"==typeof t?""+t:t},a=function(e,t,n){var r,o;return(o=e.dom.create("span",{"data-mce-bogus":1})).className="mce-match-marker",r=e.getBody(),c(e,t,!1),i.findAndReplaceDOMText(n,r,o,!1,e.schema)},g=function(e){var t=e.parentNode;e.firstChild&&t.insertBefore(e.firstChild,e),e.parentNode.removeChild(e)},u=function(e,t){var n,r,o=[],i=C.toArray(e.getBody().getElementsByTagName("span"));if(i.length)for(n=0;n<i.length;n++)null!==(r=m(i[n]))&&r.length&&r===t.toString()&&o.push(i[n]);return o},s=function(e,t,n){var r,o=t.get(),i=e.dom;return(n=!1!==n)?o++:o--,i.removeClass(u(e,t.get()),"mce-match-marker-selected"),(r=u(e,o)).length?(i.addClass(u(e,o),"mce-match-marker-selected"),e.selection.scrollIntoView(r[0]),o):-1},h=function(e,t){var n=t.parentNode;e.remove(t),e.isEmpty(n)&&e.remove(n)},b=function(e){var t=m(e);return null!==t&&0<t.length},e=function(e,t,n,r,o){var i,a,u,s,c,l,f,d=t.get();for(r=!1!==r,u=e.getBody(),a=C.grep(C.toArray(u.getElementsByTagName("span")),b),i=0;i<a.length;i++)if(f=m(a[i]),s=c=parseInt(f,10),o||s===t.get()){for(n.length?(a[i].firstChild.nodeValue=n,g(a[i])):h(e.dom,a[i]);a[++i];){if((s=parseInt(m(a[i]),10))!==c){i--;break}h(e.dom,a[i])}r&&d--}else c>t.get()&&a[i].setAttribute("data-mce-index",c-1);return t.set(d),r?(l=y(e,t),p(e,t)):(l=x(e,t),v(e,t)),!o&&l},f={done:c=function(e,t,n){var r,o,i,a,u,s=C.toArray(e.getBody().getElementsByTagName("span"));for(r=0;r<s.length;r++)null!==(a=m(s[r]))&&a.length&&(a===t.get().toString()&&(o||(o=s[r].firstChild),i=s[r].firstChild),g(s[r]));if(o&&i)return(u=e.dom.createRng()).setStart(o,0),u.setEnd(i,i.data.length),!1!==n&&e.selection.setRng(u),u},find:function(e,t,n,r,o){n=(n=n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")).replace(/\s/g,"[^\\S\\r\\n]"),n=o?"\\b"+n+"\\b":n;var i=a(e,t,new RegExp(n,r?"g":"gi"));return i&&(t.set(-1),t.set(s(e,t,!0))),i},next:p=function(e,t){var n=s(e,t,!0);-1!==n&&t.set(n)},prev:v=function(e,t){var n=s(e,t,!1);-1!==n&&t.set(n)},replace:e,hasNext:y=function(e,t){return 0<u(e,t.get()+1).length},hasPrev:x=function(e,t){return 0<u(e,t.get()-1).length}},n=function(r,o){var e=function(e){return f.done(r,o,e)},t=function(e,t,n){return f.find(r,o,e,t,n)},n=function(){return f.next(r,o)},i=function(){return f.prev(r,o)},a=function(e,t,n){return f.replace(r,o,e,t,n)};return{done:e,find:t,next:n,prev:i,replace:a}},r=function(i,a){var e,u,s={};function c(){u.statusbar.find("#next").disabled(!1===f.hasNext(i,a)),u.statusbar.find("#prev").disabled(!1===f.hasPrev(i,a))}function l(){i.windowManager.alert("Could not find the specified string.",function(){u.find("#find")[0].focus()})}i.undoManager.add(),e=C.trim(i.selection.getContent({format:"text"})),u=i.windowManager.open({layout:"flex",pack:"center",align:"center",onClose:function(){i.focus(),f.done(i,a),i.undoManager.add()},onSubmit:function(e){var t,n,r,o;return e.preventDefault(),n=u.find("#case").checked(),o=u.find("#words").checked(),(r=u.find("#find").value()).length?s.text===r&&s.caseState===n&&s.wholeWord===o?f.hasNext(i,a)?(f.next(i,a),void c()):void l():((t=f.find(i,a,r,n,o))||l(),u.statusbar.items().slice(1).disabled(0===t),c(),void(s={text:r,caseState:n,wholeWord:o})):(f.done(i,a,!1),void u.statusbar.items().slice(1).disabled(!0))},buttons:[{text:"Find",subtype:"primary",onclick:function(){u.submit()}},{text:"Replace",disabled:!0,onclick:function(){f.replace(i,a,u.find("#replace").value())||(u.statusbar.items().slice(1).disabled(!0),a.set(-1),s={})}},{text:"Replace all",disabled:!0,onclick:function(){f.replace(i,a,u.find("#replace").value(),!0,!0),u.statusbar.items().slice(1).disabled(!0),s={}}},{type:"spacer",flex:1},{text:"Prev",name:"prev",disabled:!0,onclick:function(){f.prev(i,a),c()}},{text:"Next",name:"next",disabled:!0,onclick:function(){f.next(i,a),c()}}],title:"Find and replace",items:{type:"form",padding:20,labelGap:30,spacing:10,items:[{type:"textbox",name:"find",size:40,label:"Find",value:e},{type:"textbox",name:"replace",size:40,label:"Replace with"},{type:"checkbox",name:"case",text:"Match case",label:" "},{type:"checkbox",name:"words",text:"Whole words",label:" "}]}})},o=function(e,t){e.addCommand("SearchReplace",function(){r(e,t)})},l=function(e,t){return function(){r(e,t)}},d=function(e,t){e.addMenuItem("searchreplace",{text:"Find and replace",shortcut:"Meta+F",onclick:l(e,t),separator:"before",context:"edit"}),e.addButton("searchreplace",{tooltip:"Find and replace",onclick:l(e,t)}),e.shortcuts.add("Meta+F","",l(e,t))},t.add("searchreplace",function(e){var t=w(-1);return o(e,t),d(e,t),n(e,t)})}(),function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),n=function(e){return e.getParam("code_dialog_width",600)},r=function(e){return e.getParam("code_dialog_height",Math.min(t.DOM.getViewPort().h-200,500))},o=n,i=r,a=function(e,t){e.focus(),e.undoManager.transact(function(){e.setContent(t)}),e.selection.setCursorLocation(),e.nodeChanged()},u=function(e){return e.getContent({source_view:!0})},s=a,c=u,l=function(t){var e=o(t),n=i(t),r=t.windowManager.open({title:"Source code",body:{type:"textbox",name:"code",multiline:!0,minWidth:e,minHeight:n,spellcheck:!1,style:"direction: ltr; text-align: left"},onSubmit:function(e){s(t,e.data.code)}});r.find("#code").value(c(t))},f=l,d=function(e){e.addCommand("mceCodeEditor",function(){f(e)})},m=d,g=function(e){e.addButton("code",{icon:"code",tooltip:"Source code",onclick:function(){f(e)}}),e.addMenuItem("code",{icon:"code",text:"Source code",onclick:function(){f(e)}})},h=g;e.add("code",function(e){return m(e),h(e),{}})}(),function(i){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),r=tinymce.util.Tools.resolve("tinymce.util.VK"),t=function(e){return"boolean"==typeof e.link_assume_external_targets&&e.link_assume_external_targets},n=function(e){return"boolean"==typeof e.link_context_toolbar&&e.link_context_toolbar},o=function(e){return e.link_list},a=function(e){return"string"==typeof e.default_link_target},u=function(e){return e.default_link_target},s=function(e){return e.target_list},c=function(e,t){e.settings.target_list=t},l=function(e){return!1!==s(e)},f=function(e){return e.rel_list},d=function(e){return void 0!==f(e)},m=function(e){return e.link_class_list},g=function(e){return void 0!==m(e)},h=function(e){return!1!==e.link_title},p=function(e){return"boolean"==typeof e.allow_unsafe_link_target&&e.allow_unsafe_link_target},w=t,v=n,b=o,C=a,S=u,N=s,T=c,E=l,k=f,R=d,_=m,A=g,D=h,O=p,y=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),x=tinymce.util.Tools.resolve("tinymce.Env"),P=function(e,t){i.document.body.appendChild(e),e.dispatchEvent(t),i.document.body.removeChild(e)},B=function(e){var t,n,r,o;!x.ie||10<x.ie?((t=i.document.createElement("a")).target="_blank",t.href=e,t.rel="noreferrer noopener",(n=i.document.createEvent("MouseEvents")).initMouseEvent("click",!0,!0,i.window,0,0,0,0,0,!1,!1,!1,!1,0,null),P(t,n)):(r=i.window.open("","_blank"))&&(r.opener=null,(o=r.document).open(),o.write('<meta http-equiv="refresh" content="0; url='+y.DOM.encode(e)+'">'),o.close())},M=B,I=tinymce.util.Tools.resolve("tinymce.util.Tools"),L=function(e,t){var n=["noopener"],r=e?e.split(/\s+/):[],o=function(e){return I.trim(e.sort().join(" "))},i=function(e){return(e=a(e)).length?e.concat(n):n},a=function(e){return e.filter(function(e){return-1===I.inArray(n,e)})};return(r=t?i(r):a(r)).length?o(r):null},F=function(e){return e.replace(/\uFEFF/g,"")},H=function(e,t){return t=t||e.selection.getNode(),V(t)?e.dom.select("a[href]",t)[0]:e.dom.getParent(t,"a[href]")},z=function(e,t){var n=t?t.innerText||t.textContent:e.getContent({format:"text"});return F(n)},W=function(e){return e&&"A"===e.nodeName&&e.href},U=function(e){return 0<I.grep(e,W).length},j=function(e){return!(/</.test(e)&&(!/^<a [^>]+>[^<]+<\/a>$/.test(e)||-1===e.indexOf("href=")))},V=function(e){return e&&"FIGURE"===e.nodeName&&/\bimage\b/i.test(e.className)},q=function(o,i){return function(r){o.undoManager.transact(function(){var e=o.selection.getNode(),t=H(o,e),n={href:r.href,target:r.target?r.target:null,rel:r.rel?r.rel:null,class:r.class?r.class:null,title:r.title?r.title:null};R(o.settings)||!1!==O(o.settings)||(n.rel=L(n.rel,"_blank"===n.target)),r.href===i.href&&(i.attach(),i={}),t?(o.focus(),r.hasOwnProperty("text")&&("innerText"in t?t.innerText=r.text:t.textContent=r.text),o.dom.setAttribs(t,n),o.selection.select(t),o.undoManager.add()):V(e)?X(o,e,n):r.hasOwnProperty("text")?o.insertContent(o.dom.createHTML("a",n,o.dom.encode(r.text))):o.execCommand("mceInsertLink",!1,n)})}},$=function(t){return function(){t.undoManager.transact(function(){var e=t.selection.getNode();V(e)?Y(t,e):t.execCommand("unlink")})}},Y=function(e,t){var n,r;(r=e.dom.select("img",t)[0])&&(n=e.dom.getParents(r,"a[href]",t)[0])&&(n.parentNode.insertBefore(r,n),e.dom.remove(n))},X=function(e,t,n){var r,o;(o=e.dom.select("img",t)[0])&&(r=e.dom.create("a",n),o.parentNode.insertBefore(r,o),r.appendChild(o))},K=q,G=$,J=W,Q=U,Z=j,ee=H,te=z,ne=L,re=tinymce.util.Tools.resolve("tinymce.util.Delay"),oe=tinymce.util.Tools.resolve("tinymce.util.XHR"),ie={},ae=function(t,n){var e=b(t.settings);"string"==typeof e?oe.send({url:e,success:function(e){n(t,JSON.parse(e))}}):"function"==typeof e?e(function(e){n(t,e)}):n(t,e)},ue=function(e,r,t){var o=function(e,n){return n=n||[],I.each(e,function(e){var t={text:e.text||e.title};e.menu?t.menu=o(e.menu):(t.value=e.value,r&&r(t)),n.push(t)}),n};return o(e,t||[])},se=function(t,e,n){var r=t.selection.getRng();re.setEditorTimeout(t,function(){t.windowManager.confirm(e,function(e){t.selection.setRng(r),n(e)})})},ce=function(a,e){var u,r,t,n,o,i,s,c,l,f={},d=a.selection,m=a.dom,g=function(e){var t=r.find("#text");(!t.value()||e.lastControl&&t.value()===e.lastControl.text())&&t.value(e.control.text()),r.find("#href").value(e.control.value())},h=function(n){var r=[];if(I.each(a.dom.select("a:not([href])"),function(e){var t=e.name||e.id;t&&r.push({text:t,value:"#"+t,selected:-1!==n.indexOf("#"+t)})}),r.length)return r.unshift({text:"None",value:""}),{name:"anchor",type:"listbox",label:"Anchors",values:r,onselect:g}},p=function(){u||!y||f.text||this.parent().parent().find("#text")[0].value(this.value())},v=function(e){var t=e.meta||{};n&&n.value(a.convertURL(this.value(),"href")),I.each(e.meta,function(e,t){var n=r.find("#"+t);"text"===t?0===u.length&&(n.value(e),f.text=e):n.value(e)}),t.attach&&(ie={href:this.value(),attach:t.attach}),t.text||p.call(this)},b=function(e){e.meta=r.toJSON()},y=Z(d.getContent()),x=ee(a);f.text=u=te(a.selection,x),f.href=x?m.getAttrib(x,"href"):"",x?f.target=m.getAttrib(x,"target"):C(a.settings)&&(f.target=S(a.settings)),(l=m.getAttrib(x,"rel"))&&(f.rel=l),(l=m.getAttrib(x,"class"))&&(f.class=l),(l=m.getAttrib(x,"title"))&&(f.title=l),y&&(t={name:"text",type:"textbox",size:40,label:"Text to display",onchange:function(){f.text=this.value()}}),e&&(n={type:"listbox",label:"Link list",values:ue(e,function(e){e.value=a.convertURL(e.value||e.url,"href")},[{text:"None",value:""}]),onselect:g,value:a.convertURL(f.href,"href"),onPostRender:function(){n=this}}),E(a.settings)&&(void 0===N(a.settings)&&T(a,[{text:"None",value:""},{text:"New window",value:"_blank"}]),i={name:"target",type:"listbox",label:"Target",values:ue(N(a.settings))}),R(a.settings)&&(o={name:"rel",type:"listbox",label:"Rel",values:ue(k(a.settings),function(e){!1===O(a.settings)&&(e.value=ne(e.value,"_blank"===f.target))})}),A(a.settings)&&(s={name:"class",type:"listbox",label:"Class",values:ue(_(a.settings),function(e){e.value&&(e.textStyle=function(){return a.formatter.getCssText({inline:"a",classes:[e.value]})})})}),D(a.settings)&&(c={name:"title",type:"textbox",label:"Title",value:f.title}),r=a.windowManager.open({title:"Insert link",data:f,body:[{name:"href",type:"filepicker",filetype:"file",size:40,autofocus:!0,label:"Url",onchange:v,onkeyup:p,onpaste:p,onbeforecall:b},t,c,h(f.href),n,o,i,s],onSubmit:function(e){var t=w(a.settings),n=K(a,ie),r=G(a),o=I.extend({},f,e.data),i=o.href;i?(y&&o.text!==u||delete o.text,0<i.indexOf("@")&&-1===i.indexOf("//")&&-1===i.indexOf("mailto:")?se(a,"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",function(e){e&&(o.href="mailto:"+i),n(o)}):!0===t&&!/^\w+:/i.test(i)||!1===t&&/^\s*www[\.|\d\.]/i.test(i)?se(a,"The URL you entered seems to be an external link. Do you want to add the required http:// prefix?",function(e){e&&(o.href="http://"+i),n(o)}):n(o)):r()}})},le=function(e){ae(e,ce)},fe=le,de=function(e,t){return e.dom.getParent(t,"a[href]")},me=function(e){return de(e,e.selection.getStart())},ge=function(e){var t=e.getAttribute("data-mce-href");return t||e.getAttribute("href")},he=function(e){var t=e.plugins.contextmenu;return!!t&&t.isContextMenuVisible()},pe=function(e){return!0===e.altKey&&!1===e.shiftKey&&!1===e.ctrlKey&&!1===e.metaKey},ve=function(e,t){var n,r;t&&(n=ge(t),/^#/.test(n)?(r=e.$(n)).length&&e.selection.scrollIntoView(r[0],!0):M(t.href))},be=function(e){return function(){fe(e)}},ye=function(e){return function(){ve(e,me(e))}},xe=function(o){return function(e){var t,n,r;return!!(v(o.settings)&&!he(o)&&J(e)&&3===(r=(n=(t=o.selection).getRng()).startContainer).nodeType&&t.isCollapsed()&&0<n.startOffset&&n.startOffset<r.data.length)}},we=function(n){n.on("click",function(e){var t=de(n,e.target);t&&r.metaKeyPressed(e)&&(e.preventDefault(),ve(n,t))}),n.on("keydown",function(e){var t=me(n);t&&13===e.keyCode&&pe(e)&&(e.preventDefault(),ve(n,t))})},Ce=function(n){return function(){var t=this;n.on("nodechange",function(e){t.active(!n.readonly&&!!ee(n,e.element))})}},Se=function(n){return function(){var t=this,e=function(e){Q(e.parents)?t.show():t.hide()};Q(n.dom.getParents(n.selection.getStart()))||t.hide(),n.on("nodechange",e),t.on("remove",function(){n.off("nodechange",e)})}},Ne=be,Te=ye,Ee=xe,ke=we,Re=Ce,_e=Se,Ae=function(e){e.addCommand("mceLink",Ne(e))},De=Ae,Oe=function(e){e.addShortcut("Meta+K","",Ne(e))},Pe=Oe,Be=function(e){e.addButton("link",{active:!1,icon:"link",tooltip:"Insert/edit link",onclick:Ne(e),onpostrender:Re(e)}),e.addButton("unlink",{active:!1,icon:"unlink",tooltip:"Remove link",onclick:G(e),onpostrender:Re(e)}),e.addContextToolbar&&e.addButton("openlink",{icon:"newtab",tooltip:"Open link",onclick:Te(e)})},Me=function(e){e.addMenuItem("openlink",{text:"Open link",icon:"newtab",onclick:Te(e),onPostRender:_e(e),prependToContext:!0}),e.addMenuItem("link",{icon:"link",text:"Link",shortcut:"Meta+K",onclick:Ne(e),stateSelector:"a[href]",context:"insert",prependToContext:!0}),e.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onclick:G(e),stateSelector:"a[href]"})},Ie=function(e){e.addContextToolbar&&e.addContextToolbar(Ee(e),"openlink | link unlink")},Le=Be,Fe=Me,He=Ie;e.add("link",function(e){Le(e),Fe(e),He(e),ke(e),De(e),Pe(e)})}(window),function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=function(e,n){var r;return e.dom.getParents(e.selection.getStart(),function(e){var t;(t=e.style["forecolor"===n?"color":"background-color"])&&(r=r||t)}),r},n=function(e){var t,n=[];for(t=0;t<e.length;t+=2)n.push({text:e[t+1],color:"#"+e[t]});return n},r=function(e,t,n){e.undoManager.transact(function(){e.focus(),e.formatter.apply(t,{value:n}),e.nodeChanged()})},o=function(e,t){e.undoManager.transact(function(){e.focus(),e.formatter.remove(t,{value:null},null,!0),e.nodeChanged()})},s=t,g=n,i=r,a=o,u=function(n){n.addCommand("mceApplyTextcolor",function(e,t){i(n,e,t)}),n.addCommand("mceRemoveTextcolor",function(e){a(n,e)})},c=u,h=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),l=tinymce.util.Tools.resolve("tinymce.util.Tools"),f=["000000","Black","993300","Burnt orange","333300","Dark olive","003300","Dark green","003366","Dark azure","000080","Navy Blue","333399","Indigo","333333","Very dark gray","800000","Maroon","FF6600","Orange","808000","Olive","008000","Green","008080","Teal","0000FF","Blue","666699","Grayish blue","808080","Gray","FF0000","Red","FF9900","Amber","99CC00","Yellow green","339966","Sea green","33CCCC","Turquoise","3366FF","Royal blue","800080","Purple","999999","Medium gray","FF00FF","Magenta","FFCC00","Gold","FFFF00","Yellow","00FF00","Lime","00FFFF","Aqua","00CCFF","Sky blue","993366","Red violet","FFFFFF","White","FF99CC","Pink","FFCC99","Peach","FFFF99","Light yellow","CCFFCC","Pale green","CCFFFF","Pale cyan","99CCFF","Light sky blue","CC99FF","Plum"],d=function(e){return e.getParam("textcolor_map",f)},m=function(e){return e.getParam("forecolor_map",d(e))},p=function(e){return e.getParam("backcolor_map",d(e))},v=function(e){return e.getParam("textcolor_rows",5)},b=function(e){return e.getParam("textcolor_cols",8)},y=function(e){return e.getParam("forecolor_rows",v(e))},x=function(e){return e.getParam("backcolor_rows",v(e))},w=function(e){return e.getParam("forecolor_cols",b(e))},C=function(e){return e.getParam("backcolor_cols",b(e))},S=function(e){return e.getParam("color_picker_callback",null)},N=function(e){return"function"==typeof S(e)},T=m,E=p,k=y,R=x,_=w,A=C,D=S,O=N,P=tinymce.util.Tools.resolve("tinymce.util.I18n"),B=function(e,t,n,r){var o,i,a,u,s,c,l=0,f=h.DOM.uniqueId("mcearia"),d=function(e,t){var n="transparent"===e;return'<td class="mce-grid-cell'+(n?" mce-colorbtn-trans":"")+'"><div id="'+f+"-"+l+++'" data-mce-color="'+(e||"")+'" role="option" tabIndex="-1" style="'+(e?"background-color: "+e:"")+'" title="'+P.translate(t)+'">'+(n?"&#215;":"")+"</div></td>"},m=g(n);for(m.push({text:P.translate("No color"),color:"transparent"}),i='<table class="mce-grid mce-grid-border mce-colorbutton-grid" role="list" cellspacing="0"><tbody>',a=m.length-1,s=0;s<t;s++){for(i+="<tr>",u=0;u<e;u++)i+=a<(c=s*e+u)?"<td></td>":d((o=m[c]).color,o.text);i+="</tr>"}if(r){for(i+='<tr><td colspan="'+e+'" class="mce-custom-color-btn"><div id="'+f+'-c" class="mce-widget mce-btn mce-btn-small mce-btn-flat" role="button" tabindex="-1" aria-labelledby="'+f+'-c" style="width: 100%"><button type="button" role="presentation" tabindex="-1">'+P.translate("Custom...")+"</button></div></td></tr>",i+="<tr>",u=0;u<e;u++)i+=d("","Custom color");i+="</tr>"}return i+="</tbody></table>"},M=B,I=function(e,t){e.style.background=t,e.setAttribute("data-mce-color",t)},L=function(n){return function(e){var t=e.control;t._color?n.execCommand("mceApplyTextcolor",t.settings.format,t._color):n.execCommand("mceRemoveTextcolor",t.settings.format)}},F=function(o,u){return function(e){var t,i=this.parent(),n=s(o,i.settings.format),a=function(e){o.execCommand("mceApplyTextcolor",i.settings.format,e),i.hidePanel(),i.color(e)},r=function(){o.execCommand("mceRemoveTextcolor",i.settings.format),i.hidePanel(),i.resetColor()};h.DOM.getParent(e.target,".mce-custom-color-btn")&&(i.hidePanel(),D(o).call(o,function(e){var t,n,r=i.panel.getEl().getElementsByTagName("table")[0],o=l.map(r.rows[r.rows.length-1].childNodes,function(e){return e.firstChild});for(n=0;n<o.length&&(t=o[n]).getAttribute("data-mce-color");n++);if(n===u)for(n=0;n<u-1;n++)I(o[n],o[n+1].getAttribute("data-mce-color"));I(t,e),a(e)},n)),(t=e.target.getAttribute("data-mce-color"))?(this.lastId&&h.DOM.get(this.lastId).setAttribute("aria-selected","false"),e.target.setAttribute("aria-selected",!0),this.lastId=e.target.id,"transparent"===t?r():a(t)):null!==t&&i.hidePanel()}},H=function(o,i){return function(){var e=i?_(o):A(o),t=i?k(o):R(o),n=i?T(o):E(o),r=O(o);return M(e,t,n,r)}},z=function(e){e.addButton("forecolor",{type:"colorbutton",tooltip:"Text color",format:"forecolor",panel:{role:"application",ariaRemember:!0,html:H(e,!0),onclick:F(e,_(e))},onclick:L(e)}),e.addButton("backcolor",{type:"colorbutton",tooltip:"Background color",format:"hilitecolor",panel:{role:"application",ariaRemember:!0,html:H(e,!1),onclick:F(e,A(e))},onclick:L(e)})},W=z;e.add("textcolor",function(e){c(e),W(e)})}(),function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),i=tinymce.util.Tools.resolve("tinymce.Env"),l=tinymce.util.Tools.resolve("tinymce.util.Tools"),t=function(e){return e.getParam("media_scripts")},n=function(e){return e.getParam("audio_template_callback")},r=function(e){return e.getParam("video_template_callback")},o=function(e){return e.getParam("media_live_embeds",!0)},a=function(e){return e.getParam("media_filter_html",!0)},u=function(e){return e.getParam("media_url_resolver")},s=function(e){return e.getParam("media_alt_source",!0)},c=function(e){return e.getParam("media_poster",!0)},f=function(e){return e.getParam("media_dimensions",!0)},d=t,m=n,g=r,h=o,p=a,v=u,b=s,y=c,x=f,w=tinymce.util.Tools.resolve("tinymce.html.SaxParser"),C=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),S=function(e,t){if(e)for(var n=0;n<e.length;n++)if(-1!==t.indexOf(e[n].filter))return e[n]},N=S,T=function(e){return e.replace(/px$/,"")},E=function(e){return/^[0-9.]+$/.test(e)?e+"px":e},k=function(t){return function(e){return e?T(e.style[t]):""}},R=function(n){return function(e,t){e&&(e.style[n]=E(t))}},_={getMaxWidth:k("maxWidth"),getMaxHeight:k("maxHeight"),setMaxWidth:R("maxWidth"),setMaxHeight:R("maxHeight")},A=C.DOM,D=function(e){return A.getAttrib(e,"data-ephox-embed-iri")},O=function(e){var t=A.createFragment(e);return""!==D(t.firstChild)},P=function(r,e){var o={};return w({validate:!1,allow_conditional_comments:!0,special:"script,noscript",start:function(e,t){if(o.source1||"param"!==e||(o.source1=t.map.movie),"iframe"!==e&&"object"!==e&&"embed"!==e&&"video"!==e&&"audio"!==e||(o.type||(o.type=e),o=l.extend(t.map,o)),"script"===e){var n=N(r,t.map.src);if(!n)return;o={type:"script",source1:t.map.src,width:n.width,height:n.height}}"source"===e&&(o.source1?o.source2||(o.source2=t.map.src):o.source1=t.map.src),"img"!==e||o.poster||(o.poster=t.map.src)}}).parse(e),o.source1=o.source1||o.src||o.data,o.source2=o.source2||"",o.poster=o.poster||"",o},B=function(e){var t=A.createFragment(e),n=t.firstChild;return{type:"ephox-embed-iri",source1:D(n),source2:"",poster:"",width:_.getMaxWidth(n),height:_.getMaxHeight(n)}},M=function(e,t){return O(t)?B(t):P(e,t)},I=M,L=tinymce.util.Tools.resolve("tinymce.util.Promise"),F=function(e){var t={mp3:"audio/mpeg",wav:"audio/wav",mp4:"video/mp4",webm:"video/webm",ogg:"video/ogg",swf:"application/x-shockwave-flash"},n=e.toLowerCase().split(".").pop(),r=t[n];return r||""},H=F,z=tinymce.util.Tools.resolve("tinymce.html.Writer"),W=tinymce.util.Tools.resolve("tinymce.html.Schema"),U=C.DOM,j=function(e,t){var n,r,o,i;for(n in t)if(o=""+t[n],e.map[n])for(r=e.length;r--;)(i=e[r]).name===n&&(o?(e.map[n]=o,i.value=o):(delete e.map[n],e.splice(r,1)));else o&&(e.push({name:n,value:o}),e.map[n]=o)},V=function(e){var t=z(),n=w(t);return n.parse(e),t.getContent()},q=function(e,o,i){var a,u=z(),s=0;return w({validate:!1,allow_conditional_comments:!0,special:"script,noscript",comment:function(e){u.comment(e)},cdata:function(e){u.cdata(e)},text:function(e,t){u.text(e,t)},start:function(e,t,n){switch(e){case"video":case"object":case"embed":case"img":case"iframe":void 0!==o.height&&void 0!==o.width&&j(t,{width:o.width,height:o.height})}if(i)switch(e){case"video":j(t,{poster:o.poster,src:""}),o.source2&&j(t,{src:""});break;case"iframe":j(t,{src:o.source1});break;case"source":if(++s<=2&&(j(t,{src:o["source"+s],type:o["source"+s+"mime"]}),!o["source"+s]))return;break;case"img":if(!o.poster)return;a=!0}u.start(e,t,n)},end:function(e){var t,n,r;if("video"===e&&i)for(t=1;t<=2;t++)o["source"+t]&&((n=[]).map={},s<t&&(j(n,{src:o["source"+t],type:o["source"+t+"mime"]}),u.start("source",n,!0)));o.poster&&"object"===e&&i&&!a&&((r=[]).map={},j(r,{src:o.poster,width:o.width,height:o.height}),u.start("img",r,!0)),u.end(e)}},W({})).parse(e),u.getContent()},$=function(e){var t=U.createFragment(e);return""!==U.getAttrib(t.firstChild,"data-ephox-embed-iri")},Y=function(e,t){var n=U.createFragment(e),r=n.firstChild;return _.setMaxWidth(r,t.width),_.setMaxHeight(r,t.height),V(r.outerHTML)},X=function(e,t,n){return $(e)?Y(e,t):q(e,t,n)},K=X,G=[{regex:/youtu\.be\/([\w\-_\?&=.]+)/i,type:"iframe",w:560,h:314,url:"//www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/youtube\.com(.+)v=([^&]+)(&([a-z0-9&=\-_]+))?/i,type:"iframe",w:560,h:314,url:"//www.youtube.com/embed/$2?$4",allowFullscreen:!0},{regex:/youtube.com\/embed\/([a-z0-9\?&=\-_]+)/i,type:"iframe",w:560,h:314,url:"//www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)/,type:"iframe",w:425,h:350,url:"//player.vimeo.com/video/$1?title=0&byline=0&portrait=0&color=8dc7dc",allowFullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)/,type:"iframe",w:425,h:350,url:"//player.vimeo.com/video/$2?title=0&amp;byline=0",allowFullscreen:!0},{regex:/maps\.google\.([a-z]{2,3})\/maps\/(.+)msid=(.+)/,type:"iframe",w:425,h:350,url:'//maps.google.com/maps/ms?msid=$2&output=embed"',allowFullscreen:!1},{regex:/dailymotion\.com\/video\/([^_]+)/,type:"iframe",w:480,h:270,url:"//www.dailymotion.com/embed/video/$1",allowFullscreen:!0},{regex:/dai\.ly\/([^_]+)/,type:"iframe",w:480,h:270,url:"//www.dailymotion.com/embed/video/$1",allowFullscreen:!0}],J=function(e,t){var n,r=e.regex.exec(t),o=e.url,i=function(e){o=o.replace("$"+e,function(){return r[e]?r[e]:""})};for(n=0;n<r.length;n++)i(n);return o.replace(/\?$/,"")},Q=function(t){var e=G.filter(function(e){return e.regex.test(t)});return 0<e.length?l.extend({},e[0],{url:J(e[0],t)}):null},Z=function(e){var t=e.allowFullscreen?' allowFullscreen="1"':"";return'<iframe src="'+e.source1+'" width="'+e.width+'" height="'+e.height+'"'+t+"></iframe>"},ee=function(e){var t='<object data="'+e.source1+'" width="'+e.width+'" height="'+e.height+'" type="application/x-shockwave-flash">';return e.poster&&(t+='<img src="'+e.poster+'" width="'+e.width+'" height="'+e.height+'" />'),t+="</object>"},te=function(e,t){return t?t(e):'<audio controls="controls" src="'+e.source1+'">'+(e.source2?'\n<source src="'+e.source2+'"'+(e.source2mime?' type="'+e.source2mime+'"':"")+" />\n":"")+"</audio>"},ne=function(e,t){return t?t(e):'<video width="'+e.width+'" height="'+e.height+'"'+(e.poster?' poster="'+e.poster+'"':"")+' controls="controls">\n<source src="'+e.source1+'"'+(e.source1mime?' type="'+e.source1mime+'"':"")+" />\n"+(e.source2?'<source src="'+e.source2+'"'+(e.source2mime?' type="'+e.source2mime+'"':"")+" />\n":"")+"</video>"},re=function(e){return'<script src="'+e.source1+'"><\/script>'},oe=function(n,e){var t,r,o,i,a=l.extend({},e);return a.source1||(l.extend(a,I(d(n),a.embed)),a.source1)?(a.source2||(a.source2=""),a.poster||(a.poster=""),a.source1=n.convertURL(a.source1,"source"),a.source2=n.convertURL(a.source2,"source"),a.source1mime=H(a.source1),a.source2mime=H(a.source2),a.poster=n.convertURL(a.poster,"poster"),(t=Q(a.source1))&&(a.source1=t.url,a.type=t.type,a.allowFullscreen=t.allowFullscreen,a.width=a.width||t.w,a.height=a.height||t.h),a.embed?K(a.embed,a,!0):((r=N(d(n),a.source1))&&(a.type="script",a.width=r.width,a.height=r.height),o=m(n),i=g(n),a.width=a.width||300,a.height=a.height||150,l.each(a,function(e,t){a[t]=n.dom.encode(e)}),"iframe"===a.type?Z(a):"application/x-shockwave-flash"===a.source1mime?ee(a):-1!==a.source1mime.indexOf("audio")?te(a,o):"script"===a.type?re(a):ne(a,i))):""},ie=oe,ae={},ue=function(r,o,i){return new L(function(t,e){var n=function(e){return e.html&&(ae[r.source1]=e),t({url:r.source1,html:e.html?e.html:o(r)})};ae[r.source1]?n(ae[r.source1]):i({url:r.source1},n,e)})},se=function(t,n){return new L(function(e){e({html:n(t),url:t.source1})})},ce=function(t){return function(e){return ie(t,e)}},le=function(e,t){var n=v(e);return n?ue(t,ce(e),n):se(t,ce(e))},fe=function(e){return ae.hasOwnProperty(e)},de=le,me=fe,ge=function(e,t){e.state.set("oldVal",e.value()),t.state.set("oldVal",t.value())},he=function(e,t){var n=e.find("#width")[0],r=e.find("#height")[0],o=e.find("#constrain")[0];n&&r&&o&&t(n,r,o.checked())},pe=function(e,t,n){var r=e.state.get("oldVal"),o=t.state.get("oldVal"),i=e.value(),a=t.value();n&&r&&o&&i&&a&&(i!==r?(a=Math.round(i/r*a),isNaN(a)||t.value(a)):(i=Math.round(a/o*i),isNaN(i)||e.value(i))),ge(e,t)},ve=function(e){he(e,ge)},be=function(e){he(e,pe)},ye=function(e){var t=function(){e(function(e){be(e)})};return{type:"container",label:"Dimensions",layout:"flex",align:"center",spacing:5,items:[{name:"width",type:"textbox",maxLength:5,size:5,onchange:t,ariaLabel:"Width"},{type:"label",text:"x"},{name:"height",type:"textbox",maxLength:5,size:5,onchange:t,ariaLabel:"Height"},{name:"constrain",type:"checkbox",checked:!0,text:"Constrain proportions"}]}},xe=ye,we=ve,Ce=be,Se=i.ie&&i.ie<=8?"onChange":"onInput",Ne=function(n){return function(e){var t=e&&e.msg?"Media embed handler error: "+e.msg:"Media embed handler threw unknown error.";n.notificationManager.open({type:"error",text:t})}},Te=function(e){var t=e.selection.getNode(),n=t.getAttribute("data-ephox-embed-iri");return n?{source1:n,"data-ephox-embed-iri":n,width:_.getMaxWidth(t),height:_.getMaxHeight(t)}:t.getAttribute("data-mce-object")?I(d(e),e.serializer.serialize(t,{selection:!0})):{}},Ee=function(e){var t=e.selection.getNode();if(t.getAttribute("data-mce-object")||t.getAttribute("data-ephox-embed-iri"))return e.selection.getContent()},ke=function(o,i){return function(e){var t=e.html,n=o.find("#embed")[0],r=l.extend(I(d(i),t),{source1:e.url});o.fromJSON(r),n&&(n.value(t),Ce(o))}},Re=function(e,t){var n,r,o=e.dom.select("img[data-mce-object]");for(n=0;n<t.length;n++)for(r=o.length-1;0<=r;r--)t[n]===o[r]&&o.splice(r,1);e.selection.select(o[0])},_e=function(e,t){var n=e.dom.select("img[data-mce-object]");e.insertContent(t),Re(e,n),e.nodeChanged()},Ae=function(e,t){var n=e.toJSON();n.embed=K(n.embed,n),n.embed&&me(n.source1)?_e(t,n.embed):de(t,n).then(function(e){_e(t,e.html)}).catch(Ne(t))},De=function(n,e){l.each(e,function(e,t){n.find("#"+t).value(e)})},Oe=function(t){var n,r,e,o,i,a,u=[{name:"source1",type:"filepicker",filetype:"media",size:40,autofocus:!0,label:"Source",onpaste:function(){setTimeout(function(){de(t,n.toJSON()).then(ke(n,t)).catch(Ne(t))},1)},onchange:function(e){de(t,n.toJSON()).then(ke(n,t)).catch(Ne(t)),De(n,e.meta)},onbeforecall:function(e){e.meta=n.toJSON()}}],s=[],c=function(e){e(n),r=n.toJSON(),n.find("#embed").value(K(r.embed,r))};b(t)&&s.push({name:"source2",type:"filepicker",filetype:"media",size:40,label:"Alternative source"}),y(t)&&s.push({name:"poster",type:"filepicker",filetype:"image",size:40,label:"Poster"}),x(t)&&(e=xe(c),u.push(e)),r=Te(t),i=function(){r=l.extend({},I(d(t),this.value())),this.parent().parent().fromJSON(r)},(o={id:"mcemediasource",type:"textbox",flex:1,name:"embed",value:Ee(t),multiline:!0,rows:5,label:"Source"})[Se]=i,a=[{title:"General",type:"form",items:u},{title:"Embed",type:"container",layout:"flex",direction:"column",align:"stretch",padding:10,spacing:10,items:[{type:"label",text:"Paste your embed code below:",forId:"mcemediasource"},o]}],0<s.length&&a.push({title:"Advanced",type:"form",items:s}),n=t.windowManager.open({title:"Insert/edit media",data:r,bodyType:"tabpanel",body:a,onSubmit:function(){Ce(n),Ae(n,t)}}),we(n)},Pe=Oe,Be=function(e){return{showDialog:function(){Pe(e)}}},Me=Be,Ie=function(e){e.addCommand("mceMedia",function(){Pe(e)})},Le=Ie,Fe=tinymce.util.Tools.resolve("tinymce.html.Node"),He=function(o,e){var i,a;return!1===p(o)?e:(i=z(),w({validate:!1,allow_conditional_comments:!1,special:"script,noscript",comment:function(e){i.comment(e)},cdata:function(e){i.cdata(e)},text:function(e,t){i.text(e,t)},start:function(e,t,n){if(a=!0,"script"!==e&&"noscript"!==e){for(var r=0;r<t.length;r++){if(0===t[r].name.indexOf("on"))return;"style"===t[r].name&&(t[r].value=o.dom.serializeStyle(o.dom.parseStyle(t[r].value),e))}i.start(e,t,n),a=!1}},end:function(e){a||i.end(e)}},W({})).parse(e),i.getContent())},ze=He,We=function(e,t){var n=t.name,r=new Fe("img",1);return r.shortEnded=!0,je(e,t,r),r.attr({width:t.attr("width")||"300",height:t.attr("height")||("audio"===n?"30":"150"),style:t.attr("style"),src:i.transparentSrc,"data-mce-object":n,class:"mce-object mce-object-"+n}),r},Ue=function(e,t){var n,r,o=t.name,i=new Fe("span",1);return i.attr({contentEditable:"false",style:t.attr("style"),"data-mce-object":o,class:"mce-preview-object mce-object-"+o}),je(e,t,i),(n=new Fe(o,1)).attr({src:t.attr("src"),allowfullscreen:t.attr("allowfullscreen"),style:t.attr("style"),class:t.attr("class"),width:t.attr("width"),height:t.attr("height"),frameborder:"0"}),(r=new Fe("span",1)).attr("class","mce-shim"),i.append(n),i.append(r),i},je=function(e,t,n){for(var r,o,i,a=t.attributes,u=a.length;u--;)r=a[u].name,o=a[u].value,"width"!==r&&"height"!==r&&"style"!==r&&("data"!==r&&"src"!==r||(o=e.convertURL(o,r)),n.attr("data-mce-p-"+r,o));(i=t.firstChild&&t.firstChild.value)&&(n.attr("data-mce-html",escape(ze(e,i))),n.firstChild=null)},Ve=function(e){for(;e=e.parent;)if(e.attr("data-ephox-embed-iri"))return!0;return!1},qe=function(o){return function(e){for(var t,n,r=e.length;r--;)(t=e[r]).parent&&(t.parent.attr("data-mce-object")||("script"!==t.name||(n=N(d(o),t.attr("src"))))&&(n&&(n.width&&t.attr("width",n.width.toString()),n.height&&t.attr("height",n.height.toString())),"iframe"===t.name&&h(o)&&i.ceFalse?Ve(t)||t.replace(Ue(o,t)):Ve(t)||t.replace(We(o,t))))}},$e=qe,Ye=function(d){d.on("preInit",function(){var t,n=d.schema.getSpecialElements();l.each("video audio iframe object".split(" "),function(e){n[e]=new RegExp("</"+e+"[^>]*>","gi")}),t=d.schema.getBoolAttrs(),l.each("webkitallowfullscreen mozallowfullscreen allowfullscreen".split(" "),function(e){t[e]={}}),d.parser.addNodeFilter("iframe,video,audio,object,embed,script",$e(d)),d.serializer.addAttributeFilter("data-mce-object",function(e,t){for(var n,r,o,i,a,u,s,c,l,f=e.length;f--;)if((n=e[f]).parent){for(s=n.attr(t),r=new Fe(s,1),"audio"!==s&&"script"!==s&&((c=n.attr("class"))&&-1!==c.indexOf("mce-preview-object")?r.attr({width:n.firstChild.attr("width"),height:n.firstChild.attr("height")}):r.attr({width:n.attr("width"),height:n.attr("height")})),r.attr({style:n.attr("style")}),o=(i=n.attributes).length;o--;)0===(l=i[o].name).indexOf("data-mce-p-")&&r.attr(l.substr(11),i[o].value);"script"===s&&r.attr("type","text/javascript"),(a=n.attr("data-mce-html"))&&((u=new Fe("#text",3)).raw=!0,u.value=ze(d,unescape(a)),r.append(u)),n.replace(r)}})}),d.on("setContent",function(){d.$("span.mce-preview-object").each(function(e,t){var n=d.$(t);0===n.find("span.mce-shim",t).length&&n.append('<span class="mce-shim"></span>')})})},Xe=Ye,Ke=function(e){e.on("ResolveName",function(e){var t;1===e.target.nodeType&&(t=e.target.getAttribute("data-mce-object"))&&(e.name=t)})},Ge=Ke,Je=function(t){t.on("click keyup",function(){var e=t.selection.getNode();e&&t.dom.hasClass(e,"mce-preview-object")&&t.dom.getAttrib(e,"data-mce-selected")&&e.setAttribute("data-mce-selected","2")}),t.on("ObjectSelected",function(e){var t=e.target.getAttribute("data-mce-object");"audio"!==t&&"script"!==t||e.preventDefault()}),t.on("objectResized",function(e){var t,n=e.target;n.getAttribute("data-mce-object")&&(t=n.getAttribute("data-mce-html"))&&(t=unescape(t),n.setAttribute("data-mce-html",escape(K(t,{width:e.width,height:e.height}))))})},Qe=Je,Ze=function(e){e.addButton("media",{tooltip:"Insert/edit media",cmd:"mceMedia",stateSelector:["img[data-mce-object]","span[data-mce-object]","div[data-ephox-embed-iri]"]}),e.addMenuItem("media",{icon:"media",text:"Media",cmd:"mceMedia",context:"insert",prependToContext:!0})},et=Ze;e.add("media",function(e){return Le(e),et(e),Ge(e),Xe(e),Qe(e),Me(e)})}(),function(s){"use strict";var p,c,g,d,b,a,u,l,f,m,e,S,n,t,r,h,o,v,y,i,x,w,C,N,T,E,k,R,_,A,D,O,P,B,M,I,L,F,H,z,W,U,j,V,q,$,Y,X,K,G,J,Q,Z,ee,te,ne,re,oe,ie,ae,ue,se,ce,le,fe,de,me,ge,he,pe,ve,be,ye,xe,we,Ce,Se,Ne,Te,Ee,ke,Re,_e,Ae,De,Oe,Pe,Be,Me,Ie,Le,Fe,He,ze,We,Ue,je,Ve,qe,$e,Ye,Xe,Ke,Ge,Je,Qe,Ze,et,tt,nt,rt,ot,it,at,ut,st,ct,lt,ft,dt,mt,gt,ht,pt,vt,bt,yt,xt,wt,Ct,St,Nt,Tt,Et,kt,Rt,_t,At,Dt,Ot,Pt,Bt,Mt,It,Lt,Ft,Ht,zt,Wt,Ut,jt,Vt,qt,$t,Yt,Xt,Kt,Gt,Jt,Qt,Zt,en,tn,nn,rn,on,an,un,sn,cn,ln,fn,dn,mn,gn,hn,pn,vn,bn,yn,xn,wn,Cn,Sn,Nn,Tn,En,kn,Rn,_n,An,Dn,On,Pn,Bn,Mn,In,Ln,Fn,Hn,zn,Wn,Un,jn,Vn,qn,$n,Yn,Xn,Kn,Gn,Jn,Qn,Zn,er,tr,nr,rr,or,ir,ar,ur,sr,cr,lr,fr,dr,mr,gr,hr,pr,vr,br,yr,xr,wr,Cr,Sr,Nr,Tr,Er,kr,Rr,_r,Ar,Dr,Or,Pr,Br,Mr,Ir,Lr,Fr,Hr,zr,Wr,Ur,jr,Vr,qr,$r,Yr,Xr,Kr,Gr,Jr,Qr,Zr,eo,to,no,ro,oo,io,ao,uo,so,co,lo,fo,mo,go,ho,po,vo,bo,yo,xo,wo,Co,So,No,To,Eo,ko,Ro,_o,Ao,Do,Oo,Po,Bo,Mo,Io,Lo,Fo,Ho,zo,Wo,Uo,jo,Vo,qo,$o,Yo,Xo,Ko,Go,Jo,Qo,Zo,ei,ti,ni,ri,oi,ii,ai,ui,si,ci,li,fi,di,mi,gi,hi,pi,vi,bi,yi,xi,wi,Ci,Si,Ni,Ti,Ei,ki,Ri,_i,Ai,Di,Oi,Pi,Bi,Mi,Ii,Li,Fi,Hi,zi,Wi,Ui,ji,Vi,qi,$i,Yi,Xi,Ki,Gi,Ji,Qi,Zi,ea,ta,na,ra,oa,ia,aa,ua,sa,ca,la,fa,da,ma,ga,ha,pa,va,ba,ya,xa,wa,Ca,Sa,Na,Ta,Ea,ka,Ra,_a,Aa,Da,Oa,Pa,Ba,Ma,Ia,La,Fa,Ha,za,Wa,Ua,ja,Va,qa,$a,Ya,Xa,Ka,Ga,Ja,Qa,Za,eu,tu,nu,ru,ou,iu,au,uu,su,cu,lu,fu,du,mu,gu,hu,pu,vu,bu,yu,xu,wu,Cu,Su,Nu,Tu,Eu,ku,Ru,_u,Au,Du,Ou,Pu,Bu,Mu,Iu,Lu,Fu,Hu,zu,Wu,Uu,ju,Vu,qu,$u,Yu,Xu,Ku,Gu,Ju,Qu,Zu,es,ts,ns,rs,os,is,as,us,ss,cs,ls,fs,ds,ms,gs,hs,ps,vs,bs,ys,xs,ws,Cs,Ss,Ns,Ts,Es,ks,Rs,_s,As,Ds,Os,Ps,Bs,Ms,Is,Ls,Fs,Hs,zs,Ws,Us,js,Vs,qs,$s,Ys,Xs,Ks,Gs,Js,Qs,Zs,ec,tc,nc,rc,oc,ic,ac,uc,sc,cc,lc,fc,dc,mc,gc,hc,pc,vc,bc,yc,xc,wc,Cc,Sc,Nc,Tc,Ec,kc,Rc,_c,Ac,Dc,Oc,Pc,Bc,Mc,Ic,Lc,Fc,Hc,zc,Wc,Uc,jc,Vc,qc,$c,Yc,Xc,Kc,Gc,Jc,Qc,Zc,el,tl,nl,rl,ol,il,al,ul,sl,cl,ll,fl,dl,ml,gl,hl,pl,vl,bl,yl,xl,wl,Cl,Sl,Nl,Tl,El,kl,Rl,_l,Al,Dl,Ol,Pl,Bl,Ml,Il,Ll,Fl,Hl,zl,Wl,Ul,jl,Vl,ql,$l,Yl,Xl,Kl,Gl,Jl,Ql,Zl,ef,tf,nf,rf,of,af,uf,sf,cf,lf,ff,df,mf,gf,hf,pf,vf,bf,yf,xf,wf,Cf,Sf,Nf,Tf,Ef,kf,Rf,_f,Af,Df,Of,Pf,Bf,Mf,If,Lf,Ff,Hf,zf,Wf,Uf,jf,Vf,qf,$f,Yf,Xf,Kf,Gf,Jf,Qf,Zf,ed,td,nd,rd,od,id,ad,ud,sd,cd,ld,fd,dd,md,gd,hd,pd,vd,bd,yd,xd,wd,Cd,Sd,Nd,Td,Ed,kd,Rd,_d,Ad,Dd,Od,Pd,Bd,Md,Id,Ld,Fd,Hd,zd,Wd,Ud,jd,Vd,qd,$d,Yd,Xd,Kd,Gd,Jd,Qd,Zd,em,tm,nm,rm,om,im,am,um,sm,cm,lm,fm,dm,mm,gm,hm,pm,vm,bm,ym,xm,wm,Cm,Sm,Nm,Tm,Em,km,Rm,_m,Am,Dm,Om,Pm,Bm,Mm,Im,Lm,Fm,Hm,zm,Wm,Um,jm,Vm,qm,$m,Ym,Xm,Km,Gm,Jm,Qm,Zm,eg,tg,ng,rg,og,ig,ag,ug,sg,cg,lg,fg,dg,mg,gg,hg,pg,vg,bg,yg,xg,wg,Cg,Sg,Ng,Tg,Eg,kg,Rg,_g,Ag,Dg,Og,Pg,Bg,Mg,Ig,Lg,Fg,Hg,zg,Wg,Ug,jg,Vg,qg,$g,Yg,Xg,Kg,Gg,Jg,Qg,Zg,eh,th,nh,rh,oh,ih,ah,uh,sh,ch,lh,fh,dh,mh,gh,hh,ph,vh,bh,yh,xh,wh,Ch,Sh,Nh=tinymce.util.Tools.resolve("tinymce.PluginManager"),Th=function(){var e,t=[];for(e=0;e<arguments.length;e++)t[e]=arguments[e]},Eh=function(n,r){return function(){var e,t=[];for(e=0;e<arguments.length;e++)t[e]=arguments[e];return n(r.apply(null,t))}},kh=function(e){return function(){return e}},Rh=function(e){return e};function _h(r){var e,o=[];for(e=1;e<arguments.length;e++)o[e-1]=arguments[e];return function(){var e,t,n=[];for(e=0;e<arguments.length;e++)n[e]=arguments[e];return t=o.concat(n),r.apply(null,t)}}function Ah(e,t,n,r,o){return e(n,r)?S.some(n):v(o)&&o(n)?S.none():t(n,r,o)}function Dh(){var e=function(e){return Ne.fromDom(e.dom().cloneNode(!1))},t=function(e){return e.dom().ownerDocument},n=function(e){return!!ue(e)&&("body"===re(e)||x(_r,re(e)))},r=function(e){return!!ue(e)&&x(["br","img","hr","input"],re(e))},o=function(e,t){return e.dom().compareDocumentPosition(t.dom())},i=function(e,t){var n=pe(e);de(t,n)};return{up:kh({selector:Dn,closest:Bn,predicate:kn,all:jt}),down:kh({selector:En,predicate:Sn}),styles:kh({get:Oe,getRaw:Be,set:Ae,remove:Me}),attrs:kh({get:me,set:fe,remove:he,copyTo:i}),insert:kh({before:Kt,after:Gt,afterAll:tn,append:Qt,appendAll:nn,prepend:Jt,wrap:Zt}),remove:kh({unwrap:an,remove:on}),create:kh({nu:Ne.fromTag,clone:e,text:Ne.fromText}),query:kh({comparePosition:o,prevSibling:Vt,nextSibling:qt}),property:kh({children:$t,name:re,parent:Ut,document:t,isText:se,isComment:ae,isElement:ue,getText:ir,setText:ur,isBoundary:n,isEmptyTag:r}),eq:Bt,is:Ht}}function Oh(r,o){var e=function(e,t){if(!y(t)&&!t.match(/^[0-9]+$/))throw new Error(r+".set accepts only positive integer values. Value was "+t);var n=e.dom();we(n)&&(n.style[r]=t+"px")},t=function(e){var t,n=o(e);return n<=0||null===n?(t=Oe(e,r),parseFloat(t)||0):n},i=function(o,e){return _(e,function(e,t){var n=Oe(o,t),r=void 0===n?0:parseInt(n,10);return isNaN(r)?e:e+r},0)},n=function(e,t,n){var r=i(e,n),o=r<t?t-r:0;return o};return{set:e,get:t,getOuter:t,aggregate:i,max:n}}function Ph(t){var n=function(e){return t(e).isRtl()?oa.rtl:oa.ltr},e=function(e,t){return n(t).delta(e,t)},r=function(e,t){return n(t).positions(e)},o=function(e){return n(e).edge(e)};return{delta:e,edge:o,positions:r}}function Bh(o,i,a,e){var u,s=o.dom;function c(e,t,n){(1===i.length||n)&&s.setAttrib(e,t,n)}Jc(o)&&Tl.syncAdvancedStyleFields(o,e),u=e.control.rootControl.toJSON(),o.undoManager.transact(function(){pl.each(i,function(e){var t,n,r;c(e,"scope",u.scope),c(e,"style",u.style),c(e,"class",u.class),t=e,n="height",r=Lc(u.height),(1===i.length||r)&&s.setStyle(t,n,r),u.type!==e.parentNode.nodeName.toLowerCase()&&Dl(o.dom,e,u.type),u.align!==a.align&&(yl(o,e),vl(o,e,u.align))}),o.focus()})}function Mh(e,t,n,r){if("TD"===t.tagName||"TH"===t.tagName)e.setStyle(t,n,r);else if(t.children)for(var o=0;o<t.children.length;o++)Mh(e,t.children[o],n,r)}function Ih(e){var n=q.apply(null,e),r=[],t=function(e){if(void 0===e)throw"Event bind error: undefined handler";r.push(e)},o=function(t){r=E(r,function(e){return e!==t})},i=function(){var t=n.apply(null,arguments);N(r,function(e){e(t)})};return{bind:t,unbind:o,trigger:i}}function Lh(){var r,e,n,t,o,i={onEvent:function(e,t){},reset:Th},a=(r=S.none(),e=function(){r=S.none()},n=function(t,n){var e=r.map(function(e){return t.compare(e,n)});return r=S.some(n),e},t=function(e,t){t.extract(e).each(function(e){n(t,e).each(function(e){o.trigger.move(e)})})},o=nf.create({move:Ih(["info"])}),{onEvent:t,reset:e,events:o.registry}),u=i,s=function(){u.reset(),u=a},c=function(){u.reset(),u=i},l=function(e,t){u.onEvent(e,t)},f=function(){return u===a};return{on:s,off:c,isOn:f,onEvent:l,events:a.events}}function Fh(){var n,r=nf.create({drag:Ih(["xDelta","yDelta","target"])}),o=S.none(),e={mutate:function(e,t){n.trigger.drag(e,t)},events:(n=nf.create({drag:Ih(["xDelta","yDelta"])})).registry};return e.events.drag.bind(function(t){o.each(function(e){r.trigger.drag(t.xDelta(),t.yDelta(),e)})}),{assign:function(e){o=S.some(e)},get:function(){return o},mutate:e.mutate,events:r.registry}}function Hh(e,n){var o,t,i,a,r,u,s,c,l,f,d,m,g,h,p,v=ra.height,b=(o=e,t=n,i=v,m=Fh(),g=Nf.transform(m,{}),h=S.none(),p=function(e,t){return S.from(me(e,t))},m.events.drag.bind(function(n){p(n.target(),"data-row").each(function(e){var t=as.getInt(n.target(),"top");Ae(n.target(),"top",t+n.yDelta()+"px")}),p(n.target(),"data-column").each(function(e){var t=as.getInt(n.target(),"left");Ae(n.target(),"left",t+n.xDelta()+"px")})}),a=function(e,t){var n=as.getInt(e,t),r=parseInt(me(e,"data-initial-"+t),10);return n-r},g.events.stop.bind(function(){m.get().each(function(r){h.each(function(n){p(r,"data-row").each(function(e){var t=a(r,"top");he(r,"data-initial-top"),d.trigger.adjustHeight(n,t,parseInt(e,10))}),p(r,"data-column").each(function(e){var t=a(r,"left");he(r,"data-initial-left"),d.trigger.adjustWidth(n,t,parseInt(e,10))}),qa.refresh(o,n,i,t)})})}),r=function(e,t){d.trigger.startAdjust(),m.assign(e),fe(e,"data-initial-"+t,parseInt(Oe(e,t),10)),xa(e,Ef),Ae(e,"opacity","0.2"),g.go(o.parent())},u=pf(o.parent(),"mousedown",function(e){qa.isRowBar(e.target())&&r(e.target(),"top"),qa.isColBar(e.target())&&r(e.target(),"left")}),s=function(e){return Bt(e,o.view())},c=pf(o.view(),"mouseover",function(e){"table"===re(e.target())||Tf(e.target(),"table",s)?(h="table"===re(e.target())?S.some(e.target()):Dn(e.target(),"table",s)).each(function(e){qa.refresh(o,e,i,t)}):Te(e.target())&&qa.destroy(o)}),l=function(){u.unbind(),c.unbind(),g.destroy(),qa.destroy(o)},f=function(e){qa.refresh(o,e,i,t)},d=nf.create({adjustHeight:Ih(["table","delta","row"]),adjustWidth:Ih(["table","delta","column"]),startAdjust:Ih([])}),{destroy:l,refresh:f,on:g.on,off:g.off,hideBars:_h(qa.hide,o),showBars:_h(qa.show,o),events:d.registry}),y=nf.create({beforeResize:Ih(["table"]),afterResize:Ih(["table"]),startDrag:Ih([])});return b.events.adjustHeight.bind(function(e){y.trigger.beforeResize(e.table());var t=v.delta(e.delta());Es(e.table(),t,e.row(),v),y.trigger.afterResize(e.table())}),b.events.startAdjust.bind(function(e){y.trigger.startDrag()}),b.events.adjustWidth.bind(function(e){y.trigger.beforeResize(e.table());var t=n.delta(e.delta(),e.table());Ts(e.table(),t,e.column(),n),y.trigger.afterResize(e.table())}),{on:b.on,off:b.off,hideBars:b.hideBars,showBars:b.showBars,destroy:b.destroy,events:y.registry}}function zh(i){var e=function(e,t){return Ne.fromPoint(Ne.fromDom(i.document),e,t)},t=function(e){return e.dom().getBoundingClientRect()},n=function(e,t,n,r){var o=Jf(e,t,n,r);return Gd(i,o).map(function(e){return j(e,g)})},r=function(){return Kd(i).map(function(e){return gm(i,e)})},o=function(e){var t=Gf(e.start(),e.finish());return gm(i,t)},a=function(e,t){return Jd(i,e,t).map(function(e){return{start:kh(qf.on(e.start(),e.soffset())),finish:kh(qf.on(e.finish(),e.foffset()))}})},u=function(){Qd(i)},s=function(e){Yd(i,e)},c=function(e){Ud(i,e.start(),e.soffset(),e.finish(),e.foffset())},l=function(e,t){jd(i,e,t)},f=function(){return i.innerHeight},d=function(){return pm(Ne.fromDom(i.document)).top()},m=function(e,t){vm(e,t,Ne.fromDom(i.document))};return{elementFromPoint:e,getRect:t,getRangedRect:n,getSelection:r,fromSitus:o,situsFromPoint:a,clearSelection:u,setSelection:c,setRelativeSelection:l,selectContents:s,getInnerHeight:f,getScrollY:d,scrollBy:m}}p=function(n){return function(){var e,t=[];for(e=0;e<arguments.length;e++)t[e]=arguments[e];return!n.apply(null,t)}},c=function(e){return function(){throw new Error(e)}},d=kh(!(g=function(e){return e()})),b=kh(!0),dh={fold:function(e,t){return e()},is:a=d,isSome:a,isNone:u=b,getOr:fh=function(e){return e},getOrThunk:lh=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:function(){return null},getOrUndefined:function(){},or:fh,orThunk:lh,map:l=function(){return f},ap:l,each:function(){},bind:l,flatten:l,exists:a,forall:u,filter:l,equals:ch=function(e){return e.isNone()},equals_:ch,toArray:function(){return[]},toString:kh("none()")},Object.freeze&&Object.freeze(dh),f=dh,e=function(e){return null==e?f:m(e)},S={some:m=function(n){var e=function(){return n},t=function(){return i},r=function(e){return m(e(n))},o=function(e){return e(n)},i={fold:function(e,t){return t(n)},is:function(e){return n===e},isSome:u,isNone:a,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:t,orThunk:t,map:r,ap:function(e){return e.fold(l,function(e){return m(e(n))})},each:function(e){e(n)},bind:o,flatten:e,exists:o,forall:o,filter:function(e){return e(n)?i:f},equals:function(e){return e.is(n)},equals_:function(e,t){return e.fold(a,function(e){return t(n,e)})},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return i},none:l,from:e},n=function(e){if(null===e)return"null";var t=typeof e;return"object"===t&&Array.prototype.isPrototypeOf(e)?"array":"object"===t&&String.prototype.isPrototypeOf(e)?"string":t},r=(t=function(t){return function(e){return n(e)===t}})("string"),h=t("array"),o=t("boolean"),v=t("function"),y=t("number"),mh=Array.prototype.indexOf,gh=function(e,t){return mh.call(e,t)},hh=function(e,t){return O(e,t)},i=void 0===mh?hh:gh,x=function(e,t){return-1<i(e,t)},w=function(e,t){return D(e,t).isSome()},C=function(e,t){var n,r,o=e.length,i=new Array(o);for(n=0;n<o;n++)r=e[n],i[n]=t(r,n,e);return i},N=function(e,t){var n,r;for(n=0,r=e.length;n<r;n++)t(e[n],n,e)},T=function(e,t){var n;for(n=e.length-1;0<=n;n--)t(e[n],n,e)},E=function(e,t){var n,r,o,i=[];for(n=0,r=e.length;n<r;n++)t(o=e[n],n,e)&&i.push(o);return i},k=function(e,t){var n,r,o,i,a,u,s;if(0===e.length)return[];for(n=t(e[0]),r=[],o=[],i=0,a=e.length;i<a;i++)(s=t(u=e[i]))!==n&&(r.push(o),o=[]),n=s,o.push(u);return 0!==o.length&&r.push(o),r},R=function(e,t,n){return T(e,function(e){n=t(n,e)}),n},_=function(e,t,n){return N(e,function(e){n=t(n,e)}),n},A=function(e,t){var n,r,o;for(n=0,r=e.length;n<r;n++)if(t(o=e[n],n,e))return S.some(o);return S.none()},D=function(e,t){var n,r;for(n=0,r=e.length;n<r;n++)if(t(e[n],n,e))return S.some(n);return S.none()},O=function(e,t){for(var n=0,r=e.length;n<r;++n)if(e[n]===t)return n;return-1},P=Array.prototype.push,B=function(e){var t,n,r=[];for(t=0,n=e.length;t<n;++t){if(!Array.prototype.isPrototypeOf(e[t]))throw new Error("Arr.flatten item "+t+" was not an array, input: "+e);P.apply(r,e[t])}return r},M=function(e,t){var n=C(e,t);return B(n)},I=function(e,t){var n,r;for(n=0,r=e.length;n<r;++n)if(!0!==t(e[n],n,e))return!1;return!0},L=Array.prototype.slice,F=function(e){var t=L.call(e,0);return t.reverse(),t},H=function(e,t){var n=L.call(e,0);return n.sort(t),n},z=function(e){return 0===e.length?S.none():S.some(e[e.length-1])},v(Array.from)&&Array.from,W=Object.keys,U=function(e,t){var n,r,o,i=W(e);for(n=0,r=i.length;n<r;n++)t(e[o=i[n]],o,e)},j=function(e,r){return V(e,function(e,t,n){return{k:t,v:r(e,t,n)}})},V=function(r,o){var i={};return U(r,function(e,t){var n=o(e,t,r);i[n.k]=n.v}),i},q=function(){var e,t=[];for(e=0;e<arguments.length;e++)t[e]=arguments[e];return function(){var e,n,r=[];for(e=0;e<arguments.length;e++)r[e]=arguments[e];if(t.length!==r.length)throw new Error('Wrong number of arguments to struct. Expected "['+t.length+']", got '+r.length+" arguments");return n={},N(t,function(e,t){n[e]=kh(r[t])}),n}},$=function(e){return e.slice(0).sort()},Y=function(e,t){throw new Error("All required keys ("+$(e).join(", ")+") were not specified. Specified keys were: "+$(t).join(", ")+".")},X=function(e){throw new Error("Unsupported keys for object: "+$(e).join(", "))},K=function(t,e){if(!h(e))throw new Error("The "+t+" fields must be an array. Was: "+e+".");N(e,function(e){if(!r(e))throw new Error("The value "+e+" in the "+t+" fields was not a string.")})},G=function(e,t){throw new Error("All values need to be of type: "+t+". Keys ("+$(e).join(", ")+") were not.")},J=function(e){var n=$(e),t=A(n,function(e,t){return t<n.length-1&&e===n[t+1]});t.each(function(e){throw new Error("The field: "+e+" occurs more than once in the combined fields: ["+n.join(", ")+"].")})},Q=function(i,a){var u=i.concat(a);if(0===u.length)throw new Error("You must specify at least one required or optional field.");return K("required",i),K("optional",a),J(u),function(t){var e,n,r=W(t),o=I(i,function(e){return x(r,e)});return o||Y(i,r),0<(e=E(r,function(e){return!x(u,e)})).length&&X(e),n={},N(i,function(e){n[e]=kh(t[e])}),N(a,function(e){n[e]=kh(Object.prototype.hasOwnProperty.call(t,e)?S.some(t[e]):S.none())}),n}},s.Node.ATTRIBUTE_NODE,s.Node.CDATA_SECTION_NODE,Z=s.Node.COMMENT_NODE,ee=s.Node.DOCUMENT_NODE,s.Node.DOCUMENT_TYPE_NODE,s.Node.DOCUMENT_FRAGMENT_NODE,te=s.Node.ELEMENT_NODE,ne=s.Node.TEXT_NODE,s.Node.PROCESSING_INSTRUCTION_NODE,s.Node.ENTITY_REFERENCE_NODE,s.Node.ENTITY_NODE,s.Node.NOTATION_NODE,re=function(e){return e.dom().nodeName.toLowerCase()},oe=function(e){return e.dom().nodeType},ae=function(e){return oe(e)===Z||"#comment"===re(e)},ue=(ie=function(t){return function(e){return oe(e)===t}})(te),se=ie(ne),ce=ie(ee),le=function(e,t,n){if(!(r(n)||o(n)||y(n)))throw s.console.error("Invalid call to Attr.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")},fe=function(e,t,n){le(e.dom(),t,n)},de=function(e,t){var n=e.dom();U(t,function(e,t){le(n,t,e)})},me=function(e,t){var n=e.dom().getAttribute(t);return null===n?void 0:n},ge=function(e,t){var n=e.dom();return!(!n||!n.hasAttribute)&&n.hasAttribute(t)},he=function(e,t){e.dom().removeAttribute(t)},pe=function(e){return _(e.dom().attributes,function(e,t){return e[t.name]=t.value,e},{})},ve=function(e,t,n){return""===t||!(e.length<t.length)&&e.substr(n,n+t.length)===t},be=function(e,t){return-1!==e.indexOf(t)},ye=function(e,t){return ve(e,t,e.length-t.length)},xe=function(e){return e.replace(/^\s+|\s+$/g,"")},we=function(e){return void 0!==e.style},Ne={fromHtml:function(e,t){var n=t||s.document,r=n.createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||1<r.childNodes.length)throw s.console.error("HTML does not have a single root node",e),new Error("HTML must have a single root node");return Se(r.childNodes[0])},fromTag:function(e,t){var n=t||s.document,r=n.createElement(e);return Se(r)},fromText:function(e,t){var n=t||s.document,r=n.createTextNode(e);return Se(r)},fromDom:Se=function(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:kh(e)}},fromPoint:function(e,t,n){var r=e.dom();return S.from(r.elementFromPoint(t,n)).map(Se)}},Te=function(e){var t=se(e)?e.dom().parentNode:e.dom();return null!=t&&t.ownerDocument.body.contains(t)},Ee=(Ce=function(n){var r,o=!1;return function(){var e,t=[];for(e=0;e<arguments.length;e++)t[e]=arguments[e];return o||(o=!0,r=n.apply(null,t)),r}})(function(){return ke(Ne.fromDom(s.document))}),ke=function(e){var t=e.dom().body;if(null==t)throw new Error("Body is not available yet");return Ne.fromDom(t)},Re=function(e,t,n){if(!r(n))throw s.console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);we(e)&&e.style.setProperty(t,n)},_e=function(e,t){we(e)&&e.style.removeProperty(t)},Ae=function(e,t,n){var r=e.dom();Re(r,t,n)},De=function(e,t){var n=e.dom();U(t,function(e,t){Re(n,t,e)})},Oe=function(e,t){var n=e.dom(),r=s.window.getComputedStyle(n),o=r.getPropertyValue(t),i=""!==o||Te(e)?o:Pe(n,t);return null===i?void 0:i},Pe=function(e,t){return we(e)?e.style.getPropertyValue(t):""},Be=function(e,t){var n=e.dom(),r=Pe(n,t);return S.from(r).filter(function(e){return 0<e.length})},Me=function(e,t){var n=e.dom();_e(n,t),ge(e,"style")&&""===xe(me(e,"style"))&&he(e,"style")},Ie=function(e,t){var n=e.dom(),r=t.dom();we(n)&&we(r)&&(r.style.cssText=n.style.cssText)},Le=void 0!==s.window?s.window:Function("return this;")(),Fe=function(e,t){var n,r=null!=t?t:Le;for(n=0;n<e.length&&null!=r;++n)r=r[e[n]];return r},He=function(e,t){var n=e.split(".");return Fe(n,t)},ze=function(e,t){return He(e,t)},We=function(e,t){var n=ze(e,t);if(null==n)throw e+" not available on this browser";return n},Ue=function(){return We("Node")},je=function(e,t,n){return 0!=(e.compareDocumentPosition(t)&n)},Ve=function(e,t){return je(e,t,Ue().DOCUMENT_POSITION_CONTAINED_BY)},qe=function(e,t){var n,r;for(n=0;n<e.length;n++)if((r=e[n]).test(t))return r},$e=function(e,t){var n,r=qe(e,t);return r?Ke((n=function(e){return Number(t.replace(r,"$"+e))})(1),n(2)):{major:0,minor:0}},Ye=function(e,t){var n=String(t).toLowerCase();return 0===e.length?Xe():$e(e,n)},Xe=function(){return Ke(0,0)},Ge={nu:Ke=function(e,t){return{major:e,minor:t}},detect:Ye,unknown:Xe},Qe="Chrome",Ze="IE",et="Opera",tt="Firefox",nt="Safari",rt=function(e,t){return function(){return t===e}},it={unknown:function(){return ot({current:void 0,version:Ge.unknown()})},nu:ot=function(e){var t=e.current,n=e.version;return{current:t,version:n,isEdge:rt(Je,t),isChrome:rt(Qe,t),isIE:rt(Ze,t),isOpera:rt(et,t),isFirefox:rt(tt,t),isSafari:rt(nt,t)}},edge:kh(Je="Edge"),chrome:kh(Qe),ie:kh(Ze),opera:kh(et),firefox:kh(tt),safari:kh(nt)},ut="iOS",st="Android",ct="Linux",lt="OSX",ft="Solaris",dt="FreeBSD",mt=function(e,t){return function(){return t===e}},ht={unknown:function(){return gt({current:void 0,version:Ge.unknown()})},nu:gt=function(e){var t=e.current,n=e.version;return{current:t,version:n,isWindows:mt(at,t),isiOS:mt(ut,t),isAndroid:mt(st,t),isOSX:mt(lt,t),isLinux:mt(ct,t),isSolaris:mt(ft,t),isFreeBSD:mt(dt,t)}},windows:kh(at="Windows"),ios:kh(ut),android:kh(st),linux:kh(ct),osx:kh(lt),solaris:kh(ft),freebsd:kh(dt)},pt=function(e,t,n){var r=e.isiOS()&&!0===/ipad/i.test(n),o=e.isiOS()&&!r,i=e.isAndroid()&&3===e.version.major,a=e.isAndroid()&&4===e.version.major,u=r||i||a&&!0===/mobile/i.test(n),s=e.isiOS()||e.isAndroid(),c=s&&!u,l=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(n);return{isiPad:kh(r),isiPhone:kh(o),isTablet:kh(u),isPhone:kh(c),isTouch:kh(s),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:kh(l)}},vt=function(e,t){var n=String(t).toLowerCase();return A(e,function(e){return e.search(n)})},bt=function(e,n){return vt(e,n).map(function(e){var t=Ge.detect(e.versionRegexes,n);return{current:e.name,version:t}})},yt=function(e,n){return vt(e,n).map(function(e){var t=Ge.detect(e.versionRegexes,n);return{current:e.name,version:t}})},Ct=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return be(e,"edge/")&&be(e,"chrome")&&be(e,"safari")&&be(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,xt=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/],search:function(e){return be(e,"chrome")&&!be(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return be(e,"msie")||be(e,"trident")}},{name:"Opera",versionRegexes:[xt,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:(wt=function(t){return function(e){return be(e,t)}})("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:wt("firefox")},{name:"Safari",versionRegexes:[xt,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(be(e,"safari")||be(e,"mobile/"))&&be(e,"applewebkit")}}],St=[{name:"Windows",search:wt("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return be(e,"iphone")||be(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:wt("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:wt("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:wt("linux"),versionRegexes:[]},{name:"Solaris",search:wt("sunos"),versionRegexes:[]},{name:"FreeBSD",search:wt("freebsd"),versionRegexes:[]}],Nt={browsers:kh(Ct),oses:kh(St)},Tt=function(e){var t=Nt.browsers(),n=Nt.oses(),r=bt(t,e).fold(it.unknown,it.nu),o=yt(n,e).fold(ht.unknown,ht.nu),i=pt(o,r,e);return{browser:r,os:o,deviceType:i}},Et=Ce(function(){var e=s.navigator.userAgent;return Tt(e)}),Rt=te,_t=ee,At=function(e,t){var n=e.dom();if(n.nodeType!==Rt)return!1;if(void 0!==n.matches)return n.matches(t);if(void 0!==n.msMatchesSelector)return n.msMatchesSelector(t);if(void 0!==n.webkitMatchesSelector)return n.webkitMatchesSelector(t);if(void 0!==n.mozMatchesSelector)return n.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},Dt=function(e){return e.nodeType!==Rt&&e.nodeType!==_t||0===e.childElementCount},Ot=function(e,t){var n=void 0===t?s.document:t.dom();return Dt(n)?[]:C(n.querySelectorAll(e),Ne.fromDom)},Pt=function(e,t){var n=void 0===t?s.document:t.dom();return Dt(n)?S.none():S.from(n.querySelector(e)).map(Ne.fromDom)},Bt=function(e,t){return e.dom()===t.dom()},Mt=function(e,t){var n=e.dom(),r=t.dom();return n!==r&&n.contains(r)},It=function(e,t){return Ve(e.dom(),t.dom())},Lt=(kt={detect:Et}).detect().browser,Ft=Lt.isIE()?It:Mt,Ht=At,zt=function(e){return Ne.fromDom(e.dom().ownerDocument)},Wt=function(e){var t=e.dom(),n=t.ownerDocument.defaultView;return Ne.fromDom(n)},Ut=function(e){var t=e.dom();return S.from(t.parentNode).map(Ne.fromDom)},jt=function(e,t){for(var n,r,o=v(t)?t:kh(!1),i=e.dom(),a=[];null!==i.parentNode&&void 0!==i.parentNode&&(n=i.parentNode,r=Ne.fromDom(n),a.push(r),!0!==o(r));)i=n;return a},Vt=function(e){var t=e.dom();return S.from(t.previousSibling).map(Ne.fromDom)},qt=function(e){var t=e.dom();return S.from(t.nextSibling).map(Ne.fromDom)},$t=function(e){var t=e.dom();return C(t.childNodes,Ne.fromDom)},Yt=function(e,t){var n=e.dom().childNodes;return S.from(n[t]).map(Ne.fromDom)},Xt=function(e){return Yt(e,0)},q("element","offset"),Kt=function(t,n){Ut(t).each(function(e){e.dom().insertBefore(n.dom(),t.dom())})},Gt=function(e,t){qt(e).fold(function(){Ut(e).each(function(e){Qt(e,t)})},function(e){Kt(e,t)})},Jt=function(t,n){Xt(t).fold(function(){Qt(t,n)},function(e){t.dom().insertBefore(n.dom(),e.dom())})},Qt=function(e,t){e.dom().appendChild(t.dom())},Zt=function(e,t){Kt(e,t),Qt(t,e)},en=function(t,e){N(e,function(e){Kt(t,e)})},tn=function(r,o){N(o,function(e,t){var n=0===t?r:o[t-1];Gt(n,e)})},nn=function(t,e){N(e,function(e){Qt(t,e)})},rn=function(e){e.dom().textContent="",N($t(e),function(e){on(e)})},on=function(e){var t=e.dom();null!==t.parentNode&&t.parentNode.removeChild(t)},an=function(e){var t=$t(e);0<t.length&&en(e,t),on(e)},un=q("width","height"),sn=q("rows","columns"),cn=q("row","column"),ln=q("x","y"),fn=q("element","rowspan","colspan"),dn=q("element","rowspan","colspan","isNew"),mn=q("element","rowspan","colspan","row","column"),gn=q("element","cells","section"),hn=q("element","isNew"),pn=q("element","cells","section","isNew"),vn=q("cells","section"),bn=q("details","section"),yn=q("startRow","startCol","finishRow","finishCol"),xn={dimensions:un,grid:sn,address:cn,coords:ln,extended:mn,detail:fn,detailnew:dn,rowdata:gn,elementnew:hn,rowdatanew:pn,rowcells:vn,rowdetails:bn,bounds:yn},wn=function(e,t,n){return E(jt(e,n),t)},Cn=function(e,t){return E($t(e),t)},Sn=function(e,t){var n=[];return N($t(e),function(e){t(e)&&(n=n.concat([e])),n=n.concat(Sn(e,t))}),n},Nn=function(e,t,n){return wn(e,function(e){return At(e,t)},n)},Tn=function(e,t){return Cn(e,function(e){return At(e,t)})},En=function(e,t){return Ot(t,e)},kn=function(e,t,n){for(var r,o=e.dom(),i=v(n)?n:kh(!1);o.parentNode;){if(o=o.parentNode,t(r=Ne.fromDom(o)))return S.some(r);if(i(r))break}return S.none()},Rn=function(e,t,n){return Ah(function(e){return t(e)},kn,e,t,n)},_n=function(e,t){return A(e.dom().childNodes,Eh(t,Ne.fromDom)).map(Ne.fromDom)},An=function(e,r){var o=function(e){var t,n;for(t=0;t<e.childNodes.length;t++){if(r(Ne.fromDom(e.childNodes[t])))return S.some(Ne.fromDom(e.childNodes[t]));if((n=o(e.childNodes[t])).isSome())return n}return S.none()};return o(e.dom())},Dn=function(e,t,n){return kn(e,function(e){return At(e,t)},n)},On=function(e,t){return _n(e,function(e){return At(e,t)})},Pn=function(e,t){return Pt(t,e)},Bn=function(e,t,n){return Ah(At,Dn,e,t,n)},In={firstLayer:function(e,t){return Mn(e,t,kh(!0))},filterFirstLayer:Mn=function(e,t,n){return M($t(e),function(e){return At(e,t)?n(e)?[e]:[]:Mn(e,t,n)})}},Ln=function(e,t,n){var r,o=void 0!==n?n:kh(!1);return o(t)?S.none():x(e,re(t))?S.some(t):(r=function(e){return At(e,"table")||o(e)},Dn(t,e.join(","),r))},Fn=function(e,t){return Ln(["td","th"],e,t)},Hn=function(e){return In.firstLayer(e,"th,td")},zn=function(e,t){return Ln(["caption","tr","tbody","tfoot","thead"],e,t)},Un=_h(Wn=function(t,e){return Ut(e).map(function(e){return Tn(e,t)})},"th,td"),jn=_h(Wn,"tr"),qn=function(e,t,n){var r=Vn(e,t),o=Vn(e,n);return xn.grid(r,o)},$n={cell:Fn,firstCell:function(e){return Pn(e,"th,td")},cells:Hn,neighbourCells:Un,table:function(e,t){return Bn(e,"table",t)},row:function(e,t){return Ln(["tr"],e,t)},rows:function(e){return In.firstLayer(e,"tr")},notCell:zn,neighbourRows:jn,attr:Vn=function(e,t){return parseInt(me(e,t),10)},grid:qn},Yn=function(e){var t=$n.rows(e);return C(t,function(e){var t=e,n=Ut(t),r=n.map(function(e){var t=re(e);return"tfoot"===t||"thead"===t||"tbody"===t?t:"tbody"}).getOr("tbody"),o=C($n.cells(e),function(e){var t=ge(e,"rowspan")?parseInt(me(e,"rowspan"),10):1,n=ge(e,"colspan")?parseInt(me(e,"colspan"),10):1;return xn.detail(e,t,n)});return xn.rowdata(t,o,r)})},Xn=function(e,n){return C(e,function(e){var t=C($n.cells(e),function(e){var t=ge(e,"rowspan")?parseInt(me(e,"rowspan"),10):1,n=ge(e,"colspan")?parseInt(me(e,"colspan"),10):1;return xn.detail(e,t,n)});return xn.rowdata(e,t,n.section())})},Kn=function(e,t){return e+","+t},Jn={generate:function(e){var t,l={},n=[],r=e.length,f=0;return N(e,function(e,s){var c=[];N(e.cells(),function(e,t){for(var n,r,o,i,a,u=0;void 0!==l[Kn(s,u)];)u++;for(n=xn.extended(e.element(),e.rowspan(),e.colspan(),s,u),r=0;r<e.colspan();r++)for(o=0;o<e.rowspan();o++)a=Kn(s+o,i=u+r),l[a]=n,f=Math.max(f,i+1);c.push(n)}),n.push(xn.rowdata(e.element(),c,e.section()))}),t=xn.grid(r,f),{grid:kh(t),access:kh(l),all:kh(n)}},getAt:function(e,t,n){var r=e.access()[Kn(t,n)];return void 0!==r?S.some(r):S.none()},findItem:function(e,t,n){var r=Gn(e,function(e){return n(t,e.element())});return 0<r.length?S.some(r[0]):S.none()},filterItems:Gn=function(e,t){var n=M(e.all(),function(e){return e.cells()});return E(n,t)},justCells:function(e){var t=C(e.all(),function(e){return e.cells()});return B(t)}},Qn=q("minRow","minCol","maxRow","maxCol"),Zn=function(e,i){var t=e.grid().columns(),n=e.grid().rows(),a=n,u=t,s=0,c=0;return U(e.access(),function(e){var t,n,r,o;i(e)&&(n=(t=e.row())+e.rowspan()-1,o=(r=e.column())+e.colspan()-1,t<a?a=t:s<n&&(s=n),r<u?u=r:c<o&&(c=o))}),Qn(a,u,s,c)},er=function(e,t,n){var r=e[n].element(),o=Ne.fromTag("td");Qt(o,Ne.fromTag("br")),(t?Qt:Jt)(r,o)},tr=function(e,t,n,r){var o,i,a,u=t.grid().columns(),s=t.grid().rows();for(o=0;o<s;o++)for(i=!1,a=0;a<u;a++)o<n.minRow()||o>n.maxRow()||a<n.minCol()||a>n.maxCol()||(Jn.getAt(t,o,a).filter(r).isNone()?er(e,i,o):i=!0)},nr=function(e,t){var n=E(In.firstLayer(e,"tr"),function(e){return 0===e.dom().childElementCount});N(n,on),t.minCol()!==t.maxCol()&&t.minRow()!==t.maxRow()||N(In.firstLayer(e,"th,td"),function(e){he(e,"rowspan"),he(e,"colspan")}),he(e,"width"),he(e,"height"),Me(e,"width"),Me(e,"height")},rr=function(e,t){var n=function(e){return At(e.element(),t)},r=Yn(e),o=Jn.generate(r),i=Zn(o,n),a="th:not("+t+"),td:not("+t+")",u=In.filterFirstLayer(e,"th,td",function(e){return At(e,a)});return N(u,on),tr(r,o,i,n),nr(e,i),e},ph=se,vh="text",bh=function(e){if(!ph(e))throw new Error("Can only get "+vh+" value of a "+vh+" node");return Ch(e).getOr("")},yh=function(e){try{return xh(e)}catch(e){return S.none()}},xh=function(e){return ph(e)?S.from(e.dom().nodeValue):S.none()},wh=kt.detect().browser,Ch=wh.isIE()&&10===wh.version.major?yh:xh,or={get:bh,getOption:Ch,set:function(e,t){if(!ph(e))throw new Error("Can only set raw "+vh+" value of a "+vh+" node");e.dom().nodeValue=t}},ir=function(e){return or.get(e)},ar=function(e){return or.getOption(e)},ur=function(e,t){or.set(e,t)},sr=function(e){return"img"===re(e)?1:ar(e).fold(function(){return $t(e).length},function(e){return e.length})},cr="",lr=function(e){return ar(e).filter(function(e){return 0!==e.trim().length||-1<e.indexOf(cr)}).isSome()},fr=["img","br"],dr=function(e){return lr(e)||x(fr,re(e))},mr=function(e){return An(e,dr)},gr=function(e){return hr(e,dr)},hr=function(e,i){var a=function(e){var t,n,r,o=$t(e);for(t=o.length-1;0<=t;t--){if(n=o[t],i(n))return S.some(n);if((r=a(n)).isSome())return r}return S.none()};return a(e)},pr=function(e,t){return Ne.fromDom(e.dom().cloneNode(t))},vr=function(e){return pr(e,!1)},br=function(e){return pr(e,!0)},yr=function(e,t){var n=Ne.fromTag(t),r=pe(e);return de(n,r),n},xr=function(e,t){var n=yr(e,t),r=$t(br(e));return nn(n,r),n},wr=function(){var e=Ne.fromTag("td");return Qt(e,Ne.fromTag("br")),e},Cr=function(e,t,n){var r=xr(e,t);return U(n,function(e,t){null===e?he(r,t):fe(r,t,e)}),r},Sr=function(e){return e},Nr=function(e){return function(){return Ne.fromTag("tr",e.dom())}},Tr=function(r,o,i){return mr(r).map(function(e){var t=i.join(","),n=Nn(e,t,function(e){return Bt(e,r)});return R(n,function(e,t){var n=vr(t);return he(n,"contenteditable"),Qt(e,n),n},o)}).getOr(o)},Er=function(i,e,a){return{row:Nr(e),cell:function(e){var t=zt(e.element()),n=Ne.fromTag(re(e.element()),t.dom()),r=a.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),o=0<r.length?Tr(e.element(),n,r):n;return Qt(o,Ne.fromTag("br")),Ie(e.element(),n),Me(n,"height"),1!==e.colspan()&&Me(e.element(),"width"),i(e.element(),n),n},replace:Cr,gap:wr}},kr=function(e){return{row:Nr(e),cell:wr,replace:Sr,gap:wr}},Rr=function(e,t){var n=t||s.document,r=n.createElement("div");return r.innerHTML=e,$t(Ne.fromDom(r))},_r=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Ar=q("left","right"),Dr=function(e,t,n){var r=e.property().children(t),o=D(r,_h(e.eq,n));return o.map(function(e){return{before:kh(r.slice(0,e)),after:kh(r.slice(e+1))}})},Or=function(n,r,o){return Dr(n,r,o).map(function(e){var t=n.create().clone(r);return n.insert().appendAll(t,e.before().concat([o])),n.insert().appendAll(r,e.after()),n.insert().before(r,t),Ar(t,r)})},Pr=function(n,r,e){return Dr(n,r,e).map(function(e){var t=n.create().clone(r);return n.insert().appendAll(t,e.after()),n.insert().after(r,t),Ar(r,t)})},Br=function(i,e,a,u){var r=q("first","second","splits"),s=function(e,t,o){var n=r(e,S.none(),o);return a(e)?r(e,t,o):i.property().parent(e).bind(function(r){return u(i,r,e).map(function(e){var t=[{first:e.left,second:e.right}],n=a(r)?r:e.left();return s(n,S.some(e.right()),o.concat(t))}).getOr(n)})};return s(e,S.none(),[])},Mr=function(e,t,n,r){var o=n[0],i=n.slice(1);return r(e,t,o,i)},Ir=function(e,t,n){return 0<n.length?Mr(e,t,n,Lr):S.none()},Lr=function(r,o,e,t){var n=o(r,e);return R(t,function(e,t){var n=o(r,t);return Fr(r,e,n)},n)},Fr=function(t,e,n){return e.bind(function(e){return n.filter(_h(t.eq,e))})},Hr=Ir,zr=function(e,t){return _h(e.eq,t)},Wr=function(o,i,e,t){var n,r,a,u=o.property().children(i);return o.eq(i,e[0])?S.some([e[0]]):o.eq(i,t[0])?S.some([t[0]]):(r=(n=function(e){var t=F(e),n=D(t,zr(o,i)).getOr(-1),r=n<t.length-1?t[n+1]:t[n];return D(u,zr(o,r))})(e),a=n(t),r.bind(function(r){return a.map(function(e){var t=Math.min(r,e),n=Math.max(r,e);return u.slice(t,n+1)})}))},jr=function(t,e,n){var r=Ur(t,e,n);return r.shared().bind(function(e){return Wr(t,e,r.firstpath(),r.secondpath())})},Vr=Ur=function(t,e,n,r){var o=void 0!==r?r:kh(!1),i=[e].concat(t.up().all(e)),a=[n].concat(t.up().all(n)),u=function(t){return D(t,o).fold(function(){return t},function(e){return t.slice(0,e+1)})},s=u(i),c=u(a),l=A(s,function(e){return w(c,zr(t,e))});return{firstpath:kh(s),secondpath:kh(c),shared:kh(l)}},qr=function(e,t,n){return Hr(e,t,n)},$r=function(e,t,n){return jr(e,t,n)},Yr=function(e,t,n,r){return Vr(e,t,n,r)},Xr=function(e,t,n){return Or(e,t,n)},Kr=function(e,t,n){return Pr(e,t,n)},Gr=function(e,t,n,r){return Br(e,t,n,r)},Jr=Dh(),Qr={sharedOne:function(n,e){return qr(Jr,function(e,t){return n(t)},e)},subset:function(e,t){return $r(Jr,e,t)},ancestors:function(e,t,n){return Yr(Jr,e,t,n)},breakToLeft:function(e,t){return Xr(Jr,e,t)},breakToRight:function(e,t){return Kr(Jr,e,t)},breakPath:function(e,t,r){return Gr(Jr,e,t,function(e,t,n){return r(t,n)})}},eo=function(e,t){var n=t.column(),r=t.column()+t.colspan()-1,o=t.row(),i=t.row()+t.rowspan()-1;return n<=e.finishCol()&&r>=e.startCol()&&o<=e.finishRow()&&i>=e.startRow()},Zr=function(e,t){return t.column()>=e.startCol()&&t.column()+t.colspan()-1<=e.finishCol()&&t.row()>=e.startRow()&&t.row()+t.rowspan()-1<=e.finishRow()},to=function(e,t){var n,r,o=!0,i=_h(Zr,t);for(n=t.startRow();n<=t.finishRow();n++)for(r=t.startCol();r<=t.finishCol();r++)o=o&&Jn.getAt(e,n,r).exists(i);return o?S.some(t):S.none()},no=function(e,t){return xn.bounds(Math.min(e.row(),t.row()),Math.min(e.column(),t.column()),Math.max(e.row()+e.rowspan()-1,t.row()+t.rowspan()-1),Math.max(e.column()+e.colspan()-1,t.column()+t.colspan()-1))},oo=function(t,e,n){return ro(t,e,n).bind(function(e){return to(t,e)})},io=ro=function(e,t,n){var r=Jn.findItem(e,t,Bt),o=Jn.findItem(e,n,Bt);return r.bind(function(t){return o.map(function(e){return no(t,e)})})},ao=oo,uo=function(o,e,i,a){return Jn.findItem(o,e,Bt).bind(function(e){var t=0<i?e.row()+e.rowspan()-1:e.row(),n=0<a?e.column()+e.colspan()-1:e.column(),r=Jn.getAt(o,t+i,n+a);return r.map(function(e){return e.element()})})},so=function(n,e,t){return io(n,e,t).map(function(e){var t=Jn.filterItems(n,_h(eo,e));return C(t,function(e){return e.element()})})},co=function(e,t){return Jn.findItem(e,t,function(e,t){return Ft(t,e)}).bind(function(e){return e.element()})},lo=function(n,r,o){return $n.table(n).bind(function(e){var t=ho(e);return uo(t,n,r,o)})},fo=function(e,t,n){var r=ho(e);return so(r,t,n)},mo=function(e,t,n,r,o){var i=ho(e),a=Bt(e,n)?t:co(i,t),u=Bt(e,o)?r:co(i,r);return so(i,a,u)},go=function(e,t,n){var r=ho(e);return ao(r,t,n)},ho=function(e){var t=Yn(e);return Jn.generate(t)},po=lo,vo=fo,bo=mo,yo=go,xo=function(e,t){return Dn(e,"table")},wo=Q(["boxes","start","finish"],[]),So=function(e,t){return A(e,function(e){return At(e,t)})},No=function(t,n){return Dn(t,"table").bind(function(e){return Pn(e,n).bind(function(e){return Co(e,t).bind(function(t){return t.boxes().map(function(e){return{boxes:kh(e),start:kh(t.start()),finish:kh(t.finish())}})})})})},To=Co=function(u,s,r){var c=function(t){return function(e){return r(e)||Bt(e,t)}};return Bt(u,s)?S.some(wo({boxes:S.some([u]),start:u,finish:s})):xo(u,r).bind(function(a){return xo(s,r).bind(function(i){var e,t,n;return Bt(a,i)?S.some(wo({boxes:vo(a,u,s),start:u,finish:s})):Ft(a,i)?(t=0<(e=Nn(s,"td,th",c(a))).length?e[e.length-1]:s,S.some(wo({boxes:bo(a,u,a,s,i),start:u,finish:t}))):Ft(i,a)?(n=0<(e=Nn(u,"td,th",c(i))).length?e[e.length-1]:u,S.some(wo({boxes:bo(i,u,a,s,i),start:u,finish:n}))):Qr.ancestors(u,s).shared().bind(function(e){return Bn(e,"table",r).bind(function(e){var t=Nn(s,"td,th",c(e)),n=0<t.length?t[t.length-1]:s,r=Nn(u,"td,th",c(e)),o=0<r.length?r[r.length-1]:u;return S.some(wo({boxes:bo(e,u,a,s,i),start:o,finish:n}))})})})})},Eo=function(e,t){var n=En(e,t);return 0<n.length?S.some(n):S.none()},ko=function(e,t,n,r,o){return So(e,o).bind(function(e){return po(e,t,n).bind(function(e){return No(e,r)})})},Ro=function(e,t,r){return Pn(e,t).bind(function(n){return Pn(e,r).bind(function(t){return Qr.sharedOne(xo,[n,t]).map(function(e){return{first:kh(n),last:kh(t),table:kh(e)}})})})},_o=function(e,t){return Eo(e,t)},Ao=function(o,e,t){return Ro(o,e,t).bind(function(n){var e=function(e){return Bt(o,e)},t=Dn(n.first(),"thead,tfoot,tbody,table",e),r=Dn(n.last(),"thead,tfoot,tbody,table",e);return t.bind(function(t){return r.bind(function(e){return Bt(t,e)?yo(n.table(),n.first(),n.last()):S.none()})})})},Oo="td["+(Do="data-mce-selected")+"],th["+Do+"]",Po="["+Do+"]",Mo="td["+(Bo="data-mce-first-selected")+"],th["+Bo+"]",Lo="td["+(Io="data-mce-last-selected")+"],th["+Io+"]",Fo={selected:kh(Do),selectedSelector:kh(Oo),attributeSelector:kh(Po),firstSelected:kh(Bo),firstSelectedSelector:kh(Mo),lastSelected:kh(Io),lastSelectedSelector:kh(Lo)},zo=(Ho=function(a){var u,n;if(!h(a))throw new Error("cases must be an array");if(0===a.length)throw new Error("there must be at least one case");return u=[],n={},N(a,function(e,r){var o,i,t=W(e);if(1!==t.length)throw new Error("one and only one name per case");if(o=t[0],i=e[o],void 0!==n[o])throw new Error("duplicate key detected:"+o);if("cata"===o)throw new Error("cannot have a case named cata (sorry)");if(!h(i))throw new Error("case arguments must be an array");u.push(o),n[o]=function(){var n,e,t=arguments.length;if(t!==i.length)throw new Error("Wrong number of arguments to case "+o+". Expected "+i.length+" ("+i+"), got "+t);for(n=new Array(t),e=0;e<n.length;e++)n[e]=arguments[e];return{fold:function(){if(arguments.length!==a.length)throw new Error("Wrong number of arguments to fold. Expected "+a.length+", got "+arguments.length);return arguments[r].apply(null,n)},match:function(e){var t=W(e);if(u.length!==t.length)throw new Error("Wrong number of arguments to match. Expected: "+u.join(",")+"\nActual: "+t.join(","));if(!I(u,function(e){return x(t,e)}))throw new Error("Not all branches were specified when using match. Specified: "+t.join(", ")+"\nRequired: "+u.join(", "));return e[o].apply(null,n)},log:function(e){s.console.log(e,{constructors:u,constructor:o,params:n})}}}}),n})([{none:[]},{multiple:["elements"]},{single:["selection"]}]),Wo={cata:function(e,t,n,r){return e.fold(t,n,r)},none:zo.none,multiple:zo.multiple,single:zo.single},jo=function(n,e){return Wo.cata(e.get(),S.none,function(t,e){return 0===t.length?S.none():Ao(n,Fo.firstSelectedSelector(),Fo.lastSelectedSelector()).bind(function(e){return 1<t.length?S.some({bounds:kh(e),cells:kh(t)}):S.none()})},S.none)},Vo=function(e,t){var n=function(e){return ge(e,"rowspan")&&1<parseInt(me(e,"rowspan"),10)||ge(e,"colspan")&&1<parseInt(me(e,"colspan"),10)},r=Uo(e,t);return 0<r.length&&I(r,n)?S.some(r):S.none()},qo=Uo=function(e,t){return Wo.cata(t.get(),kh([]),Rh,kh([e]))},$o=function(e){return{element:kh(e),mergable:S.none,unmergable:S.none,selection:kh([e])}},Yo=function(e,t,n){return{element:kh(n),mergable:kh(jo(t,e)),unmergable:kh(Vo(n,e)),selection:kh(qo(n,e))}},Xo=function(e){return $o(e)},Ko=q("element","clipboard","generators"),Go={noMenu:$o,forMenu:Yo,notCell:Xo,paste:Ko,pasteRows:function(e,t,n,r,o){return{element:kh(n),mergable:S.none,unmergable:S.none,selection:kh(qo(n,e)),clipboard:kh(r),generators:kh(o)}}},Jo=function(e){return $n.table(e[0]).map(br).map(function(e){return[rr(e,Fo.attributeSelector())]})},Qo=function(t,e){return C(e,function(e){return t.selection.serializer.serialize(e.dom(),{})}).join("")},Zo=function(e){return C(e,function(e){return e.dom().innerText}).join("")},ei=function(u,e,s,c){u.on("BeforeGetContent",function(t){!0===t.selection&&Wo.cata(e.get(),Th,function(e){t.preventDefault(),Jo(e).each(function(e){t.content="text"===t.format?Zo(e):Qo(u,e)})},Th)}),u.on("BeforeSetContent",function(a){!0===a.selection&&!0===a.paste&&S.from(u.dom.getParent(u.selection.getStart(),"th,td")).each(function(e){var i=Ne.fromDom(e);$n.table(i).each(function(t){var e,n,r,o=E(Rr(a.content),function(e){return"meta"!==re(e)});1===o.length&&"table"===re(o[0])&&(a.preventDefault(),e=Ne.fromDom(u.getDoc()),n=kr(e),r=Go.paste(i,o[0],n),s.pasteCells(t,r).each(function(e){u.selection.setRng(e),u.focus(),c.clear(t)}))})})})},ti=Oh("height",function(e){var t=e.dom();return Te(e)?t.getBoundingClientRect().height:t.offsetHeight}),ni=function(e){return ti.get(e)},ri=function(e){return ti.getOuter(e)},oi=Oh("width",function(e){return e.dom().offsetWidth}),ii=function(e){return oi.get(e)},ai=function(e){return oi.getOuter(e)},ui=kt.detect(),si=function(){return ui.browser.isIE()||ui.browser.isEdge()},ci=function(e,t){var n=parseFloat(e);return isNaN(n)?t:n},li=function(e,t,n){return ci(Oe(e,t),n)},fi=function(e){var t=li(e,"padding-top",0),n=li(e,"padding-bottom",0),r=li(e,"border-top-width",0),o=li(e,"border-bottom-width",0),i=e.dom().getBoundingClientRect().height,a=Oe(e,"box-sizing"),u=r+o;return"border-box"===a?i:i-t-n-u},di=function(e){return si()?fi(e):li(e,"height",ni(e))},mi=/(\d+(\.\d+)?)(\w|%)*/,hi=/(\d+(\.\d+)?)px|em/,pi=function(e,t){Ae(e,"width",t+"px")},vi=function(e,t){Ae(e,"width",t+"%")},bi=function(e,t){Ae(e,"height",t+"px")},yi=function(e){return Be(e,"height").getOrThunk(function(){return di(e)+"px"})},xi=function(e,n,r,t){var o=$n.table(e).map(function(e){var t=r(e);return Math.floor(n/100*t)}).getOr(n);return t(e,o),o},wi=function(e,t,n,r){var o=parseInt(e,10);return ye(e,"%")&&"table"!==re(t)?xi(t,o,n,r):o},Ci=function(e){var t=yi(e);return t?wi(t,e,ni,bi):ni(e)},Si=function(e,t,n){var r=n(e),o=Ni(e,t);return r/o},Ni=function(e,t){return ge(e,t)?parseInt(me(e,t),10):1},Ti=function(e){return Be(e,"width").fold(function(){return S.from(me(e,"width"))},function(e){return S.some(e)})},Ei=function(e,t){return e/t.pixelWidth()*100},ki=function(e,t,n){var r,o;return gi.test(t)?(r=gi.exec(t),parseFloat(r[1])):(o=ii(e),Ei(o,n))},Ri=function(t,n){return Ti(t).fold(function(){var e=ii(t);return Ei(e,n)},function(e){return ki(t,e,n)})},_i=function(e,t){return e/100*t.pixelWidth()},Ai=function(e,t,n){var r,o,i;return hi.test(t)?(r=hi.exec(t),parseInt(r[1],10)):gi.test(t)?(o=gi.exec(t),i=parseFloat(o[1]),_i(i,n)):ii(e)},Di=function(t,n){return Ti(t).fold(function(){return ii(t)},function(e){return Ai(t,e,n)})},Oi=function(e){return Si(e,"rowspan",Ci)},Pi=function(e){return Ti(e).bind(function(e){if(mi.test(e)){var t=mi.exec(e);return S.some({width:kh(t[1]),unit:kh(t[3])})}return S.none()})},Bi=function(e,t,n){Ae(e,"width",t+n)},Mi={percentageBasedSizeRegex:kh(gi=/(\d+(\.\d+)?)%/),pixelBasedSizeRegex:kh(hi),setPixelWidth:pi,setPercentageWidth:vi,setHeight:bi,getPixelWidth:Di,getPercentageWidth:Ri,getGenericWidth:Pi,setGenericWidth:Bi,getHeight:Oi,getRawWidth:Ti},Ii=function(n,r){Mi.getGenericWidth(n).each(function(e){var t=e.width()/2;Mi.setGenericWidth(n,t,e.unit()),Mi.setGenericWidth(r,t,e.unit())})},Li=function(e,t){var n=t||Ne.fromDom(s.document.documentElement);return kn(e,_h(Bt,n)).isSome()},Fi=function(e){var t=e.dom();return t===t.window&&e instanceof s.Window?e:ce(e)?t.defaultView||t.parentWindow:null},zi=Hi=function(n,r){return{left:kh(n),top:kh(r),translate:function(e,t){return Hi(n+e,r+t)}}},Wi=function(e){var t=e.getBoundingClientRect();return zi(t.left,t.top)},Ui=function(e,t){return void 0!==e?e:void 0!==t?t:0},ji=function(e){var t=e.dom().ownerDocument,n=t.body,r=Fi(Ne.fromDom(t)),o=t.documentElement,i=Ui(r.pageYOffset,o.scrollTop),a=Ui(r.pageXOffset,o.scrollLeft),u=Ui(o.clientTop,n.clientTop),s=Ui(o.clientLeft,n.clientLeft);return Vi(e).translate(a-s,i-u)},Vi=function(e){var t=e.dom(),n=t.ownerDocument,r=n.body,o=Ne.fromDom(n.documentElement);return r===t?zi(r.offsetLeft,r.offsetTop):Li(e,o)?Wi(t):zi(0,0)},qi=q("row","y"),$i=q("col","x"),Yi=function(e){return ji(e).left()+ai(e)},Xi=function(e){return ji(e).left()},Ki=function(e,t){return $i(e,Xi(t))},Gi=function(e,t){return $i(e,Yi(t))},Ji=function(e){return ji(e).top()},Zi=function(e,t){return-e},ea={delta:Rh,positions:_h(Qi=function(n,t,r){var e,o;return 0===r.length?[]:(e=C(r.slice(1),function(e,t){return e.map(function(e){return n(t,e)})}),o=r[r.length-1].map(function(e){return t(r.length-1,e)}),e.concat([o]))},function(e,t){return qi(e,Ji(t))},function(e,t){return qi(e,Ji(t)+ri(t))}),edge:Ji},ta={delta:Rh,edge:Xi,positions:_h(Qi,Ki,Gi)},na={delta:Zi,edge:Yi,positions:_h(Qi,Gi,Ki)},oa={ltr:(ra={height:ea,rtl:na,ltr:ta}).ltr,rtl:ra.rtl},ia=function(e){var t=Yn(e),n=Jn.generate(t);return n.grid()},aa=Object.prototype.hasOwnProperty,Sh=function(e,t){return t},ua=function(){var e,t,n,r,o,i=new Array(arguments.length);for(e=0;e<i.length;e++)i[e]=arguments[e];if(0===i.length)throw new Error("Can't merge zero objects");for(t={},n=0;n<i.length;n++)for(o in r=i[n])aa.call(r,o)&&(t[o]=Sh(t[o],r[o]));return t},sa=function(e){var t,n=[],r=function(e){n.push(e)};for(t=0;t<e.length;t++)e[t].each(r);return n},ca=function(e,t){var n,r;for(n=0;n<e.length;n++)if((r=t(e[n],n)).isSome())return r;return S.none()},la=function(e,t,n,r){n===r?he(e,t):fe(e,t,n)},fa=function(o,e){var i=[],a=[],n=function(e,t){var n,r=On(o,t).getOrThunk(function(){var e=Ne.fromTag(t,zt(o).dom());return Qt(o,e),e});rn(r),n=C(e,function(e){e.isNew()&&i.push(e.element());var t=e.element();return rn(t),N(e.cells(),function(e){e.isNew()&&a.push(e.element()),la(e.element(),"colspan",e.colspan(),1),la(e.element(),"rowspan",e.rowspan(),1),Qt(t,e.element())}),t}),nn(r,n)},r=function(e){On(o,e).each(on)},t=function(e,t){0<e.length?n(e,t):r(t)},u=[],s=[],c=[];return N(e,function(e){switch(e.section()){case"thead":u.push(e);break;case"tbody":s.push(e);break;case"tfoot":c.push(e)}}),t(u,"thead"),t(s,"tbody"),t(c,"tfoot"),{newRows:kh(i),newCells:kh(a)}},da=function(e){return C(e,function(e){var n=vr(e.element());return N(e.cells(),function(e){var t=br(e.element());la(t,"colspan",e.colspan(),1),la(t,"rowspan",e.rowspan(),1),Qt(n,t)}),n})},ma=function(e,t){var n=me(e,t);return void 0===n||""===n?[]:n.split(" ")},ga=function(e,t,n){var r=ma(e,t),o=r.concat([n]);return fe(e,t,o.join(" ")),!0},ha=function(e,t,n){var r=E(ma(e,t),function(e){return e!==n});return 0<r.length?fe(e,t,r.join(" ")):he(e,t),!1},pa=function(e){return void 0!==e.dom().classList},va=function(e){return ma(e,"class")},ba=function(e,t){return ga(e,"class",t)},ya=function(e,t){return ha(e,"class",t)},xa=function(e,t){pa(e)?e.dom().classList.add(t):ba(e,t)},wa=function(e){0===(pa(e)?e.dom().classList:va(e)).length&&he(e,"class")},Ca=function(e,t){pa(e)?e.dom().classList.remove(t):ya(e,t),wa(e)},Sa=function(e,t){return pa(e)&&e.dom().classList.contains(t)},Na=function(e,t){var n,r=[];for(n=0;n<e;n++)r.push(t(n));return r},Ta=function(e,t){var n,r=[];for(n=e;n<t;n++)r.push(n);return r},Ea=function(t,n){var e,r;return n<0||n>=t.length-1?S.none():(e=t[n].fold(function(){var e=F(t.slice(0,n));return ca(e,function(e,t){return e.map(function(e){return{value:e,delta:t+1}})})},function(e){return S.some({value:e,delta:0})}),r=t[n+1].fold(function(){var e=t.slice(n+1);return ca(e,function(e,t){return e.map(function(e){return{value:e,delta:t+1}})})},function(e){return S.some({value:e,delta:1})}),e.bind(function(n){return r.map(function(e){var t=e.delta+n.delta;return Math.abs(e.value-n.value)/t})}))},ka=function(o){var e=o.grid(),t=Ta(0,e.columns()),i=Ta(0,e.rows());return C(t,function(t){var e=function(){return M(i,function(e){return Jn.getAt(o,e,t).filter(function(e){return e.column()===t}).fold(kh([]),function(e){return[e]})})},n=function(e){return 1===e.colspan()},r=function(){return Jn.getAt(o,0,t)};return Ra(e,n,r)})},Ra=function(e,t,n){var r=e(),o=A(r,t),i=o.orThunk(function(){return S.from(r[0]).orThunk(n)});return i.map(function(e){return e.element()})},_a=ka,Aa=function(o){var e=o.grid(),t=Ta(0,e.rows()),i=Ta(0,e.columns());return C(t,function(t){var e=function(){return M(i,function(e){return Jn.getAt(o,t,e).filter(function(e){return e.row()===t}).fold(kh([]),function(e){return[e]})})},n=function(e){return 1===e.rowspan()},r=function(){return Jn.getAt(o,t,0)};return Ra(e,n,r)})},Oa={resolve:(Da=function(e){var t=e.replace(/\./g,"-"),n=function(e){return t+"-"+e};return{resolve:n}})("ephox-snooker").resolve},Pa=function(e,t,n,r,o){var i=Ne.fromTag("div");return De(i,{position:"absolute",left:t-r/2+"px",top:n+"px",height:o+"px",width:r+"px"}),de(i,{"data-column":e,role:"presentation"}),i},Ba=function(e,t,n,r,o){var i=Ne.fromTag("div");return De(i,{position:"absolute",left:t+"px",top:n-o/2+"px",height:o+"px",width:r+"px"}),de(i,{"data-row":e,role:"presentation"}),i},Ma=Oa.resolve("resizer-bar"),Ia=Oa.resolve("resizer-rows"),La=Oa.resolve("resizer-cols"),Fa=7,za=function(n,e,r){var o=n.origin();N(e,function(e,t){e.each(function(e){var t=r(o,e);xa(t,Ma),Qt(n.parent(),t)})})},Wa=function(e,t,r,o){za(e,t,function(e,t){var n=Pa(t.col(),t.x()-e.left(),r.top()-e.top(),Fa,o);return xa(n,La),n})},Ua=function(e,t,r,o){za(e,t,function(e,t){var n=Ba(t.row(),r.left()-e.left(),t.y()-e.top(),o,Fa);return xa(n,Ia),n})},ja=function(e,t,n,r,o,i){var a,u=ji(t),s=0<n.length?o.positions(n,t):[];Ua(e,s,u,ai(t)),a=0<r.length?i.positions(r,t):[],Wa(e,a,u,ri(t))},Va=function(e,t){var n=En(e.parent(),"."+Ma);N(n,t)},qa={refresh:function(e,t,n,r){var o,i,a,u;Ha(e),o=Yn(t),i=Jn.generate(o),a=Aa(i),u=_a(i),ja(e,t,a,u,n,r)},hide:function(e){Va(e,function(e){Ae(e,"display","none")})},show:function(e){Va(e,function(e){Ae(e,"display","block")})},destroy:Ha=function(e){var t=En(e.parent(),"."+Ma);N(t,on)},isRowBar:function(e){return Sa(e,Ia)},isColBar:function(e){return Sa(e,La)}},Xa=function(e,t){return Ya(e,t).element()},Ka={addCell:function(e,t,n){var r=e.cells(),o=r.slice(0,t),i=r.slice(t),a=o.concat([n]).concat(i);return $a(e,a)},setCells:$a=function(e,t){return xn.rowcells(t,e.section())},mutateCell:function(e,t,n){e.cells()[t]=n},getCell:Ya=function(e,t){return e.cells()[t]},getCellElement:Xa,mapCells:function(e,t){var n=e.cells(),r=C(n,t);return xn.rowcells(r,e.section())},cellLength:function(e){return e.cells().length}},Ga=function(e,t){return C(e,function(e){return Ka.getCell(e,t)})},Ja=function(e,t){return e[t]},Qa=function(e,t){var n;return 0===e.length?0:(n=e[0],D(e,function(e){return!t(n.element(),e.element())}).fold(function(){return e.length},function(e){return e}))},Za=function(e,t,n,r){var o=Ja(e,t).cells().slice(n),i=Qa(o,r),a=Ga(e,n).slice(t),u=Qa(a,r);return{colspan:kh(i),rowspan:kh(u)}},eu=function(o,i){var a=C(o,function(e,t){return C(e.cells(),function(e,t){return!1})}),u=function(e,t,n,r){var o,i;for(o=e;o<e+n;o++)for(i=t;i<t+r;i++)a[o][i]=!0};return C(o,function(e,r){var t=M(e.cells(),function(e,t){if(!1!==a[r][t])return[];var n=Za(o,r,t,i);return u(r,t,n.rowspan(),n.colspan()),[xn.detailnew(e.element(),n.rowspan(),n.colspan(),e.isNew())]});return xn.rowdetails(t,e.section())})},tu=function(e,t,n){var r,o,i,a,u,s=[];for(r=0;r<e.grid().rows();r++){for(o=[],i=0;i<e.grid().columns();i++)a=Jn.getAt(e,r,i).map(function(e){return xn.elementnew(e.element(),n)}).getOrThunk(function(){return xn.elementnew(t.gap(),!0)}),o.push(a);u=xn.rowcells(o,e.all()[r].section()),s.push(u)}return s},nu=function(e,t){return tu(e,t,!1)},ru=function(e,r){return C(e,function(e){var t,n=(t=e.details(),ca(t,function(e){return Ut(e.element()).map(function(e){var t=Ut(e).isNone();return xn.elementnew(e,t)})}).getOrThunk(function(){return xn.elementnew(r.row(),!0)}));return xn.rowdatanew(n.element(),e.details(),e.section(),n.isNew())})},iu=function(e,t){var n=B(C(e.all(),function(e){return e.cells()}));return A(n,function(e){return Bt(t,e.element())})},au=function(s,c,l,f,d){return function(n,r,e,o,i){var t=Yn(r),a=Jn.generate(t),u=c(a,e).map(function(e){var t=nu(a,o),n=s(t,e,Bt,d(o)),r=ou(n.grid(),o);return{grid:kh(r),cursor:n.cursor}});return u.fold(function(){return S.none()},function(e){var t=fa(r,e.grid());return l(r,e.grid(),i),f(r),qa.refresh(n,r,ra.height,i),S.some({cursor:e.cursor,newRows:t.newRows,newCells:t.newCells})})}},uu=ou=function(e,t){var n=eu(e,Bt);return ru(n,t)},su=function(t,e){return $n.cell(e.element()).bind(function(e){return iu(t,e)})},cu=function(t,e){var n=C(e.selection(),function(e){return $n.cell(e).bind(function(e){return iu(t,e)})}),r=sa(n);return 0<r.length?S.some(r):S.none()},lu=function(t,n){return $n.cell(n.element()).bind(function(e){return iu(t,e).map(function(e){return ua(e,{generators:n.generators,clipboard:n.clipboard})})})},fu=function(t,e){var n=C(e.selection(),function(e){return $n.cell(e).bind(function(e){return iu(t,e)})}),r=sa(n);return 0<r.length?S.some(ua({cells:r},{generators:e.generators,clipboard:e.clipboard})):S.none()},du=function(e,t){return t.mergable()},mu=function(e,t){return t.unmergable()},pu={value:gu=function(n){var e=function(e){return n===e},t=function(e){return gu(n)},r=function(e){return gu(n)},o=function(e){return gu(e(n))},i=function(e){return gu(n)},a=function(e){e(n)},u=function(e){return e(n)},s=function(e,t){return t(n)},c=function(e){return e(n)},l=function(e){return e(n)},f=function(){return S.some(n)};return{is:e,isValue:b,isError:d,getOr:kh(n),getOrThunk:kh(n),getOrDie:kh(n),or:t,orThunk:r,fold:s,map:o,mapError:i,each:a,bind:u,exists:c,forall:l,toOption:f}},error:hu=function(n){var e=function(e){return e()},t=function(){return c(String(n))()},r=function(e){return e},o=function(e){return e()},i=function(e){return hu(n)},a=function(e){return hu(e(n))},u=function(e){return hu(n)},s=function(e,t){return e(n)};return{is:d,isValue:d,isError:b,getOr:Rh,getOrThunk:e,getOrDie:t,or:r,orThunk:o,fold:s,map:i,mapError:a,each:Th,bind:u,exists:d,forall:b,toOption:S.none}}},vu=function(e,t){return C(e,function(){return xn.elementnew(t.cell(),!0)})},bu=function(t,e,n){return t.concat(Na(e,function(e){return Ka.setCells(t[t.length-1],vu(t[t.length-1].cells(),n))}))},yu=function(e,t,n){return C(e,function(e){return Ka.setCells(e,e.cells().concat(vu(Ta(0,t),n)))})},xu=function(e,t,n){var r,o,i,a;return e.row()>=t.length||e.column()>Ka.cellLength(t[0])?pu.error("invalid start address out of table bounds, row: "+e.row()+", column: "+e.column()):(o=(r=t.slice(e.row()))[0].cells().slice(e.column()),i=Ka.cellLength(n[0]),a=n.length,pu.value({rowDelta:kh(r.length-a),colDelta:kh(o.length-i)}))},wu=function(e,t){var n=Ka.cellLength(e[0]),r=Ka.cellLength(t[0]);return{rowDelta:kh(0),colDelta:kh(n-r)}},Cu=function(e,t,n){var r=t.colDelta()<0?yu:Rh,o=t.rowDelta()<0?bu:Rh,i=r(e,Math.abs(t.colDelta()),n),a=o(i,Math.abs(t.rowDelta()),n);return a},Su=function(e,n){return _(e,function(e,t){return w(e,function(e){return n(e.element(),t.element())})?e:e.concat([t])},[])},Nu=function(e,t,n,r){var o,i;if(0===e.length)return e;for(o=t.startRow();o<=t.finishRow();o++)for(i=t.startCol();i<=t.finishCol();i++)Ka.mutateCell(e[o],i,xn.elementnew(r(),!1));return e},Tu=function(e,t,n,r){var o,i,a,u=!0;for(o=0;o<e.length;o++)for(i=0;i<Ka.cellLength(e[0]);i++)!0===(a=n(Ka.getCellElement(e[o],i),t))&&!1===u?Ka.mutateCell(e[o],i,xn.elementnew(r(),!0)):!0===a&&(u=!1);return e},Eu=function(a,n,u,s){var e,t;return 0<n&&n<a.length&&(e=a[n-1].cells(),t=Su(e,u),N(t,function(o){var e,i=S.none(),t=function(r){var e,t=function(t){var e=a[r].cells()[t],n=u(e.element(),o.element());n&&(i.isNone()&&(i=S.some(s())),i.each(function(e){Ka.mutateCell(a[r],t,xn.elementnew(e,!0))}))};for(e=0;e<Ka.cellLength(a[0]);e++)t(e)};for(e=n;e<a.length;e++)t(e)})),a},ku=function(e,t,n,r){var o=Ka.getCell(e[t],n),i=_h(r,o.element()),a=e[t];return 1<e.length&&1<Ka.cellLength(a)&&(0<n&&i(Ka.getCellElement(a,n-1))||n<a.length-1&&i(Ka.getCellElement(a,n+1))||0<t&&i(Ka.getCellElement(e[t-1],n))||t<e.length-1&&i(Ka.getCellElement(e[t+1],n)))},Ru=function(e,t,n,r,o){var i,a,u,s,c=e.row(),l=e.column(),f=n.length,d=Ka.cellLength(n[0]),m=c+f,g=l+d;for(i=c;i<m;i++)for(a=l;a<g;a++)ku(t,i,a,o)&&Tu(t,Ka.getCellElement(t[i],a),o,r.cell),u=Ka.getCellElement(n[i-c],a-l),s=r.replace(u),Ka.mutateCell(t[i],a,xn.elementnew(s,!0));return t},_u=function(n,r,o,i,a){return xu(n,r,o).map(function(e){var t=Cu(r,e,i);return Ru(n,t,o,i,a)})},Au=function(e,t,n,r,o){var i,a,u,s;return Eu(t,e,o,r.cell),i=wu(n,t),a=Cu(n,i,r),u=wu(t,a),(s=Cu(t,u,r)).slice(0,e).concat(a).concat(s.slice(e,s.length))},Du=function(o,i,e,a,u){var t=o.slice(0,i),n=o.slice(i),r=Ka.mapCells(o[e],function(e,t){var n=0<i&&i<o.length&&a(Ka.getCellElement(o[i-1],t),Ka.getCellElement(o[i],t)),r=n?Ka.getCell(o[i],t):xn.elementnew(u(e.element(),a),!0);return r});return t.concat([r]).concat(n)},Ou=function(e,r,o,i,a){return C(e,function(e){var t=0<r&&r<Ka.cellLength(e)&&i(Ka.getCellElement(e,r-1),Ka.getCellElement(e,r)),n=t?Ka.getCell(e,r):xn.elementnew(a(Ka.getCellElement(e,o),i),!0);return Ka.addCell(e,r,n)})},Pu=function(e,o,i,a,u){var s=i+1;return C(e,function(e,t){var n=t===o,r=n?xn.elementnew(u(Ka.getCellElement(e,i),a),!0):Ka.getCell(e,i);return Ka.addCell(e,s,r)})},Bu=function(e,t,n,r,o){var i=t+1,a=e.slice(0,i),u=e.slice(i),s=Ka.mapCells(e[t],function(e,t){return t===n?xn.elementnew(o(e.element(),r),!0):e});return a.concat([s]).concat(u)},Mu=function(e,t,n){return e.slice(0,t).concat(e.slice(n+1))},Iu=function(e,n,r){var t=C(e,function(e){var t=e.cells().slice(0,n).concat(e.cells().slice(r+1));return xn.rowcells(t,e.section())});return E(t,function(e){return 0<e.cells().length})},Lu=function(e){return e.dom().textContent},Fu=function(e,n,r,o){return C(e,function(e){return Ka.mapCells(e,function(e){return t=e,w(n,function(e){return r(t.element(),e.element())})?xn.elementnew(o(e.element(),r),!0):e;var t})})},Hu=function(e,t,n,r){return void 0!==Ka.getCellElement(e[t],n)&&0<t&&r(Ka.getCellElement(e[t-1],n),Ka.getCellElement(e[t],n))},zu=function(e,t,n){return 0<t&&n(Ka.getCellElement(e,t-1),Ka.getCellElement(e,t))},Wu=function(n,r,o,e){var t=M(n,function(e,t){return Hu(n,t,r,o)||zu(e,r,o)?[]:[Ka.getCell(e,r)]});return Fu(n,t,o,e)},Uu=function(n,r,o,e){var i=n[r],t=M(i.cells(),function(e,t){return Hu(n,r,t,o)||zu(i,t,o)?[]:[e]});return Fu(n,t,o,e)},ju=function(e,r,o,i){var t=k(e,function(e){return re(Ka.getCell(e,r).element())}),n=function(e){var t=C(e,function(e){var t=Ka.getCell(e,r),n=Lu(t.element());return{row:e,text:n}}),n=H(t,function(e,t){var n=o(e.text,t.text);return i?n:-1*n});return C(n,function(e){return e.row})};return M(t,function(e){return"th"===re(Ka.getCell(e[0],r).element())?e:n(e)})},Vu=function(e,t,o,i){var n=e[t].cells(),r=C(n,function(e){return Lu(e.element())}),a=function(e){return{zippedCells:C(e.cells(),function(e,t){return{cell:e,reference:n[t],referenceText:r[t]}}),section:e.section()}},u=function(e){var t=k(e.zippedCells,function(e){return re(e.reference.element())}),n=M(t,function(e){return"th"===re(e[0].reference.element())?e:H(e,function(e,t){var n=o(e.referenceText,t.referenceText);return i?n:-1*n})}),r=C(n,function(e){return e.cell});return xn.rowcells(r,e.section)},s=C(e,a),c=C(s,u);return c},qu=function(){return Gu(function(e,t,n,r,o){return e()})},$u=function(i){return Gu(function(e,t,n,r,o){return t(i)})},Yu=function(i,a){return Gu(function(e,t,n,r,o){return n(i,a)})},Xu=function(i,a,u){return Gu(function(e,t,n,r,o){return r(i,a,u)})},Ku=function(i,a){return Gu(function(e,t,n,r,o){return o(i,a)})},Gu=function(e){return{fold:e}},Ju=qu,Qu=$u,Zu=Yu,es=Xu,ts=Ku,ns=function(e,t){return 0===e.length?Ju():1===e.length?Qu(0):0===t?Zu(0,1):t===e.length-1?ts(t-1,t):0<t&&t<e.length-1?es(t-1,t,t+1):Ju()},rs=function(e,t,i,a){var u=e.slice(0),n=ns(e,t),s=function(e){return C(e,kh(0))},r=kh(s(u)),o=function(e){return a.singleColumnWidth(u[e],i)},c=function(e,t){var n,r,o;return 0<=i?(n=Math.max(a.minCellWidth(),u[t]-i),s(u.slice(0,e)).concat([i,n-u[t]]).concat(s(u.slice(t+1)))):(r=Math.max(a.minCellWidth(),u[e]+i),o=u[e]-r,s(u.slice(0,e)).concat([r-u[e],o]).concat(s(u.slice(t+1))))},l=c,f=function(e,t,n){return c(t,n)},d=function(e,t){if(0<=i)return s(u.slice(0,t)).concat([i]);var n=Math.max(a.minCellWidth(),u[t]+i);return s(u.slice(0,t)).concat([n-u[t]])};return n.fold(r,o,l,f,d)},os=function(e,t){return ge(e,t)&&1<parseInt(me(e,t),10)},is=function(e,t){return parseInt(Oe(e,t),10)},as={hasColspan:function(e){return os(e,"colspan")},hasRowspan:function(e){return os(e,"rowspan")},minWidth:kh(10),minHeight:kh(10),getInt:is},us=function(e,t,n){return Be(e,t).fold(function(){return n(e)+"px"},function(e){return e})},ss=function(e){return us(e,"width",Mi.getPixelWidth)},cs=function(e){return us(e,"height",Mi.getHeight)},ls=function(e,t,n,r,o){var i=_a(e),a=C(i,function(e){return e.map(t.edge)});return C(i,function(e,t){return e.filter(p(as.hasColspan)).fold(function(){var e=Ea(a,t);return r(e)},function(e){return n(e,o)})})},fs=function(e){return e.map(function(e){return e+"px"}).getOr("")},ds=function(e,t,n,r){var o=Aa(e),i=C(o,function(e){return e.map(t.edge)});return C(o,function(e,t){return e.filter(p(as.hasRowspan)).fold(function(){var e=Ea(i,t);return r(e)},function(e){return n(e)})})},ms={getRawWidths:function(e,t){return ls(e,t,ss,fs)},getPixelWidths:function(e,t,n){return ls(e,t,Mi.getPixelWidth,function(e){return e.getOrThunk(n.minCellWidth)},n)},getPercentageWidths:function(e,t,n){return ls(e,t,Mi.getPercentageWidth,function(e){return e.fold(function(){return n.minCellWidth()},function(e){return e/n.pixelWidth()*100})},n)},getPixelHeights:function(e,t){return ds(e,t,Mi.getHeight,function(e){return e.getOrThunk(as.minHeight)})},getRawHeights:function(e,t){return ds(e,t,cs,fs)}},gs=function(e,t,n){var r,o=0;for(r=e;r<t;r++)o+=void 0!==n[r]?n[r]:0;return o},hs=function(e,n){var t=Jn.justCells(e);return C(t,function(e){var t=gs(e.column(),e.column()+e.colspan(),n);return{element:e.element,width:kh(t),colspan:e.colspan}})},ps=function(e,n){var t=Jn.justCells(e);return C(t,function(e){var t=gs(e.row(),e.row()+e.rowspan(),n);return{element:e.element,height:kh(t),rowspan:e.rowspan}})},vs=function(e,n){return C(e.all(),function(e,t){return{element:e.element,height:kh(n[t])}})},bs=function(e,t){var o=parseFloat(e),n=ii(t),r=function(e){return e/n*100},i=function(e,t){return[100-e]},a=function(){return as.minWidth()/n*100},u=function(e,t,n){var r=o+n;Mi.setPercentageWidth(e,r)};return{width:kh(o),pixelWidth:kh(n),getWidths:ms.getPercentageWidths,getCellDelta:r,singleColumnWidth:i,minCellWidth:a,setElementWidth:Mi.setPercentageWidth,setTableWidth:u}},ys=function(e){var t=parseInt(e,10),n=Rh,r=function(e,t){return[Math.max(as.minWidth(),e+t)-e]},o=function(e,t,n){var r=R(t,function(e,t){return e+t},0);Mi.setPixelWidth(e,r)};return{width:kh(t),pixelWidth:kh(t),getWidths:ms.getPixelWidths,getCellDelta:n,singleColumnWidth:r,minCellWidth:as.minWidth,setElementWidth:Mi.setPixelWidth,setTableWidth:o}},xs=function(e,t){var n,r,o;return Mi.percentageBasedSizeRegex().test(t)?(n=Mi.percentageBasedSizeRegex().exec(t),bs(n[1],e)):Mi.pixelBasedSizeRegex().test(t)?(r=Mi.pixelBasedSizeRegex().exec(t),ys(r[1])):(o=ii(e),ys(o))},ws=function(t){return Mi.getRawWidth(t).fold(function(){var e=ii(t);return ys(e)},function(e){return xs(t,e)})},Cs=function(e){return Jn.generate(e)},Ss=function(e){return R(e,function(e,t){return e+t},0)},Ns=function(e){var t=Yn(e);return Cs(t)},Ts=function(e,t,n,r){var o=ws(e),i=o.getCellDelta(t),a=Ns(e),u=o.getWidths(a,r,o),s=rs(u,n,i,o),c=C(s,function(e,t){return e+u[t]}),l=hs(a,c);N(l,function(e){o.setElementWidth(e.element(),e.width())}),n===a.grid().columns()-1&&o.setTableWidth(e,c,i)},Es=function(e,n,r,t){var o,i=Ns(e),a=ms.getPixelHeights(i,t),u=C(a,function(e,t){return r===t?Math.max(n+e,as.minHeight()):e}),s=ps(i,u),c=vs(i,u);N(c,function(e){Mi.setHeight(e.element(),e.height())}),N(s,function(e){Mi.setHeight(e.element(),e.height())}),o=Ss(u),Mi.setHeight(e,o)},ks=function(e,t,n){var r,o=ws(e),i=Cs(t),a=o.getWidths(i,n,o),u=hs(i,a);N(u,function(e){o.setElementWidth(e.element(),e.width())}),r=R(a,function(e,t){return t+e},0),0<u.length&&o.setTableWidth(e,r)},Rs=function(e){var t=e,n=function(){return t},r=function(e){t=e},o=function(){return Rs(n())};return{get:n,set:r,clone:o}},_s=function(e,t){return As(e,t,{validate:v,label:"function"})},As=function(o,i,a){if(0===i.length)throw new Error("You must specify at least one required field.");return K("required",i),J(i),function(t){var e,n=W(t),r=I(i,function(e){return x(n,e)});return r||Y(i,n),o(i,n),0<(e=E(i,function(e){return!a.validate(t[e],e)})).length&&G(e,a.label),t}},Ds=function(t,e){var n=E(e,function(e){return!x(t,e)});0<n.length&&X(n)},Ps=function(e){var t=ge(e,"colspan")?parseInt(me(e,"colspan"),10):1,n=ge(e,"rowspan")?parseInt(me(e,"rowspan"),10):1;return{element:kh(e),colspan:kh(t),rowspan:kh(n)}},Bs=function(t,e){var n,r,o,i,a,u;return Ls(t),n=Rs(S.none()),r=void 0!==e?e:Ps,o=function(e){return t.cell(e)},i=function(e){var t=r(e);return o(t)},a=function(e){var t=i(e);return n.get().isNone()&&n.set(S.some(t)),u=S.some({item:e,replacement:t}),t},u=S.none(),{getOrInit:function(t,n){return u.fold(function(){return a(t)},function(e){return n(t,e.item)?e.replacement:a(t)})},cursor:n.get}},Ms=function(a,u){return function(n){var r,e,o,i=Rs(S.none());return Ls(n),r=[],e=function(t,n){return A(r,function(e){return n(e.item,t)})},o=function(e){var t=n.replace(e,u,{scope:a});return r.push({item:e,sub:t}),i.get().isNone()&&i.set(S.some(t)),t},{replaceOrInit:function(t,n){return e(t,n).fold(function(){return o(t)},function(e){return n(t,e.item)?e.sub:o(t)})},cursor:i.get}}},Is=function(n){var e;return Ls(n),{combine:function(t){return e.get().isNone()&&e.set(S.some(t)),function(){var e=n.cell({element:kh(t),colspan:kh(1),rowspan:kh(1)});return Me(e,"width"),Me(t,"width"),e}},cursor:(e=Rs(S.none())).get}},Ls=(Os=function(e){return _s(Ds,e)})(["cell","row","replace","gap"]),Fs=Bs,Hs=Ms,zs=Is,Ws=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Vs=function(e,t){return!(Us(e,t)||js(e,t))&&"li"!==e.property().name(t)},qs=Us=function(e,t){var n=e.property().name(t);return x(Ws,n)},$s=function(e,t){var n=e.property().name(t);return x(["ol","ul"],n)},Ys=js=function(e,t){return x(["br","img","hr","input"],e.property().name(t))},Xs=Dh(),Ks=function(e){return qs(Xs,e)},Gs=function(e){return $s(Xs,e)},Js=function(e){return Ys(Xs,e)},Qs=function(t){var o=function(e){return"br"===re(e)},n=function(e){return I(e,function(e){return o(e)||se(e)&&0===ir(e).trim().length})},i=function(e){return"li"===re(e)||kn(e,Gs).isSome()},e=function(e){return qt(e).map(function(e){return!!Ks(e)||(Js(e)?"img"!==re(e):void 0)}).getOr(!1)},r=function(r){return gr(r).bind(function(t){var n=e(t);return Ut(t).map(function(e){return!0===n||i(e)||o(t)||Ks(e)&&!Bt(r,e)?[]:[Ne.fromTag("br")]})}).getOr([])},a=function(){var e=M(t,function(e){var t=$t(e);return n(t)?[]:t.concat(r(e))});return 0===e.length?[Ne.fromTag("br")]:e},u=a();rn(t[0]),nn(t[0],u)},Zs=function(e){0===$n.cells(e).length&&on(e)},ec=q("grid","cursor"),tc=function(e,t,n){return nc(e,t,n).orThunk(function(){return nc(e,0,0)})},nc=function(e,t,n){return S.from(e[t]).bind(function(e){return S.from(e.cells()[n]).bind(function(e){return S.from(e.element())})})},rc=function(e,t,n){return ec(e,nc(e,t,n))},oc=function(e){return _(e,function(e,t){return w(e,function(e){return e.row()===t.row()})?e:e.concat([t])},[]).sort(function(e,t){return e.row()-t.row()})},ic=function(e){return _(e,function(e,t){return w(e,function(e){return e.column()===t.column()})?e:e.concat([t])},[]).sort(function(e,t){return e.column()-t.column()})},ac=function(e,t,n,r){var o=t[0].row(),i=t[0].row(),a=oc(t),u=_(a,function(e,t){return Du(e,i,o,n,r.getOrInit)},e);return rc(u,i,t[0].column())},uc=function(e,t,n,r){var o=t.row(),i=t.row()+t.rowspan(),a=Du(e,i,o,n,r.getOrInit);return rc(a,i,t.column())},sc=function(e,t,n,r){var o=oc(t),i=o[o.length-1].row(),a=o[o.length-1].row()+o[o.length-1].rowspan(),u=_(o,function(e,t){return Du(e,a,i,n,r.getOrInit)},e);return rc(u,a,t[0].column())},cc=function(e,t,n,r){var o=t.column(),i=t.column(),a=Ou(e,i,o,n,r.getOrInit);return rc(a,t.row(),i)},lc=function(e,t,n,r){var o=ic(t),i=o[0].column(),a=o[0].column(),u=_(o,function(e,t){return Ou(e,a,i,n,r.getOrInit)},e);return rc(u,t[0].row(),a)},fc=function(e,t,n,r){var o=t.column(),i=t.column()+t.colspan(),a=Ou(e,i,o,n,r.getOrInit);return rc(a,t.row(),i)},dc=function(e,t,n,r){var o=t[t.length-1].column(),i=t[t.length-1].column()+t[t.length-1].colspan(),a=ic(t),u=_(a,function(e,t){return Ou(e,i,o,n,r.getOrInit)},e);return rc(u,t[0].row(),i)},mc=function(e,t,n,r){var o=Uu(e,t.row(),n,r.replaceOrInit);return rc(o,t.row(),t.column())},gc=function(e,t,n,r){var o=Wu(e,t.column(),n,r.replaceOrInit);return rc(o,t.row(),t.column())},hc=function(e,t,n,r){var o=Uu(e,t.row(),n,r.replaceOrInit);return rc(o,t.row(),t.column())},pc=function(e,t,n,r){var o=Wu(e,t.column(),n,r.replaceOrInit);return rc(o,t.row(),t.column())},vc=function(e,t,n,r){var o=Pu(e,t.row(),t.column(),n,r.getOrInit);return rc(o,t.row(),t.column())},bc=function(e,t,n,r){var o=Bu(e,t.row(),t.column(),n,r.getOrInit);return rc(o,t.row(),t.column())},yc=function(e,t,n,r){var o=ic(t),i=Iu(e,o[0].column(),o[o.length-1].column()),a=tc(i,t[0].row(),t[0].column());return ec(i,a)},xc=function(e,t,n,r){var o=oc(t),i=Mu(e,o[0].row(),o[o.length-1].row()),a=tc(i,t[0].row(),t[0].column());return ec(i,a)},wc=function(e,t,n,r){var o,i=t.cells();return Qs(i),o=Nu(e,t.bounds(),n,kh(i[0])),ec(o,S.from(i[0]))},Cc=function(e,t,n,r){var o=R(t,function(e,t){return Tu(e,t,n,r.combine(t))},e);return ec(o,S.from(t[0]))},Sc=function(e,n,t,r){var o=function(e,t){var n=Yn(e),r=Jn.generate(n);return tu(r,t,!0)},i=o(n.clipboard(),n.generators()),a=xn.address(n.row(),n.column()),u=_u(a,e,i,n.generators(),t);return u.fold(function(){return ec(e,S.some(n.element()))},function(e){var t=tc(e,n.row(),n.column());return ec(e,t)})},Nc=function(e,t,n){var r=Xn(e,n),o=Jn.generate(r);return tu(o,t,!0)},Tc=function(e,t,n,r){var o=e[t.cells[0].row()],i=t.cells[0].row(),a=Nc(t.clipboard(),t.generators(),o),u=Au(i,e,a,t.generators(),n),s=tc(u,t.cells[0].row(),t.cells[0].column());return ec(u,s)},Ec=function(e,t,n,r){var o=e[t.cells[0].row()],i=t.cells[t.cells.length-1].row()+t.cells[t.cells.length-1].rowspan(),a=Nc(t.clipboard(),t.generators(),o),u=Au(i,e,a,t.generators(),n),s=tc(u,t.cells[0].row(),t.cells[0].column());return ec(u,s)},kc=function(e,t,n,r){var o=ju(e,t.column(),n,r);return rc(o,t.row(),t.column())},Rc=function(e,t,n,r){var o=Vu(e,t.row(),n,r);return rc(o,t.row(),t.column())},_c=function(c){return function(e,t,n,r,o,i,a){var u=function(e,t,n,r){return c(e,t,i,a)},s=au(u,su,Th,Th,Fs);return s(e,t,n,r,o)}},Ac=ks,Dc={insertRowBefore:au(function(e,t,n,r){var o=t.row(),i=t.row(),a=Du(e,i,o,n,r.getOrInit);return rc(a,i,t.column())},su,Th,Th,Fs),insertRowsBefore:au(ac,cu,Th,Th,Fs),insertRowAfter:au(uc,su,Th,Th,Fs),insertRowsAfter:au(sc,cu,Th,Th,Fs),insertColumnBefore:au(cc,su,Ac,Th,Fs),insertColumnsBefore:au(lc,cu,Ac,Th,Fs),insertColumnAfter:au(fc,su,Ac,Th,Fs),insertColumnsAfter:au(dc,cu,Ac,Th,Fs),splitCellIntoColumns:au(vc,su,Ac,Th,Fs),splitCellIntoRows:au(bc,su,Th,Th,Fs),eraseColumns:au(yc,cu,Ac,Zs,Fs),eraseRows:au(xc,cu,Th,Zs,Fs),makeColumnHeader:au(gc,su,Th,Th,Hs("row","th")),unmakeColumnHeader:au(pc,su,Th,Th,Hs(null,"td")),makeRowHeader:au(mc,su,Th,Th,Hs("col","th")),unmakeRowHeader:au(hc,su,Th,Th,Hs(null,"td")),mergeCells:au(wc,du,Th,Th,zs),unmergeCells:au(Cc,mu,Ac,Th,zs),pasteCells:au(Sc,lu,Ac,Th,Fs),pasteRowsBefore:au(Tc,fu,Th,Th,Fs),pasteRowsAfter:au(Ec,fu,Th,Th,Fs),sortRows:_c(kc),sortColumns:_c(Rc)},Oc=function(e){return Ne.fromDom(e.getBody())},Pc=function(e){return e.getBoundingClientRect().width},Bc=function(e){return e.getBoundingClientRect().height},Mc=function(t){return function(e){return Bt(e,Oc(t))}},Ic=function(e){return e?e.replace(/px$/,""):""},Lc=function(e){return/^[0-9]+$/.test(e)&&(e+="px"),e},zc={isRtl:kh((Hc=function(e){return"rtl"===Oe(e,"direction")?"rtl":"ltr"},!(Fc=function(e){var t=En(e,"td[data-mce-style],th[data-mce-style]");he(e,"data-mce-style"),N(t,function(e){he(e,"data-mce-style")})})))},Wc={isRtl:kh(!0)},Uc={directionAt:function(e){return"rtl"===Hc(e)?Wc:zc}},jc=["tableprops","tabledelete","|","tableinsertrowbefore","tableinsertrowafter","tabledeleterow","|","tableinsertcolbefore","tableinsertcolafter","tabledeletecol"],Vc={"border-collapse":"collapse",width:"100%"},qc={border:"1"},$c=function(e){return e.getParam("table_default_attributes",qc,"object")},Yc=function(e){return e.getParam("table_default_styles",Vc,"object")},Xc=function(e){return e.getParam("table_resize_bars",!0,"boolean")},Kc=function(e){return e.getParam("table_tab_navigation",!0,"boolean")},Gc=function(e){return e.getParam("table_cell_advtab",!0,"boolean")},Jc=function(e){return e.getParam("table_row_advtab",!0,"boolean")},Qc=function(e){return e.getParam("table_advtab",!0,"boolean")},Zc=function(e){return e.getParam("table_appearance_options",!0,"boolean")},el=function(e){return e.getParam("table_grid",!0,"boolean")},tl=function(e){return e.getParam("table_style_by_css",!1,"boolean")},nl=function(e){return e.getParam("table_cell_class_list",[],"array")},rl=function(e){return e.getParam("table_row_class_list",[],"array")},ol=function(e){return e.getParam("table_class_list",[],"array")},il=function(e){return e.getParam("color_picker_callback")},al=function(e){return!1===e.getParam("table_responsive_width")},ul=function(e){var t=e.getParam("table_clone_elements");return r(t)?S.some(t.split(/[ ,]/)):Array.isArray(t)?S.some(t):S.none()},sl=function(e){var t=e.getParam("object_resizing",!0);return"table"===t||t},cl=function(e){var t=e.getParam("table_toolbar",jc);return""===t||!1===t?[]:r(t)?t.split(/[ ,]/):h(t)?t:[]},ll=function(e,t){return e.fire("newrow",{node:t})},fl=function(e,t){return e.fire("newcell",{node:t})},dl=function(e,t,n,r){e.fire("ObjectResizeStart",{target:t,width:n,height:r})},ml=function(e,t,n,r){e.fire("ObjectResized",{target:t,width:n,height:r})},gl=function(l,e){var n=function(e){return"table"===re(Oc(e))},t=function(e){var t=ia(e);return!1===n(l)||1<t.rows()},r=function(e){var t=ia(e);return!1===n(l)||1<t.columns()},f=ul(l),o=function(a,u,s,c){return function(e,t){var n,r,o,i;return Fc(e),n=c(),r=Ne.fromDom(l.getDoc()),o=Ph(Uc.directionAt),i=Er(s,r,f),u(e)?a(n,e,t,i,o).bind(function(e){return N(e.newRows(),function(e){ll(l,e.dom())}),N(e.newCells(),function(e){fl(l,e.dom())}),e.cursor().map(function(e){var t=l.dom.createRng();return t.setStart(e.dom(),0),t.setEnd(e.dom(),0),t})}):S.none()}},i=o(Dc.eraseRows,t,Th,e),a=o(Dc.eraseColumns,r,Th,e),u=o(Dc.insertRowsBefore,b,Th,e),s=o(Dc.insertRowsAfter,b,Th,e),c=o(Dc.insertColumnsBefore,b,Ii,e),d=o(Dc.insertColumnsAfter,b,Ii,e),m=o(Dc.mergeCells,b,Th,e),g=o(Dc.unmergeCells,b,Th,e),h=o(Dc.pasteRowsBefore,b,Th,e),p=o(Dc.pasteRowsAfter,b,Th,e),v=o(Dc.pasteCells,b,Th,e);return{deleteRow:i,deleteColumn:a,insertRowsBefore:u,insertRowsAfter:s,insertColumnsBefore:c,insertColumnsAfter:d,mergeCells:m,unmergeCells:g,pasteRowsBefore:h,pasteRowsAfter:p,pasteCells:v}},hl=function(e,t,o){var n=Yn(e),i=Jn.generate(n),r=cu(i,t);return r.map(function(e){var t=tu(i,o,!1),n=t.slice(e[0].row(),e[e.length-1].row()+e[e.length-1].rowspan()),r=uu(n,o);return da(r)})},pl=tinymce.util.Tools.resolve("tinymce.util.Tools"),vl=function(e,t,n){n&&e.formatter.apply("align"+n,{},t)},bl=function(e,t,n){n&&e.formatter.apply("valign"+n,{},t)},yl=function(t,n){pl.each("left center right".split(" "),function(e){t.formatter.remove("align"+e,{},n)})},xl=function(t,n){pl.each("top middle bottom".split(" "),function(e){t.formatter.remove("valign"+e,{},n)})},wl=function(o,e,i){var t=o.select("td,th",e),n=function(e,t){var n,r;for(n=0;n<t.length;n++)if(r=o.getStyle(t[n],i),void 0===e&&(e=r),e!==r)return"";return e},r=n(r,t);return r},Cl=function(e,t){t.control.rootControl.find("#style")[0].getEl().isEqualNode(s.document.activeElement)?Nl(e,t):Sl(e,t)},Tl={createStyleForm:function(n){var e=function(){var e=il(n);if(e)return function(t){return e.call(n,function(e){t.control.value(e).fire("change")},t.control.value())}};return{title:"Advanced",type:"form",defaults:{onchange:_h(Sl,n)},items:[{label:"Style",name:"style",type:"textbox",onchange:_h(Nl,n)},{type:"form",padding:0,formItemDefaults:{layout:"grid",alignH:["start","right"]},defaults:{size:7},items:[{label:"Border style",type:"listbox",name:"borderStyle",width:90,onselect:_h(Sl,n),values:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]},{label:"Border color",type:"colorbox",name:"borderColor",onaction:e()},{label:"Background color",type:"colorbox",name:"backgroundColor",onaction:e()}]}]}},buildListItems:function(e,r,t){var o=function(e,n){return n=n||[],pl.each(e,function(e){var t={text:e.text||e.title};e.menu?t.menu=o(e.menu):(t.value=e.value,r&&r(t)),n.push(t)}),n};return o(e,t||[])},updateStyleField:Sl=function(e,t){var n=e.dom,r=t.control.rootControl,o=r.toJSON(),i=n.parseStyle(o.style);i["border-style"]=o.borderStyle,i["border-color"]=o.borderColor,i["background-color"]=o.backgroundColor,i.width=o.width?Lc(o.width):"",i.height=o.height?Lc(o.height):"",r.find("#style").value(n.serializeStyle(n.parseStyle(n.serializeStyle(i))))},extractAdvancedStyles:function(e,t){var n=e.parseStyle(e.getAttrib(t,"style")),r={};return n["border-style"]&&(r.borderStyle=n["border-style"]),n["border-color"]&&(r.borderColor=n["border-color"]),n["background-color"]&&(r.backgroundColor=n["background-color"]),r.style=e.serializeStyle(n),r},updateAdvancedFields:Nl=function(e,t){var n=e.dom,r=t.control.rootControl,o=r.toJSON(),i=n.parseStyle(o.style);r.find("#borderStyle").value(i["border-style"]||""),r.find("#borderColor").value(i["border-color"]||""),r.find("#backgroundColor").value(i["background-color"]||""),r.find("#width").value(i.width||""),r.find("#height").value(i.height||"")},syncAdvancedStyleFields:Cl},El=function(e,t){delete e.dataset.mceStyle,e.style.cssText+=";"+t},kl=function(t,n){var e=t.dom,r={width:e.getStyle(n,"width")||e.getAttrib(n,"width"),height:e.getStyle(n,"height")||e.getAttrib(n,"height"),scope:e.getAttrib(n,"scope"),class:e.getAttrib(n,"class"),type:n.nodeName.toLowerCase(),style:"",align:"",valign:""};return pl.each("left center right".split(" "),function(e){t.formatter.matchNode(n,"align"+e)&&(r.align=e)}),pl.each("top middle bottom".split(" "),function(e){t.formatter.matchNode(n,"valign"+e)&&(r.valign=e)}),Gc(t)&&pl.extend(r,Tl.extractAdvancedStyles(e,n)),r},Rl=function(t,r,e){var n,o=t.dom;function i(e,t,n){(1===r.length||n)&&o.setAttrib(e,t,n)}function a(e,t,n){(1===r.length||n)&&o.setStyle(e,t,n)}Gc(t)&&Tl.syncAdvancedStyleFields(t,e),n=e.control.rootControl.toJSON(),t.undoManager.transact(function(){pl.each(r,function(e){i(e,"scope",n.scope),1===r.length?i(e,"style",n.style):El(e,n.style),i(e,"class",n.class),a(e,"width",Lc(n.width)),a(e,"height",Lc(n.height)),n.type&&e.nodeName.toLowerCase()!==n.type&&(e=o.rename(e,n.type)),1===r.length&&(yl(t,e),xl(t,e)),n.align&&vl(t,e,n.align),n.valign&&bl(t,e,n.valign)}),t.focus()})},_l=function(t){var e,n,r,o,i=[];i=t.dom.select("td[data-mce-selected],th[data-mce-selected]"),e=t.dom.getParent(t.selection.getStart(),"td,th"),!i.length&&e&&i.push(e),(e=e||i[0])&&(n=1<i.length?{width:"",height:"",scope:"",class:"",align:"",valign:"",style:"",type:e.nodeName.toLowerCase()}:kl(t,e),0<nl(t).length&&(r={name:"class",type:"listbox",label:"Class",values:Tl.buildListItems(nl(t),function(e){e.value&&(e.textStyle=function(){return t.formatter.getCssText({block:"td",classes:[e.value]})})})}),o={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",layout:"grid",columns:2,labelGapCalc:!1,padding:0,defaults:{type:"textbox",maxWidth:50},items:[{label:"Width",name:"width",onchange:_h(Tl.updateStyleField,t)},{label:"Height",name:"height",onchange:_h(Tl.updateStyleField,t)},{label:"Cell type",name:"type",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{label:"Scope",name:"scope",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{label:"H Align",name:"align",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"V Align",name:"valign",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}]}]},r]},Gc(t)?t.windowManager.open({title:"Cell properties",bodyType:"tabpanel",data:n,body:[{title:"General",type:"form",items:o},Tl.createStyleForm(t)],onsubmit:_h(Rl,t,i)}):t.windowManager.open({title:"Cell properties",data:n,body:o,onsubmit:_h(Rl,t,i)}))},Al=function(t,n){var e=t.dom,r={height:e.getStyle(n,"height")||e.getAttrib(n,"height"),scope:e.getAttrib(n,"scope"),class:e.getAttrib(n,"class"),align:"",style:"",type:n.parentNode.nodeName.toLowerCase()};return pl.each("left center right".split(" "),function(e){t.formatter.matchNode(n,"align"+e)&&(r.align=e)}),Jc(t)&&pl.extend(r,Tl.extractAdvancedStyles(e,n)),r},Dl=function(e,t,n){var r=e.getParent(t,"table"),o=t.parentNode,i=e.select(n,r)[0];i||(i=e.create(n),r.firstChild?"CAPTION"===r.firstChild.nodeName?e.insertAfter(i,r.firstChild):r.insertBefore(i,r.firstChild):r.appendChild(i)),i.appendChild(t),o.hasChildNodes()||e.remove(o)},Ol=function(t){var e,n,r,o,i=t.dom,a=[],u=i.getParent(t.selection.getStart(),"table"),s=i.getParent(t.selection.getStart(),"td,th");pl.each(u.rows,function(t){pl.each(t.cells,function(e){if(i.getAttrib(e,"data-mce-selected")||e===s)return a.push(t),!1})}),(e=a[0])&&(r=1<a.length?{height:"",scope:"",style:"",class:"",align:"",type:e.parentNode.nodeName.toLowerCase()}:Al(t,e),0<rl(t).length&&(n={name:"class",type:"listbox",label:"Class",values:Tl.buildListItems(rl(t),function(e){e.value&&(e.textStyle=function(){return t.formatter.getCssText({block:"tr",classes:[e.value]})})})}),o={type:"form",columns:2,padding:0,defaults:{type:"textbox"},items:[{type:"listbox",name:"type",label:"Row type",text:"Header",maxWidth:null,values:[{text:"Header",value:"thead"},{text:"Body",value:"tbody"},{text:"Footer",value:"tfoot"}]},{type:"listbox",name:"align",label:"Alignment",text:"None",maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height"},n]},Jc(t)?t.windowManager.open({title:"Row properties",data:r,bodyType:"tabpanel",body:[{title:"General",type:"form",items:o},Tl.createStyleForm(t)],onsubmit:_h(Bh,t,a,r)}):t.windowManager.open({title:"Row properties",data:r,body:o,onsubmit:_h(Bh,t,a,r)}))},Pl=tinymce.util.Tools.resolve("tinymce.Env"),Bl={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},percentages:!0},Ml=function(){return Ne.fromTag("table")},Il=function(){return Ne.fromTag("tbody")},Ll=function(){return Ne.fromTag("tr")},Fl=function(){return Ne.fromTag("th")},Hl=function(){return Ne.fromTag("td")},zl=function(e,t,n,r,o){var i,a,u,s,c,l,f;for(void 0===o&&(o=Bl),i=Ml(),De(i,o.styles),de(i,o.attributes),a=Il(),Qt(i,a),u=[],s=0;s<e;s++){for(c=Ll(),l=0;l<t;l++)f=s<n||l<r?Fl():Hl(),l<r&&fe(f,"scope","row"),s<n&&fe(f,"scope","col"),Qt(f,Ne.fromTag("br")),o.percentages&&Ae(f,"width",100/t+"%"),Qt(c,f);u.push(c)}return nn(a,u),i},Wl=function(e){return e.dom().innerHTML},Ul=function(e){var t=Ne.fromTag("div"),n=Ne.fromDom(e.dom().cloneNode(!0));return Qt(t,n),Wl(t)},jl=function(e,t){e.selection.select(t.dom(),!0),e.selection.collapse(!0)},Vl=function(e,t){Pn(t,"td,th").each(_h(jl,e))},ql=function(t,e){N(En(e,"tr"),function(e){ll(t,e.dom()),N(En(e,"th,td"),function(e){fl(t,e.dom())})})},$l=function(e){return r(e)&&-1!==e.indexOf("%")},Yl=function(t,e,n){var r,o=Yc(t),i={styles:o,attributes:$c(t),percentages:$l(o.width)&&!al(t)},a=zl(n,e,0,0,i);return fe(a,"data-mce-id","__mce"),r=Ul(a),t.insertContent(r),Pn(Oc(t),'table[data-mce-id="__mce"]').map(function(e){return al(t)&&Ae(e,"width",Oe(e,"width")),he(e,"data-mce-id"),ql(t,e),Vl(t,e),e.dom()}).getOr(null)},Xl=function(t,n){var e=t.dom,r={width:e.getStyle(n,"width")||e.getAttrib(n,"width"),height:e.getStyle(n,"height")||e.getAttrib(n,"height"),cellspacing:e.getStyle(n,"border-spacing")||e.getAttrib(n,"cellspacing"),cellpadding:e.getAttrib(n,"data-mce-cell-padding")||e.getAttrib(n,"cellpadding")||wl(t.dom,n,"padding"),border:e.getAttrib(n,"data-mce-border")||e.getAttrib(n,"border")||wl(t.dom,n,"border"),borderColor:e.getAttrib(n,"data-mce-border-color"),caption:!!e.select("caption",n)[0],class:e.getAttrib(n,"class")};return pl.each("left center right".split(" "),function(e){t.formatter.matchNode(n,"align"+e)&&(r.align=e)}),Qc(t)&&pl.extend(r,Tl.extractAdvancedStyles(e,n)),r},Kl=function(e,t,n){var r,o=e.dom,i={},a={};if(i.class=n.class,a.height=Lc(n.height),o.getAttrib(t,"width")&&!tl(e)?i.width=Ic(n.width):a.width=Lc(n.width),tl(e)?(a["border-width"]=Lc(n.border),a["border-spacing"]=Lc(n.cellspacing),pl.extend(i,{"data-mce-border-color":n.borderColor,"data-mce-cell-padding":n.cellpadding,"data-mce-border":n.border})):pl.extend(i,{border:n.border,cellpadding:n.cellpadding,cellspacing:n.cellspacing}),tl(e)&&t.children)for(r=0;r<t.children.length;r++)Mh(o,t.children[r],{"border-width":Lc(n.border),"border-color":n.borderColor,padding:Lc(n.cellpadding)});n.style?pl.extend(a,o.parseStyle(n.style)):a=pl.extend({},o.parseStyle(o.getAttrib(t,"style")),a),i.style=o.serializeStyle(a),o.setAttribs(t,i)},Gl=function(e,t,n){var r,o,i=e.dom;Qc(e)&&Tl.syncAdvancedStyleFields(e,n),!1===(o=n.control.rootControl.toJSON()).class&&delete o.class,e.undoManager.transact(function(){t||(t=Yl(e,o.cols||1,o.rows||1)),Kl(e,t,o),(r=i.select("caption",t)[0])&&!o.caption&&i.remove(r),!r&&o.caption&&((r=i.create("caption")).innerHTML=Pl.ie?"":'<br data-mce-bogus="1"/>',t.insertBefore(r,t.firstChild)),yl(e,t),o.align&&vl(e,t,o.align),e.focus(),e.addVisual()})},Jl=function(t,e){var n,r,o,i,a,u=t.dom,s={};!0===e?(n=u.getParent(t.selection.getStart(),"table"))&&(s=Xl(t,n)):(r={label:"Cols",name:"cols"},o={label:"Rows",name:"rows"}),0<ol(t).length&&(s.class&&(s.class=s.class.replace(/\s*mce\-item\-table\s*/g,"")),i={name:"class",type:"listbox",label:"Class",values:Tl.buildListItems(ol(t),function(e){e.value&&(e.textStyle=function(){return t.formatter.getCssText({block:"table",classes:[e.value]})})})}),a={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",labelGapCalc:!1,padding:0,layout:"grid",columns:2,defaults:{type:"textbox",maxWidth:50},items:Zc(t)?[r,o,{label:"Width",name:"width",onchange:_h(Tl.updateStyleField,t)},{label:"Height",name:"height",onchange:_h(Tl.updateStyleField,t)},{label:"Cell spacing",name:"cellspacing"},{label:"Cell padding",name:"cellpadding"},{label:"Border",name:"border"},{label:"Caption",name:"caption",type:"checkbox"}]:[r,o,{label:"Width",name:"width",onchange:_h(Tl.updateStyleField,t)},{label:"Height",name:"height",onchange:_h(Tl.updateStyleField,t)}]},{label:"Alignment",name:"align",type:"listbox",text:"None",values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},i]},Qc(t)?t.windowManager.open({title:"Table properties",data:s,bodyType:"tabpanel",body:[{title:"General",type:"form",items:a},Tl.createStyleForm(t)],onsubmit:_h(Gl,t,n)}):t.windowManager.open({title:"Table properties",data:s,body:a,onsubmit:_h(Gl,t,n)})},Ql=pl.each,Zl=function(u,t,s,c,n){var r=Mc(u),e=function(){l().orThunk(i).each(function(e){$n.table(e,r).filter(p(r)).each(function(e){var t,n=Ne.fromText("");Gt(e,n),on(e),(t=u.dom.createRng()).setStart(n.dom(),0),t.setEnd(n.dom(),0),u.selection.setRng(t)})})},o=function(e){return function(){return S.from(u.dom.getParent(u.selection.getStart(),e)).map(Ne.fromDom)}},i=o("caption"),l=o("th,td"),f=function(e){return $n.table(e,r)},a=function(e){return{width:Pc(e.dom()),height:Pc(e.dom())}},d=function(e,t,n){var r=a(n);t.width===r.width&&t.height===r.height||(dl(e,n.dom(),t.width,t.height),ml(e,n.dom(),r.width,r.height))},m=function(o){l().each(function(r){f(r).each(function(t){var e=Go.forMenu(c,t,r),n=a(t);o(t,e).each(function(e){d(u,n,t),u.selection.setRng(e),u.focus(),s.clear(t),Fc(t)})})})},g=function(e){return l().bind(function(o){return f(o).bind(function(e){var t=Ne.fromDom(u.getDoc()),n=Go.forMenu(c,e,o),r=Er(Th,t,S.none());return hl(e,n,r)})})},h=function(a){n.get().each(function(e){var i=C(e,function(e){return br(e)});l().each(function(o){f(o).each(function(t){var e=Ne.fromDom(u.getDoc()),n=kr(e),r=Go.pasteRows(c,t,o,i,n);a(t,r).each(function(e){u.selection.setRng(e),u.focus(),s.clear(t)})})})})};Ql({mceTableSplitCells:function(){m(t.unmergeCells)},mceTableMergeCells:function(){m(t.mergeCells)},mceTableInsertRowBefore:function(){m(t.insertRowsBefore)},mceTableInsertRowAfter:function(){m(t.insertRowsAfter)},mceTableInsertColBefore:function(){m(t.insertColumnsBefore)},mceTableInsertColAfter:function(){m(t.insertColumnsAfter)},mceTableDeleteCol:function(){m(t.deleteColumn)},mceTableDeleteRow:function(){m(t.deleteRow)},mceTableCutRow:function(e){n.set(g()),m(t.deleteRow)},mceTableCopyRow:function(e){n.set(g())},mceTablePasteRowBefore:function(e){h(t.pasteRowsBefore)},mceTablePasteRowAfter:function(e){h(t.pasteRowsAfter)},mceTableDelete:e},function(e,t){u.addCommand(t,e)}),Ql({mceInsertTable:_h(Jl,u),mceTableProps:_h(Jl,u,!0),mceTableRowProps:_h(Ol,u),mceTableCellProps:_h(_l,u)},function(n,e){u.addCommand(e,function(e,t){n(t)})})},ef=function(e){var t=S.from(e.dom().documentElement).map(Ne.fromDom).getOr(e);return{parent:kh(t),view:kh(e),origin:kh(zi(0,0))}},tf=function(e,t){return{parent:kh(t),view:kh(e),origin:kh(zi(0,0))}},nf={create:function(e){var t=j(e,function(e){return{bind:e.bind,unbind:e.unbind}}),n=j(e,function(e){return e.trigger});return{registry:t,trigger:n}}},rf=Os(["compare","extract","mutate","sink"]),of=Os(["element","start","stop","destroy"]),af=Os(["forceDrop","drop","move","delayDrop"]),uf={mode:rf,sink:of,api:af},sf=Da("ephox-dragster"),cf={resolve:sf.resolve},lf=function(e,t,n,r,o,i,a){return{target:kh(e),x:kh(t),y:kh(n),stop:r,prevent:o,kill:i,raw:kh(a)}},ff=function(a,u){return function(e){var t,n,r,o,i;a(e)&&(t=Ne.fromDom(e.target),o=Eh(r=function(){e.preventDefault()},n=function(){e.stopPropagation()}),i=lf(t,e.clientX,e.clientY,n,r,o,e),u(i))}},df=function(e,t,n,r,o){var i=ff(n,r);return e.dom().addEventListener(t,i,o),{unbind:_h(gf,e,t,i,o)}},mf=function(e,t,n,r){return df(e,t,n,r,!1)},gf=function(e,t,n,r){e.dom().removeEventListener(t,n,r)},hf=kh(!0),pf=function(e,t,n){return mf(e,t,hf,n)},vf=function(e,t){return zi(t.left()-e.left(),t.top()-e.top())},bf=function(e){return S.some(zi(e.x(),e.y()))},yf=function(e,t){e.mutate(t.left(),t.top())},xf=function(e,t){var n,r,o,i=(n=t,r=ua({layerClass:cf.resolve("blocker")},n),o=Ne.fromTag("div"),fe(o,"role","presentation"),De(o,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),xa(o,cf.resolve("blocker")),xa(o,r.layerClass),{element:function(){return o},destroy:function(){on(o)}}),a=pf(i.element(),"mousedown",e.forceDrop),u=pf(i.element(),"mouseup",e.drop),s=pf(i.element(),"mousemove",e.move),c=pf(i.element(),"mouseout",e.delayDrop),l=function(){i.destroy(),u.unbind(),s.unbind(),c.unbind(),a.unbind()},f=function(e){Qt(e,i.element())},d=function(){on(i.element())};return uf.sink({element:i.element,start:f,stop:d,destroy:l})},wf=uf.mode({compare:vf,extract:bf,sink:xf,mutate:yf}),Cf=function(n,r){var o=null,e=function(){null!==o&&(s.clearTimeout(o),o=null)},t=function(){var e,t=[];for(e=0;e<arguments.length;e++)t[e]=arguments[e];null!==o&&s.clearTimeout(o),o=s.setTimeout(function(){n.apply(null,t),o=null},r)};return{cancel:e,throttle:t}},Sf=function(t,n,e){var r,o,i,a,u,s=!1,c=nf.create({start:Ih([]),stop:Ih([])}),l=Lh(),f=function(){a.stop(),l.isOn()&&(l.off(),c.trigger.stop())},d=Cf(f,200),m=function(e){a.start(e),l.on(),c.trigger.start()},g=function(e,t){d.cancel(),l.onEvent(e,n)};return l.events.move.bind(function(e){n.mutate(t,e.info())}),r=function(){s=!0},o=function(){s=!1},i=function(t){return function(){var e=Array.prototype.slice.call(arguments,0);if(s)return t.apply(null,e)}},u=function(){a.destroy()},{element:(a=n.sink(uf.api({forceDrop:f,drop:i(f),move:i(g),delayDrop:i(d.throttle)}),e)).element,go:m,on:r,off:o,destroy:u,events:c.registry}},Nf={transform:function(e,t){var n=void 0!==t?t:{},r=void 0!==n.mode?n.mode:wf;return Sf(e,r,t)}},Tf=function(e,t,n){return Bn(e,t,n).isSome()},Ef=Oa.resolve("resizer-bar-dragging"),kf=function(){var e=Ne.fromTag("div");return De(e,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),Qt(Ee(),e),e},Rf=function(e,t){return e.inline?tf(Oc(e),kf()):ef(Ne.fromDom(e.getDoc()))},_f=function(e,t){e.inline&&on(t.parent())},Af=function(a){var u,s,r=S.none(),o=S.none(),i=S.none(),c=/(\d+(\.\d+)?)%/,l=function(e){return"TABLE"===e.nodeName},n=function(e){return a.dom.getStyle(e,"width")||a.dom.getAttrib(e,"width")},e=function(){return o},t=function(){return i.getOr(ef(Ne.fromDom(a.getBody())))},f=function(){o.each(function(e){e.destroy()}),i.each(function(e){_f(a,e)})};return a.on("init",function(){var e,t=Ph(Uc.directionAt),n=Rf(a);i=S.some(n),sl(a)&&Xc(a)&&((e=Hh(n,t)).on(),e.events.startDrag.bind(function(e){r=S.some(a.selection.getRng())}),e.events.beforeResize.bind(function(e){var t=e.table().dom();dl(a,t,Pc(t),Bc(t))}),e.events.afterResize.bind(function(e){var t=e.table(),n=t.dom();Fc(t),r.each(function(e){a.selection.setRng(e),a.focus()}),ml(a,n,Pc(n),Bc(n)),a.undoManager.add()}),o=S.some(e))}),a.on("ObjectResizeStart",function(e){var t=e.target;l(t)&&(u=e.width,s=n(t))}),a.on("ObjectResized",function(e){var t,n,r,o,i=e.target;l(i)&&(t=i,c.test(s)?(n=parseFloat(c.exec(s)[1]),r=e.width*n/u,a.dom.setStyle(t,"width",r+"%")):(o=[],pl.each(t.rows,function(e){pl.each(e.cells,function(e){var t=a.dom.getStyle(e,"width",!0);o.push({cell:e,width:t})})}),pl.each(o,function(e){a.dom.setStyle(e.cell,"width",e.width),a.dom.setAttrib(e.cell,"width",null)})))}),{lazyResize:e,lazyWire:t,destroy:f}},Df=function(e){return{fold:e}},Of=function(o){return Df(function(e,t,n,r){return e(o)})},Pf=function(o){return Df(function(e,t,n,r){return t(o)})},Bf=function(o,i){return Df(function(e,t,n,r){return n(o,i)})},Mf=function(o){return Df(function(e,t,n,r){return r(o)})},If=function(r,e){return $n.table(r,e).bind(function(e){var t=$n.cells(e),n=D(t,function(e){return Bt(r,e)});return n.map(function(e){return{index:kh(e),all:kh(t)}})})},Lf=function(t,e){return If(t,e).fold(function(){return Of(t)},function(e){return e.index()+1<e.all().length?Bf(t,e.all()[e.index()+1]):Mf(t)})},Ff=function(t,e){return If(t,e).fold(function(){return Of()},function(e){return 0<=e.index()-1?Bf(t,e.all()[e.index()-1]):Pf(t)})},zf=function(e,t,n,r){return e.fold(t,n,r)},Wf=function(e){return e.fold(Rh,Rh,Rh)},Uf=(Hf=Ho([{before:["element"]},{on:["element","offset"]},{after:["element"]}])).before,jf=Hf.on,Vf=Hf.after,qf={before:Uf,on:jf,after:Vf,cata:zf,getStart:Wf},$f=Ho([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Yf=q("start","soffset","finish","foffset"),Xf=function(e){return e.match({domRange:function(e){return Ne.fromDom(e.startContainer)},relative:function(e,t){return qf.getStart(e)},exact:function(e,t,n,r){return e}})},Kf=function(e){var t=Xf(e);return Wt(t)},Gf=$f.relative,Jf=$f.exact,Qf=function(e,t,n,r){var o=zt(e),i=o.dom().createRange();return i.setStart(e.dom(),t),i.setEnd(n.dom(),r),i},Zf=function(e,t,n,r){var o=Qf(e,t,n,r),i=Bt(e,n)&&t===r;return o.collapsed&&!i},ed=function(e,t){var n=e.document.createRange();return td(n,t),n},td=function(e,t){e.selectNodeContents(t.dom())},nd=function(n,e){e.fold(function(e){n.setStartBefore(e.dom())},function(e,t){n.setStart(e.dom(),t)},function(e){n.setStartAfter(e.dom())})},rd=function(n,e){e.fold(function(e){n.setEndBefore(e.dom())},function(e,t){n.setEnd(e.dom(),t)},function(e){n.setEndAfter(e.dom())})},od=function(e,t,n){var r=e.document.createRange();return nd(r,t),rd(r,n),r},id=function(e,t,n,r,o){var i=e.document.createRange();return i.setStart(t.dom(),n),i.setEnd(r.dom(),o),i},ad=function(e){return{left:kh(e.left),top:kh(e.top),right:kh(e.right),bottom:kh(e.bottom),width:kh(e.width),height:kh(e.height)}},ud=function(e){var t=e.getClientRects(),n=0<t.length?t[0]:e.getBoundingClientRect();return 0<n.width||0<n.height?S.some(n).map(ad):S.none()},sd=Ho([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),cd=function(e,t,n){return t(Ne.fromDom(n.startContainer),n.startOffset,Ne.fromDom(n.endContainer),n.endOffset)},ld=function(o,e){return e.match({domRange:function(e){return{ltr:kh(e),rtl:S.none}},relative:function(e,t){return{ltr:Ce(function(){return od(o,e,t)}),rtl:Ce(function(){return S.some(od(o,t,e))})}},exact:function(e,t,n,r){return{ltr:Ce(function(){return id(o,e,t,n,r)}),rtl:Ce(function(){return S.some(id(o,n,r,e,t))})}}})},fd=function(e,t){var n=t.ltr();return n.collapsed?t.rtl().filter(function(e){return!1===e.collapsed}).map(function(e){return sd.rtl(Ne.fromDom(e.endContainer),e.endOffset,Ne.fromDom(e.startContainer),e.startOffset)}).getOrThunk(function(){return cd(e,sd.ltr,n)}):cd(e,sd.ltr,n)},dd=function(e,t){var n=ld(e,t);return fd(e,n)},md=function(i,e){return dd(i,e).match({ltr:function(e,t,n,r){var o=i.document.createRange();return o.setStart(e.dom(),t),o.setEnd(n.dom(),r),o},rtl:function(e,t,n,r){var o=i.document.createRange();return o.setStart(n.dom(),r),o.setEnd(e.dom(),t),o}})},gd=function(e,t,n,r,o){var i,a,u,s;if(0===o)return 0;if(t===r)return o-1;for(i=r,a=1;a<o;a++)if(u=e(a),s=Math.abs(t-u.left),n<=u.bottom){if(n<u.top||i<s)return a-1;i=s}return 0},hd=function(e,t,n){return t>=e.left&&t<=e.right&&n>=e.top&&n<=e.bottom},pd=function(n,r,e,t,o){var i=function(e){var t=n.dom().createRange();return t.setStart(r.dom(),e),t.collapse(!0),t},a=function(e){return i(e).getBoundingClientRect()},u=ir(r).length,s=gd(a,e,t,o.right,u);return i(s)},vd=function(t,n,r,o){var e,i=t.dom().createRange();return i.selectNode(n.dom()),e=i.getClientRects(),ca(e,function(e){return hd(e,r,o)?S.some(e):S.none()}).map(function(e){return pd(t,n,r,o,e)})},bd=function(t,e,n,r){var o=t.dom().createRange(),i=$t(e);return ca(i,function(e){return o.selectNode(e.dom()),hd(o.getBoundingClientRect(),n,r)?yd(t,e,n,r):S.none()})},yd=function(e,t,n,r){return(se(t)?vd:bd)(e,t,n,r)},xd=function(e,t,n,r){var o,i,a,u=e.dom().createRange();return u.selectNode(t.dom()),o=u.getBoundingClientRect(),i=Math.max(o.left,Math.min(o.right,n)),a=Math.max(o.top,Math.min(o.bottom,r)),yd(e,t,i,a)},Cd=!(wd=!0),Sd=function(e,t){return t-e.left<e.right-t?wd:Cd},Nd=function(e,t,n){var r=e.dom().createRange();return r.selectNode(t.dom()),r.collapse(n),r},Td=function(t,e,n){var r,o,i=t.dom().createRange();return i.selectNode(e.dom()),r=i.getBoundingClientRect(),((o=Sd(r,n))===wd?mr:gr)(e).map(function(e){return Nd(t,e,o)})},Ed=function(e,t,n){var r=t.dom().getBoundingClientRect(),o=Sd(r,n);return S.some(Nd(e,t,o))},kd=function(e,t,n){return(0===$t(t).length?Ed:Td)(e,t,n)},Rd=function(n,e,t){return S.from(n.dom().caretPositionFromPoint(e,t)).bind(function(e){if(null===e.offsetNode)return S.none();var t=n.dom().createRange();return t.setStart(e.offsetNode,e.offset),t.collapse(),S.some(t)})},_d=function(e,t,n){return S.from(e.dom().caretRangeFromPoint(t,n))},Ad=function(e,t,n,r){var o,i,a,u=e.dom().createRange();return u.selectNode(t.dom()),o=u.getBoundingClientRect(),i=Math.max(o.left,Math.min(o.right,n)),a=Math.max(o.top,Math.min(o.bottom,r)),xd(e,t,i,a)},Dd=function(n,r,o){return Ne.fromPoint(n,r,o).bind(function(e){var t=function(){return kd(n,e,r)};return 0===$t(e).length?t():Ad(n,e,r,o).orThunk(t)})},Od=document.caretPositionFromPoint?Rd:document.caretRangeFromPoint?_d:Dd,Pd=function(e,t,n){var r=Ne.fromDom(e.document);return Od(r,t,n).map(function(e){return Yf(Ne.fromDom(e.startContainer),e.startOffset,Ne.fromDom(e.endContainer),e.endOffset)})},Bd=function(e,t){var n=re(e);return"input"===n?qf.after(e):x(["br","img"],n)?0===t?qf.before(e):qf.after(e):qf.on(e,t)},Md=function(e,t){var n=e.fold(qf.before,Bd,qf.after),r=t.fold(qf.before,Bd,qf.after);return Gf(n,r)},Id=function(e,t,n,r){var o=Bd(e,t),i=Bd(n,r);return Gf(o,i)},Ld=function(e){return e.match({domRange:function(e){var t=Ne.fromDom(e.startContainer),n=Ne.fromDom(e.endContainer);return Id(t,e.startOffset,n,e.endOffset)},relative:Md,exact:Id})},Fd=function(e,t){S.from(e.getSelection()).each(function(e){e.removeAllRanges(),e.addRange(t)})},Hd=function(e,t,n,r,o){var i=id(e,t,n,r,o);Fd(e,i)},zd=function(e,t,n,r,o,i){t.collapse(n.dom(),r),t.extend(o.dom(),i)},Wd=function(i,e){return dd(i,e).match({ltr:function(e,t,n,r){Hd(i,e,t,n,r)},rtl:function(t,n,r,o){var e=i.getSelection();if(e.setBaseAndExtent)e.setBaseAndExtent(t.dom(),n,r.dom(),o);else if(e.extend)try{zd(i,e,t,n,r,o)}catch(e){Hd(i,r,o,t,n)}else Hd(i,r,o,t,n)}})},Ud=function(e,t,n,r,o){var i=Id(t,n,r,o);Wd(e,i)},jd=function(e,t,n){var r=Md(t,n);Wd(e,r)},Vd=function(e){var o=Kf(e).dom(),t=function(e,t,n,r){return id(o,e,t,n,r)},n=Ld(e);return dd(o,n).match({ltr:t,rtl:t})},qd=function(e){var t,n;return 0<e.rangeCount?(t=e.getRangeAt(0),n=e.getRangeAt(e.rangeCount-1),S.some(Yf(Ne.fromDom(t.startContainer),t.startOffset,Ne.fromDom(n.endContainer),n.endOffset))):S.none()},$d=function(e){var t=Ne.fromDom(e.anchorNode),n=Ne.fromDom(e.focusNode);return Zf(t,e.anchorOffset,n,e.focusOffset)?S.some(Yf(t,e.anchorOffset,n,e.focusOffset)):qd(e)},Yd=function(e,t){var n=ed(e,t);Fd(e,n)},Xd=function(e){return S.from(e.getSelection()).filter(function(e){return 0<e.rangeCount}).bind($d)},Kd=function(e){return Xd(e).map(function(e){return Jf(e.start(),e.soffset(),e.finish(),e.foffset())})},Gd=function(e,t){var n=md(e,t);return ud(n)},Jd=function(e,t,n){return Pd(e,t,n)},Qd=function(e){e.getSelection().removeAllRanges()},Zd=tinymce.util.Tools.resolve("tinymce.util.VK"),em=function(e,t,n,r){return om(e,t,Lf(n),r)},tm=function(e,t,n,r){return om(e,t,Ff(n),r)},nm=function(e,t){var n=Jf(t,0,t,0);return Vd(n)},rm=function(t,e){var n=En(e,"tr");return z(n).bind(function(e){return Pn(e,"td,th").map(function(e){return nm(t,e)})})},om=function(r,e,t,o,n){return t.fold(S.none,S.none,function(e,t){return mr(t).map(function(e){return nm(r,e)})},function(n){return $n.table(n,e).bind(function(e){var t=Go.noMenu(n);return r.undoManager.transact(function(){o.insertRowsAfter(e,t)}),rm(r,e)})})},im=["table","li","dl"],am=function(t,n,r,o){var i,a,e,u;t.keyCode===Zd.TAB&&(i=Oc(n),a=function(e){var t=re(e);return Bt(e,i)||x(im,t)},(e=n.selection.getRng()).collapsed&&(u=Ne.fromDom(e.startContainer),$n.cell(u,a).each(function(e){t.preventDefault(),(t.shiftKey?tm:em)(n,a,e,r,o).each(function(e){n.selection.setRng(e)})})))},um=q("selection","kill"),sm={response:um},lm=(cm=function(t){return function(e){return e===t}})(38),fm=cm(40),dm=function(e){return 37<=e&&e<=40},mm={ltr:{isBackward:cm(37),isForward:cm(39)},rtl:{isBackward:cm(39),isForward:cm(37)},isUp:lm,isDown:fm,isNavigation:dm},gm=function(e,t){var n=md(e,t);return{start:kh(Ne.fromDom(n.startContainer)),soffset:kh(n.startOffset),finish:kh(Ne.fromDom(n.endContainer)),foffset:kh(n.endOffset)}},hm=function(e,t,n,r){return{start:kh(qf.on(e,t)),finish:kh(qf.on(n,r))}},kt.detect().browser.isSafari(),pm=function(e){var t=void 0!==e?e.dom():s.document,n=t.body.scrollLeft||t.documentElement.scrollLeft,r=t.body.scrollTop||t.documentElement.scrollTop;return zi(n,r)},vm=function(e,t,n){var r=void 0!==n?n.dom():s.document,o=r.defaultView;o.scrollBy(e,t)},ym={sync:function(n,r,e,t,o,i,a){return Bt(e,o)&&t===i?S.none():Bn(e,"td,th",r).bind(function(t){return Bn(o,"td,th",r).bind(function(e){return bm(n,r,t,e,a)})})},detect:bm=function(n,e,r,t,o){return Bt(r,t)?S.none():To(r,t,e).bind(function(e){var t=e.boxes().getOr([]);return 0<t.length?(o(n,t,e.start(),e.finish()),S.some(sm.response(S.some(hm(r,0,r,sr(r))),!0))):S.none()})},update:function(e,t,n,r,o){return ko(r,e,t,o.firstSelectedSelector(),o.lastSelectedSelector()).map(function(e){return o.clear(n),o.selectRange(n,e.boxes(),e.start(),e.finish()),e.boxes()})}},xm=Q(["left","top","right","bottom"],[]),wm=function(e,t){return xm({left:e.left(),top:e.top()+t,right:e.right(),bottom:e.bottom()+t})},Cm=function(e,t){return xm({left:e.left(),top:e.top()-t,right:e.right(),bottom:e.bottom()-t})},Sm=function(e,t){var n=e.bottom()-e.top();return xm({left:e.left(),top:t-n,right:e.right(),bottom:t})},Nm=function(e,t){var n=e.bottom()-e.top();return xm({left:e.left(),top:t,right:e.right(),bottom:t+n})},Tm=function(e,t,n){return xm({left:e.left()+t,top:e.top()+n,right:e.right()+t,bottom:e.bottom()+n})},Em={nu:xm,moveUp:Cm,moveDown:wm,moveBottomTo:Sm,moveTopTo:Nm,getTop:function(e){return e.top()},getBottom:function(e){return e.bottom()},translate:Tm,toString:function(e){return"("+e.left()+", "+e.top()+") -> ("+e.right()+", "+e.bottom()+")"}},km=function(e,t,n){return 0<=n&&n<sr(t)?e.getRangedRect(t,n,t,n+1):0<n?e.getRangedRect(t,n-1,t,n):S.none()},Rm=function(e){return Em.nu({left:e.left,top:e.top,right:e.right,bottom:e.bottom})},_m=function(e,t){return S.some(e.getRect(t))},Am=function(e,t,n){return ue(t)?_m(e,t).map(Rm):se(t)?km(e,t,n).map(Rm):S.none()},Dm=function(e,t){return ue(t)?_m(e,t).map(Rm):se(t)?e.getRangedRect(t,0,t,sr(t)).map(Rm):S.none()},Om=q("item","mode"),Pm=function(e,t,n,r){return void 0===r&&(r=Bm),e.property().parent(t).map(function(e){return Om(e,r)})},Bm=function(e,t,n,r){return void 0===r&&(r=Mm),n.sibling(e,t).map(function(e){return Om(e,r)})},Mm=function(e,t,n,r){var o;return void 0===r&&(r=Mm),o=e.property().children(t),n.first(o).map(function(e){return Om(e,r)})},Im=[{current:Pm,next:Bm,fallback:S.none()},{current:Bm,next:Mm,fallback:S.some(Pm)},{current:Mm,next:Mm,fallback:S.some(Bm)}],Lm=function(t,n,r,o,e){return void 0===e&&(e=Im),A(e,function(e){return e.current===r}).bind(function(e){return e.current(t,n,o,e.next).orThunk(function(){return e.fallback.bind(function(e){return Lm(t,n,e,o)})})})},Fm=function(){var e=function(e,t){return e.query().prevSibling(t)},t=function(e){return 0<e.length?S.some(e[e.length-1]):S.none()};return{sibling:e,first:t}},Hm=function(){var e=function(e,t){return e.query().nextSibling(t)},t=function(e){return 0<e.length?S.some(e[0]):S.none()};return{sibling:e,first:t}},zm=function(t,e,n,r,o,i){return Lm(t,e,r,o).bind(function(e){return i(e.item())?S.none():n(e.item())?S.some(e.item()):zm(t,e.item(),n,e.mode(),o,i)})},Wm=function(t){return function(e){return 0===t.property().children(e).length}},Um=function(e,t,n){return Vm(e,t,Wm(e),n)},jm=function(e,t,n){return qm(e,t,Wm(e),n)},Vm=function(e,t,n,r){return zm(e,t,n,Bm,Fm(),r)},qm=function(e,t,n,r){return zm(e,t,n,Bm,Hm(),r)},$m=Dh(),Ym=function(e,t){return Um($m,e,t)},Xm=function(e,t){return jm($m,e,t)},Km=function(e,t,n){return Vm($m,e,t,n)},Gm=function(e,t,n){return qm($m,e,t,n)},Jm=5,Qm=100,Zm=Ho([{none:[]},{retry:["caret"]}]),eg=function(e,t){return e.left()<t.left()||Math.abs(t.right()-e.left())<1||e.left()>t.right()},tg=function(t,e,n){return Rn(e,Ks).fold(kh(!1),function(e){return Dm(t,e).exists(function(e){return eg(n,e)})})},ng=function(e,t,n,r,o){var i=Em.moveDown(o,Jm);return Math.abs(n.bottom()-r.bottom())<1?Zm.retry(i):n.top()>o.bottom()?Zm.retry(i):n.top()===o.bottom()?Zm.retry(Em.moveDown(o,1)):tg(e,t,o)?Zm.retry(Em.translate(i,Jm,0)):Zm.none()},rg=function(e,t,n,r,o){var i=Em.moveUp(o,Jm);return Math.abs(n.top()-r.top())<1?Zm.retry(i):n.bottom()<o.top()?Zm.retry(i):n.bottom()===o.top()?Zm.retry(Em.moveUp(o,1)):tg(e,t,o)?Zm.retry(Em.translate(i,Jm,0)):Zm.none()},og={point:Em.getTop,adjuster:rg,move:Em.moveUp,gather:Ym},ig={point:Em.getBottom,adjuster:ng,move:Em.moveDown,gather:Xm},ag=function(e,t,n){return e.elementFromPoint(t,n).filter(function(e){return"table"===re(e)}).isSome()},ug=function(e,t,n,r,o){return sg(e,t,n,t.move(r,Jm),o)},sg=function(n,r,o,i,a){return 0===a?S.some(i):ag(n,i.left(),r.point(i))?ug(n,r,o,i,a-1):n.situsFromPoint(i.left(),r.point(i)).bind(function(e){return e.start().fold(S.none,function(t,e){return Dm(n,t,e).bind(function(e){return r.adjuster(n,t,e,o,i).fold(S.none,function(e){return sg(n,r,o,e,a-1)})}).orThunk(function(){return S.some(i)})},S.none)})},cg=function(e,t){return e.situsFromPoint(t.left(),t.bottom()+Jm)},lg=function(e,t){return e.situsFromPoint(t.left(),t.top()-Jm)},fg=function(e,t,n){return e.point(t)>n.getInnerHeight()?S.some(e.point(t)-n.getInnerHeight()):e.point(t)<0?S.some(-e.point(t)):S.none()},mg={tryUp:_h(dg=function(t,n,e){var r=t.move(e,Jm),o=sg(n,t,e,r,Qm).getOr(r);return fg(t,o,n).fold(function(){return n.situsFromPoint(o.left(),t.point(o))},function(e){return n.scrollBy(0,e),n.situsFromPoint(o.left(),t.point(o)-e)})},og),tryDown:_h(dg,ig),ieTryUp:lg,ieTryDown:cg,getJumpSize:kh(Jm)},gg=Ho([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),hg=function(e,t,n){var r=e.getRect(t),o=e.getRect(n);return o.right>r.left&&o.left<r.right},pg=function(n,t,e,r,o,i,a){return Bn(r,"td,th",a).bind(function(e){return Bn(t,"td,th",a).map(function(t){return Bt(e,t)?Bt(r,e)&&sr(e)===o?i(t):gg.none("in same cell"):Qr.sharedOne(vg,[e,t]).fold(function(){return hg(n,t,e)?gg.success():i(t)},function(e){return i(t)})})}).getOr(gg.none("default"))},vg=function(e){return Bn(e,"tr")},bg={verify:pg,cata:function(e,t,n,r,o){return e.fold(t,n,r,o)},adt:gg},yg=q("element","offset"),q("element","deltaOffset"),q("element","start","finish"),q("begin","end"),q("element","text"),q("ancestor","descendants","element","index"),xg=q("parent","children","element","index"),wg=function(r){return Ut(r).bind(function(t){var n=$t(t);return Cg(n,r).map(function(e){return xg(t,n,r,e)})})},Cg=function(e,t){return D(e,_h(Bt,t))},Sg=function(e){return"br"===re(e)},Ng=function(e,t,n){return t(e,n).bind(function(e){return se(e)&&0===ir(e).trim().length?Ng(e,t,n):S.some(e)})},Tg=function(e,t,n){return n.traverse(t).orThunk(function(){return Ng(t,n.gather,e)}).map(n.relative)},Eg=function(e,t){return Yt(e,t).filter(Sg).orThunk(function(){return Yt(e,t-1).filter(Sg)})},kg=function(t,e,n,r){return Eg(e,n).bind(function(e){return r.traverse(e).fold(function(){return Ng(e,r.gather,t).map(r.relative)},function(e){return wg(e).map(function(e){return qf.on(e.parent(),e.index())})})})},Rg=function(e,t,n,r){return(Sg(t)?Tg(e,t,r):kg(e,t,n,r)).map(function(e){return{start:kh(e),finish:kh(e)}})},_g=function(e){return bg.cata(e,function(e){return S.none()},function(){return S.none()},function(e){return S.some(yg(e,0))},function(e){return S.some(yg(e,sr(e)))})},Ag=20,Dg=kt.detect(),Og=function(o,i,a){return o.getSelection().bind(function(r){return Rg(i,r.finish(),r.foffset(),a).fold(function(){return S.some(yg(r.finish(),r.foffset()))},function(e){var t=o.fromSitus(e),n=bg.verify(o,r.finish(),r.foffset(),t.finish(),t.foffset(),a.failure,i);return _g(n)})})},Pg=function(r,o,i,a,u,s){return 0===s?S.none():Ig(r,o,i,a,u).bind(function(e){var t=r.fromSitus(e),n=bg.verify(r,i,a,t.finish(),t.foffset(),u.failure,o);return bg.cata(n,function(){return S.none()},function(){return S.some(e)},function(e){return Bt(i,e)&&0===a?Bg(r,i,a,Em.moveUp,u):Pg(r,o,e,0,u,s-1)},function(e){return Bt(i,e)&&a===sr(e)?Bg(r,i,a,Em.moveDown,u):Pg(r,o,e,sr(e),u,s-1)})})},Bg=function(t,e,n,r,o){return Am(t,e,n).bind(function(e){return Mg(t,o,r(e,mg.getJumpSize()))})},Mg=function(e,t,n){return Dg.browser.isChrome()||Dg.browser.isSafari()||Dg.browser.isFirefox()||Dg.browser.isEdge()?t.otherRetry(e,n):Dg.browser.isIE()?t.ieRetry(e,n):S.none()},Ig=function(t,e,n,r,o){return Am(t,n,r).bind(function(e){return Mg(t,o,e)})},Lg=function(t,n,r){return Og(t,n,r).bind(function(e){return Pg(t,n,e.element(),e.offset(),r,Ag).map(t.fromSitus)})},Fg=function(e,t,n){return kn(e,t,n).isSome()},Hg=kt.detect(),zg=function(e,t){return Fg(e,function(e){return Ut(e).exists(function(e){return Bt(e,t)})})},Wg=function(t,r,o,e,i){return Bn(e,"td,th",r).bind(function(n){return Bn(n,"table",r).bind(function(e){return zg(i,e)?Lg(t,r,o).bind(function(t){return Bn(t.finish(),"td,th",r).map(function(e){return{start:kh(n),finish:kh(e),range:kh(t)}})}):S.none()})})},Ug=function(e,t,n,r,o,i){return Hg.browser.isIE()?S.none():i(r,t).orThunk(function(){return Wg(e,t,n,r,o).map(function(e){var t=e.range();return sm.response(S.some(hm(t.start(),t.soffset(),t.finish(),t.foffset())),!0)})})},jg=function(e,t,n,r,o,i,a){return Wg(e,n,r,o,i).bind(function(e){return ym.detect(t,n,e.start(),e.finish(),a)})},Vg=function(e,r){return Bn(e,"tr",r).bind(function(n){return Bn(n,"table",r).bind(function(e){var t=En(e,"tr");return Bt(n,t[0])?Km(e,function(e){return gr(e).isSome()},r).map(function(e){var t=sr(e);return sm.response(S.some(hm(e,t,e,t)),!0)}):S.none()})})},qg=function(e,r){return Bn(e,"tr",r).bind(function(n){return Bn(n,"table",r).bind(function(e){var t=En(e,"tr");return Bt(n,t[t.length-1])?Gm(e,function(e){return mr(e).isSome()},r).map(function(e){return sm.response(S.some(hm(e,0,e,0)),!0)}):S.none()})})},$g=function(e,t){return Bn(e,"td,th",t)},Yg={down:{traverse:qt,gather:Xm,relative:qf.before,otherRetry:mg.tryDown,ieRetry:mg.ieTryDown,failure:bg.adt.failedDown},up:{traverse:Vt,gather:Ym,relative:qf.before,otherRetry:mg.tryUp,ieRetry:mg.ieTryUp,failure:bg.adt.failedUp}},Xg=q("rows","cols"),Kg={mouse:function(e,t,n,r){var o,i,a,u,s,c,l=zh(e),f=(o=l,i=t,a=n,u=r,s=S.none(),c=function(){s=S.none()},{mousedown:function(e){u.clear(i),s=$g(e.target(),a)},mouseover:function(e){s.each(function(r){u.clear(i),$g(e.target(),a).each(function(n){To(r,n,a).each(function(e){var t=e.boxes().getOr([]);(1<t.length||1===t.length&&!Bt(r,n))&&(u.selectRange(i,t,e.start(),e.finish()),o.selectContents(n))})})})},mouseup:function(){s.each(c)}});return{mousedown:f.mousedown,mouseover:f.mouseover,mouseup:f.mouseup}},keyboard:function(e,c,l,f){var d=zh(e),m=function(){return f.clear(c),S.none()},t=function(e,t,n,r,o,i){var a=e.raw().which,u=!0===e.raw().shiftKey,s=Eo(c,f.selectedSelector()).fold(function(){return mm.isDown(a)&&u?_h(jg,d,c,l,Yg.down,r,t,f.selectRange):mm.isUp(a)&&u?_h(jg,d,c,l,Yg.up,r,t,f.selectRange):mm.isDown(a)?_h(Ug,d,l,Yg.down,r,t,qg):mm.isUp(a)?_h(Ug,d,l,Yg.up,r,t,Vg):S.none},function(t){var e=function(e){return function(){return ca(e,function(e){return ym.update(e.rows(),e.cols(),c,t,f)}).fold(function(){return Ro(c,f.firstSelectedSelector(),f.lastSelectedSelector()).map(function(e){var t=mm.isDown(a)||i.isForward(a)?qf.after:qf.before;return d.setRelativeSelection(qf.on(e.first(),0),t(e.table())),f.clear(c),sm.response(S.none(),!0)})},function(e){return S.some(sm.response(S.none(),!0))})}};return mm.isDown(a)&&u?e([Xg(1,0)]):mm.isUp(a)&&u?e([Xg(-1,0)]):i.isBackward(a)&&u?e([Xg(0,-1),Xg(-1,0)]):i.isForward(a)&&u?e([Xg(0,1),Xg(1,0)]):mm.isNavigation(a)&&!1===u?m:S.none});return s()},n=function(n,r,o,i,a){return Eo(c,f.selectedSelector()).fold(function(){var e=n.raw().which,t=!0===n.raw().shiftKey;return!1===t?S.none():mm.isNavigation(e)?ym.sync(c,l,r,o,i,a,f.selectRange):S.none()},S.none)};return{keydown:t,keyup:n}}},Gg=function(t,e){N(e,function(e){Ca(t,e)})},Jg=function(t){return function(e){xa(e,t)}},Qg=function(t){return function(e){Gg(e,t)}},Zg={byClass:function(o){var i=Jg(o.selected()),n=Qg([o.selected(),o.lastSelected(),o.firstSelected()]),a=function(e){var t=En(e,o.selectedSelector());N(t,n)},e=function(e,t,n,r){a(e),N(t,i),xa(n,o.firstSelected()),xa(r,o.lastSelected())};return{clear:a,selectRange:e,selectedSelector:o.selectedSelector,firstSelectedSelector:o.firstSelectedSelector,lastSelectedSelector:o.lastSelectedSelector}},byAttr:function(o){var n=function(e){he(e,o.selected()),he(e,o.firstSelected()),he(e,o.lastSelected())},i=function(e){fe(e,o.selected(),"1")},a=function(e){var t=En(e,o.selectedSelector());N(t,n)},e=function(e,t,n,r){a(e),N(t,i),fe(n,o.firstSelected(),"1"),fe(r,o.lastSelected(),"1")};return{clear:a,selectRange:e,selectedSelector:o.selectedSelector,firstSelectedSelector:o.firstSelectedSelector,lastSelectedSelector:o.lastSelectedSelector}}},eh=function(e){return!1===Sa(Ne.fromDom(e.target),"ephox-snooker-resizer-bar")},th=function(t){return{get:function(){var e=Oc(t);return _o(e,Fo.selectedSelector()).fold(function(){return void 0===t.selection.getStart()?Wo.none():Wo.single(t.selection)},function(e){return Wo.multiple(e)})}}},nh=pl.each,rh=function(t){var n=[];function e(e){return function(){t.execCommand(e)}}nh("inserttable tableprops deletetable | cell row column".split(" "),function(e){"|"===e?n.push({text:"-"}):n.push(t.menuItems[e])}),t.addButton("table",{type:"menubutton",title:"Table",menu:n}),t.addButton("tableprops",{title:"Table properties",onclick:e("mceTableProps"),icon:"table"}),t.addButton("tabledelete",{title:"Delete table",onclick:e("mceTableDelete")}),t.addButton("tablecellprops",{title:"Cell properties",onclick:e("mceTableCellProps")}),t.addButton("tablemergecells",{title:"Merge cells",onclick:e("mceTableMergeCells")}),t.addButton("tablesplitcells",{title:"Split cell",onclick:e("mceTableSplitCells")}),t.addButton("tableinsertrowbefore",{title:"Insert row before",onclick:e("mceTableInsertRowBefore")}),t.addButton("tableinsertrowafter",{title:"Insert row after",onclick:e("mceTableInsertRowAfter")}),t.addButton("tabledeleterow",{title:"Delete row",onclick:e("mceTableDeleteRow")}),t.addButton("tablerowprops",{title:"Row properties",onclick:e("mceTableRowProps")}),t.addButton("tablecutrow",{title:"Cut row",onclick:e("mceTableCutRow")}),t.addButton("tablecopyrow",{title:"Copy row",onclick:e("mceTableCopyRow")}),t.addButton("tablepasterowbefore",{title:"Paste row before",onclick:e("mceTablePasteRowBefore")}),t.addButton("tablepasterowafter",{title:"Paste row after",onclick:e("mceTablePasteRowAfter")}),t.addButton("tableinsertcolbefore",{title:"Insert column before",onclick:e("mceTableInsertColBefore")}),t.addButton("tableinsertcolafter",{title:"Insert column after",onclick:e("mceTableInsertColAfter")}),t.addButton("tabledeletecol",{title:"Delete column",onclick:e("mceTableDeleteCol")})},oh=function(t){var e=function(e){return t.dom.is(e,"table")&&t.getBody().contains(e)},n=cl(t);0<n.length&&t.addContextToolbar(e,n.join(" "))},ih=function(o,r){var e,i,t,n,a,u,s,c,l=S.none(),f=[],d=[],m=[],g=[],h=function(e){e.disabled(!0)},p=function(e){e.disabled(!1)},v=function(){var t=this;f.push(t),l.fold(function(){h(t)},function(e){p(t)})},b=function(){var t=this;d.push(t),l.fold(function(){h(t)},function(e){p(t)})},y=function(){var t=this;m.push(t),l.fold(function(){h(t)},function(e){t.disabled(e.mergable().isNone())})},x=function(){var t=this;g.push(t),l.fold(function(){h(t)},function(e){t.disabled(e.unmergable().isNone())})},w=function(){l.fold(function(){N(f,h),N(d,h),N(m,h),N(g,h)},function(t){N(f,p),N(d,p),N(m,function(e){e.disabled(t.mergable().isNone())}),N(g,function(e){e.disabled(t.unmergable().isNone())})})};function C(e){return function(){o.execCommand(e)}}o.on("init",function(){o.on("nodechange",function(e){var t=S.from(o.dom.getParent(o.selection.getStart(),"th,td"));l=t.bind(function(e){var t=Ne.fromDom(e),n=$n.table(t);return n.map(function(e){return Go.forMenu(r,e,t)})}),w()})}),e=function(){var e,t,n="";for(n='<table role="grid" class="mce-grid mce-grid-border" aria-readonly="true">',e=0;e<10;e++){for(n+="<tr>",t=0;t<10;t++)n+='<td role="gridcell" tabindex="-1"><a id="mcegrid'+(10*e+t)+'" href="#" data-mce-x="'+t+'" data-mce-y="'+e+'"></a></td>';n+="</tr>"}return n+="</table>",n+='<div class="mce-text-center" role="presentation">1 x 1</div>'},t=!(i=function(e,t,n,r){var o,i,a,u,s,c=r.getEl().getElementsByTagName("table")[0],l=r.isRtl()||"tl-tr"===r.parent().rel;for(c.nextSibling.innerHTML=t+1+" x "+(n+1),l&&(t=9-t),i=0;i<10;i++)for(o=0;o<10;o++)u=c.rows[i].childNodes[o].firstChild,s=(l?t<=o:o<=t)&&i<=n,e.dom.toggleClass(u,"mce-active",s),s&&(a=u);return a.parentNode})===el(o)?{text:"Table",icon:"table",context:"table",onclick:C("mceInsertTable")}:{text:"Table",icon:"table",context:"table",ariaHideMenu:!0,onclick:function(e){e.aria&&(this.parent().hideAll(),e.stopImmediatePropagation(),o.execCommand("mceInsertTable"))},onshow:function(){i(o,0,0,this.menu.items()[0])},onhide:function(){var e=this.menu.items()[0].getEl().getElementsByTagName("a");o.dom.removeClass(e,"mce-active"),o.dom.addClass(e[0],"mce-active")},menu:[{type:"container",html:e(),onPostRender:function(){this.lastX=this.lastY=0},onmousemove:function(e){var t,n,r=e.target;"A"===r.tagName.toUpperCase()&&(t=parseInt(r.getAttribute("data-mce-x"),10),n=parseInt(r.getAttribute("data-mce-y"),10),(this.isRtl()||"tl-tr"===this.parent().rel)&&(t=9-t),t===this.lastX&&n===this.lastY||(i(o,t,n,e.control),this.lastX=t,this.lastY=n))},onclick:function(e){var t=this;"A"===e.target.tagName.toUpperCase()&&(e.preventDefault(),e.stopPropagation(),t.parent().cancel(),o.undoManager.transact(function(){Yl(o,t.lastX+1,t.lastY+1)}),o.addVisual())}}]},n={text:"Table properties",context:"table",onPostRender:v,onclick:C("mceTableProps")},a={text:"Delete table",context:"table",onPostRender:v,cmd:"mceTableDelete"},u={text:"Row",context:"table",menu:[{text:"Insert row before",onclick:C("mceTableInsertRowBefore"),onPostRender:b},{text:"Insert row after",onclick:C("mceTableInsertRowAfter"),onPostRender:b},{text:"Delete row",onclick:C("mceTableDeleteRow"),onPostRender:b},{text:"Row properties",onclick:C("mceTableRowProps"),onPostRender:b},{text:"-"},{text:"Cut row",onclick:C("mceTableCutRow"),onPostRender:b},{text:"Copy row",onclick:C("mceTableCopyRow"),onPostRender:b},{text:"Paste row before",onclick:C("mceTablePasteRowBefore"),onPostRender:b},{text:"Paste row after",onclick:C("mceTablePasteRowAfter"),onPostRender:b}]},s={text:"Column",context:"table",menu:[{text:"Insert column before",onclick:C("mceTableInsertColBefore"),onPostRender:b},{text:"Insert column after",onclick:C("mceTableInsertColAfter"),onPostRender:b},{text:"Delete column",onclick:C("mceTableDeleteCol"),onPostRender:b}]},c={separator:"before",text:"Cell",context:"table",menu:[{text:"Cell properties",onclick:C("mceTableCellProps"),onPostRender:b},{text:"Merge cells",onclick:C("mceTableMergeCells"),onPostRender:y},{text:"Split cell",onclick:C("mceTableSplitCells"),onPostRender:x}]},o.addMenuItem("inserttable",t),o.addMenuItem("tableprops",n),o.addMenuItem("deletetable",a),o.addMenuItem("row",u),o.addMenuItem("column",s),o.addMenuItem("cell",c)},ah=function(e){return e.get().fold(function(){},function(e){return C(e,function(e){return e.dom()})})},uh=function(e,t){var n=C(e,Ne.fromDom);t.set(S.from(n))},sh=function(n,t){return{insertTable:function(e,t){return Yl(n,e,t)},setClipboardRows:function(e){return uh(e,t)},getClipboardRows:function(){return ah(t)}}},Nh.add("table",function(t){var b,y,e,x,w,C,n=Af(t),r=(b=t,y=n.lazyResize,x=Q(["mousedown","mouseover","mouseup","keyup","keydown"],[]),w=S.none(),C=Zg.byAttr(Fo),b.on("init",function(e){var r=b.getWin(),o=Oc(b),t=Mc(b),n=function(){var e=b.selection,t=Ne.fromDom(e.getStart()),n=Ne.fromDom(e.getEnd()),r=Qr.sharedOne($n.table,[t,n]);r.fold(function(){C.clear(o)},Th)},i=Kg.mouse(r,o,t,C),u=Kg.keyboard(r,o,t,C),a=function(e){return!0===e.raw().shiftKey},s=function(e,t){a(e)&&(t.kill()&&e.kill(),t.selection().each(function(e){var t=Gf(e.start(),e.finish()),n=md(r,t);b.selection.setRng(n)}))},c=function(e){var t,n,r,o=d(e);o.raw().shiftKey&&mm.isNavigation(o.raw().which)&&(t=b.selection.getRng(),n=Ne.fromDom(t.startContainer),r=Ne.fromDom(t.endContainer),u.keyup(o,n,t.startOffset,r,t.endOffset).each(function(e){s(o,e)}))},l=function(e){var t,n,r,o,i,a=d(e);y().each(function(e){e.hideBars()}),t=b.selection.getRng(),n=Ne.fromDom(b.selection.getStart()),r=Ne.fromDom(t.startContainer),o=Ne.fromDom(t.endContainer),i=Uc.directionAt(n).isRtl()?mm.rtl:mm.ltr,u.keydown(a,r,t.startOffset,o,t.endOffset,i).each(function(e){s(a,e)}),y().each(function(e){e.showBars()})},f=function(e){return e.hasOwnProperty("x")&&e.hasOwnProperty("y")},d=function(e){var t=Ne.fromDom(e.target),n=function(){e.stopPropagation()},r=function(){e.preventDefault()},o=Eh(r,n);return{target:kh(t),x:kh(f(e)?e.x:null),y:kh(f(e)?e.y:null),stop:n,prevent:r,kill:o,raw:kh(e)}},m=function(e){return 0===e.button},g=function(e){return void 0===e.buttons||0!=(1&e.buttons)},h=function(e){m(e)&&eh(e)&&i.mousedown(d(e))},p=function(e){g(e)&&eh(e)&&i.mouseover(d(e))},v=function(e){m(e)&&eh(e)&&i.mouseup(d(e))};b.on("mousedown",h),b.on("mouseover",p),b.on("mouseup",v),b.on("keyup",c),b.on("keydown",l),b.on("nodechange",n),w=S.some(x({mousedown:h,mouseover:p,mouseup:v,keyup:c,keydown:l}))}),e=function(){w.each(function(e){})},{clear:C.clear,destroy:e}),o=gl(t,n.lazyWire),i=th(t),a=Rs(S.none());return Zl(t,o,r,i,a),ei(t,i,o,r),ih(t,i),rh(t),oh(t),t.on("PreInit",function(){t.serializer.addTempAttr(Fo.firstSelected()),t.serializer.addTempAttr(Fo.lastSelected())}),Kc(t)&&t.on("keydown",function(e){am(e,t,o,n.lazyWire)}),t.on("remove",function(){n.destroy(),r.destroy()}),sh(t,a)})}(window),function(g){"use strict";var h,n,i,a,u,s,c,r,o,l,f,d,m,e,p,v,b,t,y,x,w,C,S,N,T,E,k,R,_,A,D,O,P,B,M,I,L,F,H,z,W,U,j,V,q,$,Y,X,K,G,J,Q,Z,ee,te,ne,re,oe,ie,ae,ue,se,ce,le,fe,de,me,ge,he,pe,ve,be,ye,xe,we,Ce,Se,Ne,Te,Ee,ke,Re,_e,Ae,De,Oe,Pe,Be,Me,Ie,Le,Fe,He,ze,We,Ue,je,Ve,qe,$e,Ye,Xe=function(e){var t=e,n=function(){return t},r=function(e){t=e},o=function(){return Xe(n())};return{get:n,set:r,clone:o}},Ke=tinymce.util.Tools.resolve("tinymce.PluginManager"),Ge=function(e){return!(!/(^|[ ,])powerpaste([, ]|$)/.test(e.settings.plugins)||!Ke.get("powerpaste")||(void 0!==g.window.console&&g.window.console.log&&g.window.console.log("PowerPaste is incompatible with Paste plugin! Remove 'paste' from the 'plugins' option."),0))},Je=Ge,Qe=function(e,t){return{clipboard:e,quirks:t}},Ze=Qe,et=function(e,t,n,r){return e.fire("PastePreProcess",{content:t,internal:n,wordContent:r})},tt=function(e,t,n,r){return e.fire("PastePostProcess",{node:t,internal:n,wordContent:r})},nt=function(e,t){return e.fire("PastePlainTextToggle",{state:t})},rt=function(e,t){return e.fire("paste",{ieFake:t})},ot=et,it=tt,at=nt,ut=rt,st=function(e){return e.getParam("paste_plaintext_inform",!0)},ct=function(e){return e.getParam("paste_block_drop",!1)},lt=function(e){return e.getParam("paste_data_images",!1)},ft=function(e){return e.getParam("paste_filter_drop",!0)},dt=function(e){return e.getParam("paste_preprocess")},mt=function(e){return e.getParam("paste_postprocess")},gt=function(e){return e.getParam("paste_webkit_styles")},ht=function(e){return e.getParam("paste_remove_styles_if_webkit",!0)},pt=function(e){return e.getParam("paste_merge_formats",!0)},vt=function(e){return e.getParam("smart_paste",!0)},bt=function(e){return e.getParam("paste_as_text",!1)},yt=function(e){return e.getParam("paste_retain_style_properties")},xt=function(e){return e.getParam("paste_word_valid_elements","-strong/b,-em/i,-u,-span,-p,-ol,-ul,-li,-h1,-h2,-h3,-h4,-h5,-h6,-p/div,-a[href|name],sub,sup,strike,br,del,table[width],tr,td[colspan|rowspan|width],th[colspan|rowspan|width],thead,tfoot,tbody")},wt=function(e){return e.getParam("paste_convert_word_fake_lists",!0)},Ct=function(e){return e.getParam("paste_enable_default_filters",!0)},St={shouldPlainTextInform:st,shouldBlockDrop:ct,shouldPasteDataImages:lt,shouldFilterDrop:ft,getPreProcess:dt,getPostProcess:mt,getWebkitStyles:gt,shouldRemoveWebKitStyles:ht,shouldMergeFormats:pt,isSmartPasteEnabled:vt,isPasteAsTextEnabled:bt,getRetainStyleProps:yt,getWordValidElements:xt,shouldConvertWordFakeLists:wt,shouldUseDefaultFilters:Ct},Nt=function(e,t){return!1===t.get()&&St.shouldPlainTextInform(e)},Tt=function(e,t){e.notificationManager.open({text:e.translate(t),type:"info"})},Et=function(e,t,n){"text"===t.pasteFormat.get()?(t.pasteFormat.set("html"),at(e,!1)):(t.pasteFormat.set("text"),at(e,!0),Nt(e,n)&&(Tt(e,"Paste is now in plain text mode. Contents will now be pasted as plain text until you toggle this option off."),n.set(!0))),e.focus()},kt=Et,Rt=function(e,n,t){e.addCommand("mceTogglePlainTextPaste",function(){kt(e,n,t)}),e.addCommand("mceInsertClipboardContent",function(e,t){t.content&&n.pasteHtml(t.content,t.internal),t.text&&n.pasteText(t.text)})},_t=Rt,At=tinymce.util.Tools.resolve("tinymce.Env"),Dt=tinymce.util.Tools.resolve("tinymce.util.Delay"),Ot=tinymce.util.Tools.resolve("tinymce.util.Tools"),Pt=tinymce.util.Tools.resolve("tinymce.util.VK"),Bt="x-tinymce/html",Mt="\x3c!-- "+Bt+" --\x3e",It=function(e){return Mt+e},Lt=function(e){return e.replace(Mt,"")},Ft=function(e){return-1!==e.indexOf(Mt)},Ht=It,zt=Lt,Wt=Ft,Ut=function(){return Bt},jt=tinymce.util.Tools.resolve("tinymce.html.Entities"),Vt=function(e){return!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e)},qt=function(e){return e.replace(/\r?\n/g,"<br>")},$t=function(e,t){var n,r=[],o="<"+e;if("object"==typeof t){for(n in t)t.hasOwnProperty(n)&&r.push(n+'="'+jt.encodeAllRaw(t[n])+'"');r.length&&(o+=" "+r.join(" "))}return o+">"},Yt=function(e,t,n){var r=e.split(/\n\n/),o=$t(t,n),i="</"+t+">",a=Ot.map(r,function(e){return e.split(/\n/).join("<br />")}),u=function(e){return o+e+i};return 1===a.length?a[0]:Ot.map(a,u).join("")},Xt=function(e,t,n){return t?Yt(e,t,n):qt(e)},Kt=Vt,Gt=Xt,Jt=tinymce.util.Tools.resolve("tinymce.html.DomParser"),Qt=tinymce.util.Tools.resolve("tinymce.html.Node"),Zt=tinymce.util.Tools.resolve("tinymce.html.Schema"),en=tinymce.util.Tools.resolve("tinymce.html.Serializer");function tn(t,e){return Ot.each(e,function(e){t=e.constructor===RegExp?t.replace(e,""):t.replace(e[0],e[1])}),t}function nn(t){var n,e;return e=[/^[IVXLMCD]{1,2}\.[ \u00a0]/,/^[ivxlmcd]{1,2}\.[ \u00a0]/,/^[a-z]{1,2}[\.\)][ \u00a0]/,/^[A-Z]{1,2}[\.\)][ \u00a0]/,/^[0-9]+\.[ \u00a0]/,/^[\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]+\.[ \u00a0]/,/^[\u58f1\u5f10\u53c2\u56db\u4f0d\u516d\u4e03\u516b\u4e5d\u62fe]+\.[ \u00a0]/],t=t.replace(/^[\u00a0 ]+/,""),Ot.each(e,function(e){if(e.test(t))return!(n=!0)}),n}function rn(e){var o,i,t,n,r,a,u,s,c=1;function l(e){var t="";if(3===e.type)return e.value;if(e=e.firstChild)for(;t+=l(e),e=e.next;);return t}function f(e,t){if(3===e.type&&t.test(e.value))return e.value=e.value.replace(t,""),!1;if(e=e.firstChild)do{if(!f(e,t))return!1}while(e=e.next);return!0}function d(e,t,n){var r=e._listLevel||c;r!==c&&(r<c?o&&(o=o.parent.parent):(i=o,o=null)),o&&o.name===t?o.append(e):(i=i||o,o=new Qt(t,1),1<n&&o.attr("start",""+n),e.wrap(o)),e.name="li",c<r&&i&&i.lastChild.append(o),c=r,function e(t){if(t._listIgnore)t.remove();else if(t=t.firstChild)for(;e(t),t=t.next;);}(e),f(e,/^\u00a0+/),f(e,/^\s*([\u2022\u00b7\u00a7\u25CF]|\w+\.)/),f(e,/^\u00a0+/)}for(t=[],n=e.firstChild;null!=n;)if(t.push(n),null!==(n=n.walk()))for(;void 0!==n&&n.parent!==e;)n=n.walk();for(r=0;r<t.length;r++)if("p"===(e=t[r]).name&&e.firstChild){if(a=l(e),/^[\s\u00a0]*[\u2022\u00b7\u00a7\u25CF]\s*/.test(a)){d(e,"ul");continue}if(nn(a)){s=1,(u=/([0-9]+)\./.exec(a))&&(s=parseInt(u[1],10)),d(e,"ol",s);continue}if(e._listLevel){d(e,"ul",1);continue}o=null}else i=o,o=null}function on(n,r,o,i){var a,u={},e=n.dom.parseStyle(i);return Ot.each(e,function(e,t){switch(t){case"mso-list":(a=/\w+ \w+([0-9]+)/i.exec(i))&&(o._listLevel=parseInt(a[1],10)),/Ignore/i.test(e)&&o.firstChild&&(o._listIgnore=!0,o.firstChild._listIgnore=!0);break;case"horiz-align":t="text-align";break;case"vert-align":t="vertical-align";break;case"font-color":case"mso-foreground":t="color";break;case"mso-background":case"mso-highlight":t="background";break;case"font-weight":case"font-style":return void("normal"!==e&&(u[t]=e));case"mso-element":if(/^(comment|comment-list)$/i.test(e))return void o.remove()}0!==t.indexOf("mso-comment")?0!==t.indexOf("mso-")&&("all"===St.getRetainStyleProps(n)||r&&r[t])&&(u[t]=e):o.remove()}),/(bold)/i.test(u["font-weight"])&&(delete u["font-weight"],o.wrap(new Qt("b",1))),/(italic)/i.test(u["font-style"])&&(delete u["font-style"],o.wrap(new Qt("i",1))),(u=n.dom.serializeStyle(u,o.name))||null}function an(t,n){t.on("PastePreProcess",function(e){e.content=n(t,e.content,e.internal,e.wordContent)})}function un(e,t){var n,r;return i.isWordContent(t)?(n=[],Ot.each(e.schema.getBlockElements(),function(e,t){n.push(t)}),r=new RegExp("(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?("+n.join("|")+")[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*","g"),t=h.filter(t,[[r,"$1"]]),t=h.filter(t,[[/<br><br>/g,"<BR><BR>"],[/<br>/g," "],[/<BR><BR>/g,"<br>"]])):t}function sn(e,t,n,r){var o,c,l,f;return r||n?t:(o=St.getWebkitStyles(e),!1===St.shouldRemoveWebKitStyles(e)||"all"===o?t:(o&&(c=o.split(/[, ]/)),t=(t=c?(l=e.dom,f=e.selection.getNode(),t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,function(e,t,n,r){var o,i,a,u=l.parseStyle(l.decode(n)),s={};if("none"===c)return t+r;for(o=0;o<c.length;o++)i=u[c[o]],a=l.getStyle(f,c[o],!0),/color/.test(c[o])&&(i=l.toHex(i),a=l.toHex(a)),a!==i&&(s[c[o]]=i);return(s=l.serializeStyle(s,"span"))?t+' style="'+s+'"'+r:t+r})):t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3")).replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,function(e,t,n,r){return t+' style="'+n+'"'+r})))}function cn(n,e){n.$("a",e).find("font,u").each(function(e,t){n.dom.remove(t,!0)})}h={filter:tn,innerText:function(e){var t=Zt(),n=Jt({},t),o="",i=t.getShortEndedElements(),a=Ot.makeMap("script noscript style textarea video audio iframe object"," "),u=t.getBlockElements();return e=tn(e,[/<!\[[^\]]+\]>/g]),function e(t){var n=t.name,r=t;if("br"!==n){if("wbr"!==n)if(i[n]&&(o+=" "),a[n])o+=" ";else{if(3===t.type&&(o+=t.value),!t.shortEnded&&(t=t.firstChild))for(;e(t),t=t.next;);u[n]&&r.next&&(o+="\n","p"===n&&(o+="\n"))}}else o+="\n"}(n.parse(e)),o},trimHtml:function(e){return e=tn(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,function(e,t,n){return t||n?"":" "}],/<br class="Apple-interchange-newline">/g,/<br>$/i])},createIdGenerator:function(e){var t=0;return function(){return e+t++}},isMsEdge:function(){return-1!==g.navigator.userAgent.indexOf(" Edge/")}},n=function(r,e){var o,t,n,i,a,u=St.getRetainStyleProps(r);return u&&(o=Ot.makeMap(u.split(/[, ]/))),e=h.filter(e,[/<br class="?Apple-interchange-newline"?>/gi,/<b[^>]+id="?docs-internal-[^>]*>/gi,/<!--[\s\S]+?-->/gi,/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,[/<(\/?)s>/gi,"<$1strike>"],[/&nbsp;/gi,""],[/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,function(e,t){return 0<t.length?t.replace(/./," ").slice(Math.floor(t.length/2)).split("").join(""):""}]]),t=St.getWordValidElements(r),n=Zt({valid_elements:t,valid_children:"-li[p]"}),Ot.each(n.elements,function(e){e.attributes.class||(e.attributes.class={},e.attributesOrder.push("class")),e.attributes.style||(e.attributes.style={},e.attributesOrder.push("style"))}),(i=Jt({},n)).addAttributeFilter("style",function(e){for(var t,n=e.length;n--;)(t=e[n]).attr("style",on(r,o,t,t.attr("style"))),"span"===t.name&&t.parent&&!t.attributes.length&&t.unwrap()}),i.addAttributeFilter("class",function(e){for(var t,n,r=e.length;r--;)n=(t=e[r]).attr("class"),/^(MsoCommentReference|MsoCommentText|msoDel)$/i.test(n)&&t.remove(),t.attr("class",null)}),i.addNodeFilter("del",function(e){for(var t=e.length;t--;)e[t].remove()}),i.addNodeFilter("a",function(e){for(var t,n,r,o=e.length;o--;)if(n=(t=e[o]).attr("href"),r=t.attr("name"),n&&-1!==n.indexOf("#_msocom_"))t.remove();else if(n&&0===n.indexOf("file://")&&(n=n.split("#")[1])&&(n="#"+n),n||r){if(r&&!/^_?(?:toc|edn|ftn)/i.test(r)){t.unwrap();continue}t.attr({href:n,name:r})}else t.unwrap()}),a=i.parse(e),St.shouldConvertWordFakeLists(r)&&rn(a),e=en({validate:r.settings.validate},n).serialize(a)},i={preProcess:function(e,t){return St.shouldUseDefaultFilters(e)?n(e,t):t},isWordContent:function(e){return/<font face="Times New Roman"|class="?Mso|style="[^"]*\bmso-|style='[^'']*\bmso-|w:WordDocument/i.test(e)||/class="OutlineElement/.test(e)||/id="?docs\-internal\-guid\-/.test(e)}},a=function(e,t){return{content:e,cancelled:t}},u=function(e,t,n,r){var o=e.dom.create("div",{style:"display:none"},t),i=it(e,o,n,r);return a(i.node.innerHTML,i.isDefaultPrevented())},s=function(e,t,n,r){var o=ot(e,t,n,r);return e.hasEventListeners("PastePostProcess")&&!o.isDefaultPrevented()?u(e,o.content,n,r):a(o.content,o.isDefaultPrevented())},c=function(e,t,n){var r=i.isWordContent(t),o=r?i.preProcess(e,t):t;return s(e,o,n,r)},r=function(e,t){var n=e.dom.create("body",{},t);return Ot.each(n.querySelectorAll("meta"),function(e){return e.parentNode.removeChild(e)}),n.innerHTML},o=function(e,t){return e.insertContent(r(e,t),{merge:St.shouldMergeFormats(e),paste:!0}),!0},d=function(e,t,n){return e.undoManager.extra(function(){n(e,t)},function(){e.insertContent('<img src="'+t+'">')}),!0},m=function(e,t,n){return e.undoManager.extra(function(){n(e,t)},function(){e.execCommand("mceInsertLink",!1,t)}),!0},e=function(e,t,n){return!(!1!==e.selection.isCollapsed()||!l(t))&&m(e,t,n)},p=function(e,t,n){return!!f(t)&&d(e,t,n)},f=function(e){return l(e)&&/.(gif|jpe?g|png)$/.test(e)},l=function(e){return/^https?:\/\/[\w\?\-\/+=.&%@~#]+$/i.test(e)},b=function(e,t){!1===St.isSmartPasteEnabled(e)?o(e,t):v(e,t)},y=(t=function(e){return function(){return e}})(!(v=function(t,n){Ot.each([e,p,o],function(e){return!0!==e(t,n,o)})})),x=t(!0),$e={fold:function(e,t){return e()},is:w=y,isSome:w,isNone:C=x,getOr:qe=function(e){return e},getOrThunk:Ve=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:function(){return null},getOrUndefined:function(){},or:qe,orThunk:Ve,map:S=function(){return N},ap:S,each:function(){},bind:S,flatten:S,exists:w,forall:C,filter:S,equals:je=function(e){return e.isNone()},equals_:je,toArray:function(){return[]},toString:t("none()")},Object.freeze&&Object.freeze($e),N=$e,E=function(e){return null==e?N:T(e)},k={some:T=function(n){var e=function(){return n},t=function(){return i},r=function(e){return T(e(n))},o=function(e){return e(n)},i={fold:function(e,t){return t(n)},is:function(e){return n===e},isSome:C,isNone:w,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:t,orThunk:t,map:r,ap:function(e){return e.fold(S,function(e){return T(e(n))})},each:function(e){e(n)},bind:o,flatten:e,exists:o,forall:o,filter:function(e){return e(n)?i:N},equals:function(e){return e.is(n)},equals_:function(e,t){return e.fold(w,function(e){return t(n,e)})},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return i},none:S,from:E},R=function(e){if(null===e)return"null";var t=typeof e;return"object"===t&&Array.prototype.isPrototypeOf(e)?"array":"object"===t&&String.prototype.isPrototypeOf(e)?"string":t},Ye="function",_=function(e){return R(e)===Ye},A=function(e,t){var n,r,o=e.length,i=new Array(o);for(n=0;n<o;n++)r=e[n],i[n]=t(r,n,e);return i},D=function(e,t){var n,r;for(n=0,r=e.length;n<r;n++)t(e[n],n,e)},O=function(e,t){var n,r,o,i=[];for(n=0,r=e.length;n<r;n++)t(o=e[n],n,e)&&i.push(o);return i},P=Array.prototype.slice,B=_(Array.from)?Array.from:function(e){return P.call(e)},I=function(t){return M(function(e){e(t)})},L={nu:M=function(e){var n=k.none(),t=[],r=function(n){return M(function(t){o(function(e){t(n(e))})})},o=function(e){a()?s(e):t.push(e)},i=function(e){n=k.some(e),u(t),t=[]},a=function(){return n.isSome()},u=function(e){D(e,s)},s=function(t){n.each(function(e){g.setTimeout(function(){t(e)},0)})};return e(i),{get:o,map:r,isReady:a}},pure:I},F=function(r){return function(){var e,t,n=[];for(e=0;e<arguments.length;e++)n[e]=arguments[e];t=this,g.setTimeout(function(){r.apply(t,n)},0)}},z=function(t){return H(function(e){e(t)})},W={nu:H=function(t){var e=function(e){t(F(e))},n=function(r){return H(function(n){e(function(e){var t=r(e);n(t)})})},r=function(n){return H(function(t){e(function(e){n(e).get(t)})})},o=function(n){return H(function(t){e(function(e){n.get(t)})})},i=function(){return L.nu(e)},a=function(){var t=null;return H(function(e){null===t&&(t=i()),t.get(e)})};return{map:n,bind:r,anonBind:o,toLazy:i,toCached:a,get:e}},pure:z},U=function(a,e){return e(function(n){var r=[],o=0,i=function(t){return function(e){r[t]=e,++o>=a.length&&n(r)}};0===a.length?n([]):D(a,function(e,t){e.get(i(t))})})},j=function(e){return U(e,W.nu)},V=function(e,t){var n=A(e,t);return j(n)},q=function(e,t,n){var r=n||Wt(t),o=c(e,zt(t),r);!1===o.cancelled&&b(e,o.content)},$=function(e,t){t=e.dom.encode(t).replace(/\r\n/g,"\n"),t=Gt(t,e.settings.forced_root_block,e.settings.forced_root_block_attrs),q(e,t,!1)},Y=function(e){var t,n,r,o={},i="data:text/mce-internal,";if(e&&(e.getData&&(t=e.getData("Text"))&&0<t.length&&-1===t.indexOf(i)&&(o["text/plain"]=t),e.types))for(n=0;n<e.types.length;n++){r=e.types[n];try{o[r]=e.getData(r)}catch(e){o[r]=""}}return o},X=function(e,t){var n=Y(t.clipboardData||e.getDoc().dataTransfer);return h.isMsEdge()?Ot.extend(n,{"text/html":""}):n},K=function(e,t){return t in e&&0<e[t].length},G=function(e){return K(e,"text/html")||K(e,"text/plain")},J=function(e){var t;return-1!==(t=e.indexOf(","))?e.substr(t+1):null},Q=function(e,t){return!e.images_dataimg_filter||e.images_dataimg_filter(t)},Z=function(e,t){var n=t.match(/([\s\S]+?)\.(?:jpeg|jpg|png|gif)$/i);return n?e.dom.encode(n[1]):null},ee=h.createIdGenerator("mceclip"),te=function(e,t){var n,r,o,i=J(t.uri),a=ee(),u=e.settings.images_reuse_filename&&t.blob.name?Z(e,t.blob.name):a,s=new g.Image;s.src=t.uri,Q(e.settings,s)?(o=r=void 0,(o=(n=e.editorUpload.blobCache).findFirst(function(e){return e.base64()===i}))?r=o:(r=n.create(a,t.blob,i,u),n.add(r)),q(e,'<img src="'+r.blobUri()+'">',!1)):q(e,'<img src="'+t.uri+'">',!1)},ne=function(e){return"paste"===e.type},re=function(e){return V(e,function(r){return W.nu(function(e){var t=r.getAsFile?r.getAsFile():r,n=new window.FileReader;n.onload=function(){e({blob:t,uri:n.result})},n.readAsDataURL(t)})})},oe=function(e){var t=e.items?A(B(e.items),function(e){return e.getAsFile()}):[],n=e.files?B(e.files):[],r=O(0<t.length?t:n,function(e){return/^image\/(jpeg|png|gif|bmp)$/.test(e.type)});return r},ie=function(t,e,n){var r,o=ne(e)?e.clipboardData:e.dataTransfer;return!!(t.settings.paste_data_images&&o&&0<(r=oe(o)).length)&&(e.preventDefault(),re(r).get(function(e){n&&t.selection.setRng(n),D(e,function(e){te(t,e)})}),!0)},ae=function(e){var t=e.clipboardData;return-1!==g.navigator.userAgent.indexOf("Android")&&t&&t.items&&0===t.items.length},ue=function(e){return Pt.metaKeyPressed(e)&&86===e.keyCode||e.shiftKey&&45===e.keyCode},se=function(u,s,c){var l,f,d=0;function m(e,t,n,r){var o,i;K(e,"text/html")?o=e["text/html"]:(o=s.getHtml(),r=r||Wt(o),s.isDefaultContent(o)&&(n=!0)),o=h.trimHtml(o),s.remove(),i=!1===r&&Kt(o),o.length&&!i||(n=!0),n&&(o=K(e,"text/plain")&&i?e["text/plain"]:h.innerText(o)),s.isDefaultContent(o)?t||u.windowManager.alert("Please use Ctrl+V/Cmd+V keyboard shortcuts to paste contents."):n?$(u,o):q(u,o,r)}u.on("keydown",function(e){function t(e){ue(e)&&!e.isDefaultPrevented()&&s.remove()}if(ue(e)&&!e.isDefaultPrevented()){if((l=e.shiftKey&&86===e.keyCode)&&At.webkit&&-1!==g.navigator.userAgent.indexOf("Version/"))return;if(e.stopImmediatePropagation(),d=(new Date).getTime(),At.ie&&l)return e.preventDefault(),void ut(u,!0);s.remove(),s.create(),u.once("keyup",t),u.once("paste",function(){u.off("keyup",t)})}}),f=function(){return s.getLastRng()||u.selection.getRng()},u.on("paste",function(e){var t=(new Date).getTime(),n=X(u,e),r=(new Date).getTime()-t,o=(new Date).getTime()-d-r<1e3,i="text"===c.get()||l,a=K(n,Ut());l=!1,e.isDefaultPrevented()||ae(e)?s.remove():G(n)||!ie(u,e,f())?(o||e.preventDefault(),!At.ie||o&&!e.ieFake||K(n,"text/html")||(s.create(),u.dom.bind(s.getEl(),"paste",function(e){e.stopPropagation()}),u.getDoc().execCommand("Paste",!1,null),n["text/html"]=s.getHtml()),K(n,"text/html")?(e.preventDefault(),a||(a=Wt(n["text/html"])),m(n,o,i,a)):Dt.setEditorTimeout(u,function(){m(n,o,i,a)},0)):s.remove()})},ce=function(s,e,t){var c;se(s,e,t),s.parser.addNodeFilter("img",function(e,t,n){var r,o=function(e){return e.data&&!0===e.data.paste},i=function(e){e.attr("data-mce-object")||c===At.transparentSrc||e.remove()},a=function(e){return 0===e.indexOf("webkit-fake-url")},u=function(e){return 0===e.indexOf("data:")};if(!s.settings.paste_data_images&&o(n))for(r=e.length;r--;)(c=e[r].attributes.map.src)&&(a(c)?i(e[r]):!s.settings.allow_html_data_urls&&u(c)&&i(e[r]))})},le=function(e){return At.ie&&e.inline?g.document.body:e.getBody()},fe=function(e){return le(e)!==e.getBody()},de=function(t,e,n){fe(t)&&t.dom.bind(e,"paste keyup",function(e){xe(t,n)||t.fire("paste")})},me=function(e,t,n){var r,o=e.dom,i=e.getBody();t.set(e.selection.getRng()),r=e.dom.add(le(e),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},n),(At.ie||At.gecko)&&o.setStyle(r,"left","rtl"===o.getStyle(i,"direction",!0)?65535:-65535),o.bind(r,"beforedeactivate focusin focusout",function(e){e.stopPropagation()}),de(e,r,n),r.focus(),e.selection.select(r,!0)},ge=function(e,t){var n,r;if(he(e)){for(n=void 0,r=t.get();n=e.dom.get("mcepastebin");)e.dom.remove(n),e.dom.unbind(n);r&&e.selection.setRng(r)}t.set(null)},he=function(e){return e.dom.get("mcepastebin")},pe=function(n){var e,t,r,o=function(e,t){e.appendChild(t),n.dom.remove(t,!0)},i=Ot.grep(le(n).childNodes,function(e){return"mcepastebin"===e.id}),a=i.shift();for(Ot.each(i,function(e){o(a,e)}),e=(t=n.dom.select("div[id=mcepastebin]",a)).length-1;0<=e;e--)r=n.dom.create("div"),a.insertBefore(r,t[e]),o(r,t[e]);return a?a.innerHTML:""},ve=function(e){return e.get()},be=function(e,t){return t===e},ye=function(e){return e&&"mcepastebin"===e.id},xe=function(e,t){var n=he(e);return ye(n)&&be(t,n.innerHTML)},we=function(e){var t=Xe(null),n="%MCEPASTEBIN%";return{create:function(){return me(e,t,n)},remove:function(){return ge(e,t)},getEl:function(){return he(e)},getHtml:function(){return pe(e)},getLastRng:function(){return ve(t)},isDefault:function(){return xe(e,n)},isDefaultContent:function(e){return be(n,e)}}},Ce=function(n,e){var t=we(n);return n.on("preInit",function(){return ce(n,t,e)}),{pasteFormat:e,pasteHtml:function(e,t){return q(n,e,t)},pasteText:function(e){return $(n,e)},pasteImageData:function(e,t){return ie(n,e,t)},getDataTransferItems:Y,hasHtmlOrText:G,hasContentType:K}},Se=function(){},Ne=function(e){return!1===At.iOS&&void 0!==e&&"function"==typeof e.setData&&!0!==h.isMsEdge()},Te=function(e,t,n){if(!Ne(e))return!1;try{return e.clearData(),e.setData("text/html",t),e.setData("text/plain",n),e.setData(Ut(),t),!0}catch(e){return!1}},Ee=function(e,t,n,r){Te(e.clipboardData,t.html,t.text)?(e.preventDefault(),r()):n(t.html,r)},ke=function(u){return function(e,t){var n,r,o=Ht(e),i=u.dom.create("div",{contenteditable:"false","data-mce-bogus":"all"}),a=u.dom.create("div",{contenteditable:"true"},o);u.dom.setStyles(i,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),i.appendChild(a),u.dom.add(u.getBody(),i),n=u.selection.getRng(),a.focus(),(r=u.dom.createRng()).selectNodeContents(a),u.selection.setRng(r),setTimeout(function(){u.selection.setRng(n),i.parentNode.removeChild(i),t()},0)}},Re=function(e){return{html:e.selection.getContent({contextual:!0}),text:e.selection.getContent({format:"text"})}},_e=function(e){return!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody())},Ae=function(e){return!e.selection.isCollapsed()||_e(e)},De=function(t){return function(e){Ae(t)&&Ee(e,Re(t),ke(t),function(){setTimeout(function(){t.execCommand("Delete")},0)})}},Oe=function(t){return function(e){Ae(t)&&Ee(e,Re(t),ke(t),Se)}},Pe=function(e){e.on("cut",De(e)),e.on("copy",Oe(e))},Be=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),Me=function(e,t){return Be.getCaretRangeFromPoint(t.clientX,t.clientY,e.getDoc())},Ie=function(e){var t=e["text/plain"];return!!t&&0===t.indexOf("file://")},Le=function(e,t){e.focus(),e.selection.setRng(t)},Fe=function(i,a,u){St.shouldBlockDrop(i)&&i.on("dragend dragover draggesture dragdrop drop drag",function(e){e.preventDefault(),e.stopPropagation()}),St.shouldPasteDataImages(i)||i.on("drop",function(e){var t=e.dataTransfer;t&&t.files&&0<t.files.length&&e.preventDefault()}),i.on("drop",function(e){var t,n,r,o=Me(i,e);e.isDefaultPrevented()||u.get()||(t=a.getDataTransferItems(e.dataTransfer),n=a.hasContentType(t,Ut()),(a.hasHtmlOrText(t)&&!Ie(t)||!a.pasteImageData(e,o))&&o&&St.shouldFilterDrop(i)&&(r=t["mce-internal"]||t["text/html"]||t["text/plain"])&&(e.preventDefault(),Dt.setEditorTimeout(i,function(){i.undoManager.transact(function(){t["mce-internal"]&&i.execCommand("Delete"),Le(i,o),r=h.trimHtml(r),t["text/html"]?a.pasteHtml(r,n):a.pasteText(r)})})))}),i.on("dragstart",function(e){u.set(!0)}),i.on("dragover dragend",function(e){St.shouldPasteDataImages(i)&&!1===u.get()&&(e.preventDefault(),Le(i,Me(i,e))),"dragend"===e.type&&u.set(!1)})},He=function(e){var t,n=e.plugins.paste,r=St.getPreProcess(e);r&&e.on("PastePreProcess",function(e){r.call(n,n,e)}),(t=St.getPostProcess(e))&&e.on("PastePostProcess",function(e){t.call(n,n,e)})},ze=function(e){var t,n;At.webkit&&an(e,sn),At.ie&&(an(e,un),n=cn,(t=e).on("PastePostProcess",function(e){n(t,e.node)}))},We=function(e,t,n){var r=n.control;r.active("text"===t.pasteFormat.get()),e.on("PastePlainTextToggle",function(e){r.active(e.state)})},Ue=function(e,t){var n=function(r){var e,o=[];for(e=1;e<arguments.length;e++)o[e-1]=arguments[e];return function(){var e,t,n=[];for(e=0;e<arguments.length;e++)n[e]=arguments[e];return t=o.concat(n),r.apply(null,t)}}(We,e,t);e.addButton("pastetext",{active:!1,icon:"pastetext",tooltip:"Paste as text",cmd:"mceTogglePlainTextPaste",onPostRender:n}),e.addMenuItem("pastetext",{text:"Paste as text",selectable:!0,active:t.pasteFormat,cmd:"mceTogglePlainTextPaste",onPostRender:n})},Ke.add("paste",function(e){var t,n,r,o,i;if(!1===Je(e))return t=Xe(!1),n=Xe(!1),r=Xe(St.isPasteAsTextEnabled(e)?"text":"html"),o=Ce(e,r),i=ze(e),Ue(e,o),_t(e,o,t),He(e),Pe(e),Fe(e,o,n),Ze(o,i)})}(window),tinymce.PluginManager.requireLangPack("asciimath"),tinymce.create("tinymce.plugins.AsciimathPlugin",{init:function(i,e){var a=this;i.addCommand("mceAsciimath",function(e){null==a.lastAMnode?(existing=i.selection.getContent(),-1==existing.indexOf("class=AM")&&(existing=existing.replace(/<([^>]*)>/g,""),existing=existing.replace(/&(m|n)dash;/g,"-"),existing=existing.replace(/&?nbsp;?/g," "),existing=existing.replace(/&(.*?);/g,"$1"),e&&(existing=e),entity="<span class=AMedit>`"+existing+'<span id="removeme"></span>`</span>&nbsp;',tinymce.isIE&&i.focus(),i.selection.setContent(entity),i.selection.setCursorLocation(i.dom.get("removeme"),0),i.dom.remove("removeme"),a.justinserted=!0,i.nodeChanged(),a.justinserted=null)):e&&i.selection.setContent(" "+e+" ")}),i.addCommand("mceAsciimathDlg",function(){"undefined"==typeof AMTcgiloc&&(AMTcgiloc=""),i.windowManager.open({title:"Math Symbols",file:e+"/amcharmap.htm",width:720,height:380,inline:1},{plugin_url:e,AMTcgiloc:AMTcgiloc})}),i.on("KeyDown",function(e){var t;13==e.keyCode||35==e.keyCode||40==e.keyCode?(t=i.dom.getParent(i.selection.getNode(),"span.AMedit"))&&(i.selection.select(t),i.selection.collapse(!1)):46!=e.keyCode&&8!=e.keyCode||(node=i.selection.getNode(),(t=i.dom.getParent(node,"span.AM"))&&t.parentNode.removeChild(t))}),i.on("KeyPress",function(e){"`"==String.fromCharCode(e.charCode||e.keyCode)&&(null==a.lastAMnode&&(existing=i.selection.getContent(),-1==existing.indexOf("class=AM")&&(existing=existing.replace(/<([^>]*)>/g,""),existing=existing.replace(/&(m|n)dash;/g,"-"),existing=existing.replace(/&?nbsp;?/g," "),existing=existing.replace(/&(.*?);/g,"$1"),entity='<span class="AMedit">`'+existing+'<span id="removeme"></span>`</span>&nbsp;',tinymce.isIE&&i.focus(),i.selection.setContent(entity),i.selection.setCursorLocation(i.dom.get("removeme"),0),i.dom.remove("removeme"),a.justinserted=!0,i.nodeChanged(),a.justinserted=null)),e.stopPropagation?(e.stopPropagation(),e.preventDefault()):(e.cancelBubble=!0,e.returnValue=!1))}),i.addButton("asciimath",{tooltip:"Add New Math",cmd:"mceAsciimath",icon:"mathadd"}),i.addButton("asciimathcharmap",{tooltip:"Math Symbols",cmd:"mceAsciimathDlg",icon:"math"}),i.on("PastePostProcess",function(e){var t,n,r,o=i.dom.select("span.AM",e.node);for(n=0;n<o.length;n++)a.math2ascii(o[n]);for(t=i.dom.select("span[data-asciimath]",e.node),n=0;n<t.length;n++)a.mathjax2ascii(t[n]);for(t=i.dom.select("mjx-container[data-asciimath]",e.node),n=0;n<t.length;n++)r=i.dom.create("span",{"data-asciimath":t[n].getAttribute("data-asciimath")}),t[n].parentNode.replaceChild(r,t[n]),a.mathjax2ascii(r)}),i.on("PreProcess",function(e){var t,n;if(e.get){for(AMtags=i.dom.select("span.AM",e.node),t=0;t<AMtags.length;t++)a.math2ascii(AMtags[t]);for(AMtags=i.dom.select("span.AMedit",e.node),t=0;t<AMtags.length;t++)n=AMtags[t].innerHTML,n="`"+a.cleanmath(n)+"`",AMtags[t].innerHTML=n,AMtags[t].className="AM"}}),i.on("LoadContent",function(e){AMtags=i.dom.select("span.AM");for(var t=0;t<AMtags.length;t++)a.nodeToAM(AMtags[t]);a.loaded=!0}),i.on("SetContent",function(e){if(a.loaded){AMtags=i.dom.select("span.AM");for(var t=0;t<AMtags.length;t++)AMtags[t].innerHTML.match(/(math|img)/)||a.nodeToAM(AMtags[t])}}),i.on("BeforeSetContent",function(e){e.content=e.content.replace(/(<span[^>]+AM.*?<\/span>)</,"$1 <")}),i.on("BeforeExecCommand",function(e){if(null!=a.lastAMnode){if("Superscript"==e.command||"Subscript"==e.command||"Bold"==e.command||"Subscript"==e.command||"mceToggleFormat"==e.command)return void e.preventDefault();if("mceShowCharmap"==e.command)return e.preventDefault(),void i.execCommand("mceAsciimathDlg")}if("mceAsciimath"!=e.command&&"mceAsciimathDlg"!=e.command){AMtags=i.dom.select("span.AM");for(var t=0;t<AMtags.length;t++)a.math2ascii(AMtags[t])}}),i.on("ExecCommand",function(e){var t;if("mceAsciimath"!=e.command&&"mceAsciimathDlg"!=e.command){for(AMtags=i.dom.select("span.AM"),t=0;t<AMtags.length;t++)AMtags[t].innerHTML.match(/(math|img)/)||(AMtags[t].innerHTML=AMtags[t].title,a.nodeToAM(AMtags[t]));for(AMimgs=i.dom.select("img.AMimg"),t=0;t<AMimgs.length;t++)a.imgwrap(i,AMimgs[t])}}),i.on("NodeChange",function(e){var t=!0;if(a.testAMclass(e.element)?p=e.element:p=i.dom.getParent(e.element,a.testAMclass),null!=p)if(a.lastAMnode==p)t=!1;else{if(a.math2ascii(p),p.className="AMedit",null!=a.lastAMnode&&(a.nodeToAM(a.lastAMnode),a.lastAMnode.className="AM"),null==a.justinserted&&p.parentNode.innerHTML.match(/<span[^>]*class="AMedit"[^<]*?<\/span>(\s*<br>)?\s*$/)){for(;"span"!=p.parentNode.lastChild.nodeName.toLowerCase();)p.parentNode.removeChild(p.parentNode.lastChild);p.parentNode.appendChild(i.dom.doc.createTextNode(""))}if(null==a.justinserted&&p.parentNode.innerHTML.match(/^\s*<span[^>]*class="AMedit"/)){for(;"span"!=p.parentNode.firstChild.nodeName.toLowerCase();)p.parentNode.removeChild(p.parentNode.firstChild);p.parentNode.insertBefore(i.dom.doc.createTextNode(""),p.parentNode.firstChild)}null==a.justinserted&&i.selection.setCursorLocation(p,0),a.lastAMnode=p,t=!1}t&&null!=a.lastAMnode&&(a.lastAMnode.innerHTML.match(/`(&nbsp;|\s|\u00a0|&#160;)*`/)||a.lastAMnode.innerHTML.match(/^(&nbsp;|\s|\u00a0|&#160;)*$/)?(p=a.lastAMnode.parentNode,p.removeChild(a.lastAMnode)):(a.nodeToAM(a.lastAMnode),a.lastAMnode.className="AM"),a.lastAMnode=null)}),i.on("Deactivate",function(e){null!=a.lastAMnode&&(a.lastAMnode.innerHTML.match(/`(&nbsp;|\s)*`/)||a.lastAMnode.innerHTML.match(/^(&nbsp;|\s|\u00a0|&#160;)*$/)?(p=a.lastAMnode.parentNode,p.removeChild(a.lastAMnode)):(a.nodeToAM(a.lastAMnode),a.lastAMnode.className="AM"),a.lastAMnode=null)})},getInfo:function(){return{longname:"Asciimath plugin",author:"David Lippman",authorurl:"http://dlippman.imathas.com",infourl:"",version:"4.0"}},math2ascii:function(e){var t=e.innerHTML;-1==t.indexOf("`")&&(t=(t=(t=(t=(t=""!=e.title&&-1==e.title.indexOf("math")&&-1==e.title.indexOf("img")?e.title:-1==t.indexOf("title")?(t=(t=(t=t.replace(/.+alt=\"(.*?)\".+/g,"$1")).replace(/.+alt=\'(.*?)\'.+/g,"$1")).replace(/.+alt=([^>]*?)\s.*>.*/g,"$1")).replace(/.+alt=(.*?)>.*/g,"$1"):(t=(t=(t=t.replace(/.+title=\"(.*?)\".+/g,"$1")).replace(/.+title=\'(.*?)\'.+/g,"$1")).replace(/.+title=([^>]*?)\s.*>.*/g,"$1")).replace(/.+title=(.*?)>.*/g,"$1")).replace(/<span[^>]*>(.*?)<\/span>/,"$1")).replace(/<br\s*\/>/," ")).replace(/>/g,"&gt;")).replace(/</g,"&lt;"),t="`"+this.cleanmath(t)+"`",e.innerHTML=t)},mathjax2ascii:function(e){for(var t=e.getAttribute("data-asciimath"),n=e.attributes,r=n.length;r--;)e.removeAttribute(n[r].name);e.className="AM",e.title=t,e.innerHTML="`"+t+"`"},nodeToAM:function(e){var t,n,r=e.innerHTML.replace(/\`/g,"");r=(r=r.replace(/<span[^>]*>(.*?)<\/span>/,"$1").replace(/<br\s*\/>/," ").replace(/<img[^>]*title="(.*?)".*?>/g,"$1")).replace(/[\u200B-\u200D\uFEFF]/g,""),tinymce.isIE?((t=document.createElement("span")).className="AM",t.appendChild(AMTparseMath(r)),e.innerHTML=t.innerHTML,e.title=r):(n="`"+this.cleanmath(r)+"`",e.innerHTML=n,AMprocessNode(e),e.title=n.replace(/\`/g,""))},cleanmath:function(e){return e.replace(/\`/g,"").replace(/<([^>]*)>/g,"").replace(/&(m|n)dash;/g,"-").replace(/&?nbsp;?/g," ").replace(/&(.*?);/g,function(e,t){return"lt"==t||"gt"==t?e:t})},imgwrap:function(e,t){var n,r;p=e.dom.getParent(t,this.testAMclass),null==p&&((n=document.createElement("span")).className="AM",r=t.parentNode.replaceChild(n,t),n.appendChild(r),p=n)},lastAMnode:null,loaded:!1,preventAMrender:!1,testAMclass:function(e){return"AM"==e.className||"AMedit"==e.className}}),tinymce.PluginManager.add("asciimath",tinymce.plugins.AsciimathPlugin),tinymce.PluginManager.requireLangPack("asciisvg"),tinymce.create("tinymce.plugins.AsciisvgPlugin",{init:function(r,e){var n=this;r.addCommand("mceAsciisvg",function(){el=r.selection.getNode(),"IMG"!=el.nodeName||""==r.dom.getAttrib(el,"sscr")&&!r.dom.getAttrib(el,"src").match(/sscr=/)?(isnew=!0,sscr="-7.5,7.5,-5,5,1,1,1,1,1,300,200",elwidth=300,elheight=200,alignm="middle"):(sscr=r.dom.getAttrib(el,"sscr"),""==sscr&&(sscr=r.dom.getAttrib(el,"src"),sscr=decodeURIComponent(sscr.replace(/.*sscr=(.*)/,"$1"))),isnew=!1,elwidth=parseInt(r.dom.getStyle(el,"width")),elheight=parseInt(r.dom.getStyle(el,"height")),alignm=r.dom.getStyle(el,"float"),"none"==alignm&&(alignm=r.dom.getStyle(el,"vertical-align"))),r.windowManager.open({title:"Graph Editor",file:e+"/asciisvgdlg.htm",width:670,height:460,inline:1},{plugin_url:e,isnew:isnew,sscr:sscr,width:elwidth,height:elheight,alignm:alignm,AScgiloc:r.getParam("AScgiloc")})}),r.addButton("asciisvg",{tooltip:"Add/Edit Graph",cmd:"mceAsciisvg",icon:"graph",stateSelector:"img[data-asciisvg]"}),r.on("PostProcess",function(e){var t,n;if(e.get&&null!=(t=e.content.match(/<img[^>]*sscr[^>]*>/gi)))for(n=0;n<t.length;n++)t[n].match(/sscr=\"/)?sscr=t[n].replace(/.*sscr=\"(.*?)\".*/,"$1"):sscr=t[n].replace(/.*sscr=(.*?)(\s|\").*/,"$1"),t[n].match(/style=\"/)?style=t[n].replace(/.*style=\"(.*?)\".*/,"$1"):style="",rep='<embed type="image/svg+xml" style="'+style+'" sscr="'+decodeURIComponent(sscr)+'" />',e.content=e.content.replace(t[n],rep)}),r.on("BeforeSetContent",function(e){var t,n=e.content.match(/<embed[^>]*sscr[^>]*>/gi);if(null!=n)for(t=0;t<n.length;t++)n[t].match(/sscr=\"/)?sscr=n[t].replace(/.*sscr=\"(.*?)\".*/,"$1"):sscr=n[t].replace(/.*sscr=(.*?)\s.*/,"$1"),n[t].match(/style=\"/)?style=n[t].replace(/.*style=\"(.*?)\".*/,"$1"):style="",rep='<img src="'+r.getParam("AScgiloc")+"?sscr="+encodeURIComponent(sscr)+'" style="'+style+'" data-sscr="'+decodeURIComponent(sscr)+'" data-asciisvg="1" data-mce-placeholder="1"/>',e.content=e.content.replace(n[t],rep)}),r.on("ObjectResized",function(e){var t=e.target;"IMG"==t.nodeName&&""!=r.dom.getAttrib(t,"data-sscr")&&setTimeout(function(){n.processresize(r,t)},50)})},getInfo:function(){return{longname:"Asciisvg plugin",author:"David Lippman",authorurl:"http://dlippman.imathas.com",infourl:"",version:"4.3"}},processresize:function(e,t){width=parseInt(t.style.width),height=parseInt(t.style.height),0<width&&0<height&&(sscra=decodeURIComponent(t.getAttribute("data-sscr")).split(","),sscra[9]=width,sscra[10]=height,sscr=sscra.join(","),e.dom.setAttrib(t,"data-sscr",sscr),e.dom.setAttrib(t,"src",e.getParam("AScgiloc")+"?sscr="+encodeURIComponent(sscr)),e.dom.setStyle(t,"width",width+"px"),e.dom.setStyle(t,"height",height+"px"))}}),tinymce.PluginManager.add("asciisvg",tinymce.plugins.AsciisvgPlugin),tinymce.PluginManager.add("rollups",function(e,t){e.addButton("myEdit",{type:"menubutton",text:"Edit",icon:!1,menu:[e.menuItems.undo,e.menuItems.Redo,{text:"-"},e.menuItems.cut,e.menuItems.copy,e.menuItems.paste,e.menuItems.pastetext,,{text:"-"},e.menuItems.selectall,{text:"-"},e.menuItems.searchreplace]}),e.addButton("myInsert",{type:"menubutton",text:"Insert",icon:!1,menu:[e.menuItems.media,e.menuItems.link,e.menuItems.image,e.menuItems.attach,e.menuItems.snippet,{text:"-"},e.menuItems.charmap,e.menuItems.anchor,{icon:"hr",text:"Horizontal line",onclick:function(){e.execCommand("mceInsertContent",!1,"<hr />")}}]});var n=e.buttons.styleselect;n&&n.menu.items.push(e.menuItems.removeformat)}),function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),o=tinymce.util.Tools.resolve("tinymce.util.Color"),i=function(e,t){e.find("#preview")[0].getEl().style.background=t},a=function(e,t){var n=o(t),r=n.toRgb();e.fromJSON({r:r.r,g:r.g,b:r.b,hex:n.toHex().substr(1)}),i(e,n.toHex())},t=function(e,t,n){var r=e.windowManager.open({title:"Color",items:{type:"container",layout:"flex",direction:"row",align:"stretch",padding:5,spacing:10,items:[{type:"colorpicker",value:n,onchange:function(){var e=this.rgb();r&&(r.find("#r").value(e.r),r.find("#g").value(e.g),r.find("#b").value(e.b),r.find("#hex").value(this.value().substr(1)),i(r,this.value()))}},{type:"form",padding:0,labelGap:5,defaults:{type:"textbox",size:7,value:"0",flex:1,spellcheck:!1,onchange:function(){var e=r.find("colorpicker")[0],t=this.name(),n=this.value();if("hex"===t)return a(r,n="#"+n),void e.value(n);n={r:r.find("#r").value(),g:r.find("#g").value(),b:r.find("#b").value()},e.value(n),a(r,n)}},items:[{name:"r",label:"R",autofocus:1},{name:"g",label:"G"},{name:"b",label:"B"},{name:"hex",label:"#",value:"000000"},{name:"preview",type:"container",border:1}]}]},onSubmit:function(){t("#"+r.toJSON().hex)}});a(r,n)},r=t;e.add("colorpicker",function(n){n.settings.color_picker_callback||(n.settings.color_picker_callback=function(e,t){r(n,e,t)})})}(),function(){var n,e,s={},r=function(e){var t,n,r=s[e],o=r.deps,i=r.defn,a=o.length,u=new Array(a);for(t=0;t<a;++t)u[t]=c(o[t]);if(void 0===(n=i.apply(null,u)))throw"module ["+e+"] returned undefined";r.instance=n},t=function(e,t,n){if("string"!=typeof e)throw"module id must be a string";if(void 0===t)throw"no dependencies for "+e;if(void 0===n)throw"no definition function for "+e;s[e]={deps:t,defn:n,instance:void 0}},c=function(e){var t=s[e];if(void 0===t)throw"module ["+e+"] was undefined";return void 0===t.instance&&r(e),t.instance},o=function(e,t){var n,r=e.length,o=new Array(r);for(n=0;n<r;++n)o.push(c(e[n]));t.apply(null,t)},i={};i.bolt={module:{api:{define:t,require:o,demand:c}}},n=t,(e=function(e,t){n(e,[],function(){return t})})("global!Array",Array),e("global!Error",Error),n("ephox.katamari.api.Fun",["global!Array","global!Error"],function(i,t){var e=function(){},n=function(e,t){return function(){return e(t.apply(null,arguments))}},r=function(e){return function(){return e}},o=function(e){return e},a=function(e,t){return e===t},u=function(r){var e,o=new i(arguments.length-1);for(e=1;e<arguments.length;e++)o[e-1]=arguments[e];return function(){var e,t,n=new i(arguments.length);for(e=0;e<n.length;e++)n[e]=arguments[e];return t=o.concat(n),r.apply(null,t)}},s=function(e){return function(){return!e.apply(null,arguments)}},c=function(e){return function(){throw new t(e)}},l=function(e){return e()},f=function(e){e()},d=r(!1),m=r(!0);return{noop:e,compose:n,constant:r,identity:o,tripleEquals:a,curry:u,not:s,die:c,apply:l,call:f,never:d,always:m}}),e("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),n("tinymce.core.dom.DOMUtils",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.dom.DOMUtils")}),n("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),n("tinymce.core.util.JSON",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.JSON")}),n("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Tools")}),n("tinymce.core.util.XHR",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.XHR")}),n("tinymce.plugins.snippet.core.Snippets",["tinymce.core.util.Tools","tinymce.core.util.XHR"],function(e,r){var t=function(t,n){return function(){var e=t.snippets;"function"!=typeof e?"string"==typeof e?r.send({url:e,success:function(e){n(JSON.parse(e))}}):n(e):e(n)}},n=function(e,t,n){e.dom,e.selection.getContent();e.execCommand("mceInsertContent",!1,n),e.addVisual()};return{createSnippetList:t,insertSnippet:n}}),n("tinymce.plugins.snippet.Plugin",["ephox.katamari.api.Fun","tinymce.core.dom.DOMUtils","tinymce.core.PluginManager","tinymce.core.util.JSON","tinymce.core.util.Tools","tinymce.core.util.XHR","tinymce.plugins.snippet.core.Snippets"],function(t,u,e,n,f,r,d){return e.add("snippet",function(l){function e(e){var s,c,r,t,n,o,i=[],a=[];if(!e||0===e.length)return t=l.translate("No Snippets defined."),t+='<br><a href="'+imasroot+'/course/editsnippets.php" target="_blank">',t+=l.translate("Create some")+"</a>",void l.notificationManager.open({text:t,type:"info"});f.each(e,function(e){i.push({selected:!i.length,text:e.text,value:{items:e.items}})}),f.each(e[0].items,function(e){a.push({selected:!a.length,text:e.text,value:{content:e.content}})}),n=function(e){var t=e.control.value(),n=[];f.each(t.items,function(e){n.push({text:e.text,value:{content:e.content}})}),r.menu=null,r.state.data.menu=r.settings.values=n,r.value(n[0].value),s.find("listbox")[1].fire("select")},o=function(e){var t,n,r,o,i,a,u=e.control.value();u.content&&(c=u.content,t=l,n=s,-1==(r=c).indexOf("<html>")&&(o="",f.each(t.contentCSS,function(e){o+='<link type="text/css" rel="stylesheet" href="'+t.documentBaseURI.toAbsolute(e)+'">'}),-1!=(i=t.settings.body_class||"").indexOf("=")&&(i=(i=t.getParam("body_class","","hash"))[t.id]||""),r="<!DOCTYPE html><html><head>"+o+'</head><body class="'+i+'">'+r+"</body></html>"),(a=n.find("iframe")[0].getEl().contentWindow.document).open(),a.write(r),a.close())},(s=l.windowManager.open({title:"Insert Prewritten Snippet",layout:"flex",direction:"column",align:"stretch",padding:15,spacing:10,items:[{type:"form",flex:0,padding:0,items:[{type:"container",label:"Group",items:{type:"listbox",label:"Group",name:"snippetgroup",values:i,onselect:n}},{type:"container",label:"Snippets",items:{type:"listbox",id:"snippet",label:"Snippets",name:"snippet",values:a,onselect:o,onPostRender:function(){r=this}}}]},{type:"iframe",flex:1,border:1}],buttons:[{text:"Add / Edit Snippets",onclick:function(){window.open(imasroot+"/course/editsnippets.php","_blank"),tinymce.activeEditor.windowManager.close()}},{type:"spacer",flex:1},{text:"Insert",subtype:"primary",onclick:function(){d.insertSnippet(l,!1,c),tinymce.activeEditor.windowManager.close()}},{text:"Cancel",onclick:function(){tinymce.activeEditor.windowManager.close()}}],onsubmit:function(){d.insertSnippet(l,!1,c)},minWidth:Math.min(u.DOM.getViewPort().w,l.getParam("snippet_popup_width",600)),minHeight:Math.min(u.DOM.getViewPort().h,l.getParam("snippet_popup_height",500))})).find("listbox")[0].fire("select")}l.addCommand("mceInsertSnippet",t.curry(d.insertSnippet,l)),void 0!==l.settings.snippets&&!1!==l.settings.snippets&&(l.addButton("snippet",{title:"Insert Prewritten Snippet",onclick:d.createSnippetList(l.settings,e)}),l.addMenuItem("snippet",{text:"Prewritten Snippet",onclick:d.createSnippetList(l.settings,e),context:"insert",icon:"snippet"}))}),function(){}}),c("tinymce.plugins.snippet.Plugin")()}(),function(S){"use strict";var n,m,u,e,t,r,s,v,c,l,f,o,d,g,i,a,h,p,b,y,x,w,C,N,T,E,k,R,_,A,D,O,P,B,M,I,L,F,H,z,W,U,j,V,q,$,Y,X,K,G,J,Q,Z,ee,te,ne,re,oe,ie,ae,ue,se,ce,le,fe,de,me,ge,he,pe,ve,be,ye,xe,we,Ce,Se,Ne,Te,Ee,ke,Re,_e,Ae,De,Oe,Pe,Be,Me,Ie,Le,Fe,He,ze,We,Ue,je,Ve,qe,$e,Ye,Xe,Ke,Ge,Je,Qe,Ze,et,tt,nt,rt,ot,it,at,ut,st,ct,lt,ft,dt,mt,gt,ht,pt,vt,bt,yt,xt,wt,Ct,St,Nt,Tt,Et,kt,Rt,_t,At,Dt,Ot,Pt,Bt,Mt,It,Lt,Ft,Ht,zt,Wt,Ut,jt,Vt,qt,$t,Yt,Xt,Kt,Gt,Jt,Qt,Zt,en,tn,nn,rn,on,an,un,sn,cn,ln,fn,dn,mn,gn,hn,pn,vn,bn,yn,xn,wn,Cn,Sn,Nn,Tn,En,kn,Rn,_n,An,Dn,On,Pn,Bn,Mn,In,Ln,Fn,Hn,zn,Wn,Un,jn,Vn,qn,$n,Yn,Xn,Kn,Gn,Jn,Qn,Zn,er,tr,nr,rr,or,ir,ar,ur,sr,cr,lr,fr,dr,mr,gr,hr,pr,vr,br,yr,xr,wr,Cr,Sr,Nr,Tr,Er,kr,Rr,_r,Ar,Dr,Or,Pr,Br,Mr,Ir,Lr,Fr,Hr,zr,Wr,Ur,jr,Vr,qr,$r,Yr,Xr,Kr,Gr,Jr=tinymce.util.Tools.resolve("tinymce.ThemeManager"),Qr=tinymce.util.Tools.resolve("tinymce.EditorManager"),Zr=tinymce.util.Tools.resolve("tinymce.util.Tools"),eo=function(e){return e.getParam("branding",!0,"boolean")},to=function(e){return!1!==no(e)},no=function(e){return e.getParam("menubar")},ro=function(e){return e.getParam("statusbar",!0,"boolean")},oo=function(e){return e.getParam("toolbar_items_size")},io=function(e){return e.getParam("readonly",!1,"boolean")},ao=function(e){return e.getParam("fixed_toolbar_container")},uo=function(e){return e.getParam("inline_toolbar_position_handler")},so=function(e){return e.getParam("menu")},co=function(e){return e.getParam("removed_menuitems","")},lo=function(e){return e.getParam("min_width",100,"number")},fo=function(e){return e.getParam("min_height",100,"number")},mo=function(e){return e.getParam("max_width",65535,"number")},go=function(e){return e.getParam("max_height",65535,"number")},ho=function(e){return!1===e.settings.skin},po=function(e){return e.getParam("inline",!1,"boolean")},vo=function(e){var t=e.getParam("resize","vertical");return!1===t?"none":"both"===t?"both":"vertical"},bo=function(e){var t,n=e.settings,r=n.skin,o=n.skin_url;return!1!==r&&(t=r||"lightgray",o=o?e.documentBaseURI.toAbsolute(o):Qr.baseURL+"/skins/"+t),o},yo=function(e,t){var n,r,o,i=[];for(n=1;n<10&&(r=e["toolbar"+n]);n++)i.push(r);return o=e.toolbar?[e.toolbar]:[t],0<i.length?i:o},xo=function(e){var t=e.getParam("toolbar"),n="undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image";return!1===t?[]:Zr.isArray(t)?Zr.grep(t,function(e){return 0<e.length}):yo(e.settings,n)},wo=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Co=tinymce.util.Tools.resolve("tinymce.ui.Factory"),So=tinymce.util.Tools.resolve("tinymce.util.I18n"),No=function(e){return e.fire("SkinLoaded")},To=function(e){return e.fire("ResizeEditor")},Eo=function(e){return e.fire("BeforeRenderUI")},ko=No,Ro=To,_o=Eo,Ao=function(t,n){return function(){var e=t.find(n)[0];e&&e.focus(!0)}},Do=function(e,t){e.shortcuts.add("Alt+F9","",Ao(t,"menubar")),e.shortcuts.add("Alt+F10,F10","",Ao(t,"toolbar")),e.shortcuts.add("Alt+F11","",Ao(t,"elementpath")),t.on("cancel",function(){e.focus()})},Oo=Do,Po=tinymce.util.Tools.resolve("tinymce.geom.Rect"),Bo=tinymce.util.Tools.resolve("tinymce.util.Delay"),Mo=function(){var e,t=[];for(e=0;e<arguments.length;e++)t[e]=arguments[e]},Io=function(e){return function(){return e}},Lo=Io(!1),Fo=Io(!0),Ho=Lo,zo=Fo,Wo=function(){return Uo},Uo=(Gr={fold:function(e,t){return e()},is:Ho,isSome:Ho,isNone:zo,getOr:Kr=function(e){return e},getOrThunk:Xr=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:function(){return null},getOrUndefined:function(){},or:Kr,orThunk:Xr,map:Wo,ap:Wo,each:function(){},bind:Wo,flatten:Wo,exists:Ho,forall:zo,filter:Wo,equals:Yr=function(e){return e.isNone()},equals_:Yr,toArray:function(){return[]},toString:Io("none()")},Object.freeze&&Object.freeze(Gr),Gr),jo=function(n){var e=function(){return n},t=function(){return i},r=function(e){return jo(e(n))},o=function(e){return e(n)},i={fold:function(e,t){return t(n)},is:function(e){return n===e},isSome:zo,isNone:Ho,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:t,orThunk:t,map:r,ap:function(e){return e.fold(Wo,function(e){return jo(e(n))})},each:function(e){e(n)},bind:o,flatten:e,exists:o,forall:o,filter:function(e){return e(n)?i:Uo},equals:function(e){return e.is(n)},equals_:function(e,t){return e.fold(Ho,function(e){return t(n,e)})},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return i},Vo=function(e){return null==e?Uo:jo(e)},qo={some:jo,none:Wo,from:Vo},$o=function(e){var t,n,r,o=Xo(e);return o&&"static"!==wo.DOM.getStyle(o,"position",!0)?(t=wo.DOM.getPos(o),n=o.scrollLeft-t.x,r=o.scrollTop-t.y,qo.some({x:n,y:r})):qo.none()},Yo=function(e,t){var n=wo.DOM.select(e.settings.ui_container)[0];t.getRoot().uiContainer=n},Xo=function(e){return e?e.getRoot().uiContainer:null},Ko=function(e,t){return t.uiContainer=Xo(e)},Go={getUiContainerDelta:$o,setUiContainer:Yo,getUiContainer:Xo,inheritUiContainer:Ko},Jo=function(r,e,o){var i,a=[];if(e)return Zr.each(e.split(/[ ,]/),function(t){var e,n=function(){var e=r.selection;t.settings.stateSelector&&e.selectorChanged(t.settings.stateSelector,function(e){t.active(e)},!0),t.settings.disabledStateSelector&&e.selectorChanged(t.settings.disabledStateSelector,function(e){t.disabled(e)})};"|"===t?i=null:(i||(i={type:"buttongroup",items:[]},a.push(i)),r.buttons[t]&&(e=t,"function"==typeof(t=r.buttons[e])&&(t=t()),t.type=t.type||"button",t.size=o,t=Co.create(t),i.items.push(t),r.initialized?n():r.on("init",n)))}),{type:"toolbar",layout:"flow",items:a}},Qo=function(t,n){var r=[],o=function(e){e&&r.push(Jo(t,e,n))};if(Zr.each(xo(t),function(e){o(e)}),r.length)return{type:"panel",layout:"stack",classes:"toolbar-grp",ariaRoot:!0,ariaRemember:!0,items:r}},Zo=Jo,ei=Qo,ti=wo.DOM,ni=function(e){return{left:e.x,top:e.y,width:e.w,height:e.h,right:e.x+e.w,bottom:e.y+e.h}},ri=function(e){Zr.each(e.contextToolbars,function(e){e.panel&&e.panel.hide()})},oi=function(e,t){e.moveTo(t.left,t.top)},ii=function(n,r,o){r=r?r.substr(0,2):"",Zr.each({t:"down",b:"up"},function(e,t){n.classes.toggle("arrow-"+e,o(t,r.substr(0,1)))}),Zr.each({l:"left",r:"right"},function(e,t){n.classes.toggle("arrow-"+e,o(t,r.substr(1,1)))})},ai=function(e,t,n,r,o,i){return i=ni({x:t,y:n,w:i.w,h:i.h}),e&&(i=e({elementRect:ni(r),contentAreaRect:ni(o),panelRect:i})),i},ui=function(d){var r,i=function(){return d.contextToolbars||[]},m=function(e){var t,n,r;return t=ti.getPos(d.getContentAreaContainer()),n=d.dom.getRect(e),"BODY"===(r=d.dom.getRoot()).nodeName&&(n.x-=r.ownerDocument.documentElement.scrollLeft||r.scrollLeft,n.y-=r.ownerDocument.documentElement.scrollTop||r.scrollTop),n.x+=t.x,n.y+=t.y,n},n=function(e,t){var n,r,o,i,a,u,s,c,l,f=uo(d);d.removed||(e&&e.toolbar.panel?(s=["bc-tc","tc-bc","tl-bl","bl-tl","tr-br","br-tr"],a=e.toolbar.panel,t&&a.show(),o=m(e.element),r=ti.getRect(a.getEl()),i=ti.getRect(d.getContentAreaContainer()||d.getBody()),c=Go.getUiContainerDelta(a).getOr({x:0,y:0}),o.x+=c.x,o.y+=c.y,r.x+=c.x,r.y+=c.y,i.x+=c.x,i.y+=c.y,"inline"!==ti.getStyle(e.element,"display",!0)&&(l=e.element.getBoundingClientRect(),o.w=l.width,o.h=l.height),d.inline||(i.w=d.getDoc().documentElement.offsetWidth),d.selection.controlSelection.isResizable(e.element)&&o.w<25&&(o=Po.inflate(o,0,8)),n=Po.findBestRelativePosition(r,o,i,s),o=Po.clamp(o,i),n?(u=Po.relativePosition(r,o,n),oi(a,ai(f,u.x,u.y,o,i,r))):(i.h+=r.h,(o=Po.intersect(i,o))?(n=Po.findBestRelativePosition(r,o,i,["bc-tc","bl-tl","br-tr"]))?(u=Po.relativePosition(r,o,n),oi(a,ai(f,u.x,u.y,o,i,r))):oi(a,ai(f,o.x,o.y,o,i,r)):a.hide()),ii(a,n,function(e,t){return e===t})):ri(d))},o=function(e){return function(){Bo.requestAnimationFrame(function(){d.selection&&n(s(d.selection.getNode()),e)})}},a=function(e){var t,n;r||(t=o(!0),n=Go.getUiContainer(e),r=d.selection.getScrollContainer()||d.getWin(),ti.bind(r,"scroll",t),ti.bind(n,"scroll",t),d.on("remove",function(){ti.unbind(r,"scroll",t),ti.unbind(n,"scroll",t)}))},t=function(e){var t;if(e.toolbar.panel)return e.toolbar.panel.show(),void n(e);t=Co.create({type:"floatpanel",role:"dialog",classes:"tinymce tinymce-inline arrow",ariaLabel:"Inline toolbar",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:!0,fixed:!0,border:1,items:Zo(d,e.toolbar.items),oncancel:function(){d.focus()}}),Go.setUiContainer(d,t),a(t),(e.toolbar.panel=t).renderTo().reflow(),n(e)},u=function(){Zr.each(i(),function(e){e.panel&&e.panel.hide()})},s=function(e){var t,n,r=i(),o=d.$(e).parents().add(e);for(t=o.length-1;0<=t;t--)for(n=r.length-1;0<=n;n--)if(r[n].predicate(o[t]))return{toolbar:r[n],element:o[t]};return null};d.on("click keyup setContent ObjectResized",function(e){("setcontent"!==e.type||e.selection)&&Bo.setEditorTimeout(d,function(){var e;(e=s(d.selection.getNode()))?(u(),t(e)):u()})}),d.on("blur hide contextmenu",u),d.on("ObjectResizeStart",function(){var e=s(d.selection.getNode());e&&e.toolbar.panel&&e.toolbar.panel.hide()}),d.on("ResizeEditor ResizeWindow",o(!0)),d.on("nodeChange",o(!1)),d.on("remove",function(){Zr.each(i(),function(e){e.panel&&e.panel.remove()}),d.contextToolbars={}}),d.shortcuts.add("ctrl+F9","",function(){var e=s(d.selection.getNode());e&&e.toolbar.panel&&e.toolbar.panel.items()[0].focus()})},si=ui,ci=function(e){if(null===e)return"null";var t=typeof e;return"object"===t&&Array.prototype.isPrototypeOf(e)?"array":"object"===t&&String.prototype.isPrototypeOf(e)?"string":t},li=function(t){return function(e){return ci(e)===t}},fi=li("function"),di=li("number"),mi=(Vr=Array.prototype.indexOf,qr=function(e,t){return Vr.call(e,t)},$r=function(e,t){return Ci(e,t)},void 0===Vr?$r:qr),gi=function(e,t){var n=mi(e,t);return-1===n?qo.none():qo.some(n)},hi=function(e,t){return wi(e,t).isSome()},pi=function(e,t){var n,r,o=e.length,i=new Array(o);for(n=0;n<o;n++)r=e[n],i[n]=t(r,n,e);return i},vi=function(e,t){var n,r;for(n=0,r=e.length;n<r;n++)t(e[n],n,e)},bi=function(e,t){var n,r,o,i=[];for(n=0,r=e.length;n<r;n++)t(o=e[n],n,e)&&i.push(o);return i},yi=function(e,t,n){return vi(e,function(e){n=t(n,e)}),n},xi=function(e,t){var n,r,o;for(n=0,r=e.length;n<r;n++)if(t(o=e[n],n,e))return qo.some(o);return qo.none()},wi=function(e,t){var n,r;for(n=0,r=e.length;n<r;n++)if(t(e[n],n,e))return qo.some(n);return qo.none()},Ci=function(e,t){for(var n=0,r=e.length;n<r;++n)if(e[n]===t)return n;return-1},Si=Array.prototype.push,Ni=function(e){var t,n,r=[];for(t=0,n=e.length;t<n;++t){if(!Array.prototype.isPrototypeOf(e[t]))throw new Error("Arr.flatten item "+t+" was not an array, input: "+e);Si.apply(r,e[t])}return r},Ti=(Array.prototype.slice,fi(Array.from)&&Array.from,{file:{title:"File",items:"newdocument restoredraft | preview | print"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen"},insert:{title:"Insert",items:"image link media template codesample inserttable | charmap hr | pagebreak nonbreaking anchor toc | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | blockformats align | removeformat"},tools:{title:"Tools",items:"spellchecker spellcheckerlanguage | a11ycheck code"},table:{title:"Table"},help:{title:"Help"}}),Ei=function(){return{name:"|",item:{text:"|"}}},ki=function(e,t){var n=t?{name:e,item:t}:null;return"|"===e?Ei():n},Ri=function(e,t){return wi(e,function(e){return e.name===t}).isSome()},_i=function(e){return e&&"|"===e.item.text},Ai=function(e,t){var n=bi(e,function(e){return!1===t.hasOwnProperty(e.name)}),r=bi(n,function(e,t,n){return!_i(e)||!_i(n[t-1])});return bi(r,function(e,t,n){return!_i(e)||0<t&&t<n.length-1})},Di=function(n,e,t,r){var o,i,a,u;return e?(i=e[r],u=!0):i=Ti[r],i&&(o={text:i.title},a=[],Zr.each((i.items||"").split(/[ ,]/),function(e){var t=ki(e,n[e]);t&&a.push(t)}),u||Zr.each(n,function(e,t){e.context!==r||Ri(a,t)||("before"===e.separator&&a.push(Ei()),e.prependToContext?a.unshift(ki(t,e)):a.push(ki(t,e)),"after"===e.separator&&a.push(Ei()))}),o.menu=pi(Ai(a,t),function(e){return e.item}),!o.menu.length)?null:o},Oi=function(e){var t,n=[],r=so(e);if(r)for(t in r)n.push(t);else for(t in Ti)n.push(t);return n},Pi=function(e){var t,n,r,o=[],i=Oi(e),a=Zr.makeMap(co(e).split(/[ ,]/)),u=no(e),s="string"==typeof u?u.split(/[ ,]/):i;for(t=0;t<s.length;t++)n=s[t],(r=Di(e.menuItems,so(e),a,n))&&o.push(r);return o},Bi=Pi,Mi=wo.DOM,Ii=function(e){return{width:e.clientWidth,height:e.clientHeight}},Li=function(e,t,n){var r,o,i,a;r=e.getContainer(),o=e.getContentAreaContainer().firstChild,i=Ii(r),a=Ii(o),null!==t&&(t=Math.max(lo(e),t),t=Math.min(mo(e),t),Mi.setStyle(r,"width",t+(i.width-a.width)),Mi.setStyle(o,"width",t)),n=Math.max(fo(e),n),n=Math.min(go(e),n),Mi.setStyle(o,"height",n),Ro(e)},Fi=function(e,t,n){var r=e.getContentAreaContainer();Li(e,r.clientWidth+t,r.clientHeight+n)},Hi=Li,zi=Fi,Wi=tinymce.util.Tools.resolve("tinymce.Env"),Ui=function(e){return{element:function(){return e}}},ji=function(e,t,n){var r=e.settings[n];r&&r(Ui(t.getEl("body")))},Vi=function(n,r,e){Zr.each(e,function(e){var t=r.items().filter("#"+e.name)[0];t&&t.visible()&&e.name!==n&&(ji(e,t,"onhide"),t.visible(!1))})},qi=function(e){e.items().each(function(e){e.active(!1)})},$i=function(e,t){return Zr.grep(e,function(e){return e.name===t})[0]},Yi=function(i,a,u){return function(e){var t=e.control,n=t.parents().filter("panel")[0],r=n.find("#"+a)[0],o=$i(u,a);Vi(a,n,u),qi(t.parent()),r&&r.visible()?(ji(o,r,"onhide"),r.hide(),t.active(!1)):(r?r.show():(r=Co.create({type:"container",name:a,layout:"stack",classes:"sidebar-panel",html:""}),n.prepend(r),ji(o,r,"onrender")),ji(o,r,"onshow"),t.active(!0)),Ro(i)}},Xi=function(){return!Wi.ie||11<=Wi.ie},Ki=function(e){return!(!Xi()||!e.sidebars)&&0<e.sidebars.length},Gi=function(n){return{type:"panel",name:"sidebar",layout:"stack",classes:"sidebar",items:[{type:"toolbar",layout:"stack",classes:"sidebar-toolbar",items:Zr.map(n.sidebars,function(e){var t=e.settings;return{type:"button",icon:t.icon,image:t.image,tooltip:t.tooltip,onclick:Yi(n,e.name,n.sidebars)}})}]}},Ji=Ki,Qi=Gi,Zi=function(e){var t=function(){e._skinLoaded=!0,ko(e)};return function(){e.initialized?t():e.on("init",t)}},ea=Zi,ta=wo.DOM,na=function(t){return function(e){t.find("*").disabled("readonly"===e.mode)}},ra=function(e){return{type:"panel",name:"iframe",layout:"stack",classes:"edit-area",border:e,html:""}},oa=function(e){return{type:"panel",layout:"stack",classes:"edit-aria-container",border:"1 0 0 0",items:[ra("0"),Qi(e)]}},ia=function(t,e,n){var r,o,i,a,u,s;return!1===ho(t)&&n.skinUiCss?ta.styleSheetLoader.load(n.skinUiCss,ea(t)):ea(t)(),r=e.panel=Co.create({type:"panel",role:"application",classes:"tinymce",style:"visibility: hidden",layout:"stack",border:1,items:[{type:"container",classes:"top-part",items:[!1===to(t)?null:{type:"menubar",border:"0 0 1 0",items:Bi(t)},ei(t,oo(t))]},Ji(t)?oa(t):ra("1 0 0 0")]}),Go.setUiContainer(t,r),"none"!==vo(t)&&(o={type:"resizehandle",direction:vo(t),onResizeStart:function(){var e=t.getContentAreaContainer().firstChild;i={width:e.clientWidth,height:e.clientHeight}},onResize:function(e){"both"===vo(t)?Hi(t,i.width+e.deltaX,i.height+e.deltaY):Hi(t,null,i.height+e.deltaY)}}),ro(t)&&(a='<a href="https://www.tiny.cloud/?utm_campaign=editor_referral&amp;utm_medium=poweredby&amp;utm_source=tinymce" rel="noopener" target="_blank" role="presentation" tabindex="-1">Tiny</a>',u=So.translate(["Powered by {0}",a]),s=eo(t)?{type:"label",classes:"branding",html:" "+u}:null,r.add({type:"panel",name:"statusbar",classes:"statusbar",layout:"flow",border:"1 0 0 0",ariaRoot:!0,items:[{type:"elementpath",editor:t},o,s]})),_o(t),t.on("SwitchMode",na(r)),r.renderBefore(n.targetNode).reflow(),io(t)&&t.setMode("readonly"),n.width&&ta.setStyle(r.getEl(),"width",n.width),t.on("remove",function(){r.remove(),r=null}),Oo(t,r),si(t),{iframeContainer:r.find("#iframe")[0].getEl(),editorContainer:r.getEl()}},aa=ia,ua=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),sa=0,ca={id:function(){return"mceu_"+sa++},create:function(e,t,n){var r=S.document.createElement(e);return wo.DOM.setAttribs(r,t),"string"==typeof n?r.innerHTML=n:Zr.each(n,function(e){e.nodeType&&r.appendChild(e)}),r},createFragment:function(e){return wo.DOM.createFragment(e)},getWindowSize:function(){return wo.DOM.getViewPort()},getSize:function(e){var t,n,r;return n=e.getBoundingClientRect?(r=e.getBoundingClientRect(),t=Math.max(r.width||r.right-r.left,e.offsetWidth),Math.max(r.height||r.bottom-r.bottom,e.offsetHeight)):(t=e.offsetWidth,e.offsetHeight),{width:t,height:n}},getPos:function(e,t){return wo.DOM.getPos(e,t||ca.getContainer())},getContainer:function(){return Wi.container?Wi.container:S.document.body},getViewPort:function(e){return wo.DOM.getViewPort(e)},get:function(e){return S.document.getElementById(e)},addClass:function(e,t){return wo.DOM.addClass(e,t)},removeClass:function(e,t){return wo.DOM.removeClass(e,t)},hasClass:function(e,t){return wo.DOM.hasClass(e,t)},toggleClass:function(e,t,n){return wo.DOM.toggleClass(e,t,n)},css:function(e,t,n){return wo.DOM.setStyle(e,t,n)},getRuntimeStyle:function(e,t){return wo.DOM.getStyle(e,t,!0)},on:function(e,t,n,r){return wo.DOM.bind(e,t,n,r)},off:function(e,t,n){return wo.DOM.unbind(e,t,n)},fire:function(e,t,n){return wo.DOM.fire(e,t,n)},innerHtml:function(e,t){wo.DOM.setHTML(e,t)}},la=function(e){return"static"===ca.getRuntimeStyle(e,"position")},fa=function(e){return e.state.get("fixed")};function da(e,t,n){var r,o,i,a,u,s,c,l,f,d;return f=m(),i=(o=ca.getPos(t,Go.getUiContainer(e))).x,a=o.y,fa(e)&&la(S.document.body)&&(i-=f.x,a-=f.y),r=e.getEl(),u=(d=ca.getSize(r)).width,s=d.height,c=(d=ca.getSize(t)).width,l=d.height,"b"===(n=(n||"").split(""))[0]&&(a+=l),"r"===n[1]&&(i+=c),"c"===n[0]&&(a+=Math.round(l/2)),"c"===n[1]&&(i+=Math.round(c/2)),"b"===n[3]&&(a-=s),"r"===n[4]&&(i-=u),"c"===n[3]&&(a-=Math.round(s/2)),"c"===n[4]&&(i-=Math.round(u/2)),{x:i,y:a,w:u,h:s}}function ma(){}function ga(e){this.cls=[],this.cls._map={},this.onchange=e||ma,this.prefix=""}function ha(e){return 0<e.nodeType}function pa(n){return n._eventDispatcher||(n._eventDispatcher=new r({scope:n,toggleEvent:function(e,t){t&&r.isNative(e)&&(n._nativeEvents||(n._nativeEvents={}),n._nativeEvents[e]=!0,n.state.get("rendered")&&va(n))}})),n._eventDispatcher}function va(u){var e,t,n,s,r,o,i;function a(e){var t=u.getParentCtrl(e.target);t&&t.fire(e.type,e)}function c(){var e=s._lastHoverCtrl;e&&(e.fire("mouseleave",{target:e.getEl()}),e.parents().each(function(e){e.fire("mouseleave",{target:e.getEl()})}),s._lastHoverCtrl=null)}function l(e){var t,n,r,o=u.getParentCtrl(e.target),i=s._lastHoverCtrl,a=0;if(o!==i){if((n=(s._lastHoverCtrl=o).parents().toArray().reverse()).push(o),i){for((r=i.parents().toArray().reverse()).push(i),a=0;a<r.length&&n[a]===r[a];a++);for(t=r.length-1;a<=t;t--)(i=r[t]).fire("mouseleave",{target:i.getEl()})}for(t=a;t<n.length;t++)(o=n[t]).fire("mouseenter",{target:o.getEl()})}}function f(e){e.preventDefault(),"mousewheel"===e.type?(e.deltaY=-.025*e.wheelDelta,e.wheelDeltaX&&(e.deltaX=-.025*e.wheelDeltaX)):(e.deltaX=0,e.deltaY=e.detail),e=u.fire("wheel",e)}if(r=u._nativeEvents){for((n=u.parents().toArray()).unshift(u),e=0,t=n.length;!s&&e<t;e++)s=n[e]._eventsRoot;for(s||(s=n[n.length-1]||u),u._eventsRoot=s,t=e,e=0;e<t;e++)n[e]._eventsRoot=s;for(o in(i=s._delegates)||(i=s._delegates={}),r){if(!r)return!1;"wheel"!==o||E?("mouseenter"===o||"mouseleave"===o?s._hasMouseEnter||(ua(s.getEl()).on("mouseleave",c).on("mouseover",l),s._hasMouseEnter=1):i[o]||(ua(s.getEl()).on(o,a),i[o]=!0),r[o]=!1):T?ua(u.getEl()).on("mousewheel",f):ua(u.getEl()).on("DOMMouseScroll",f)}}}function ba(e){var i,o,t=e.root;function n(e){return e&&1===e.nodeType}try{i=S.document.activeElement}catch(e){i=S.document.body}function a(e){return n(e=e||i)?e.getAttribute("role"):null}function u(e){for(var t,n=e||i;n=n.parentNode;)if(t=a(n))return t}function r(e){var t=i;if(n(t))return t.getAttribute("aria-"+e)}function s(e){var t=e.tagName.toUpperCase();return"INPUT"===t||"TEXTAREA"===t||"SELECT"===t}function c(e){var o=[];return function e(t){var n,r;if(1===t.nodeType&&"none"!==t.style.display&&!t.disabled)for((s(n=t)&&!n.hidden||O(n)||/^(button|menuitem|checkbox|tab|menuitemcheckbox|option|gridcell|slider)$/.test(a(n)))&&o.push(t),r=0;r<t.childNodes.length;r++)e(t.childNodes[r])}(e||t.getEl()),o}function l(e){var t,n,r;for((n=(e=e||o).parents().toArray()).unshift(e),r=0;r<n.length&&!(t=n[r]).settings.ariaRoot;r++);return t}function f(e,t){return e<0?e=t.length-1:e>=t.length&&(e=0),t[e]&&t[e].focus(),e}function d(e,t){var n,r=-1,o=l();for(t=t||c(o.getEl()),n=0;n<t.length;n++)t[n]===i&&(r=n);r+=e,o.lastAriaIndex=f(r,t)}function m(){"tablist"===u()?d(-1,c(i.parentNode)):o.parent().submenu?v():d(-1)}function g(){var e=a(),t=u();"tablist"===t?d(1,c(i.parentNode)):"menuitem"===e&&"menu"===t&&r("haspopup")?b():d(1)}function h(){d(-1)}function p(){var e=a(),t=u();"menuitem"===e&&"menubar"===t?b():"button"===e&&r("haspopup")?b({key:"down"}):d(1)}function v(){o.fire("cancel")}function b(e){e=e||{},o.fire("click",{target:i,aria:e})}return o=t.getParentCtrl(i),t.on("keydown",function(e){function t(e,t){s(i)||O(i)||"slider"!==a(i)&&!1!==t(e)&&e.preventDefault()}var n,r;if(!e.isDefaultPrevented())switch(e.keyCode){case 37:t(e,m);break;case 39:t(e,g);break;case 38:t(e,h);break;case 40:t(e,p);break;case 27:v();break;case 14:case 13:case 32:t(e,b);break;case 9:n=e,"tablist"===u()?(r=c(o.getEl("body"))[0])&&r.focus():d(n.shiftKey?-1:1),e.preventDefault()}}),t.on("focusin",function(e){i=e.target,o=e.control}),{focusFirst:function(e){var t=l(e),n=c(t.getEl());t.settings.ariaRemember&&"lastAriaIndex"in t?f(t.lastAriaIndex,n):f(0,n)}}}function ya(e){var t,n;if(e.changedTouches)for(t="screenX screenY pageX pageY clientX clientY".split(" "),n=0;n<t.length;n++)e[t[n]]=e.changedTouches[0][t[n]]}function xa(e,g){var h,p,t,v,b,y,x,w,C=g.document||S.document;g=g||{},w=C.getElementById(g.handle||e),t=function(e){var t,n,r,o,i,a,u,s,c,l,f,d,m=(r=C,o=Math.max,i=r.documentElement,a=r.body,u=o(i.scrollWidth,a.scrollWidth),s=o(i.clientWidth,a.clientWidth),c=o(i.offsetWidth,a.offsetWidth),l=o(i.scrollHeight,a.scrollHeight),f=o(i.clientHeight,a.clientHeight),d=o(i.offsetHeight,a.offsetHeight),{width:u<c?s:u,height:l<d?f:l});ya(e),e.preventDefault(),p=e.button,t=w,y=e.screenX,x=e.screenY,n=S.window.getComputedStyle?S.window.getComputedStyle(t,null).getPropertyValue("cursor"):t.runtimeStyle.cursor,h=ua("<div></div>").css({position:"absolute",top:0,left:0,width:m.width,height:m.height,zIndex:2147483647,opacity:1e-4,cursor:n}).appendTo(C.body),ua(C).on("mousemove touchmove",b).on("mouseup touchend",v),g.start(e)},b=function(e){if(ya(e),e.button!==p)return v(e);e.deltaX=e.screenX-y,e.deltaY=e.screenY-x,e.preventDefault(),g.drag(e)},v=function(e){ya(e),ua(C).off("mousemove touchmove",b).off("mouseup touchend",v),h.remove(),g.stop&&g.stop(e)},this.destroy=function(){ua(w).off()},ua(w).on("mousedown touchstart",t)}function wa(e,t){for(;e;){if(e===t)return!0;e=e.parent()}}function Ca(){F||(F=function(e){2!==e.button&&function(e){for(var t,n,r=W.length;r--;)if(n=(t=W[r]).getParentCtrl(e.target),t.settings.autohide){if(n&&(wa(n,t)||t.parent()===n))continue;(e=t.fire("autohide",{target:e.target})).isDefaultPrevented()||t.hide()}}(e)},ua(S.document).on("click touchstart",F))}function Sa(o){var e=ca.getViewPort().y;function t(e,t){var n,r;for(r=0;r<W.length;r++)if(W[r]!==o)for(n=W[r].parent();n&&(n=n.parent());)n===o&&W[r].fixed(e).moveBy(0,t).repaint()}o.settings.autofix&&(o.state.get("fixed")?o._autoFixY>e&&(o.fixed(!1).layoutRect({y:o._autoFixY}).repaint(),t(!1,o._autoFixY-e)):(o._autoFixY=o.layoutRect().y,o._autoFixY<e&&(o.fixed(!0).layoutRect({y:0}).repaint(),t(!0,e-o._autoFixY))))}function Na(e,t){var n,r,o,i=V.zIndex||65535;if(e)U.push(t);else for(n=U.length;n--;)U[n]===t&&U.splice(n,1);if(U.length)for(n=0;n<U.length;n++)U[n].modal&&(i++,r=U[n]),U[n].getEl().style.zIndex=i,U[n].zIndex=i,i++;o=ua("#"+t.classPrefix+"modal-block",t.getContainerElm())[0],r?ua(o).css("z-index",r.zIndex-1):o&&(o.parentNode.removeChild(o),j=!1),V.currentZIndex=i}function Ta(e){var t;for(t=W.length;t--;)W[t]===e&&W.splice(t,1);for(t=U.length;t--;)U[t]===e&&U.splice(t,1)}function Ea(r,o){var i,a,u=this,s=D.classPrefix;u.show=function(e,t){function n(){i&&(ua(r).append('<div class="'+s+"throbber"+(o?" "+s+"throbber-inline":"")+'"></div>'),t&&t())}return u.hide(),i=!0,e?a=Bo.setTimeout(n,e):n(),u},u.hide=function(){var e=r.lastChild;return Bo.clearTimeout(a),e&&-1!==e.className.indexOf("throbber")&&e.parentNode.removeChild(e),i=!1,u}}function ka(e){var t,n="width=device-width,initial-scale=1.0,user-scalable=0,minimum-scale=1.0,maximum-scale=1.0",r=ua("meta[name=viewport]")[0];!1!==Wi.overrideViewPort&&(r||((r=S.document.createElement("meta")).setAttribute("name","viewport"),S.document.getElementsByTagName("head")[0].appendChild(r)),(t=r.getAttribute("content"))&&void 0!==ne&&(ne=t),r.setAttribute("content",e?n:ne))}function Ra(e,t){(function(){for(var e=0;e<te.length;e++)if(te[e]._fullscreen)return!0;return!1})()&&!1===t&&ua([S.document.documentElement,S.document.body]).removeClass(e+"fullscreen")}function _a(e){var t,n="";if(e)for(t=0;t<e.length;t++)n+='<option value="'+e[t]+'">'+e[t]+"</option>";return n}function Aa(e,t,n){return e<t&&(e=t),n<e&&(e=n),e}function Da(e,t,n){e.setAttribute("aria-"+t,n)}function Oa(e,t){var n,r,o,i,a;n="v"===e.settings.orientation?(o="top",r="height","h"):(o="left",r="width","w"),a=e.getEl("handle"),i=((e.layoutRect()[n]||100)-ca.getSize(a)[r])*((t-e._minValue)/(e._maxValue-e._minValue))+"px",a.style[o]=i,a.style.height=e.layoutRect().h+"px",Da(a,"valuenow",t),Da(a,"valuetext",""+e.settings.previewFilter(t)),Da(a,"valuemin",e._minValue),Da(a,"valuemax",e._maxValue)}n=function(e){return{x:0,y:0,w:e.scrollWidth-1,h:e.scrollHeight-1}},m=function(){var e=S.window,t=Math.max(e.pageXOffset,S.document.body.scrollLeft,S.document.documentElement.scrollLeft),n=Math.max(e.pageYOffset,S.document.body.scrollTop,S.document.documentElement.scrollTop),r=e.innerWidth||S.document.documentElement.clientWidth,o=e.innerHeight||S.document.documentElement.clientHeight;return{x:t,y:n,w:r,h:o}},u=function(e){var t=Go.getUiContainer(e);return t&&!fa(e)?n(t):m()},e={testMoveRel:function(e,t){var n,r,o=u(this);for(n=0;n<t.length;n++)if(r=da(this,e,t[n]),fa(this)){if(0<r.x&&r.x+r.w<o.w&&0<r.y&&r.y+r.h<o.h)return t[n]}else if(r.x>o.x&&r.x+r.w<o.w+o.x&&r.y>o.y&&r.y+r.h<o.h+o.y)return t[n];return t[0]},moveRel:function(e,t){"string"!=typeof t&&(t=this.testMoveRel(e,t));var n=da(this,e,t);return this.moveTo(n.x,n.y)},moveBy:function(e,t){var n=this.layoutRect();return this.moveTo(n.x+e,n.y+t),this},moveTo:function(e,t){var n,r,o,i=this;function a(e,t,n){return e<0?0:t<e+n&&(e=t-n)<0?0:e}return i.settings.constrainToViewport&&(n=u(this),r=i.layoutRect(),e=a(e,n.w+n.x,r.w),t=a(t,n.h+n.y,r.h)),(o=Go.getUiContainer(i))&&la(o)&&!fa(i)&&(e-=o.scrollLeft,t-=o.scrollTop),o&&(e+=1,t+=1),i.state.get("rendered")?i.layoutRect({x:e,y:t}).repaint():(i.settings.x=e,i.settings.y=t),i.fire("move",{x:e,y:t}),i}},t=tinymce.util.Tools.resolve("tinymce.util.Class"),r=tinymce.util.Tools.resolve("tinymce.util.EventDispatcher"),s=function(e){var t,n=10;if(e)return"number"==typeof e?{top:e=e||0,left:e,bottom:e,right:e}:(1===(t=(e=e.split(" ")).length)?e[1]=e[2]=e[3]=e[0]:2===t?(e[2]=e[0],e[3]=e[1]):3===t&&(e[3]=e[1]),{top:parseInt(e[0],n)||0,right:parseInt(e[1],n)||0,bottom:parseInt(e[2],n)||0,left:parseInt(e[3],n)||0})},v=function(i,e){function t(e){var t,n,r,o=parseFloat((t=e,(r=i.ownerDocument.defaultView)?(n=r.getComputedStyle(i,null))?(t=t.replace(/[A-Z]/g,function(e){return"-"+e}),n.getPropertyValue(t)):null:i.currentStyle[t]));return isNaN(o)?0:o}return{top:t(e+"TopWidth"),right:t(e+"RightWidth"),bottom:t(e+"BottomWidth"),left:t(e+"LeftWidth")}},Zr.extend(ga.prototype,{add:function(e){return e&&!this.contains(e)&&(this.cls._map[e]=!0,this.cls.push(e),this._change()),this},remove:function(e){if(this.contains(e)){var t=void 0;for(t=0;t<this.cls.length&&this.cls[t]!==e;t++);this.cls.splice(t,1),delete this.cls._map[e],this._change()}return this},toggle:function(e,t){var n=this.contains(e);return n!==t&&(n?this.remove(e):this.add(e),this._change()),this},contains:function(e){return!!this.cls._map[e]},_change:function(){delete this.clsValue,this.onchange.call(this)}}),ga.prototype.toString=function(){var e,t;if(this.clsValue)return this.clsValue;for(e="",t=0;t<this.cls.length;t++)0<t&&(e+=" "),e+=this.prefix+this.cls[t];return e},c=/^([\w\\*]+)?(?:#([\w\-\\]+))?(?:\.([\w\\\.]+))?(?:\[\@?([\w\\]+)([\^\$\*!~]?=)([\w\\]+)\])?(?:\:(.+))?/i,l=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,f=/^\s*|\s*$/g,d=t.extend({init:function(e){var i=this.match;function a(e,t,n){var r;function o(e){e&&t.push(e)}return o(function(t){if(t)return t=t.toLowerCase(),function(e){return"*"===t||e.type===t}}((r=c.exec(e.replace(f,"")))[1])),o(function(t){if(t)return function(e){return e._name===t}}(r[2])),o(function(n){if(n)return n=n.split("."),function(e){for(var t=n.length;t--;)if(!e.classes.contains(n[t]))return!1;return!0}}(r[3])),o(function(n,r,o){if(n)return function(e){var t=e[n]?e[n]():"";return r?"="===r?t===o:"*="===r?0<=t.indexOf(o):"~="===r?0<=(" "+t+" ").indexOf(" "+o+" "):"!="===r?t!==o:"^="===r?0===t.indexOf(o):"$="===r&&t.substr(t.length-o.length)===o:!!o}}(r[4],r[5],r[6])),o(function(r){var t;if(r)return(r=/(?:not\((.+)\))|(.+)/i.exec(r))[1]?(t=u(r[1],[]),function(e){return!i(e,t)}):(r=r[2],function(e,t,n){return"first"===r?0===t:"last"===r?t===n-1:"even"===r?t%2==0:"odd"===r?t%2==1:!!e[r]&&e[r]()})}(r[7])),t.pseudo=!!r[7],t.direct=n,t}function u(e,t){var n,r,o,i=[];do{if(l.exec(""),(r=l.exec(e))&&(e=r[3],i.push(r[1]),r[2])){n=r[3];break}}while(r);for(n&&u(n,t),e=[],o=0;o<i.length;o++)">"!==i[o]&&e.push(a(i[o],[],">"===i[o-1]));return t.push(e),t}this._selectors=u(e,[])},match:function(e,t){var n,r,o,i,a,u,s,c,l,f,d,m,g;for(n=0,r=(t=t||this._selectors).length;n<r;n++){for(g=e,m=0,o=(i=(a=t[n]).length)-1;0<=o;o--)for(c=a[o];g;){if(c.pseudo)for(l=f=(d=g.parent().items()).length;l--&&d[l]!==g;);for(u=0,s=c.length;u<s;u++)if(!c[u](g,l,f)){u=s+1;break}if(u===s){m++;break}if(o===i-1)break;g=g.parent()}if(m===i)return!0}return!1},find:function(e){var t,n,c=[],r=this._selectors;function l(e,t,n){var r,o,i,a,u,s=t[n];for(r=0,o=e.length;r<o;r++){for(u=e[r],i=0,a=s.length;i<a;i++)if(!s[i](u,r,o)){i=a+1;break}if(i===a)n===t.length-1?c.push(u):u.items&&l(u.items(),t,n+1);else if(s.direct)return;u.items&&l(u.items(),t,n)}}if(e.items){for(t=0,n=r.length;t<n;t++)l(e.items(),r[t],0);1<n&&(c=function(e){for(var t,n=[],r=e.length;r--;)(t=e[r]).__checked||(n.push(t),t.__checked=1);for(r=n.length;r--;)delete n[r].__checked;return n}(c))}return o||(o=d.Collection),new o(c)}}),a=Array.prototype.push,h=Array.prototype.slice,i={length:0,init:function(e){e&&this.add(e)},add:function(e){return Zr.isArray(e)?a.apply(this,e):e instanceof g?this.add(e.toArray()):a.call(this,e),this},set:function(e){var t,n=this,r=n.length;for(n.length=0,n.add(e),t=n.length;t<r;t++)delete n[t];return n},filter:function(t){var e,n,r,o,i=this,a=[];for(o="string"==typeof t?(t=new d(t),function(e){return t.match(e)}):t,e=0,n=i.length;e<n;e++)o(r=i[e])&&a.push(r);return new g(a)},slice:function(){return new g(h.apply(this,arguments))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},each:function(e){return Zr.each(this,e),this},toArray:function(){return Zr.toArray(this)},indexOf:function(e){for(var t=this,n=t.length;n--&&t[n]!==e;);return n},reverse:function(){return new g(Zr.toArray(this).reverse())},hasClass:function(e){return!!this[0]&&this[0].classes.contains(e)},prop:function(t,n){var e,r=this;return void 0!==n?(r.each(function(e){e[t]&&e[t](n)}),r):(e=r[0])&&e[t]?e[t]():void 0},exec:function(t){var n=Zr.toArray(arguments).slice(1);return this.each(function(e){e[t]&&e[t].apply(e,n)}),this},remove:function(){for(var e=this.length;e--;)this[e].remove();return this},addClass:function(t){return this.each(function(e){e.classes.add(t)})},removeClass:function(t){return this.each(function(e){e.classes.remove(t)})}},Zr.each("fire on off show hide append prepend before after reflow".split(" "),function(n){i[n]=function(){var t=Zr.toArray(arguments);return this.each(function(e){n in e&&e[n].apply(e,t)}),this}}),Zr.each("text name disabled active selected checked visible parent value data".split(" "),function(t){i[t]=function(e){return this.prop(t,e)}}),g=t.extend(i),d.Collection=g,p=g,(b=function(e){this.create=e.create}).create=function(i,a){return new b({create:function(t,n){var r,e=function(e){t.set(n,e.value)},o=function(e){i.set(a,e.value)};return t.on("change:"+n,o),i.on("change:"+a,e),(r=t._bindings)||(r=t._bindings=[],t.on("destroy",function(){for(var e=r.length;e--;)r[e]()})),r.push(function(){i.off("change:"+a,e)}),i.get(a)}})},y=tinymce.util.Tools.resolve("tinymce.util.Observable"),x=t.extend({Mixins:[y],init:function(e){var t,n;for(t in e=e||{})(n=e[t])instanceof b&&(e[t]=n.create(this,t));this.data=e},set:function(e,t){var n,r,o=this.data[e];if(t instanceof b&&(t=t.create(this,e)),"object"!=typeof e)return function e(t,n){var r,o;if(t===n)return!0;if(null===t||null===n)return t===n;if("object"!=typeof t||"object"!=typeof n)return t===n;if(Zr.isArray(n)){if(t.length!==n.length)return!1;for(r=t.length;r--;)if(!e(t[r],n[r]))return!1}if(ha(t)||ha(n))return t===n;for(r in o={},n){if(!e(t[r],n[r]))return!1;o[r]=!0}for(r in t)if(!o[r]&&!e(t[r],n[r]))return!1;return!0}(o,t)||(this.data[e]=t,r={target:this,name:e,value:t,oldValue:o},this.fire("change:"+e,r),this.fire("change",r)),this;for(n in e)this.set(n,e[n]);return this},get:function(e){return this.data[e]},has:function(e){return e in this.data},bind:function(e){return b.create(this,e)},destroy:function(){this.fire("destroy")}}),w={},N={add:function(e){var t=e.parent();if(t){if(!t._layout||t._layout.isNative())return;w[t._id]||(w[t._id]=t),C||(C=!0,Bo.requestAnimationFrame(function(){var e,t;for(e in C=!1,w)(t=w[e]).state.get("rendered")&&t.reflow();w={}},S.document.body))}},remove:function(e){w[e._id]&&delete w[e._id]}},T="onmousewheel"in S.document,E=!1,_=0,A={Statics:{classPrefix:k="mce-"},isRtl:function(){return R.rtl},classPrefix:k,init:function(t){var e,n,r=this;function o(e){var t;for(e=e.split(" "),t=0;t<e.length;t++)r.classes.add(e[t])}r.settings=t=Zr.extend({},r.Defaults,t),r._id=t.id||"mceu_"+_++,r._aria={role:t.role},r._elmCache={},r.$=ua,r.state=new x({visible:!0,active:!1,disabled:!1,value:""}),r.data=new x(t.data),r.classes=new ga(function(){r.state.get("rendered")&&(r.getEl().className=this.toString())}),r.classes.prefix=r.classPrefix,(e=t.classes)&&(r.Defaults&&(n=r.Defaults.classes)&&e!==n&&o(n),o(e)),Zr.each("title text name visible disabled active value".split(" "),function(e){e in t&&r[e](t[e])}),r.on("click",function(){if(r.disabled())return!1}),r.settings=t,r.borderBox=s(t.border),r.paddingBox=s(t.padding),r.marginBox=s(t.margin),t.hidden&&r.hide()},Properties:"parent,name",getContainerElm:function(){var e=Go.getUiContainer(this);return e||ca.getContainer()},getParentCtrl:function(e){for(var t,n=this.getRoot().controlIdLookup;e&&n&&!(t=n[e.id]);)e=e.parentNode;return t},initLayoutRect:function(){var e,t,n,r,o,i,a,u,s,c,l,f,d,m=this,g=m.settings,h=m.getEl(),p=m.borderBox=m.borderBox||v(h,"border");return m.paddingBox=m.paddingBox||v(h,"padding"),m.marginBox=m.marginBox||v(h,"margin"),s=ca.getSize(h),a=g.minWidth,u=g.minHeight,r=a||s.width,o=u||s.height,t=g.width,n=g.height,i=void 0!==(i=g.autoResize)?i:!t&&!n,t=t||r,n=n||o,c=p.left+p.right,l=p.top+p.bottom,f=g.maxWidth||65535,d=g.maxHeight||65535,m._layoutRect=e={x:g.x||0,y:g.y||0,w:t,h:n,deltaW:c,deltaH:l,contentW:t-c,contentH:n-l,innerW:t-c,innerH:n-l,startMinWidth:a||0,startMinHeight:u||0,minW:Math.min(r,f),minH:Math.min(o,d),maxW:f,maxH:d,autoResize:i,scrollW:0},m._lastLayoutRect={},e},layoutRect:function(e){var t,n,r,o,i,a=this,u=a._layoutRect;return u||(u=a.initLayoutRect()),e?(r=u.deltaW,o=u.deltaH,void 0!==e.x&&(u.x=e.x),void 0!==e.y&&(u.y=e.y),void 0!==e.minW&&(u.minW=e.minW),void 0!==e.minH&&(u.minH=e.minH),void 0!==(n=e.w)&&(n=(n=n<u.minW?u.minW:n)>u.maxW?u.maxW:n,u.w=n,u.innerW=n-r),void 0!==(n=e.h)&&(n=(n=n<u.minH?u.minH:n)>u.maxH?u.maxH:n,u.h=n,u.innerH=n-o),void 0!==(n=e.innerW)&&(n=(n=n<u.minW-r?u.minW-r:n)>u.maxW-r?u.maxW-r:n,u.innerW=n,u.w=n+r),void 0!==(n=e.innerH)&&(n=(n=n<u.minH-o?u.minH-o:n)>u.maxH-o?u.maxH-o:n,u.innerH=n,u.h=n+o),void 0!==e.contentW&&(u.contentW=e.contentW),void 0!==e.contentH&&(u.contentH=e.contentH),(t=a._lastLayoutRect).x===u.x&&t.y===u.y&&t.w===u.w&&t.h===u.h||((i=R.repaintControls)&&i.map&&!i.map[a._id]&&(i.push(a),i.map[a._id]=!0),t.x=u.x,t.y=u.y,t.w=u.w,t.h=u.h),a):u},repaint:function(){var e,t,n,r=this,o=S.document.createRange?function(e){return e}:Math.round,i=r.getEl().style,a=r._layoutRect,u=r._lastRepaintRect||{},s=r.borderBox,c=s.left+s.right,l=s.top+s.bottom;a.x!==u.x&&(i.left=o(a.x)+"px",u.x=a.x),a.y!==u.y&&(i.top=o(a.y)+"px",u.y=a.y),a.w!==u.w&&(n=o(a.w-c),i.width=(0<=n?n:0)+"px",u.w=a.w),a.h!==u.h&&(n=o(a.h-l),i.height=(0<=n?n:0)+"px",u.h=a.h),r._hasBody&&a.innerW!==u.innerW&&(n=o(a.innerW),(t=r.getEl("body"))&&((e=t.style).width=(0<=n?n:0)+"px"),u.innerW=a.innerW),r._hasBody&&a.innerH!==u.innerH&&(n=o(a.innerH),(t=t||r.getEl("body"))&&((e=e||t.style).height=(0<=n?n:0)+"px"),u.innerH=a.innerH),r._lastRepaintRect=u,r.fire("repaint",{},!1)},updateLayoutRect:function(){this.parent()._lastRect=null,ca.css(this.getEl(),{width:"",height:""}),this._layoutRect=this._lastRepaintRect=this._lastLayoutRect=null,this.initLayoutRect()},on:function(e,t){var n,r,o,i=this;return pa(i).on(e,"string"!=typeof(n=t)?n:function(e){return r||i.parentsAndSelf().each(function(e){var t=e.settings.callbacks;if(t&&(r=t[n]))return o=e,!1}),r?r.call(o,e):(e.action=n,void this.fire("execute",e))}),i},off:function(e,t){return pa(this).off(e,t),this},fire:function(e,t,n){var r,o=this;if((t=t||{}).control||(t.control=o),t=pa(o).fire(e,t),!1!==n&&o.parent)for(r=o.parent();r&&!t.isPropagationStopped();)r.fire(e,t,!1),r=r.parent();return t},hasEventListeners:function(e){return pa(this).has(e)},parents:function(e){var t,n=this,r=new p;for(t=n.parent();t;t=t.parent())r.add(t);return e&&(r=r.filter(e)),r},parentsAndSelf:function(e){return new p(this).add(this.parents(e))},next:function(){var e=this.parent().items();return e[e.indexOf(this)+1]},prev:function(){var e=this.parent().items();return e[e.indexOf(this)-1]},innerHtml:function(e){return this.$el.html(e),this},getEl:function(e){var t=e?this._id+"-"+e:this._id;return this._elmCache[t]||(this._elmCache[t]=ua("#"+t)[0]),this._elmCache[t]},show:function(){return this.visible(!0)},hide:function(){return this.visible(!1)},focus:function(){try{this.getEl().focus()}catch(e){}return this},blur:function(){return this.getEl().blur(),this},aria:function(e,t){var n=this.getEl(this.ariaTarget);return void 0===t?this._aria[e]:(this._aria[e]=t,this.state.get("rendered")&&n.setAttribute("role"===e?e:"aria-"+e,t),this)},encode:function(e,t){return!1!==t&&(e=this.translate(e)),(e||"").replace(/[&<>"]/g,function(e){return"&#"+e.charCodeAt(0)+";"})},translate:function(e){return R.translate?R.translate(e):e},before:function(e){var t=this.parent();return t&&t.insert(e,t.items().indexOf(this),!0),this},after:function(e){var t=this.parent();return t&&t.insert(e,t.items().indexOf(this)),this},remove:function(){var t,e,n,r,o=this,i=o.getEl(),a=o.parent();if(o.items)for(e=(n=o.items().toArray()).length;e--;)n[e].remove();return a&&a.items&&(t=[],a.items().each(function(e){e!==o&&t.push(e)}),a.items().set(t),a._lastRect=null),o._eventsRoot&&o._eventsRoot===o&&ua(i).off(),(r=o.getRoot().controlIdLookup)&&delete r[o._id],i&&i.parentNode&&i.parentNode.removeChild(i),o.state.set("rendered",!1),o.state.destroy(),o.fire("remove"),o},renderBefore:function(e){return ua(e).before(this.renderHtml()),this.postRender(),this},renderTo:function(e){return ua(e||this.getContainerElm()).append(this.renderHtml()),this.postRender(),this},preRender:function(){},render:function(){},renderHtml:function(){return'<div id="'+this._id+'" class="'+this.classes+'"></div>'},postRender:function(){var e,t,n,r,o,i,a,u=this,s=u.settings;for(r in u.$el=ua(u.getEl()),u.state.set("rendered",!0),s)0===r.indexOf("on")&&u.on(r.substr(2),s[r]);if(u._eventsRoot){for(n=u.parent();!o&&n;n=n.parent())o=n._eventsRoot;if(o)for(r in o._nativeEvents)u._nativeEvents[r]=!0}for(a in va(u),s.style&&(e=u.getEl())&&(e.setAttribute("style",s.style),e.style.cssText=s.style),u.settings.border&&(t=u.borderBox,u.$el.css({"border-top-width":t.top,"border-right-width":t.right,"border-bottom-width":t.bottom,"border-left-width":t.left})),(i=u.getRoot()).controlIdLookup||(i.controlIdLookup={}),(i.controlIdLookup[u._id]=u)._aria)u.aria(a,u._aria[a]);!1===u.state.get("visible")&&(u.getEl().style.display="none"),u.bindStates(),u.state.on("change:visible",function(e){var t,n=e.value;u.state.get("rendered")&&(u.getEl().style.display=!1===n?"none":"",u.getEl().getBoundingClientRect()),(t=u.parent())&&(t._lastRect=null),u.fire(n?"show":"hide"),N.add(u)}),u.fire("postrender",{},!1)},bindStates:function(){},scrollIntoView:function(e){var t,n,r,o,i,a,u,s,c;return r=(c=function(e,t){var n,r,o=e;for(n=r=0;o&&o!==t&&o.nodeType;)n+=o.offsetLeft||0,r+=o.offsetTop||0,o=o.offsetParent;return{x:n,y:r}}(t=this.getEl(),n=t.parentNode)).x,o=c.y,i=t.offsetWidth,a=t.offsetHeight,u=n.clientWidth,s=n.clientHeight,"end"===e?(r-=u-i,o-=s-a):"center"===e&&(r-=u/2-i/2,o-=s/2-a/2),n.scrollLeft=r,n.scrollTop=o,this},getRoot:function(){for(var e,t,n=this,r=[];n;){if(n.rootControl){e=n.rootControl;break}r.push(n),n=(e=n).parent()}for(e||(e=this),t=r.length;t--;)r[t].rootControl=e;return e},reflow:function(){N.remove(this);var e=this.parent();return e&&e._layout&&!e._layout.isNative()&&e.reflow(),this}},Zr.each("text title visible disabled active value".split(" "),function(t){A[t]=function(e){return 0===arguments.length?this.state.get(t):(void 0!==e&&this.state.set(t,e),this)}}),R=t.extend(A),O=function(e){return!!e.getAttribute("data-mce-tabstop")},P={},B=(D=R).extend({init:function(e){var t=this;t._super(e),(e=t.settings).fixed&&t.state.set("fixed",!0),t._items=new p,t.isRtl()&&t.classes.add("rtl"),t.bodyClasses=new ga(function(){t.state.get("rendered")&&(t.getEl("body").className=this.toString())}),t.bodyClasses.prefix=t.classPrefix,t.classes.add("container"),t.bodyClasses.add("container-body"),e.containerCls&&t.classes.add(e.containerCls),t._layout=Co.create((e.layout||"")+"layout"),t.settings.items?t.add(t.settings.items):t.add(t.render()),t._hasBody=!0},items:function(){return this._items},find:function(e){return(e=P[e]=P[e]||new d(e)).find(this)},add:function(e){return this.items().add(this.create(e)).parent(this),this},focus:function(e){var t,n,r,o=this;if(!e||!(n=o.keyboardNav||o.parents().eq(-1)[0].keyboardNav))return r=o.find("*"),o.statusbar&&r.add(o.statusbar.items()),r.each(function(e){if(e.settings.autofocus)return t=null,!1;e.canFocus&&(t=t||e)}),t&&t.focus(),o;n.focusFirst(o)},replace:function(e,t){for(var n,r=this.items(),o=r.length;o--;)if(r[o]===e){r[o]=t;break}0<=o&&((n=t.getEl())&&n.parentNode.removeChild(n),(n=e.getEl())&&n.parentNode.removeChild(n)),t.parent(this)},create:function(e){var t,n=this,r=[];return Zr.isArray(e)||(e=[e]),Zr.each(e,function(e){e&&(e instanceof D||("string"==typeof e&&(e={type:e}),t=Zr.extend({},n.settings.defaults,e),e.type=t.type=t.type||e.type||n.settings.defaultType||(t.defaults?t.defaults.type:null),e=Co.create(t)),r.push(e))}),r},renderNew:function(){var r=this;return r.items().each(function(e,t){var n;e.parent(r),e.state.get("rendered")||((n=r.getEl("body")).hasChildNodes()&&t<=n.childNodes.length-1?ua(n.childNodes[t]).before(e.renderHtml()):ua(n).append(e.renderHtml()),e.postRender(),N.add(e))}),r._layout.applyClasses(r.items().filter(":visible")),r._lastRect=null,r},append:function(e){return this.add(e).renderNew()},prepend:function(e){return this.items().set(this.create(e).concat(this.items().toArray())),this.renderNew()},insert:function(e,t,n){var r,o,i,a=this;return e=a.create(e),r=a.items(),!n&&t<r.length-1&&(t+=1),0<=t&&t<r.length&&(o=r.slice(0,t).toArray(),i=r.slice(t).toArray(),r.set(o.concat(e,i))),a.renderNew()},fromJSON:function(e){var t,n=this;for(t in e)n.find("#"+t).value(e[t]);return n},toJSON:function(){var r={};return this.find("*").each(function(e){var t=e.name(),n=e.value();t&&void 0!==n&&(r[t]=n)}),r},renderHtml:function(){var e=this._layout,t=this.settings.role;return this.preRender(),e.preRender(this),'<div id="'+this._id+'" class="'+this.classes+'"'+(t?' role="'+this.settings.role+'"':"")+'><div id="'+this._id+'-body" class="'+this.bodyClasses+'">'+(this.settings.html||"")+e.renderHtml(this)+"</div></div>"},postRender:function(){var e,t=this;return t.items().exec("postRender"),t._super(),t._layout.postRender(t),t.state.set("rendered",!0),t.settings.style&&t.$el.css(t.settings.style),t.settings.border&&(e=t.borderBox,t.$el.css({"border-top-width":e.top,"border-right-width":e.right,"border-bottom-width":e.bottom,"border-left-width":e.left})),t.parent()||(t.keyboardNav=ba({root:t})),t},initLayoutRect:function(){var e=this._super();return this._layout.recalc(this),e},recalc:function(){var e=this,t=e._layoutRect,n=e._lastRect;if(!n||n.w!==t.w||n.h!==t.h)return e._layout.recalc(e),t=e.layoutRect(),e._lastRect={x:t.x,y:t.y,w:t.w,h:t.h},!0},reflow:function(){var e;if(N.remove(this),this.visible()){for(D.repaintControls=[],D.repaintControls.map={},this.recalc(),e=D.repaintControls.length;e--;)D.repaintControls[e].repaint();"flow"!==this.settings.layout&&"stack"!==this.settings.layout&&this.repaint(),D.repaintControls=[]}return this}}),M={init:function(){this.on("repaint",this.renderScroll)},renderScroll:function(){var p=this,v=2;function n(){var g,h,e;function t(e,t,n,r,o,i){var a,u,s,c,l,f,d,m=p.getEl("scroll"+e);if(m){if(f=t.toLowerCase(),d=n.toLowerCase(),ua(p.getEl("absend")).css(f,p.layoutRect()[r]-1),!o)return void ua(m).css("display","none");ua(m).css("display","block"),a=p.getEl("body"),u=p.getEl("scroll"+e+"t"),s=a["client"+n]-2*v,c=(s-=g&&h?m["client"+i]:0)/a["scroll"+n],(l={})[f]=a["offset"+t]+v,l[d]=s,ua(m).css(l),(l={})[f]=a["scroll"+t]*c,l[d]=s*c,ua(u).css(l)}}e=p.getEl("body"),g=e.scrollWidth>e.clientWidth,h=e.scrollHeight>e.clientHeight,t("h","Left","Width","contentW",g,"Height"),t("v","Top","Height","contentH",h,"Width")}p.settings.autoScroll&&(p._hasScroll||(p._hasScroll=!0,function(){function e(a,u,s,c,l){var f,e=p._id+"-scroll"+a,t=p.classPrefix;ua(p.getEl()).append('<div id="'+e+'" class="'+t+"scrollbar "+t+"scrollbar-"+a+'"><div id="'+e+'t" class="'+t+'scrollbar-thumb"></div></div>'),p.draghelper=new xa(e+"t",{start:function(){f=p.getEl("body")["scroll"+u],ua("#"+e).addClass(t+"active")},drag:function(e){var t,n=p.layoutRect(),r=n.contentW>n.innerW,o=n.contentH>n.innerH,i=p.getEl("body")["client"+s]-2*v;t=(i-=r&&o?p.getEl("scroll"+a)["client"+l]:0)/p.getEl("body")["scroll"+s],p.getEl("body")["scroll"+u]=f+e["delta"+c]/t},stop:function(){ua("#"+e).removeClass(t+"active")}})}p.classes.add("scroll"),e("v","Top","Height","Y","Width"),e("h","Left","Width","X","Height")}(),p.on("wheel",function(e){var t=p.getEl("body");t.scrollLeft+=10*(e.deltaX||0),t.scrollTop+=10*e.deltaY,n()}),ua(p.getEl("body")).on("scroll",n)),n())}},I=B.extend({Defaults:{layout:"fit",containerCls:"panel"},Mixins:[M],renderHtml:function(){var e=this,t=e._layout,n=e.settings.html;return e.preRender(),t.preRender(e),void 0===n?n='<div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+t.renderHtml(e)+"</div>":("function"==typeof n&&(n=n.call(e)),e._hasBody=!1),'<div id="'+e._id+'" class="'+e.classes+'" hidefocus="1" tabindex="-1" role="group">'+(e._preBodyHtml||"")+n+"</div>"}}),L={resizeToContent:function(){this._layoutRect.autoResize=!0,this._lastRect=null,this.reflow()},resizeTo:function(e,t){if(e<=1||t<=1){var n=ca.getWindowSize();e=e<=1?e*n.w:e,t=t<=1?t*n.h:t}return this._layoutRect.autoResize=!1,this.layoutRect({minW:e,minH:t,w:e,h:t}).reflow()},resizeBy:function(e,t){var n=this.layoutRect();return this.resizeTo(n.w+e,n.h+t)}},W=[],U=[],(V=I.extend({Mixins:[e,L],init:function(e){var t,n,r,o=this;o._super(e),(o._eventsRoot=o).classes.add("floatpanel"),e.autohide&&(Ca(),z||(t=S.document.documentElement,n=t.clientWidth,r=t.clientHeight,z=function(){S.document.all&&n===t.clientWidth&&r===t.clientHeight||(n=t.clientWidth,r=t.clientHeight,V.hideAll())},ua(S.window).on("resize",z)),W.push(o)),e.autofix&&(H||(H=function(){var e;for(e=W.length;e--;)Sa(W[e])},ua(S.window).on("scroll",H)),o.on("move",function(){Sa(this)})),o.on("postrender show",function(e){var t,n;e.control===o&&(n=o.classPrefix,o.modal&&!j&&((t=ua("#"+n+"modal-block",o.getContainerElm()))[0]||(t=ua('<div id="'+n+'modal-block" class="'+n+"reset "+n+'fade"></div>').appendTo(o.getContainerElm())),Bo.setTimeout(function(){t.addClass(n+"in"),ua(o.getEl()).addClass(n+"in")}),j=!0),Na(!0,o))}),o.on("show",function(){o.parents().each(function(e){if(e.state.get("fixed"))return o.fixed(!0),!1})}),e.popover&&(o._preBodyHtml='<div class="'+o.classPrefix+'arrow"></div>',o.classes.add("popover").add("bottom").add(o.isRtl()?"end":"start")),o.aria("label",e.ariaLabel),o.aria("labelledby",o._id),o.aria("describedby",o.describedBy||o._id+"-none")},fixed:function(e){var t,n=this;return n.state.get("fixed")!==e&&(n.state.get("rendered")&&(t=ca.getViewPort(),e?n.layoutRect().y-=t.y:n.layoutRect().y+=t.y),n.classes.toggle("fixed",e),n.state.set("fixed",e)),n},show:function(){for(var e=this,t=e._super(),n=W.length;n--&&W[n]!==e;);return-1===n&&W.push(e),t},hide:function(){return Ta(this),Na(!1,this),this._super()},hideAll:function(){V.hideAll()},close:function(){return this.fire("close").isDefaultPrevented()||(this.remove(),Na(!1,this)),this},remove:function(){Ta(this),this._super()},postRender:function(){return this.settings.bodyRole&&this.getEl("body").setAttribute("role",this.settings.bodyRole),this._super()}})).hideAll=function(){for(var e,t=W.length;t--;)(e=W[t])&&e.settings.autohide&&(e.hide(),W.splice(t,1))},q=function(){try{return window.self!==window.top}catch(e){return!0}},$=function(e,t){return!(!e||t.settings.ui_container)},Y=function(a,e,t){var u,n,r,o,i,s,c=wo.DOM,l=ao(a);return l&&(n=c.select(l)[0]),r=function(){var e,t,n,r,o,i;u&&u.moveRel&&u.visible()&&!u._fixed&&(e=a.selection.getScrollContainer(),t=a.getBody(),r=n=0,e&&(o=c.getPos(t),i=c.getPos(e),n=Math.max(0,i.x-o.x),r=Math.max(0,i.y-o.y)),u.fixed(!1).moveRel(t,a.rtl?["tr-br","br-tr"]:["tl-bl","bl-tl","tr-br"]).moveBy(n,r))},o=function(){u&&(u.show(),r(),c.addClass(a.getBody(),"mce-edit-focus"))},i=function(){u&&(u.hide(),V.hideAll(),c.removeClass(a.getBody(),"mce-edit-focus"))},s=function(){u?u.visible()||o():(u=e.panel=Co.create({type:n?"panel":"floatpanel",role:"application",classes:"tinymce tinymce-inline",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:!0,fixed:$(n,a),border:1,items:[!1===to(a)?null:{type:"menubar",border:"0 0 1 0",items:Bi(a)},ei(a,oo(a))]}),Go.setUiContainer(a,u),_o(a),n?u.renderTo(n).reflow():u.renderTo().reflow(),Oo(a,u),o(),si(a),a.on("nodeChange",r),a.on("ResizeWindow",r),a.on("activate",o),a.on("deactivate",i),a.nodeChanged())},a.settings.content_editable=!0,a.on("focus",function(){!1===ho(a)&&t.skinUiCss?c.styleSheetLoader.load(t.skinUiCss,s,s):s()}),a.on("blur hide",i),a.on("remove",function(){u&&(u.remove(),u=null)}),!1===ho(a)&&t.skinUiCss?c.styleSheetLoader.load(t.skinUiCss,ea(a)):ea(a)(),{}},X=function(e,t){var n;e.on("ProgressState",function(e){n=n||new Ea(t.panel.getEl("body")),e.state?n.show(e.time):n.hide()})},K=function(e,t,n){var r=bo(e);return r&&(n.skinUiCss=r+"/skin.min.css",e.contentCSS.push(r+"/content"+(e.inline?".inline":"")+".min.css")),X(e,t),po(e)?Y(e,t,n):aa(e,t,n)},G=D.extend({Mixins:[e],Defaults:{classes:"widget tooltip tooltip-n"},renderHtml:function(){var e=this.classPrefix;return'<div id="'+this._id+'" class="'+this.classes+'" role="presentation"><div class="'+e+'tooltip-arrow"></div><div class="'+e+'tooltip-inner">'+this.encode(this.state.get("text"))+"</div></div>"},bindStates:function(){var t=this;return t.state.on("change:text",function(e){t.getEl().lastChild.innerHTML=t.encode(e.value)}),t._super()},repaint:function(){var e=this,t=e.getEl().style,n=e._layoutRect;t.left=n.x+"px",t.top=n.y+"px",t.zIndex=131070}}),J=D.extend({init:function(r){var o=this;o._super(r),r=o.settings,o.canFocus=!0,r.tooltip&&!1!==J.tooltips&&(o.on("mouseenter",function(e){var t,n=o.tooltip().moveTo(-65535);e.control===o?(t=n.text(r.tooltip).show().testMoveRel(o.getEl(),["bc-tc","bc-tl","bc-tr"]),n.classes.toggle("tooltip-n","bc-tc"===t),n.classes.toggle("tooltip-nw","bc-tl"===t),n.classes.toggle("tooltip-ne","bc-tr"===t),n.moveRel(o.getEl(),t)):n.hide()}),o.on("mouseleave mousedown click",function(){o.tooltip().remove(),o._tooltip=null})),o.aria("label",r.ariaLabel||r.tooltip)},tooltip:function(){return this._tooltip||(this._tooltip=new G({type:"tooltip"}),Go.inheritUiContainer(this,this._tooltip),this._tooltip.renderTo()),this._tooltip},postRender:function(){var e=this.settings;this._super(),this.parent()||!e.width&&!e.height||(this.initLayoutRect(),this.repaint()),e.autofocus&&this.focus()},bindStates:function(){var t=this;function n(e){t.aria("disabled",e),t.classes.toggle("disabled",e)}function r(e){t.aria("pressed",e),t.classes.toggle("active",e)}return t.state.on("change:disabled",function(e){n(e.value)}),t.state.on("change:active",function(e){r(e.value)}),t.state.get("disabled")&&n(!0),t.state.get("active")&&r(!0),t._super()},remove:function(){this._super(),this._tooltip&&(this._tooltip.remove(),this._tooltip=null)}}),Q=J.extend({Defaults:{value:0},init:function(e){this._super(e),this.classes.add("progress"),this.settings.filter||(this.settings.filter=function(e){return Math.round(e)})},renderHtml:function(){var e=this._id,t=this.classPrefix;return'<div id="'+e+'" class="'+this.classes+'"><div class="'+t+'bar-container"><div class="'+t+'bar"></div></div><div class="'+t+'text">0%</div></div>'},postRender:function(){return this._super(),this.value(this.settings.value),this},bindStates:function(){var t=this;function n(e){e=t.settings.filter(e),t.getEl().lastChild.innerHTML=e+"%",t.getEl().firstChild.firstChild.style.width=e+"%"}return t.state.on("change:value",function(e){n(e.value)}),n(t.state.get("value")),t._super()}}),Z=function(e,t){e.getEl().lastChild.textContent=t+(e.progressBar?" "+e.progressBar.value()+"%":"")},ee=D.extend({Mixins:[e],Defaults:{classes:"widget notification"},init:function(e){var t=this;t._super(e),t.maxWidth=e.maxWidth,e.text&&t.text(e.text),e.icon&&(t.icon=e.icon),e.color&&(t.color=e.color),e.type&&t.classes.add("notification-"+e.type),e.timeout&&(e.timeout<0||0<e.timeout)&&!e.closeButton?t.closeButton=!1:(t.classes.add("has-close"),t.closeButton=!0),e.progressBar&&(t.progressBar=new Q),t.on("click",function(e){-1!==e.target.className.indexOf(t.classPrefix+"close")&&t.close()})},renderHtml:function(){var e=this,t=e.classPrefix,n="",r="",o="",i="";return e.icon&&(n='<i class="'+t+"ico "+t+"i-"+e.icon+'"></i>'),i=' style="max-width: '+e.maxWidth+"px;"+(e.color?"background-color: "+e.color+';"':'"'),e.closeButton&&(r='<button type="button" class="'+t+'close" aria-hidden="true"></button>'),e.progressBar&&(o=e.progressBar.renderHtml()),'<div id="'+e._id+'" class="'+e.classes+'"'+i+' role="presentation">'+n+'<div class="'+t+'notification-inner">'+e.state.get("text")+"</div>"+o+r+'<div style="clip: rect(1px, 1px, 1px, 1px);height: 1px;overflow: hidden;position: absolute;width: 1px;" aria-live="assertive" aria-relevant="additions" aria-atomic="true"></div></div>'},postRender:function(){var e=this;return Bo.setTimeout(function(){e.$el.addClass(e.classPrefix+"in"),Z(e,e.state.get("text"))},100),e._super()},bindStates:function(){var t=this;return t.state.on("change:text",function(e){t.getEl().firstChild.innerHTML=e.value,Z(t,e.value)}),t.progressBar&&(t.progressBar.bindStates(),t.progressBar.state.on("change:value",function(e){Z(t,t.state.get("text"))})),t._super()},close:function(){return this.fire("close").isDefaultPrevented()||this.remove(),this},repaint:function(){var e=this,t=e.getEl().style,n=e._layoutRect;t.left=n.x+"px",t.top=n.y+"px",t.zIndex=65534}}),te=[],ne="",re=V.extend({modal:!0,Defaults:{border:1,layout:"flex",containerCls:"panel",role:"dialog",callbacks:{submit:function(){this.fire("submit",{data:this.toJSON()})},close:function(){this.close()}}},init:function(e){var n=this;n._super(e),n.isRtl()&&n.classes.add("rtl"),n.classes.add("window"),q()&&n.classes.add("iniframe"),n.bodyClasses.add("window-body"),n.state.set("fixed",!0),e.buttons&&(n.statusbar=new I({layout:"flex",border:"1 0 0 0",spacing:3,padding:10,align:"center",pack:n.isRtl()?"start":"end",defaults:{type:"button"},items:e.buttons}),n.statusbar.classes.add("foot"),n.statusbar.parent(n)),n.on("click",function(e){var t=n.classPrefix+"close";(ca.hasClass(e.target,t)||ca.hasClass(e.target.parentNode,t))&&n.close()}),n.on("cancel",function(){n.close()}),n.on("move",function(e){e.control===n&&V.hideAll()}),n.aria("describedby",n.describedBy||n._id+"-none"),n.aria("label",e.title),n._fullscreen=!1},recalc:function(){var e,t,n,r,o=this,i=o.statusbar;o._fullscreen&&(o.layoutRect(ca.getWindowSize()),o.layoutRect().contentH=o.layoutRect().innerH),o._super(),e=o.layoutRect(),o.settings.title&&!o._fullscreen&&(t=e.headerW)>e.w&&(n=e.x-Math.max(0,t/2),o.layoutRect({w:t,x:n}),r=!0),i&&(i.layoutRect({w:o.layoutRect().innerW}).recalc(),(t=i.layoutRect().minW+e.deltaW)>e.w&&(n=e.x-Math.max(0,t-e.w),o.layoutRect({w:t,x:n}),r=!0)),r&&o.recalc()},initLayoutRect:function(){var e,t,n,r=this,o=r._super(),i=0;return r.settings.title&&!r._fullscreen&&(e=r.getEl("head"),t=ca.getSize(e),o.headerW=t.width,o.headerH=t.height,i+=o.headerH),r.statusbar&&(i+=r.statusbar.layoutRect().h),o.deltaH+=i,o.minH+=i,o.h+=i,n=ca.getWindowSize(),o.x=r.settings.x||Math.max(0,n.w/2-o.w/2),o.y=r.settings.y||Math.max(0,n.h/2-o.h/2),q()&&(o.y=Qr.activeEditor.editorContainer.getBoundingClientRect().y),o},renderHtml:function(){var e=this,t=e._layout,n=e._id,r=e.classPrefix,o=e.settings,i="",a="",u=o.html;return e.preRender(),t.preRender(e),o.title&&(i='<div id="'+n+'-head" class="'+r+'window-head"><div id="'+n+'-title" class="'+r+'title">'+e.encode(o.title)+'</div><div id="'+n+'-dragh" class="'+r+'dragh"></div><button type="button" class="'+r+'close" aria-hidden="true"><i class="mce-ico mce-i-remove"></i></button></div>'),o.url&&(u='<iframe src="'+o.url+'" tabindex="-1"></iframe>'),void 0===u&&(u=t.renderHtml(e)),e.statusbar&&(a=e.statusbar.renderHtml()),'<div id="'+n+'" class="'+e.classes+'" hidefocus="1"><div class="'+e.classPrefix+'reset" role="application">'+i+'<div id="'+n+'-body" class="'+e.bodyClasses+'">'+u+"</div>"+a+"</div></div>"},fullscreen:function(e){var n,t,r,o=this,i=S.document.documentElement,a=o.classPrefix;return e!==o._fullscreen&&(ua(S.window).on("resize",function(){var e,t;o._fullscreen&&(n?o._timer||(o._timer=Bo.setTimeout(function(){var e=ca.getWindowSize();o.moveTo(0,0).resizeTo(e.w,e.h),o._timer=0},50)):(e=(new Date).getTime(),t=ca.getWindowSize(),o.moveTo(0,0).resizeTo(t.w,t.h),50<(new Date).getTime()-e&&(n=!0)))}),t=o.layoutRect(),(o._fullscreen=e)?(o._initial={x:t.x,y:t.y,w:t.w,h:t.h},o.borderBox=s("0"),o.getEl("head").style.display="none",t.deltaH-=t.headerH+2,ua([i,S.document.body]).addClass(a+"fullscreen"),o.classes.add("fullscreen"),r=ca.getWindowSize(),o.moveTo(0,0).resizeTo(r.w,r.h)):(o.borderBox=s(o.settings.border),o.getEl("head").style.display="",t.deltaH+=t.headerH,ua([i,S.document.body]).removeClass(a+"fullscreen"),o.classes.remove("fullscreen"),o.moveTo(o._initial.x,o._initial.y).resizeTo(o._initial.w,o._initial.h))),o.reflow()},postRender:function(){var t,n=this;setTimeout(function(){n.classes.add("in"),n.fire("open")},0),n._super(),n.statusbar&&n.statusbar.postRender(),n.focus(),this.dragHelper=new xa(n._id+"-dragh",{start:function(){t={x:n.layoutRect().x,y:n.layoutRect().y}},drag:function(e){n.moveTo(t.x+e.deltaX,t.y+e.deltaY)}}),n.on("submit",function(e){e.isDefaultPrevented()||n.close()}),te.push(n),ka(!0)},submit:function(){return this.fire("submit",{data:this.toJSON()})},remove:function(){var e,t=this;for(t.dragHelper.destroy(),t._super(),t.statusbar&&this.statusbar.remove(),Ra(t.classPrefix,!1),e=te.length;e--;)te[e]===t&&te.splice(e,1);ka(0<te.length)},getContentWindow:function(){var e=this.getEl().getElementsByTagName("iframe")[0];return e?e.contentWindow:null}}),function(){if(!Wi.desktop){var n={w:S.window.innerWidth,h:S.window.innerHeight};Bo.setInterval(function(){var e=S.window.innerWidth,t=S.window.innerHeight;n.w===e&&n.h===t||(n={w:e,h:t},ua(S.window).trigger("resize"))},100)}ua(S.window).on("resize",function(){var e,t,n,r=ca.getWindowSize();for(e=0;e<te.length;e++)t=te[e].layoutRect(),n=q()?Qr.activeEditor.editorContainer.getBoundingClientRect().y:Math.max(0,r.h/2-t.h/2),te[e].moveTo(te[e].settings.x||Math.max(0,r.w/2-t.w/2),te[e].settings.y||n)})}(),oe=re.extend({init:function(e){e={border:1,padding:20,layout:"flex",pack:"center",align:"center",containerCls:"panel",autoScroll:!0,buttons:{type:"button",text:"Ok",action:"ok"},items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200}},this._super(e)},Statics:{OK:1,OK_CANCEL:2,YES_NO:3,YES_NO_CANCEL:4,msgBox:function(e){var t,r=e.callback||function(){};function n(e,t,n){return{type:"button",text:e,subtype:n?"primary":"",onClick:function(e){e.control.parents()[1].close(),r(t)}}}switch(e.buttons){case oe.OK_CANCEL:t=[n("Ok",!0,!0),n("Cancel",!1)];break;case oe.YES_NO:case oe.YES_NO_CANCEL:t=[n("Yes",1,!0),n("No",0)],e.buttons===oe.YES_NO_CANCEL&&t.push(n("Cancel",-1));break;default:t=[n("Ok",!0,!0)]}return new re({padding:20,x:e.x,y:e.y,minWidth:300,minHeight:100,layout:"flex",pack:"center",align:"center",buttons:t,title:e.title,role:"alertdialog",items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200,text:e.text},onPostRender:function(){this.aria("describedby",this.items()[0]._id)},onClose:e.onClose,onCancel:function(){r(!1)}}).renderTo(S.document.body).reflow()},alert:function(e,t){return"string"==typeof e&&(e={text:e}),e.callback=t,oe.msgBox(e)},confirm:function(e,t){return"string"==typeof e&&(e={text:e}),e.callback=t,e.buttons=oe.OK_CANCEL,oe.msgBox(e)}}}),ie=function(a){var e=function(e){return K(a,this,e)},t=function(e,t){return Hi(a,e,t)},n=function(e,t){return zi(a,e,t)},r=function(){return r=a,o=function(e){return e.inline?e.getElement():e.getContentAreaContainer()},i=function(){var e=o(r);return ca.getSize(e).width},t=function(e){vi(e,function(e){e.moveTo(0,0)})},n=function(n){var e,t;0<n.length&&(e=n.slice(0,1)[0],t=o(r),e.moveRel(t,"tc-tc"),vi(n,function(e,t){0<t&&e.moveRel(n[t-1].getEl(),"bc-tc")}))},{open:function(e,t){var n=Zr.extend(e,{maxWidth:i()}),r=new ee(n);return 0<(r.args=n).timeout&&(r.timer=setTimeout(function(){r.close(),t()},n.timeout)),r.on("close",function(){t()}),r.renderTo(),r},close:function(e){e.close()},reposition:function(e){t(e),n(e)},getArgs:function(e){return e.args}};var r,o,i,t,n},o=function(){return{open:function(n,e,t){var r;return n.title=n.title||" ",n.url=n.url||n.file,n.url&&(n.width=parseInt(n.width||320,10),n.height=parseInt(n.height||240,10)),n.body&&(n.items={defaults:n.defaults,type:n.bodyType||"form",items:n.body,data:n.data,callbacks:n.commands}),n.url||n.buttons||(n.buttons=[{text:"Ok",subtype:"primary",onclick:function(){r.find("form")[0].submit()}},{text:"Cancel",onclick:function(){r.close()}}]),(r=new re(n)).on("close",function(){t(r)}),n.data&&r.on("postRender",function(){this.find("*").each(function(e){var t=e.name();t in n.data&&e.value(n.data[t])})}),r.features=n||{},r.params=e||{},r=r.renderTo(S.document.body).reflow()},alert:function(e,t,n){var r;return(r=oe.alert(e,function(){t()})).on("close",function(){n(r)}),r},confirm:function(e,t,n){var r;return(r=oe.confirm(e,function(e){t(e)})).on("close",function(){n(r)}),r},close:function(e){e.close()},getParams:function(e){return e.params},setParams:function(e,t){e.params=t}}};return{renderUI:e,resizeTo:t,resizeBy:n,getNotificationManagerImpl:r,getWindowManagerImpl:o}},ae=t.extend({Defaults:{firstControlClass:"first",lastControlClass:"last"},init:function(e){this.settings=Zr.extend({},this.Defaults,e)},preRender:function(e){e.bodyClasses.add(this.settings.containerClass)},applyClasses:function(e){var t,n,r=this,o=r.settings,i=o.firstControlClass,a=o.lastControlClass;e.each(function(e){e.classes.remove(i).remove(a).add(o.controlClass),e.visible()&&(t||(t=e),n=e)}),t&&t.classes.add(i),n&&n.classes.add(a)},renderHtml:function(e){var t=this,n="";return t.applyClasses(e.items()),e.items().each(function(e){n+=e.renderHtml()}),n},recalc:function(){},postRender:function(){},isNative:function(){return!1}}),ue=ae.extend({Defaults:{containerClass:"abs-layout",controlClass:"abs-layout-item"},recalc:function(e){e.items().filter(":visible").each(function(e){var t=e.settings;e.layoutRect({x:t.x,y:t.y,w:t.w,h:t.h}),e.recalc&&e.recalc()})},renderHtml:function(e){return'<div id="'+e._id+'-absend" class="'+e.classPrefix+'abs-end"></div>'+this._super(e)}}),se=J.extend({Defaults:{classes:"widget btn",role:"button"},init:function(e){var t,n=this;n._super(e),e=n.settings,t=n.settings.size,n.on("click mousedown",function(e){e.preventDefault()}),n.on("touchstart",function(e){e.control===n&&(n.fire("click",e),e.preventDefault())}),e.subtype&&n.classes.add(e.subtype),t&&n.classes.add("btn-"+t),e.icon&&n.icon(e.icon)},icon:function(e){return arguments.length?(this.state.set("icon",e),this):this.state.get("icon")},repaint:function(){var e,t=this.getEl().firstChild;t&&((e=t.style).width=e.height="100%"),this._super()},renderHtml:function(){var e,t=this,n=t._id,r=t.classPrefix,o=t.state.get("icon"),i=t.state.get("text"),a="",u=t.settings,s=u.image;return s=s?(o="none","string"!=typeof s&&(s=S.window.getSelection?s[0]:s[1])," style=\"background-image: url('"+s+"')\""):"",i&&(t.classes.add("btn-has-text"),a='<span class="'+r+'txt">'+t.encode(i)+"</span>"),o=o?r+"ico "+r+"i-"+o:"",e="boolean"==typeof u.active?' aria-pressed="'+u.active+'"':"",'<div id="'+n+'" class="'+t.classes+'" tabindex="-1"'+e+'><button id="'+n+'-button" role="presentation" type="button" tabindex="-1">'+(o?'<i class="'+o+'"'+s+"></i>":"")+a+"</button></div>"},bindStates:function(){var i=this,n=i.$,r=i.classPrefix+"txt";function a(e){var t=n("span."+r,i.getEl());e?(t[0]||(n("button:first",i.getEl()).append('<span class="'+r+'"></span>'),t=n("span."+r,i.getEl())),t.html(i.encode(e))):t.remove(),i.classes.toggle("btn-has-text",!!e)}return i.state.on("change:text",function(e){a(e.value)}),i.state.on("change:icon",function(e){var t,n,r=e.value,o=i.classPrefix;r=(i.settings.icon=r)?o+"ico "+o+"i-"+i.settings.icon:"",n=(t=i.getEl().firstChild).getElementsByTagName("i")[0],r?(n&&n===t.firstChild||(n=S.document.createElement("i"),t.insertBefore(n,t.firstChild)),n.className=r):n&&t.removeChild(n),a(i.state.get("text"))}),i._super()}}),ce=se.extend({init:function(e){e=Zr.extend({text:"Browse...",multiple:!1,accept:null},e),this._super(e),this.classes.add("browsebutton"),e.multiple&&this.classes.add("multiple")},postRender:function(){var n=this,t=ca.create("input",{type:"file",id:n._id+"-browse",accept:n.settings.accept});n._super(),ua(t).on("change",function(e){var t=e.target.files;n.value=function(){return t.length?n.settings.multiple?t:t[0]:null},e.preventDefault(),t.length&&n.fire("change",e)}),ua(t).on("click touchstart",function(e){e.stopPropagation()}),ua(n.getEl("button")).on("click touchstart",function(e){e.stopPropagation(),"touchstart"==e.type&&e.preventDefault(),t.click()}),n.getEl().appendChild(t)},remove:function(){ua(this.getEl("button")).off(),ua(this.getEl("input")).off(),this._super()}}),le=B.extend({Defaults:{defaultType:"button",role:"group"},renderHtml:function(){var e=this._layout;return this.classes.add("btn-group"),this.preRender(),e.preRender(this),'<div id="'+this._id+'" class="'+this.classes+'"><div id="'+this._id+'-body">'+(this.settings.html||"")+e.renderHtml(this)+"</div></div>"}}),fe=J.extend({Defaults:{classes:"checkbox",role:"checkbox",checked:!1},init:function(e){var t=this;t._super(e),t.on("click mousedown",function(e){e.preventDefault()}),t.on("click",function(e){e.preventDefault(),t.disabled()||t.checked(!t.checked())}),t.checked(t.settings.checked)},checked:function(e){return arguments.length?(this.state.set("checked",e),this):this.state.get("checked")},value:function(e){return arguments.length?this.checked(e):this.checked()},renderHtml:function(){var e=this._id,t=this.classPrefix;return'<div id="'+e+'" class="'+this.classes+'" unselectable="on" aria-labelledby="'+e+'-al" tabindex="-1"><i class="'+t+"ico "+t+'i-checkbox"></i><span id="'+e+'-al" class="'+t+'label">'+this.encode(this.state.get("text"))+"</span></div>"},bindStates:function(){var i=this;function t(e){i.classes.toggle("checked",e),i.aria("checked",e)}return i.state.on("change:text",function(e){i.getEl("al").firstChild.data=i.translate(e.value)}),i.state.on("change:checked change:value",function(e){i.fire("change"),t(e.value)}),i.state.on("change:icon",function(e){var t,n,r=e.value,o=i.classPrefix;if(void 0===r)return i.settings.icon;r=(i.settings.icon=r)?o+"ico "+o+"i-"+i.settings.icon:"",n=(t=i.getEl().firstChild).getElementsByTagName("i")[0],r?(n&&n===t.firstChild||(n=S.document.createElement("i"),t.insertBefore(n,t.firstChild)),n.className=r):n&&t.removeChild(n)}),i.state.get("checked")&&t(!0),i._super()}}),de=tinymce.util.Tools.resolve("tinymce.util.VK"),me=J.extend({init:function(r){var o=this;o._super(r),r=o.settings,o.classes.add("combobox"),o.subinput=!0,o.ariaTarget="inp",r.menu=r.menu||r.values,r.menu&&(r.icon="caret"),o.on("click",function(e){var t=e.target,n=o.getEl();if(ua.contains(n,t)||t===n)for(;t&&t!==n;)t.id&&-1!==t.id.indexOf("-open")&&(o.fire("action"),r.menu&&(o.showMenu(),e.aria&&o.menu.items()[0].focus())),t=t.parentNode}),o.on("keydown",function(e){var t;13===e.keyCode&&"INPUT"===e.target.nodeName&&(e.preventDefault(),o.parents().reverse().each(function(e){if(e.toJSON)return t=e,!1}),o.fire("submit",{data:t.toJSON()}))}),o.on("keyup",function(e){var t,n;"INPUT"===e.target.nodeName&&(t=o.state.get("value"),(n=e.target.value)!==t&&(o.state.set("value",n),o.fire("autocomplete",e)))}),o.on("mouseover",function(e){var t,n,r=o.tooltip().moveTo(-65535);o.statusLevel()&&-1!==e.target.className.indexOf(o.classPrefix+"status")&&(t=o.statusMessage()||"Ok",n=r.text(t).show().testMoveRel(e.target,["bc-tc","bc-tl","bc-tr"]),r.classes.toggle("tooltip-n","bc-tc"===n),r.classes.toggle("tooltip-nw","bc-tl"===n),r.classes.toggle("tooltip-ne","bc-tr"===n),r.moveRel(e.target,n))})},statusLevel:function(e){return 0<arguments.length&&this.state.set("statusLevel",e),this.state.get("statusLevel")},statusMessage:function(e){return 0<arguments.length&&this.state.set("statusMessage",e),this.state.get("statusMessage")},showMenu:function(){var e,t=this,n=t.settings;t.menu||((e=n.menu||[]).length?e={type:"menu",items:e}:e.type=e.type||"menu",t.menu=Co.create(e).parent(t).renderTo(t.getContainerElm()),t.fire("createmenu"),t.menu.reflow(),t.menu.on("cancel",function(e){e.control===t.menu&&t.focus()}),t.menu.on("show hide",function(e){e.control.items().each(function(e){e.active(e.value()===t.value())})}).fire("show"),t.menu.on("select",function(e){t.value(e.control.value())}),t.on("focusin",function(e){"INPUT"===e.target.tagName.toUpperCase()&&t.menu.hide()}),t.aria("expanded",!0)),t.menu.show(),t.menu.layoutRect({w:t.layoutRect().w}),t.menu.moveRel(t.getEl(),t.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"])},focus:function(){this.getEl("inp").focus()},repaint:function(){var e,t,n,r=this,o=r.getEl(),i=r.getEl("open"),a=r.layoutRect(),u=0,s=o.firstChild;return r.statusLevel()&&"none"!==r.statusLevel()&&(u=parseInt(ca.getRuntimeStyle(s,"padding-right"),10)-parseInt(ca.getRuntimeStyle(s,"padding-left"),10)),e=i?a.w-ca.getSize(i).width-10:a.w-10,(n=S.document).all&&(!n.documentMode||n.documentMode<=8)&&(t=r.layoutRect().h-2+"px"),ua(s).css({width:e-u,lineHeight:t}),r._super(),r},postRender:function(){var t=this;return ua(this.getEl("inp")).on("change",function(e){t.state.set("value",e.target.value),t.fire("change",e)}),t._super()},renderHtml:function(){var e,t,n=this,r=n._id,o=n.settings,i=n.classPrefix,a=n.state.get("value")||"",u="",s="",c="";return"spellcheck"in o&&(s+=' spellcheck="'+o.spellcheck+'"'),o.maxLength&&(s+=' maxlength="'+o.maxLength+'"'),o.size&&(s+=' size="'+o.size+'"'),o.subtype&&(s+=' type="'+o.subtype+'"'),c='<i id="'+r+'-status" class="mce-status mce-ico" style="display: none"></i>',n.disabled()&&(s+=' disabled="disabled"'),(e=o.icon)&&"caret"!==e&&(e=i+"ico "+i+"i-"+o.icon),t=n.state.get("text"),(e||t)&&(u='<div id="'+r+'-open" class="'+i+"btn "+i+'open" tabIndex="-1" role="button"><button id="'+r+'-action" type="button" hidefocus="1" tabindex="-1">'+("caret"!==e?'<i class="'+e+'"></i>':'<i class="'+i+'caret"></i>')+(t?(e?" ":"")+t:"")+"</button></div>",n.classes.add("has-open")),'<div id="'+r+'" class="'+n.classes+'"><input id="'+r+'-inp" class="'+i+'textbox" value="'+n.encode(a,!1)+'" hidefocus="1"'+s+' placeholder="'+n.encode(o.placeholder)+'" />'+c+u+"</div>"},value:function(e){return arguments.length?(this.state.set("value",e),this):(this.state.get("rendered")&&this.state.set("value",this.getEl("inp").value),this.state.get("value"))},showAutoComplete:function(e,t){var n,r,o=this;0!==e.length?(n=function(e,t){return function(){o.fire("selectitem",{title:t,value:e})}},o.menu?o.menu.items().remove():o.menu=Co.create({type:"menu",classes:"combobox-menu",layout:"flow"}).parent(o).renderTo(),Zr.each(e,function(e){o.menu.add({text:e.title,url:e.previewUrl,match:t,classes:"menu-item-ellipsis",onclick:n(e.value,e.title)})}),o.menu.renderNew(),o.hideMenu(),o.menu.on("cancel",function(e){e.control.parent()===o.menu&&(e.stopPropagation(),o.focus(),o.hideMenu())}),o.menu.on("select",function(){o.focus()}),r=o.layoutRect().w,o.menu.layoutRect({w:r,minW:0,maxW:r}),o.menu.repaint(),o.menu.reflow(),o.menu.show(),o.menu.moveRel(o.getEl(),o.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"])):o.hideMenu()},hideMenu:function(){this.menu&&this.menu.hide()},bindStates:function(){var n,o=this;return o.state.on("change:value",function(e){o.getEl("inp").value!==e.value&&(o.getEl("inp").value=e.value)}),o.state.on("change:disabled",function(e){o.getEl("inp").disabled=e.value}),o.state.on("change:statusLevel",function(e){var t=o.getEl("status"),n=o.classPrefix,r=e.value;ca.css(t,"display","none"===r?"none":""),ca.toggleClass(t,n+"i-checkmark","ok"===r),ca.toggleClass(t,n+"i-warning","warn"===r),ca.toggleClass(t,n+"i-error","error"===r),o.classes.toggle("has-status","none"!==r),o.repaint()}),ca.on(o.getEl("status"),"mouseleave",function(){o.tooltip().hide()}),o.on("cancel",function(e){o.menu&&o.menu.visible()&&(e.stopPropagation(),o.hideMenu())}),n=function(e,t){t&&0<t.items().length&&t.items().eq(e)[0].focus()},o.on("keydown",function(e){var t=e.keyCode;"INPUT"===e.target.nodeName&&(t===de.DOWN?(e.preventDefault(),o.fire("autocomplete"),n(0,o.menu)):t===de.UP&&(e.preventDefault(),n(-1,o.menu)))}),o._super()},remove:function(){ua(this.getEl("inp")).off(),this.menu&&this.menu.remove(),this._super()}}),ge=me.extend({init:function(e){var t=this;e.spellcheck=!1,e.onaction&&(e.icon="none"),t._super(e),t.classes.add("colorbox"),t.on("change keyup postrender",function(){t.repaintColor(t.value())})},repaintColor:function(e){var t=this.getEl("open"),n=t?t.getElementsByTagName("i")[0]:null;if(n)try{n.style.background=e}catch(e){}},bindStates:function(){var t=this;return t.state.on("change:value",function(e){t.state.get("rendered")&&t.repaintColor(e.value)}),t._super()}}),he=se.extend({showPanel:function(){var e,t,n,r,o,i=this,a=i.settings;i.classes.add("opened"),i.panel?i.panel.show():((e=a.panel).type&&(e={layout:"grid",items:e}),e.role=e.role||"dialog",e.popover=!0,e.autohide=!0,e.ariaRoot=!0,i.panel=new V(e).on("hide",function(){i.classes.remove("opened")}).on("cancel",function(e){e.stopPropagation(),i.focus(),i.hidePanel()}).parent(i).renderTo(i.getContainerElm()),i.panel.fire("show"),i.panel.reflow()),t=["bc-tc","bc-tl","bc-tr"],n=["bc-tc","bc-tr","bc-tl","tc-bc","tc-br","tc-bl"],r=i.panel.testMoveRel(i.getEl(),a.popoverAlign||(i.isRtl()?t:n)),i.panel.classes.toggle("start","l"===r.substr(-1)),i.panel.classes.toggle("end","r"===r.substr(-1)),o="t"===r.substr(0,1),i.panel.classes.toggle("bottom",!o),i.panel.classes.toggle("top",o),i.panel.moveRel(i.getEl(),r)},hidePanel:function(){this.panel&&this.panel.hide()},postRender:function(){var t=this;return t.aria("haspopup",!0),t.on("click",function(e){e.control===t&&(t.panel&&t.panel.visible()?t.hidePanel():(t.showPanel(),t.panel.focus(!!e.aria)))}),t._super()},remove:function(){return this.panel&&(this.panel.remove(),this.panel=null),this._super()}}),pe=wo.DOM,ve=he.extend({init:function(e){this._super(e),this.classes.add("splitbtn"),this.classes.add("colorbutton")},color:function(e){return e?(this._color=e,this.getEl("preview").style.backgroundColor=e,this):this._color},resetColor:function(){return this._color=null,this.getEl("preview").style.backgroundColor=null,this},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix,r=e.state.get("text"),o=e.settings.icon?n+"ico "+n+"i-"+e.settings.icon:"",i=e.settings.image?" style=\"background-image: url('"+e.settings.image+"')\"":"",a="";return r&&(e.classes.add("btn-has-text"),a='<span class="'+n+'txt">'+e.encode(r)+"</span>"),'<div id="'+t+'" class="'+e.classes+'" role="button" tabindex="-1" aria-haspopup="true"><button role="presentation" hidefocus="1" type="button" tabindex="-1">'+(o?'<i class="'+o+'"'+i+"></i>":"")+'<span id="'+t+'-preview" class="'+n+'preview"></span>'+a+'</button><button type="button" class="'+n+'open" hidefocus="1" tabindex="-1"> <i class="'+n+'caret"></i></button></div>'},postRender:function(){var t=this,n=t.settings.onclick;return t.on("click",function(e){e.aria&&"down"===e.aria.key||e.control!==t||pe.getParent(e.target,"."+t.classPrefix+"open")||(e.stopImmediatePropagation(),n.call(t,e))}),delete t.settings.onclick,t._super()}}),be=tinymce.util.Tools.resolve("tinymce.util.Color"),ye=J.extend({Defaults:{classes:"widget colorpicker"},init:function(e){this._super(e)},postRender:function(){var n,r=this,o=r.color(),i=r.getEl("h"),a=r.getEl("hp"),u=r.getEl("sv"),s=r.getEl("svp");function c(e,t){var n=ca.getPos(e),r=t.pageX-n.x,o=t.pageY-n.y;return{x:r=Math.max(0,Math.min(r/e.clientWidth,1)),y:o=Math.max(0,Math.min(o/e.clientHeight,1))}}function l(e,t){var n=(360-e.h)/360;ca.css(a,{top:100*n+"%"}),t||ca.css(s,{left:e.s+"%",top:100-e.v+"%"}),u.style.background=be({s:100,v:100,h:e.h}).toHex(),r.color().parse({s:e.s,v:e.v,h:e.h})}function e(e){var t;t=c(u,e),n.s=100*t.x,n.v=100*(1-t.y),l(n),r.fire("change")}function t(e){var t;t=c(i,e),(n=o.toHsv()).h=360*(1-t.y),l(n,!0),r.fire("change")}r._repaint=function(){l(n=o.toHsv())},r._super(),r._svdraghelper=new xa(r._id+"-sv",{start:e,drag:e}),r._hdraghelper=new xa(r._id+"-h",{start:t,drag:t}),r._repaint()},rgb:function(){return this.color().toRgb()},value:function(e){if(!arguments.length)return this.color().toHex();this.color().parse(e),this._rendered&&this._repaint()},color:function(){return this._color||(this._color=be()),this._color},renderHtml:function(){var e,t=this,n=t._id,i=t.classPrefix,a="#ff0000,#ff0080,#ff00ff,#8000ff,#0000ff,#0080ff,#00ffff,#00ff80,#00ff00,#80ff00,#ffff00,#ff8000,#ff0000";return e='<div id="'+n+'-h" class="'+i+'colorpicker-h" style="background: -ms-linear-gradient(top,'+a+");background: linear-gradient(to bottom,"+a+');">'+function(){var e,t,n,r,o="";for(n="filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=",e=0,t=(r=a.split(",")).length-1;e<t;e++)o+='<div class="'+i+'colorpicker-h-chunk" style="height:'+100/t+"%;"+n+r[e]+",endColorstr="+r[e+1]+");-ms-"+n+r[e]+",endColorstr="+r[e+1]+')"></div>';return o}()+'<div id="'+n+'-hp" class="'+i+'colorpicker-h-marker"></div></div>','<div id="'+n+'" class="'+t.classes+'"><div id="'+n+'-sv" class="'+i+'colorpicker-sv"><div class="'+i+'colorpicker-overlay1"><div class="'+i+'colorpicker-overlay2"><div id="'+n+'-svp" class="'+i+'colorpicker-selector1"><div class="'+i+'colorpicker-selector2"></div></div></div></div></div>'+e+"</div>"}}),xe=J.extend({init:function(e){e=Zr.extend({height:100,text:"Drop an image here",multiple:!1,accept:null},e),this._super(e),this.classes.add("dropzone"),e.multiple&&this.classes.add("multiple")},renderHtml:function(){var e=this,t=e.settings,n={id:e._id,hidefocus:"1"},r=ca.create("div",n,"<span>"+this.translate(t.text)+"</span>");return t.height&&ca.css(r,"height",t.height+"px"),t.width&&ca.css(r,"width",t.width+"px"),r.className=e.classes,r.outerHTML},postRender:function(){var r=this,e=function(e){e.preventDefault(),r.classes.toggle("dragenter"),r.getEl().className=r.classes},n=function(e){var t,n=r.settings.accept;return"string"!=typeof n?e:(t=new RegExp("("+n.split(/\s*,\s*/).join("|")+")$","i"),Zr.grep(e,function(e){return t.test(e.name)}))};r._super(),r.$el.on("dragover",function(e){e.preventDefault()}),r.$el.on("dragenter",e),r.$el.on("dragleave",e),r.$el.on("drop",function(e){if(e.preventDefault(),!r.state.get("disabled")){var t=n(e.dataTransfer.files);r.value=function(){return t.length?r.settings.multiple?t:t[0]:null},t.length&&r.fire("change",e)}})},remove:function(){this.$el.off(),this._super()}}),we=J.extend({init:function(e){var r=this;e.delimiter||(e.delimiter=""),r._super(e),r.classes.add("path"),r.canFocus=!0,r.on("click",function(e){var t,n=e.target;(t=n.getAttribute("data-index"))&&r.fire("select",{value:r.row()[t],index:t})}),r.row(r.settings.row)},focus:function(){return this.getEl().firstChild.focus(),this},row:function(e){return arguments.length?(this.state.set("row",e),this):this.state.get("row")},renderHtml:function(){return'<div id="'+this._id+'" class="'+this.classes+'">'+this._getDataPathHtml(this.state.get("row"))+"</div>"},bindStates:function(){var t=this;return t.state.on("change:row",function(e){t.innerHtml(t._getDataPathHtml(e.value))}),t._super()},_getDataPathHtml:function(e){var t,n,r=this,o=e||[],i="",a=r.classPrefix;for(t=0,n=o.length;t<n;t++)i+=(0<t?'<div class="'+a+'divider" aria-hidden="true"> '+r.settings.delimiter+" </div>":"")+'<div role="button" class="'+a+"path-item"+(t===n-1?" "+a+"last":"")+'" data-index="'+t+'" tabindex="-1" id="'+r._id+"-"+t+'" aria-level="'+(t+1)+'">'+o[t].name+"</div>";return i||(i='<div class="'+a+'path-item"></div>'),i}}),Ce=we.extend({postRender:function(){var i=this,a=i.settings.editor;function u(e){if(1===e.nodeType){if("BR"===e.nodeName||e.getAttribute("data-mce-bogus"))return!0;if("bookmark"===e.getAttribute("data-mce-type"))return!0}return!1}return!1!==a.settings.elementpath&&(i.on("select",function(e){a.focus(),a.selection.select(this.row()[e.index].element),a.nodeChanged()}),a.on("nodeChange",function(e){for(var t,n=[],r=e.parents,o=r.length;o--&&(1!==r[o].nodeType||u(r[o])||((t=a.fire("ResolveName",{name:r[o].nodeName.toLowerCase(),target:r[o]})).isDefaultPrevented()||n.push({name:t.name,element:r[o]}),!t.isPropagationStopped())););i.row(n)})),i._super()}}),Se=B.extend({Defaults:{layout:"flex",align:"center",defaults:{flex:1}},renderHtml:function(){var e=this,t=e._layout,n=e.classPrefix;return e.classes.add("formitem"),t.preRender(e),'<div id="'+e._id+'" class="'+e.classes+'" hidefocus="1" tabindex="-1">'+(e.settings.title?'<div id="'+e._id+'-title" class="'+n+'title">'+e.settings.title+"</div>":"")+'<div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div></div>"}}),Ne=B.extend({Defaults:{containerCls:"form",layout:"flex",direction:"column",align:"stretch",flex:1,padding:15,labelGap:30,spacing:10,callbacks:{submit:function(){this.submit()}}},preRender:function(){var r=this,e=r.items();r.settings.formItemDefaults||(r.settings.formItemDefaults={layout:"flex",autoResize:"overflow",defaults:{flex:1}}),e.each(function(e){var t,n=e.settings.label;n&&((t=new Se(Zr.extend({items:{type:"label",id:e._id+"-l",text:n,flex:0,forId:e._id,disabled:e.disabled()}},r.settings.formItemDefaults))).type="formitem",e.aria("labelledby",e._id+"-l"),void 0===e.settings.flex&&(e.settings.flex=1),r.replace(e,t),t.add(e))})},submit:function(){return this.fire("submit",{data:this.toJSON()})},postRender:function(){this._super(),this.fromJSON(this.settings.data)},bindStates:function(){var n=this;function e(){var e,t,r=0,o=[];if(!1!==n.settings.labelGapCalc)for(("children"===n.settings.labelGapCalc?n.find("formitem"):n.items()).filter("formitem").each(function(e){var t=e.items()[0],n=t.getEl().clientWidth;r=r<n?n:r,o.push(t)}),t=n.settings.labelGap||0,e=o.length;e--;)o[e].settings.minWidth=r+t}n._super(),n.on("show",e),e()}}),Te=Ne.extend({Defaults:{containerCls:"fieldset",layout:"flex",direction:"column",align:"stretch",flex:1,padding:"25 15 5 15",labelGap:30,spacing:10,border:1},renderHtml:function(){var e=this,t=e._layout,n=e.classPrefix;return e.preRender(),t.preRender(e),'<fieldset id="'+e._id+'" class="'+e.classes+'" hidefocus="1" tabindex="-1">'+(e.settings.title?'<legend id="'+e._id+'-title" class="'+n+'fieldset-title">'+e.settings.title+"</legend>":"")+'<div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div></fieldset>"}}),Ee=0,ke=function(e){var t=new Date,n=t.getTime(),r=Math.floor(1e9*Math.random());return e+"_"+r+ ++Ee+String(n)},_e={fromHtml:function(e,t){var n=t||S.document,r=n.createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||1<r.childNodes.length)throw S.console.error("HTML does not have a single root node",e),new Error("HTML must have a single root node");return Re(r.childNodes[0])},fromTag:function(e,t){var n=t||S.document,r=n.createElement(e);return Re(r)},fromText:function(e,t){var n=t||S.document,r=n.createTextNode(e);return Re(r)},fromDom:Re=function(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:Io(e)}},fromPoint:function(e,t,n){var r=e.dom();return qo.from(r.elementFromPoint(t,n)).map(Re)}},Ae=function(n){var r,o=!1;return function(){var e,t=[];for(e=0;e<arguments.length;e++)t[e]=arguments[e];return o||(o=!0,r=n.apply(null,t)),r}},S.Node.ATTRIBUTE_NODE,S.Node.CDATA_SECTION_NODE,S.Node.COMMENT_NODE,De=S.Node.DOCUMENT_NODE,S.Node.DOCUMENT_TYPE_NODE,S.Node.DOCUMENT_FRAGMENT_NODE,Oe=S.Node.ELEMENT_NODE,S.Node.TEXT_NODE,S.Node.PROCESSING_INSTRUCTION_NODE,S.Node.ENTITY_REFERENCE_NODE,S.Node.ENTITY_NODE,S.Node.NOTATION_NODE,Pe=function(){var e,t=[];for(e=0;e<arguments.length;e++)t[e]=arguments[e];return function(){var e,n,r=[];for(e=0;e<arguments.length;e++)r[e]=arguments[e];if(t.length!==r.length)throw new Error('Wrong number of arguments to struct. Expected "['+t.length+']", got '+r.length+" arguments");return n={},vi(t,function(e,t){n[e]=Io(r[t])}),n}},Be=void 0!==S.window?S.window:Function("return this;")(),Me=function(e,t){var n,r=null!=t?t:Be;for(n=0;n<e.length&&null!=r;++n)r=r[e[n]];return r},Ie=function(e,t){var n=e.split(".");return Me(n,t)},Le=function(e,t){return Ie(e,t)},Fe=function(e,t){var n=Le(e,t);if(null==n)throw e+" not available on this browser";return n},He=function(){return Fe("Node")},ze=function(e,t,n){return 0!=(e.compareDocumentPosition(t)&n)},We=function(e,t){return ze(e,t,He().DOCUMENT_POSITION_CONTAINED_BY)},Ue=function(e,t){var n,r;for(n=0;n<e.length;n++)if((r=e[n]).test(t))return r},je=function(e,t){var n,r=Ue(e,t);return r?$e((n=function(e){return Number(t.replace(r,"$"+e))})(1),n(2)):{major:0,minor:0}},Ve=function(e,t){var n=String(t).toLowerCase();return 0===e.length?qe():je(e,n)},qe=function(){return $e(0,0)},Ye={nu:$e=function(e,t){return{major:e,minor:t}},detect:Ve,unknown:qe},Ke="Chrome",Ge="IE",Je="Opera",Qe="Firefox",Ze="Safari",et=function(e,t){return function(){return t===e}},nt={unknown:function(){return tt({current:void 0,version:Ye.unknown()})},nu:tt=function(e){var t=e.current,n=e.version;return{current:t,version:n,isEdge:et(Xe,t),isChrome:et(Ke,t),isIE:et(Ge,t),isOpera:et(Je,t),isFirefox:et(Qe,t),isSafari:et(Ze,t)}},edge:Io(Xe="Edge"),chrome:Io(Ke),ie:Io(Ge),opera:Io(Je),firefox:Io(Qe),safari:Io(Ze)},ot="iOS",it="Android",at="Linux",ut="OSX",st="Solaris",ct="FreeBSD",lt=function(e,t){return function(){return t===e}},dt={unknown:function(){return ft({current:void 0,version:Ye.unknown()})},nu:ft=function(e){var t=e.current,n=e.version;return{current:t,version:n,isWindows:lt(rt,t),isiOS:lt(ot,t),isAndroid:lt(it,t),isOSX:lt(ut,t),isLinux:lt(at,t),isSolaris:lt(st,t),isFreeBSD:lt(ct,t)}},windows:Io(rt="Windows"),ios:Io(ot),android:Io(it),linux:Io(at),osx:Io(ut),solaris:Io(st),freebsd:Io(ct)},mt=function(e,t,n){var r=e.isiOS()&&!0===/ipad/i.test(n),o=e.isiOS()&&!r,i=e.isAndroid()&&3===e.version.major,a=e.isAndroid()&&4===e.version.major,u=r||i||a&&!0===/mobile/i.test(n),s=e.isiOS()||e.isAndroid(),c=s&&!u,l=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(n);return{isiPad:Io(r),isiPhone:Io(o),isTablet:Io(u),isPhone:Io(c),isTouch:Io(s),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:Io(l)}},gt=function(e,t){var n=String(t).toLowerCase();return xi(e,function(e){return e.search(n)})},ht=function(e,n){return gt(e,n).map(function(e){var t=Ye.detect(e.versionRegexes,n);return{current:e.name,version:t}})},pt=function(e,n){return gt(e,n).map(function(e){var t=Ye.detect(e.versionRegexes,n);return{current:e.name,version:t}})},vt=function(e,t){return-1!==e.indexOf(t)},xt=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return vt(e,"edge/")&&vt(e,"chrome")&&vt(e,"safari")&&vt(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,bt=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/],search:function(e){return vt(e,"chrome")&&!vt(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return vt(e,"msie")||vt(e,"trident")}},{name:"Opera",versionRegexes:[bt,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:(yt=function(t){return function(e){return vt(e,t)}})("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:yt("firefox")},{name:"Safari",versionRegexes:[bt,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(vt(e,"safari")||vt(e,"mobile/"))&&vt(e,"applewebkit")}}],wt=[{name:"Windows",search:yt("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return vt(e,"iphone")||vt(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:yt("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:yt("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:yt("linux"),versionRegexes:[]},{name:"Solaris",search:yt("sunos"),versionRegexes:[]},{name:"FreeBSD",search:yt("freebsd"),versionRegexes:[]}],Ct={browsers:Io(xt),oses:Io(wt)},St=function(e){var t=Ct.browsers(),n=Ct.oses(),r=ht(t,e).fold(nt.unknown,nt.nu),o=pt(n,e).fold(dt.unknown,dt.nu),i=mt(o,r,e);return{browser:r,os:o,deviceType:i}},Nt=Ae(function(){var e=S.navigator.userAgent;return St(e)}),Tt=Oe,Et=De,kt=function(e){return e.nodeType!==Tt&&e.nodeType!==Et||0===e.childElementCount},Rt=function(e,t){var n=void 0===t?S.document:t.dom();return kt(n)?[]:pi(n.querySelectorAll(e),_e.fromDom)},_t=function(e,t){var n=void 0===t?S.document:t.dom();return kt(n)?qo.none():qo.from(n.querySelector(e)).map(_e.fromDom)},{detect:Nt}.detect().browser.isIE(),Pe("element","offset"),At=function(e,t){return Rt(t,e)},Dt=Zr.trim,Pt=(Ot=function(t){return function(e){if(e&&1===e.nodeType){if(e.contentEditable===t)return!0;if(e.getAttribute("data-mce-contenteditable")===t)return!0}return!1}})("true"),Bt=Ot("false"),Mt=function(e,t,n,r,o){return{type:e,title:t,url:n,level:r,attach:o}},It=function(e){for(;e=e.parentNode;){var t=e.contentEditable;if(t&&"inherit"!==t)return Pt(e)}return!1},Lt=function(e,t){return pi(At(_e.fromDom(t),e),function(e){return e.dom()})},Ft=function(e){return e.innerText||e.textContent},Ht=function(e){return e.id?e.id:ke("h")},zt=function(e){return e&&"A"===e.nodeName&&(e.id||e.name)},Wt=function(e){return zt(e)&&jt(e)},Ut=function(e){return e&&/^(H[1-6])$/.test(e.nodeName)},jt=function(e){return It(e)&&!Bt(e)},Vt=function(e){return Ut(e)&&jt(e)},qt=function(e){return Ut(e)?parseInt(e.nodeName.substr(1),10):0},$t=function(e){var t=Ht(e),n=function(){e.id=t};return Mt("header",Ft(e),"#"+t,qt(e),n)},Yt=function(e){var t=e.id||e.name,n=Ft(e);return Mt("anchor",n||"#"+t,"#"+t,0,Mo)},Xt=function(e){return pi(bi(e,Vt),$t)},Kt=function(e){return pi(bi(e,Wt),Yt)},Gt=function(e){return Lt("h1,h2,h3,h4,h5,h6,a:not([href])",e)},Jt=function(e){return 0<Dt(e.title).length},Qt=function(e){var t=Gt(e);return bi(Xt(t).concat(Kt(t)),Jt)},Zt=function(){return window.tinymce?window.tinymce.activeEditor:Qr.activeEditor},en={},tn=5,nn=function(){en={}},rn=function(e){return{title:e.title,value:{title:{raw:e.title},url:e.url,attach:e.attach}}},on=function(e){return Zr.map(e,rn)},an=function(e,t){return{title:e,value:{title:e,url:t,attach:Mo}}},un=function(t,e){return!hi(e,function(e){return e.url===t})},sn=function(e,t,n){var r=t in e?e[t]:n;return!1===r?null:r},cn=function(e,r,o,i){var n={title:"-"},t=function(e){var t=e.hasOwnProperty(o)?e[o]:[],n=bi(t,function(e){return un(e,r)});return Zr.map(n,function(e){return{title:e,value:{title:e,url:e,attach:Mo}}})},a=function(t){var e=bi(r,function(e){return e.type===t});return on(e)},u=function(){var e=a("anchor"),t=sn(i,"anchor_top","#top"),n=sn(i,"anchor_bottom","#bottom");return null!==t&&e.unshift(an("<top>",t)),null!==n&&e.push(an("<bottom>",n)),e},s=function(e){return yi(e,function(e,t){return 0===e.length||0===t.length?e.concat(t):e.concat(n,t)},[])};return!1===i.typeahead_urls?[]:"file"===o?s([fn(e,t(en)),fn(e,a("header")),fn(e,u())]):fn(e,t(en))},ln=function(e,t){var n=en[t];/^https?/.test(e)&&(n?gi(n,e).isNone()&&(en[t]=n.slice(0,tn).concat(e)):en[t]=[e])},fn=function(e,t){var n=e.toLowerCase(),r=Zr.grep(t,function(e){return-1!==e.title.toLowerCase().indexOf(n)});return 1===r.length&&r[0].title===e?[]:r},dn=function(e){var t=e.title;return t.raw?t.raw:t},mn=function(r,o,i,a){var t=function(e){var t=Qt(i),n=cn(e,t,a,o);r.showAutoComplete(n,e)};r.on("autocomplete",function(){t(r.value())}),r.on("selectitem",function(e){var t,n=e.value;r.value(n.url),t=dn(n),"image"===a?r.fire("change",{meta:{alt:t,attach:n.attach}}):r.fire("change",{meta:{text:t,attach:n.attach}}),r.focus()}),r.on("click",function(e){0===r.value().length&&"INPUT"===e.target.nodeName&&t("")}),r.on("PostRender",function(){r.getRoot().on("submit",function(e){e.isDefaultPrevented()||ln(r.value(),a)})})},gn=function(e){var t=e.status,n=e.message;return"valid"===t?{status:"ok",message:n}:"unknown"===t?{status:"warn",message:n}:"invalid"===t?{status:"warn",message:n}:{status:"none",message:""}},hn=function(n,e,t){var r,o=e.filepicker_validator_handler;o&&(r=function(e){0!==e.length?o({url:e,type:t},function(e){var t=gn(e);n.statusMessage(t.message),n.statusLevel(t.status)}):n.statusLevel("none")},n.state.on("change:value",function(e){r(e.value)}))},pn=me.extend({Statics:{clearHistory:nn},init:function(e){var t,n,r,o=this,i=Zt(),a=i.settings,u=e.filetype;e.spellcheck=!1,(r=a.file_picker_types||a.file_browser_callback_types)&&(r=Zr.makeMap(r,/[, ]/)),r&&!r[u]||(!(n=a.file_picker_callback)||r&&!r[u]?!(n=a.file_browser_callback)||r&&!r[u]||(t=function(){n(o.getEl("inp").id,o.value(),u,window)}):t=function(){var e=o.fire("beforecall").meta;e=Zr.extend({filetype:u},e),n.call(i,function(e,t){o.value(e).fire("change",{meta:t})},o.value(),e)}),t&&(e.icon="browse",e.onaction=t),o._super(e),o.classes.add("filepicker"),mn(o,a,i.getBody(),u),hn(o,a,u)}}),vn=ue.extend({recalc:function(e){var t=e.layoutRect(),n=e.paddingBox;e.items().filter(":visible").each(function(e){e.layoutRect({x:n.left,y:n.top,w:t.innerW-n.right-n.left,h:t.innerH-n.top-n.bottom}),e.recalc&&e.recalc()})}}),bn=ue.extend({recalc:function(e){var t,n,r,o,i,a,u,s,c,l,f,d,m,g,h,p,v,b,y,x,w,C,S,N,T,E,k,R,_,A,D=[],O=Math.max,P=Math.min,B=e.items().filter(":visible"),M=e.layoutRect(),I=e.paddingBox,L=e.settings,F=e.isRtl()?L.direction||"row-reversed":L.direction,H=L.align,z=e.isRtl()?L.pack||"end":L.pack,W=L.spacing||0;for("row-reversed"!==F&&"column-reverse"!==F||(B=B.set(B.toArray().reverse()),F=F.split("-")[0]),_="column"===F?(p="y",g="h",h="minH",v="maxH",y="innerH",b="top",x="deltaH",w="contentH",E="left",N="w",C="x",S="innerW",T="minW",k="right",R="deltaW","contentW"):(p="x",g="w",h="minW",v="maxW",y="innerW",b="left",x="deltaW",w="contentW",E="top",N="h",C="y",S="innerH",T="minH",k="bottom",R="deltaH","contentH"),o=M[y]-I[b]-I[b],m=r=0,t=0,n=B.length;t<n;t++)a=(i=B[t]).layoutRect(),o-=t<n-1?W:0,0<(u=i.settings.flex)&&(r+=u,a[v]&&D.push(i),a.flex=u),o-=a[h],m<(s=I[E]+a[T]+I[k])&&(m=s);if((f={})[h]=o<0?M[h]-o+M[x]:M[y]-o+M[x],f[T]=m+M[R],f[w]=M[y]-o,f[_]=m,f.minW=P(f.minW,M.maxW),f.minH=P(f.minH,M.maxH),f.minW=O(f.minW,M.startMinWidth),f.minH=O(f.minH,M.startMinHeight),M.autoResize&&(f.minW!==M.minW||f.minH!==M.minH))return f.w=f.minW,f.h=f.minH,e.layoutRect(f),this.recalc(e),void(null===e._lastRect&&(A=e.parent())&&(A._lastRect=null,A.recalc()));for(l=o/r,t=0,n=D.length;t<n;t++)(c=(a=(i=D[t]).layoutRect())[v])<(s=a[h]+a.flex*l)?(o-=a[v]-a[h],r-=a.flex,a.flex=0,a.maxFlexSize=c):a.maxFlexSize=0;for(l=o/r,d=I[b],f={},0===r&&("end"===z?d=o+I[b]:"center"===z?(d=Math.round(M[y]/2-(M[y]-o)/2)+I[b])<0&&(d=I[b]):"justify"===z&&(d=I[b],W=Math.floor(o/(B.length-1)))),f[C]=I[E],t=0,n=B.length;t<n;t++)s=(a=(i=B[t]).layoutRect()).maxFlexSize||a[h],"center"===H?f[C]=Math.round(M[S]/2-a[N]/2):"stretch"===H?(f[N]=O(a[T]||0,M[S]-I[E]-I[k]),f[C]=I[E]):"end"===H&&(f[C]=M[S]-a[N]-I.top),0<a.flex&&(s+=a.flex*l),f[g]=s,f[p]=d,i.layoutRect(f),i.recalc&&i.recalc(),d+=s+W}}),yn=ae.extend({Defaults:{containerClass:"flow-layout",controlClass:"flow-layout-item",endClass:"break"},recalc:function(e){e.items().filter(":visible").each(function(e){e.recalc&&e.recalc()})},isNative:function(){return!0}}),xn=function(e,t){return _t(t,e)},wn=function(e,t){return function(){e.execCommand("mceToggleFormat",!1,t)}},Cn=function(e,t,n){var r=function(e){n(e,t)};e.formatter?e.formatter.formatChanged(t,r):e.on("init",function(){e.formatter.formatChanged(t,r)})},Sn=function(e,n){return function(t){Cn(e,n,function(e){t.control.active(e)})}},Nn=function(r){var t=["alignleft","aligncenter","alignright","alignjustify"],o="alignleft",e=[{text:"Left",icon:"alignleft",onclick:wn(r,"alignleft")},{text:"Center",icon:"aligncenter",onclick:wn(r,"aligncenter")},{text:"Right",icon:"alignright",onclick:wn(r,"alignright")},{text:"Justify",icon:"alignjustify",onclick:wn(r,"alignjustify")}];r.addMenuItem("align",{text:"Align",menu:e}),r.addButton("align",{type:"menubutton",icon:o,menu:e,onShowMenu:function(e){var n=e.control.menu;Zr.each(t,function(t,e){n.items().eq(e).each(function(e){return e.active(r.formatter.match(t))})})},onPostRender:function(e){var n=e.control;Zr.each(t,function(t,e){Cn(r,t,function(e){n.icon(o),e&&n.icon(t)})})}}),Zr.each({alignleft:["Align left","JustifyLeft"],aligncenter:["Align center","JustifyCenter"],alignright:["Align right","JustifyRight"],alignjustify:["Justify","JustifyFull"],alignnone:["No alignment","JustifyNone"]},function(e,t){r.addButton(t,{active:!1,tooltip:e[0],cmd:e[1],onPostRender:Sn(r,t)})})},Tn=function(e){return e?e.split(",")[0]:""},En=function(e,t){var n,r=t?t.toLowerCase():"";return Zr.each(e,function(e){e.value.toLowerCase()===r&&(n=e.value)}),Zr.each(e,function(e){n||Tn(e.value).toLowerCase()!==Tn(r).toLowerCase()||(n=e.value)}),n},kn=function(o,i){return function(){var r=this;r.state.set("value",null),o.on("init nodeChange",function(e){var t=o.queryCommandValue("FontName"),n=En(i,t);r.value(n||null),!n&&t&&r.text(Tn(t))})}},Rn=function(e){for(var t=(e=e.replace(/;$/,"").split(";")).length;t--;)e[t]=e[t].split("=");return e},_n=function(e){var t="Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats",n=Rn(e.settings.font_formats||t);return Zr.map(n,function(e){return{text:{raw:e[0]},value:e[1],textStyle:-1===e[1].indexOf("dings")?"font-family:"+e[1]:""}})},An=function(t){t.addButton("fontselect",function(){var e=_n(t);return{type:"listbox",text:"Font Family",tooltip:"Font Family",values:e,fixedWidth:!0,onPostRender:kn(t,e),onselect:function(e){e.control.settings.value&&t.execCommand("FontName",!1,e.control.settings.value)}}})},Dn=function(e){An(e)},On=function(e,t){var n=Math.pow(10,t);return Math.round(e*n)/n},Pn=function(e,t){return/[0-9.]+px$/.test(e)?On(72*parseInt(e,10)/96,t||0)+"pt":e},Bn=function(e,t,n){var r;return Zr.each(e,function(e){e.value===n?r=n:e.value===t&&(r=t)}),r},Mn=function(a,u){return function(){var i=this;a.on("init nodeChange",function(e){var t,n,r,o;if(t=a.queryCommandValue("FontSize"))for(r=3;!o&&0<=r;r--)n=Pn(t,r),o=Bn(u,n,t);i.value(o||null),o||i.text(n)})}},In=function(e){var t="8pt 10pt 12pt 14pt 18pt 24pt 36pt",n=e.settings.fontsize_formats||t;return Zr.map(n.split(" "),function(e){var t=e,n=e,r=e.split("=");return 1<r.length&&(t=r[0],n=r[1]),{text:t,value:n}})},Ln=function(t){t.addButton("fontsizeselect",function(){var e=In(t);return{type:"listbox",text:"Font Sizes",tooltip:"Font Sizes",values:e,fixedWidth:!0,onPostRender:Mn(t,e),onclick:function(e){e.control.settings.value&&t.execCommand("FontSize",!1,e.control.settings.value)}}})},Fn=function(e){Ln(e)},Hn=function(n,e){var r=e.length;return Zr.each(e,function(e){e.menu&&(e.hidden=0===Hn(n,e.menu));var t=e.format;t&&(e.hidden=!n.formatter.canApply(t)),e.hidden&&r--}),r},zn=function(n,e){var r=e.items().length;return e.items().each(function(e){e.menu&&e.visible(0<zn(n,e.menu)),!e.menu&&e.settings.menu&&e.visible(0<Hn(n,e.settings.menu));var t=e.settings.format;t&&e.visible(n.formatter.canApply(t)),e.visible()||r--}),r},Wn=function(r){var o=0,i=[],e=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",icon:"bold",format:"bold"},{title:"Italic",icon:"italic",format:"italic"},{title:"Underline",icon:"underline",format:"underline"},{title:"Strikethrough",icon:"strikethrough",format:"strikethrough"},{title:"Superscript",icon:"superscript",format:"superscript"},{title:"Subscript",icon:"subscript",format:"subscript"},{title:"Code",icon:"code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Alignment",items:[{title:"Left",icon:"alignleft",format:"alignleft"},{title:"Center",icon:"aligncenter",format:"aligncenter"},{title:"Right",icon:"alignright",format:"alignright"},{title:"Justify",icon:"alignjustify",format:"alignjustify"}]}],a=function(e){var r=[];if(e)return Zr.each(e,function(e){var t,n={text:e.title,icon:e.icon};e.items?n.menu=a(e.items):(t=e.format||"custom"+o++,e.format||(e.name=t,i.push(e)),n.format=t,n.cmd=e.cmd),r.push(n)}),r},t=function(){return r.settings.style_formats_merge?r.settings.style_formats?a(e.concat(r.settings.style_formats)):a(e):a(r.settings.style_formats||e)};return r.on("init",function(){Zr.each(i,function(e){r.formatter.register(e.name,e)})}),{type:"menu",items:t(),onPostRender:function(e){r.fire("renderFormatsMenu",{control:e.control})},itemDefaults:{preview:!0,textStyle:function(){if(this.settings.format)return r.formatter.getCssText(this.settings.format)},onPostRender:function(){var n=this;n.parent().on("show",function(){var e,t;(e=n.settings.format)&&(n.disabled(!r.formatter.canApply(e)),n.active(r.formatter.match(e))),(t=n.settings.cmd)&&n.active(r.queryCommandState(t))})},onclick:function(){this.settings.format&&wn(r,this.settings.format)(),this.settings.cmd&&r.execCommand(this.settings.cmd)}}}},Un=function(e,t){e.addMenuItem("formats",{text:"Formats",menu:t})},jn=function(e,t){e.addButton("styleselect",{type:"menubutton",text:"Formats",menu:t,onShowMenu:function(){e.settings.style_formats_autohide&&zn(e,this.menu)}})},Vn=function(e){var t=Wn(e);Un(e,t),jn(e,t)},qn="Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre",$n=function(e){for(var t=(e=e.replace(/;$/,"").split(";")).length;t--;)e[t]=e[t].split("=");return e},Yn=function(o,i,a){return function(){var t=this;o.on("nodeChange",function(e){var n=o.formatter,r=null;Zr.each(e.parents,function(t){if(Zr.each(i,function(e){if(a?n.matchNode(t,a,{value:e.value})&&(r=e.value):n.matchNode(t,e.value)&&(r=e.value),r)return!1}),r)return!1}),t.value(r)})}},Xn=function(n,e){return function(){var t=[];return Zr.each(e,function(e){t.push({text:e[0],value:e[1],textStyle:function(){return n.formatter.getCssText(e[1])}})}),{type:"listbox",text:e[0][0],values:t,fixedWidth:!0,onselect:function(e){if(e.control){var t=e.control.value();wn(n,t)()}},onPostRender:Yn(n,t)}}},Kn=function(t,e){return Zr.map(e,function(e){return{text:e[0],onclick:wn(t,e[1]),textStyle:function(){return t.formatter.getCssText(e[1])}}})},Gn=function(e){var t=$n(e.settings.block_formats||qn);e.addMenuItem("blockformats",{text:"Blocks",menu:Kn(e,t)}),e.addButton("formatselect",Xn(e,t))},Jn=function(t,e){var n,r;if("string"==typeof e)r=e.split(" ");else if(Zr.isArray(e))return Ni(Zr.map(e,function(e){return Jn(t,e)}));return n=Zr.grep(r,function(e){return"|"===e||e in t.menuItems}),Zr.map(n,function(e){return"|"===e?{text:"-"}:t.menuItems[e]})},Qn=function(e){return e&&"-"===e.text},Zn=function(e){var t=bi(e,function(e,t,n){return!Qn(e)||!Qn(n[t-1])});return bi(t,function(e,t,n){return!Qn(e)||0<t&&t<n.length-1})},er=function(e,t){var n=[{text:"-"}],r=Zr.grep(e.menuItems,function(e){return e.context===t});return Zr.each(r,function(e){"before"===e.separator&&n.push({text:"|"}),e.prependToContext?n.unshift(e):n.push(e),"after"===e.separator&&n.push({text:"|"})}),n},tr=function(e){var t=e.settings.insert_button_items;return Zn(t?Jn(e,t):er(e,"insert"))},nr=function(e){e.addButton("insert",{type:"menubutton",icon:"insert",menu:[],oncreatemenu:function(){this.menu.add(tr(e)),this.menu.renderNew()}})},rr=function(e){nr(e)},or=function(n){Zr.each({bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript"},function(e,t){n.addButton(t,{active:!1,tooltip:e,onPostRender:Sn(n,t),onclick:wn(n,t)})})},ir=function(n){Zr.each({outdent:["Decrease indent","Outdent"],indent:["Increase indent","Indent"],cut:["Cut","Cut"],copy:["Copy","Copy"],paste:["Paste","Paste"],help:["Help","mceHelp"],selectall:["Select all","SelectAll"],visualaid:["Visual aids","mceToggleVisualAid"],newdocument:["New document","mceNewDocument"],removeformat:["Clear formatting","RemoveFormat"],remove:["Remove","Delete"]},function(e,t){n.addButton(t,{tooltip:e[0],cmd:e[1]})})},ar=function(n){Zr.each({blockquote:["Blockquote","mceBlockQuote"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"]},function(e,t){n.addButton(t,{active:!1,tooltip:e[0],cmd:e[1],onPostRender:Sn(n,t)})})},ur=function(e){or(e),ir(e),ar(e)},sr=function(n){Zr.each({bold:["Bold","Bold","Meta+B"],italic:["Italic","Italic","Meta+I"],underline:["Underline","Underline","Meta+U"],strikethrough:["Strikethrough","Strikethrough"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"],removeformat:["Clear formatting","RemoveFormat"],newdocument:["New document","mceNewDocument"],cut:["Cut","Cut","Meta+X"],copy:["Copy","Copy","Meta+C"],paste:["Paste","Paste","Meta+V"],selectall:["Select all","SelectAll","Meta+A"]},function(e,t){n.addMenuItem(t,{text:e[0],icon:t,shortcut:e[2],cmd:e[1]})}),n.addMenuItem("codeformat",{text:"Code",icon:"code",onclick:wn(n,"code")})},cr=function(e){ur(e),sr(e)},lr=function(n,r){return function(){var e=this,t=function(){var e="redo"===r?"hasRedo":"hasUndo";return!!n.undoManager&&n.undoManager[e]()};e.disabled(!t()),n.on("Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",function(){e.disabled(n.readonly||!t())})}},fr=function(e){e.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onPostRender:lr(e,"undo"),cmd:"undo"}),e.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onPostRender:lr(e,"redo"),cmd:"redo"})},dr=function(e){e.addButton("undo",{tooltip:"Undo",onPostRender:lr(e,"undo"),cmd:"undo"}),e.addButton("redo",{tooltip:"Redo",onPostRender:lr(e,"redo"),cmd:"redo"})},mr=function(e){fr(e),dr(e)},gr=function(e){return function(){var t=this;e.on("VisualAid",function(e){t.active(e.hasVisual)}),t.active(e.hasVisual)}},hr=function(e){e.addMenuItem("visualaid",{text:"Visual aids",selectable:!0,onPostRender:gr(e),cmd:"mceToggleVisualAid"})},pr=function(e){hr(e)},vr=function(){J.tooltips=!Wi.iOS,D.translate=function(e){return Qr.translate(e)}},br=function(e){e.settings.ui_container&&(Wi.container=xn(_e.fromDom(S.document.body),e.settings.ui_container).fold(Io(null),function(e){return e.dom()}))},yr=function(e){e.rtl&&(D.rtl=!0)},xr=function(e){e.on("mousedown progressstate",function(){V.hideAll()})},wr={setup:function(e){yr(e),xr(e),br(e),vr(),Gn(e),Nn(e),cr(e),mr(e),Fn(e),Dn(e),Vn(e),pr(e),rr(e)}},Cr=ue.extend({recalc:function(e){var t,n,r,o,i,a,u,s,c,l,f,d,m,g,h,p,v,b,y,x,w,C,S=[],N=[],T=e.settings,E=e.items().filter(":visible"),k=e.layoutRect(),R=T.columns||Math.ceil(Math.sqrt(E.length)),_=Math.ceil(E.length/R),A=T.spacingH||T.spacing||0,D=T.spacingV||T.spacing||0,O=T.alignH||T.align,P=T.alignV||T.align,B=e.paddingBox,M="reverseRows"in T?T.reverseRows:e.isRtl();for(O&&"string"==typeof O&&(O=[O]),P&&"string"==typeof P&&(P=[P]),a=0;a<R;a++)S.push(0);for(u=0;u<_;u++)N.push(0);for(u=0;u<_;u++)for(a=0;a<R&&(i=E[u*R+a]);a++)g=(o=i.layoutRect()).minW,h=o.minH,S[a]=g>S[a]?g:S[a],N[u]=h>N[u]?h:N[u];for(p=k.innerW-B.left-B.right,a=d=0;a<R;a++)d+=S[a]+(0<a?A:0),p-=(0<a?A:0)+S[a];for(v=k.innerH-B.top-B.bottom,u=m=0;u<_;u++)m+=N[u]+(0<u?D:0),v-=(0<u?D:0)+N[u];if(d+=B.left+B.right,m+=B.top+B.bottom,(r={}).minW=d+(k.w-k.innerW),r.minH=m+(k.h-k.innerH),r.contentW=r.minW-k.deltaW,r.contentH=r.minH-k.deltaH,r.minW=Math.min(r.minW,k.maxW),r.minH=Math.min(r.minH,k.maxH),r.minW=Math.max(r.minW,k.startMinWidth),r.minH=Math.max(r.minH,k.startMinHeight),k.autoResize&&(r.minW!==k.minW||r.minH!==k.minH))return r.w=r.minW,r.h=r.minH,e.layoutRect(r),this.recalc(e),void(null===e._lastRect&&(b=e.parent())&&(b._lastRect=null,b.recalc()));if(k.autoResize&&((r=e.layoutRect(r)).contentW=r.minW-k.deltaW,r.contentH=r.minH-k.deltaH),y="start"===T.packV?0:0<v?Math.floor(v/_):0,x=0,w=T.flexWidths)for(a=0;a<w.length;a++)x+=w[a];else x=R;for(C=p/x,a=0;a<R;a++)S[a]+=w?w[a]*C:C;for(c=B.top,u=0;u<_;u++){for(s=B.left,n=N[u]+y,a=0;a<R&&(i=E[M?u*R+R-1-a:u*R+a]);a++)l=i.settings,o=i.layoutRect(),t=Math.max(S[a],o.startMinWidth),o.x=s,o.y=c,"center"===(f=l.alignH||(O?O[a]||O[0]:null))?o.x=s+t/2-o.w/2:"right"===f?o.x=s+t-o.w:"stretch"===f&&(o.w=t),"center"===(f=l.alignV||(P?P[a]||P[0]:null))?o.y=c+n/2-o.h/2:"bottom"===f?o.y=c+n-o.h:"stretch"===f&&(o.h=n),i.layoutRect(o),s+=t+A,i.recalc&&i.recalc();c+=n+D}}}),Sr=J.extend({renderHtml:function(){return this.classes.add("iframe"),this.canFocus=!1,'<iframe id="'+this._id+'" class="'+this.classes+'" tabindex="-1" src="'+(this.settings.url||"javascript:''")+'" frameborder="0"></iframe>'},src:function(e){this.getEl().src=e},html:function(e,t){var n=this,r=this.getEl().contentWindow.document.body;return r?(r.innerHTML=e,t&&t()):Bo.setTimeout(function(){n.html(e)}),this}}),Nr=J.extend({init:function(e){this._super(e),this.classes.add("widget").add("infobox"),this.canFocus=!1},severity:function(e){this.classes.remove("error"),this.classes.remove("warning"),this.classes.remove("success"),this.classes.add(e)},help:function(e){this.state.set("help",e)},renderHtml:function(){var e=this.classPrefix;return'<div id="'+this._id+'" class="'+this.classes+'"><div id="'+this._id+'-body">'+this.encode(this.state.get("text"))+'<button role="button" tabindex="-1"><i class="'+e+"ico "+e+'i-help"></i></button></div></div>'},bindStates:function(){var t=this;return t.state.on("change:text",function(e){t.getEl("body").firstChild.data=t.encode(e.value),t.state.get("rendered")&&t.updateLayoutRect()}),t.state.on("change:help",function(e){t.classes.toggle("has-help",e.value),t.state.get("rendered")&&t.updateLayoutRect()}),t._super()}}),Tr=J.extend({init:function(e){this._super(e),this.classes.add("widget").add("label"),this.canFocus=!1,e.multiline&&this.classes.add("autoscroll"),e.strong&&this.classes.add("strong")},initLayoutRect:function(){var e=this,t=e._super();return e.settings.multiline&&(ca.getSize(e.getEl()).width>t.maxW&&(t.minW=t.maxW,e.classes.add("multiline")),e.getEl().style.width=t.minW+"px",t.startMinH=t.h=t.minH=Math.min(t.maxH,ca.getSize(e.getEl()).height)),t},repaint:function(){return this.settings.multiline||(this.getEl().style.lineHeight=this.layoutRect().h+"px"),this._super()},severity:function(e){this.classes.remove("error"),this.classes.remove("warning"),this.classes.remove("success"),this.classes.add(e)},renderHtml:function(){var e,t,n=this,r=n.settings.forId,o=n.settings.html?n.settings.html:n.encode(n.state.get("text"));return!r&&(t=n.settings.forName)&&(e=n.getRoot().find("#"+t)[0])&&(r=e._id),r?'<label id="'+n._id+'" class="'+n.classes+'"'+(r?' for="'+r+'"':"")+">"+o+"</label>":'<span id="'+n._id+'" class="'+n.classes+'">'+o+"</span>"},bindStates:function(){var t=this;return t.state.on("change:text",function(e){t.innerHtml(t.encode(e.value)),t.state.get("rendered")&&t.updateLayoutRect()}),t._super()}}),Er=B.extend({Defaults:{role:"toolbar",layout:"flow"},init:function(e){this._super(e),this.classes.add("toolbar")},postRender:function(){return this.items().each(function(e){e.classes.add("toolbar-item")}),this._super()}}),kr=Er.extend({Defaults:{role:"menubar",containerCls:"menubar",ariaRoot:!0,defaults:{type:"menubutton"}}}),Rr=se.extend({init:function(e){this._renderOpen=!0,this._super(e),e=this.settings,this.classes.add("menubtn"),e.fixedWidth&&this.classes.add("fixed-width"),this.aria("haspopup",!0),this.state.set("menu",e.menu||this.render())},showMenu:function(e){var t,n,r,o=this;if(o.menu&&o.menu.visible()&&!1!==e)return o.hideMenu();o.menu||(t=o.state.get("menu")||[],o.classes.add("opened"),t.length?t={type:"menu",animate:!0,items:t}:(t.type=t.type||"menu",t.animate=!0),t.renderTo?o.menu=t.parent(o).show().renderTo():o.menu=Co.create(t).parent(o).renderTo(),o.fire("createmenu"),o.menu.reflow(),o.menu.on("cancel",function(e){e.control.parent()===o.menu&&(e.stopPropagation(),o.focus(),o.hideMenu())}),o.menu.on("select",function(){o.focus()}),o.menu.on("show hide",function(e){"hide"===e.type&&e.control.parent()===o&&o.classes.remove("opened-under"),e.control===o.menu&&(o.activeMenu("show"===e.type),o.classes.toggle("opened","show"===e.type)),o.aria("expanded","show"===e.type)}).fire("show")),o.menu.show(),o.menu.layoutRect({w:o.layoutRect().w}),o.menu.repaint(),o.menu.moveRel(o.getEl(),o.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"]),n=o.menu.layoutRect(),(r=o.$el.offset().top+o.layoutRect().h)>n.y&&r<n.y+n.h&&o.classes.add("opened-under"),o.fire("showmenu")},hideMenu:function(){this.menu&&(this.menu.items().each(function(e){e.hideMenu&&e.hideMenu()}),this.menu.hide())},activeMenu:function(e){this.classes.toggle("active",e)},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix,r=e.settings.icon,o=e.state.get("text"),i="",a=e.settings.image;return a=a?(r="none","string"!=typeof a&&(a=S.window.getSelection?a[0]:a[1])," style=\"background-image: url('"+a+"')\""):"",o&&(e.classes.add("btn-has-text"),i='<span class="'+n+'txt">'+e.encode(o)+"</span>"),r=e.settings.icon?n+"ico "+n+"i-"+r:"",e.aria("role",e.parent()instanceof kr?"menuitem":"button"),'<div id="'+t+'" class="'+e.classes+'" tabindex="-1" aria-labelledby="'+t+'"><button id="'+t+'-open" role="presentation" type="button" tabindex="-1">'+(r?'<i class="'+r+'"'+a+"></i>":"")+i+' <i class="'+n+'caret"></i></button></div>'},postRender:function(){var o=this;return o.on("click",function(e){e.control===o&&function(e,t){for(;e;){if(t===e)return!0;e=e.parentNode}return!1}(e.target,o.getEl())&&(o.focus(),o.showMenu(!e.aria),e.aria&&o.menu.items().filter(":visible")[0].focus())}),o.on("mouseenter",function(e){var t,n=e.control,r=o.parent();n&&r&&n instanceof Rr&&n.parent()===r&&(r.items().filter("MenuButton").each(function(e){e.hideMenu&&e!==n&&(e.menu&&e.menu.visible()&&(t=!0),e.hideMenu())}),t&&(n.focus(),n.showMenu()))}),o._super()},bindStates:function(){var e=this;return e.state.on("change:menu",function(){e.menu&&e.menu.remove(),e.menu=null}),e._super()},remove:function(){this._super(),this.menu&&this.menu.remove()}}),_r=V.extend({Defaults:{defaultType:"menuitem",border:1,layout:"stack",role:"application",bodyRole:"menu",ariaRoot:!0},init:function(e){var t,n,r=this;if(e.autohide=!0,e.constrainToViewport=!0,"function"==typeof e.items&&(e.itemsFactory=e.items,e.items=[]),e.itemDefaults)for(n=(t=e.items).length;n--;)t[n]=Zr.extend({},e.itemDefaults,t[n]);r._super(e),r.classes.add("menu"),e.animate&&11!==Wi.ie&&r.classes.add("animate")},repaint:function(){return this.classes.toggle("menu-align",!0),this._super(),this.getEl().style.height="",this.getEl("body").style.height="",this},cancel:function(){this.hideAll(),this.fire("select")},load:function(){var t,n=this;function r(){n.throbber&&(n.throbber.hide(),n.throbber=null)}n.settings.itemsFactory&&(n.throbber||(n.throbber=new Ea(n.getEl("body"),!0),0===n.items().length?(n.throbber.show(),n.fire("loading")):n.throbber.show(100,function(){n.items().remove(),n.fire("loading")}),n.on("hide close",r)),n.requestTime=t=(new Date).getTime(),n.settings.itemsFactory(function(e){0!==e.length?n.requestTime===t&&(n.getEl().style.width="",n.getEl("body").style.width="",r(),n.items().remove(),n.getEl("body").innerHTML="",n.add(e),n.renderNew(),n.fire("loaded")):n.hide()}))},hideAll:function(){return this.find("menuitem").exec("hideMenu"),this._super()},preRender:function(){var n=this;return n.items().each(function(e){var t=e.settings;if(t.icon||t.image||t.selectable)return!(n._hasIcons=!0)}),n.settings.itemsFactory&&n.on("postrender",function(){n.settings.itemsFactory&&n.load()}),n.on("show hide",function(e){e.control===n&&("show"===e.type?Bo.setTimeout(function(){n.classes.add("in")},0):n.classes.remove("in"))}),n._super()}}),Ar=Rr.extend({init:function(r){var e,o,i,n,a=this;a._super(r),r=a.settings,a._values=e=r.values,e&&(void 0!==r.value&&function e(t){for(var n=0;n<t.length;n++){if(o=t[n].selected||r.value===t[n].value)return i=i||t[n].text,a.state.set("value",t[n].value),!0;if(t[n].menu&&e(t[n].menu))return!0}}(e),!o&&0<e.length&&(i=e[0].text,a.state.set("value",e[0].value)),a.state.set("menu",e)),a.state.set("text",r.text||i),a.classes.add("listbox"),a.on("select",function(e){var t=e.control;n&&(e.lastControl=n),r.multiple?t.active(!t.active()):a.value(e.control.value()),n=t})},value:function(n){return 0===arguments.length?this.state.get("value"):(void 0===n||(this.settings.values&&!function t(e){return hi(e,function(e){return e.menu?t(e.menu):e.value===n})}(this.settings.values)?null===n&&this.state.set("value",null):this.state.set("value",n)),this)},bindStates:function(){var r=this;return r.on("show",function(e){var t,n;t=e.control,n=r.value(),t instanceof _r&&t.items().each(function(e){e.hasMenus()||e.active(e.value()===n)})}),r.state.on("change:value",function(e){var t=function e(t,n){var r,o;if(t)for(o=0;o<t.length;o++){if(t[o].value===n)return t[o];if(t[o].menu&&(r=e(t[o].menu,n)))return r}}(r.state.get("menu"),e.value);t?r.text(t.text):r.text(r.settings.text)}),r._super()}}),Dr=function(e,t){var n,r=e._textStyle;r&&((n=e.getEl("text")).setAttribute("style",r),t&&(n.style.color="",n.style.backgroundColor=""))},Or=J.extend({Defaults:{border:0,role:"menuitem"},init:function(e){var t,n=this;n._super(e),e=n.settings,n.classes.add("menu-item"),e.menu&&n.classes.add("menu-item-expand"),e.preview&&n.classes.add("menu-item-preview"),"-"!==(t=n.state.get("text"))&&"|"!==t||(n.classes.add("menu-item-sep"),n.aria("role","separator"),n.state.set("text","-")),e.selectable&&(n.aria("role","menuitemcheckbox"),n.classes.add("menu-item-checkbox"),e.icon="selected"),e.preview||e.selectable||n.classes.add("menu-item-normal"),n.on("mousedown",function(e){e.preventDefault()}),e.menu&&!e.ariaHideMenu&&n.aria("haspopup",!0)},hasMenus:function(){return!!this.settings.menu},showMenu:function(){var t,e,n=this,r=n.settings,o=n.parent();o.items().each(function(e){e!==n&&e.hideMenu()}),r.menu&&((t=n.menu)?t.show():((t=r.menu).length?t={type:"menu",items:t}:t.type=t.type||"menu",o.settings.itemDefaults&&(t.itemDefaults=o.settings.itemDefaults),(t=n.menu=Co.create(t).parent(n).renderTo()).reflow(),t.on("cancel",function(e){e.stopPropagation(),n.focus(),t.hide()}),t.on("show hide",function(e){e.control.items&&e.control.items().each(function(e){e.active(e.settings.selected)})}).fire("show"),t.on("hide",function(e){e.control===t&&n.classes.remove("selected")}),t.submenu=!0),t._parentMenu=o,t.classes.add("menu-sub"),e=t.testMoveRel(n.getEl(),n.isRtl()?["tl-tr","bl-br","tr-tl","br-bl"]:["tr-tl","br-bl","tl-tr","bl-br"]),t.moveRel(n.getEl(),e),e="menu-sub-"+(t.rel=e),t.classes.remove(t._lastRel).add(e),t._lastRel=e,n.classes.add("selected"),n.aria("expanded",!0))},hideMenu:function(){return this.menu&&(this.menu.items().each(function(e){e.hideMenu&&e.hideMenu()}),this.menu.hide(),this.aria("expanded",!1)),this},renderHtml:function(){var e=this,t=e._id,n=e.settings,r=e.classPrefix,o=e.state.get("text"),i=e.settings.icon,a="",u=n.shortcut,s=e.encode(n.url),c="";function l(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function f(e){var t=n.match||"";return t?e.replace(new RegExp(l(t),"gi"),function(e){return"!mce~match["+e+"]mce~match!"}):e}function d(e){return e.replace(new RegExp(l("!mce~match["),"g"),"<b>").replace(new RegExp(l("]mce~match!"),"g"),"</b>")}return i&&e.parent().classes.add("menu-has-icons"),n.image&&(a=" style=\"background-image: url('"+n.image+"')\""),u&&(u=function(e){var t,n,r={};for(r=Wi.mac?{alt:"&#x2325;",ctrl:"&#x2318;",shift:"&#x21E7;",meta:"&#x2318;"}:{meta:"Ctrl"},e=e.split("+"),t=0;t<e.length;t++)(n=r[e[t].toLowerCase()])&&(e[t]=n);return e.join("+")}(u)),i=r+"ico "+r+"i-"+(e.settings.icon||"none"),c="-"!==o?'<i class="'+i+'"'+a+"></i>":"",o=d(e.encode(f(o))),s=d(e.encode(f(s))),'<div id="'+t+'" class="'+e.classes+'" tabindex="-1">'+c+("-"!==o?'<span id="'+t+'-text" class="'+r+'text">'+o+"</span>":"")+(u?'<div id="'+t+'-shortcut" class="'+r+'menu-shortcut">'+u+"</div>":"")+(n.menu?'<div class="'+r+'caret"></div>':"")+(s?'<div class="'+r+'menu-item-link">'+s+"</div>":"")+"</div>"},postRender:function(){var e,t=this,n=t.settings,r=n.textStyle;return"function"==typeof r&&(r=r.call(this)),r&&(e=t.getEl("text"))&&(e.setAttribute("style",r),t._textStyle=r),t.on("mouseenter click touchstart",function(e){if(e.control===t){if("touchstart"===e.type)return e.preventDefault(),void t.fire("click",e);n.menu||"click"!==e.type?(t.showMenu(),e.aria&&t.menu.focus(!0)):(t.fire("select"),Bo.requestAnimationFrame(function(){t.parent().hideAll()}))}}),t._super(),t},hover:function(){return this.parent().items().each(function(e){e.classes.remove("selected")}),this.classes.toggle("selected",!0),this},active:function(e){return Dr(this,e),void 0!==e&&this.aria("checked",e),this._super(e)},remove:function(){this._super(),this.menu&&this.menu.remove()}}),Pr=fe.extend({Defaults:{classes:"radio",role:"radio"}}),Br=J.extend({renderHtml:function(){var e=this.classPrefix;return this.classes.add("resizehandle"),"both"===this.settings.direction&&this.classes.add("resizehandle-both"),this.canFocus=!1,'<div id="'+this._id+'" class="'+this.classes+'"><i class="'+e+"ico "+e+'i-resize"></i></div>'},postRender:function(){var t=this;t._super(),t.resizeDragHelper=new xa(this._id,{start:function(){t.fire("ResizeStart")},drag:function(e){"both"!==t.settings.direction&&(e.deltaX=0),t.fire("Resize",e)},stop:function(){t.fire("ResizeEnd")}})},remove:function(){return this.resizeDragHelper&&this.resizeDragHelper.destroy(),this._super()}}),Mr=J.extend({Defaults:{classes:"selectbox",role:"selectbox",options:[]},init:function(e){var n=this;n._super(e),n.settings.size&&(n.size=n.settings.size),n.settings.options&&(n._options=n.settings.options),n.on("keydown",function(e){var t;13===e.keyCode&&(e.preventDefault(),n.parents().reverse().each(function(e){if(e.toJSON)return t=e,!1}),n.fire("submit",{data:t.toJSON()}))})},options:function(e){return arguments.length?(this.state.set("options",e),this):this.state.get("options")},renderHtml:function(){var e=this,t="",n=_a(e._options);return e.size&&(t=' size = "'+e.size+'"'),'<select id="'+e._id+'" class="'+e.classes+'"'+t+">"+n+"</select>"},bindStates:function(){var t=this;return t.state.on("change:options",function(e){t.getEl().innerHTML=_a(e.value)}),t._super()}}),Ir=J.extend({init:function(e){e.previewFilter||(e.previewFilter=function(e){return Math.round(100*e)/100}),this._super(e),this.classes.add("slider"),"v"===e.orientation&&this.classes.add("vertical"),this._minValue=di(e.minValue)?e.minValue:0,this._maxValue=di(e.maxValue)?e.maxValue:100,this._initValue=this.state.get("value")},renderHtml:function(){var e=this._id,t=this.classPrefix;return'<div id="'+e+'" class="'+this.classes+'"><div id="'+e+'-handle" class="'+t+'slider-handle" role="slider" tabindex="-1"></div></div>'},reset:function(){this.value(this._initValue).repaint()},postRender:function(){var e,t,n,r,o,i,a,u,s,c,l,f,d,m,g=this;e=g._minValue,t=g._maxValue,i="v"===g.settings.orientation?(n="screenY",r="top",o="height","h"):(n="screenX",r="left",o="width","w"),g._super(),function(i,a){function t(e){var t,n,r,o;t=Aa(t=(((t=g.value())+(o=n=i))/((r=a)-o)+.05*e)*(r-n)-n,i,a),g.value(t),g.fire("dragstart",{value:t}),g.fire("drag",{value:t}),g.fire("dragend",{value:t})}g.on("keydown",function(e){switch(e.keyCode){case 37:case 38:t(-1);break;case 39:case 40:t(1)}})}(e,t),a=e,u=t,s=g.getEl("handle"),g._dragHelper=new xa(g._id,{handle:g._id+"-handle",start:function(e){c=e[n],l=parseInt(g.getEl("handle").style[r],10),f=(g.layoutRect()[i]||100)-ca.getSize(s)[o],g.fire("dragstart",{value:m})},drag:function(e){var t=e[n]-c;d=Aa(l+t,0,f),s.style[r]=d+"px",m=a+d/f*(u-a),g.value(m),g.tooltip().text(""+g.settings.previewFilter(m)).show().moveRel(s,"bc tc"),g.fire("drag",{value:m})},stop:function(){g.tooltip().hide(),g.fire("dragend",{value:m})}})},repaint:function(){this._super(),Oa(this,this.value())},bindStates:function(){var t=this;return t.state.on("change:value",function(e){Oa(t,e.value)}),t._super()}}),Lr=J.extend({renderHtml:function(){return this.classes.add("spacer"),this.canFocus=!1,'<div id="'+this._id+'" class="'+this.classes+'"></div>'}}),Fr=Rr.extend({Defaults:{classes:"widget btn splitbtn",role:"button"},repaint:function(){var e,t,n=this,r=n.getEl(),o=n.layoutRect();return n._super(),e=r.firstChild,t=r.lastChild,ua(e).css({width:o.w-ca.getSize(t).width,height:o.h-2}),ua(t).css({height:o.h-2}),n},activeMenu:function(e){ua(this.getEl().lastChild).toggleClass(this.classPrefix+"active",e)},renderHtml:function(){var e,t=this,n=t._id,r=t.classPrefix,o=t.state.get("icon"),i=t.state.get("text"),a=t.settings,u="",s=a.image;return s=s?(o="none","string"!=typeof s&&(s=S.window.getSelection?s[0]:s[1])," style=\"background-image: url('"+s+"')\""):"",o=a.icon?r+"ico "+r+"i-"+o:"",i&&(t.classes.add("btn-has-text"),u='<span class="'+r+'txt">'+t.encode(i)+"</span>"),e="boolean"==typeof a.active?' aria-pressed="'+a.active+'"':"",'<div id="'+n+'" class="'+t.classes+'" role="button"'+e+' tabindex="-1"><button type="button" hidefocus="1" tabindex="-1">'+(o?'<i class="'+o+'"'+s+"></i>":"")+u+'</button><button type="button" class="'+r+'open" hidefocus="1" tabindex="-1">'+(t._menuBtnText?(o?"":"")+t._menuBtnText:"")+' <i class="'+r+'caret"></i></button></div>'},postRender:function(){var n=this.settings.onclick;return this.on("click",function(e){var t=e.target;if(e.control===this)for(;t;){if(e.aria&&"down"!==e.aria.key||"BUTTON"===t.nodeName&&-1===t.className.indexOf("open"))return e.stopImmediatePropagation(),void(n&&n.call(this,e));t=t.parentNode}}),delete this.settings.onclick,this._super()}}),Hr=yn.extend({Defaults:{containerClass:"stack-layout",controlClass:"stack-layout-item",endClass:"break"},isNative:function(){return!0}}),zr=I.extend({Defaults:{layout:"absolute",defaults:{type:"panel"}},activateTab:function(n){var e;this.activeTabId&&(e=this.getEl(this.activeTabId),ua(e).removeClass(this.classPrefix+"active"),e.setAttribute("aria-selected","false")),this.activeTabId="t"+n,(e=this.getEl("t"+n)).setAttribute("aria-selected","true"),ua(e).addClass(this.classPrefix+"active"),this.items()[n].show().fire("showtab"),this.reflow(),this.items().each(function(e,t){n!==t&&e.hide()})},renderHtml:function(){var r=this,e=r._layout,o="",i=r.classPrefix;return r.preRender(),e.preRender(r),r.items().each(function(e,t){var n=r._id+"-t"+t;e.aria("role","tabpanel"),e.aria("labelledby",n),o+='<div id="'+n+'" class="'+i+'tab" unselectable="on" role="tab" aria-controls="'+e._id+'" aria-selected="false" tabIndex="-1">'+r.encode(e.settings.title)+"</div>"}),'<div id="'+r._id+'" class="'+r.classes+'" hidefocus="1" tabindex="-1"><div id="'+r._id+'-head" class="'+i+'tabs" role="tablist">'+o+'</div><div id="'+r._id+'-body" class="'+r.bodyClasses+'">'+e.renderHtml(r)+"</div></div>"},postRender:function(){var r=this;r._super(),r.settings.activeTab=r.settings.activeTab||0,r.activateTab(r.settings.activeTab),this.on("click",function(e){var t,n=e.target.parentNode;if(n&&n.id===r._id+"-head")for(t=n.childNodes.length;t--;)n.childNodes[t]===e.target&&r.activateTab(t)})},initLayoutRect:function(){var e,t,n,r=this,o=ca.getSize(r.getEl("head")).width;return o=o<0?0:o,t=0,r.items().each(function(e){o=Math.max(o,e.layoutRect().minW),t=Math.max(t,e.layoutRect().minH)}),r.items().each(function(e){e.settings.x=0,e.settings.y=0,e.settings.w=o,e.settings.h=t,e.layoutRect({x:0,y:0,w:o,h:t})}),n=ca.getSize(r.getEl("head")).height,r.settings.minWidth=o,r.settings.minHeight=t+n,(e=r._super()).deltaH+=n,e.innerH=e.h-e.deltaH,e}}),Wr=J.extend({init:function(e){var n=this;n._super(e),n.classes.add("textbox"),e.multiline?n.classes.add("multiline"):(n.on("keydown",function(e){var t;13===e.keyCode&&(e.preventDefault(),n.parents().reverse().each(function(e){if(e.toJSON)return t=e,!1}),n.fire("submit",{data:t.toJSON()}))}),n.on("keyup",function(e){n.state.set("value",e.target.value)}))},repaint:function(){var e,t,n=this,r=0,o=n.getEl().style,i=n._layoutRect,a=n._lastRepaintRect||{},u=S.document;return!n.settings.multiline&&u.all&&(!u.documentMode||u.documentMode<=8)&&(o.lineHeight=i.h-r+"px"),t=(e=n.borderBox).left+e.right+8,r=e.top+e.bottom+(n.settings.multiline?8:0),i.x!==a.x&&(o.left=i.x+"px",a.x=i.x),i.y!==a.y&&(o.top=i.y+"px",a.y=i.y),i.w!==a.w&&(o.width=i.w-t+"px",a.w=i.w),i.h!==a.h&&(o.height=i.h-r+"px",a.h=i.h),n._lastRepaintRect=a,n.fire("repaint",{},!1),n},renderHtml:function(){var e,t=this,n=t.settings,r={id:t._id,hidefocus:"1"};return Zr.each(["rows","spellcheck","maxLength","size","readonly","min","max","step","list","pattern","placeholder","required","multiple"],function(e){r[e]=n[e]}),t.disabled()&&(r.disabled="disabled"),n.subtype&&(r.type=n.subtype),(e=ca.create(n.multiline?"textarea":"input",r)).value=t.state.get("value"),e.className=t.classes.toString(),e.outerHTML},value:function(e){return arguments.length?(this.state.set("value",e),this):(this.state.get("rendered")&&this.state.set("value",this.getEl().value),this.state.get("value"))},postRender:function(){var t=this;t.getEl().value=t.state.get("value"),t._super(),t.$el.on("change",function(e){t.state.set("value",e.target.value),t.fire("change",e)})},bindStates:function(){var t=this;return t.state.on("change:value",function(e){t.getEl().value!==e.value&&(t.getEl().value=e.value)}),t.state.on("change:disabled",function(e){t.getEl().disabled=e.value}),t._super()},remove:function(){this.$el.off(),this._super()}}),Ur=function(){return{Selector:d,Collection:p,ReflowQueue:N,Control:D,Factory:Co,KeyboardNavigation:ba,Container:B,DragHelper:xa,Scrollable:M,Panel:I,Movable:e,Resizable:L,FloatPanel:V,Window:re,MessageBox:oe,Tooltip:G,Widget:J,Progress:Q,Notification:ee,Layout:ae,AbsoluteLayout:ue,Button:se,ButtonGroup:le,Checkbox:fe,ComboBox:me,ColorBox:ge,PanelButton:he,ColorButton:ve,ColorPicker:ye,Path:we,ElementPath:Ce,FormItem:Se,Form:Ne,FieldSet:Te,FilePicker:pn,FitLayout:vn,FlexLayout:bn,FlowLayout:yn,FormatControls:wr,GridLayout:Cr,Iframe:Sr,InfoBox:Nr,Label:Tr,Toolbar:Er,MenuBar:kr,MenuButton:Rr,MenuItem:Or,Throbber:Ea,Menu:_r,ListBox:Ar,Radio:Pr,ResizeHandle:Br,SelectBox:Mr,Slider:Ir,Spacer:Lr,SplitButton:Fr,StackLayout:Hr,TabPanel:zr,TextBox:Wr,DropZone:xe,BrowseButton:ce}},jr=function(n){n.ui?Zr.each(Ur(),function(e,t){n.ui[t]=e}):n.ui=Ur()},Zr.each(Ur(),function(e,t){Co.add(t,e)}),jr(window.tinymce?window.tinymce:{}),Jr.add("modern",function(e){return wr.setup(e),ie(e)})}(window),tinymce.each("tinymce,plugins/lists/plugin,plugins/advlist/plugin,plugins/attach/plugin,plugins/autolink/plugin,plugins/image/plugin,plugins/charmap/plugin,plugins/anchor/plugin,plugins/searchreplace/plugin,plugins/code/plugin,plugins/link/plugin,plugins/textcolor/plugin,plugins/media/plugin,plugins/table/plugin,plugins/paste/plugin,plugins/asciimath/plugin,plugins/asciisvg/plugin,plugins/rollups/plugin,plugins/colorpicker/plugin,plugins/snippet/plugin,themes/modern/theme".split(","),function(e){tinymce.ScriptLoader.markDone(tinyMCE.baseURL+"/"+e+".js")});
