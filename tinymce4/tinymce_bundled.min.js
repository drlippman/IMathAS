!function(J){"use strict";var C,ie,Z,ae,S,k,N,E,D,P,O,B,M,b,I,L,F,H,z,j,V,q,Y,X,K,G,Q,R,ue,se,_,ce,le,fe,de,me,ge,he,pe,ve,be,ye,xe,we,Ce,Se,ke,Te,Ne,Ee,Re,_e,Ae,De,Pe,ee,Oe,Be,Me,Ie,Le,Fe,He,ze,Ue,We,je,Ve,qe,$e,Ye,Xe,Ke,Ge,Je,x,Ze,Qe,et,tt,nt,rt,ot,it,at,ut,st,ct,lt,ft,dt,mt,gt,ht,pt,vt,bt,yt,xt,wt,Ct,St,kt,Tt,Nt,Et,n,Rt,_t,At,Dt,Pt,Ot,Bt,Mt,It,Lt,Ft,Ht,zt,Ut,Wt,te,jt,Vt,qt,m,$t,Yt,Xt,Kt,ne,Gt,Jt,Zt,Qt,en,tn,nn,rn,on,an,un,sn,cn,ln,fn,dn,mn,gn,hn,re,pn,vn,bn,yn,xn,wn,Cn,Sn,kn,Tn,Nn,En,Rn,_n,An,Dn,Pn,On,Bn,Mn,In,Ln,Fn,Hn,zn,Un,Wn,jn,Vn,qn,$n,Yn,Xn,Kn,Gn,Jn,Zn,Qn,er,tr,nr,rr,or,ir,ar,ur,sr,U,cr,lr,fr,dr,mr,gr,hr,pr,vr,br,yr,xr,wr,Cr,Sr,kr,Tr,Nr,Er,Rr,_r,Ar,Dr,Pr,Or,Br,Mr,Ir,Lr,Fr,Hr,zr,Ur,Wr,a,jr,Vr,qr,$r,Yr,Xr,Kr,Gr,Jr,Zr,Qr,eo,to,no,ro,oo,io,ao,uo,so,co,lo,fo,mo,go,ho,po,vo,bo,yo,xo,wo,Co,So,ko,To,No,Eo,Ro,_o,Ao,oe,Do,Po,Oo,Bo,Mo,Io,Lo,Fo,Ho,zo,Uo,Wo,jo,Vo,qo,$o,Yo,Xo,Ko,Go,Jo,Zo,Qo,ei,ti,ni,ri,oi,ii,ai,ui,si,ci,li,fi,di,mi,gi,s,hi,pi,vi,bi,yi,xi,wi,Ci,Si,ki,Ti,Ni,Ei,Ri,_i,Ai,Di,Pi,Oi,Bi,Mi,Ii,Li,Fi,Hi,zi,Ui,Wi,ji,Vi,qi,$i,Yi,Xi,Ki,Gi,Ji,Zi,Qi,ea,ta,na,ra,oa,ia,aa,ua,sa,ca,la,fa,da,ma,ga,ha,pa,va,l,ba,ya,xa,wa,Ca,Sa,ka,Ta,Na,Ea,Ra,_a,Aa,Da,Pa,Oa,Ba,Ma,Ia,La,Fa,Ha,za,Ua,Wa,ja,Va,qa,$a,Ya,Xa,Ka,Ga,Ja,Za,Qa,eu,tu,nu,ru,ou,iu,au,uu,su,cu,lu,fu,du,mu,gu,hu,pu,vu,bu,yu,xu,wu,Cu,Su,ku,Tu,Nu,Eu,Ru,_u,T,Au,Du,Pu,Ou,Bu,Mu,Iu,Lu,Fu,Hu,zu,Uu,Wu,ju,Vu,qu,$u,Yu,Xu,Ku,Gu,Ju,Zu,Qu,es,ts,ns,rs,os,is,as,us,ss,cs,ls,fs,ds,ms,gs,hs,ps,vs,bs,ys,xs,ws,Cs,Ss,ks,Ts,Ns,Es,Rs,_s,As,Ds,Ps,Os,Bs,Ms,Is,Ls,Fs,Hs,zs,Us,Ws,js,Vs,qs,$s,Ys,Xs,Ks,Gs,Js,Zs,Qs,ec,tc,nc,rc,oc,ic,ac,uc,sc,cc,lc,fc,dc,mc,gc,hc,pc,vc,bc,yc,xc,wc,Cc,Sc,kc,Tc,Nc,c,Ec,Rc,_c,Ac,Dc,Pc,Oc,Bc,Mc,Ic,Lc,Fc,Hc,zc,Uc,Wc,jc,Vc,qc,$c,Yc,Xc,Kc,w,Gc,Jc,Zc,Qc,el,tl,nl,rl,ol,il,al,ul,sl,cl,ll,fl,dl,ml,gl,hl,pl,vl,bl,yl,xl,wl,Cl,Sl,kl,Tl,Nl,El,Rl,_l,Al,Dl,Pl,Ol,Bl,Ml,Il,Ll,Fl,Hl,zl,Ul,Wl,jl,Vl,ql,$l,Yl,Xl,Kl,Gl,Jl,Zl,Ql,ef,tf,nf,rf,of,af,uf,sf,cf,lf,ff,df,mf,gf,hf,pf,vf,bf,yf,xf,wf,Cf,Sf,kf,Tf,Nf,Ef,Rf,_f,Af,Df,Pf,Of,Bf,Mf,If,Lf,f,Ff,Hf,zf,Uf,Wf,jf,Vf,qf,$f,Yf,Xf,Kf,Gf,Jf,Zf,Qf,ed,td,nd,rd,od,id,ad,ud,sd,cd,ld,fd,dd,md,gd,hd,pd,vd,bd,yd,xd,wd,Cd,Sd,kd,Td,Nd,Ed,Rd,_d,Ad,Dd,Pd,Od,Bd,Md,Id,Ld,Fd,Hd,zd,Ud,Wd,jd,Vd,qd,$d,Yd,Xd,Kd,Gd,Jd,Zd,Qd,em,tm,nm,rm,om,im,am,um,sm,cm,lm,fm,dm,mm,gm,hm,pm,vm,bm,ym,xm,wm,Cm,Sm,km,Tm,Nm,Em,Rm,_m,Am,Dm,Pm,Om,Bm,Mm,Im,Lm,Fm,Hm,zm,Um,Wm,jm,Vm,qm,$m,Ym,Xm,Km,Gm,Jm,Zm,Qm,eg,tg,ng,rg,og,ig,ag,ug,sg,cg,lg,fg,dg,mg,gg,hg,pg,vg,bg,yg,xg,wg,Cg,Sg,kg,Tg,Ng,Eg,Rg,_g,Ag,Dg,Pg,Og,Bg,Mg,Ig,Lg,Fg,Hg,zg,Ug,Wg,jg,Vg,qg,$g,Yg,Xg,Kg,Gg,Jg,Zg,Qg,eh,th,nh,rh,oh,ih,ah,uh,sh,ch,lh,fh,dh,mh,gh,hh,ph,vh,bh,yh,xh,wh,Ch,Sh,kh,Th,Nh,Eh,Rh,_h,Ah,Dh,Ph,Oh,Bh,Mh,Ih,Lh,Fh,Hh,zh,Uh,Wh,jh,Vh,qh,$h,Yh,Xh,Kh,Gh,Jh,Zh,Qh,ep,tp,np,rp,op,ip,ap,up,sp,cp,lp,fp,dp,mp,A,gp,hp,pp,vp,bp,yp,xp,wp,Cp,Sp,kp,Tp,Np,Ep,Rp,_p,Ap,Dp,Pp,Op,Bp,Mp,Ip,Lp,Fp,Hp,zp,Up,Wp,jp,Vp,qp,$p,Yp,Xp,Kp,Gp,Jp,Zp,Qp,ev,tv,nv,rv,ov,iv,av,uv,sv,cv,lv,fv,dv,mv,gv,hv,pv,vv,bv,yv,xv,wv,Cv,Sv,kv,Tv,Nv,Ev,Rv,_v,Av,Dv,Pv,Ov,Bv,Mv,Iv,Lv,Fv,Hv,zv,Uv,Wv,jv,Vv,qv,$v,Yv,Xv,Kv,Gv,Jv,Zv,Qv,eb,tb,nb,rb,ob,ib,ab,ub,sb,cb,lb,fb,db,mb,gb,hb,pb,vb,bb,yb,xb,wb,Cb,Sb,kb,Tb,Nb,Eb,Rb,_b,Ab,Db,Pb,Ob,Bb,Mb,Ib,Lb,Fb,Hb,zb,Ub,Wb,jb,Vb,qb,$b,Yb,Xb,Kb,Gb,Jb,Zb,Qb,ey,ty,ny,ry,oy,iy,ay,uy,sy,cy,ly,fy,dy,my,gy,hy,py,vy,by,yy,xy,wy,Cy,Sy,ky,Ty,Ny,Ey,Ry,_y,Ay,Dy,Py,Oy,By,My,Iy,Ly,Fy,Hy,zy,Uy,Wy,jy,Vy,qy,$y,Yy,W,Xy,Ky,Gy,Jy,Zy,Qy,e0,t0,n0,r0,o0,i0,a0,u0,s0,c0,l0,f0,d0,m0,g0,h0,p0,v0,b0,y0,x0,w0,C0,S0,k0,T0,N0,E0,R0,_0,A0,D0,P0,O0,B0,M0,I0,L0,F0,H0,z0,U0,W0,j0,V0,q0,$0,Y0,X0,K0,G0,J0,Z0,Q0,ex,tx,nx,rx,ox,ix,ax,ux,sx,cx,lx,fx,dx,mx,gx,hx,px,vx,bx,yx,xx,wx,Cx,Sx,kx,Tx,Nx,Ex,Rx,_x,Ax,Dx,Px,Ox,Bx,Mx,Ix,Lx,Fx,Hx,zx,Ux,Wx,jx,Vx,qx,$x,Yx,Xx,Kx,Gx,Jx,Zx,Qx,ew,tw,nw,rw,ow,iw,aw,uw,sw,cw,lw,fw,dw,mw,gw,hw,pw,vw,bw,yw,xw,ww,Cw,Sw,kw,Tw,Nw,Ew,Rw,_w,Aw,Dw,Pw,Ow,Bw,Mw,Iw,Lw,Fw,Hw,zw,Uw,Ww,jw,Vw,qw,$w,Yw,Xw,Kw,Gw,Jw,Zw,Qw,e1,t1,n1,r1,o1,i1,a1,u1,s1,c1,l1,f1,d1,m1,g1,h1,p1,v1,b1,y1,x1,w1,C1,S1,k1,T1,N1,E1,R1,_1,A1,D1,P1,O1,B1,M1,I1,L1,F1,H1,z1,U1,W1,j1,V1,q1,$1,Y1,X1,K1,G1,J1,Z1,Q1,eC,tC,nC,rC,oC,iC,aC,uC,sC,cC,lC,fC,dC,o,mC,gC,hC,pC,vC,bC,yC,xC,wC,CC,SC,kC,TC,NC,EC,RC,_C,AC,DC,PC,OC,BC,MC,IC,LC,FC,HC,zC,UC,WC,jC,VC,qC,$C,YC,XC,KC,GC,JC,ZC,QC,eS,tS,nS,rS,oS,iS,aS,uS,e,sS,cS,lS,fS,dS,mS,gS,hS,pS,vS,bS,yS,xS,wS,CS,SS,kS,TS,NS,ES,RS,_S,AS,DS,PS,OS,BS,MS,IS,LS,FS,HS,zS,US,WS,jS,VS,qS,$S,YS,XS,KS,GS,JS,ZS,QS,ek,tk,nk,rk,ok,ik,ak,uk,sk,ck,lk,fk,dk,mk,gk,hk,pk,vk,bk,yk,xk,wk,Ck,Sk,kk,Tk,Nk,Ek,Rk,_k,Ak,Dk,Pk,Ok,Bk,Mk,Ik,Lk,Fk,Hk,zk,Uk,Wk,jk,Vk,qk,$k,Yk,Xk,Kk,Gk,Jk,Zk,Qk,eT,tT,nT,rT,oT,iT,aT,uT,sT,cT,lT,fT,dT,mT,gT,hT,pT,vT,bT,yT,xT,wT,CT,ST,kT,TT,NT,ET,RT,_T,AT,DT,PT,OT,BT,MT,IT,LT,FT,HT,zT,UT,WT,jT,VT,qT,$T,YT,XT,KT,GT,JT,ZT,QT,eN,tN,nN,rN,oN,iN,aN,uN,t,sN,cN,lN,fN,dN,mN,r,i,gN,u,hN,pN,vN,bN,d,yN,xN,wN,g,h,p;function v(r){for(var o=[],e=1;e<arguments.length;e++)o[e-1]=arguments[e];return function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e=o.concat(t),r.apply(null,e)}}C=function(){for(var e=0;e<arguments.length;e++)e,0},ie=function(n,r){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n(r.apply(null,e))}},ae=function(e){return e},S=function(n){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return!n.apply(null,e)}},N=(Z=function(e){return function(){return e}})(!(k=function(e){return function(){throw new Error(e)}})),E=Z(!0),i={fold:function(e,t){return e()},is:D=N,isSome:D,isNone:P=E,getOr:i=function(e){return e},getOrThunk:r=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:function(){return null},getOrUndefined:function(){},or:i,orThunk:r,map:O=function(){return B},ap:O,each:function(){},bind:O,flatten:O,exists:D,forall:P,filter:O,equals:r=function(e){return e.isNone()},equals_:r,toArray:function(){return[]},toString:Z("none()")},Object.freeze&&Object.freeze(i),B=i,b={some:M=function(n){var e=function(){return n},t=function(){return o},r=function(e){return e(n)},o={fold:function(e,t){return t(n)},is:function(e){return n===e},isSome:P,isNone:D,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:t,orThunk:t,map:function(e){return M(e(n))},ap:function(e){return e.fold(O,function(e){return M(e(n))})},each:function(e){e(n)},bind:r,flatten:e,exists:r,forall:r,filter:function(e){return e(n)?o:B},equals:function(e){return e.is(n)},equals_:function(e,t){return e.fold(D,function(e){return t(n,e)})},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return o},none:O,from:function(e){return null==e?B:M(e)}},I=function(e){var t;return null===e?"null":"object"==(t=typeof e)&&Array.prototype.isPrototypeOf(e)?"array":"object"==t&&String.prototype.isPrototypeOf(e)?"string":t},L=(r=function(t){return function(e){return I(e)===t}})("string"),F=r("object"),H=r("array"),z=r("null"),j=r("boolean"),V=r("function"),q=r("number"),gN=Array.prototype.indexOf,Y=void 0===gN?function(e,t){return me(e,t)}:function(e,t){return gN.call(e,t)},X=function(e,t){e=Y(e,t);return-1===e?b.none():b.some(e)},K=function(e,t){return-1<Y(e,t)},G=function(e,t){return de(e,t).isSome()},Q=function(e,t){for(var n,r=e.length,o=new Array(r),i=0;i<r;i++)n=e[i],o[i]=t(n,i,e);return o},R=function(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n,e)},ue=function(e,t){for(var n=e.length-1;0<=n;n--)t(e[n],n,e)},se=function(e,t){for(var n,r=[],o=[],i=0,a=e.length;i<a;i++)(t(n=e[i],i,e)?r:o).push(n);return{pass:r,fail:o}},_=function(e,t){for(var n,r=[],o=0,i=e.length;o<i;o++)t(n=e[o],o,e)&&r.push(n);return r},ce=function(e,t,n){return ue(e,function(e){n=t(n,e)}),n},le=function(e,t,n){return R(e,function(e){n=t(n,e)}),n},fe=function(e,t){for(var n,r=0,o=e.length;r<o;r++)if(t(n=e[r],r,e))return b.some(n);return b.none()},de=function(e,t){for(var n=0,r=e.length;n<r;n++)if(t(e[n],n,e))return b.some(n);return b.none()},me=function(e,t){for(var n=0,r=e.length;n<r;++n)if(e[n]===t)return n;return-1},ge=Array.prototype.push,he=function(e){for(var t=[],n=0,r=e.length;n<r;++n){if(!Array.prototype.isPrototypeOf(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);ge.apply(t,e[n])}return t},pe=function(e,t){e=Q(e,t);return he(e)},ve=function(e,t){for(var n=0,r=e.length;n<r;++n)if(!0!==t(e[n],n,e))return!1;return!0},be=Array.prototype.slice,ye=function(e){e=be.call(e,0);return e.reverse(),e},xe=function(e,t){return _(e,function(e){return!K(t,e)})},we=function(e,t){for(var n,r={},o=0,i=e.length;o<i;o++)n=e[o],r[String(n)]=t(n,o);return r},Ce=function(e,t){e=be.call(e,0);return e.sort(t),e},Se=function(e){return 0===e.length?b.none():b.some(e[0])},ke=function(e){return 0===e.length?b.none():b.some(e[e.length-1])},Te=V(Array.from)?Array.from:function(e){return be.call(e)},Ne=void 0!==J.window?J.window:Function("return this;")(),Ee=function(e,t){for(var n=null!=t?t:Ne,r=0;r<e.length&&null!=n;++r)n=n[e[r]];return n},Re=function(e,t){e=e.split(".");return Ee(e,t)},_e=function(e,t){return Re(e,t)},Ae={getOrDie:function(e,t){t=_e(e,t);if(null==t)throw e+" not available on this browser";return t}},De=function(){return Ae.getOrDie("URL")},Pe={createObjectURL:function(e){return De().createObjectURL(e)},revokeObjectURL:function(e){De().revokeObjectURL(e)}},r=(i=J.navigator).userAgent,e=function(e){return"matchMedia"in J.window&&J.matchMedia(e).matches},d=/Android/.test(r),p=!(qT=/WebKit/.test(r))&&/MSIE/gi.test(r)&&/Explorer/gi.test(i.appName)&&/MSIE (\w+)\./.exec(r)[1],i=-1!==r.indexOf("Trident/")&&(-1!==r.indexOf("rv:")||-1!==i.appName.indexOf("Netscape"))&&11,g=-1!==r.indexOf("Edge/")&&!p&&!i&&12,p=p||i||g,i=!qT&&!i&&/Gecko/.test(r),h=-1!==r.indexOf("Mac"),Fv=/(iPad|iPhone)/.test(r),t="FormData"in J.window&&"FileReader"in J.window&&"URL"in J.window&&!!Pe.createObjectURL,u=e("only screen and (max-device-width: 480px)")&&(d||Fv),e=e("only screen and (min-width: 800px)")&&(d||Fv),xN=-1!==r.indexOf("Windows Phone"),g&&(qT=!1),r=!Fv||t||534<=parseInt(r.match(/AppleWebKit\/(\d*)/)[1],10),ee={opera:!1,webkit:qT,ie:p,gecko:i,mac:h,iOS:Fv,android:d,contentEditable:r,transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",caretAfter:8!==p,range:J.window.getSelection&&"Range"in J.window,documentMode:p&&!g?J.document.documentMode||7:10,fileApi:t,ceFalse:!1===p||8<p,cacheSuffix:null,container:null,overrideViewPort:null,experimentalShadowDom:!1,canHaveCSP:!1===p||11<p,desktop:!u&&!e,windowsPhone:xN},Oe=window.Promise||function(){var e,i,t;function n(e,t){return function(){e.apply(t,arguments)}}function a(n){var r=this;null===this._state?this._deferreds.push(n):t(function(){var e,t=r._state?n.onFulfilled:n.onRejected;if(null===t)(r._state?n.resolve:n.reject)(r._value);else{try{e=t(r._value)}catch(e){return void n.reject(e)}n.resolve(e)}})}function r(e){try{if(e===this)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var t=e.then;if("function"==typeof t)return void c(n(t,e),n(r,this),n(o,this))}this._state=!0,this._value=e,u.call(this)}catch(e){o.call(this,e)}}function o(e){this._state=!1,this._value=e,u.call(this)}function u(){for(var e=0,t=this._deferreds.length;e<t;e++)a.call(this,this._deferreds[e]);this._deferreds=null}function s(e,t,n,r){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r}function c(e,t,n){var r=!1;try{e(function(e){r||(r=!0,t(e))},function(e){r||(r=!0,n(e))})}catch(e){r||(r=!0,n(e))}}return e=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},t=(i=function(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],c(e,n(r,this),n(o,this))}).immediateFn||"function"==typeof setImmediate&&setImmediate||function(e){setTimeout(e,1)},i.prototype.catch=function(e){return this.then(null,e)},i.prototype.then=function(n,r){var o=this;return new i(function(e,t){a.call(o,new s(n,r,e,t))})},i.all=function(){var u=Array.prototype.slice.call(1===arguments.length&&e(arguments[0])?arguments[0]:arguments);return new i(function(o,i){var a,e;if(0===u.length)return o([]);for(a=u.length,e=0;e<u.length;e++)!function t(n,e){try{if(e&&("object"==typeof e||"function"==typeof e)){var r=e.then;if("function"==typeof r)return void r.call(e,function(e){t(n,e)},i)}u[n]=e,0==--a&&o(u)}catch(e){i(e)}}(e,u[e])})},i.resolve=function(t){return t&&"object"==typeof t&&t.constructor===i?t:new i(function(e){e(t)})},i.reject=function(n){return new i(function(e,t){t(n)})},i.race=function(o){return new i(function(e,t){for(var n=0,r=o.length;n<r;n++)o[n].then(e,t)})},i}(),Me=function(e,t){for(var n=J.window.requestAnimationFrame,r=["ms","moz","webkit"],o=function(e){J.window.setTimeout(e,0)},i=0;i<r.length&&!n;i++)n=J.window[r[i]+"RequestAnimationFrame"];(n=n||o)(e,t)},Fe={requestAnimationFrame:function(e,t){Be?Be.then(e):Be=new Oe(function(e){t=t||J.document.body,Me(e,t)}).then(e)},setTimeout:Ie=function(e,t){return"number"!=typeof t&&(t=0),setTimeout(e,t)},setInterval:Le=function(e,t){return"number"!=typeof t&&(t=1),setInterval(e,t)},setEditorTimeout:function(e,t,n){return Ie(function(){e.removed||t()},n)},setEditorInterval:function(e,t,n){var r=Le(function(){e.removed?clearInterval(r):t()},n);return r},debounce:qT=function(t,n){var r,e=function(){var e=arguments;clearTimeout(r),r=Ie(function(){t.apply(this,e)},n)};return e.stop=function(){clearTimeout(r)},e},throttle:qT,clearInterval:function(e){return clearInterval(e)},clearTimeout:function(e){return clearTimeout(e)}},He=/^(?:mouse|contextmenu)|click/,ze={keyLocation:1,layerX:1,layerY:1,returnValue:1,webkitMovementX:1,webkitMovementY:1,keyIdentifier:1},Ue=function(e){return e.isDefaultPrevented===je||e.isDefaultPrevented===We},We=function(){return!1},je=function(){return!0},Ve=function(e,t,n,r){e.addEventListener?e.addEventListener(t,n,r||!1):e.attachEvent&&e.attachEvent("on"+t,n)},qe=function(e,t,n,r){e.removeEventListener?e.removeEventListener(t,n,r||!1):e.detachEvent&&e.detachEvent("on"+t,n)},$e=function(e,t){if(e.composedPath){e=e.composedPath();if(e&&0<e.length)return e[0]}return t},Ye=function(e,t){var n,r,o=t||{};for(n in e)ze[n]||(o[n]=e[n]);return!o.target&&e&&e.touches&&(t=e.changedTouches[0]||e.touches[0],o.target=J.document.elementFromPoint(t.clientX,t.clientY)),o.target||(o.target=o.srcElement||J.document),ee.experimentalShadowDom&&(o.target=$e(e,o.target)),e&&He.test(e.type)&&void 0===e.pageX&&void 0!==e.clientX&&(r=(t=o.target.ownerDocument||J.document).documentElement,t=t.body,o.pageX=e.clientX+(r&&r.scrollLeft||t&&t.scrollLeft||0)-(r&&r.clientLeft||t&&t.clientLeft||0),o.pageY=e.clientY+(r&&r.scrollTop||t&&t.scrollTop||0)-(r&&r.clientTop||t&&t.clientTop||0)),o.preventDefault=function(){o.isDefaultPrevented=je,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},o.stopPropagation=function(){o.isPropagationStopped=je,e&&(e.stopPropagation?e.stopPropagation():e.cancelBubble=!0)},!(o.stopImmediatePropagation=function(){o.isImmediatePropagationStopped=je,o.stopPropagation()})===Ue(o)&&(o.isDefaultPrevented=We,o.isPropagationStopped=We,o.isImmediatePropagationStopped=We),void 0===o.metaKey&&(o.metaKey=!1),o},Xe=function(e,t,n){var r,o,i,a,u=e.document,s={type:"ready"};n.domLoaded?t(s):(r=function(){return"complete"===u.readyState||"interactive"===u.readyState&&u.body},o=function(){n.domLoaded||(n.domLoaded=!0,t(s))},i=function(){r()&&(qe(u,"readystatechange",i),o())},a=function(){try{u.documentElement.doScroll("left")}catch(e){return void Fe.setTimeout(a)}o()},!u.addEventListener||ee.ie&&ee.ie<11?(Ve(u,"readystatechange",i),u.documentElement.doScroll&&e.self===e.top&&a()):r()?o():Ve(e,"DOMContentLoaded",o),Ve(e,"load",o))},((Ke=function(){var m,g=this,h={},p="mce-data-"+(+new Date).toString(32),v="onmouseenter"in J.document.documentElement,b="onfocusin"in J.document.documentElement,y={mouseenter:"mouseover",mouseleave:"mouseout"},x=1;g.domLoaded=!1,g.events=h,m=function(e,t){var n,r,o,t=h[t],i=t&&t[e.type];if(i)for(n=0,r=i.length;n<r;n++)if((o=i[n])&&!1===o.func.call(o.scope,e)&&e.preventDefault(),e.isImmediatePropagationStopped())return},g.bind=function(e,t,n,r){var o,i,a,u,s,c,l,f=J.window,d=function(e){m(Ye(e||f.event),o)};if(e&&3!==e.nodeType&&8!==e.nodeType){for(e[p]?o=e[p]:(o=x++,e[p]=o,h[o]={}),r=r||e,a=(t=t.split(" ")).length;a--;)c=d,s=l=!1,"DOMContentLoaded"===(u=t[a])&&(u="ready"),g.domLoaded&&"ready"===u&&"complete"===e.readyState?n.call(r,Ye({type:u})):(v||(s=y[u])&&(c=function(e){var t=e.currentTarget,n=e.relatedTarget;if(n&&t.contains)n=t.contains(n);else for(;n&&n!==t;)n=n.parentNode;n||((e=Ye(e||f.event)).type="mouseout"===e.type?"mouseleave":"mouseenter",e.target=t,m(e,o))}),b||"focusin"!==u&&"focusout"!==u||(l=!0,s="focusin"===u?"focus":"blur",c=function(e){(e=Ye(e||f.event)).type="focus"===e.type?"focusin":"focusout",m(e,o)}),(i=h[o][u])?"ready"===u&&g.domLoaded?n({type:u}):i.push({func:n,scope:r}):(h[o][u]=i=[{func:n,scope:r}],i.fakeName=s,i.capture=l,i.nativeHandler=c,"ready"===u?Xe(e,c,g):Ve(e,s||u,c,l)));return e=i=0,n}},g.unbind=function(t,e,n){var r,o,i,a,u,s,c,l,f;if(t&&3!==t.nodeType&&8!==t.nodeType&&(r=t[p])){if(s=h[r],e){for(i=(e=e.split(" ")).length;i--;)if(o=s[u=e[i]]){if(n)for(a=o.length;a--;)o[a].func===n&&(c=o.nativeHandler,l=o.fakeName,f=o.capture,(o=o.slice(0,a).concat(o.slice(a+1))).nativeHandler=c,o.fakeName=l,o.capture=f,s[u]=o);n&&0!==o.length||(delete s[u],qe(t,o.fakeName||u,o.nativeHandler,o.capture))}}else{for(u in s)o=s[u],qe(t,o.fakeName||u,o.nativeHandler,o.capture);s={}}for(u in s)return g;delete h[r];try{delete t[p]}catch(e){t[p]=null}}return g},g.fire=function(e,t,n){var r;if(e&&3!==e.nodeType&&8!==e.nodeType)for((n=Ye(null,n)).type=t,n.target=e;(r=e[p])&&m(n,r),(e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow)&&!n.isPropagationStopped(););return g},g.clean=function(e){var t,n,r=g.unbind;if(e&&3!==e.nodeType&&8!==e.nodeType&&(e[p]&&r(e),e=e.getElementsByTagName?e:e.document)&&e.getElementsByTagName)for(r(e),t=(n=e.getElementsByTagName("*")).length;t--;)(e=n[t])[p]&&r(e);return g},g.destroy=function(){h={}},g.cancel=function(e){return e&&(e.preventDefault(),e.stopImmediatePropagation()),!1}}).Event=new Ke).bind(J.window,"ready",function(){}),mt="sizzle"+-new Date,gt=J.window.document,pt=ht=0,vt=CN(),bt=CN(),yt=CN(),xt=function(e,t){return e===t&&(it=!0),0},wt="undefined",Ct={}.hasOwnProperty,St=(i=[]).pop,kt=i.push,Tt=i.push,Nt=i.slice,Et=i.indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(this[t]===e)return t;return-1},d=":("+(h="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+")+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+(Fv="\\["+(n="[\\x20\\t\\r\\n\\f]")+"*("+h+")(?:"+n+"*([*^$|!~]?=)"+n+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+h+"))|)"+n+"*\\]")+")*)|.*)\\)|)",Rt=new RegExp("^"+n+"+|((?:^|[^\\\\])(?:\\\\.)*)"+n+"+$","g"),_t=new RegExp("^"+n+"*,"+n+"*"),At=new RegExp("^"+n+"*([>+~]|"+n+")"+n+"*"),Dt=new RegExp("="+n+"*([^\\]'\"]*?)"+n+"*\\]","g"),Pt=new RegExp(d),Ot=new RegExp("^"+h+"$"),Bt={ID:new RegExp("^#("+h+")"),CLASS:new RegExp("^\\.("+h+")"),TAG:new RegExp("^("+h+"|[*])"),ATTR:new RegExp("^"+Fv),PSEUDO:new RegExp("^"+d),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+n+"*(even|odd|(([+-]|)(\\d*)n|)"+n+"*(?:([+-]|)"+n+"*(\\d+)|))"+n+"*\\)|)","i"),bool:new RegExp("^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$","i"),needsContext:new RegExp("^"+n+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+n+"*((?:-\\d)?\\d*)"+n+"*\\)|)(?=[^-]|$)","i")},Mt=/^(?:input|select|textarea|button)$/i,It=/^h\d$/i,Lt=/^[^{]+\{\s*\[native \w/,Ft=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Ht=/[+~]/,zt=/'|\\/g,Ut=new RegExp("\\\\([\\da-f]{1,6}"+n+"?|("+n+")|.)","ig"),Wt=function(e,t,n){var r="0x"+t-65536;return r!=r||n?t:r<0?String.fromCharCode(65536+r):String.fromCharCode(r>>10|55296,1023&r|56320)};try{Tt.apply(i=Nt.call(gt.childNodes),gt.childNodes),i[gt.childNodes.length].nodeType}catch(e){Tt={apply:i.length?function(e,t){kt.apply(e,Nt.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}function CN(){var n=[];function r(e,t){return n.push(e+" ")>x.cacheLength&&delete r[n.shift()],r[e+" "]=t}return r}function SN(e){return e[mt]=!0,e}function kN(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||1<<31)-(~e.sourceIndex||1<<31);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function TN(a){return SN(function(i){return i=+i,SN(function(e,t){for(var n,r=a([],e.length,i),o=r.length;o--;)e[n=r[o]]&&(e[n]=!(t[n]=e[n]))})})}function NN(e){return e&&typeof e.getElementsByTagName!==wt&&e}for(Ge in Je=(te=function(e,t,n,r){var o,i,a,u,s,c,l;if((t?t.ownerDocument||t:gt)!==ut&&at(t),n=n||[],!e||"string"!=typeof e)return n;if(1!==(o=(t=t||ut).nodeType)&&9!==o)return[];if(ct&&!r){if(c=Ft.exec(e))if(l=c[1]){if(9===o){if(!(u=t.getElementById(l))||!u.parentNode)return n;if(u.id===l)return n.push(u),n}else if(t.ownerDocument&&(u=t.ownerDocument.getElementById(l))&&dt(t,u)&&u.id===l)return n.push(u),n}else{if(c[2])return Tt.apply(n,t.getElementsByTagName(e)),n;if((l=c[3])&&Je.getElementsByClassName)return Tt.apply(n,t.getElementsByClassName(l)),n}if(Je.qsa&&(!lt||!lt.test(e))){if(s=u=mt,c=t,l=9===o&&e,1===o&&"object"!==t.nodeName.toLowerCase()){for(a=et(e),(u=t.getAttribute("id"))?s=u.replace(zt,"\\$&"):t.setAttribute("id",s),s="[id='"+s+"'] ",i=a.length;i--;)a[i]=s+RN(a[i]);c=Ht.test(e)&&NN(t.parentNode)||t,l=a.join(",")}if(l)try{return Tt.apply(n,c.querySelectorAll(l)),n}catch(e){}finally{u||t.removeAttribute("id")}}}return nt(e.replace(Rt,"$1"),t,n,r)}).support={},Qe=te.isXML=function(e){e=e&&(e.ownerDocument||e).documentElement;return!!e&&"HTML"!==e.nodeName},at=te.setDocument=function(e){var s=e?e.ownerDocument||e:gt,e=s.defaultView;return s!==ut&&9===s.nodeType&&s.documentElement?(st=(ut=s).documentElement,ct=!Qe(s),e&&e!==function(e){try{return e.top}catch(e){}return null}(e)&&(e.addEventListener?e.addEventListener("unload",function(){at()},!1):e.attachEvent&&e.attachEvent("onunload",function(){at()})),Je.attributes=!0,Je.getElementsByTagName=!0,Je.getElementsByClassName=Lt.test(s.getElementsByClassName),Je.getById=!0,x.find.ID=function(e,t){if(typeof t.getElementById!==wt&&ct)return(t=t.getElementById(e))&&t.parentNode?[t]:[]},x.filter.ID=function(e){var t=e.replace(Ut,Wt);return function(e){return e.getAttribute("id")===t}},x.find.TAG=Je.getElementsByTagName?function(e,t){if(typeof t.getElementsByTagName!==wt)return t.getElementsByTagName(e)}:function(e,t){var n,r=[],o=0,i=t.getElementsByTagName(e);if("*"!==e)return i;for(;n=i[o++];)1===n.nodeType&&r.push(n);return r},x.find.CLASS=Je.getElementsByClassName&&function(e,t){if(ct)return t.getElementsByClassName(e)},ft=[],lt=[],Je.disconnectedMatch=!0,lt=lt.length&&new RegExp(lt.join("|")),ft=ft.length&&new RegExp(ft.join("|")),e=Lt.test(st.compareDocumentPosition),dt=e||Lt.test(st.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,t=t&&t.parentNode;return e===t||!(!t||1!==t.nodeType||!(n.contains?n.contains(t):e.compareDocumentPosition&&16&e.compareDocumentPosition(t)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},xt=e?function(e,t){var n;return e===t?(it=!0,0):(n=!e.compareDocumentPosition-!t.compareDocumentPosition)||(1&(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!Je.sortDetached&&t.compareDocumentPosition(e)===n?e===s||e.ownerDocument===gt&&dt(gt,e)?-1:t===s||t.ownerDocument===gt&&dt(gt,t)?1:ot?Et.call(ot,e)-Et.call(ot,t):0:4&n?-1:1)}:function(e,t){if(e===t)return it=!0,0;var n,r=0,o=e.parentNode,i=t.parentNode,a=[e],u=[t];if(!o||!i)return e===s?-1:t===s?1:o?-1:i?1:ot?Et.call(ot,e)-Et.call(ot,t):0;if(o===i)return kN(e,t);for(n=e;n=n.parentNode;)a.unshift(n);for(n=t;n=n.parentNode;)u.unshift(n);for(;a[r]===u[r];)r++;return r?kN(a[r],u[r]):a[r]===gt?-1:u[r]===gt?1:0},s):ut},te.matches=function(e,t){return te(e,null,null,t)},te.matchesSelector=function(e,t){if((e.ownerDocument||e)!==ut&&at(e),t=t.replace(Dt,"='$1']"),Je.matchesSelector&&ct&&(!ft||!ft.test(t))&&(!lt||!lt.test(t)))try{var n=(void 0).call(e,t);if(n||Je.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){}return 0<te(t,ut,null,[e]).length},te.contains=function(e,t){return(e.ownerDocument||e)!==ut&&at(e),dt(e,t)},te.attr=function(e,t){(e.ownerDocument||e)!==ut&&at(e);var n=x.attrHandle[t.toLowerCase()],n=n&&Ct.call(x.attrHandle,t.toLowerCase())?n(e,t,!ct):void 0;return void 0!==n?n:Je.attributes||!ct?e.getAttribute(t):(n=e.getAttributeNode(t))&&n.specified?n.value:null},te.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},te.uniqueSort=function(e){var t,n=[],r=0,o=0;if(it=!Je.detectDuplicates,ot=!Je.sortStable&&e.slice(0),e.sort(xt),it){for(;t=e[o++];)t===e[o]&&(r=n.push(o));for(;r--;)e.splice(n[r],1)}return ot=null,e},Ze=te.getText=function(e){var t,n="",r=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=Ze(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[r++];)n+=Ze(t);return n},(x=te.selectors={cacheLength:50,createPseudo:SN,match:Bt,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(Ut,Wt),e[3]=(e[3]||e[4]||e[5]||"").replace(Ut,Wt),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||te.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&te.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return Bt.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&Pt.test(n)&&(t=(t=et(n,!0))&&n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(Ut,Wt).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=vt[e+" "];return t||(t=new RegExp("(^|"+n+")"+e+"("+n+"|$)"))&&vt(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==wt&&e.getAttribute("class")||"")})},ATTR:function(t,n,r){return function(e){e=te.attr(e,t);return null==e?"!="===n:!n||(e+="","="===n?e===r:"!="===n?e!==r:"^="===n?r&&0===e.indexOf(r):"*="===n?r&&-1<e.indexOf(r):"$="===n?r&&e.slice(-r.length)===r:"~="===n?-1<(" "+e+" ").indexOf(r):"|="===n&&(e===r||e.slice(0,r.length+1)===r+"-"))}},CHILD:function(m,e,t,g,h){var p="nth"!==m.slice(0,3),v="last"!==m.slice(-4),b="of-type"===e;return 1===g&&0===h?function(e){return!!e.parentNode}:function(e,t,n){var r,o,i,a,u,s,c=p!=v?"nextSibling":"previousSibling",l=e.parentNode,f=b&&e.nodeName.toLowerCase(),d=!n&&!b;if(l){if(p){for(;c;){for(i=e;i=i[c];)if(b?i.nodeName.toLowerCase()===f:1===i.nodeType)return!1;s=c="only"===m&&!s&&"nextSibling"}return!0}if(s=[v?l.firstChild:l.lastChild],v&&d){for(u=(r=(o=l[mt]||(l[mt]={}))[m]||[])[0]===ht&&r[1],a=r[0]===ht&&r[2],i=u&&l.childNodes[u];i=++u&&i&&i[c]||(a=u=0,s.pop());)if(1===i.nodeType&&++a&&i===e){o[m]=[ht,u,a];break}}else if(d&&(r=(e[mt]||(e[mt]={}))[m])&&r[0]===ht)a=r[1];else for(;(i=++u&&i&&i[c]||(a=u=0,s.pop()))&&((b?i.nodeName.toLowerCase()!==f:1!==i.nodeType)||!++a||(d&&((i[mt]||(i[mt]={}))[m]=[ht,a]),i!==e)););return(a-=h)===g||a%g==0&&0<=a/g}}},PSEUDO:function(e,i){var t,a=x.pseudos[e]||x.setFilters[e.toLowerCase()]||te.error("unsupported pseudo: "+e);return a[mt]?a(i):1<a.length?(t=[e,e,"",i],x.setFilters.hasOwnProperty(e.toLowerCase())?SN(function(e,t){for(var n,r=a(e,i),o=r.length;o--;)e[n=Et.call(e,r[o])]=!(t[n]=r[o])}):function(e){return a(e,0,t)}):a}},pseudos:{not:SN(function(e){var r=[],o=[],u=tt(e.replace(Rt,"$1"));return u[mt]?SN(function(e,t,n,r){for(var o,i=u(e,null,r,[]),a=e.length;a--;)(o=i[a])&&(e[a]=!(t[a]=o))}):function(e,t,n){return r[0]=e,u(r,null,n,o),!o.pop()}}),has:SN(function(t){return function(e){return 0<te(t,e).length}}),contains:SN(function(t){return t=t.replace(Ut,Wt),function(e){return-1<(e.textContent||e.innerText||Ze(e)).indexOf(t)}}),lang:SN(function(n){return Ot.test(n||"")||te.error("unsupported lang: "+n),n=n.replace(Ut,Wt).toLowerCase(),function(e){var t;do{if(t=ct?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===n||0===t.indexOf(n+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=J.window.location&&J.window.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===st},focus:function(e){return e===ut.activeElement&&(!ut.hasFocus||ut.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!x.pseudos.empty(e)},header:function(e){return It.test(e.nodeName)},input:function(e){return Mt.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(e=e.getAttribute("type"))||"text"===e.toLowerCase())},first:TN(function(){return[0]}),last:TN(function(e,t){return[t-1]}),eq:TN(function(e,t,n){return[n<0?n+t:n]}),even:TN(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:TN(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:TN(function(e,t,n){for(var r=n<0?n+t:n;0<=--r;)e.push(r);return e}),gt:TN(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=x.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})x.pseudos[Ge]=function(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}(Ge);for(Ge in{submit:!0,reset:!0})x.pseudos[Ge]=function(n){return function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===n}}(Ge);function EN(){}function RN(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function _N(a,e,t){var u=e.dir,s=t&&"parentNode"===u,c=pt++;return e.first?function(e,t,n){for(;e=e[u];)if(1===e.nodeType||s)return a(e,t,n)}:function(e,t,n){var r,o,i=[ht,c];if(n){for(;e=e[u];)if((1===e.nodeType||s)&&a(e,t,n))return!0}else for(;e=e[u];)if(1===e.nodeType||s){if((r=(o=e[mt]||(e[mt]={}))[u])&&r[0]===ht&&r[1]===c)return i[2]=r[2];if((o[u]=i)[2]=a(e,t,n))return!0}}}function AN(o){return 1<o.length?function(e,t,n){for(var r=o.length;r--;)if(!o[r](e,t,n))return!1;return!0}:o[0]}function DN(e,t,n,r,o){for(var i,a=[],u=0,s=e.length,c=null!=t;u<s;u++)!(i=e[u])||n&&!n(i,r,o)||(a.push(i),c&&t.push(u));return a}function PN(m,g,h,p,v,e){return p&&!p[mt]&&(p=PN(p)),v&&!v[mt]&&(v=PN(v,e)),SN(function(e,t,n,r){var o,i,a,u=[],s=[],c=t.length,l=e||function(e,t,n){for(var r=0,o=t.length;r<o;r++)te(e,t[r],n);return n}(g||"*",n.nodeType?[n]:n,[]),f=!m||!e&&g?l:DN(l,u,m,n,r),d=h?v||(e?m:c||p)?[]:t:f;if(h&&h(f,d,n,r),p)for(o=DN(d,s),p(o,[],n,r),i=o.length;i--;)(a=o[i])&&(d[s[i]]=!(f[s[i]]=a));if(e){if(v||m){if(v){for(o=[],i=d.length;i--;)(a=d[i])&&o.push(f[i]=a);v(null,d=[],o,r)}for(i=d.length;i--;)(a=d[i])&&-1<(o=v?Et.call(e,a):u[i])&&(e[o]=!(t[o]=a))}}else d=DN(d===t?d.splice(c,d.length):d),v?v(null,t,d,r):Tt.apply(t,d)})}function ON(p,v){function e(e,t,n,r,o){var i,a,u,s=0,c="0",l=e&&[],f=[],d=rt,m=e||y&&x.find.TAG("*",o),g=ht+=null==d?1:Math.random()||.1,h=m.length;for(o&&(rt=t!==ut&&t);c!==h&&null!=(i=m[c]);c++){if(y&&i){for(a=0;u=p[a++];)if(u(i,t,n)){r.push(i);break}o&&(ht=g)}b&&((i=!u&&i)&&s--,e)&&l.push(i)}if(s+=c,b&&c!==s){for(a=0;u=v[a++];)u(l,f,t,n);if(e){if(0<s)for(;c--;)l[c]||f[c]||(f[c]=St.call(r));f=DN(f)}Tt.apply(r,f),o&&!e&&0<f.length&&1<s+v.length&&te.uniqueSort(r)}return o&&(ht=g,rt=d),l}var b=0<v.length,y=0<p.length;return b?SN(e):e}function BN(e,a){var t=e,n=function(e,t,n,r){var o,i;if(e){if(!r&&e[t])return e[t];if(e!==a){if(o=e[n])return o;for(i=e.parentNode;i&&i!==a;i=i.parentNode)if(o=i[n])return o}}},r=function(e,t,n,r){var o;if(e&&(n=e[n],!a||n!==a)){if(n){if(!r)for(o=n[t];o;o=o[t])if(!o[t])return o;return n}return(r=e.parentNode)&&r!==a?r:void 0}};this.current=function(){return t},this.next=function(e){return t=n(t,"firstChild","nextSibling",e)},this.prev=function(e){return t=n(t,"lastChild","previousSibling",e)},this.prev2=function(e){return t=r(t,"lastChild","previousSibling",e)}}function MN(o){var e,t,n,r,i,a,u,s,c,l,f,d,S,m,g,h,p,k={},v={},T=[],b={},y={},x=function(e,t,n){var r=o[e];return r?r=Zo(r,/[, ]/,Zo(r.toUpperCase(),/[, ]/)):(r=Go[e])||(r=Zo(t," ",Zo(t.toUpperCase()," ")),r=ei(r,n),Go[e]=r),r},w=oi((o=o||{}).schema);return!1===o.verify_html&&(o.valid_elements="*[*]"),e=ii(o.valid_styles),t=ii(o.invalid_styles,"map"),u=ii(o.valid_classes,"map"),n=x("whitespace_elements","pre script noscript style textarea video audio iframe object code"),r=x("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),i=x("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),a=x("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls"),c=x("non_empty_elements","td th iframe video audio object script pre code",i),l=x("move_caret_before_on_enter_elements","table",c),f=x("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),s=x("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",f),d=x("text_inline_elements","span strong b em i font strike u var cite dfn code mark q sup sub samp"),Qo((o.special||"script noscript noframes noembed title style textarea xmp").split(" "),function(e){y[e]=new RegExp("</"+e+"[^>]*>","gi")}),S=function(e){return new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$")},m=function(e){var t,n,r,o,i,a,u,s,c,l,f,d,m,g,h,p,v,b,y,x=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)\])?$/,w=/^([!\-])?(\w+[\\:]:\w+|[^=:<]+)?(?:([=:<])(.*))?$/,C=/[*?+]/;if(e)for(e=ri(e,","),k["@"]&&(p=k["@"].attributes,v=k["@"].attributesOrder),t=0,n=e.length;t<n;t++)if(i=x.exec(e[t])){if(g=i[1],c=i[2],h=i[3],s=i[5],a={attributes:d={},attributesOrder:m=[]},"#"===g&&(a.paddEmpty=!0),"-"===g&&(a.removeEmpty=!0),"!"===i[4]&&(a.removeEmptyAttrs=!0),p){for(b in p)d[b]=p[b];m.push.apply(m,v)}if(s)for(r=0,o=(s=ri(s,"|")).length;r<o;r++)(i=w.exec(s[r]))&&(u={},f=i[1],l=i[2].replace(/[\\:]:/g,":"),g=i[3],y=i[4],"!"===f&&(a.attributesRequired=a.attributesRequired||[],a.attributesRequired.push(l),u.required=!0),"-"===f?(delete d[l],m.splice(ni(m,l),1)):(g&&("="===g&&(a.attributesDefault=a.attributesDefault||[],a.attributesDefault.push({name:l,value:y}),u.defaultValue=y),":"===g&&(a.attributesForced=a.attributesForced||[],a.attributesForced.push({name:l,value:y}),u.forcedValue=y),"<"===g)&&(u.validValues=Zo(y,"?")),C.test(l)?(a.attributePatterns=a.attributePatterns||[],u.pattern=S(l),a.attributePatterns.push(u)):(d[l]||m.push(l),d[l]=u)));p||"@"!==c||(p=d,v=m),h&&(a.outputName=c,k[h]=a),C.test(c)?(a.pattern=S(c),T.push(a)):k[c]=a}},x=function(e){k={},T=[],m(e),Qo(w,function(e,t){v[t]=e.children})},g=function(e){var o=/^(~)?(.+)$/;e&&(Go.text_block_elements=Go.block_elements=null,Qo(ri(e,","),function(e){var e=o.exec(e),t="~"===e[1],n=t?"span":"div",r=e[2];v[r]=v[n],b[r]=n,t||(s[r.toUpperCase()]={},s[r]={}),k[r]||(e=k[n],delete(e=ei({},e)).removeEmptyAttrs,delete e.removeEmpty,k[r]=e),Qo(v,function(e,t){e[n]&&(v[t]=e=ei({},v[t]),e[r]=e[n])})}))},h=function(e){var r=/^([+\-]?)(\w+)\[([^\]]+)\]$/;Go[o.schema]=null,e&&Qo(ri(e,","),function(e){var t,n,e=r.exec(e);e&&(n=e[1],t=n?v[e[2]]:v[e[2]]={"#comment":{}},t=v[e[2]],Qo(ri(e[3],"|"),function(e){"-"===n?delete t[e]:t[e]={}}))})},p=function(e){var t,n=k[e];if(n)return n;for(t=T.length;t--;)if((n=T[t]).pattern.test(e))return n},o.valid_elements?x(o.valid_elements):(Qo(w,function(e,t){k[t]={attributes:e.attributes,attributesOrder:e.attributesOrder},v[t]=e.children}),"html5"!==o.schema&&Qo(ri("strong/b em/i"),function(e){e=ri(e,"/"),k[e[1]].outputName=e[0]}),Qo(ri("ol ul sub sup blockquote span font a table tbody tr strong em b i"),function(e){k[e]&&(k[e].removeEmpty=!0)}),Qo(ri("p h1 h2 h3 h4 h5 h6 th td pre div address caption li"),function(e){k[e].paddEmpty=!0}),Qo(ri("span"),function(e){k[e].removeEmptyAttrs=!0})),g(o.custom_elements),h(o.valid_children),m(o.extended_valid_elements),h("+ol[ul|ol],+ul[ul|ol]"),Qo({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},function(e,t){k[t]&&(k[t].parentsRequired=ri(e))}),o.invalid_elements&&Qo(ti(o.invalid_elements),function(e){k[e]&&delete k[e]}),p("span")||m("span[!data-mce-type|*]"),{children:v,elements:k,getValidStyles:function(){return e},getValidClasses:function(){return u},getBlockElements:function(){return s},getInvalidStyles:function(){return t},getShortEndedElements:function(){return i},getTextBlockElements:function(){return f},getTextInlineElements:function(){return d},getBoolAttrs:function(){return a},getElementRule:p,getSelfClosingElements:function(){return r},getNonEmptyElements:function(){return c},getMoveCaretBeforeOnEnterElements:function(){return l},getWhiteSpaceElements:function(){return n},getSpecialElements:function(){return y},isValidChild:function(e,t){e=v[e.toLowerCase()];return!(!e||!e[t.toLowerCase()])},isValid:function(e,t){var n,r,o=p(e);if(o){if(!t)return!0;if(o.attributes[t])return!0;if(n=o.attributePatterns)for(r=n.length;r--;)if(n[r].pattern.test(e))return!0}return!1},getCustomElements:function(){return b},addValidElements:m,setValidElements:x,addCustomElements:g,addValidChildren:h}}function IN(h,e){var p,t,u,s,v=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,b=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,y=/\s*([^:]+):\s*([^;]+);?/g,x=/\s+$/,w={},C="\ufeff";for(h=h||{},e&&(u=e.getValidStyles(),s=e.getInvalidStyles()),t=("\\\" \\' \\; \\: ; : "+C).split(" "),p=0;p<t.length;p++)w[t[p]]=C+p,w[C+p]=t[p];return{toHex:function(e){return e.replace(v,ai)},parse:function(e){var t,n,r,s={},a=h.url_converter,u=h.url_converter_scope||this,o=function(e,t,n){var r,o,i,a,u=s[e+"-top"+t];if(u&&(r=s[e+"-right"+t])&&(o=s[e+"-bottom"+t])&&(i=s[e+"-left"+t])){for(p=(a=[u,r,o,i]).length-1;p--&&a[p]===a[p+1];);-1<p&&n||(s[e+t]=-1===p?a[0]:a.join(" "),delete s[e+"-top"+t],delete s[e+"-right"+t],delete s[e+"-bottom"+t],delete s[e+"-left"+t])}},i=function(e){var t,n=s[e];if(n){for(t=(n=n.split(" ")).length;t--;)if(n[t]!==n[0])return!1;return s[e]=n[0],!0}},c=function(e,t,n,r){i(t)&&i(n)&&i(r)&&(s[e]=s[t]+" "+s[n]+" "+s[r],delete s[t],delete s[n],delete s[r])},l=function(e){return r=!0,w[e]},f=function(e,t){return r&&(e=e.replace(/\uFEFF[0-9]/g,function(e){return w[e]})),e=t?e:e.replace(/\\([\'\";:])/g,"$1")},d=function(e){return String.fromCharCode(parseInt(e.slice(1),16))},m=function(e){return e.replace(/\\[0-9a-f]+/gi,d)},g=function(e,t,n,r,o,i){if(o=o||i)return"'"+(o=f(o)).replace(/\'/g,"\\'")+"'";if(t=f(t||n||r),!h.allow_script_urls){i=t.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(i))return"";if(!h.allow_svg_data_urls&&/^data:image\/svg/i.test(i))return""}return"url('"+(t=a?a.call(u,t,"style"):t).replace(/\'/g,"\\'")+"')"};if(e){for(e=(e=e.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,l).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(e){return e.replace(/[;:]/g,l)});n=y.exec(e);)y.lastIndex=n.index+n[0].length,t=n[1].replace(x,"").toLowerCase(),n=n[2].replace(x,""),t&&n&&(t=m(t),n=m(n),-1===t.indexOf(C))&&-1===t.indexOf('"')&&(h.allow_script_urls||"behavior"!==t&&!/expression\s*\(|\/\*|\*\//.test(n))&&("font-weight"===t&&"700"===n?n="bold":"color"!==t&&"background-color"!==t||(n=n.toLowerCase()),n=(n=n.replace(v,ai)).replace(b,g),s[t]=r?f(n,!0):n);o("border","",!0),o("border","-width"),o("border","-color"),o("border","-style"),o("padding",""),o("margin",""),c("border","border-width","border-style","border-color"),"medium none"===s.border&&delete s.border,"none"===s["border-image"]&&delete s["border-image"]}return s},serialize:function(i,e){var t,n,a="",r=function(e){var t,n,r,o=u[e];if(o)for(t=0,n=o.length;t<n;t++)e=o[t],(r=i[e])&&(a+=(0<a.length?" ":"")+e+": "+r+";")},o=function(e,t){var n=s["*"];return!(n&&n[e]||(n=s[t])&&n[e])};if(e&&u)r("*"),r(e);else for(t in i)!(n=i[t])||s&&!o(t,e)||(a+=(0<a.length?" ":"")+t+": "+n+";");return a}}}function LN(a,i){var u,r,s,n,L,e,c,l,o,f,d,t,m,g,h,p,v,b,y,x,w,C,S,k,T,N,E,R,_,F,A,D,H,z,P,U,W,j,O,B,M,V,q,I,$,Y,X,K,G=this;return void 0===i&&(i={}),r={},s=J.window,n={},L=0,B=a,M={contentCssCors:i.contentCssCors},I={},$=(M=void(q=0)===M?{}:M).maxLoadTime||5e3,Y=function(e){B.getElementsByTagName("head")[0].appendChild(e)},X=function(t){return mo.nu(function(e){V(t,ie(e,Z(bo.value(t))),ie(e,Z(bo.error(t))))})},K=function(e){return e.fold(ae,ae)},e={load:V=function(e,t,n){var r,o,i,a,u=function(){for(var e=a.passed,t=e.length;t--;)e[t]();a.status=2,a.passed=[],a.failed=[]},s=function(){for(var e=a.failed,t=e.length;t--;)e[t]();a.status=3,a.passed=[],a.failed=[]},c=function(){var e=J.navigator.userAgent.match(/WebKit\/(\d*)/);return!!(e&&parseInt(e[1],10)<536)},l=function(e,t){e()||((new Date).getTime()-i<$?Fe.setTimeout(t):s())},f=function(){l(function(){for(var e,t=B.styleSheets,n=t.length;n--;)if((e=(e=t[n]).ownerNode||e.owningElement)&&e.id===r.id)return u(),1},f)},d=function(){l(function(){try{var e=o.sheet.cssRules;return u(),e}catch(e){}},d)};if(e=ne._addCacheSuffix(e),I[e]?a=I[e]:(a={passed:[],failed:[]},I[e]=a),t&&a.passed.push(t),n&&a.failed.push(n),1!==a.status)if(2===a.status)u();else if(3===a.status)s();else{if(a.status=1,(r=B.createElement("link")).rel="stylesheet",r.type="text/css",r.id="u"+q++,r.async=!1,r.defer=!1,i=(new Date).getTime(),M.contentCssCors&&(r.crossOrigin="anonymous"),"onload"in r&&!c())r.onload=f,r.onerror=s;else{if(0<J.navigator.userAgent.indexOf("Firefox"))return(o=B.createElement("style")).textContent='@import "'+e+'"',d(),void Y(o);f()}Y(r),r.href=e}},loadAll:function(e,t,n){ho(Q(e,X)).get(function(e){e=se(e,function(e){return e.isValue()});0<e.fail.length?n(e.fail.map(K)):t(e.pass.map(K))})}},c=[],l=i.schema||MN({}),o=IN({url_converter:i.url_converter,url_converter_scope:i.url_converter_scope},i.schema),f=i.ownEvents?new Ke(i.proxy):Ke.Event,d=l.getBlockElements(),t=re.overrideDefaults(function(){return{context:a,element:O.getRoot()}}),m=function(e){var t;return e&&a&&"string"==typeof e?(t=a.getElementById(e))&&t.id!==e?a.getElementsByName(e)[1]:t:e},g=function(e){return"string"==typeof e&&(e=m(e)),t(e)},h=function(e,t,n){var r,o,e=g(e);return o=void 0===(o=e.length?(r=u[t])&&r.get?r.get(e,t):e.attr(t):o)?n||"":o},p=function(e){e=m(e);return e?e.attributes:[]},v=function(e,t,n){var r,o;""===n&&(n=null),r=(e=g(e)).attr(t),e.length&&((o=u[t])&&o.set?o.set(e,n,t):e.attr(t,n),r!==n)&&i.onSetAttrib&&i.onSetAttrib({attrElm:e,attrName:t,attrValue:n})},b=function(){return i.root_element||a.body},y=function(e,t){return uo(a.body,m(e),t)},x=function(e,t,n){e=g(e);return n?e.css(t):("float"===(t=t.replace(/-(\D)/g,function(e,t){return t.toUpperCase()}))&&(t=ee.ie&&ee.ie<12?"styleFloat":"cssFloat"),e[0]&&e[0].style?e[0].style[t]:void 0)},w=function(e){var t,n;return e=m(e),t=x(e,"width"),n=x(e,"height"),-1===t.indexOf("px")&&(t=0),-1===n.indexOf("px")&&(n=0),{w:parseInt(t,10)||e.offsetWidth||e.clientWidth,h:parseInt(n,10)||e.offsetHeight||e.clientHeight}},C=function(e,t){var n,r,o;if(!e)return!1;if(!Array.isArray(e)){if("*"===t)return 1===e.nodeType;if(li.test(t)){for(r=t.toLowerCase().split(/,/),o=e.nodeName.toLowerCase(),n=r.length-1;0<=n;n--)if(r[n]===o)return!0;return!1}if(e.nodeType&&1!==e.nodeType)return!1}return e=Array.isArray(e)?e:[e],0<te(t,e[0].ownerDocument||e[0],null,e).length},S=function(e,t,n,r){var o,i=[],a=m(e);for(r=void 0===r,n=n||("BODY"!==b().nodeName?b().parentNode:null),ne.is(t,"string")&&(t="*"===(o=t)?function(e){return 1===e.nodeType}:function(e){return C(e,o)});a&&a!==n&&a.nodeType&&9!==a.nodeType;){if(!t||"function"==typeof t&&t(a)){if(!r)return[a];i.push(a)}a=a.parentNode}return r?i:null},k=function(e,t,n){var r=t;if(e)for("string"==typeof t&&(r=function(e){return C(e,t)}),e=e[n];e;e=e[n])if("function"==typeof r&&r(e))return e;return null},T=function(e,n,r){var o,t,e="string"==typeof e?m(e):e;return!!e&&(ne.isArray(e)&&(e.length||0===e.length)?(o=[],ui(e,function(e,t){e&&("string"==typeof e&&(e=m(e)),o.push(n.call(r,e,t)))}),o):(t=r||G,n.call(t,e)))},N=function(e,t){g(e).each(function(e,n){ui(t,function(e,t){v(n,t,e)})})},E=function(e,n){e=g(e);ci?e.each(function(e,t){if(!1!==t.canHaveHTML){for(;t.firstChild;)t.removeChild(t.firstChild);try{t.innerHTML="<br>"+n,t.removeChild(t.firstChild)}catch(e){re("<div></div>").html("<br>"+n).contents().slice(1).appendTo(t)}return n}}):e.html(n)},R=function(e,n,r,o,i){return T(e,function(e){var t="string"==typeof n?a.createElement(n):n;return N(t,r),o&&("string"!=typeof o&&o.nodeType?t.appendChild(o):"string"==typeof o&&E(t,o)),i?t:e.appendChild(t)})},_=function(e,t,n){return R(a.createElement(e),e,t,n,!0)},F=Ko.decode,A=Ko.encodeAllRaw,O={doc:a,settings:i,win:s,files:n,stdMode:!0,boxModel:!0,styleSheetLoader:e,boundEvents:c,styles:o,schema:l,events:f,isBlock:function(e){if("string"==typeof e)return!!d[e];if(e){var t=e.nodeType;if(t)return!(1!==t||!d[e.nodeName])}return!1},$:t,$$:g,root:null,clone:function(t,e){var n;return!ci||1!==t.nodeType||e?t.cloneNode(e):e?null:(n=a.createElement(t.nodeName),ui(p(t),function(e){v(n,e.nodeName,h(t,e.nodeName))}),n)},getRoot:b,getViewPort:function(e){var e=e||s,t=e.document.documentElement;return{x:e.pageXOffset||t.scrollLeft,y:e.pageYOffset||t.scrollTop,w:e.innerWidth||t.clientWidth,h:e.innerHeight||t.clientHeight}},getRect:function(e){var t;return e=m(e),t=y(e),e=w(e),{x:t.x,y:t.y,w:e.w,h:e.h}},getSize:w,getParent:function(e,t,n){e=S(e,t,n,!1);return e&&0<e.length?e[0]:null},getParents:S,get:m,getNext:function(e,t){return k(e,t,"nextSibling")},getPrev:function(e,t){return k(e,t,"previousSibling")},select:function(e,t){return te(e,m(t)||i.root_element||a,[])},is:C,add:R,create:_,createHTML:function(e,t,n){var r,o="";for(r in o+="<"+e,t)t.hasOwnProperty(r)&&null!==t[r]&&void 0!==t[r]&&(o+=" "+r+'="'+A(t[r])+'"');return void 0!==n?o+">"+n+"</"+e+">":o+" />"},createFragment:function(e){var t,n=a.createElement("div"),r=a.createDocumentFragment();for(e&&(n.innerHTML=e);t=n.firstChild;)r.appendChild(t);return r},remove:D=function(e,t){e=g(e);return(t?e.each(function(){for(var e;e=this.firstChild;)3===e.nodeType&&0===e.data.length?this.removeChild(e):this.parentNode.insertBefore(e,this)}):e).remove(),1<e.length?e.toArray():e[0]},setStyle:function(e,t,n){e=g(e).css(t,n);i.update_styles&&mi(o,e)},getStyle:x,setStyles:function(e,t){e=g(e).css(t);i.update_styles&&mi(o,e)},removeAllAttribs:function(e){return T(e,function(e){for(var t=e.attributes,n=t.length-1;0<=n;n--)e.removeAttributeNode(t.item(n))})},setAttrib:v,setAttribs:N,getAttrib:h,getPos:y,parseStyle:function(e){return o.parse(e)},serializeStyle:function(e,t){return o.serialize(e,t)},addStyle:function(e){var t,n;if(O!==LN.DOM&&a===J.document){if(r[e])return;r[e]=!0}(n=a.getElementById("mceDefaultStyles"))||((n=a.createElement("style")).id="mceDefaultStyles",n.type="text/css",(t=a.getElementsByTagName("head")[0]).firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n)),n.styleSheet?n.styleSheet.cssText+=e:n.appendChild(a.createTextNode(e))},loadCSS:function(e){var t;O!==LN.DOM&&a===J.document?LN.DOM.loadCSS(e):(e=e||"",t=a.getElementsByTagName("head")[0],ui(e.split(","),function(e){e=ne._addCacheSuffix(e),n[e]||(n[e]=!0,e=_("link",{rel:"stylesheet",href:e}),t.appendChild(e))}))},addClass:function(e,t){g(e).addClass(t)},removeClass:function(e,t){H(e,t,!1)},hasClass:function(e,t){return g(e).hasClass(t)},toggleClass:H=function(e,t,n){g(e).toggleClass(t,n).each(function(){""===this.className&&re(this).attr("class",null)})},show:function(e){g(e).show()},hide:function(e){g(e).hide()},isHidden:function(e){return"none"===g(e).css("display")},uniqueId:function(e){return(e||"mce_")+L++},setHTML:E,getOuterHTML:function(e){e="string"==typeof e?m(e):e;return oe.isElement(e)?e.outerHTML:re("<div></div>").append(re(e).clone()).html()},setOuterHTML:function(e,t){g(e).each(function(){try{if("outerHTML"in this)return void(this.outerHTML=t)}catch(e){}D(re(this).html(t),!0)})},decode:F,encode:A,insertAfter:function(e,t){var r=m(t);return T(e,function(e){var t=r.parentNode,n=r.nextSibling;return n?t.insertBefore(e,n):t.appendChild(e),e})},replace:z=function(t,e,n){return T(e,function(e){return ne.is(e,"array")&&(t=t.cloneNode(!0)),n&&ui(si(e.childNodes),function(e){t.appendChild(e)}),e.parentNode.replaceChild(t,e)})},rename:function(t,e){var n;return t.nodeName!==e.toUpperCase()&&(n=_(e),ui(p(t),function(e){v(n,e.nodeName,h(t,e.nodeName))}),z(n,t,!0)),n||t},findCommonAncestor:function(e,t){for(var n,r=e;r;){for(n=t;n&&r!==n;)n=n.parentNode;if(r===n)break;r=r.parentNode}return!r&&e.ownerDocument?e.ownerDocument.documentElement:r},toHex:function(e){return o.toHex(ne.trim(e))},run:T,getAttribs:p,isEmpty:function(e,t){var n,r,o,i,a,u,s,c=0;if(e=e.firstChild){a=new BN(e,e.parentNode),t=t||(l?l.getNonEmptyElements():null),i=l?l.getWhiteSpaceElements():{};do{if(o=e.nodeType,oe.isElement(e)){if(s=e.getAttribute("data-mce-bogus")){e=a.next("all"===s);continue}if(u=e.nodeName.toLowerCase(),t&&t[u]){if("br"!==u)return!1;c++,e=a.next();continue}for(n=(r=p(e)).length;n--;)if("name"===(u=r[n].nodeName)||"data-mce-bookmark"===u)return!1}if(8===o)return!1;if(3===o&&!fi.test(e.nodeValue))return!1;if(3===o&&e.parentNode&&i[e.parentNode.nodeName]&&fi.test(e.nodeValue))return!1;e=a.next()}while(e)}return c<=1},createRng:P=function(){return a.createRange()},nodeIndex:gi,split:function(e,t,n){var r,o,i=P();if(e&&t)return i.setStart(e.parentNode,gi(e)),i.setEnd(t.parentNode,gi(t)),r=i.extractContents(),(i=P()).setStart(t.parentNode,gi(t)+1),i.setEnd(e.parentNode,gi(e)+1),i=i.extractContents(),(o=e.parentNode).insertBefore(Bo(O,r),e),n?o.insertBefore(n,e):o.insertBefore(t,e),o.insertBefore(Bo(O,i),e),D(e),n||t},bind:U=function(e,t,n,r){if(ne.isArray(e)){for(var o=e.length;o--;)e[o]=U(e[o],t,n,r);return e}return!i.collect||e!==a&&e!==s||c.push([e,t,n,r]),f.bind(e,t,n,r||O)},unbind:W=function(e,t,n){var r,o;if(ne.isArray(e)){for(r=e.length;r--;)e[r]=W(e[r],t,n);return e}if(c&&(e===a||e===s))for(r=c.length;r--;)e!==(o=c[r])[0]||t&&t!==o[1]||n&&n!==o[2]||f.unbind(o[0],o[1],o[2]);return f.unbind(e,t,n)},fire:function(e,t,n){return f.fire(e,t,n)},getContentEditable:j=function(e){var t;return e&&oe.isElement(e)?(t=e.getAttribute("data-mce-contenteditable"))&&"inherit"!==t?t:"inherit"!==e.contentEditable?e.contentEditable:null:null},getContentEditableParent:function(e){for(var t=b(),n=null;e&&e!==t&&null===(n=j(e));e=e.parentNode);return n},destroy:function(){var e,t;if(c)for(e=c.length;e--;)t=c[e],f.unbind(t[0],t[1],t[2]);te.setDocument&&te.setDocument()},isChildOf:function(e,t){for(;e;){if(t===e)return!0;e=e.parentNode}return!1},dumpRng:function(e){return"startContainer: "+e.startContainer.nodeName+", startOffset: "+e.startOffset+", endContainer: "+e.endContainer.nodeName+", endOffset: "+e.endOffset}},u=di(o,i,function(){return O}),O}function FN(){var r=this,o=[],a={},u={},i=[],s=function(e){var t;return(t=u[e]?u[e].dependencies:t)||[]},c=function(e,t){return"object"==typeof t?t:"string"==typeof e?{prefix:"",resource:t,suffix:""}:{prefix:e.prefix,resource:t,suffix:e.suffix}},l=function(e,t,n,r){e=s(e);xi(e,function(e){e=c(t,e);f(e.resource,e,void 0,void 0)}),n&&(r?n.call(r):n.call(yi))},f=function(e,t,n,r,o){var i;a[e]||(0!==(i="string"==typeof t?t:t.prefix+t.resource+t.suffix).indexOf("/")&&-1===i.indexOf("://")&&(i=FN.baseURL+"/"+i),a[e]=i.substring(0,i.lastIndexOf("/")),u[e]?l(e,t,n,r):yi.ScriptLoader.add(i,function(){return l(e,t,n,r)},r,o))};return{items:o,urls:a,lookup:u,_listeners:i,get:function(e){if(u[e])return u[e].instance},dependencies:s,requireLangPack:function(e,t){var n=FN.language;if(n&&!1!==FN.languageLoad){if(t)if(-1!==(t=","+t+",").indexOf(","+n.substr(0,2)+","))n=n.substr(0,2);else if(-1===t.indexOf(","+n+","))return;yi.ScriptLoader.add(a[e]+"/langs/"+n+".js")}},add:function(t,e,n){o.push(e),u[t]={instance:e,dependencies:n};n=se(i,function(e){return e.name===t});return i=n.fail,xi(n.pass,function(e){e.callback()}),e},remove:function(e){delete a[e],delete u[e]},createUrl:c,addComponents:function(e,t){var n=r.urls[e];xi(t,function(e){yi.ScriptLoader.add(n+"/"+e)})},load:f,waitFor:function(e,t){u.hasOwnProperty(e)?t():i.push({name:e,callback:t})}}}function HN(e,t,n,r,o){return e(n,r)?b.some(n):V(o)&&o(n)?b.none():t(n,r,o)}function y(t,n,e){var r=function(){return pu(t),0===n},o=function(){return pu(t)?n>=t.data.length:n>=t.childNodes.length},i=function(){var e=xu(t.ownerDocument);return e.setStart(t,n),e.setEnd(t,n),e},a=function(){return e=e||_u(y(t,n))},u=function(){return 0<a().length},s=function(e){return e&&t===e.container()&&n===e.offset()},c=function(e){return yu(t,e?n-1:n)};return{container:Z(t),offset:Z(n),toRange:i,getClientRects:a,isVisible:u,isAtStart:r,isAtEnd:o,isEqual:s,getNode:c}}function zN(r){var n,o=ua();return aa(r,o),n=ia(r,o),{register:function(e,t){o.register(e,t)},annotate:function(t,n){o.lookup(t).each(function(e){Cl(r,t,e,n)})},annotationChanged:function(e,t){n.addListener(e,t)},remove:function(e){ta(r,b.some(e)).each(function(e){e=e.elements;R(e,Ai)})},getAll:function(e){e=oa(r,e);return pr(e,function(e){return Q(e,function(e){return e.dom()})})}}}function UN(e){var u=[],s=(e=e||{}).indent,c=Yl(e.indent_before||""),l=Yl(e.indent_after||""),f=Ko.getEncodeFunc(e.entity_encoding||"raw",e.entities),d="html"===e.element_format;return{start:function(e,t,n){var r,o,i,a;if(s&&c[e]&&0<u.length&&0<(a=u[u.length-1]).length&&"\n"!==a&&u.push("\n"),u.push("<",e),t)for(r=0,o=t.length;r<o;r++)i=t[r],u.push(" ",i.name,'="',f(i.value,!0),'"');u[u.length]=!n||d?">":" />",n&&s&&l[e]&&0<u.length&&0<(a=u[u.length-1]).length&&"\n"!==a&&u.push("\n")},end:function(e){u.push("</",e,">"),s&&l[e]&&0<u.length&&0<(e=u[u.length-1]).length&&"\n"!==e&&u.push("\n")},text:function(e,t){0<e.length&&(u[u.length]=t?e:f(e))},cdata:function(e){u.push("<![CDATA[",e,"]]>")},comment:function(e){u.push("\x3c!--",e,"--\x3e")},pi:function(e,t){t?u.push("<?",e," ",f(t),"?>"):u.push("<?",e,"?>"),s&&u.push("\n")},doctype:function(e){u.push("<!DOCTYPE",e,">",s?"\n":"")},reset:function(){u.length=0},getContent:function(){return u.join("").replace(/\n$/,"")}}}function WN(t,m){var g;return void 0===m&&(m=MN()),g=UN(t),(t=t||{}).validate=!("validate"in t)||t.validate,{serialize:function(e){var l,f=t.validate,d={3:function(e){g.text(e.value,e.raw)},8:function(e){g.comment(e.value)},7:function(e){g.pi(e.name,e.value)},10:function(e){g.doctype(e.value)},4:function(e){g.cdata(e.value)},11:function(e){if(e=e.firstChild)for(;l(e),e=e.next;);}};return g.reset(),l=function(e){var t,n,r,o,i,a,u,s,c=d[e.type];if(c)c(e);else{if(c=e.name,t=e.shortEnded,n=e.attributes,f&&n&&1<n.length&&((i=[]).map={},s=m.getElementRule(e.name))){for(a=0,u=s.attributesOrder.length;a<u;a++)(r=s.attributesOrder[a])in n.map&&(o=n.map[r],i.map[r]=o,i.push({name:r,value:o}));for(a=0,u=n.length;a<u;a++)(r=n[a].name)in i.map||(o=n.map[r],i.map[r]=o,i.push({name:r,value:o}));n=i}if(g.start(e.name,n,t),!t){if(e=e.firstChild)for(;l(e),e=e.next;);g.end(c)}}},1!==e.type||t.inner?d[11](e):l(e),g.getContent()}}}function jN(a){var o,i,u,t,n,e,r,s,c,l,f,d,m,g={state:{},exec:{},value:{}},h=a.settings;a.on("PreInit",function(){o=a.dom,i=a.selection,h=a.settings,u=a.formatter}),bv(this,{execCommand:function(t,n,r,e){var o,i=!1;if(!a.removed){if(/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(t)||e&&e.skip_focus?fv.restore(a):a.focus(),(e=a.fire("BeforeExecCommand",{command:t,ui:n,value:r})).isDefaultPrevented())return!1;if(e=t.toLowerCase(),o=g.exec[e])return o(e,n,r),a.fire("ExecCommand",{command:t,ui:n,value:r}),!0;if(vv(a.plugins,function(e){if(e.execCommand&&e.execCommand(t,n,r))return a.fire("ExecCommand",{command:t,ui:n,value:r}),!(i=!0)}),i)return i;if(a.theme&&a.theme.execCommand&&a.theme.execCommand(t,n,r))return a.fire("ExecCommand",{command:t,ui:n,value:r}),!0;try{i=a.getDoc().execCommand(t,n,r)}catch(e){}return!!i&&(a.fire("ExecCommand",{command:t,ui:n,value:r}),!0)}},queryCommandState:n=function(e){var t;if(!a.quirks.isHidden()&&!a.removed){if(e=e.toLowerCase(),t=g.state[e])return t(e);try{return a.getDoc().queryCommandState(e)}catch(e){}return!1}},queryCommandValue:function(e){var t;if(!a.quirks.isHidden()&&!a.removed){if(e=e.toLowerCase(),t=g.value[e])return t(e);try{return a.getDoc().queryCommandValue(e)}catch(e){}}},queryCommandSupported:function(e){if(e=e.toLowerCase(),g.exec[e])return!0;try{return a.getDoc().queryCommandSupported(e)}catch(e){}return!1},addCommands:e=function(e,n){n=n||"exec",vv(e,function(t,e){vv(e.toLowerCase().split(","),function(e){g[n][e]=t})})},addCommand:function(e,o,i){e=e.toLowerCase(),g.exec[e]=function(e,t,n,r){return o.call(i||a,t,n,r)}},addQueryStateHandler:function(e,t,n){e=e.toLowerCase(),g.state[e]=function(){return t.call(n||a)}},addQueryValueHandler:r=function(e,t,n){e=e.toLowerCase(),g.value[e]=function(){return t.call(n||a)}},hasCustomCommand:function(e){return e=e.toLowerCase(),!!g.exec[e]}}),s=function(e,t,n){return void 0===t&&(t=!1),void 0===n&&(n=null),a.getDoc().execCommand(e,t,n)},c=function(e){return u.match(e)},l=function(e,t){u.toggle(e,t?{value:t}:void 0),a.nodeChanged()},f=function(e){t=i.getBookmark(e)},d=function(){i.moveToBookmark(t)},e({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){a.undoManager.add()},"Cut,Copy,Paste":function(e){var t,n=a.getDoc();try{s(e)}catch(e){t=!0}!(t="paste"!==e||n.queryCommandEnabled(e)?t:!0)&&n.queryCommandSupported(e)||(t=a.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead."),ee.mac&&(t=t.replace(/Ctrl\+/g,"+")),a.notificationManager.open({text:t,type:"error"}))},unlink:function(){var e;i.isCollapsed()?(e=a.dom.getParent(a.selection.getStart(),"a"))&&a.dom.remove(e,!0):u.remove("link")},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull,JustifyNone":function(e){var t=e.substring(7);"full"===t&&(t="justify"),vv("left,center,right,justify".split(","),function(e){t!==e&&u.remove("align"+e)}),"none"!==t&&l("align"+t)},"InsertUnorderedList,InsertOrderedList":function(e){var t;s(e),(e=o.getParent(i.getNode(),"ol,ul"))&&(t=e.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(t.nodeName))&&(f(),o.split(t,e),d())},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){l(e)},"ForeColor,HiliteColor":function(e,t,n){l(e,n)},FontName:function(e,t,n){Cp(a,n)},FontSize:function(e,t,n){kp(a,n)},RemoveFormat:function(e){u.remove(e)},mceBlockQuote:function(){l("blockquote")},FormatBlock:function(e,t,n){return l(n||"p")},mceCleanup:function(){var e=i.getBookmark();a.setContent(a.getContent()),i.moveToBookmark(e)},mceRemoveNode:function(e,t,n){n=n||i.getNode();n!==a.getBody()&&(f(),a.dom.remove(n,!0),d())},mceSelectNodeDepth:function(e,t,n){var r=0;o.getParent(i.getNode(),function(e){if(1===e.nodeType&&r++===n)return i.select(e),!1},a.getBody())},mceSelectNode:function(e,t,n){i.select(n)},mceInsertContent:function(e,t,n){mf.insertAtCaret(a,n)},mceInsertRawHTML:function(e,t,n){i.setContent("tiny_mce_marker");var r=a.getContent();a.setContent(r.replace(/tiny_mce_marker/g,function(){return n}))},mceToggleFormat:function(e,t,n){l(n)},mceSetContent:function(e,t,n){a.setContent(n)},"Indent,Outdent":function(e){pv(a,e)},mceRepaint:function(){},InsertHorizontalRule:function(){a.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){a.hasVisual=!a.hasVisual,a.addVisual()},mceReplaceContent:function(e,t,n){a.execCommand("mceInsertContent",!1,n.replace(/\{\$selection\}/g,i.getContent({format:"text"})))},mceInsertLink:function(e,t,n){var r;"string"==typeof n&&(n={href:n}),r=o.getParent(i.getNode(),"a"),n.href=n.href.replace(" ","%20"),r&&n.href||u.remove("link"),n.href&&u.apply("link",n,r)},selectAll:function(){var e,t=o.getParent(i.getStart(),oe.isContentEditableTrue);t&&((e=o.createRng()).selectNodeContents(t),i.setRng(e))},delete:function(){dp.deleteCommand(a)},forwardDelete:function(){dp.forwardDeleteCommand(a)},mceNewDocument:function(){a.setContent("")},InsertLineBreak:function(e,t,n){return Jp.insert(a,n),!0}}),e({JustifyLeft:(m=function(t){return function(){var e=i.isCollapsed()?[o.getParent(i.getNode(),o.isBlock)]:i.getSelectedBlocks(),e=yv(e,function(e){return!!u.matchNode(e,t)});return-1!==xv(e,!0)}})("alignleft"),JustifyCenter:m("aligncenter"),JustifyRight:m("alignright"),JustifyFull:m("alignjustify"),"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":c,mceBlockQuote:function(){return c("blockquote")},Outdent:function(){var e;if(h.inline_styles){if((e=o.getParent(i.getStart(),o.isBlock))&&0<parseInt(e.style.paddingLeft,10))return!0;if((e=o.getParent(i.getEnd(),o.isBlock))&&0<parseInt(e.style.paddingLeft,10))return!0}return n("InsertUnorderedList")||n("InsertOrderedList")||!h.inline_styles&&!!o.getParent(i.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList":function(e){var t=o.getParent(i.getNode(),"ul,ol");return t&&("insertunorderedlist"===e&&"UL"===t.tagName||"insertorderedlist"===e&&"OL"===t.tagName)}},"state"),e({Undo:function(){a.undoManager.undo()},Redo:function(){a.undoManager.redo()}}),r("FontName",function(){return Sp(a)},this),r("FontSize",function(){return Tp(a)},this)}function VN(i){var a={},n=[],o=function(e){var t,n,r={};for(n in Hv(zv(e,"+"),function(e){e in Wv?r[e]=!0:/^[0-9]{2,}$/.test(e)?r.keyCode=parseInt(e,10):(r.charCode=e.charCodeAt(0),r.keyCode=Uv[e]||e.toUpperCase().charCodeAt(0))}),t=[r.keyCode],Wv)r[n]?t.push(n):r[n]=!1;return r.id=t.join(","),r.access&&(r.alt=!0,ee.mac?r.ctrl=!0:r.shift=!0),r.meta&&(ee.mac?r.meta=!0:(r.ctrl=!0,r.meta=!1)),r},u=function(e,t,n,r){e=ne.map(zv(e,">"),o);return e[e.length-1]=ne.extend(e[e.length-1],{func:n,scope:r||i}),ne.extend(e[0],{desc:i.translate(t),subpatterns:e.slice(1)})},e=function(e){return e.altKey||e.ctrlKey||e.metaKey},r=function(e){return"keydown"===e.type&&112<=e.keyCode&&e.keyCode<=123},s=function(e,t){return!!t&&t.ctrl===e.ctrlKey&&t.meta===e.metaKey&&t.alt===e.altKey&&t.shift===e.shiftKey&&!!(e.keyCode===t.keyCode||e.charCode&&e.charCode===t.charCode)&&(e.preventDefault(),!0)},c=function(e){return e.func?e.func.call(e.scope):null};i.on("keyup keypress keydown",function(t){!e(t)&&!r(t)||t.isDefaultPrevented()||(Hv(a,function(e){if(s(t,e))return n=e.subpatterns.slice(0),"keydown"===t.type&&c(e),!0}),s(t,n[0])&&(1===n.length&&"keydown"===t.type&&c(n[0]),n.shift()))}),this.add=function(e,t,n,r){var o=n;return"string"==typeof n?n=function(){i.execCommand(o,!1,null)}:ne.isArray(o)&&(n=function(){i.execCommand(o[0],o[1],o[2])}),Hv(zv(ne.trim(e.toLowerCase())),function(e){e=u(e,t,n,r);a[e.id]=e}),!0},this.remove=function(e){e=u(e);return!!a[e.id]&&(delete a[e.id],!0)}}function qN(n){var r=[],o=function(){var e=n.theme;return e&&e.getNotificationManagerImpl?e.getNotificationManagerImpl():{open:t,close:t,reposition:t,getArgs:t};function t(){throw new Error("Theme did not provide a NotificationManager implementation.")}},e=function(){return b.from(r[0])},i=function(e,t){return!(e.type!==t.type||e.text!==t.text||e.progressBar||e.timeout||t.progressBar||t.timeout)},a=function(){0<r.length&&o().reposition(r)},u=function(e){r.push(e)},s=function(t){de(r,function(e){return e===t}).each(function(e){r.splice(e,1)})},t=function(t){if(!n.removed&&db.isEditorAttachedToDom(n))return fe(r,function(e){return i(o().getArgs(e),t)}).getOrThunk(function(){n.editorManager.setActive(n);var e=o().open(t,function(){s(e),a()});return u(e),a(),e})},c=function(){e().each(function(e){o().close(e),s(e),a()})},l=function(){return r},f=n;return f.on("SkinLoaded",function(){var e=f.settings.service_message;e&&t({text:e,type:"warning",timeout:0,icon:""})}),f.on("ResizeEditor ResizeWindow",function(){Fe.requestAnimationFrame(a)}),f.on("remove",function(){R(r.slice(),function(e){o().close(e)})}),{open:t,close:c,getNotifications:l}}function $N(n){var r=[],o=function(){var e=n.theme;return e&&e.getWindowManagerImpl?e.getWindowManagerImpl():{open:t,alert:t,confirm:t,close:t,getParams:t,setParams:t};function t(){throw new Error("Theme did not provide a WindowManager implementation.")}},i=function(e,t){return function(){return t?t.apply(e,arguments):void 0}},t=function(e){n.fire("OpenWindow",{win:e})},a=function(e){n.fire("CloseWindow",{win:e})},u=function(e){r.push(e),t(e)},s=function(t){de(r,function(e){return e===t}).each(function(e){r.splice(e,1),a(t),0===r.length&&n.focus()})},e=function(){return b.from(r[r.length-1])},c=function(e,t){n.editorManager.setActive(n),fv.store(n);e=o().open(e,t,s);return u(e),e},l=function(e,t,n){e=o().alert(e,i(n||this,t),s);u(e)},f=function(e,t,n){e=o().confirm(e,i(n||this,t),s);u(e)},d=function(){e().each(function(e){o().close(e),s(e)})},m=function(){return e().map(o().getParams).getOr(null)},g=function(t){e().each(function(e){o().setParams(e,t)})},h=function(){return r};return n.on("remove",function(){R(r.slice(0),function(e){o().close(e)})}),{windows:r,open:c,alert:l,confirm:f,close:d,getParams:m,setParams:g,getWindows:h}}function YN(){return new(Ae.getOrDie("XMLHttpRequest"))}function XN(p){var a,v,e,b,n,y,r,o,i,u,x,w,t,s,c,l,C,f,d,m,g,h,S,k,T,N,E;return m=[],g=function(e){return{"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png"}[e.toLowerCase()]||"dat"},h=function(e){var t,n;if(e.blob&&e.base64)return t=e.id||Ib.uuid("blobid"),n=e.name||t,{id:Z(t),name:Z(n),filename:Z(n+"."+g(e.blob.type)),blob:Z(e.blob),base64:Z(e.base64),blobUri:Z(e.blobUri||Pe.createObjectURL(e.blob)),uri:Z(e.uri)};throw new Error("blob and base64 representations of the image are required for BlobInfo to be created")},a={create:function(e,t,n,r){if(L(e))return h({id:e,name:r,blob:t,base64:n});if(F(e))return h(e);throw new Error("Unknown input type")},add:function(e){S(e.id())||m.push(e)},get:S=function(t){return k(function(e){return e.id()===t})},getByUri:function(t){return k(function(e){return e.blobUri()===t})},findFirst:k=function(e){return _(m,e)[0]},removeByUri:function(t){m=_(m,function(e){return e.blobUri()!==t||(Pe.revokeObjectURL(e.blobUri()),!1)})},destroy:function(){R(m,function(e){Pe.revokeObjectURL(e.blobUri())}),m=[]}},T={},N=function(e,t){return{status:e,resultUri:t}},b={hasBlobUri:E=function(e){return e in T},getResultUri:function(e){e=T[e];return e?e.resultUri:null},isPending:function(e){return!!E(e)&&1===T[e].status},isUploaded:function(e){return!!E(e)&&2===T[e].status},markPending:function(e){T[e]=N(1,null)},markUploaded:function(e,t){T[e]=N(2,t)},removeFailed:function(e){delete T[e]},destroy:function(){T={}}},n=[],y=function(t){return function(e){return p.selection?t(e):[]}},r=function(){return"?"+(new Date).getTime()},o=function(e,t,n){for(var r=0;-1!==(r=e.indexOf(t,r))&&(e=e.substring(0,r)+n+e.substr(r+t.length),r+=n.length-t.length+1),-1!==r;);return e},i=function(e,t,n){return e=o(e,'src="'+t+'"','src="'+n+'"'),e=o(e,'data-mce-src="'+t+'"','data-mce-src="'+n+'"')},u=function(t,n){R(p.undoManager.data,function(e){"fragmented"===e.type?e.fragments=Q(e.fragments,function(e){return i(e,t,n)}):e.content=i(e.content,t,n)})},x=function(){return p.notificationManager.open({text:p.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0})},w=function(e,t){a.removeByUri(e.src),u(e.src,t),p.$(e).attr({src:A.shouldReuseFileName(p)?t+r():t,"data-mce-src":p.convertURL(t,"src")})},t=function(t){var u,s,n,c,l,r,o,f,d,m,i,a,g,h,e;return v||(u=b,s={url:A.getImageUploadUrl(p),basePath:A.getImageUploadBasePath(p),credentials:A.getImagesUploadCredentials(p),handler:A.getImagesUploadHandler(p)},n={},c=function(e,t){return e?e.replace(/\/$/,"")+"/"+t.replace(/^\//,""):t},l=function(){var e=dN.activeEditor,t=$(e.dom.doc).find('img[src^="blob:"]').get(0);t&&e.execCommand("mceRemoveNode",!1,t)},r=function(n,t,r,o){var i,a=YN();a.open("POST",s.url),a.withCredentials=s.credentials,a.upload.onprogress=function(e){o(e.loaded/e.total*100)},a.onerror=function(){l(),r("Image upload failed due to a XHR Transport error. Code: "+a.status)},a.onload=function(){var e;a.status<200||300<=a.status?(l(),r("HTTP Error: "+a.status)):(e=JSON.parse(a.responseText))&&"string"==typeof e.location?t(c(s.basePath,e.location)):(l(),r("Invalid JSON: "+a.responseText))},i=new J.FormData,ne.resizeImage(n,function(e,t){e?i.append("file",t,n.filename().replace(/\.\w+$/,".jpg")):i.append("file",n.blob(),n.filename()),a.send(i)})},o=function(){return new Oe(function(e){e([])})},f=function(e,t){return{url:t,blobInfo:e,status:!0}},d=function(e,t){return{url:"",blobInfo:e,status:!1,error:t}},m=function(e,t){ne.each(n[e],function(e){e(t)}),delete n[e]},i=function(o,i,a){return u.markPending(o.blobUri()),new Oe(function(t){var n,r,e=function(){};try{r=function(){n&&(n.close(),0)},i(o,function(e){r(),u.markUploaded(o.blobUri(),e),m(o.blobUri(),f(o,e)),t(f(o,e))},function(e){r(),u.removeFailed(o.blobUri()),m(o.blobUri(),d(o,e)),t(d(o,e))},function(e){e<0||100<e||(n=n||a()).progressBar.value(e)})}catch(e){t(d(o,e.message))}})},a=function(e){return e===r},g=function(e){var t=e.blobUri();return new Oe(function(e){n[t]=n[t]||[],n[t].push(e)})},h=function(e,t){return e=ne.grep(e,function(e){return!u.isUploaded(e.blobUri())}),Oe.all(ne.map(e,function(e){return u.isPending(e.blobUri())?g(e):i(e,s.handler,t)}))},!(e=function(e,t){return!s.url&&a(s.handler)?o():h(e,t)})===V(s.handler)&&(s.handler=r),v={upload:e}),C().then(y(function(n){var e=Q(n,function(e){return e.blobInfo});return v.upload(e,x).then(y(function(e){e=Q(e,function(e,t){t=n[t].image;return e.status&&A.shouldReplaceBlobUris(p)?w(t,e.url):e.error&&Cb.uploadError(p,e.error),{element:t,status:e.status}});return t&&t(e),e}))}))},s=function(e){if(A.isAutomaticUploadsEnabled(p))return t(e)},c=function(t){return!1!==ve(n,function(e){return e(t)})&&(0!==t.getAttribute("src").indexOf("data:")||A.getImagesDataImgFilter(p)(t))},l=function(e){n.push(e)},C=function(){var r,o,i;return e||(r=b,o=a,i={},e={findAll:function(e,n){return n=n||Z(!0),e=_(Ob(e),function(e){var t=e.src;return!(!ee.fileApi||e.hasAttribute("data-mce-bogus")||e.hasAttribute("data-mce-placeholder")||!t||t===ee.transparentSrc)&&(0===t.indexOf("blob:")?!r.isUploaded(t)&&n(e):0===t.indexOf("data:")&&n(e))}),e=Q(e,function(n){var e;return i[n.src]?new Oe(function(t){i[n.src].then(function(e){if("string"==typeof e)return e;t({image:n,blobInfo:e.blobInfo})})}):(e=new Oe(function(e,t){Pb(o,n,e,t)}).then(function(e){return delete i[e.image.src],e}).catch(function(e){return delete i[n.src],e}),i[n.src]=e)}),Oe.all(e)}}),e.findAll(p.getBody(),c).then(y(function(e){return e=_(e,function(e){return"string"!=typeof e||(Cb.displayError(p,e),!1)}),R(e,function(e){u(e.image.src,e.blobInfo.blobUri()),e.image.src=e.blobInfo.blobUri(),e.image.removeAttribute("data-mce-src")}),e}))},f=function(){a.destroy(),b.destroy(),e=v=null},d=function(e){return e.replace(/src="(blob:[^"]+)"/g,function(e,n){var t=b.getResultUri(n);return t?'src="'+t+'"':(t=(t=a.getByUri(n))||le(p.editorManager.get(),function(e,t){return e||t.editorUpload&&t.editorUpload.blobCache.getByUri(n)},null))?'src="data:'+t.blob().type+";base64,"+t.base64()+'"':e})},p.on("setContent",function(){(A.isAutomaticUploadsEnabled(p)?s:C)()}),p.on("RawSaveContent",function(e){e.content=d(e.content)}),p.on("getContent",function(e){e.source_view||"raw"===e.format||(e.content=d(e.content))}),p.on("PostRender",function(){p.parser.addNodeFilter("img",function(e){R(e,function(e){var t=e.attr("src");a.getByUri(t)||(t=b.getResultUri(t))&&e.attr("src",t)})})}),{blobCache:a,addFilter:l,uploadImages:t,uploadImagesAuto:s,scanForImages:C,destroy:f}}function KN(o){var n,r=[],t=function(e){var t,n=o.$(e).parentsUntil(o.getBody()).add(e);if(n.length===r.length){for(t=n.length;0<=t&&n[t]===r[t];t--);if(-1===t)return r=n,!0}return r=n,!1};"onselectionchange"in o.getDoc()||o.on("NodeChange Click MouseUp KeyUp Focus",function(e){var t=o.selection.getRng(),t={startContainer:t.startContainer,startOffset:t.startOffset,endContainer:t.endContainer,endOffset:t.endOffset};"nodechange"!==e.type&&Np.isEq(t,n)||o.fire("SelectionChange"),n=t}),o.on("contextmenu",function(){o.fire("SelectionChange")}),o.on("SelectionChange",function(){var e=o.selection.getStart(!0);!e||!ee.range&&o.selection.isCollapsed()||Kb(o)&&!t(e)&&o.dom.isChildOf(e,o.getBody())&&o.nodeChanged({selectionChange:!0})}),o.on("MouseUp",function(e){!e.isDefaultPrevented()&&Kb(o)&&("IMG"===o.selection.getNode().nodeName?Fe.setEditorTimeout(o,function(){o.nodeChanged()}):o.nodeChanged())}),this.nodeChanged=function(e){var t,n,r=o.selection;o.initialized&&r&&!o.settings.disable_nodechange&&!o.readonly&&(n=o.getBody(),(r=r.getStart(!0)||n).ownerDocument===o.getDoc()&&o.dom.isChildOf(r,n)||(r=n),t=[],o.dom.getParent(r,function(e){if(e===n)return!0;t.push(e)}),(e=e||{}).element=r,e.parents=t,o.fire("NodeChange",e))}}function GN(F,H){var e,z,U,W,j,V,q,$;return void 0===H&&(H=MN()),!(e=function(){})!==(F=F||{}).fix_self_closing&&(F.fix_self_closing=!0),z=F.comment||e,U=F.cdata||e,W=F.text||e,j=F.start||e,V=F.end||e,q=F.pi||e,$=F.doctype||e,{parse:function(e){for(var t,n,s,r,o,i,c,a,u,l,f,d,m,g,h,p,v,b,y,x=0,w=[],C=0,S=Ko.decode,k=ne.makeMap("src,href,data,background,formaction,poster,xlink:href"),T=/((java|vb)script|mhtml):/i,N=function(e){for(var t,n=w.length;n--&&w[n].name!==e;);if(0<=n){for(t=w.length-1;n<=t;t--)(e=w[t]).valid&&V(e.name);w.length=n}},E=function(e,t,n,r,o){var i,a,u=/[\s\u0000-\u001F]+/g;if(n=(t=t.toLowerCase())in P?t:S(n||r||o||""),O&&!c&&!1===Zy(t)){if(!(i=m[t])&&g){for(a=g.length;a--&&!(i=g[a]).pattern.test(t););-1===a&&(i=null)}if(!i)return;if(i.validValues&&!(n in i.validValues))return}if(k[t]&&!F.allow_script_urls){r=n.replace(u,"");try{r=decodeURIComponent(r)}catch(e){r=unescape(r)}if(T.test(r))return;if(e0(F,r))return}c&&(t in k||0===t.indexOf("on"))||(s.map[t]=n,s.push({name:t,value:n}))},R=new RegExp("<(?:(?:!--([\\w\\W]*?)--\x3e)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)>)|(?:([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/|\\s+)>))","g"),_=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g,A=H.getShortEndedElements(),D=F.self_closing_elements||H.getSelfClosingElements(),P=H.getBoolAttrs(),O=F.validate,B=F.remove_internals,M=F.fix_self_closing,I=H.getSpecialElements(),L=e+">";t=R.exec(L);){if(x<t.index&&W(S(e.substr(x,t.index-x))),n=t[6])N(n=":"===(n=n.toLowerCase()).charAt(0)?n.substr(1):n);else if(n=t[7]){if(t.index+t[0].length>e.length){W(S(e.substr(t.index))),x=t.index+t[0].length;continue}if(a=(n=":"===(n=n.toLowerCase()).charAt(0)?n.substr(1):n)in A,M&&D[n]&&0<w.length&&w[w.length-1].name===n&&N(n),null!==(y=n0(_,t[8]))){if("all"===y){x=t0(H,e,R.lastIndex),R.lastIndex=x;continue}l=!1}if(!O||(u=H.getElementRule(n))){if(l=!0,O&&(m=u.attributes,g=u.attributePatterns),(d=t[8])?((c=-1!==d.indexOf("data-mce-type"))&&B&&(l=!1),(s=[]).map={},d.replace(_,E)):(s=[]).map={},O&&!c){if(h=u.attributesRequired,p=u.attributesDefault,v=u.attributesForced,u.removeEmptyAttrs&&!s.length&&(l=!1),v)for(r=v.length;r--;)i=(f=v[r]).name,"{$uid}"===(b=f.value)&&(b="mce_"+C++),s.map[i]=b,s.push({name:i,value:b});if(p)for(r=p.length;r--;)(i=(f=p[r]).name)in s.map||("{$uid}"===(b=f.value)&&(b="mce_"+C++),s.map[i]=b,s.push({name:i,value:b}));if(h){for(r=h.length;r--&&!(h[r]in s.map););-1===r&&(l=!1)}if(f=s.map["data-mce-bogus"]){if("all"===f){x=t0(H,e,R.lastIndex),R.lastIndex=x;continue}l=!1}}l&&j(n,s,a)}else l=!1;if(y=I[n]){y.lastIndex=x=t.index+t[0].length,x=(t=y.exec(e))?(l&&(o=e.substr(x,t.index-x)),t.index+t[0].length):(o=e.substr(x),e.length),l&&(0<o.length&&W(o,!0),V(n)),R.lastIndex=x;continue}a||(d&&d.indexOf("/")===d.length-1?l&&V(n):w.push({name:n,valid:l}))}else(n=t[1])?(">"===n.charAt(0)&&(n=" "+n),F.allow_conditional_comments||"[if"!==n.substr(0,3).toLowerCase()||(n=" "+n),z(n)):(n=t[2])?U(Qy(n)):(n=t[3])?$(n):(n=t[4])&&q(n,t[5]);x=t.index+t[0].length}for(x<e.length&&W(S(e.substr(x))),r=w.length-1;0<=r;r--)(n=w[r]).valid&&V(n.name)}}}function JN(i){var a,r,t,n,o=this,u=0,s=[],c=0,l=function(){return 0===c},f=function(e){l()&&(o.typing=e)},d=function(e){i.setDirty(e)},m=function(e){f(!1),o.add({},e)},g=function(){o.typing&&(f(!1),o.add())};return i.on("init",function(){o.add()}),i.on("BeforeExecCommand",function(e){e=e.command;"Undo"!==e&&"Redo"!==e&&"mceRepaint"!==e&&(g(),o.beforeChange())}),i.on("ExecCommand",function(e){var t=e.command;"Undo"!==t&&"Redo"!==t&&"mceRepaint"!==t&&m(e)}),i.on("ObjectResizeStart Cut",function(){o.beforeChange()}),i.on("SaveContent ObjectResized blur",m),i.on("DragEnd",m),i.on("KeyUp",function(e){var t=e.keyCode;e.isDefaultPrevented()||((33<=t&&t<=36||37<=t&&t<=40||45===t||e.ctrlKey)&&(m(),i.nodeChanged()),46!==t&&8!==t||i.nodeChanged(),r&&o.typing&&!1===S0.isEq(S0.createFromEditor(i),s[0])&&(!1===i.isDirty()&&(d(!0),i.fire("change",{level:s[0],lastLevel:null})),i.fire("TypingUndo"),r=!1,i.nodeChanged()))}),i.on("KeyDown",function(e){var t,n=e.keyCode;e.isDefaultPrevented()||(33<=n&&n<=36||37<=n&&n<=40||45===n?o.typing&&m(e):(t=e.ctrlKey&&!e.altKey||e.metaKey,!(n<16||20<n)||224===n||91===n||o.typing||t||(o.beforeChange(),f(!0),o.add({},e),r=!0)))}),i.on("MouseDown",function(e){o.typing&&m(e)}),t=function(e){return"insertReplacementText"===e.inputType},n=function(e){return"insertText"===e.inputType&&null===e.data},i.on("input",function(e){e.inputType&&(t(e)||n(e))&&m(e)}),i.addShortcut("meta+z","","Undo"),i.addShortcut("meta+y,meta+shift+z","","Redo"),i.on("AddUndo Undo Redo ClearUndos",function(e){e.isDefaultPrevented()||i.nodeChanged()}),o={data:s,typing:!1,beforeChange:function(){l()&&(a=ss.getUndoBookmark(i.selection))},add:function(e,t){var n,r=i.settings,o=S0.createFromEditor(i);if(e=ne.extend(e=e||{},o),!1===l()||i.removed)return null;if(o=s[u],i.fire("BeforeAddUndo",{level:e,lastLevel:o,originalEvent:t}).isDefaultPrevented())return null;if(o&&S0.isEq(o,e))return null;if(s[u]&&(s[u].beforeBookmark=a),r.custom_undo_redo_levels&&s.length>r.custom_undo_redo_levels){for(n=0;n<s.length-1;n++)s[n]=s[n+1];s.length--,u=s.length}return e.bookmark=ss.getUndoBookmark(i.selection),u<s.length-1&&(s.length=u+1),s.push(e),u=s.length-1,i.fire("AddUndo",r={level:e,lastLevel:o,originalEvent:t}),0<u&&(d(!0),i.fire("change",r)),e},undo:function(){var e;return o.typing&&(o.add(),o.typing=!1,f(!1)),0<u&&(e=s[--u],S0.applyToEditor(i,e,!0),d(!0),i.fire("undo",{level:e})),e},redo:function(){var e;return u<s.length-1&&(e=s[++u],S0.applyToEditor(i,e,!1),d(!0),i.fire("redo",{level:e})),e},clear:function(){s=[],u=0,o.typing=!1,o.data=s,i.fire("ClearUndos")},hasUndo:function(){return 0<u||o.typing&&s[0]&&!S0.isEq(S0.createFromEditor(i),s[0])},hasRedo:function(){return u<s.length-1&&!o.typing},transact:function(e){return g(),o.beforeChange(),o.ignore(e),o.add()},ignore:function(e){try{c++,e()}finally{c--}},extra:function(e,t){var n;o.transact(e)&&(e=s[u].bookmark,n=s[u-1],S0.applyToEditor(i,n,!0),o.transact(t))&&(s[u-1].beforeBookmark=e)}}}function ZN(e){var t,n,r,o,i;return t=e,n={},r=function(e){return e?n[e]:n},i=function(e){return e&&n[e]&&delete n[e],n},(o=function(e,t){e&&("string"!=typeof e?ne.each(e,function(e,t){o(t,e)}):(t=t.length?t:[t],ne.each(t,function(e){void 0===e.deep&&(e.deep=!e.selector),void 0===e.split&&(e.split=!e.selector||e.inline),void 0===e.remove&&e.selector&&!e.inline&&(e.remove="none"),e.selector&&e.inline&&(e.mixed=!0,e.block_expand=!0),"string"==typeof e.classes&&(e.classes=e.classes.split(/\s+/))}),n[e]=t))})(gx.get(t.dom)),o(t.settings.formats),t={get:r,register:o,unregister:i},r=Oi(null),Cx.setup(e),$h(e),{get:t.get,register:t.register,unregister:t.unregister,apply:v(cx.applyFormat,e),remove:v(j0.remove,e),toggle:v(wx.toggle,e,t),match:v(Eh.match,e),matchAll:v(Eh.matchAll,e),matchNode:v(Eh.matchNode,e),canApply:v(Eh.canApply,e),formatChanged:v(mx.formatChanged,e,r),getCssText:v(xx.getCssText,e)}}function QN(e,t){this.name=e,1===(this.type=t)&&(this.attributes=[],this.attributes.map={})}function eE(E,R){var _,A,D,P,O,v,e;return void 0===R&&(R=MN()),_={},A=[],D={},P={},(E=E||{}).validate=!("validate"in E)||E.validate,E.root_name=E.root_name||"body",O=function(e){for(var t,n,r,o,i,a,u,s,c,l,f=qx("tr,td,th,tbody,thead,tfoot,table"),d=R.getNonEmptyElements(),m=R.getWhiteSpaceElements(),g=R.getTextBlockElements(),h=R.getSpecialElements(),p=0;p<e.length;p++)if((t=e[p]).parent&&!t.fixed)if(g[t.name]&&"li"===t.parent.name){for(c=t.next;c&&g[c.name];)c.name="li",c.fixed=!0,t.parent.insert(c,t.parent),c=c.next;t.unwrap(t)}else{for(r=[t],n=t.parent;n&&!R.isValidChild(n.name,t.name)&&!f[n.name];n=n.parent)r.push(n);if(n&&1<r.length){for(r.reverse(),o=i=v(r[0].clone()),s=0;s<r.length-1;s++){for(R.isValidChild(i.name,r[s].name)?(a=v(r[s].clone()),i.append(a)):a=i,u=r[s].firstChild;u&&u!==r[s+1];)l=u.next,a.append(u),u=l;i=a}Wx(R,d,m,o)?n.insert(t,r[0],!0):(n.insert(o,r[0],!0),n.insert(t,o)),(Wx(R,d,m,n=r[0])||zx(n,"br"))&&n.empty().remove()}else t.parent&&("li"===t.name?!(c=t.prev)||"ul"!==c.name&&"ul"!==c.name?!(c=t.next)||"ul"!==c.name&&"ul"!==c.name?t.wrap(v(new Lx("ul",1))):c.insert(t,c.firstChild,!0):c.append(t):R.isValidChild(t.parent.name,"div")&&R.isValidChild("div",t.name)?t.wrap(v(new Lx("div",1))):h[t.name]?t.empty().remove():t.unwrap())}},Vx(e={schema:R,addAttributeFilter:function(e,n){$x(Yx(e),function(e){for(var t=0;t<A.length;t++)if(A[t].name===e)return void A[t].callbacks.push(n);A.push({name:e,callbacks:[n]})})},getAttributeFilters:function(){return[].concat(A)},addNodeFilter:function(e,n){$x(Yx(e),function(e){var t=_[e];t||(_[e]=t=[]),t.push(n)})},getNodeFilters:function(){var e,t=[];for(e in _)_.hasOwnProperty(e)&&t.push({name:e,callbacks:_[e]});return t},filterNode:v=function(e){var t,n,r=e.name;r in _&&((n=D[r])?n.push(e):D[r]=[e]),t=A.length;for(;t--;)(r=A[t].name)in e.attributes.map&&((n=P[r])?n.push(e):P[r]=[e]);return e},parse:function(e,i){var t,n,r,o,a,u,s,c,l,f,d,m,g,h,p,v,b,y,x,w,C,S,k,T,N=[];if(i=i||{},D={},P={},l=Xx(qx("script,style,head,html,body,title,meta,param"),R.getBlockElements()),m=R.getNonEmptyElements(),g=R.children,h=E.validate,p=("forced_root_block"in i?i:E).forced_root_block,v=R.getWhiteSpaceElements(),b=/^[ \t\r\n]+/,y=/[ \t\r\n]+$/,x=/[ \t\r\n]+/g,w=/^[ \t\r\n]+$/,f=v.hasOwnProperty(i.context)||v.hasOwnProperty(E.root_name),C=function(){var e,t,n=T.firstChild,r=function(e){e&&((n=e.firstChild)&&3===n.type&&(n.value=n.value.replace(b,"")),n=e.lastChild)&&3===n.type&&(n.value=n.value.replace(y,""))};if(R.isValidChild(T.name,p.toLowerCase())){for(;n;)e=n.next,3===n.type||1===n.type&&"p"!==n.name&&!l[n.name]&&!n.attr("data-mce-type")?(t||((t=S(p,1)).attr(E.forced_root_block_attrs),T.insert(t,n)),t.append(n)):(r(t),t=null),n=e;r(t)}},S=function(e,t){var n,t=new Lx(e,t);return e in _&&((n=D[e])?n.push(t):D[e]=[t]),t},k=function(e){for(var t,n=R.getBlockElements(),r=e.prev;r&&3===r.type;){if(0<(t=r.value.replace(y,"")).length)return void(r.value=t);if(t=r.next){if(3===t.type&&t.value.length){r=r.prev;continue}if(!n[t.name]&&"script"!==t.name&&"style"!==t.name){r=r.prev;continue}}t=r.prev,r.remove(),r=t}},t=r0({validate:h,allow_script_urls:E.allow_script_urls,allow_conditional_comments:E.allow_conditional_comments,self_closing_elements:function(e){var t,n={};for(t in e)"li"!==t&&"p"!==t&&(n[t]=e[t]);return n}(R.getSelfClosingElements()),cdata:function(e){d.append(S("#cdata",4)).value=e},text:function(e,t){var n;f||(e=e.replace(x," "),jx(d.lastChild,l)&&(e=e.replace(b,""))),0!==e.length&&((n=S("#text",3)).raw=!!t,d.append(n).value=e)},comment:function(e){d.append(S("#comment",8)).value=e},pi:function(e,t){d.append(S(e,7)).value=t,k(d)},doctype:function(e){d.append(S("#doctype",10)).value=e,k(d)},start:function(e,t,n){var r,o,i,a=h?R.getElementRule(e):{};if(a){for((r=S(a.outputName||e,1)).attributes=t,r.shortEnded=n,d.append(r),(a=g[d.name])&&g[r.name]&&!a[r.name]&&N.push(r),o=A.length;o--;)(i=A[o].name)in t.map&&((s=P[i])?s.push(r):P[i]=[r]);l[e]&&k(r),n||(d=r),!f&&v[e]&&(f=!0)}},end:function(e){var t,n,r,o=h?R.getElementRule(e):{};if(o){if(l[e]&&!f){if((t=d.firstChild)&&3===t.type)if(0<(n=t.value.replace(b,"")).length)t.value=n,t=t.next;else for(r=t.next,t.remove(),t=r;t&&3===t.type;)n=t.value,r=t.next,0!==n.length&&!w.test(n)||(t.remove(),t=r),t=r;if((t=d.lastChild)&&3===t.type)if(0<(n=t.value.replace(y,"")).length)t.value=n,t=t.prev;else for(r=t.prev,t.remove(),t=r;t&&3===t.type;)n=t.value,r=t.prev,0!==n.length&&!w.test(n)||(t.remove(),t=r),t=r}f&&v[e]&&(f=!1),o.removeEmpty&&Wx(R,m,v,d)&&!d.attributes.map.name&&!d.attr("id")?(e=d.parent,l[d.name]?d.empty().remove():d.unwrap(),d=e):(o.paddEmpty&&(Hx(d)||Wx(R,m,v,d))&&Fx(E,i,l,d),d=d.parent)}}},R),T=d=new Lx(i.context||E.root_name,11),t.parse(e),h&&N.length&&(i.context?i.invalid=!0:O(N)),p&&("body"===T.name||i.isRootContent)&&C(),!i.invalid){for(c in D){for(s=_[c],a=(n=D[c]).length;a--;)n[a].parent||n.splice(a,1);for(r=0,o=s.length;r<o;r++)s[r](n,c,i)}for(r=0,o=A.length;r<o;r++)if((s=A[r]).name in P){for(a=(n=P[s.name]).length;a--;)n[a].parent||n.splice(a,1);for(a=0,u=s.callbacks.length;a<u;a++)s.callbacks[a](n,s.name,i)}}return T}},E),Ox.register(e,E),e}function tE(e,t){n=e,i=["data-mce-selected"],a=(r=t)&&r.dom?r.dom:s.DOM,u=r&&r.schema?r.schema:MN(n),n.entity_encoding=n.entity_encoding||"named",n.remove_trailing_brs=!("remove_trailing_brs"in n)||n.remove_trailing_brs,o=eE(n,u),Tx.register(o,n,a);var n,r,o,i,a,u,e={schema:u,addNodeFilter:o.addNodeFilter,addAttributeFilter:o.addAttributeFilter,serialize:function(e,t){t=kx({format:"html"},t||{}),e=Rx.process(r,e,t),e=Jx(a,e,t),e=Zx(o,e,t);return"tree"===t.format?e:ew(r,n,u,e,t)},addRules:function(e){u.addValidElements(e)},setRules:function(e){u.setValidElements(e)},addTempAttr:v(Kx,o,i),getTempAttrs:function(){return i}};return{schema:e.schema,addNodeFilter:e.addNodeFilter,addAttributeFilter:e.addAttributeFilter,serialize:e.serialize,addRules:e.addRules,setRules:e.setRules,addTempAttr:e.addTempAttr,getTempAttrs:e.getTempAttrs}}function nE(e){return{getBookmark:v($c.getBookmark,e),moveToBookmark:v($c.moveToBookmark,e)}}function rE(i){var o=ne.each,a=W.BACKSPACE,u=W.DELETE,s=i.dom,c=i.selection,e=i.settings,t=i.parser,n=ee.gecko,r=ee.ie,l=ee.webkit,f="data:text/mce-internal,",d=r?"Text":"URL",m=function(e,t){try{i.getDoc().execCommand(e,!1,t)}catch(e){}},g=function(e){return e.isDefaultPrevented()},h=function(e){var t;e.dataTransfer&&(i.selection.isCollapsed()&&"IMG"===e.target.tagName&&c.select(e.target),0<(t=i.selection.getContent()).length)&&(t=f+escape(i.id)+","+escape(t),e.dataTransfer.setData(d,t))},p=function(e){return e.dataTransfer&&(e=e.dataTransfer.getData(d))&&0<=e.indexOf(f)?(e=e.substr(f.length).split(","),{id:unescape(e[0]),html:unescape(e[1])}):null},v=function(e,t){i.queryCommandSupported("mceInsertClipboardContent")?i.execCommand("mceInsertClipboardContent",!1,{content:e,internal:t}):i.execCommand("mceInsertContent",!1,e)},r=function(){var n=function(e){var t=s.create("body"),e=e.cloneContents();return t.appendChild(e),c.serializer.serialize(t,{format:"html"})},r=function(e){var e=n(e),t=s.createRng();return t.selectNode(i.getBody()),e===n(t)};i.on("keydown",function(e){var t,n=e.keyCode;g(e)||n!==u&&n!==a||(n=i.selection.isCollapsed(),t=i.getBody(),n&&!s.isEmpty(t))||(n||r(i.selection.getRng()))&&(e.preventDefault(),i.setContent(""),t.firstChild&&s.isBlock(t.firstChild)?i.selection.setCursorLocation(t.firstChild,0):i.selection.setCursorLocation(t,0),i.nodeChanged())})},b=function(){i.shortcuts.add("meta+a",null,"SelectAll")},y=function(){i.settings.content_editable||s.bind(i.getDoc(),"mousedown mouseup",function(e){var t;e.target===i.getDoc().documentElement&&(t=c.getRng(),i.getBody().focus(),"mousedown"===e.type?Ca(t.startContainer)||c.placeCaretAt(e.clientX,e.clientY):c.setRng(t))})},x=function(){i.on("keydown",function(e){var t,n;g(e)||e.keyCode!==a||i.getBody().getElementsByTagName("hr").length&&c.isCollapsed()&&0===c.getRng().startOffset&&(n=(t=c.getNode()).previousSibling,"HR"===t.nodeName?(s.remove(t),e.preventDefault()):n&&n.nodeName&&"hr"===n.nodeName.toLowerCase()&&(s.remove(n),e.preventDefault()))})},w=function(){J.Range.prototype.getClientRects||i.on("mousedown",function(e){var t;g(e)||"HTML"!==e.target.nodeName||((t=i.getBody()).blur(),Fe.setEditorTimeout(i,function(){t.focus()}))})},C=function(){i.on("click",function(e){var t=e.target;/^(IMG|HR)$/.test(t.nodeName)&&"false"!==s.getContentEditableParent(t)&&(e.preventDefault(),i.selection.select(t),i.nodeChanged()),"A"===t.nodeName&&s.hasClass(t,"mce-item-anchor")&&(e.preventDefault(),c.select(t))})},S=function(){var n=function(){var e=s.getAttribs(c.getStart().cloneNode(!1));return function(){var t=c.getStart();t!==i.getBody()&&(s.setAttrib(t,"style",null),o(e,function(e){t.setAttributeNode(e.cloneNode(!0))}))}},r=function(){return!c.isCollapsed()&&s.getParent(c.getStart(),s.isBlock)!==s.getParent(c.getEnd(),s.isBlock)};i.on("keypress",function(e){var t;if(!g(e)&&(8===e.keyCode||46===e.keyCode)&&r())return t=n(),i.getDoc().execCommand("delete",!1,null),t(),e.preventDefault(),!1}),s.bind(i.getDoc(),"cut",function(e){var t;!g(e)&&r()&&(t=n(),Fe.setEditorTimeout(i,function(){t()}))})},k=function(){i.on("keydown",function(e){if(!g(e)&&e.keyCode===a&&c.isCollapsed()&&0===c.getRng().startOffset){var t=c.getNode().previousSibling;if(t&&t.nodeName&&"table"===t.nodeName.toLowerCase())return e.preventDefault(),!1}})},T=function(){e.readonly||i.on("BeforeExecCommand MouseDown",function(){m("StyleWithCSS",!1),m("enableInlineTableEditing",!1),e.object_resizing||m("enableObjectResizing",!1)})},N=function(){i.on("SetContent ExecCommand",function(e){"setcontent"!==e.type&&"mceInsertLink"!==e.command||o(s.select("a"),function(e){var t=e.parentNode,n=s.getRoot();if(t.lastChild===e){for(;t&&!s.isBlock(t);){if(t.parentNode.lastChild!==t||t===n)return;t=t.parentNode}s.add(t,"br",{"data-mce-bogus":1})}})})},E=function(){e.forced_root_block&&i.on("init",function(){m("DefaultParagraphSeparator",e.forced_root_block)})},R=function(){i.on("keyup focusin mouseup",function(e){W.modifierPressed(e)||c.normalize()},!0)},_=function(){i.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},A=function(){i.inline||i.on("keydown",function(){J.document.activeElement===J.document.body&&i.getWin().focus()})},D=function(){i.inline||(i.contentStyles.push("body {min-height: 150px}"),i.on("click",function(e){"HTML"===e.target.nodeName&&(11<ee.ie?i.getBody().focus():(e=i.selection.getRng(),i.getBody().focus(),i.selection.setRng(e),i.selection.normalize(),i.nodeChanged()))}))},P=function(){ee.mac&&i.on("keydown",function(e){!W.metaKeyPressed(e)||e.shiftKey||37!==e.keyCode&&39!==e.keyCode||(e.preventDefault(),i.selection.getSel().modify("move",37===e.keyCode?"backward":"forward","lineboundary"))})},O=function(){m("AutoUrlDetect",!1)},B=function(){i.on("click",function(e){var t=e.target;do{if("A"===t.tagName)return void e.preventDefault()}while(t=t.parentNode)}),i.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},M=function(){i.on("init",function(){i.dom.bind(i.getBody(),"submit",function(e){e.preventDefault()})})},I=function(){t.addNodeFilter("br",function(e){for(var t=e.length;t--;)"Apple-interchange-newline"===e[t].attr("class")&&e[t].remove()})},L=function(){i.on("dragstart",function(e){h(e)}),i.on("drop",function(e){var t;g(e)||(t=p(e))&&t.id!==i.id&&(e.preventDefault(),e=hw.fromPoint(e.x,e.y,i.getDoc()),c.setRng(e),v(t.html,!0))})},F=function(){},H=function(){var e;return!n||i.removed?0:!(e=i.selection.getSel())||!e.rangeCount||0===e.rangeCount};return i.on("keydown",function(e){var t,n,r,o;if(!g(e)&&e.keyCode===W.BACKSPACE&&(t=(e=c.getRng()).startContainer,n=e.startOffset,r=s.getRoot(),o=t,e.collapsed)&&0===n){for(;o&&o.parentNode&&o.parentNode.firstChild===o&&o.parentNode!==r;)o=o.parentNode;"BLOCKQUOTE"===o.tagName&&(i.formatter.toggle("blockquote",null,o),(e=s.createRng()).setStart(t,0),e.setEnd(t,0),c.setRng(e))}}),r(),ee.windowsPhone||R(),l&&(y(),C(),E(),M(),k(),I(),(ee.iOS?(A(),D(),B):b)()),11<=ee.ie&&(D(),k()),ee.ie&&(b(),O(),L()),n&&(x(),w(),S(),T(),N(),_(),P(),k()),{refreshContentEditable:F,isHidden:H}}function oE(n){return{walk:function(e,t){return dl(n,e,t)},split:_h.split,normalize:function(t){return Fp.normalize(n,t).fold(Z(!1),function(e){return t.setStart(e.startContainer,e.startOffset),t.setEnd(e.endContainer,e.endOffset),!0})}}}EN.prototype=x.filters=x.pseudos,x.setFilters=new EN,et=te.tokenize=function(e,t){var n,r,o,i,a,u,s,c=bt[e+" "];if(c)return t?0:c.slice(0);for(a=e,u=[],s=x.preFilter;a;){for(i in n&&!(r=_t.exec(a))||(r&&(a=a.slice(r[0].length)||a),u.push(o=[])),n=!1,(r=At.exec(a))&&(n=r.shift(),o.push({value:n,type:r[0].replace(Rt," ")}),a=a.slice(n.length)),x.filter)!(r=Bt[i].exec(a))||s[i]&&!(r=s[i](r))||(n=r.shift(),o.push({value:n,type:i,matches:r}),a=a.slice(n.length));if(!n)break}return t?a.length:a?te.error(e):bt(e,u).slice(0)},tt=te.compile=function(e,t){var n,r=[],o=[],i=yt[e+" "];if(!i){for(n=(t=t||et(e)).length;n--;)((i=function e(t){for(var r,n,o,i=t.length,a=x.relative[t[0].type],u=a||x.relative[" "],s=a?1:0,c=_N(function(e){return e===r},u,!0),l=_N(function(e){return-1<Et.call(r,e)},u,!0),f=[function(e,t,n){return!a&&(n||t!==rt)||((r=t).nodeType?c:l)(e,t,n)}];s<i;s++)if(n=x.relative[t[s].type])f=[_N(AN(f),n)];else{if((n=x.filter[t[s].type].apply(null,t[s].matches))[mt]){for(o=++s;o<i&&!x.relative[t[o].type];o++);return PN(1<s&&AN(f),1<s&&RN(t.slice(0,s-1).concat({value:" "===t[s-2].type?"*":""})).replace(Rt,"$1"),n,s<o&&e(t.slice(s,o)),o<i&&e(t=t.slice(o)),o<i&&RN(t))}f.push(n)}return AN(f)}(t[n]))[mt]?r:o).push(i);(i=yt(e,ON(o,r))).selector=e}return i},nt=te.select=function(e,t,n,r){var o,i,a,u,s,c="function"==typeof e&&e,l=!r&&et(e=c.selector||e);if(n=n||[],1===l.length){if(2<(i=l[0]=l[0].slice(0)).length&&"ID"===(a=i[0]).type&&Je.getById&&9===t.nodeType&&ct&&x.relative[i[1].type]){if(!(t=(x.find.ID(a.matches[0].replace(Ut,Wt),t)||[])[0]))return n;c&&(t=t.parentNode),e=e.slice(i.shift().value.length)}for(o=Bt.needsContext.test(e)?0:i.length;o--&&(a=i[o],!x.relative[u=a.type]);)if((s=x.find[u])&&(r=s(a.matches[0].replace(Ut,Wt),Ht.test(i[0].type)&&NN(t.parentNode)||t))){if(i.splice(o,1),e=r.length&&RN(i))break;return Tt.apply(n,r),n}}return(c||tt(e,l))(r,t,!ct,n,Ht.test(e)&&NN(t.parentNode)||t),n},Je.sortStable=mt.split("").sort(xt).join("")===mt,Je.detectDuplicates=!!it,at(),Je.sortDetached=!0,jt=Array.isArray,$t=/^\s*|\s*$/g,ne={trim:Yt=function(e){return null==e?"":(""+e).replace($t,"")},isArray:(m={isArray:jt,toArray:function(e){var t,n,r=e;if(!jt(e))for(r=[],t=0,n=e.length;t<n;t++)r[t]=e[t];return r},each:Vt=function(e,t,n){var r,o;if(!e)return 0;if(n=n||e,void 0!==e.length){for(r=0,o=e.length;r<o;r++)if(!1===t.call(n,e[r],r,e))return 0}else for(r in e)if(e.hasOwnProperty(r)&&!1===t.call(n,e[r],r,e))return 0;return 1},map:function(n,r){var o=[];return Vt(n,function(e,t){o.push(r(e,t,n))}),o},filter:function(n,r){var o=[];return Vt(n,function(e,t){r&&!r(e,t,n)||o.push(e)}),o},indexOf:function(e,t){var n,r;if(e)for(n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},reduce:function(e,t,n,r){var o=0;for(arguments.length<3&&(n=e[0]);o<e.length;o++)n=t.call(r,n,e[o],o);return n},findIndex:qt=function(e,t,n){for(var r=0,o=e.length;r<o;r++)if(t.call(n,e[r],r,e))return r;return-1},find:function(e,t,n){t=qt(e,t,n);if(-1!==t)return e[t]},last:function(e){return e[e.length-1]}}).isArray,is:Xt=function(e,t){return t?!("array"!==t||!m.isArray(e))||typeof e===t:void 0!==e},toArray:m.toArray,makeMap:function(e,t,n){var r;for(t=t||",",n=n||{},r=(e="string"==typeof(e=e||[])?e.split(t):e).length;r--;)n[e[r]]={};return n},each:m.each,map:m.map,grep:m.filter,inArray:m.indexOf,hasOwn:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},extend:function(e,t){for(var n,r,o,i,a,u=2;u<arguments.length;u++)u-2,0;for(n=1,r=(i=arguments).length;n<r;n++)for(o in t=i[n])t.hasOwnProperty(o)&&void 0!==(a=t[o])&&(e[o]=a);return e},create:function(e,t,n){var r,o,i,a,u,s=this,c=0;e=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(e),i=e[3].match(/(^|\.)(\w+)$/i)[2],(o=s.createNS(e[3].replace(/\.\w+$/,""),n))[i]||("static"===e[2]?(o[i]=t,this.onCreate&&this.onCreate(e[2],e[3],o[i])):(t[i]||(t[i]=function(){},c=1),o[i]=t[i],s.extend(o[i].prototype,t),e[5]&&(r=s.resolve(e[5]).prototype,a=e[5].match(/\.(\w+)$/i)[1],u=o[i],o[i]=c?function(){return r[a].apply(this,arguments)}:function(){return this.parent=r[a],u.apply(this,arguments)},o[i].prototype[i]=o[i],s.each(r,function(e,t){o[i].prototype[t]=r[t]}),s.each(t,function(e,t){r[t]?o[i].prototype[t]=function(){return this.parent=r[t],e.apply(this,arguments)}:t!==i&&(o[i].prototype[t]=e)})),s.each(t.static,function(e,t){o[i][t]=e})))},walk:Kt=function(e,n,r,o){o=o||this,e&&(r&&(e=e[r]),m.each(e,function(e,t){if(!1===n.call(o,e,t,r))return!1;Kt(e,n,r,o)}))},createNS:function(e,t){var n,r;for(t=t||J.window,e=e.split("."),n=0;n<e.length;n++)t[r=e[n]]||(t[r]={}),t=t[r];return t},resolve:function(e,t){var n,r;for(t=t||J.window,n=0,r=(e=e.split(".")).length;n<r&&(t=t[e[n]]);n++);return t},explode:function(e,t){return!e||Xt(e,"array")?e:m.map(e.split(t||","),Yt)},_addCacheSuffix:function(e){var t=ee.cacheSuffix;return t&&(e+=(-1===e.indexOf("?")?"?":"&")+t),e},resizeImage:function(e,i){var e="function"==typeof e.blobUri?e.blobUri():"function"==typeof e.blob?Pe.createObjectURL(e.blob()):Pe.createObjectURL(e.blob),a=new Image;a.onload=function(e){var t=ut.createElement("canvas"),n=1e3,r=a.width,o=a.height;r<n&&o<n&&i(!1),o<r?n<r&&(o*=n/r,r=n):n<o&&(r*=n/o,o=n),t.width=r,t.height=o,t.getContext("2d").drawImage(a,0,0,r,o),t.toBlob(function(e){i(!0,e)},"image/jpeg")},a.src=e}},Gt=J.document,Jt=Array.prototype.push,Zt=Array.prototype.slice,Qt=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,en=Ke.Event,tn=ne.makeMap("children,contents,next,prev"),nn=function(e){return void 0!==e},rn=function(e){return"string"==typeof e},on=function(e){return e&&e===e.window},an=function(e,t){var n,r=(t=t||Gt).createElement("div"),o=t.createDocumentFragment();for(r.innerHTML=e;n=r.firstChild;)o.appendChild(n);return o},un=function(e,t,n,r){var o;if(rn(t))t=an(t,xn(e[0]));else if(t.length&&!t.nodeType){if(t=re.makeArray(t),r)for(o=t.length-1;0<=o;o--)un(e,t[o],n,r);else for(o=0;o<t.length;o++)un(e,t[o],n,r);return e}if(t.nodeType)for(o=e.length;o--;)n.call(e[o],t);return e},sn=function(e,t){return e&&t&&-1!==(" "+e.className+" ").indexOf(" "+t+" ")},cn=function(e,t,n){var r,o;return t=re(t)[0],e.each(function(){var e=this;n&&r===e.parentNode||(r=e.parentNode,o=t.cloneNode(!1),e.parentNode.insertBefore(o,e)),o.appendChild(e)}),e},ln=ne.makeMap("fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom"," "),fn=ne.makeMap("checked compact declare defer disabled ismap multiple nohref noshade nowrap readonly selected"," "),dn={for:"htmlFor",class:"className",readonly:"readOnly"},mn={float:"cssFloat"},gn={},hn={},r=function(e,t){var n;if(t.indexOf)return t.indexOf(e);for(n=t.length;n--;)if(t[n]===e)return n;return-1},pn=/^\s*|\s*$/g,vn=function(e){return null==e?"":(""+e).replace(pn,"")},bn=function(e,t){var n,r,o,i;if(e)if(void 0===(n=e.length)){for(r in e)if(e.hasOwnProperty(r)&&(i=e[r],!1===t.call(i,r,i)))break}else for(o=0;o<n&&(i=e[o],!1!==t.call(i,o,i));o++);return e},yn=function(e,n){var r=[];return bn(e,function(e,t){n(t,e)&&r.push(t)}),r},xn=function(e){return e?9===e.nodeType?e:e.ownerDocument:Gt},(re=function(e,t){return new re.fn.init(e,t)}).fn=re.prototype={constructor:re,selector:"",context:null,length:0,init:function(e,t){var n,r,o=this;if(e)if(e.nodeType)o.context=o[0]=e,o.length=1;else{if(t&&t.nodeType)o.context=t;else{if(t)return re(e).attr(t);o.context=t=J.document}if(rn(e)){if(!(n="<"===(o.selector=e).charAt(0)&&">"===e.charAt(e.length-1)&&3<=e.length?[null,e,null]:Qt.exec(e)))return re(t).find(e);if(n[1])for(r=an(e,xn(t)).firstChild;r;)Jt.call(o,r),r=r.nextSibling;else{if(!(r=xn(t).getElementById(n[2])))return o;if(r.id!==n[2])return o.find(e);o.length=1,o[0]=r}}else this.add(e,!1)}return o},toArray:function(){return ne.toArray(this)},add:function(e,t){var n,r,o=this;if(rn(e))return o.add(re(e));if(!1!==t)for(n=re.unique(o.toArray().concat(re.makeArray(e))),o.length=n.length,r=0;r<n.length;r++)o[r]=n[r];else Jt.apply(o,re.makeArray(e));return o},attr:function(t,n){var e,r=this;if("object"==typeof t)bn(t,function(e,t){r.attr(e,t)});else{if(!nn(n)){if(r[0]&&1===r[0].nodeType){if((e=gn[t])&&e.get)return e.get(r[0],t);if(fn[t])return r.prop(t)?t:void 0;null===(n=r[0].getAttribute(t,2))&&(n=void 0)}return n}this.each(function(){var e;1===this.nodeType&&((e=gn[t])&&e.set?e.set(this,n):null===n?this.removeAttribute(t,2):this.setAttribute(t,n,2))})}return r},removeAttr:function(e){return this.attr(e,null)},prop:function(e,t){var n=this;if("object"==typeof(e=dn[e]||e))bn(e,function(e,t){n.prop(e,t)});else{if(!nn(t))return n[0]&&n[0].nodeType&&e in n[0]?n[0][e]:t;this.each(function(){1===this.nodeType&&(this[e]=t)})}return n},css:function(t,n){var e,r,o=this,i=function(e){return e.replace(/-(\D)/g,function(e,t){return t.toUpperCase()})},a=function(e){return e.replace(/[A-Z]/g,function(e){return"-"+e})};if("object"==typeof t)bn(t,function(e,t){o.css(e,t)});else if(nn(n))t=i(t),"number"!=typeof n||ln[t]||(n=n.toString()+"px"),o.each(function(){var e=this.style;if((r=hn[t])&&r.set)r.set(this,n);else{try{this.style[mn[t]||t]=n}catch(e){}null!==n&&""!==n||(e.removeProperty?e.removeProperty(a(t)):e.removeAttribute(t))}});else{if(e=o[0],(r=hn[t])&&r.get)return r.get(e);if(!e.ownerDocument.defaultView)return e.currentStyle?e.currentStyle[i(t)]:"";try{return e.ownerDocument.defaultView.getComputedStyle(e,null).getPropertyValue(a(t))}catch(e){return}}return o},remove:function(){for(var e,t=this.length;t--;)e=this[t],en.clean(e),e.parentNode&&e.parentNode.removeChild(e);return this},empty:function(){for(var e,t=this.length;t--;)for(e=this[t];e.firstChild;)e.removeChild(e.firstChild);return this},html:function(t){var n,r=this;if(nn(t)){n=r.length;try{for(;n--;)r[n].innerHTML=t}catch(e){re(r[n]).empty().append(t)}return r}return r[0]?r[0].innerHTML:""},text:function(e){var t,n=this;if(nn(e)){for(t=n.length;t--;)"innerText"in n[t]?n[t].innerText=e:n[0].textContent=e;return n}return n[0]?n[0].innerText||n[0].textContent:""},append:function(){return un(this,arguments,function(e){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.appendChild(e)})},prepend:function(){return un(this,arguments,function(e){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.insertBefore(e,this.firstChild)},!0)},before:function(){return this[0]&&this[0].parentNode?un(this,arguments,function(e){this.parentNode.insertBefore(e,this)}):this},after:function(){return this[0]&&this[0].parentNode?un(this,arguments,function(e){this.parentNode.insertBefore(e,this.nextSibling)},!0):this},appendTo:function(e){return re(e).append(this),this},prependTo:function(e){return re(e).prepend(this),this},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){return cn(this,e)},wrapAll:function(e){return cn(this,e,!0)},wrapInner:function(e){return this.each(function(){re(this).contents().wrapAll(e)}),this},unwrap:function(){return this.parent().each(function(){re(this).replaceWith(this.childNodes)})},clone:function(){var e=[];return this.each(function(){e.push(this.cloneNode(!0))}),re(e)},addClass:function(e){return this.toggleClass(e,!0)},removeClass:function(e){return this.toggleClass(e,!1)},toggleClass:function(o,i){var e=this;return"string"==typeof o&&(-1!==o.indexOf(" ")?bn(o.split(" "),function(){e.toggleClass(this,i)}):e.each(function(e,t){var n,r=sn(t,o);r!==i&&(n=t.className,r?t.className=vn((" "+n+" ").replace(" "+o+" "," ")):t.className+=n?" "+o:o)})),e},hasClass:function(e){return sn(this[0],e)},each:function(e){return bn(this,e)},on:function(e,t){return this.each(function(){en.bind(this,e,t)})},off:function(e,t){return this.each(function(){en.unbind(this,e,t)})},trigger:function(e){return this.each(function(){"object"==typeof e?en.fire(this,e.type,e):en.fire(this,e)})},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},slice:function(){return new re(Zt.apply(this,arguments))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},find:function(e){for(var t=[],n=0,r=this.length;n<r;n++)re.find(e,this[n],t);return re(t)},filter:function(n){return re("function"==typeof n?yn(this.toArray(),function(e,t){return n(t,e)}):re.filter(n,this.toArray()))},closest:function(n){var r=[];return n instanceof re&&(n=n[0]),this.each(function(e,t){for(;t;){if("string"==typeof n&&re(t).is(n)){r.push(t);break}if(t===n){r.push(t);break}t=t.parentNode}}),re(r)},offset:function(e){var t,n,r=0,o=0;return e?this.css(e):((e=this[0])&&(n=(t=e.ownerDocument).documentElement,e.getBoundingClientRect)&&(r=(e=e.getBoundingClientRect()).left+(n.scrollLeft||t.body.scrollLeft)-n.clientLeft,o=e.top+(n.scrollTop||t.body.scrollTop)-n.clientTop),{left:r,top:o})},push:Jt,sort:[].sort,splice:[].splice},ne.extend(re,{extend:ne.extend,makeArray:function(e){return on(e)||e.nodeType?[e]:ne.toArray(e)},inArray:r,isArray:ne.isArray,each:bn,trim:vn,grep:yn,find:te,expr:te.selectors,unique:te.uniqueSort,text:te.getText,contains:te.contains,filter:function(e,t,n){var r=t.length;for(n&&(e=":not("+e+")");r--;)1!==t[r].nodeType&&t.splice(r,1);return t=1===t.length?re.find.matchesSelector(t[0],e)?[t[0]]:[]:re.find.matches(e,t)}}),wn=function(e,t,n){var r=[],o=e[t];for("string"!=typeof n&&n instanceof re&&(n=n[0]);o&&9!==o.nodeType;){if(void 0!==n){if(o===n)break;if("string"==typeof n&&re(o).is(n))break}1===o.nodeType&&r.push(o),o=o[t]}return r},Cn=function(e,t,n,r){var o=[];for(r instanceof re&&(r=r[0]);e;e=e[t])if(!n||e.nodeType===n){if(void 0!==r){if(e===r)break;if("string"==typeof r&&re(e).is(r))break}o.push(e)}return o},Sn=function(e,t,n){for(e=e[t];e;e=e[t])if(e.nodeType===n)return e;return null},bn({parent:function(e){e=e.parentNode;return e&&11!==e.nodeType?e:null},parents:function(e){return wn(e,"parentNode")},next:function(e){return Sn(e,"nextSibling",1)},prev:function(e){return Sn(e,"previousSibling",1)},children:function(e){return Cn(e.firstChild,"nextSibling",1)},contents:function(e){return ne.toArray(("iframe"===e.nodeName?e.contentDocument||e.contentWindow.document:e).childNodes)}},function(e,r){re.fn[e]=function(t){var n=[];return this.each(function(){var e=r.call(n,this,t,n);e&&(re.isArray(e)?n.push.apply(n,e):n.push(e))}),1<this.length&&(tn[e]||(n=re.unique(n)),0===e.indexOf("parents"))&&(n=n.reverse()),n=re(n),t?n.filter(t):n}}),bn({parentsUntil:function(e,t){return wn(e,"parentNode",t)},nextUntil:function(e,t){return Cn(e,"nextSibling",1,t).slice(1)},prevUntil:function(e,t){return Cn(e,"previousSibling",1,t).slice(1)}},function(r,o){re.fn[r]=function(t,e){var n=[];return this.each(function(){var e=o.call(n,this,t,n);e&&(re.isArray(e)?n.push.apply(n,e):n.push(e))}),1<this.length&&(n=re.unique(n),0!==r.indexOf("parents")&&"prevUntil"!==r||(n=n.reverse())),n=re(n),e?n.filter(e):n}}),re.fn.is=function(e){return!!e&&0<this.filter(e).length},re.fn.init.prototype=re.fn,re.overrideDefaults=function(n){var r,o=function(e,t){return r=r||n(),0===arguments.length&&(e=r.element),t=t||r.context,new o.fn.init(e,t)};return re.extend(o,this),o},g=function(n,r,e){bn(e,function(e,t){n[e]=n[e]||{},n[e][r]=t})},ee.ie&&ee.ie<8&&(g(gn,"get",{maxlength:function(e){e=e.maxLength;if(2147483647!==e)return e},size:function(e){e=e.size;if(20!==e)return e},class:function(e){return e.className},style:function(e){e=e.style.cssText;if(0!==e.length)return e}}),g(gn,"set",{class:function(e,t){e.className=t},style:function(e,t){e.style.cssText=t}})),ee.ie&&ee.ie<9&&(mn.float="styleFloat",g(hn,"set",{opacity:function(e,t){e=e.style;null===t||""===t?e.removeAttribute("filter"):(e.zoom=1,e.filter="alpha(opacity="+100*t+")")}})),re.attrHooks=gn,re.cssHooks=hn,t=function(n){var r,o=!1;return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o||(o=!0,r=n.apply(null,e)),r}},kn=function(e,t){for(var n,r=0;r<e.length;r++)if((n=e[r]).test(t))return n},Tn=function(e,t){var n=kn(e,t);return n?En((e=function(e){return Number(t.replace(n,"$"+e))})(1),e(2)):{major:0,minor:0}},En=function(e,t){return{major:e,minor:t}},Rn=function(e,t){t=String(t).toLowerCase();return 0===e.length?Nn():Tn(e,t)},_n=Nn=function(){return En(0,0)},Dn="Chrome",Pn="IE",On="Opera",Bn="Firefox",Mn="Safari",In=function(e,t){return function(){return t===e}},Fn=function(){return Ln({current:void 0,version:_n()})},Hn=Ln=function(e){var t=e.current;return{current:t,version:e.version,isEdge:In(An,t),isChrome:In(Dn,t),isIE:In(Pn,t),isOpera:In(On,t),isFirefox:In(Bn,t),isSafari:In(Mn,t)}},Z(An="Edge"),Z(Dn),Z(Pn),Z(On),Z(Bn),Z(Mn),Un="iOS",Wn="Android",jn="Linux",Vn="OSX",qn="Solaris",$n="FreeBSD",Yn=function(e,t){return function(){return t===e}},Kn=function(){return Xn({current:void 0,version:_n()})},Gn=Xn=function(e){var t=e.current;return{current:t,version:e.version,isWindows:Yn(zn,t),isiOS:Yn(Un,t),isAndroid:Yn(Wn,t),isOSX:Yn(Vn,t),isLinux:Yn(jn,t),isSolaris:Yn(qn,t),isFreeBSD:Yn($n,t)}},Z(zn="Windows"),Z(Un),Z(Wn),Z(jn),Z(Vn),Z(qn),Z($n),Jn=function(e,t,n){var r=e.isiOS()&&!0===/ipad/i.test(n),o=e.isiOS()&&!r,i=e.isAndroid()&&3===e.version.major,a=e.isAndroid()&&4===e.version.major,i=r||i||a&&!0===/mobile/i.test(n),a=e.isiOS()||e.isAndroid(),u=a&&!i,t=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(n);return{isiPad:Z(r),isiPhone:Z(o),isTablet:Z(i),isPhone:Z(u),isTouch:Z(a),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:Z(t)}},Zn=function(e,t){var n=String(t).toLowerCase();return fe(e,function(e){return e.search(n)})},Qn=function(e,n){return Zn(e,n).map(function(e){var t=Rn(e.versionRegexes,n);return{current:e.name,version:t}})},er=function(e,n){return Zn(e,n).map(function(e){var t=Rn(e.versionRegexes,n);return{current:e.name,version:t}})},tr=function(e,t){return-1!==e.indexOf(t)},nr=function(e){return e.replace(/^\s+|\s+$/g,"")},rr=function(e){return e.replace(/^\s+/g,"")},or=function(e){return e.replace(/\s+$/g,"")},e=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return tr(e,"edge/")&&tr(e,"chrome")&&tr(e,"safari")&&tr(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,p=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/],search:function(e){return tr(e,"chrome")&&!tr(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return tr(e,"msie")||tr(e,"trident")}},{name:"Opera",versionRegexes:[p,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:(u=function(t){return function(e){return tr(e,t)}})("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:u("firefox")},{name:"Safari",versionRegexes:[p,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(tr(e,"safari")||tr(e,"mobile/"))&&tr(e,"applewebkit")}}],xN=[{name:"Windows",search:u("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return tr(e,"iphone")||tr(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:u("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:u("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:u("linux"),versionRegexes:[]},{name:"Solaris",search:u("sunos"),versionRegexes:[]},{name:"FreeBSD",search:u("freebsd"),versionRegexes:[]}],ir={browsers:Z(e),oses:Z(xN)},ar=function(e){var t=ir.browsers(),n=ir.oses(),t=Qn(t,e).fold(Fn,Hn),n=er(n,e).fold(Kn,Gn);return{browser:t,os:n,deviceType:Jn(n,t,e)}},qT=t(function(){var e=J.navigator.userAgent;return ar(e)}),ur={detect:qT},U={fromHtml:function(e,t){t=(t||J.document).createElement("div");if(t.innerHTML=e,!t.hasChildNodes()||1<t.childNodes.length)throw J.console.error("HTML does not have a single root node",e),new Error("HTML must have a single root node");return sr(t.childNodes[0])},fromTag:function(e,t){t=(t||J.document).createElement(e);return sr(t)},fromText:function(e,t){t=(t||J.document).createTextNode(e);return sr(t)},fromDom:sr=function(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:Z(e)}},fromPoint:function(e,t,n){e=e.dom();return b.from(e.elementFromPoint(t,n)).map(sr)}},J.Node.ATTRIBUTE_NODE,J.Node.CDATA_SECTION_NODE,J.Node.COMMENT_NODE,h=J.Node.DOCUMENT_NODE,J.Node.DOCUMENT_TYPE_NODE,J.Node.DOCUMENT_FRAGMENT_NODE,Fv=J.Node.ELEMENT_NODE,d=J.Node.TEXT_NODE,J.Node.PROCESSING_INSTRUCTION_NODE,J.Node.ENTITY_REFERENCE_NODE,J.Node.ENTITY_NODE,J.Node.NOTATION_NODE,cr=function(e){return e.dom().nodeName.toLowerCase()},lr=function(e){return e.dom().nodeType},fr=(i=function(t){return function(e){return lr(e)===t}})(Fv),dr=i(d),mr=Object.keys,gr=Object.hasOwnProperty,hr=function(e,t){for(var n,r=mr(e),o=0,i=r.length;o<i;o++)t(e[n=r[o]],n,e)},pr=function(e,r){return vr(e,function(e,t,n){return{k:t,v:r(e,t,n)}})},vr=function(n,r){var o={};return hr(n,function(e,t){e=r(e,t,n);o[e.k]=e.v}),o},br=function(e,n){var r={},o={};return hr(e,function(e,t){(n(e,t)?r:o)[t]=e}),{t:r,f:o}},yr=function(e,t){return gr.call(e,t)},xr=function(e){return void 0!==e.style},wr=function(e){e=dr(e)?e.dom().parentNode:e.dom();return null!=e&&e.ownerDocument.body.contains(e)},Cr=function(e,t,n){if(!(L(n)||j(n)||q(n)))throw J.console.error("Invalid call to Attr.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")},Sr=function(e,t,n){Cr(e.dom(),t,n)},kr=function(e,t){var n=e.dom();hr(t,function(e,t){Cr(n,t,e)})},Tr=function(e,t){e=e.dom().getAttribute(t);return null===e?void 0:e},Nr=function(e,t){e=e.dom();return!(!e||!e.hasAttribute)&&e.hasAttribute(t)},Er=function(e,t){e.dom().removeAttribute(t)},Rr=function(e,t,n){if(!L(n))throw J.console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);xr(e)&&e.style.setProperty(t,n)},_r=function(e,t){var n=e.dom();hr(t,function(e,t){Rr(n,t,e)})},Ar=function(e,t){var n=e.dom(),r=J.window.getComputedStyle(n).getPropertyValue(t),e=""!==r||wr(e)?r:Dr(n,t);return null===e?void 0:e},Dr=function(e,t){return xr(e)?e.style.getPropertyValue(t):""},Pr=function(e,t){e=e.dom(),e=Dr(e,t);return b.from(e).filter(function(e){return 0<e.length})},r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(){for(var n,r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];if(t.length!==r.length)throw new Error('Wrong number of arguments to struct. Expected "['+t.length+']", got '+r.length+" arguments");return n={},R(t,function(e,t){n[e]=Z(r[t])}),n}},Or=function(e,t){for(var n=[],r=function(e){return n.push(e),t(e)},o=t(e);(o=o.bind(r)).isSome(););return n},Br=function(){return Ae.getOrDie("Node")},Mr=function(e,t,n){return 0!=(e.compareDocumentPosition(t)&n)},Ir=function(e,t){return Mr(e,t,Br().DOCUMENT_POSITION_CONTAINED_BY)},Lr=Fv,Fr=h,Hr=function(e,t){e=e.dom();if(e.nodeType!==Lr)return!1;if(void 0!==e.matches)return e.matches(t);if(void 0!==e.msMatchesSelector)return e.msMatchesSelector(t);if(void 0!==e.webkitMatchesSelector)return e.webkitMatchesSelector(t);if(void 0!==e.mozMatchesSelector)return e.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},zr=function(e){return e.nodeType!==Lr&&e.nodeType!==Fr||0===e.childElementCount},Ur=function(e,t){t=void 0===t?J.document:t.dom();return zr(t)?[]:Q(t.querySelectorAll(e),U.fromDom)},Wr=function(e,t){t=void 0===t?J.document:t.dom();return zr(t)?b.none():b.from(t.querySelector(e)).map(U.fromDom)},a=function(e,t){return e.dom()===t.dom()},g=function(e,t){e=e.dom(),t=t.dom();return e!==t&&e.contains(t)},p=function(e,t){return Ir(e.dom(),t.dom())},u=ur.detect().browser,jr=u.isIE()?p:g,Vr=function(e){return U.fromDom(e.dom().ownerDocument)},qr=function(e){return U.fromDom(e.dom().ownerDocument.documentElement)},$r=function(e){e=e.dom().ownerDocument.defaultView;return U.fromDom(e)},Yr=function(e){e=e.dom();return b.from(e.parentNode).map(U.fromDom)},Xr=function(e,t){for(var n,r,o=V(t)?t:Z(!1),i=e.dom(),a=[];null!==i.parentNode&&void 0!==i.parentNode&&(n=i.parentNode,r=U.fromDom(n),a.push(r),!0!==o(r));)i=n;return a},Kr=function(e){e=e.dom();return b.from(e.previousSibling).map(U.fromDom)},Gr=function(e){e=e.dom();return b.from(e.nextSibling).map(U.fromDom)},Jr=function(e){return ye(Or(e,Kr))},Zr=function(e){return Or(e,Gr)},Qr=function(e){e=e.dom();return Q(e.childNodes,U.fromDom)},eo=function(e,t){e=e.dom().childNodes;return b.from(e[t]).map(U.fromDom)},to=function(e){return eo(e,0)},no=function(e){return eo(e,e.dom().childNodes.length-1)},ro=function(e){return e.dom().childNodes.length},r("element","offset"),oo=ur.detect().browser,io=function(e){return fe(e,fr)},ao=function(e){return oo.isFirefox()&&"table"===cr(e)?io(Qr(e)).filter(function(e){return"caption"===cr(e)}).bind(function(r){return io(Zr(r)).map(function(e){var e=e.dom().offsetTop,t=r.dom().offsetTop,n=r.dom().offsetHeight;return e<=t?-n:0})}).getOr(0):0},uo=function(e,t,n){var r,o,i=0,a=0,u=e.ownerDocument;if(n=n||e,t){if(n===e&&t.getBoundingClientRect&&"static"===Ar(U.fromDom(e),"position"))return{x:i=(o=t.getBoundingClientRect()).left+(u.documentElement.scrollLeft||e.scrollLeft)-u.documentElement.clientLeft,y:a=o.top+(u.documentElement.scrollTop||e.scrollTop)-u.documentElement.clientTop};for(r=t;r&&r!==n&&r.nodeType;)i+=r.offsetLeft||0,a+=r.offsetTop||0,r=r.offsetParent;for(r=t.parentNode;r&&r!==n&&r.nodeType;)i-=r.scrollLeft||0,a-=r.scrollTop||0,r=r.parentNode;a+=ao(U.fromDom(t))}return{x:i,y:a}},co=so=function(e){var n=b.none(),t=[],r=function(n){return so(function(t){o(function(e){t(n(e))})})},o=function(e){i()?u(e):t.push(e)},i=function(){return n.isSome()},a=function(e){R(e,u)},u=function(t){n.each(function(e){J.setTimeout(function(){t(e)},0)})};return e(function(e){n=b.some(e),a(t),t=[]}),{get:o,map:r,isReady:i}},lo=function(r){return function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e=this,J.setTimeout(function(){r.apply(e,t)},0)}},mo={nu:fo=function(t){var e=function(e){t(lo(e))},n=function(){return co(e)};return{map:function(n){return fo(function(t){e(function(e){e=n(e);t(e)})})},bind:function(n){return fo(function(t){e(function(e){n(e).get(t)})})},anonBind:function(n){return fo(function(t){e(function(e){n.get(t)})})},toLazy:n,toCached:function(){var t=null;return fo(function(e){(t=null===t?n():t).get(e)})},get:e}},pure:function(t){return fo(function(e){e(t)})}},go=function(a,e){return e(function(n){var r=[],o=0,i=function(t){return function(e){r[t]=e,++o>=a.length&&n(r)}};0===a.length?n([]):R(a,function(e,t){e.get(i(t))})})},ho=function(e){return go(e,mo.nu)},bo={value:po=function(n){var e=function(e){return po(n)},t=function(e){return po(n)},r=function(e){return po(e(n))},o=function(e){return po(n)},i=function(e){e(n)},a=function(e){return e(n)},u=function(e,t){return t(n)},s=function(e){return e(n)},c=function(e){return e(n)},l=function(){return b.some(n)};return{is:function(e){return n===e},isValue:E,isError:N,getOr:Z(n),getOrThunk:Z(n),getOrDie:Z(n),or:e,orThunk:t,fold:u,map:r,mapError:o,each:i,bind:a,exists:s,forall:c,toOption:l}},error:vo=function(n){return{is:N,isValue:N,isError:E,getOr:ae,getOrThunk:function(e){return e()},getOrDie:function(){return k(String(n))()},or:function(e){return e},orThunk:function(e){return e()},fold:function(e,t){return e(n)},map:function(e){return vo(n)},mapError:function(e){return vo(e(n))},each:C,bind:function(e){return vo(n)},exists:N,forall:E,toOption:b.none}}},e=["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"],xN=["area","base","basefont","br","col","frame","hr","img","input","isindex","link","meta","param","embed","source","wbr","track"],t=["td","th"],qT=["thead","tbody","tfoot"],i=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],d=["li","dd","dt"],Fv=["ul","ol","dl"],h=["pre","script","textarea","style"],yo=(u=function(t){var n;return function(e){return(n=n||we(t,Z(!0))).hasOwnProperty(cr(e))}})(["h1","h2","h3","h4","h5","h6"]),xo=u(e),wo=function(e){return fr(e)&&!xo(e)},Co=function(e){return fr(e)&&"br"===cr(e)},So=u(i),ko=u(Fv),To=u(d),No=u(xN),Eo=u(qT),Ro=u(t),_o=u(h),Ao=(p=function(t){return function(e){return!!e&&e.nodeType===t}})(1),g=function(r,e){var o=e.toLowerCase().split(" ");return function(e){var t,n;if(Ao(e))for(t=0;t<o.length;t++)if(((n=e.ownerDocument.defaultView.getComputedStyle(e,null))?n.getPropertyValue(r):null)===o[t])return!0;return!1}},e=function(t,n){return function(e){return Ao(e)&&e[t]===n}},i=function(t,e){return function(e){return Ao(e)&&e.hasAttribute(t)}},Fv=function(t,n){return function(e){return Ao(e)&&e.getAttribute(t)===n}},d=function(e){return Ao(e)&&e.hasAttribute("data-mce-bogus")},xN=function(e){return Ao(e)&&"all"===e.getAttribute("data-mce-bogus")},qT=function(e){return Ao(e)&&"TABLE"===e.tagName},t=function(t){return function(e){if(Ao(e)){if(e.contentEditable===t)return!0;if(e.getAttribute("data-mce-contenteditable")===t)return!0}return!1}},u=p(3),h=p(8),mN=p(9),p=p(11),kv=(pN=function(e){var r=e.toLowerCase().split(" ");return function(e){var t,n;if(e&&e.nodeType)for(n=e.nodeName.toLowerCase(),t=0;t<r.length;t++)if(n===r[t])return!0;return!1}})("br"),iN=t("true"),t=t("false"),oe={isText:u,isElement:Ao,isComment:h,isDocument:mN,isDocumentFragment:p,isBr:kv,isContentEditableTrue:iN,isContentEditableFalse:t,matchNodeNames:pN,hasPropValue:e,hasAttribute:i,hasAttributeValue:Fv,matchStyleValues:g,isBogus:d,isBogusAll:xN,isTable:qT},Do=function(e){var t=e.previousSibling&&"SPAN"===e.previousSibling.nodeName,e=e.nextSibling&&"SPAN"===e.nextSibling.nodeName;return t&&e},Po=function(e){return e&&"SPAN"===e.tagName&&"bookmark"===e.getAttribute("data-mce-type")},Bo=Oo=function(e,t){var n,r,o=t.childNodes;if(!oe.isElement(t)||!Po(t)){for(n=o.length-1;0<=n;n--)Oo(e,o[n]);if(!1===oe.isDocument(t)){if(oe.isText(t)&&0<t.nodeValue.length){if(r=ne.trim(t.nodeValue).length,e.isBlock(t.parentNode)||0<r)return;if(0===r&&Do(t))return}else if(oe.isElement(t)&&(1===(o=t.childNodes).length&&Po(o[0])&&t.parentNode.insertBefore(o[0],t),o.length||No(U.fromDom(t))))return;e.remove(t)}return t}},Mo=ne.makeMap,Ho=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,zo=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Uo=/[<>&\"\']/g,Wo=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,jo={128:"",130:"",131:"",132:"",133:"",134:"",135:"",136:"",137:"",138:"",139:"",140:"",142:"",145:"",146:"",147:"",148:"",149:"",150:"",151:"",152:"",153:"",154:"",155:"",156:"",158:"",159:""},Lo={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},Fo={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},Vo=function(e){var t=U.fromTag("div").dom();return t.innerHTML=e,t.textContent||t.innerText||e},Io=(qo=function(e,t){var n,r,o,i={};if(e){for(e=e.split(","),t=t||10,n=0;n<e.length;n+=2)r=String.fromCharCode(parseInt(e[n],t)),Lo[r]||(o="&"+e[n+1]+";",i[r]=o,i[o]=r);return i}})("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),Ko={encodeRaw:$o=function(e,t){return e.replace(t?Ho:zo,function(e){return Lo[e]||e})},encodeAllRaw:function(e){return(""+e).replace(Uo,function(e){return Lo[e]||e})},encodeNumeric:Yo=function(e,t){return e.replace(t?Ho:zo,function(e){return 1<e.length?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":Lo[e]||"&#"+e.charCodeAt(0)+";"})},encodeNamed:Xo=function(e,t,n){return n=n||Io,e.replace(t?Ho:zo,function(e){return Lo[e]||n[e]||e})},getEncodeFunc:function(e,t){var n=qo(t)||Io,r=function(e,t){return e.replace(t?Ho:zo,function(e){return void 0!==Lo[e]?Lo[e]:void 0!==n[e]?n[e]:1<e.length?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":"&#"+e.charCodeAt(0)+";"})},o=function(e,t){return Xo(e,t,n)},e=Mo(e.replace(/\+/g,","));return e.named&&e.numeric?r:e.named?t?o:Xo:e.numeric?Yo:$o},decode:function(e){return e.replace(Wo,function(e,t){return t?65535<(t="x"===t.charAt(0).toLowerCase()?parseInt(t.substr(1),16):parseInt(t,10))?(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t))):jo[t]||String.fromCharCode(t):Fo[e]||Io[e]||Vo(e)})}},Go={},Jo={},Zo=ne.makeMap,Qo=ne.each,ei=ne.extend,ti=ne.explode,ni=ne.inArray,ri=function(e,t){return(e=ne.trim(e))?e.split(t||" "):[]},oi=function(e){var a,t,n,r,u={},o=function(e,t,n){var r,o,i=function(e,t){for(var n={},r=0,o=e.length;r<o;r++)n[e[r]]=t||{};return n};for(t=t||"","string"==typeof(n=n||[])&&(n=ri(n)),r=(e=ri(e)).length;r--;)o={attributes:i(o=ri([a,t].join(" "))),attributesOrder:o,children:i(n,Jo)},u[e[r]]=o},i=function(e,t){var n,r,o,i=(e=ri(e)).length;for(t=ri(t);i--;)for(n=u[e[i]],r=0,o=t.length;r<o;r++)n.attributes[t[r]]={},n.attributesOrder.push(t[r])};return Go[e]||(a="id accesskey class dir lang style tabindex title role",t="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",n="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==e&&(a+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",t+=" article aside details dialog figure main header footer hgroup section nav",n+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),"html5-strict"!==e&&(a+=" xml:lang",n=[n,"acronym applet basefont big font strike tt"].join(" "),Qo(ri("acronym applet basefont big font strike tt"),function(e){o(e,"",n)}),t=[t,"center dir isindex noframes"].join(" "),r=[t,n].join(" "),Qo(ri("center dir isindex noframes"),function(e){o(e,"",r)})),r=r||[t,n].join(" "),o("html","manifest","head body"),o("head","","base command link meta noscript script style title"),o("title hr noscript br"),o("base","href target"),o("link","href rel media hreflang type sizes hreflang"),o("meta","name http-equiv content charset"),o("style","media type scoped"),o("script","src async defer type charset"),o("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",r),o("address dt dd div caption","",r),o("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",n),o("blockquote","cite",r),o("ol","reversed start type","li"),o("ul","","li"),o("li","value",r),o("dl","","dt dd"),o("a","href target rel media hreflang type",n),o("q","cite",n),o("ins del","cite datetime",r),o("img","src sizes srcset alt usemap ismap width height"),o("iframe","src name width height",r),o("embed","src type width height"),o("object","data type typemustmatch name usemap form width height",[r,"param"].join(" ")),o("param","name value"),o("map","name",[r,"area"].join(" ")),o("area","alt coords shape href target rel media hreflang type"),o("table","border","caption colgroup thead tfoot tbody tr"+("html4"===e?" col":"")),o("colgroup","span","col"),o("col","span"),o("tbody thead tfoot","","tr"),o("tr","","td th"),o("td","colspan rowspan headers",r),o("th","colspan rowspan headers scope abbr",r),o("form","accept-charset action autocomplete enctype method name novalidate target",r),o("fieldset","disabled form name",[r,"legend"].join(" ")),o("label","form for",n),o("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),o("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===e?r:n),o("select","disabled form multiple name required size","option optgroup"),o("optgroup","disabled label","option"),o("option","disabled label selected value"),o("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),o("menu","type label",[r,"li"].join(" ")),o("noscript","",r),"html4"!==e&&(o("wbr"),o("ruby","",[n,"rt rp"].join(" ")),o("figcaption","",r),o("mark rt rp summary bdi","",n),o("canvas","width height",r),o("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[r,"track source"].join(" ")),o("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[r,"track source"].join(" ")),o("picture","","img source"),o("source","src srcset type media sizes"),o("track","kind src srclang label default"),o("datalist","",[n,"option"].join(" ")),o("article section nav aside main header footer","",r),o("hgroup","","h1 h2 h3 h4 h5 h6"),o("figure","",[r,"figcaption"].join(" ")),o("time","datetime",n),o("dialog","open",r),o("command","type label icon disabled checked radiogroup command"),o("output","for form name",n),o("progress","value max",n),o("meter","value min max low high optimum",n),o("details","open",[r,"summary"].join(" ")),o("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!==e&&(i("script","language xml:space"),i("style","xml:space"),i("object","declare classid code codebase codetype archive standby align border hspace vspace"),i("embed","align name hspace vspace"),i("param","valuetype type"),i("a","charset name rev shape coords"),i("br","clear"),i("applet","codebase archive code object alt name width height align hspace vspace"),i("img","name longdesc align border hspace vspace"),i("iframe","longdesc frameborder marginwidth marginheight scrolling align"),i("font basefont","size color face"),i("input","usemap align"),i("select","onchange"),i("textarea"),i("h1 h2 h3 h4 h5 h6 div p legend caption","align"),i("ul","type compact"),i("li","type"),i("ol dl menu dir","compact"),i("pre","width xml:space"),i("hr","align noshade size width"),i("isindex","prompt"),i("table","summary width frame rules cellspacing cellpadding align bgcolor"),i("col","width align char charoff valign"),i("colgroup","width align char charoff valign"),i("thead","align char charoff valign"),i("tr","align char charoff valign bgcolor"),i("th","axis align char charoff valign nowrap bgcolor width height"),i("form","accept"),i("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),i("tfoot","align char charoff valign"),i("tbody","align char charoff valign"),i("area","nohref"),i("body","background bgcolor text link vlink alink")),"html4"!==e&&(i("input button select textarea","autofocus"),i("input textarea","placeholder"),i("a","download"),i("link script img","crossorigin"),i("iframe","sandbox seamless allowfullscreen")),Qo(ri("a form meter progress dfn"),function(e){u[e]&&delete u[e].children[e]}),delete u.caption.children.table,delete u.script,Go[e]=u)},ii=function(e,n){var r;return e&&(r={},Qo(e="string"==typeof e?{"*":e}:e,function(e,t){r[t]=r[t.toUpperCase()]=("map"===n?Zo:ti)(e,/[, ]/)})),r},ai=function(e,t,n,r){function o(e){return 1<(e=parseInt(e,10).toString(16)).length?e:"0"+e}return"#"+o(t)+o(n)+o(r)},ui=ne.each,si=ne.grep,ci=ee.ie,li=/^([a-z0-9],?)+$/i,fi=/^[ \t\r\n]*$/,di=function(n,r,o){var e={},i=r.keep_values;return e={style:{set:function(e,t){null!==t&&"object"==typeof t?e.css(t):(i&&e.attr("data-mce-style",t),e.attr("style",t))},get:function(e){var t=e.attr("data-mce-style")||e.attr("style");return n.serialize(n.parse(t),e[0].nodeName)}}},i&&(e.href=e.src={set:function(e,t,n){r.url_converter&&(t=r.url_converter.call(r.url_converter_scope||o(),t,n,e[0])),e.attr("data-mce-"+n,t).attr(n,t)},get:function(e,t){return e.attr("data-mce-"+t)||e.attr(t)}}),e},mi=function(e,t){var n=t.attr("style"),e=e.serialize(e.parse(n),t[0].nodeName);t.attr("data-mce-style",e=e||null)},gi=function(e,t){var n,r,o=0;if(e)for(n=e.nodeType,e=e.previousSibling;e;e=e.previousSibling)r=e.nodeType,(!t||3!==r||r!==n&&e.nodeValue.length)&&(o++,n=r);return o},(u=LN=LN||{}).DOM=u(J.document),u.nodeIndex=gi,hi=(s=LN).DOM,pi=ne.each,vi=ne.grep,bi=function(e){return"function"==typeof e},(yi=function(){var u={},o=[],s={},c=[],l=0,f=function(e,t,n){var r=hi,o=function(){r.remove(a),u&&(u.onreadystatechange=u.onload=u=null),t()},i=function(){bi(n)?n():"undefined"!=typeof console&&console.log&&console.log("Failed to load script: "+e)},a=r.uniqueId(),u=J.document.createElement("script");u.id=a,u.type="text/javascript",u.src=ne._addCacheSuffix(e),u.onload=o,u.onerror=i,(J.document.getElementsByTagName("head")[0]||J.document.body).appendChild(u)};this.isDone=function(e){return 2===u[e]},this.markDone=function(e){u[e]=2},this.add=this.load=function(e,t,n,r){void 0===u[e]&&(o.push(e),u[e]=0),t&&(s[e]||(s[e]=[]),s[e].push({success:t,failure:r,scope:n||this}))},this.remove=function(e){delete u[e],delete s[e]},this.loadQueue=function(e,t,n){this.loadScripts(o,e,t,n)},this.loadScripts=function(t,e,n,r){var o,i=[],a=function(t,e){pi(s[e],function(e){bi(e[t])&&e[t].call(e.scope)}),s[e]=void 0};c.push({success:e,failure:r,scope:n||this}),(o=function(){var e=vi(t);t.length=0,pi(e,function(e){2===u[e]?a("success",e):3===u[e]?a("failure",e):1!==u[e]&&(u[e]=1,l++,f(e,function(){u[e]=2,l--,a("success",e),o()},function(){u[e]=3,l--,i.push(e),a("failure",e),o()}))}),l||(e=c.slice(0),c.length=0,pi(e,function(e){0===i.length?bi(e.success)&&e.success.call(e.scope):bi(e.failure)&&e.failure.call(e.scope,i)}))})()}}).ScriptLoader=new yi,xi=ne.each,(h=FN=FN||{}).PluginManager=h(),h.ThemeManager=h(),wi=function(t,n){Yr(t).each(function(e){e.dom().insertBefore(n.dom(),t.dom())})},Ci=function(e,t){Gr(e).fold(function(){Yr(e).each(function(e){ki(e,t)})},function(e){wi(e,t)})},Si=function(t,n){to(t).fold(function(){ki(t,n)},function(e){t.dom().insertBefore(n.dom(),e.dom())})},ki=function(e,t){e.dom().appendChild(t.dom())},Ti=function(e,t){wi(e,t),ki(t,e)},Ni=function(t,e){R(e,function(e){wi(t,e)})},Ei=function(t,e){R(e,function(e){ki(t,e)})},Ri=function(e){e.dom().textContent="",R(Qr(e),function(e){_i(e)})},_i=function(e){e=e.dom();null!==e.parentNode&&e.parentNode.removeChild(e)},Ai=function(e){var t=Qr(e);0<t.length&&Ni(e,t),_i(e)},Di=function(n,r){var o=null;return{cancel:function(){null!==o&&(J.clearTimeout(o),o=null)},throttle:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];null===o&&(o=J.setTimeout(function(){n.apply(null,e),o=null},r))}}},Pi=function(n,r){var o=null;return{cancel:function(){null!==o&&(J.clearTimeout(o),o=null)},throttle:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];null!==o&&J.clearTimeout(o),o=J.setTimeout(function(){n.apply(null,e),o=null},r)}}},Oi=function(e){var t=e,e=function(){return t};return{get:e,set:function(e){t=e},clone:function(){return Oi(t)}}},Bi=function(e,t){e=Tr(e,t);return void 0===e||""===e?[]:e.split(" ")},Mi=function(e,t,n){n=Bi(e,t).concat([n]);return Sr(e,t,n.join(" ")),!0},Ii=function(e,t,n){var r=_(Bi(e,t),function(e){return e!==n});return 0<r.length?Sr(e,t,r.join(" ")):Er(e,t),!1},Li=function(e){return void 0!==e.dom().classList},Fi=function(e){return Bi(e,"class")},Hi=function(e,t){return Mi(e,"class",t)},zi=function(e,t){return Ii(e,"class",t)},Ui=function(e,t){Li(e)?e.dom().classList.add(t):Hi(e,t)},Wi=function(e){0===(Li(e)?e.dom().classList:Fi(e)).length&&Er(e,"class")},ji=function(e,t){Li(e)?e.dom().classList.remove(t):zi(e,t),Wi(e)},Vi=function(e,t){return Li(e)&&e.dom().classList.contains(t)},qi=function(e,t){var n=[];return R(Qr(e),function(e){n=(n=t(e)?n.concat([e]):n).concat(qi(e,t))}),n},$i=function(e,t){return Ur(t,e)},Yi=function(e,t,n){for(var r,o=e.dom(),i=V(n)?n:Z(!1);o.parentNode;){if(o=o.parentNode,t(r=U.fromDom(o)))return b.some(r);if(i(r))break}return b.none()},Xi=function(e,t,n){return HN(function(e){return t(e)},Yi,e,t,n)},Ki=function(e,t,n){return Yi(e,function(e){return Hr(e,t)},n)},Gi=function(e,t){return Wr(t,e)},Ji=function(e,t,n){return HN(Hr,Ki,e,t,n)},Zi=Z("mce-annotation"),Qi=Z("data-mce-annotation"),ea=Z("data-mce-annotation-uid"),ta=function(r,e){var t=r.selection.getRng(),n=U.fromDom(t.startContainer),o=U.fromDom(r.getBody()),e=e.fold(function(){return"."+Zi()},function(e){return"["+Qi()+'="'+e+'"]'}),t=eo(n,t.startOffset).getOr(n),n=Ji(t,e,function(e){return a(e,o)}),i=function(e,t){return Nr(e,t)?b.some(Tr(e,t)):b.none()};return n.bind(function(e){return i(e,""+ea()).bind(function(n){return i(e,""+Qi()).map(function(e){var t=ra(r,n);return{uid:n,name:e,elements:t}})})})},na=function(e){return fr(e)&&Vi(e,Zi())},ra=function(e,t){e=U.fromDom(e.getBody());return $i(e,"["+ea()+'="'+t+'"]')},oa=function(e,t){var e=U.fromDom(e.getBody()),e=$i(e,"["+Qi()+'="'+t+'"]'),r={};return R(e,function(e){var t=Tr(e,ea()),n=r.hasOwnProperty(t)?r[t]:[];r[t]=n.concat([e])}),r},ia=function(t,e){var r=Oi({}),o=function(){return{listeners:[],previous:Oi(b.none())}},i=function(e,t){n(e,function(e){return t(e),e})},n=function(e,t){var n=r.get(),t=t(n.hasOwnProperty(e)?n[e]:o());n[e]=t,r.set(n)},a=function(t,n,r){i(t,function(e){R(e.listeners,function(e){return e(!0,t,{uid:n,nodes:Q(r,function(e){return e.dom()})})})})},u=function(t){i(t,function(e){R(e.listeners,function(e){return e(!1,t)})})},s=Pi(function(){var e=r.get(),e=Ce(mr(e));R(e,function(e){n(e,function(r){var o=r.previous.get();return ta(t,b.some(e)).fold(function(){o.isSome()&&(u(e),r.previous.set(b.none()))},function(e){var t=e.uid,n=e.name,e=e.elements;o.is(t)||(a(n,t,e),r.previous.set(b.some(t)))}),{previous:r.previous,listeners:r.listeners}})})},30);return t.on("remove",function(){s.cancel()}),t.on("nodeChange",function(){s.throttle()}),{addListener:function(e,t){n(e,function(e){return{previous:e.previous,listeners:e.listeners.concat([t])}})}}},aa=function(e,n){e.on("init",function(){e.serializer.addNodeFilter("span",function(e){R(e,function(t){b.from(t.attributes.map[Qi()]).bind(n.lookup).each(function(e){!1===e.persistent&&t.unwrap()})})})})},ua=function(){var n={};return{register:function(e,t){n[e]={name:e,settings:t}},lookup:function(e){return n.hasOwnProperty(e)?b.from(n[e]).map(function(e){return e.settings}):b.none()}}},sa=0,ca=function(e){var t=(new Date).getTime();return e+"_"+Math.floor(1e9*Math.random())+ ++sa+String(t)},la=function(t,e){R(e,function(e){Ui(t,e)})},fa=function(e,t){return U.fromDom(e.dom().cloneNode(t))},da=function(e){return fa(e,!1)},ma=function(e){return fa(e,!0)},ga=function(e,t){t=(t||J.document).createElement("div");return t.innerHTML=e,Qr(U.fromDom(t))},ha=function(e){return e.dom().innerHTML},pa=function(e,t){var n=Vr(e).dom(),r=U.fromDom(n.createDocumentFragment()),t=ga(t,n);Ei(r,t),Ri(e),ki(e,r)},l={isZwsp:function(e){return e===va},ZWSP:va="\ufeff",trim:function(e){return e.replace(new RegExp(va,"g"),"")}},ba=oe.isElement,ya=oe.isText,xa=function(e){return ya(e)&&(e=e.parentNode),ba(e)&&e.hasAttribute("data-mce-caret")},wa=function(e){return ya(e)&&l.isZwsp(e.data)},Ca=function(e){return xa(e)||wa(e)},Sa=function(e){return e.firstChild!==e.lastChild||!oe.isBr(e.firstChild)},ka=function(e,t){var n,r=e.ownerDocument.createTextNode(l.ZWSP),o=e.parentNode;if(t){if(n=e.previousSibling,ya(n)){if(Ca(n))return n;if(Aa(n))return n.splitText(n.data.length-1)}o.insertBefore(r,e)}else{if(n=e.nextSibling,ya(n)){if(Ca(n))return n;if(_a(n))return n.splitText(1),n}e.nextSibling?o.insertBefore(r,e.nextSibling):o.appendChild(r)}return r},Ta=function(e){var t=e.container();return!(!e||!oe.isText(t))&&(t.data.charAt(e.offset())===l.ZWSP||e.isAtStart()&&wa(t.previousSibling))},Na=function(e){var t=e.container();return!(!e||!oe.isText(t))&&(t.data.charAt(e.offset()-1)===l.ZWSP||e.isAtEnd()&&wa(t.nextSibling))},Ea=function(){var e=J.document.createElement("br");return e.setAttribute("data-mce-bogus","1"),e},Ra=function(e,t,n){var r,e=t.ownerDocument.createElement(e);return e.setAttribute("data-mce-caret",n?"before":"after"),e.setAttribute("data-mce-bogus","all"),e.appendChild(Ea()),r=t.parentNode,n?r.insertBefore(e,t):t.nextSibling?r.insertBefore(e,t.nextSibling):r.appendChild(e),e},_a=function(e){return ya(e)&&e.data[0]===l.ZWSP},Aa=function(e){return ya(e)&&e.data[e.data.length-1]===l.ZWSP},Da=function(e){e=e.getElementsByTagName("br"),e=e[e.length-1];oe.isBogus(e)&&e.parentNode.removeChild(e)},Pa=function(e){return e&&e.hasAttribute("data-mce-caret")?(Da(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("_moz_abspos"),e):null},Oa=function(e){return xa(e.startContainer)},Ba=oe.isContentEditableTrue,Ma=oe.isContentEditableFalse,Ia=oe.isBr,La=oe.isText,Fa=oe.matchNodeNames("script style textarea"),Ha=oe.matchNodeNames("img input textarea hr iframe video audio object"),za=oe.matchNodeNames("table"),Ua=Ca,Wa=function(e){return!Ua(e)&&(La(e)?!Fa(e.parentNode):Ha(e)||Ia(e)||za(e)||Va(e))},ja=function(e){return oe.isElement(e)&&"true"===e.getAttribute("unselectable")},Va=function(e){return!1===ja(e)&&Ma(e)},qa=function(e,t){for(e=e.parentNode;e&&e!==t;e=e.parentNode){if(Va(e))return!1;if(Ba(e))return!0}return!0},$a=function(e){return!!Va(e)&&!0!==le(Te(e.getElementsByTagName("*")),function(e,t){return e||Ba(t)},!1)},mN=function(e){return Ha(e)||$a(e)},Ya=function(e,t){return Wa(e)&&qa(e,t)},Xa=Math.round,Ka=function(e){return e?{left:Xa(e.left),top:Xa(e.top),bottom:Xa(e.bottom),right:Xa(e.right),width:Xa(e.width),height:Xa(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0}},Ga=function(e,t){return e=Ka(e),t||(e.left=e.left+e.width),e.right=e.left,e.width=0,e},Ja=function(e,t){return e.left===t.left&&e.top===t.top&&e.bottom===t.bottom&&e.right===t.right},Za=function(e,t,n){return 0<=e&&e<=Math.min(t.height,n.height)/2},Qa=function(e,t){return e.bottom-e.height/2<t.top||!(e.top>t.bottom)&&Za(t.top-e.bottom,e,t)},eu=function(e,t){return e.top>t.bottom||!(e.bottom<t.top)&&Za(t.bottom-e.top,e,t)},tu=function(e,t,n){return t>=e.left&&t<=e.right&&n>=e.top&&n<=e.bottom},nu=function(e,t){return t.left>e.left&&t.right<e.right?0:t.left<e.left?t.left-e.left:t.right-e.right},ru=function(e,t){return t.top>e.top&&t.bottom<e.bottom?0:t.top<e.top?t.top-e.top:t.bottom-e.bottom},ou=function(e,t){return{x:nu(e,t),y:ru(e,t)}},iu=function(e){var t=e.startContainer,n=e.startOffset;return t.hasChildNodes()&&e.endOffset===n+1?t.childNodes[n]:null},au=function(e,t){return 1===e.nodeType&&e.hasChildNodes()&&(t>=e.childNodes.length&&(t=e.childNodes.length-1),e=e.childNodes[t]),e},uu=new RegExp("[-----------------------------------------------------------------------------------------------------------------------------------]"),su=function(e){return"string"==typeof e&&768<=e.charCodeAt(0)&&uu.test(e)},cu=function(e,t){for(var n,r=[],o=0;o<e.length;o++){if(!(n=e[o]).isSome())return b.none();r.push(n.getOrDie())}return b.some(t.apply(null,r))},lu=[].slice,p=function(){for(var n,e=0;e<arguments.length;e++)e,0;return n=lu.call(arguments),function(e){for(var t=0;t<n.length;t++)if(!n[t](e))return!1;return!0}},fu=function(){for(var n,e=0;e<arguments.length;e++)e,0;return n=lu.call(arguments),function(e){for(var t=0;t<n.length;t++)if(n[t](e))return!0;return!1}},du=oe.isElement,kv=Wa,mu=oe.matchStyleValues("display","block table"),iN=oe.matchStyleValues("float","left right"),gu=p(du,kv,S(iN)),hu=S(oe.matchStyleValues("white-space","pre pre-line pre-wrap")),pu=oe.isText,vu=oe.isBr,bu=s.nodeIndex,yu=au,xu=function(e){return"createRange"in e?e.createRange():s.DOM.createRng()},wu=function(e){return e&&/[\r\n\t ]/.test(e)},Cu=function(e){return!!e.setStart&&!!e.setEnd},Su=function(e){var t=e.startContainer,n=e.startOffset;return!!(wu(e.toString())&&hu(t.parentNode)&&oe.isText(t)&&(e=t.data,wu(e[n-1])||wu(e[n+1])))},ku=function(e){var t=e.ownerDocument,n=xu(t),t=t.createTextNode(""),r=e.parentNode;return r.insertBefore(t,e),n.setStart(t,0),n.setEnd(t,1),e=Ka(n.getBoundingClientRect()),r.removeChild(t),e},Tu=function(e){var t=e.startContainer,n=e.endContainer,r=e.startOffset,o=e.endOffset;return t===n&&oe.isText(n)&&0===r&&1===o?((t=e.cloneRange()).setEndAfter(n),Eu(t)):null},Nu=function(e){return 0===e.left&&0===e.right&&0===e.top&&0===e.bottom},Eu=function(e){var t=e.getClientRects(),t=0<t.length?Ka(t[0]):Ka(e.getBoundingClientRect());return!Cu(e)&&vu(e)&&Nu(t)?ku(e):Nu(t)&&Cu(e)?Tu(e):t},Ru=function(e,t){e=Ga(e,t);return e.width=1,e.right=e.left+1,e},_u=function(e){var t,r=[],o=function(e){0===e.height||0<r.length&&Ja(e,r[r.length-1])||r.push(e)},n=function(e,t){var n=xu(e.ownerDocument);if(t<e.data.length){if(su(e.data[t]))return r;if(su(e.data[t-1])&&(n.setStart(e,t),n.setEnd(e,t+1),!Su(n)))return o(Ru(Eu(n),!1)),r}0<t&&(n.setStart(e,t-1),n.setEnd(e,t),Su(n)||o(Ru(Eu(n),!1))),t<e.data.length&&(n.setStart(e,t),n.setEnd(e,t+1),Su(n)||o(Ru(Eu(n),!0)))};if(pu(e.container()))n(e.container(),e.offset());else if(du(e.container()))if(e.isAtEnd())t=yu(e.container(),e.offset()),pu(t)&&n(t,t.data.length),gu(t)&&!vu(t)&&o(Ru(Eu(t),!1));else{if(t=yu(e.container(),e.offset()),pu(t)&&n(t,0),gu(t)&&e.isAtEnd())return o(Ru(Eu(t),!1)),r;n=yu(e.container(),e.offset()-1),!gu(n)||vu(n)||!mu(n)&&!mu(t)&&gu(t)||o(Ru(Eu(n),!1)),gu(t)&&o(Ru(Eu(t),!0))}return r},(hN=y=y||{}).fromRangeStart=function(e){return hN(e.startContainer,e.startOffset)},hN.fromRangeEnd=function(e){return hN(e.endContainer,e.endOffset)},hN.after=function(e){return hN(e.parentNode,bu(e)+1)},hN.before=function(e){return hN(e.parentNode,bu(e))},hN.isAbove=function(e,t){return cu([Se(t.getClientRects()),ke(e.getClientRects())],Qa).getOr(!1)},hN.isBelow=function(e,t){return cu([ke(t.getClientRects()),Se(e.getClientRects())],eu).getOr(!1)},hN.isAtStart=function(e){return!!e&&e.isAtStart()},hN.isAtEnd=function(e){return!!e&&e.isAtEnd()},hN.isTextPosition=function(e){return!!e&&oe.isText(e.container())},hN.isElementPosition=function(e){return!1===hN.isTextPosition(e)},T=y,Au=oe.isText,Du=oe.isBogus,Pu=s.nodeIndex,Ou=function(e){e=e.parentNode;return Du(e)?Ou(e):e},Bu=function(e){return e?m.reduce(e.childNodes,function(e,t){return Du(t)&&"BR"!==t.nodeName?e=e.concat(Bu(t)):e.push(t),e},[]):[]},Mu=function(e,t){for(;(e=e.previousSibling)&&Au(e);)t+=e.data.length;return t},Iu=function(t){return function(e){return t===e}},Lu=function(e){var r=Bu(Ou(e)),t=m.findIndex(r,Iu(e),e);return r=r.slice(0,t+1),t=m.reduce(r,function(e,t,n){return Au(t)&&Au(r[n-1])&&e++,e},0),r=m.filter(r,oe.matchNodeNames(e.nodeName)),m.findIndex(r,Iu(e),e)-t},Fu=function(e){var t=Au(e)?"text()":e.nodeName.toLowerCase();return t+"["+Lu(e)+"]"},Hu=function(e,t,n){var r=[];for(t=t.parentNode;t!==e&&(!n||!n(t));t=t.parentNode)r.push(t);return r},zu=function(e,t){var n,r,o=[],i=t.container(),t=t.offset();return Au(i)?n=Mu(i,t):(t>=(r=i.childNodes).length?(n="after",t=r.length-1):n="before",i=r[t]),o.push(Fu(i)),r=Hu(e,i),r=m.filter(r,S(oe.isBogus)),(o=o.concat(m.map(r,Fu))).reverse().join("/")+","+n},Uu=function(e,t,n){var r=Bu(e),r=m.filter(r,function(e,t){return!Au(e)||!Au(r[t-1])});return(r=m.filter(r,oe.matchNodeNames(t)))[n]},Wu=function(e,t){for(var n,r=e,o=0;Au(r);){if(n=r.data.length,o<=t&&t<=o+n){e=r,t-=o;break}if(!Au(r.nextSibling)){e=r,t=n;break}o+=n,r=r.nextSibling}return Au(e)&&t>e.data.length&&(t=e.data.length),T(e,t)},ju=function(e,t){var n;return t&&(t=(n=t.split(","))[0].split("/"),n=1<n.length?n[1]:"before",t=m.reduce(t,function(e,t){return(t=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(t))?("text()"===t[1]&&(t[1]="#text"),Uu(e,t[1],parseInt(t[2],10))):null},e))?Au(t)?Wu(t,parseInt(n,10)):(n="after"===n?Pu(t)+1:Pu(t),T(t.parentNode,n)):null},Vu=function(e,t){oe.isText(t)&&0===t.data.length&&e.remove(t)},qu=function(e,t,n){t.insertNode(n),Vu(e,n.previousSibling),Vu(e,n.nextSibling)},$u=function(t,e,n){var r=b.from(n.firstChild),o=b.from(n.lastChild);e.insertNode(n),r.each(function(e){return Vu(t,e.previousSibling)}),o.each(function(e){return Vu(t,e.nextSibling)})},Yu=function(e,t,n){(oe.isDocumentFragment(n)?$u:qu)(e,t,n)},Xu=oe.isContentEditableFalse,Ku=function(e,t,n){for(var r=e(t.data.slice(0,n)).length,o=t.previousSibling;o&&oe.isText(o);o=o.previousSibling)r+=e(o.data).length;return r},Gu=function(e,t,n,r,o){var i=r[o?"startContainer":"endContainer"],r=r[o?"startOffset":"endOffset"],a=[],o=0,u=e.getRoot();for(oe.isText(i)?a.push(n?Ku(t,i,r):r):(r>=(t=i.childNodes).length&&t.length&&(o=1,r=Math.max(0,t.length-1)),a.push(e.nodeIndex(t[r],n)+o));i&&i!==u;i=i.parentNode)a.push(e.nodeIndex(i,n));return a},Ju=function(e,t,n,r){var o=t.dom,i={};return i.start=Gu(o,e,n,r,!0),t.isCollapsed()||(i.end=Gu(o,e,n,r,!1)),i},Zu=function(e,t,n){var r=0;return ne.each(e.select(t),function(e){if("all"!==e.getAttribute("data-mce-bogus"))return e!==n&&void r++}),r},Qu=function(e,t){var n,r=t?"start":"end",o=e[r+"Container"],r=e[r+"Offset"];oe.isElement(o)&&"TR"===o.nodeName&&(o=(n=o.childNodes)[Math.min(t?r:r-1,n.length-1)])&&(r=t?0:o.childNodes.length,e["set"+(t?"Start":"End")](o,r))},es=function(e){return Qu(e,!0),Qu(e,!1),e},ts=function(e,t){return oe.isElement(e)&&(e=au(e,t),Xu(e))?e:Ca(e)&&(t=(e=oe.isText(e)&&xa(e)?e.parentNode:e).previousSibling,Xu(t)||(t=e.nextSibling,Xu(t)))?t:void 0},ns=function(e){return ts(e.startContainer,e.startOffset)||ts(e.endContainer,e.endOffset)},os=function(e){var t=e.getRng();return{start:zu(e.dom.getRoot(),T.fromRangeStart(t)),end:zu(e.dom.getRoot(),T.fromRangeEnd(t))}},is=function(e){return{rng:e.getRng()}},as=function(e,t,n){t={"data-mce-type":"bookmark",id:t,style:"overflow:hidden;line-height:0px"};return n?e.create("span",t,"&#xFEFF;"):e.create("span",t)},us=function(e,t){var n=e.dom,r=e.getRng(),o=n.uniqueId(),i=e.isCollapsed(),a=e.getNode(),u=a.nodeName;return"IMG"===u?{name:u,index:Zu(n,u,a)}:(u=es(r.cloneRange()),i||(u.collapse(!1),a=as(n,o+"_end",t),Yu(n,u,a)),(r=es(r)).collapse(!0),i=as(n,o+"_start",t),Yu(n,r,i),e.moveToBookmark({id:o,keep:1}),{id:o})},ss={getBookmark:function(e,t,n){return 2===t?rs(l.trim,n,e):3===t?os(e):t?is(e):us(e,!1)},getUndoBookmark:v(rs=function(e,t,n){var r=n.getNode(),o=r?r.nodeName:null,i=n.getRng();return Xu(r)||"IMG"===o?{name:o,index:Zu(n.dom,o,r)}:(r=ns(i))?{name:o=r.tagName,index:Zu(n.dom,o,r)}:Ju(e,n,t,i)},ae,!0),getPersistentBookmark:us},cs="_mce_caret",ls=function(e){return oe.isElement(e)&&e.id===cs},fs=function(e,t){for(;t&&t!==e;){if(t.id===cs)return t;t=t.parentNode}return null},ds=oe.isElement,ms=oe.isText,gs=function(e){var t=e.parentNode;t&&t.removeChild(e)},hs=function(e){try{return e.nodeValue}catch(e){return""}},ps=function(e,t){0===t.length?gs(e):e.nodeValue=t},vs=function(e){var t=l.trim(e);return{count:e.length-t.length,text:t}},bs=function(e,t){return Ss(e),t},ys=function(e,t){var n=vs(e.data.substr(0,t.offset())),r=vs(e.data.substr(t.offset())),r=n.text+r.text;return 0<r.length?(ps(e,r),T(e,t.offset()-n.count)):t},xs=function(e,t){var n=t.container(),r=X(Te(n.childNodes),e).map(function(e){return e<t.offset()?T(n,t.offset()-1):t}).getOr(t);return Ss(e),r},ws=function(e,t){return(ms(e)&&t.container()===e?ys:bs)(e,t)},Cs=function(e,t){return(t.container()===e.parentNode?xs:bs)(e,t)},ks={removeAndReposition:function(e,t){return(T.isTextPosition(t)?ws:Cs)(e,t)},remove:Ss=function(e){var t;ds(e)&&Ca(e)&&(Sa(e)?e.removeAttribute("data-mce-caret"):gs(e)),ms(e)&&(t=l.trim(hs(e)),ps(e,t))}},Ts=ur.detect().browser,Ns=oe.isContentEditableFalse,Es=function(e){return oe.isElement(e)&&/^(TD|TH)$/i.test(e.tagName)},Rs=function(e,t,n){var r,o,i=Ga(t.getBoundingClientRect(),n),e="BODY"===e.tagName?(o=e.ownerDocument.documentElement,r=e.scrollLeft||o.scrollLeft,e.scrollTop||o.scrollTop):(o=e.getBoundingClientRect(),r=e.scrollLeft-o.left,e.scrollTop-o.top);return i.left+=r,i.right+=r,i.top+=e,i.bottom+=e,i.width=1,0<(o=t.offsetWidth-t.clientWidth)&&(n&&(o*=-1),i.left+=o,i.right+=o),i},_s=function(e){for(var t,n,r,o=re("*[contentEditable=false]",e),i=0;i<o.length;i++)n=(t=o[i]).previousSibling,Aa(n)&&(1===(r=n.data).length?n.parentNode.removeChild(n):n.deleteData(r.length-1,1)),n=t.nextSibling,_a(n)&&(1===(r=n.data).length?n.parentNode.removeChild(n):n.deleteData(0,1))},As=function(r,o,e){var t,i,a=Oi(b.none()),u=function(){_s(r),i&&(ks.remove(i),i=null),a.get().each(function(e){re(e.caret).remove(),a.set(b.none())}),clearInterval(t)},s=function(){t=Fe.setInterval(function(){e()?re("div.mce-visual-caret",r).toggleClass("mce-visual-caret-hidden"):re("div.mce-visual-caret",r).addClass("mce-visual-caret-hidden")},500)};return{show:function(t,e){var n;return u(),Es(e)?null:(o(e)?(i=Ra("p",e,t),n=Rs(r,e,t),re(i).css("top",n.top),n=re('<div class="mce-visual-caret" data-mce-bogus="all"></div>').css(n).appendTo(r)[0],a.set(b.some({caret:n,element:e,before:t})),a.get().each(function(e){t&&re(e.caret).addClass("mce-visual-caret-before")}),s(),(n=e.ownerDocument.createRange()).setStart(i,0),n.setEnd(i,0)):(i=ka(e,t),n=e.ownerDocument.createRange(),Ns(i.nextSibling)?(n.setStart(i,0),n.setEnd(i,0)):(n.setStart(i,1),n.setEnd(i,1))),n)},hide:u,getCss:function(){return".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}"},reposition:function(){a.get().each(function(e){var t=Rs(r,e.element,e.before);re(e.caret).css(t)})},destroy:function(){return Fe.clearInterval(t)}}},Ds=function(){return Ts.isIE()||Ts.isEdge()||Ts.isFirefox()},Ps=function(e){return Ns(e)||oe.isTable(e)&&Ds()},Os=oe.isContentEditableFalse,Bs=oe.matchStyleValues("display","block table table-cell table-caption list-item"),Ms=Ca,Is=xa,Ls=oe.isElement,Fs=Wa,Hs=function(e){return 0<e},zs=function(e){return e<0},Us=function(e,t){for(var n;n=e(t);)if(!Is(n))return n;return null},Ws=function(e,t,n,r,o){var i=new BN(e,r);if(zs(t)){if((Os(e)||Is(e))&&n(e=Us(i.prev,!0)))return e;for(;e=Us(i.prev,o);)if(n(e))return e}if(Hs(t)){if((Os(e)||Is(e))&&n(e=Us(i.next,!0)))return e;for(;e=Us(i.next,o);)if(n(e))return e}return null},js=function(e,t){for(;e&&e!==t;){if(Bs(e))return e;e=e.parentNode}return null},Vs=function(e,t,n){return js(e.container(),n)===js(t.container(),n)},qs=function(e,t){var n;return t&&(n=t.container(),t=t.offset(),Ls(n))?n.childNodes[t+e]:null},$s=function(e,t,n){return js(t,e)===js(n,e)},Ys=function(e,t,n){for(var r,o=e?"previousSibling":"nextSibling";n&&n!==t;){if(r=n[o],Ms(r)&&(r=r[o]),Os(r)){if($s(t,r,n))return r;break}if(Fs(r))break;n=n.parentNode}return null},Xs=v(t=function(e,t){var n=t.ownerDocument.createRange();return e?(n.setStartBefore(t),n.setEndBefore(t)):(n.setStartAfter(t),n.setEndAfter(t)),n},!0),Ks=v(t,!1),Gs=function(e,t,n){var r,o,i=v(Ys,!0,t),t=v(Ys,!1,t),a=n.startContainer,u=n.startOffset;if(xa(a)){if("before"===(o=(a=Ls(a)?a:a.parentNode).getAttribute("data-mce-caret"))&&(r=a.nextSibling,Ps(r)))return Xs(r);if("after"===o&&(r=a.previousSibling,Ps(r)))return Ks(r)}if(n.collapsed&&oe.isText(a)){if(Ms(a)){if(1===e){if(r=t(a))return Xs(r);if(r=i(a))return Ks(r)}if(-1===e){if(r=i(a))return Ks(r);if(r=t(a))return Xs(r)}return n}if(Aa(a)&&u>=a.data.length-1)return 1===e&&(r=t(a))?Xs(r):n;if(_a(a)&&u<=1)return-1===e&&(r=i(a))?Ks(r):n;if(u===a.data.length)return(r=t(a))?Xs(r):n;if(0===u)return(r=i(a))?Ks(r):n}return n},Js=function(e,t){return b.from(qs(e?0:-1,t)).filter(Os)},Zs=function(e,t,n){t=Gs(e,t,n);return-1===e?y.fromRangeStart(t):y.fromRangeEnd(t)},Qs=function(e){return b.from(e.getNode()).map(U.fromDom)},ec=function(e){return b.from(e.getNode(!0)).map(U.fromDom)},tc=function(e,t){for(;t=e(t);)if(t.isVisible())return t;return t},nc=function(e,t){t=Vs(e,t);return!(t||!oe.isBr(e.getNode()))||t},(pN=rc=rc||{})[pN.Backwards=-1]="Backwards",pN[pN.Forwards=1]="Forwards",oc=oe.isContentEditableFalse,ic=oe.isText,ac=oe.isElement,uc=oe.isBr,sc=Wa,cc=mN,lc=Ya,fc=function(e,t){for(var n=[];e&&e!==t;)n.push(e),e=e.parentNode;return n},dc=function(e,t){return e.hasChildNodes()&&t<e.childNodes.length?e.childNodes[t]:null},mc=function(e,t){if(Hs(e)){if(sc(t.previousSibling)&&!ic(t.previousSibling))return T.before(t);if(ic(t))return T(t,0)}if(zs(e)){if(sc(t.nextSibling)&&!ic(t.nextSibling))return T.after(t);if(ic(t))return T(t,t.data.length)}return!zs(e)||uc(t)?T.before(t):T.after(t)},gc=function(e,t){var n=t.nextSibling;return n&&sc(n)?ic(n)?T(n,0):T.before(n):hc(rc.Forwards,T.after(t),e)},hc=function(e,t,n){var r,o,i,a,u;if(!ac(n)||!t)return null;if(t.isEqual(T.after(n))&&n.lastChild){if(a=T.after(n.lastChild),zs(e)&&sc(n.lastChild)&&ac(n.lastChild))return uc(n.lastChild)?T.before(n.lastChild):a}else a=t;if(t=a.container(),u=a.offset(),ic(t)){if(zs(e)&&0<u)return T(t,--u);if(Hs(e)&&u<t.length)return T(t,++u);r=t}else{if(zs(e)&&0<u&&(o=dc(t,u-1),sc(o)))return!cc(o)&&(i=Ws(o,e,lc,o))?ic(i)?T(i,i.data.length):T.after(i):ic(o)?T(o,o.data.length):T.before(o);if(Hs(e)&&u<t.childNodes.length&&(o=dc(t,u),sc(o)))return uc(o)?gc(n,o):!cc(o)&&(i=Ws(o,e,lc,o))?ic(i)?T(i,0):T.before(i):ic(o)?T(o,0):T.after(o);r=o||a.getNode()}return(Hs(e)&&a.isAtEnd()||zs(e)&&a.isAtStart())&&(r=Ws(r,e,Z(!0),n,!0),lc(r,n))?mc(e,r):(o=Ws(r,e,lc,n),!(u=m.last(_(fc(t,n),oc)))||o&&u.contains(o)?o?mc(e,o):null:Hs(e)?T.after(u):T.before(u))},pc=function(t){return{next:function(e){return hc(rc.Forwards,e,t)},prev:function(e){return hc(rc.Backwards,e,t)}}},vc=function(e,t,n){n=e?T.before(n):T.after(n);return kc(e,t,n)},bc=function(e){return oe.isBr(e)?T.before(e):T.after(e)},yc=function(e){return T.isTextPosition(e)?0===e.offset():Wa(e.getNode())},xc=function(e){var t;return T.isTextPosition(e)?(t=e.container(),e.offset()===t.data.length):Wa(e.getNode(!0))},wc=function(e,t){return!T.isTextPosition(e)&&!T.isTextPosition(t)&&e.getNode()===t.getNode(!0)},Cc=function(e){return!T.isTextPosition(e)&&oe.isBr(e.getNode())},Sc=function(e,t,n){return e?!wc(t,n)&&!Cc(t)&&xc(t)&&yc(n):!wc(n,t)&&yc(t)&&xc(n)},Tc=function(t,n,r){return kc(t,n,r).bind(function(e){return Vs(r,e,n)&&Sc(t,r,e)?kc(t,n,e):b.some(e)})},Nc=function(t,n,e,r){return Tc(t,n,e).bind(function(e){return r(e)?Nc(t,n,e,r):b.some(e)})},e=function(e,t){var n=e?t.firstChild:t.lastChild;return oe.isText(n)?b.some(T(n,e?0:n.data.length)):n?Wa(n)?b.some(e?T.before(n):bc(n)):vc(e,t,n):b.none()},i=v(kc=function(e,t,n){t=pc(t);return b.from(e?t.next(n):t.prev(n))},!0),Fv=v(kc,!1),c={fromPosition:kc,nextPosition:i,prevPosition:Fv,navigate:Tc,navigateIgnore:Nc,positionIn:e,firstPositionIn:v(e,!0),lastPositionIn:v(e,!1)},Ec=function(e){return"string"==typeof e.start},Rc=function(e){return e.hasOwnProperty("rng")},_c=function(e){return e.hasOwnProperty("id")},Ac=function(e){return e.hasOwnProperty("name")},Dc=function(e){return ne.isArray(e.start)},Pc=function(e,t){return!e.isBlock(t)||t.innerHTML||ee.ie||(t.innerHTML='<br data-mce-bogus="1" />'),t},Oc=function(e,t){var n=e.createRng(),r=ju(e.getRoot(),t.start);return n.setStart(r.container(),r.offset()),r=ju(e.getRoot(),t.end),n.setEnd(r.container(),r.offset()),n},Bc=function(e,t){var n=e.ownerDocument.createTextNode(l.ZWSP);e.appendChild(n),t.setStart(n,0),t.setEnd(n,0)},Mc=function(e){return!1===e.hasChildNodes()},Ic=function(e,t){return c.lastPositionIn(e).fold(function(){return!1},function(e){return t.setStart(e.container(),e.offset()),t.setEnd(e.container(),e.offset()),!0})},Lc=function(e,t,n){return!(!Mc(t)||!fs(e,t)||(Bc(t,n),0))},Fc=function(e,t,n,r){var o,i,a,u=n[t?"start":"end"],s=e.getRoot();if(u){for(n=u[0],i=s,o=u.length-1;1<=o;o--){if(a=i.childNodes,Lc(s,i,r))return!0;if(u[o]>a.length-1)return!!Lc(s,i,r)||Ic(i,r);i=a[u[o]]}3===i.nodeType&&(n=Math.min(u[0],i.nodeValue.length)),1===i.nodeType&&(n=Math.min(u[0],i.childNodes.length)),t?r.setStart(i,n):r.setEnd(i,n)}return!0},Hc=function(e){return oe.isText(e)&&0<e.data.length},zc=function(e,t,n){var r,o,i,a,u=e.get(n.id+"_"+t),s=n.keep;if(u){if(i=u.parentNode,a=(i=(r="start"===t?s?u.hasChildNodes()?(i=u.firstChild,1):Hc(u.nextSibling)?(i=u.nextSibling,0):Hc(u.previousSibling)?(i=u.previousSibling,u.previousSibling.data.length):(i=u.parentNode,e.nodeIndex(u)+1):e.nodeIndex(u):s?u.hasChildNodes()?(i=u.firstChild,1):Hc(u.previousSibling)?(i=u.previousSibling,u.previousSibling.data.length):(i=u.parentNode,e.nodeIndex(u)):e.nodeIndex(u),i),r),!s){for(s=u.previousSibling,o=u.nextSibling,ne.each(ne.grep(u.childNodes),function(e){oe.isText(e)&&(e.nodeValue=e.nodeValue.replace(/\uFEFF/g,""))});u=e.get(n.id+"_"+t);)e.remove(u,!0);s&&o&&s.nodeType===o.nodeType&&oe.isText(s)&&!ee.opera&&(r=s.nodeValue.length,s.appendData(o.nodeValue),e.remove(o),a=(i=s,r))}return b.some(T(i,a))}return b.none()},Uc=function(e,t){return e.isSome()?e:t},Wc=function(e,t){var n=e.createRng();return Fc(e,!0,t,n)&&Fc(e,!1,t,n)?b.some(n):b.none()},jc=function(r,e){var t=zc(r,"start",e),e=zc(r,"end",e);return cu([t,Uc(e,t)],function(e,t){var n=r.createRng();return n.setStart(Pc(r,e.container()),e.offset()),n.setEnd(Pc(r,t.container()),t.offset()),n})},Vc=function(n,e){return b.from(n.select(e.name)[e.index]).map(function(e){var t=n.createRng();return t.selectNode(e),t})},qc=function(e,t){e=e.dom;if(t){if(Dc(t))return Wc(e,t);if(Ec(t))return b.some(Oc(e,t));if(_c(t))return jc(e,t);if(Ac(t))return Vc(e,t);if(Rc(t))return b.some(t.rng)}return b.none()},w={isInlineBlock:Yc=function(e){return e&&/^(IMG)$/.test(e.nodeName)},moveStart:function(e,t,n){var r,o,i,a=n.startOffset,u=n.startContainer;if((n.startContainer!==n.endContainer||!Yc(n.startContainer.childNodes[n.startOffset]))&&1===u.nodeType)for(a<(i=u.childNodes).length?r=new BN(u=i[a],e.getParent(u,e.isBlock)):(r=new BN(u=i[i.length-1],e.getParent(u,e.isBlock))).next(!0),o=r.current();o;o=r.next())if(3===o.nodeType&&!Xc(o))return n.setStart(o,0),void t.setRng(n)},getNonWhiteSpaceSibling:function(e,t,n){if(e)for(t=t?"nextSibling":"previousSibling",e=n?e:e[t];e;e=e[t])if(1===e.nodeType||!Xc(e))return e},isTextBlock:function(e,t){return t.nodeType&&(t=t.nodeName),!!e.schema.getTextBlockElements()[t.toLowerCase()]},isValid:function(e,t,n){return e.schema.isValidChild(t,n)},isWhiteSpaceNode:Xc=function(e){return e&&3===e.nodeType&&/^([\t \r\n]+|)$/.test(e.nodeValue)},replaceVars:function(e,n){return"string"!=typeof e?e=e(n):n&&(e=e.replace(/%(\w+)/g,function(e,t){return n[t]||e})),e},isEq:function(e,t){return e=""+((e=e||"").nodeName||e),t=""+((t=t||"").nodeName||t),e.toLowerCase()===t.toLowerCase()},normalizeStyleValue:Kc=function(e,t,n){return"color"!==n&&"backgroundColor"!==n||(t=e.toHex(t)),"fontWeight"===n&&700===t&&(t="bold"),""+(t="fontFamily"===n?t.replace(/[\'\"]/g,"").replace(/,\s+/g,","):t)},getStyle:function(e,t,n){return Kc(e,e.getStyle(t,n),n)},getTextDecoration:function(t,e){var n;return t.getParent(e,function(e){return(n=t.getStyle(e,"text-decoration"))&&"none"!==n}),n},getParents:function(e,t,n){return e.getParents(t,n,e.getRoot())}},Gc=($c={getBookmark:function(e,t,n){return ss.getBookmark(e,t,n)},moveToBookmark:function(t,e){qc(t,e).each(function(e){t.setRng(e)})},isBookmarkNode:function(e){return oe.isElement(e)&&"SPAN"===e.tagName&&"bookmark"===e.getAttribute("data-mce-type")}}).isBookmarkNode,Jc=w.getParents,Zc=w.isWhiteSpaceNode,Qc=w.isTextBlock,el=function(e,t){for(void 0===t&&(t=(3===e.nodeType?e:e.childNodes).length);e&&e.hasChildNodes();)(e=e.childNodes[t])&&(t=(3===e.nodeType?e:e.childNodes).length);return{node:e,offset:t}},tl=function(e,t){var n=el(e,t);if(n.node){for(;n.node&&0===n.offset&&n.node.previousSibling;)n=el(n.node.previousSibling);n.node&&0<n.offset&&3===n.node.nodeType&&" "===n.node.nodeValue.charAt(n.offset-1)&&1<n.offset&&(e=n.node).splitText(n.offset-1)}return e},nl=function(e){return"BR"===e.nodeName&&e.getAttribute("data-mce-bogus")&&!e.nextSibling},rl=function(e,t){for(var n=t;n;){if(1===n.nodeType&&e.getContentEditable(n))return"false"===e.getContentEditable(n)?n:t;n=n.parentNode}return t},ol=function(e,t,n,r){var o,i,n=n.nodeValue;return void 0===r&&(r=e?n.length:0),e?(o=n.lastIndexOf(" ",r),-1!==(o=(i=n.lastIndexOf("",r))<o?o:i)&&!t&&(o<r||!e)&&o<=n.length&&o++):(o=n.indexOf(" ",r),i=n.indexOf("",r),o=-1!==o&&(-1===i||o<i)?o:i),o},il=function(e,t,n,r,o,i){var a,u,s,c;if(3===n.nodeType){if(-1!==(s=ol(o,i,n,r)))return{container:n,offset:s};c=n}for(a=new BN(n,e.getParent(n,e.isBlock)||t);u=a[o?"prev":"next"]();)if(3!==u.nodeType||Gc(u.parentNode)){if(e.isBlock(u)||w.isEq(u,"BR"))break}else if(-1!==(s=ol(o,i,c=u)))return{container:u,offset:s};if(c)return{container:c,offset:r=o?0:c.length}},al=function(e,t,n,r,o){var i,a,u,s;for(3===r.nodeType&&0===r.nodeValue.length&&r[o]&&(r=r[o]),i=Jc(e,r),a=0;a<i.length;a++)for(u=0;u<t.length;u++)if(!("collapsed"in(s=t[u])&&s.collapsed!==n.collapsed)&&e.is(i[a],s.selector))return i[a];return r},ul=function(t,e,n,r){var o,i,a=t.dom,u=a.getRoot();if((o=e[0].wrapper?o:a.getParent(n,e[0].block,u))||(i=a.getParent(n,"LI,TD,TH"),o=a.getParent(3===n.nodeType?n.parentNode:n,function(e){return e!==u&&Qc(t,e)},i)),!(o=o&&e[0].wrapper?Jc(a,o,"ul,ol").reverse()[0]||o:o))for(o=n;o[r]&&!a.isBlock(o[r])&&(o=o[r],!w.isEq(o,"br")););return o||n},sl=function(e,t,n,r,o,i,a){var u,s,c=u=a?n:o,l=a?"previousSibling":"nextSibling",f=e.getRoot();if(3!==c.nodeType||Zc(c)||!(a?0<r:i<c.nodeValue.length))for(;;){if(!t[0].block_expand&&e.isBlock(u))return u;for(s=u[l];s;s=s[l])if(!Gc(s)&&!Zc(s)&&!nl(s))return u;if(u===f||u.parentNode===f){c=u;break}u=u.parentNode}return c},cl={expandRng:function(e,t,n,r){var o,i=t.startContainer,a=t.startOffset,u=t.endContainer,s=t.endOffset,c=e.dom;return 1===i.nodeType&&i.hasChildNodes()&&3===(i=au(i,a)).nodeType&&(a=0),1===u.nodeType&&u.hasChildNodes()&&3===(u=au(u,t.collapsed?s:s-1)).nodeType&&(s=u.nodeValue.length),i=rl(c,i),u=rl(c,u),(Gc(i.parentNode)||Gc(i))&&(i=Gc(i)?i:i.parentNode,3===(i=t.collapsed?i.previousSibling||i:i.nextSibling||i).nodeType)&&(a=t.collapsed?i.length:0),(Gc(u.parentNode)||Gc(u))&&(u=Gc(u)?u:u.parentNode,3===(u=t.collapsed?u.nextSibling||u:u.previousSibling||u).nodeType)&&(s=t.collapsed?0:u.length),t.collapsed&&((o=il(c,e.getBody(),i,a,!0,r))&&(i=o.container,a=o.offset),o=il(c,e.getBody(),u,s,!1,r))&&(u=o.container,s=o.offset),n[0].inline&&(u=r?u:tl(u,s)),(n[0].inline||n[0].block_expand)&&(n[0].inline&&3===i.nodeType&&0!==a||(i=sl(c,n,i,a,u,s,!0)),n[0].inline&&3===u.nodeType&&s!==u.nodeValue.length||(u=sl(c,n,i,a,u,s,!1))),n[0].selector&&!1!==n[0].expand&&!n[0].inline&&(i=al(c,n,t,i,"previousSibling"),u=al(c,n,t,u,"nextSibling")),(n[0].block||n[0].selector)&&(i=ul(e,n,i,"previousSibling"),u=ul(e,n,u,"nextSibling"),n[0].block)&&(c.isBlock(i)||(i=sl(c,n,i,a,u,s,!0)),c.isBlock(u)||(u=sl(c,n,i,a,u,s,!1))),1===i.nodeType&&(a=c.nodeIndex(i),i=i.parentNode),1===u.nodeType&&(s=c.nodeIndex(u)+1,u=u.parentNode),{startContainer:i,startOffset:a,endContainer:u,endOffset:s}}},ll=ne.each,fl=function(e,t){var n=e.childNodes;return--t>n.length-1?t=n.length-1:t<0&&(t=0),n[t]||e},dl=function(e,t,o){var n,i,a,u,s,c,r,l=t.startContainer,f=t.startOffset,d=t.endContainer,m=t.endOffset,t=e.select("td[data-mce-selected],th[data-mce-selected]");if(0<t.length)ll(t,function(e){o([e])});else{if(s=function(e){var t=e[0];return 3===t.nodeType&&t===l&&f>=t.nodeValue.length&&e.splice(0,1),t=e[e.length-1],0===m&&0<e.length&&t===d&&3===t.nodeType&&e.splice(e.length-1,1),e},c=function(e,t,n){for(var r=[];e&&e!==n;e=e[t])r.push(e);return r},t=function(e,t){do{if(e.parentNode===t)return e}while(e=e.parentNode)},r=function(e,t,n){var r=n?"nextSibling":"previousSibling";for(a=(i=e).parentNode;i&&i!==t;i=a)a=i.parentNode,(u=c(i===e?i:i[r],r)).length&&(n||u.reverse(),o(s(u)))},1===l.nodeType&&l.hasChildNodes()&&(l=l.childNodes[f]),1===d.nodeType&&d.hasChildNodes()&&(d=fl(d,m)),l===d)return o(s([l]));for(n=e.findCommonAncestor(l,d),i=l;i;i=i.parentNode){if(i===d)return r(l,n,!0);if(i===n)break}for(i=d;i;i=i.parentNode){if(i===l)return r(d,n);if(i===n)break}e=t(l,n)||l,t=t(d,n)||d,r(l,e,!0),(u=c(e===l?e:e.nextSibling,"nextSibling",t===d?t.nextSibling:t)).length&&o(s(u)),r(d,t)}},ml=function(){return"\ufeff"},vN=dr,bN="text",g=function(e){if(vN(e))return wN(e).getOr("");throw new Error("Can only get "+bN+" value of a "+bN+" node")},d=function(e){try{return yN(e)}catch(e){return b.none()}},yN=function(e){return vN(e)?b.from(e.dom().nodeValue):b.none()},xN=ur.detect().browser,wN=xN.isIE()&&10===xN.version.major?d:yN,gl={get:g,getOption:wN,set:function(e,t){if(!vN(e))throw new Error("Can only set raw "+bN+" value of a "+bN+" node");e.dom().nodeValue=t}},hl=function(e){return gl.get(e)},pl=function(e){return dr(e)&&hl(e)===ml()},vl=function(t,n,r,o){return Yr(n).fold(function(){return"skipping"},function(e){return"br"===o||pl(n)?"valid":na(n)?"existing":ls(n)?"caret":w.isValid(t,r,o)&&w.isValid(t,cr(e),r)?"valid":"invalid-child"})},bl=function(e){return 3===e.startContainer.nodeType&&e.startContainer.nodeValue.length>=e.startOffset&&""===e.startContainer.nodeValue[e.startOffset]},yl=function(e,t){var n=cl.expandRng(e,t,[{inline:!0}],bl(t));t.setStart(n.startContainer,n.startOffset),t.setEnd(n.endContainer,n.endOffset),e.selection.setRng(t)},xl=function(e,t,n,r){var o=t.uid,o=void 0===o?ca("mce-annotation"):o,t=function(e,t){var n,r,o={};for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(r=0,n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&(o[n[r]]=e[n[r]]);return o}(t,["uid"]),e=U.fromTag("span",e);return Ui(e,Zi()),Sr(e,""+ea(),o),Sr(e,""+Qi(),n),r=(n=r(o,t)).attributes,t=void 0===(o=n.classes)?[]:o,kr(e,void 0===r?{}:r),la(e,t),e},wl=function(n,e,t,r,o){var i=[],a=xl(n.getDoc(),o,t,r),u=Oi(b.none()),s=function(){u.set(b.none())},c=function(){return u.get().getOrThunk(function(){var e=da(a);return i.push(e),u.set(b.some(e)),e})},l=function(e){R(e,f)},f=function(e){var t;switch(vl(n,e,"span",cr(e))){case"invalid-child":s(),t=Qr(e),l(t),s();break;case"valid":t=c(),Ti(e,t)}},d=function(e){e=Q(e,U.fromDom);l(e)};return dl(n.dom,e,function(e){s(),d(e)}),i},Cl=function(n,r,o,i){n.undoManager.transact(function(){var e,t=n.selection.getRng();t.collapsed&&yl(n,t),n.selection.getRng().collapsed?(t=xl(n.getDoc(),i,r,o.decorate),pa(t,""),n.selection.getRng().insertNode(t.dom()),n.selection.select(t.dom())):(t=ss.getPersistentBookmark(n.selection,!1),e=n.selection.getRng(),wl(n,e,r,o.decorate,i),n.selection.moveToBookmark(t))})},Sl=function(e){return e.firstChild&&e.firstChild===e.lastChild},kl=function(e){return"br"===e.name||""===e.value},Tl=function(e,t){return e.getBlockElements()[t.name]&&Sl(t)&&kl(t.firstChild)},Nl=function(e,t){var n=e.getNonEmptyElements();return t&&(t.isEmpty(n)||Tl(e,t))},El=function(e){var t=e.firstChild,n=e.lastChild;return t&&"META"===t.nodeName&&t.parentNode.removeChild(t),n&&"mce_marker"===n.id&&n.parentNode.removeChild(n),e},Rl=function(e,t,n){t=t.serialize(n),n=e.createFragment(t);return El(n)},Al=function(e){return""===e.data||oe.isBr(e)},Dl=function(e){return e&&e.firstChild&&e.firstChild===e.lastChild&&Al(e.firstChild)},Pl=function(e){return!e.firstChild||Dl(e)},Bl=function(e,t){t=e.getParent(t,e.isBlock);return t&&"LI"===t.nodeName?t:null},Ml=function(e,t){var n=t.cloneRange(),t=t.cloneRange();return n.setStartBefore(e),t.setEndAfter(e),[n.cloneContents(),t.cloneContents()]},Il=function(e,t){e=T.before(e),t=pc(t).next(e);return t?t.toRange():null},Ll=function(e,t){e=T.after(e),t=pc(t).prev(e);return t?t.toRange():null},Fl=function(t,e,n,r){var r=Ml(t,r),o=t.parentNode;return o.insertBefore(r[0],t),ne.each(e,function(e){o.insertBefore(e,t)}),o.insertBefore(r[1],t),o.removeChild(t),Ll(e[e.length-1],n)},Hl=function(t,e,n){var r=t.parentNode;return ne.each(e,function(e){r.insertBefore(e,t)}),Il(t,n)},zl=function(e,t,n,r){return r.insertAfter(t.reverse(),e),Ll(t[0],n)},Ul={isListFragment:function(e,t){var n=t.firstChild,t=t.lastChild;return n&&"meta"===n.name&&(n=n.next),t&&"mce_marker"===t.attr("id")&&(t=t.prev),Nl(e,t)&&(t=t.prev),!(!n||n!==t||"ul"!==n.name&&"ol"!==n.name)},insertAtCaret:function(e,r,o,t){var e=Rl(r,e,t),i=Bl(r,o.startContainer),t=Ol(_l(e.firstChild)),e=r.getRoot(),n=function(e){var t=T.fromRangeStart(o),n=pc(r.getRoot()),e=1===e?n.prev(t):n.next(t);return!e||Bl(r,e.getNode())!==i};return n(1)?Hl(i,t,e):n(2)?zl(i,t,e,r):Fl(i,t,e,o)},isParentBlockLi:function(e,t){return!!Bl(e,t)},trimListItems:Ol=function(e){return 0<e.length&&Pl(e[e.length-1])?e.slice(0,-1):e},listItems:_l=function(e){return ne.grep(e.childNodes,function(e){return"LI"===e.nodeName})}},Wl=ne.each,jl=function(o){this.compare=function(e,t){var n,r;return e.nodeName===t.nodeName&&!(!(r=function(e,t){var n,r;for(r in e)if(e.hasOwnProperty(r)){if(void 0===(n=t[r]))return!1;if(e[r]!==n)return!1;delete t[r]}for(r in t)if(t.hasOwnProperty(r))return!1;return!0})((n=function(t){var n={};return Wl(o.getAttribs(t),function(e){e=e.nodeName.toLowerCase();0!==e.indexOf("_")&&"style"!==e&&0!==e.indexOf("data-")&&(n[e]=o.getAttrib(t,e))}),n})(e),n(t))||!r(o.parseStyle(o.getAttrib(e,"style")),o.parseStyle(o.getAttrib(t,"style")))||$c.isBookmarkNode(e)||$c.isBookmarkNode(t))}},Vl=function(e){for(var t=[],n=e.dom();n;)t.push(U.fromDom(n)),n=n.lastChild;return t},ql=function(e){return dr(e)?""===hl(e):Co(e)},$l={removeTrailingBr:function(e){var t=$i(e,"br"),e=_(Vl(e).slice(-1),Co);t.length===e.length&&R(e,_i)},fillWithPaddingBr:function(e){Ri(e),ki(e,U.fromHtml('<br data-mce-bogus="1">'))},isPaddedElement:function(e){return 1===_(Qr(e),ql).length},trimBlockTrailingBr:function(n){no(n).each(function(t){Kr(t).each(function(e){xo(n)&&Co(t)&&xo(e)&&_i(t)})})}},Yl=ne.makeMap,Xl=function(e,t,n,r){var o=J.document.createRange();return o.setStart(e,t),o.setEnd(n,r),o},Kl=function(t){var n=T.fromRangeStart(t),r=T.fromRangeEnd(t),o=t.commonAncestorContainer;return c.fromPosition(!1,o,r).map(function(e){return!Vs(n,r,o)&&Vs(n,e,o)?Xl(n.container(),n.offset(),e.container(),e.offset()):t}).getOr(t)},Gl={normalize:function(e){return e.collapsed?e:Kl(e)}},Jl=function(e,t){return oe.isText(e)&&""===e.nodeValue[t-1]},Zl=function(e,t){var n=e.startContainer,e=e.startOffset,r=function(e){return n[e]&&3===n[e].nodeType};return 3===n.nodeType&&(0<e?t=t.replace(/^&nbsp;/," "):r("previousSibling")||(t=t.replace(/^ /,"&nbsp;")),e<n.length?t=t.replace(/&nbsp;(<br>|)$/," "):r("nextSibling")||(t=t.replace(/(&nbsp;| )(<br>|)$/,"&nbsp;"))),t},Ql=function(e,t){var n=e.startContainer,r=e.startOffset;return 3===n.nodeType&&e.collapsed&&(""===n.data[r]?(n.deleteData(r,1),/[\u00a0| ]$/.test(t)||(t+=" ")):""===n.data[r-1]&&(n.deleteData(r-1,1),/[\u00a0| ]$/.test(t)||(t=" "+t))),t},ef=oe.matchNodeNames("td th"),tf=function(e,t){var n=e.selection.getRng(),r=n.startContainer,o=n.startOffset;n.collapsed&&Jl(r,o)&&oe.isText(r)&&(r.insertData(o-1," "),r.deleteData(o,1),n.setStart(r,o),n.setEnd(r,o),e.selection.setRng(n)),e.selection.setContent(t)},nf=function(e,t,n){var r,o;"all"===n.getAttribute("data-mce-bogus")?n.parentNode.insertBefore(e.dom.createFragment(t),n):(r=n.firstChild,o=n.lastChild,!r||r===o&&"BR"===r.nodeName?e.dom.setHTML(n,t):tf(e,t))},rf=function(e,t){b.from(e.getParent(t,"td,th")).map(U.fromDom).each($l.trimBlockTrailingBr)},of=function(e,t){var n,r,o=e.schema.getTextInlineElements(),i=e.dom;t&&(n=e.getBody(),r=new jl(i),ne.each(i.select("*[data-mce-fragment]"),function(e){for(var t=e.parentNode;t&&t!==n;t=t.parentNode)o[e.nodeName.toLowerCase()]&&r.compare(t,e)&&i.remove(e,!0)}))},af=function(e){for(var t=e;t=t.walk();)1===t.type&&t.attr("data-mce-fragment","1")},uf=function(e){ne.each(e.getElementsByTagName("*"),function(e){e.removeAttribute("data-mce-fragment")})},sf=function(e){return!!e.getAttribute("data-mce-fragment")},cf=function(e,t){return t&&!e.schema.getShortEndedElements()[t.nodeName]},lf=function(n,e){var t,r,o=n.dom,i=n.selection,a=function(e){for(var t=n.getBody();e&&e!==t;e=e.parentNode)if("false"===n.dom.getContentEditable(e))return e;return null};e&&(n.selection.scrollIntoView(e),(a=a(e))?(o.remove(e),i.select(a)):(a=o.createRng(),(r=e.previousSibling)&&3===r.nodeType?(a.setStart(r,r.nodeValue.length),ee.ie||(t=e.nextSibling)&&3===t.nodeType&&(r.appendData(t.data),t.parentNode.removeChild(t))):(a.setStartBefore(e),a.setEndBefore(e)),r=function(e){e=T.fromRangeStart(e);if(e=pc(n.getBody()).next(e))return e.toRange()},t=o.getParent(e,o.isBlock),o.remove(e),t&&o.isEmpty(t)&&(n.$(t).empty(),a.setStart(t,0),a.setEnd(t,0),ef(t)||sf(t)||!(e=r(a))?o.add(t,o.create("br",{"data-mce-bogus":"1"})):(a=e,o.remove(t))),i.setRng(a)))},ff=function(e,t,n){var r,o,i,a,u,s,c,l,f,d,m,g=e.selection,h=e.dom;if(/^ | $/.test(t)&&(t=Zl(g.getRng(),t)),r=e.parser,d=n.merge,o=WN({validate:e.settings.validate},e.schema),s={content:t,format:"html",selection:!0,paste:n.paste},(s=e.fire("BeforeSetContent",s)).isDefaultPrevented())e.fire("SetContent",{content:s.content,format:"html",selection:!0,paste:n.paste});else if(-1===(t=s.content).indexOf("{$caret}")&&(t+="{$caret}"),t=t.replace(/\{\$caret\}/,'<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;&#x200B;</span>'),((l=g.getRng()).startContainer||(l.parentElement?l.parentElement():null))===(m=e.getBody())&&g.isCollapsed()&&h.isBlock(m.firstChild)&&cf(e,m.firstChild)&&h.isEmpty(m.firstChild)&&((l=h.createRng()).setStart(m.firstChild,0),l.setEnd(m.firstChild,0),g.setRng(l)),g.isCollapsed()||(e.selection.setRng(Gl.normalize(e.selection.getRng())),e.getDoc().execCommand("Delete",!1,null),t=Ql(e.selection.getRng(),t)),m={context:(i=g.getNode()).nodeName.toLowerCase(),data:n.data,insert:!0},u=r.parse(t,m),!0===n.paste&&Ul.isListFragment(e.schema,u)&&Ul.isParentBlockLi(h,i))l=Ul.insertAtCaret(o,h,e.selection.getRng(),u),e.selection.setRng(l),e.fire("SetContent",s);else{if(af(u),"mce_marker"===(f=u.lastChild).attr("id"))for(f=(c=f).prev;f;f=f.walk(!0))if(3===f.type||!h.isBlock(f.name)){e.schema.isValidChild(f.parent.name,"span")&&f.parent.insert(c,f,"br"===f.name);break}if(e._selectionOverrides.showBlockCaretContainer(i),m.invalid){for(tf(e,'<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;&#x200B;</span>'),i=g.getNode(),a=e.getBody(),9===i.nodeType?i=f=a:f=i;f!==a;)f=(i=f).parentNode;t=i===a?a.innerHTML:h.getOuterHTML(i),t=o.serialize(r.parse(t.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return o.serialize(u)}))),i===a?h.setHTML(a,t):h.setOuterHTML(i,t)}else t=o.serialize(u),nf(e,t,i);of(e,d),lf(e,h.get("mce_marker")),uf(e.getBody()),rf(e.dom,e.selection.getStart()),e.fire("SetContent",s),e.addVisual()}},df=function(e){var t;return"string"!=typeof e?(t=ne.extend({paste:e.paste,data:{paste:e.paste}},e),{content:e.content,details:t}):{content:e,details:{}}},mf={insertAtCaret:function(e,t){t=df(t);ff(e,t.content,t.details)}},gf=r("sections","settings"),qT=ur.detect(),hf=qT.deviceType.isTouch(),pf=["lists","autolink","autosave"],vf={theme:"mobile"},bf=function(e){e=H(e)?e.join(" "):e,e=Q(L(e)?e.split(" "):[],nr);return _(e,function(e){return 0<e.length})},yf=function(e){return _(e,v(K,pf))},xf=function(n,e){e=br(e,function(e,t){return K(n,t)});return gf(e.t,e.f)},wf=function(e,t,n){e=e.sections(),e=e.hasOwnProperty(t)?e[t]:{};return ne.extend({},n,e)},Cf=function(e,t){return e.sections().hasOwnProperty(t)},Sf=function(e,t,n){return{id:e,theme:"modern",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:t,add_form_submit_trigger:!0,submit_patch:!0,add_unload_trigger:!0,convert_urls:!0,relative_urls:!0,remove_script_host:!0,object_resizing:!0,doctype:"<!DOCTYPE html>",visual:!0,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",forced_root_block:"p",hidden_input:!0,render_ui:!0,indentation:"40px",inline_styles:!0,convert_fonts_to_spans:!0,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",entity_encoding:"named",url_converter:n.convertURL,url_converter_scope:n,ie7_compat:!0}},kf=function(e,t){t=t.external_plugins||{};return e&&e.external_plugins?ne.extend({},e.external_plugins,t):t},Tf=function(e,t){return[].concat(bf(e)).concat(bf(t))},Nf=function(e,t,n,r){var n=bf(n.forced_plugins),o=bf(r.plugins),e=e&&Cf(t,"mobile")?yf(o):o,t=Tf(n,e);return ne.extend(r,{plugins:t.join(" ")})},Ef=function(e,t){var n=t.settings().inline;return e&&Cf(t,"mobile")&&!n},Rf=function(e,t,n,r){r=xf(["mobile"],r),t=ne.extend(t,n,r.settings(),Ef(e,r)?wf(r,"mobile",vf):{},{validate:!0,content_editable:r.settings().inline,external_plugins:kf(n,r.settings())});return Nf(e,r,n,t)},_f=function(e,t,n,r,o){t=Sf(t,n,e);return Rf(hf,t,r,o)},Df=v(Af=function(e,t,n){return b.from(t.settings[n]).filter(e)},L),Pf=function(e){var t={};return"string"==typeof e?R(0<e.indexOf("=")?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(","),function(e){e=e.split("=");1<e.length?t[ne.trim(e[0])]=ne.trim(e[1]):t[ne.trim(e[0])]=ne.trim(e)}):t=e,t},Of=function(t){return function(e){return H(e)&&ve(e,t)}},Bf=function(e,t,n,r){var o=t in e.settings?e.settings[t]:n;return"hash"===r?Pf(o):"string"===r?Af(L,e,t).getOr(n):"number"===r?Af(q,e,t).getOr(n):"boolean"===r?Af(j,e,t).getOr(n):"object"===r?Af(F,e,t).getOr(n):"array"===r?Af(H,e,t).getOr(n):"string[]"===r?Af(Of(L),e,t).getOr(n):"function"===r?Af(V,e,t).getOr(n):o},Mf=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,If=function(e){return Mf.test(e)},u=function(e,t){e=Df(e,"inline_boundaries_selector").getOr("a[href],code");return Hr(U.fromDom(t),e)},h=function(e){return"rtl"===s.DOM.getStyle(e,"direction",!0)||If(e.textContent)},Lf=function(e,t,n){return _(s.DOM.getParents(n.container(),"*",t),e)},p=function(e,t,n){e=Lf(e,t,n);return b.from(e[e.length-1])},kv=function(e,t,n){t=js(t,e),n=js(n,e);return t&&t===n},iN=function(e){return Ta(e)||Na(e)},pN=v(t=function(e,t){var n,r;return t&&(n=t.container(),r=t.offset(),e?wa(n)?oe.isText(n.nextSibling)?T(n.nextSibling,0):T.after(n):Ta(t)?T(n,r+1):t:wa(n)?oe.isText(n.previousSibling)?T(n.previousSibling,n.previousSibling.data.length):T.before(n):Na(t)?T(n,r-1):t)},!0),mN=v(t,!1),f={isInlineTarget:u,findRootInline:p,isRtl:h,isAtZwsp:iN,normalizePosition:t,normalizeForwards:pN,normalizeBackwards:mN,hasSameParentBlock:kv},Ff=function(t){return function(e){return a(t,U.fromDom(e.dom().parentNode))}},Hf=function(e){var t=e.getBody(),t=t.firstChild&&e.dom.isBlock(t.firstChild)?t.firstChild:t;e.selection.setCursorLocation(t,0)},zf={getParentBlock:function(e,t){return jr(e,t)?Xi(t,function(e){return So(e)||To(e)},Ff(e)):b.none()},paddEmptyBody:function(e){e.dom.isEmpty(e.getBody())&&(e.setContent(""),Hf(e))},willDeleteLastPositionInElement:function(o,i,a){return cu([c.firstPositionIn(a),c.lastPositionIn(a)],function(e,t){var n=f.normalizePosition(!0,e),r=f.normalizePosition(!1,t),e=f.normalizePosition(!1,i);return(o?c.nextPosition(a,e).map(function(e){return e.isEqual(r)&&i.isEqual(n)}):c.prevPosition(a,e).map(function(e){return e.isEqual(n)&&i.isEqual(r)})).getOr(!1)}).getOr(!0)}},Uf=function(e,t,n){return Ki(e,t,n).isSome()},Wf=function(e,t){e=U.fromDom(e),t=U.fromDom(t);return Uf(t,"pre,code",v(a,e))},jf=function(e,t){return oe.isText(t)&&/^[ \t\r\n]*$/.test(t.data)&&!1===Wf(e,t)},Vf=function(e){return oe.isElement(e)&&"A"===e.nodeName&&e.hasAttribute("name")},qf=function(e,t){return Wa(t)&&!1===jf(e,t)||Vf(t)||$f(t)},$f=oe.hasAttribute("data-mce-bookmark"),Yf=oe.hasAttribute("data-mce-bogus"),Xf=oe.hasAttributeValue("data-mce-bogus","all"),Kf=function(e){var t,n,r=0;if(qf(e,e))return!1;if(!(n=e.firstChild))return!0;t=new BN(n,e);do{if(Xf(n))n=t.next(!0);else{if(!Yf(n))if(oe.isBr(n))r++;else if(qf(e,n))return!1;n=t.next()}}while(n);return r<=1},Gf={isEmpty:function(e){return Kf(e.dom())}},Jf=r("block","position"),Zf=r("from","to"),Qf=function(e,t){var e=U.fromDom(e),n=U.fromDom(t.container());return zf.getParentBlock(e,n).map(function(e){return Jf(e,t)})},ed=function(e){return!1===a(e.from().block(),e.to().block())},td=function(e){return Yr(e.from().block()).bind(function(t){return Yr(e.to().block()).filter(function(e){return a(t,e)})}).isSome()},nd=function(e){return!1===oe.isContentEditableFalse(e.from().block())&&!1===oe.isContentEditableFalse(e.to().block())},rd=function(t,n,r){return oe.isBr(r.position().getNode())&&!1===Gf.isEmpty(r.block())?c.positionIn(!1,r.block().dom()).bind(function(e){return e.isEqual(r.position())?c.fromPosition(n,t,e).bind(function(e){return Qf(t,e)}):b.some(r)}).getOr(r):r},od=function(t,n,e){var e=Qf(t,T.fromRangeStart(e)),r=e.bind(function(e){return c.fromPosition(n,t,e.position()).bind(function(e){return Qf(t,e).map(function(e){return rd(t,n,e)})})});return cu([e,r],Zf).filter(function(e){return ed(e)&&td(e)&&nd(e)})},id=function(e,t,n){return n.collapsed?od(e,t,n):b.none()},ad=function(e){return e.slice(0,-1)},cd={parentsUntil:ud=function(e,t,n){return jr(t,e)?ad(Xr(e,function(e){return n(e)||a(e,t)})):[]},parents:sd=function(e,t){return ud(e,t,Z(!1))},parentsAndSelf:function(e,t){return[e].concat(sd(e,t))}},ld=function(e){var t=Qr(e);return de(t,xo).fold(function(){return t},function(e){return t.slice(0,e)})},fd=function(e){e=ld(e);return R(e,_i),e},dd=function(e,t){t=cd.parentsAndSelf(t,e);return fe(t.reverse(),Gf.isEmpty).each(_i)},md=function(e){return 0===_(Jr(e),function(e){return!Gf.isEmpty(e)}).length},gd=function(e,t,n,r){if(Gf.isEmpty(n))return $l.fillWithPaddingBr(n),c.firstPositionIn(n.dom());md(r)&&Gf.isEmpty(t)&&wi(r,U.fromTag("br"));n=c.prevPosition(n.dom(),T.before(r.dom()));return R(fd(t),function(e){wi(r,e)}),dd(e,t),n},hd=function(e,t,n){var r;return Gf.isEmpty(n)?(_i(n),Gf.isEmpty(t)&&$l.fillWithPaddingBr(t),c.firstPositionIn(t.dom())):(r=c.lastPositionIn(n.dom()),R(fd(t),function(e){ki(n,e)}),dd(e,t),r)},pd=function(e,t){t=cd.parentsAndSelf(t,e);return b.from(t[t.length-1])},vd=function(e,t){return jr(t,e)?pd(t,e):b.none()},bd=function(e,t){c.positionIn(e,t.dom()).map(function(e){return e.getNode()}).map(U.fromDom).filter(Co).each(_i)},yd=function(e,t,n){return bd(!0,t),bd(!1,n),vd(t,n).fold(v(hd,e,t,n),v(gd,e,t,n))},xd=function(e,t,n,r){return t?yd(e,r,n):yd(e,n,r)},wd={backspaceDelete:function(t,n){var r=U.fromDom(t.getBody()),e=id(r.dom(),n,t.selection.getRng()).bind(function(e){return xd(r,n,e.from().block(),e.to().block())});return e.each(function(e){t.selection.setRng(e.toRange())}),e.isSome()}},Cd=function(n,r){var o=r.getRng();return cu([zf.getParentBlock(n,U.fromDom(o.startContainer)),zf.getParentBlock(n,U.fromDom(o.endContainer))],function(e,t){return!1===a(e,t)&&(o.deleteContents(),xd(n,!0,e,t).each(function(e){r.setRng(e.toRange())}),!0)}).getOr(!1)},Sd=function(e,t){t=U.fromDom(t),e=v(a,e);return Yi(t,Ro,e).isSome()},kd=function(e,t){return Sd(e,t.startContainer)||Sd(e,t.endContainer)},Td=function(e,t){var n=c.prevPosition(e.dom(),T.fromRangeStart(t)).isNone(),r=c.nextPosition(e.dom(),T.fromRangeEnd(t)).isNone();return!kd(e,t)&&n&&r},Nd=function(e){return e.setContent(""),e.selection.setCursorLocation(),!0},Ed=function(e){var t=U.fromDom(e.getBody()),n=e.selection.getRng();return Td(t,n)?Nd(e):Cd(t,e.selection)},Rd={backspaceDelete:function(e,t){return!e.selection.isCollapsed()&&Ed(e)}},i=function(a){var u,n;if(!H(a))throw new Error("cases must be an array");if(0===a.length)throw new Error("there must be at least one case");return u=[],n={},R(a,function(e,r){var o,i,t=mr(e);if(1!==t.length)throw new Error("one and only one name per case");if(o=t[0],i=e[o],void 0!==n[o])throw new Error("duplicate key detected:"+o);if("cata"===o)throw new Error("cannot have a case named cata (sorry)");if(!H(i))throw new Error("case arguments must be an array");u.push(o),n[o]=function(){var n,e,t=arguments.length;if(t!==i.length)throw new Error("Wrong number of arguments to case "+o+". Expected "+i.length+" ("+i+"), got "+t);for(n=new Array(t),e=0;e<n.length;e++)n[e]=arguments[e];return{fold:function(){if(arguments.length!==a.length)throw new Error("Wrong number of arguments to fold. Expected "+a.length+", got "+arguments.length);return arguments[r].apply(null,n)},match:function(e){var t=mr(e);if(u.length!==t.length)throw new Error("Wrong number of arguments to match. Expected: "+u.join(",")+"\nActual: "+t.join(","));if(ve(u,function(e){return K(t,e)}))return e[o].apply(null,n);throw new Error("Not all branches were specified when using match. Specified: "+t.join(", ")+"\nRequired: "+u.join(", "))},log:function(e){J.console.log(e,{constructors:u,constructor:o,params:n})}}}}),n},_d=function(e){return Qs(e).exists(Co)},Dd=function(e,t){return Qs(t).exists(Co)||Ad(!0,e,t).isSome()},Od=v(Ad=function(e,t,n){var r=_(cd.parentsAndSelf(U.fromDom(n.container()),t),xo),r=Se(r).getOr(t);return c.fromPosition(e,r.dom(),n).filter(_d)},!(Pd=function(e,t){return ec(t).exists(Co)||Ad(!1,e,t).isSome()})),Bd=v(Ad,!0),Md=function(t){return function(e){return t===e}}(""),Ld=function(e){return!Id(e)&&!Md(e)},Fd=v(Fv=function(n,r,o){return b.from(o.container()).filter(oe.isText).exists(function(e){var t=n?0:-1;return r(e.data.charAt(o.offset()+t))})},!0,Id=function(e){return/^[\r\n\t ]$/.test(e)}),Hd=v(Fv,!1,Id),zd=function(e){e=e.container();return oe.isText(e)&&0===e.data.length},Ud=v(e=function(e,t){e=qs(e,t);return oe.isContentEditableFalse(e)&&!oe.isBogusAll(e)},0),Wd=v(e,-1),jd=v(xN=function(e,t){return oe.isTable(qs(e,t))},0),Vd=v(xN,-1),qd=function(e){return Ro(U.fromDom(e))||To(U.fromDom(e))},$d=i([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),Yd=function(e,t){t=t.getNode(!1===e),e=e?"after":"before";return oe.isElement(t)&&t.getAttribute("data-mce-caret")===e},Xd=function(t,e,n,r){function o(e){return wo(U.fromDom(e))&&!Vs(n,r,t)}return Js(!e,n).fold(function(){return Js(e,r).fold(Z(!1),o)},o)},Kd=function(e,t,n,r){var o=r.getNode(!1===t);return zf.getParentBlock(U.fromDom(e),U.fromDom(n.getNode())).map(function(e){return Gf.isEmpty(e)?$d.remove(e.dom()):$d.moveToElement(o)}).orThunk(function(){return b.some($d.moveToElement(o))})},Gd=function(t,n,r){return c.fromPosition(n,t,r).bind(function(e){return qd(e.getNode())||Xd(t,n,r,e)?b.none():n&&oe.isContentEditableFalse(e.getNode())||!1===n&&oe.isContentEditableFalse(e.getNode(!0))?Kd(t,n,r,e):n&&Wd(r)||!1===n&&Ud(r)?b.some($d.moveToPosition(e)):b.none()})},Jd=function(e,t){return e&&oe.isContentEditableFalse(t.nextSibling)?b.some($d.moveToElement(t.nextSibling)):!1===e&&oe.isContentEditableFalse(t.previousSibling)?b.some($d.moveToElement(t.previousSibling)):b.none()},Zd=function(t,n,e){return e.fold(function(e){return b.some($d.remove(e))},function(e){return b.some($d.moveToElement(e))},function(e){return Vs(n,e,t)?b.none():b.some($d.moveToPosition(e))})},Qd=function(t,e,n){return Yd(e,n)?Jd(e,n.getNode(!1===e)).fold(function(){return Gd(t,e,n)},b.some):Gd(t,e,n).bind(function(e){return Zd(t,n,e)})},em=function(e,t,n){var n=Gs(t?1:-1,e,n),n=T.fromRangeStart(n),r=U.fromDom(e);return!1===t&&Wd(n)?b.some($d.remove(n.getNode(!0))):t&&Ud(n)?b.some($d.remove(n.getNode())):!1===t&&Ud(n)&&Pd(r,n)?Od(r,n).map(function(e){return $d.remove(e.getNode())}):t&&Wd(n)&&Dd(r,n)?Bd(r,n).map(function(e){return $d.remove(e.getNode())}):Qd(e,t,n)},tm=function(e){return-1!==" \f\n\r\t\v".indexOf(e)},nm=function(n,r,o){return le(n.split(""),function(e,t){return tm(t)||""===t?e.previousCharIsSpace||""===e.str&&r||e.str.length===n.length-1&&o?{previousCharIsSpace:!1,str:e.str+""}:{previousCharIsSpace:!0,str:e.str+" "}:{previousCharIsSpace:!1,str:e.str+t}},{previousCharIsSpace:!1,str:""}).str},rm=function(e,t,n){var r,o;0!==n&&(r=e.data.slice(t,t+n),o=t+n>=e.data.length,e.replaceData(t,n,nm(r,0===t,o)))},om=function(e,t){var n=e.data.slice(t),n=n.length-rr(n).length;return rm(e,t,n)},im=function(e,t){var n=e.data.slice(0,t),n=n.length-or(n).length;return rm(e,t-n,n)},am=function(e,t,n){var r=or(e.data).length;return e.appendData(t.data),_i(U.fromDom(t)),n&&om(e,r),e},um=function(e,t){var n=e.container(),r=e.offset();return!1===T.isTextPosition(e)&&n===t.parentNode&&r>T.before(t).offset()},sm=function(e,t){return um(t,e)?T(t.container(),t.offset()-1):t},cm=function(e){return oe.isText(e)?T(e,0):T.before(e)},lm=function(e){return oe.isText(e)?T(e,e.data.length):T.after(e)},fm=function(e){return Wa(e.previousSibling)?b.some(lm(e.previousSibling)):e.previousSibling?c.lastPositionIn(e.previousSibling):b.none()},dm=function(e){return Wa(e.nextSibling)?b.some(cm(e.nextSibling)):e.nextSibling?c.firstPositionIn(e.nextSibling):b.none()},mm=function(e,t){var n=T.before(t.previousSibling||t.parentNode);return c.prevPosition(e,n).fold(function(){return c.nextPosition(e,T.after(t))},b.some)},gm=function(e,t){return c.nextPosition(e,T.after(t)).fold(function(){return c.prevPosition(e,T.before(t))},b.some)},hm=function(e,t){return fm(t).orThunk(function(){return dm(t)}).orThunk(function(){return mm(e,t)})},pm=function(e,t){return dm(t).orThunk(function(){return fm(t)}).orThunk(function(){return gm(e,t)})},vm=function(e,t,n){return(e?pm:hm)(t,n)},bm=function(e,t,n){return vm(e,t,n).map(v(sm,n))},ym=function(t,n,e){e.fold(function(){t.focus()},function(e){t.selection.setRng(e.toRange(),n)})},xm=function(t){return function(e){return e.dom()===t}},wm=function(e,t){return t&&e.schema.getBlockElements().hasOwnProperty(cr(t))},Cm=function(e){var t;return Gf.isEmpty(e)?(t=U.fromHtml('<br data-mce-bogus="1">'),Ri(e),ki(e,t),b.some(T.before(t.dom()))):b.none()},Sm=function(e,t,o){var n=Kr(e).filter(function(e){return oe.isText(e.dom())}),r=Gr(e).filter(function(e){return oe.isText(e.dom())});return _i(e),cu([n,r,t],function(e,t,n){var e=e.dom(),t=t.dom(),r=e.data.length;return am(e,t,o),n.container()===t?T(e,r):n}).orThunk(function(){return o&&(n.each(function(e){return im(e.dom(),e.dom().length)}),r.each(function(e){return om(e.dom(),0)})),t})},km=function(e,t){return yr(e.schema.getTextInlineElements(),cr(t))},Tm={deleteElement:function(t,n,e,r){var o,i,a;void 0===r&&(r=!0),o=bm(n,t.getBody(),e.dom()),i=Yi(e,v(wm,t),xm(t.getBody())),a=Sm(e,o,km(t,e)),t.dom.isEmpty(t.getBody())?(t.setContent(""),t.selection.setCursorLocation()):i.bind(Cm).fold(function(){r&&ym(t,n,a)},function(e){r&&ym(t,n,b.some(e))})}},Nm=function(t,n){return function(e){return t._selectionOverrides.hideFakeCaret(),Tm.deleteElement(t,n,U.fromDom(e)),!0}},Em=function(t,n){return function(e){e=n?T.before(e):T.after(e);return t.selection.setRng(e.toRange()),!0}},Rm=function(t){return function(e){return t.selection.setRng(e.toRange()),!0}},_m=function(t,n){return em(t.getBody(),n,t.selection.getRng()).map(function(e){return e.fold(Nm(t,n),Em(t,n),Rm(t))}).getOr(!1)},Am=function(e){R($i(e,".mce-offscreen-selection"),_i)},Dm=function(e,t){var n=e.selection.getNode();return!!oe.isContentEditableFalse(n)&&(Am(U.fromDom(e.getBody())),Tm.deleteElement(e,t,U.fromDom(e.selection.getNode())),zf.paddEmptyBody(e),!0)},Pm=function(e,t){for(;t&&t!==e;){if(oe.isContentEditableTrue(t)||oe.isContentEditableFalse(t))return t;t=t.parentNode}return null},Om={backspaceDelete:function(e,t){return(e.selection.isCollapsed()?_m:Dm)(e,t)},paddEmptyElement:function(e){var t,n=Pm(e.getBody(),e.selection.getNode());return oe.isContentEditableTrue(n)&&e.dom.isBlock(n)&&e.dom.isEmpty(n)&&(t=e.dom.create("br",{"data-mce-bogus":"1"}),e.dom.setHTML(n,""),n.appendChild(t),e.selection.setRng(T.before(t).toRange())),!0}},Bm=oe.isText,Mm=function(e){return Bm(e)&&e.data[0]===l.ZWSP},Im=function(e){return Bm(e)&&e.data[e.data.length-1]===l.ZWSP},Lm=function(e){return e.ownerDocument.createTextNode(l.ZWSP)},Fm=function(e){var t;return Bm(e.previousSibling)?(Im(e.previousSibling)||e.previousSibling.appendData(l.ZWSP),e.previousSibling):Bm(e)?(Mm(e)||e.insertData(0,l.ZWSP),e):(t=Lm(e),e.parentNode.insertBefore(t,e),t)},Hm=function(e){var t;return Bm(e.nextSibling)?(Mm(e.nextSibling)||e.nextSibling.insertData(0,l.ZWSP),e.nextSibling):Bm(e)?(Im(e)||e.appendData(l.ZWSP),e):(t=Lm(e),e.nextSibling?e.parentNode.insertBefore(t,e.nextSibling):e.parentNode.appendChild(t),t)},Um=v(zm=function(e,t){return(e?Fm:Hm)(t)},!0),Wm=v(zm,!1),jm=function(e,t){return oe.isText(e.container())?zm(t,e.container()):zm(t,e.getNode())},Vm=function(e,t){t=t.get();return t&&e.container()===t&&wa(t)},qm=function(t,e){return e.fold(function(e){ks.remove(t.get());e=Um(e);return t.set(e),b.some(T(e,e.length-1))},function(e){return c.firstPositionIn(e).map(function(e){return Vm(e,t)?T(t.get(),1):(ks.remove(t.get()),e=jm(e,!0),t.set(e),T(e,1))})},function(e){return c.lastPositionIn(e).map(function(e){return Vm(e,t)?T(t.get(),t.get().length-1):(ks.remove(t.get()),e=jm(e,!1),t.set(e),T(e,e.length-1))})},function(e){ks.remove(t.get());e=Wm(e);return t.set(e),b.some(T(e,1))})},$m=function(e,t){for(var n,r=0;r<e.length;r++)if((n=e[r].apply(null,t)).isSome())return n;return b.none()},Ym=i([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),Xm=function(e,t){t=js(t,e);return t||e},Km=function(e,t,n){var r=f.normalizeForwards(n),o=Xm(t,r.container());return f.findRootInline(e,o,r).fold(function(){return c.nextPosition(o,r).bind(v(f.findRootInline,e,o)).map(function(e){return Ym.before(e)})},b.none)},Gm=function(e,t){return null===fs(e,t)},Jm=function(e,t,n){return f.findRootInline(e,t,n).filter(v(Gm,t))},Zm=function(e,t,n){var r=f.normalizeBackwards(n);return Jm(e,t,r).bind(function(e){return c.prevPosition(e,r).isNone()?b.some(Ym.start(e)):b.none()})},Qm=function(e,t,n){var r=f.normalizeForwards(n);return Jm(e,t,r).bind(function(e){return c.nextPosition(e,r).isNone()?b.some(Ym.end(e)):b.none()})},eg=function(e,t,n){var r=f.normalizeBackwards(n),o=Xm(t,r.container());return f.findRootInline(e,o,r).fold(function(){return c.prevPosition(o,r).bind(v(f.findRootInline,e,o)).map(function(e){return Ym.after(e)})},b.none)},tg=function(e){return!1===f.isRtl(rg(e))},rg=function(e){return e.fold(ae,ae,ae,ae)},og=function(e){return e.fold(Z("before"),Z("start"),Z("end"),Z("after"))},ig=function(e){return e.fold(Ym.before,Ym.before,Ym.after,Ym.after)},d=function(e){return e.fold(Ym.start,Ym.start,Ym.end,Ym.end)},ag=function(e,t){return og(e)===og(t)&&rg(e)===rg(t)},ug=function(n,e,r,t,o,i){return cu([f.findRootInline(e,r,t),f.findRootInline(e,r,o)],function(e,t){return e!==t&&f.hasSameParentBlock(r,e,t)?Ym.after(n?e:t):i}).getOr(i)},sg=function(e,t){return e.fold(Z(!0),function(e){return!ag(e,t)})},cg=function(t,n,r,o,e){var i=f.normalizePosition(t,e);return c.fromPosition(t,r,i).map(v(f.normalizePosition,t)).fold(function(){return o.map(ig)},function(e){return ng(n,r,e).map(v(ug,t,n,r,i,e)).filter(v(sg,o))}).filter(tg)},fg={readLocation:ng=function(e,t,n){return $m([Km,Zm,Qm,eg],[e,t,n]).filter(tg)},findLocation:g=function(e,t,n,r){var o=f.normalizePosition(e,r),i=ng(t,n,o);return ng(t,n,o).bind(v(lg,e)).orThunk(function(){return cg(e,t,n,i,r)})},prevLocation:v(g,!(lg=function(e,t){return e?t.fold(ie(b.some,Ym.start),b.none,ie(b.some,Ym.after),b.none):t.fold(b.none,ie(b.some,Ym.before),b.none,ie(b.some,Ym.end))})),nextLocation:v(g,!0),getElement:rg,outside:ig,inside:d},mg=function(e,t,n){var r=e?1:-1;return t.setRng(T(n.container(),n.offset()+r).toRange()),t.getSel().modify("move",e?"forward":"backward","word"),!0},dg=function(e){return V(e.selection.getSel().modify)},gg=function(e,t){var n=t.selection.getRng(),n=e?T.fromRangeEnd(n):T.fromRangeStart(n);return!!dg(t)&&(e&&Ta(n)?mg(!0,t.selection,n):!(e||!Na(n))&&mg(!1,t.selection,n))},hg=function(e,t){var n=e.dom.createRng();n.setStart(t.container(),t.offset()),n.setEnd(t.container(),t.offset()),e.selection.setRng(n)},pg=function(e){return!1!==e.settings.inline_boundaries},vg=function(e,t){e?t.setAttribute("data-mce-selected","inline-boundary"):t.removeAttribute("data-mce-selected")},bg=function(t,e,n){return qm(e,n).map(function(e){return hg(t,e),n})},yg=function(t,n,e){var r=t.getBody(),o=T.fromRangeStart(t.selection.getRng()),i=v(f.isInlineTarget,t);return fg.findLocation(e,i,r,o).bind(function(e){return bg(t,n,e)})},xg=function(e,t,n){t=_(t.select('*[data-mce-selected="inline-boundary"]'),e),n=_(n,e);R(xe(t,n),v(vg,!1)),R(xe(n,t),v(vg,!0))},wg=function(e,t){var n;e.selection.isCollapsed()&&!0!==e.composing&&t.get()&&(n=T.fromRangeStart(e.selection.getRng()),T.isTextPosition(n))&&!1===f.isAtZwsp(n)&&(hg(e,ks.removeAndReposition(t.get(),n)),t.set(null))},Cg=function(n,r,o,e){r.selection.isCollapsed()&&(e=_(e,n),R(e,function(e){var t=T.fromRangeStart(r.selection.getRng());fg.readLocation(n,r.getBody(),t).bind(function(e){return bg(r,o,e)})}))},qT=function(e,t,n){return function(){return!!pg(e)&&yg(e,t,n).isSome()}},u=function(t){var n=Oi(null),r=v(f.isInlineTarget,t);return t.on("NodeChange",function(e){pg(t)&&(xg(r,t.dom,e.parents),wg(t,n),Cg(r,t,n,e.parents))}),n},h=v(p=function(e,t,n){return function(){return!!pg(t)&&gg(e,t)}},!0),iN=v(p,!1),Sg={move:qT,moveNextWord:h,movePrevWord:iN,setupSelectedState:u,setCaretPosition:hg},kg=function(e){return!1!==e.settings.inline_boundaries},Tg=function(e,t){var n=J.document.createRange();return n.setStart(e.container(),e.offset()),n.setEnd(t.container(),t.offset()),n},Ng=function(r){return cu([c.firstPositionIn(r),c.lastPositionIn(r)],function(e,t){var e=f.normalizePosition(!0,e),n=f.normalizePosition(!1,t);return c.nextPosition(r,e).map(function(e){return e.isEqual(n)}).getOr(!0)}).getOr(!0)},Eg=function(t,n){return function(e){return qm(n,e).map(function(e){return Sg.setCaretPosition(t,e),!0}).getOr(!1)}},Rg=function(e,t,n,r){var o=e.getBody(),i=v(f.isInlineTarget,e);e.undoManager.ignore(function(){e.selection.setRng(Tg(n,r)),e.execCommand("Delete"),fg.readLocation(i,o,T.fromRangeStart(e.selection.getRng())).map(fg.inside).map(Eg(e,t))}),e.nodeChanged()},_g=function(e,t){t=js(t,e);return t||e},Ag=function(n,r,o,i){var a=_g(n.getBody(),i.container()),u=v(f.isInlineTarget,n),s=fg.readLocation(u,a,i);return s.bind(function(e){return o?e.fold(Z(b.some(fg.inside(e))),b.none,Z(b.some(fg.outside(e))),b.none):e.fold(b.none,Z(b.some(fg.outside(e))),b.none,Z(b.some(fg.inside(e))))}).map(Eg(n,r)).getOrThunk(function(){var t=c.navigate(o,a,i),e=t.bind(function(e){return fg.readLocation(u,a,e)});return(s.isSome()&&e.isSome()?f.findRootInline(u,a,i).map(function(e){return!!Ng(e)&&(Tm.deleteElement(n,o,U.fromDom(e)),!0)}):e.bind(function(e){return t.map(function(e){return o?Rg(n,r,i,e):Rg(n,r,e,i),!0})})).getOr(!1)})},Dg={backspaceDelete:function(e,t,n){var r;return!(!e.selection.isCollapsed()||!kg(e))&&(r=T.fromRangeStart(e.selection.getRng()),Ag(e,t,n,r))}},Pg=r("start","end"),Og=r("rng","table","cells"),Bg=i([{removeTable:["element"]},{emptyCells:["cells"]}]),Mg=function(e){return v(a,e)},Ig=function(e,t){return Ji(U.fromDom(e),"td,th",t)},Lg=function(e,t){return Ki(e,"table",t)},Fg=function(e){return!1===a(e.start(),e.end())},Hg=function(e,n){return Lg(e.start(),n).bind(function(t){return Lg(e.end(),n).bind(function(e){return a(t,e)?b.some(t):b.none()})})},zg=function(e){return $i(e,"td,th")},Ug=function(t,e){return Lg(t.start(),e).bind(function(e){return ke(zg(e)).map(function(e){return Pg(t.start(),e)})})},Wg=function(n,e){var t=Ig(e.startContainer,n),r=Ig(e.endContainer,n);return e.collapsed?b.none():cu([t,r],Pg).fold(function(){return t.fold(function(){return r.bind(function(t){return Lg(t,n).bind(function(e){return Se(zg(e)).map(function(e){return Pg(e,t)})})})},function(t){return Lg(t,n).bind(function(e){return ke(zg(e)).map(function(e){return Pg(t,e)})})})},function(e){return jg(n,e)?b.none():Ug(e,n)})},jg=function(e,t){return Hg(t,e).isSome()},Vg=function(e,t){var n=Ig(e.startContainer,t),r=Ig(e.endContainer,t);return cu([n,r],Pg).filter(Fg).filter(function(e){return jg(t,e)}).orThunk(function(){return Wg(t,e)})},qg=function(t,e){return Hg(t,e).map(function(e){return Og(t,e,zg(e))})},$g=function(e,t){var n=Mg(e);return Vg(t,n).bind(function(e){return qg(e,n)})},Yg=function(e,t){return de(e,function(e){return a(e,t)})},Xg=function(n){return cu([Yg(n.cells(),n.rng().start()),Yg(n.cells(),n.rng().end())],function(e,t){return n.cells().slice(e,t+1)})},Kg=function(n){return Xg(n).map(function(e){var t=n.cells();return e.length===t.length?Bg.removeTable(n.table()):Bg.emptyCells(e)})},Gg=function(e,t){return $g(e,t).bind(Kg)},Zg={getRanges:Jg=function(e){var t,n=[];if(e)for(t=0;t<e.rangeCount;t++)n.push(e.getRangeAt(t));return n},getSelectedNodes:function(e){return pe(e,function(e){e=iu(e);return e?[U.fromDom(e)]:[]})},hasMultipleRanges:function(e){return 1<Jg(e).length}},nh={getCellsFromRanges:Qg=function(e){return _(Zg.getSelectedNodes(e),Ro)},getCellsFromElement:eh=function(e){return $i(e,"td[data-mce-selected],th[data-mce-selected]")},getCellsFromElementOrRanges:th=function(e,t){t=eh(t),e=Qg(e);return 0<t.length?t:e},getCellsFromEditor:function(e){return th(Zg.getRanges(e.selection.getSel()),U.fromDom(e.getBody()))}},rh=function(e,t){return R(t,$l.fillWithPaddingBr),e.selection.setCursorLocation(t[0].dom(),0),!0},oh=function(e,t){return Tm.deleteElement(e,!1,t),!0},ih=function(t,e,n){return Gg(e,n).map(function(e){return e.fold(v(oh,t),v(rh,t))})},ah=dh,uh=function(t,e,n,r){return lh(e,r).fold(function(){return ih(t,e,n)},function(e){return ah(t,e)}).getOr(!1)},sh=function(e,t){var n=U.fromDom(e.getBody()),r=e.selection.getRng(),o=nh.getCellsFromEditor(e);return 0!==o.length?rh(e,o):uh(e,n,r,t)},ch=function(e,t){return fe(cd.parentsAndSelf(t,e),Ro)},lh=function(e,t){return fe(cd.parentsAndSelf(t,e),function(e){return"caption"===cr(e)})},fh=function(e,t,n,r,o){return c.navigate(n,e.getBody(),o).bind(function(e){return ch(t,U.fromDom(e.getNode())).map(function(e){return!1===a(e,r)})})},mh=function(e,n,r,o){return c.firstPositionIn(e.dom()).bind(function(t){return c.lastPositionIn(e.dom()).map(function(e){return n?r.isEqual(t)&&o.isEqual(e):r.isEqual(e)&&o.isEqual(t)})}).getOr(!0)},gh=dh=function(e,t){return $l.fillWithPaddingBr(t),e.selection.setCursorLocation(t.dom(),0),b.some(!0)},hh=function(e,t,n){return lh(e,U.fromDom(n.getNode())).map(function(e){return!1===a(e,t)})},ph=function(t,n,r,o,i){return c.navigate(r,t.getBody(),i).bind(function(e){return mh(o,r,i,e)?gh(t,o):hh(n,o,e)}).or(b.some(!0))},vh=function(t,n,r,e){var o=T.fromRangeStart(t.selection.getRng());return ch(r,e).bind(function(e){return Gf.isEmpty(e)?dh(t,e):fh(t,r,n,e,o)})},bh=function(e,t,n,r){var o=T.fromRangeStart(e.selection.getRng());return Gf.isEmpty(r)?dh(e,r):ph(e,n,t,r,o)},yh=function(t,n,e){var r=U.fromDom(t.getBody());return lh(r,e).fold(function(){return vh(t,n,r,e)},function(e){return bh(t,n,r,e)}).getOr(!1)},xh={backspaceDelete:function(e,t){var n=U.fromDom(e.selection.getStart(!0)),r=nh.getCellsFromEditor(e);return e.selection.isCollapsed()&&0===r.length?yh(e,t,n):sh(e,n)}},wh=w.isEq,Sh=function(t,e,n,r){var o=t.dom.getRoot();return e!==o&&(e=t.dom.getParent(e,function(e){return!!Ch(t,e,n)||e.parentNode===o||!!Nh(t,e,n,r,!0)}),Nh(t,e,n,r))},Th=function(e,t,n,r,o,i){var a,u,s,c=n[r];if(n.onmatch)return n.onmatch(t,n,r);if(c)if(void 0===c.length){for(a in c)if(c.hasOwnProperty(a)){if(u="attributes"===r?e.getAttrib(t,a):w.getStyle(e,t,a),o&&!u&&!n.exact)return;if((!o||n.exact)&&!wh(u,w.normalizeStyleValue(e,w.replaceVars(c[a],i),a)))return}}else for(s=0;s<c.length;s++)if("attributes"===r?e.getAttrib(t,c[s]):w.getStyle(e,t,c[s]))return n;return n},Eh={matchNode:Nh=function(e,t,n,r,o){var i,a,u,s,c=e.formatter.get(n),l=e.dom;if(c&&t)for(a=0;a<c.length;a++)if(i=c[a],kh(e.dom,t,i)&&Th(l,t,i,"attributes",o,r)&&Th(l,t,i,"styles",o,r)){if(s=i.classes)for(u=0;u<s.length;u++)if(!e.dom.hasClass(t,s[u]))return;return i}},matchName:kh=function(e,t,n){return!!wh(t,n.inline)||!!wh(t,n.block)||(n.selector?1===t.nodeType&&e.is(t,n.selector):void 0)},match:function(e,t,n,r){var o;return r?Sh(e,r,t,n):(r=e.selection.getNode(),!!Sh(e,r,t,n)||!((o=e.selection.getStart())===r||!Sh(e,o,t,n)))},matchAll:function(r,o,i){var a=[],u={},e=r.selection.getStart();return r.dom.getParent(e,function(e){for(var t,n=0;n<o.length;n++)t=o[n],!u[t]&&Nh(r,e,t,i)&&(u[t]=!0,a.push(t))},r.dom.getRoot()),a},canApply:function(e,t){var n,r,o,i,a=e.formatter.get(t),u=e.dom;if(a)for(t=e.selection.getStart(),n=w.getParents(u,t),o=a.length-1;0<=o;o--){if(!(i=a[o].selector)||a[o].defaultBlock)return!0;for(r=n.length-1;0<=r;r--)if(u.is(n[r],i))return!0}return!1},matchesUnInheritedFormatSelector:Ch=function(e,t,n){var r,o=e.formatter.get(n);if(o)for(r=0;r<o.length;r++)if(!1===o[r].inherit&&e.dom.is(t,o[r].selector))return!0;return!1}},Rh=function(e,t){return e.splitText(t)},_h={split:function(e){var t=e.startContainer,n=e.startOffset,r=e.endContainer,e=e.endOffset;return t===r&&oe.isText(t)?0<n&&n<t.nodeValue.length&&(t=(r=Rh(t,n)).previousSibling,n<e?(t=r=Rh(r,e-=n).previousSibling,e=r.nodeValue.length,n=0):e=0):(oe.isText(t)&&0<n&&n<t.nodeValue.length&&(t=Rh(t,n),n=0),oe.isText(r)&&0<e&&e<r.nodeValue.length&&(e=(r=Rh(r,e).previousSibling).nodeValue.length)),{startContainer:t,startOffset:n,endContainer:r,endOffset:e}}},Ah=l.ZWSP,Dh="_mce_caret",Ph=function(e,t){return e.importNode(t,!0)},Oh=function(e){for(var t=[];e;){if(3===e.nodeType&&e.nodeValue!==Ah||1<e.childNodes.length)return[];1===e.nodeType&&t.push(e),e=e.firstChild}return t},Bh=function(e){return 0<Oh(e).length},Mh=function(e){var t;if(e)for(e=(t=new BN(e,e)).current();e;e=t.next())if(3===e.nodeType)return e;return null},Ih=function(e){var t=U.fromTag("span");return kr(t,{id:Dh,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&ki(t,U.fromText(Ah)),t},Lh=function(e){e=Mh(e);return e&&e.nodeValue.charAt(0)===Ah&&e.deleteData(0,1),e},Fh=function(e,t,n){var r,o,i;void 0===n&&(n=!0),r=e.dom,o=e.selection,Bh(t)?Tm.deleteElement(e,!1,U.fromDom(t),n):(e=o.getRng(),n=r.getParent(t,r.isBlock),i=Lh(t),e.startContainer===i&&0<e.startOffset&&e.setStart(i,e.startOffset-1),e.endContainer===i&&0<e.endOffset&&e.setEnd(i,e.endOffset-1),r.remove(t,!0),n&&r.isEmpty(n)&&$l.fillWithPaddingBr(U.fromDom(n)),o.setRng(e))},Hh=function(e,t,n){void 0===n&&(n=!0);var r=e.dom,o=e.selection;if(t)Fh(e,t,n);else if(!(t=fs(e.getBody(),o.getStart())))for(;t=r.get(Dh);)Fh(e,t,!1)},zh=function(e,t,n){var r=e.dom,e=r.getParent(n,v(w.isTextBlock,e));e&&r.isEmpty(e)||($l.removeTrailingBr(U.fromDom(n)),r.isEmpty(n))?n.parentNode.replaceChild(t,n):r.insertAfter(t,n)},Uh=function(e,t){return e.appendChild(t),t},Wh=function(e,t){e=ce(e,function(e,t){return Uh(e,t.cloneNode(!1))},t);return Uh(e,e.ownerDocument.createTextNode(Ah))},jh=function(e,t,n){var r,o,i=e.selection,a=i.getRng(!0),u=a.startOffset,s=a.startContainer.nodeValue,c=fs(e.getBody(),i.getStart());c&&(r=Mh(c)),o=/[^\s\u00a0\u00ad\u200b\ufeff]/,s&&0<u&&u<s.length&&o.test(s.charAt(u))&&o.test(s.charAt(u-1))?(o=i.getBookmark(),a.collapse(!0),a=cl.expandRng(e,a,e.formatter.get(t)),a=_h.split(a),e.formatter.apply(t,n,a),i.moveToBookmark(o)):(c&&r.nodeValue===Ah||(r=(c=Ph(e.getDoc(),Ih(!0).dom())).firstChild,a.insertNode(c),u=1),e.formatter.apply(t,n,c),i.setCursorLocation(r,u))},Vh=function(e,t,n,r){var o,i,a=e.dom,u=e.selection,s=[],c=u.getRng(),l=c.startContainer,f=c.startOffset,d=l;for(3===l.nodeType&&(f!==l.nodeValue.length&&(o=!0),d=d.parentNode);d;){if(Eh.matchNode(e,d,t,n,r)){i=d;break}d.nextSibling&&(o=!0),s.push(d),d=d.parentNode}i&&(o?(f=u.getBookmark(),c.collapse(!0),l=cl.expandRng(e,c,e.formatter.get(t),!0),l=_h.split(l),e.formatter.remove(t,n,l),u.moveToBookmark(f)):(c=fs(e.getBody(),i),l=Ih(!1).dom(),f=Wh(s,l),zh(e,l,c||i),Fh(e,c,!1),u.setCursorLocation(f,1),a.isEmpty(i)&&a.remove(i)))},qh=function(e,t){var n=e.selection,r=e.getBody();Hh(e,null,!1),8!==t&&46!==t||!n.isCollapsed()||n.getStart().innerHTML!==Ah||Hh(e,fs(r,n.getStart())),37!==t&&39!==t||Hh(e,fs(r,n.getStart()))},$h=function(t){t.on("mouseup keydown",function(e){qh(t,e.keyCode)})},Yh=function(e,t){var n=Ih(!1),t=Wh(t,n.dom());return wi(U.fromDom(e),n),_i(U.fromDom(e)),T(t,0)},Xh=function(e,t){return e.schema.getTextInlineElements().hasOwnProperty(cr(t))&&!ls(t.dom())&&!oe.isBogus(t.dom())},Kh=function(e){return ls(e.dom())&&Bh(e.dom())},Gh=function(e,t){var n=cd.parentsAndSelf(t,e);return de(n,xo).fold(Z(n),function(e){return n.slice(0,e)})},Jh=function(e){return 1===Qr(e).length},Zh=function(e,t,n,r){var o=v(Xh,t),r=Q(_(r,o),function(e){return e.dom()});0===r.length?Tm.deleteElement(t,e,n):(o=Yh(n.dom(),r),t.selection.setRng(o.toRange()))},Qh=function(n,r){var e=U.fromDom(n.getBody()),t=U.fromDom(n.selection.getStart()),o=_(Gh(e,t),Jh);return ke(o).map(function(e){var t=T.fromRangeStart(n.selection.getRng());return!(!zf.willDeleteLastPositionInElement(r,t,e.dom())||Kh(e)||(Zh(r,n,e,o),0))}).getOr(!1)},ep={backspaceDelete:function(e,t){return!!e.selection.isCollapsed()&&Qh(e,t)}},tp=oe.isContentEditableTrue,np=oe.isContentEditableFalse,rp=function(e,t,n,r,o){return t._selectionOverrides.showCaret(e,n,r,o)},op=function(e){var t=e.ownerDocument.createRange();return t.selectNode(e),t},ip=function(e,t){return e.fire("BeforeObjectSelected",{target:t}).isDefaultPrevented()?null:op(t)},ap=function(e,t,n){var t=Gs(1,e.getBody(),t),t=T.fromRangeStart(t),r=t.getNode();return np(r)?rp(1,e,r,!t.isAtEnd(),!1):(r=t.getNode(!0),np(r)?rp(1,e,r,!1,!1):(r=e.dom.getParent(t.getNode(),function(e){return np(e)||tp(e)}),np(r)?rp(1,e,r,!1,n):null))},up=function(e,t,n){return t&&t.collapsed&&ap(e,t,n)||t},sp=function(e,t){oe.isText(t)&&0===t.data.length&&e.remove(t)},cp=function(e,t,n,r,o,i){r=rp(r,e,i.getNode(!o),o,!0);return(t.collapsed?(i=t.cloneRange(),o?i.setEnd(r.startContainer,r.startOffset):i.setStart(r.endContainer,r.endOffset),i):t).deleteContents(),e.selection.setRng(r),sp(e.dom,n),!0},lp={backspaceDelete:function(e,t){var n,r,o,i,a,u=e.selection.getRng();return!!oe.isText(u.commonAncestorContainer)&&(n=t?rc.Forwards:rc.Backwards,r=pc(e.getBody()),a=v(tc,r.next),r=v(tc,r.prev),a=t?a:r,r=t?Ud:Wd,o=Zs(n,e.getBody(),u),!!(i=f.normalizePosition(t,a(o))))&&(r(i)?cp(e,u,o.getNode(),n,t,i):!!((a=a(i))&&r(a)&&nc(i,a))&&cp(e,u,o.getNode(),n,t,a))}},fp=function(e,t){e.getDoc().execCommand(t,!1,null)},dp={deleteCommand:function(e){Om.backspaceDelete(e,!1)||lp.backspaceDelete(e,!1)||Dg.backspaceDelete(e,!1)||wd.backspaceDelete(e,!1)||xh.backspaceDelete(e)||Rd.backspaceDelete(e,!1)||ep.backspaceDelete(e,!1)||(fp(e,"Delete"),zf.paddEmptyBody(e))},forwardDeleteCommand:function(e){Om.backspaceDelete(e,!0)||lp.backspaceDelete(e,!0)||Dg.backspaceDelete(e,!0)||wd.backspaceDelete(e,!0)||xh.backspaceDelete(e)||Rd.backspaceDelete(e,!0)||ep.backspaceDelete(e,!0)||fp(e,"ForwardDelete")}},mp=function(e,t,n){var r=e.getParam(t,n);return-1!==r.indexOf("=")?(t=e.getParam(t,"","hash")).hasOwnProperty(e.id)?t[e.id]:n:r},A={getIframeAttrs:function(e){return e.getParam("iframe_attrs",{})},getDocType:function(e){return e.getParam("doctype","<!DOCTYPE html>")},getDocumentBaseUrl:function(e){return e.getParam("document_base_url","")},getBodyId:function(e){return mp(e,"body_id","tinymce")},getBodyClass:function(e){return mp(e,"body_class","")},getContentSecurityPolicy:function(e){return e.getParam("content_security_policy","")},shouldPutBrInPre:function(e){return e.getParam("br_in_pre",!0)},getForcedRootBlock:function(e){return e.getParam("force_p_newlines",!1)?"p":!1===(e=e.getParam("forced_root_block","p"))?"":e},getForcedRootBlockAttrs:function(e){return e.getParam("forced_root_block_attrs",{})},getBrNewLineSelector:function(e){return e.getParam("br_newline_selector",".mce-toc h2,figcaption,caption")},getNoNewLineSelector:function(e){return e.getParam("no_newline_selector","")},shouldKeepStyles:function(e){return e.getParam("keep_styles",!0)},shouldEndContainerOnEmptyBlock:function(e){return e.getParam("end_container_on_empty_block",!1)},getFontStyleValues:function(e){return ne.explode(e.getParam("font_size_style_values",""))},getFontSizeClasses:function(e){return ne.explode(e.getParam("font_size_classes",""))},getImagesDataImgFilter:function(e){return e.getParam("images_dataimg_filter",Z(!0),"function")},isAutomaticUploadsEnabled:function(e){return e.getParam("automatic_uploads",!0,"boolean")},shouldReuseFileName:function(e){return e.getParam("images_reuse_filename",!1,"boolean")},shouldReplaceBlobUris:function(e){return e.getParam("images_replace_blob_uris",!0,"boolean")},getImageUploadUrl:function(e){return e.getParam("images_upload_url","","string")},getImageUploadBasePath:function(e){return e.getParam("images_upload_base_path","","string")},getImagesUploadCredentials:function(e){return e.getParam("images_upload_credentials",!1,"boolean")},getImagesUploadHandler:function(e){return e.getParam("images_upload_handler",null,"function")},shouldUseContentCssCors:function(e){return e.getParam("content_css_cors",!1,"boolean")}},gp=function(t,n,e){var r=function(e){return Pr(e,t)},o=function(e){return a(U.fromDom(n),e)};return Xi(U.fromDom(e),function(e){return r(e).isSome()},o).bind(r)},hp=function(e,t){t=Math.pow(10,t);return Math.round(e*t)/t},t=function(e,t){return/[0-9.]+px$/.test(e)?hp(72*parseInt(e,10)/96,t||0)+"pt":e},pN=function(e){return e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,",")},pp=function(e,t){return b.from(s.DOM.getStyle(t,e,!0))},vp={getFontSize:(mN=function(n){return function(t,e){return b.from(e).map(U.fromDom).filter(fr).bind(function(e){return gp(n,t,e.dom()).or(pp(n,e.dom()))}).getOr("")}})("font-size"),getFontFamily:ie(pN,mN("font-family")),toPt:t},bp=function(e){return c.firstPositionIn(e.getBody()).map(function(e){e=e.container();return oe.isText(e)?e.parentNode:e})},yp=function(e,t){return e.startContainer===t&&0===e.startOffset},xp=function(n){return b.from(n.selection.getRng()).bind(function(e){var t=n.getBody();return yp(e,t)?b.none():b.from(n.selection.getStart(!0))})},wp=function(e,t){var n,r;return/^[0-9\.]+$/.test(t)&&1<=(n=parseInt(t,10))&&n<=7?(r=A.getFontStyleValues(e),(e=A.getFontSizeClasses(e))?e[n-1]||t:r[n-1]||t):t},Cp=function(e,t){e.formatter.toggle("fontname",{value:wp(e,t)}),e.nodeChanged()},Sp=function(t){return xp(t).fold(function(){return bp(t).map(function(e){return vp.getFontFamily(t.getBody(),e)}).getOr("")},function(e){return vp.getFontFamily(t.getBody(),e)})},kp=function(e,t){e.formatter.toggle("fontsize",{value:wp(e,t)}),e.nodeChanged()},Tp=function(t){return xp(t).fold(function(){return bp(t).map(function(e){return vp.getFontSize(t.getBody(),e)}).getOr("")},function(e){return vp.getFontSize(t.getBody(),e)})},Np={isEq:function(e,t){return e&&t&&e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset}},Ep=function(e,t,n){for(;e&&e!==t;){if(n(e))return e;e=e.parentNode}return null},Rp=function(e,t,n){return null!==Ep(e,t,n)},_p=function(e,t,n){return Rp(e,t,function(e){return e.nodeName===n})},Ap=function(e){return e&&"TABLE"===e.nodeName},Dp=function(e){return e&&/^(TD|TH|CAPTION)$/.test(e.nodeName)},Pp=function(e,t){return Ca(e)&&!1===Rp(e,t,ls)},Op=function(e,t,n){for(var r=new BN(t,e.getParent(t.parentNode,e.isBlock)||e.getRoot());t=r[n?"prev":"next"]();)if(oe.isBr(t))return!0},Bp=function(e,t){return e.previousSibling&&e.previousSibling.nodeName===t},Mp=function(e,t){for(;t&&t!==e;){if(oe.isContentEditableFalse(t))return!0;t=t.parentNode}return!1},Ip=function(e,t,n,r,o){var i,a,u,s=e.getRoot(),c=e.schema.getNonEmptyElements(),l=e.getParent(o.parentNode,e.isBlock)||s;if(r&&oe.isBr(o)&&t&&e.isEmpty(l))return b.some(y(o.parentNode,e.nodeIndex(o)));for(i=new BN(o,l);u=i[r?"prev":"next"]();){if("false"===e.getContentEditableParent(u)||Pp(u,s))return b.none();if(oe.isText(u)&&0<u.nodeValue.length)return!1===_p(u,s,"A")?b.some(y(u,r?u.nodeValue.length:0)):b.none();if(e.isBlock(u)||c[u.nodeName.toLowerCase()])return b.none();a=u}return n&&a?b.some(y(a,0)):b.none()},Lp=function(e,t,n,r){var o,i,a=e.getRoot(),u=!1,s=r[(n?"start":"end")+"Container"],c=r[(n?"start":"end")+"Offset"],r=oe.isElement(s)&&c===s.childNodes.length,l=e.schema.getNonEmptyElements(),f=n;if(Ca(s))return b.none();if(oe.isElement(s)&&c>s.childNodes.length-1&&(f=!1),oe.isDocument(s)&&(s=a,c=0),s===a){if(f&&(i=s.childNodes[0<c?c-1:0])){if(Ca(i))return b.none();if(l[i.nodeName]||Ap(i))return b.none()}if(s.hasChildNodes()){if(c=Math.min(!f&&0<c?c-1:c,s.childNodes.length-1),s=s.childNodes[c],c=oe.isText(s)&&r?s.data.length:0,!t&&s===a.lastChild&&Ap(s))return b.none();if(Mp(a,s)||Ca(s))return b.none();if(s.hasChildNodes()&&!1===Ap(s)){o=new BN(i=s,a);do{if(oe.isContentEditableFalse(i)||Ca(i)){u=!1;break}if(oe.isText(i)&&0<i.nodeValue.length){c=f?0:i.nodeValue.length,s=i,u=!0;break}if(l[i.nodeName.toLowerCase()]&&!Dp(i)){c=e.nodeIndex(i),s=i.parentNode,f||c++,u=!0;break}}while(i=f?o.next():o.prev())}}}return t&&(oe.isText(s)&&0===c&&Ip(e,r,t,!0,s).each(function(e){s=e.container(),c=e.offset(),u=!0}),oe.isElement(s))&&(i=(i=s.childNodes[c])||s.childNodes[c-1])&&oe.isBr(i)&&!Bp(i,"A")&&!Op(e,i,!1)&&!Op(e,i,!0)&&Ip(e,r,t,!0,i).each(function(e){s=e.container(),c=e.offset(),u=!0}),f&&!t&&oe.isText(s)&&c===s.nodeValue.length&&Ip(e,r,t,!1,s).each(function(e){s=e.container(),c=e.offset(),u=!0}),u?b.some(y(s,c)):b.none()},Fp={normalize:function(e,t){var n=t.collapsed,r=t.cloneRange(),o=y.fromRangeStart(t);return Lp(e,n,!0,r).each(function(e){n&&y.isAbove(o,e)||r.setStart(e.container(),e.offset())}),n||Lp(e,n,!1,r).each(function(e){r.setEnd(e.container(),e.offset())}),n&&r.collapse(!0),Np.isEq(t,r)?b.none():b.some(r)}},Hp=function(e,t,n){for(var r,o=new BN(t,n),i=e.getNonEmptyElements();r=o.next();)if(i[r.nodeName.toLowerCase()]||0<r.length)return!0},zp=function(e,t,n){var r=e.create("span",{},"&nbsp;");n.parentNode.insertBefore(r,n),t.scrollIntoView(r),e.remove(r)},Up=function(e,t,n,r){e=e.createRng();r?(e.setStartBefore(n),e.setEndBefore(n)):(e.setStartAfter(n),e.setEndAfter(n)),t.setRng(e)},Wp=function(e,t){var n,r,o,i,a,u,s,c=e.selection,l=e.dom,f=c.getRng();Fp.normalize(l,f).each(function(e){f.setStart(e.startContainer,e.startOffset),f.setEnd(e.endContainer,e.endOffset)}),o=f.startOffset,1===(i=f.startContainer).nodeType&&i.hasChildNodes()&&(a=o>i.childNodes.length-1,i=i.childNodes[Math.min(o,i.childNodes.length-1)]||i,o=a&&3===i.nodeType?i.nodeValue.length:0),s=(u=(a=l.getParent(i,l.isBlock))?l.getParent(a.parentNode,l.isBlock):null)?u.nodeName.toUpperCase():"",t=t&&t.ctrlKey,"LI"!==s||t||(a=u),i&&3===i.nodeType&&o>=i.nodeValue.length&&(Hp(e.schema,i,a)||(n=l.create("br"),f.insertNode(n),f.setStartAfter(n),f.setEndAfter(n),r=!0)),n=l.create("br"),Yu(l,f,n),zp(l,c,n),Up(l,c,n,r),e.undoManager.add()},jp=function(e,t){var n=U.fromTag("br");wi(U.fromDom(t),n),e.undoManager.add()},Vp=function(e,t){$p(e.getBody(),t)||Ci(U.fromDom(t),U.fromTag("br"));var n=U.fromTag("br");Ci(U.fromDom(t),n),zp(e.dom,e.selection,n.dom()),Up(e.dom,e.selection,n.dom(),!1),e.undoManager.add()},qp=function(e){return oe.isBr(e.getNode())},$p=function(e,t){return!!qp(T.after(t))||c.nextPosition(e,T.after(t)).map(function(e){return oe.isBr(e.getNode())}).getOr(!1)},Yp=function(e){return e&&"A"===e.nodeName&&"href"in e},Xp=function(e){return e.fold(Z(!1),Yp,Yp,Z(!1))},Kp=function(e){var t=v(f.isInlineTarget,e),n=T.fromRangeStart(e.selection.getRng());return fg.readLocation(t,e.getBody(),n).filter(Xp)},Gp=function(e,t){t.fold(C,v(jp,e),v(Vp,e),C)},Jp={insert:function(e,t){var n=Kp(e);n.isSome()?n.each(v(Gp,e)):Wp(e,t)}},i([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),i([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Zp=r("start","soffset","finish","foffset"),Qp=ur.detect().browser,ev=function(e,t){t=dr(t)?hl(t).length:Qr(t).length+1;return t<e?t:e<0?0:e},tv=function(e){return Zp(e.start(),ev(e.soffset(),e.start()),e.finish(),ev(e.foffset(),e.finish()))},nv=function(e,t){return jr(e,t)||a(e,t)},rv=function(t){return function(e){return nv(t,e.start())&&nv(t,e.finish())}},ov=function(e){return!0===e.inline||Qp.isIE()},iv=function(e){return Zp(U.fromDom(e.startContainer),e.startOffset,U.fromDom(e.endContainer),e.endOffset)},cv=function(e){var t=J.document.createRange();try{return t.setStart(e.start().dom(),e.soffset()),t.setEnd(e.finish().dom(),e.foffset()),b.some(t)}catch(e){return b.none()}},fv={store:function(e){var t=ov(e)?uv(U.fromDom(e.getBody())):b.none();e.bookmark=t.isSome()?t:e.bookmark},storeNative:function(e,t){var n=U.fromDom(e.getBody()),t=(ov(e)?b.from(t):b.none()).map(iv).filter(rv(n));e.bookmark=t.isSome()?t:e.bookmark},readRange:av=function(e){e=e.getSelection();return(e&&0!==e.rangeCount?b.from(e.getRangeAt(0)):b.none()).map(iv)},restore:function(t){lv(t).each(function(e){t.selection.setRng(e)})},getRng:lv=function(e){return(e.bookmark||b.none()).bind(v(sv,U.fromDom(e.getBody()))).bind(cv)},getBookmark:uv=function(e){var t=$r(e);return av(t.dom()).filter(rv(e))},validate:sv=function(e,t){return b.from(t).filter(rv(e)).map(tv)}},dv=function(e,t,n,r,o,i){var a;"false"!==e.getContentEditable(i)&&(n=n?"margin":"padding",n="TABLE"===i.nodeName?"margin":n,n+="rtl"===e.getStyle(i,"direction",!0)?"Right":"Left","outdent"===t?(a=Math.max(0,parseInt(i.style[n]||0,10)-r),e.setStyle(i,n,a?a+o:"")):(a=parseInt(i.style[n]||0,10)+r+o,e.setStyle(i,n,a)))},mv=function(e){return ko(e)||To(e)},gv=function(e){return Yr(e).map(mv).getOr(!1)},hv=function(e){return _(Q(e.selection.getSelectedBlocks(),U.fromDom),function(e){return!mv(e)&&!gv(e)})},pv=function(e,t){var n=e.settings,r=e.dom,o=e.selection,i=e.formatter,a=/[a-z%]+$/i.exec(n.indentation)[0],u=parseInt(n.indentation,10),s=e.getParam("indent_use_margin",!1);e.queryCommandState("InsertUnorderedList")||e.queryCommandState("InsertOrderedList")||n.forced_root_block||r.getParent(o.getNode(),r.isBlock)||i.apply("div"),R(hv(e),function(e){dv(r,t,s,u,a,e.dom())})},vv=ne.each,bv=ne.extend,yv=ne.map,xv=ne.inArray,wv=ne.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend"," "),(Cv=function(a){var u=this,s={},c=function(){return!1},l=function(){return!0},f=(a=a||{}).scope||u,d=a.toggleEvent||c,r=function(e,t,n,r){var o,i,a;if(t=!1===t?c:t)for(t={func:t},r&&ne.extend(t,r),a=(i=e.toLowerCase().split(" ")).length;a--;)e=i[a],(o=s[e])||(o=s[e]=[],d(e,!0)),n?o.unshift(t):o.push(t);return u},m=function(e,t){var n,r,o,i,a;if(e)for(n=(i=e.toLowerCase().split(" ")).length;n--;){if(e=i[n],r=s[e],!e){for(o in s)d(o,!1),delete s[o];return u}if(r){if(t)for(a=r.length;a--;)r[a].func===t&&(r=r.slice(0,a).concat(r.slice(a+1)),s[e]=r);else r.length=0;r.length||(d(e,!1),delete s[e])}}else{for(e in s)d(e,!1);s={}}return u},e=function(e,t,n){return r(e,t,n,{once:!0})},t=function(e){return e=e.toLowerCase(),!(!s[e]||0===s[e].length)};u.fire=function(e,t){var n,r,o,i;if(e=e.toLowerCase(),(t=t||{}).type=e,t.target||(t.target=f),t.preventDefault||(t.preventDefault=function(){t.isDefaultPrevented=l},t.stopPropagation=function(){t.isPropagationStopped=l},t.stopImmediatePropagation=function(){t.isImmediatePropagationStopped=l},t.isDefaultPrevented=c,t.isPropagationStopped=c,t.isImmediatePropagationStopped=c),a.beforeFire&&a.beforeFire(t),n=s[e])for(r=0,o=n.length;r<o;r++){if((i=n[r]).once&&m(e,i.func),t.isImmediatePropagationStopped())return t.stopPropagation(),t;if(!1===i.func.call(f,t))return t.preventDefault(),t}return t},u.on=r,u.off=m,u.once=e,u.has=t}).isNative=function(e){return!!wv[e.toLowerCase()]},Sv=function(n){return n._eventDispatcher||(n._eventDispatcher=new Cv({scope:n,toggleEvent:function(e,t){Cv.isNative(e)&&n.toggleNativeEvent&&n.toggleNativeEvent(e,t)}})),n._eventDispatcher},Tv={firePreProcess:function(e,t){return e.fire("PreProcess",t)},firePostProcess:function(e,t){return e.fire("PostProcess",t)},fireRemove:function(e){return e.fire("remove")},fireDetach:function(e){return e.fire("detach")},fireSwitchMode:function(e,t){return e.fire("SwitchMode",{mode:t})},fireObjectResizeStart:function(e,t,n,r){e.fire("ObjectResizeStart",{target:t,width:n,height:r})},fireObjectResized:function(e,t,n,r){e.fire("ObjectResized",{target:t,width:n,height:r})}},Nv=function(e,t,n){try{e.getDoc().execCommand(t,!1,n)}catch(e){}},Ev=function(e,t,n){Vi(e,t)&&!1===n?ji(e,t):n&&Ui(e,t)},Rv=function(e,t){Ev(U.fromDom(e.getBody()),"mce-content-readonly",t),t?(e.selection.controlSelection.hideResizeRect(),e.readonly=!0,e.getBody().contentEditable="false"):(e.readonly=!1,e.getBody().contentEditable="true",Nv(e,"StyleWithCSS",!1),Nv(e,"enableInlineTableEditing",!1),Nv(e,"enableObjectResizing",!1),e.focus(),e.nodeChanged())},_v=function(e,t){t!==Av(e)&&(e.initialized?Rv(e,"readonly"===t):e.on("init",function(){Rv(e,"readonly"===t)}),Tv.fireSwitchMode(e,t))},Av=function(e){return e.readonly?"readonly":"design"},Dv=function(e){return!0===e.readonly},Pv=s.DOM,Bv=function(e,t){return"selectionchange"===t?e.getDoc():!e.inline&&/^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(t)?e.getDoc().documentElement:e.settings.event_root?(e.eventRoot||(e.eventRoot=Pv.select(e.settings.event_root)[0]),e.eventRoot):e.getBody()},Mv=function(e){return!e.hidden&&!e.readonly},Iv=function(e,t,n){Mv(e)?e.fire(t,n):Dv(e)&&n.preventDefault()},Lv=function(i,a){var e,t;i.delegates||(i.delegates={}),i.delegates[a]||i.removed||(e=Bv(i,a),i.settings.event_root?(Ov||(Ov={},i.editorManager.on("removeEditor",function(){if(!i.editorManager.activeEditor&&Ov){for(var e in Ov)i.dom.unbind(Bv(i,e));Ov=null}})),Ov[a]||(Ov[a]=t=function(e){for(var t,n=e.target,r=i.editorManager.get(),o=r.length;o--;)(t=r[o].getBody())!==n&&!Pv.isChildOf(n,t)||Iv(r[o],a,e)},Pv.bind(e,a,t))):(Pv.bind(e,a,t=function(e){Iv(i,a,e)}),i.delegates[a]=t))},Fv=ne.extend({},kv={fire:function(e,t,n){var r;if((!this.removed||"remove"===e||"detach"===e)&&(t=Sv(this).fire(e,t,n),!1!==n)&&this.parent)for(r=this.parent();r&&!t.isPropagationStopped();)r.fire(e,t,!1),r=r.parent();return t},on:function(e,t,n){return Sv(this).on(e,t,n)},off:function(e,t){return Sv(this).off(e,t)},once:function(e,t){return Sv(this).once(e,t)},hasEventListeners:function(e){return Sv(this).has(e)}},{bindPendingEventDelegates:function(){var t=this;ne.each(t._pendingNativeEvents,function(e){Lv(t,e)})},toggleNativeEvent:function(e,t){var n=this;"focus"!==e&&"blur"!==e&&(t?n.initialized?Lv(n,e):n._pendingNativeEvents?n._pendingNativeEvents.push(e):n._pendingNativeEvents=[e]:n.initialized&&(n.dom.unbind(Bv(n,e),e,n.delegates[e]),delete n.delegates[e]))},unbindAllNativeEvents:function(){var e,t=this,n=t.getBody(),r=t.dom;if(t.delegates){for(e in t.delegates)t.dom.unbind(Bv(t,e),e,t.delegates[e]);delete t.delegates}!t.inline&&n&&r&&(n.onload=null,r.unbind(t.getWin()),r.unbind(t.getDoc())),r&&(r.unbind(n),r.unbind(t.getContainer()))}}),Hv=ne.each,zv=ne.explode,Uv={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},Wv=ne.makeMap("alt,ctrl,shift,meta,access"),jv=function(e){var t=Vr(e).dom();return e.dom()===t.activeElement},Vv=function(e){e=void 0!==e?e.dom():J.document;return b.from(e.activeElement).map(U.fromDom)},qv=function(t){return Vv(Vr(t)).filter(function(e){return t.dom().contains(e.dom())})},$v=function(t,e){return t.dom.getParent(e,function(e){return"true"===t.dom.getContentEditable(e)})},Yv=function(e){return e.collapsed?b.from(au(e.startContainer,e.startOffset)).map(U.fromDom):b.none()},Xv=function(t,e){return Yv(e).bind(function(e){return Eo(e)?b.some(e):!1===jr(t,e)?b.some(t):b.none()})},Kv=function(t,e){Xv(U.fromDom(t.getBody()),e).bind(function(e){return c.firstPositionIn(e.dom())}).fold(function(){t.selection.normalize()},function(e){return t.selection.setRng(e.toRange())})},Gv=function(t){if(t.setActive)try{t.setActive()}catch(e){t.focus()}else t.focus()},Jv=function(e){return jv(e)||qv(e).isSome()},Zv=function(e){return e.iframeElement&&jv(U.fromDom(e.iframeElement))},Qv=function(e){e=e.getBody();return e&&Jv(U.fromDom(e))},tb=function(t){var e=t.selection,n=t.settings.content_editable,r=t.getBody(),o=e.getRng();t.quirks.refreshContentEditable(),e=$v(t,e.getNode()),t.$.contains(r,e)?(Gv(e),Kv(t,o)):(void 0!==t.bookmark&&!1===eb(t)&&fv.getRng(t).each(function(e){t.selection.setRng(e),o=e}),n||(ee.opera||Gv(r),t.getWin().focus()),(ee.gecko||n)&&(Gv(r),Kv(t,o))),nb(t)},nb=function(e){return e.editorManager.setActive(e)},rb={focus:function(e,t){e.removed||(t?nb:tb)(e)},hasFocus:eb=function(e){return(e.inline?Qv:Zv)(e)}},e=function(e,t){return parseInt(Ar(t,e),10)},ob=v(xN=function(e,t){return t.dom()[e]},"clientWidth"),ib=v(xN,"clientHeight"),ab=v(e,"margin-top"),ub=v(e,"margin-left"),sb=function(e){return e.dom().getBoundingClientRect()},cb=function(e,t,n){var r=ob(e),e=ib(e);return 0<=t&&0<=n&&t<=r&&n<=e},lb=function(e,t,n,r){var o=sb(t);return{x:n-(e?o.left+t.dom().clientLeft+ub(t):0),y:r-(e?o.top+t.dom().clientTop+ab(t):0)}},fb=function(e){return b.from(e).map(U.fromDom)},db={isXYInContentArea:function(e,t,n){var r=U.fromDom(e.getBody()),r=e.inline?r:qr(r),e=lb(e.inline,r,t,n);return cb(r,e.x,e.y)},isEditorAttachedToDom:function(e){e=e.inline?e.getBody():e.getContentAreaContainer();return fb(e).map(function(e){return jr(Vr(e),e)}).getOr(!1)}},hb={setCode:function(e){e&&(gb=e,this.rtl=!!this.data[e]&&"rtl"===this.data[e]._dir)},getCode:function(){return gb},rtl:!(gb="en"),add:function(e,t){var n,r=mb[e];for(n in r||(mb[e]=r={}),t)r[n]=t[n];this.setCode(e)},translate:function(e){var n,t=mb[gb]||{},r=function(e){return ne.is(e,"function")?Object.prototype.toString.call(e):o(e)?"":""+e},o=function(e){return""===e||null===e||ne.is(e,"undefined")},i=function(e){return e=r(e),ne.hasOwn(t,e)?r(t[e]):e};return o(e)?"":ne.is(e,"object")&&ne.hasOwn(e,"raw")?r(e.raw):(ne.is(e,"array")&&(n=e.slice(1),e=i(e[0]).replace(/\{([0-9]+)\}/g,function(e,t){return ne.hasOwn(n,t)?r(n[t]):e})),i(e).replace(/{context:\w+}$/,""))},data:mb={}},pb=FN.PluginManager,vb=function(e,t){for(var n in pb.urls)if(pb.urls[n]+"/plugin"+t+".js"===e)return n;return null},bb=function(e,t){e=vb(t,e.suffix);return e?hb.translate(["Failed to load plugin: {0} from url {1}",e,t]):hb.translate(["Failed to load plugin url: {0}",t])},yb=function(e,t){e.notificationManager.open({type:"error",text:t})},Cb={pluginLoadError:function(e,t){xb(e,bb(e,t))},pluginInitError:function(e,t,n){t=hb.translate(["Failed to initialize plugin: {0}",t]);wb(t,n),xb(e,t)},uploadError:function(e,t){xb(e,hb.translate(["Failed to upload image: {0}",t]))},displayError:xb=function(e,t){e._skinLoaded?yb(e,t):e.on("SkinLoaded",function(){yb(e,t)})},initError:wb=function(e){for(var t,n=1;n<arguments.length;n++)n-1,0;(t=J.window.console)&&(t.error||t.log).apply(t,arguments)}},Sb=FN.PluginManager,kb=FN.ThemeManager,Tb={atob:function(e){return Ae.getOrDie("atob")(e)},requestAnimationFrame:function(e){Ae.getOrDie("requestAnimationFrame")(e)}},Nb=function(o){return new Oe(function(e,t){var n,r=function(){t("Cannot convert "+o+" to Blob. Resource might not exist or is inaccessible.")};try{(n=YN()).open("GET",o,!0),n.responseType="blob",n.onload=function(){200===this.status?e(this.response):r()},n.onerror=r,n.send()}catch(e){r()}})},Rb=function(a){return new Oe(function(t){var e,n,r,o,i=Eb(a);try{e=Tb.atob(i.data)}catch(e){return void t(new J.Blob([]))}for(o=e.length,n=new(Ae.getOrDie("Uint8Array"))(o),r=0;r<n.length;r++)n[r]=e.charCodeAt(r);t(new J.Blob([n],{type:i.type}))})},_b={uriToBlob:function(e){return 0===e.indexOf("blob:")?Nb(e):0===e.indexOf("data:")?Rb(e):null},blobToDataUri:function(n){return new Oe(function(e){var t=new(Ae.getOrDie("FileReader"));t.onloadend=function(){e(t.result)},t.readAsDataURL(n)})},parseDataUri:Eb=function(e){var t,e=decodeURIComponent(e).split(","),n=/data:([^;]+)/.exec(e[0]);return{type:t=n?n[1]:t,data:e[1]}}},Db=function(e){return(e||"blobid")+Ab++},Pb=function(n,r,o,t){var i,a;0===r.src.indexOf("blob:")?(a=n.getByUri(r.src))?o({image:r,blobInfo:a}):_b.uriToBlob(r.src).then(function(t){_b.blobToDataUri(t).then(function(e){i=_b.parseDataUri(e).data,a=n.create(Db(),t,i),n.add(a),o({image:r,blobInfo:a})})},function(e){t(e)}):(i=_b.parseDataUri(r.src).data,(a=n.findFirst(function(e){return e.base64()===i}))?o({image:r,blobInfo:a}):_b.uriToBlob(r.src).then(function(e){a=n.create(Db(),e,i),n.add(a),o({image:r,blobInfo:a})},function(e){t(e)}))},Ob=function(e){return e?Te(e.getElementsByTagName("img")):[]},Bb=Ab=0,Mb=function(){var e=function(){return Math.round(4294967295*Math.random()).toString(36)};return"s"+(new Date).getTime().toString(36)+e()+e()+e()},Ib={uuid:function(e){return e+Bb+++Mb()}},Lb=function(e,t){return e.hasOwnProperty(t.nodeName)},Fb=function(e,t){return!!oe.isText(t)||!!oe.isElement(t)&&!Lb(e,t)&&!$c.isBookmarkNode(t)},Hb=function(t,e,n){return G(cd.parents(U.fromDom(n),U.fromDom(e)),function(e){return Lb(t,e.dom())})},zb=function(e,t){if(oe.isText(t)){if(0===t.nodeValue.length)return!0;if(/^\s+$/.test(t.nodeValue)&&(!t.nextSibling||Lb(e,t.nextSibling)))return!0}return!1},Ub=function(e){var t,n,r,o,i,a,u,s=e.settings,c=e.dom,l=e.selection,f=e.schema,d=f.getBlockElements(),m=l.getStart(),g=e.getBody(),h=s.forced_root_block;if(m&&oe.isElement(m)&&h&&(s=g.nodeName.toLowerCase(),f.isValidChild(s,h.toLowerCase()))&&!Hb(d,g,m)){for(s=(f=l.getRng()).startContainer,t=f.startOffset,n=f.endContainer,r=f.endOffset,u=rb.hasFocus(e),m=g.firstChild;m;)Fb(d,m)?zb(d,m)?(m=(i=m).nextSibling,c.remove(i)):(o||(o=c.create(h,e.settings.forced_root_block_attrs),m.parentNode.insertBefore(o,m),a=!0),m=(i=m).nextSibling,o.appendChild(i)):(o=null,m=m.nextSibling);a&&u&&(f.setStart(s,t),f.setEnd(n,r),l.setRng(f),e.nodeChanged())}},Wb=function(e){e.settings.forced_root_block&&e.on("NodeChange",v(Ub,e))},jb=function(e){var t=e.startContainer,e=e.startOffset;return oe.isText(t)?0===e?b.some(U.fromDom(t)):b.none():b.from(t.childNodes[e]).map(U.fromDom)},Vb=function(e){var t=e.endContainer,e=e.endOffset;return oe.isText(t)?e===t.data.length?b.some(U.fromDom(t)):b.none():b.from(t.childNodes[e-1]).map(U.fromDom)},qb=function(t){return to(t).fold(Z([t]),function(e){return[t].concat(qb(e))})},$b=function(t){return no(t).fold(Z([t]),function(e){return"br"===cr(e)?Kr(e).map(function(e){return[t].concat($b(e))}).getOr([]):[t].concat($b(e))})},Yb=function(n,e){return cu([jb(e),Vb(e)],function(e,t){e=fe(qb(n),v(a,e)),t=fe($b(n),v(a,t));return e.isSome()&&t.isSome()}).getOr(!1)},Xb=function(e,t,n,r){var o=n,i=new BN(n,o),a=e.schema.getNonEmptyElements();do{if(3===n.nodeType&&0!==ne.trim(n.nodeValue).length)return void(r?t.setStart(n,0):t.setEnd(n,n.nodeValue.length));if(a[n.nodeName]&&!/^(TD|TH)$/.test(n.nodeName))return void(r?t.setStartBefore(n):"BR"===n.nodeName?t.setEndBefore(n):t.setEndAfter(n));if(ee.ie&&ee.ie<11&&e.isBlock(n)&&e.isEmpty(n))return void(r?t.setStart(n,0):t.setEnd(n,0))}while(n=r?i.next():i.prev());"BODY"===o.nodeName&&(r?t.setStart(o,0):t.setEnd(o,o.childNodes.length))},Kb=function(e){e=e.selection.getSel();return e&&0<e.rangeCount},Gb=function(e){var t=e.getBoundingClientRect(),e=e.ownerDocument,n=e.documentElement,e=e.defaultView;return{top:t.top+e.pageYOffset-n.clientTop,left:t.left+e.pageXOffset-n.clientLeft}},Jb=function(e){return e.inline?Gb(e.getBody()):{left:0,top:0}},Zb=function(e){var t=e.getBody();return e.inline?{left:t.scrollLeft,top:t.scrollTop}:{left:0,top:0}},Qb=function(e){var t=e.getBody(),n=e.getDoc().documentElement,r={left:t.scrollLeft,top:t.scrollTop},t={left:t.scrollLeft||n.scrollLeft,top:t.scrollTop||n.scrollTop};return e.inline?r:t},ey=function(e,t){var n;return t.target.ownerDocument!==e.getDoc()?(n=Gb(e.getContentAreaContainer()),e=Qb(e),{left:t.pageX-n.left+e.left,top:t.pageY-n.top+e.top}):{left:t.pageX,top:t.pageY}},ty=function(e,t,n){return{pageX:n.left-e.left+t.left,pageY:n.top-e.top+t.top}},ny=function(e,t){return ty(Jb(e),Zb(e),ey(e,t))},ry=oe.isContentEditableFalse,oy=oe.isContentEditableTrue,iy=function(e,t){return ry(t)&&t!==e},ay=function(e,t,n){return t!==n&&!e.dom.isChildOf(t,n)&&!ry(t)},uy=function(e){e=e.cloneNode(!0);return e.removeAttribute("data-mce-selected"),e},sy=function(e,t,n,r){var o,t=t.cloneNode(!0);return e.dom.setStyles(t,{width:n,height:r}),e.dom.setAttrib(t,"data-mce-selected",null),o=e.dom.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"}),e.dom.setStyles(o,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:r}),e.dom.setStyles(t,{margin:0,boxSizing:"border-box"}),o.appendChild(t),o},cy=function(e,t){e.parentNode!==t&&t.appendChild(e)},ly=function(e,t,n,r,o,i){var a=0,u=0;e.style.left=t.pageX+"px",e.style.top=t.pageY+"px",t.pageX+n>o&&(a=t.pageX+n-o),t.pageY+r>i&&(u=t.pageY+r-i),e.style.width=n-a+"px",e.style.height=r-u+"px"},fy=function(e){e&&e.parentNode&&e.parentNode.removeChild(e)},dy=function(e){return 0===e.button},my=function(e){return e.element},gy=function(e,t){return{pageX:t.pageX-e.relX,pageY:t.pageY+5}},hy=function(i,a){return function(e){var t,n,r,o;dy(e)&&(t=fe(a.dom.getParents(e.target),fu(ry,oy)).getOr(null),iy(a.getBody(),t))&&(n=a.dom.getPos(t),r=a.getBody(),o=a.getDoc().documentElement,i.element=t,i.screenX=e.screenX,i.screenY=e.screenY,i.maxX=(a.inline?r.scrollWidth:o.offsetWidth)-2,i.maxY=(a.inline?r.scrollHeight:o.offsetHeight)-2,i.relX=e.pageX-n.x,i.relY=e.pageY-n.y,i.width=t.offsetWidth,i.height=t.offsetHeight,i.ghost=sy(a,t,i.width,i.height))}},py=function(n,r){var o=Fe.throttle(function(e,t){r._selectionOverrides.hideFakeCaret(),r.selection.placeCaretAt(e,t)},0);return function(e){var t=Math.max(Math.abs(e.screenX-n.screenX),Math.abs(e.screenY-n.screenY));if(my(n)&&!n.dragging&&10<t){if(r.fire("dragstart",{target:n.element}).isDefaultPrevented())return;n.dragging=!0,r.focus()}n.dragging&&(t=gy(n,ny(r,e)),cy(n.ghost,r.getBody()),ly(n.ghost,t,n.width,n.height,n.maxX,n.maxY),o(e.clientX,e.clientY))}},vy=function(e){e=e.getSel().getRangeAt(0).startContainer;return 3===e.nodeType?e.parentNode:e},by=function(n,r){return function(e){var t;n.dragging&&ay(r,vy(r.selection),n.element)&&(t=uy(n.element),(e=r.fire("drop",{targetClone:t,clientX:e.clientX,clientY:e.clientY})).isDefaultPrevented()||(t=e.targetClone,r.undoManager.transact(function(){fy(n.element),r.insertContent(r.dom.getOuterHTML(t)),r._selectionOverrides.hideFakeCaret()}))),xy(n)}},yy=function(e,t){return function(){e.dragging&&t.fire("dragend"),xy(e)}},xy=function(e){e.dragging=!1,e.element=null,fy(e.ghost)},wy=function(e){var t={},n=s.DOM,r=J.document,o=hy(t,e),i=py(t,e),a=by(t,e),u=yy(t,e);e.on("mousedown",o),e.on("mousemove",i),e.on("mouseup",a),n.bind(r,"mousemove",i),n.bind(r,"mouseup",u),e.on("remove",function(){n.unbind(r,"mousemove",i),n.unbind(r,"mouseup",u)})},Cy=function(n){n.on("drop",function(e){var t=void 0!==e.clientX?n.getDoc().elementFromPoint(e.clientX,e.clientY):null;(ry(t)||ry(n.dom.getContentEditableParent(t)))&&e.preventDefault()})},Sy={init:function(e){wy(e),Cy(e)}},ky=function(t){var e,n=function(e){return Q(e,function(e){return(e=Ka(e)).node=t,e})};return oe.isElement(t)?n(t.getClientRects()):oe.isText(t)?((e=t.ownerDocument.createRange()).setStart(t,0),e.setEnd(t,t.data.length),n(e.getClientRects())):void 0},Ty=function(e){return le(e,function(e,t){return e.concat(ky(t))},[])},(g=Ny=Ny||{})[g.Up=-1]="Up",g[g.Down=1]="Down",Ey=function(e,t,n,r){for(;r=Ws(r,e,Ya,t);)if(n(r))return},Ry=function(e,t){return t.line>e},_y=function(e,t){return t.line===e},Ay=v(d=function(o,i,a,e,u,t){var s=0,c=[],n=function(e){var t,n,r=Ty([e]);for(-1===o&&(r=r.reverse()),t=0;t<r.length;t++)if(n=r[t],!a(n,l)){if(0<c.length&&i(n,m.last(c))&&s++,n.line=s,u(n))return!0;c.push(n)}},l=m.last(t.getClientRects());return l&&(n(t=t.getNode()),Ey(o,e,n,t)),c},Ny.Up,Qa,eu),Dy=v(d,Ny.Down,eu,Qa),Py=function(e,t,n,r){var o,i,a,u,t=pc(t),s=[],c=0,l=function(e){return m.last(e.getClientRects())},f=1===e?(o=t.next,i=eu,a=Qa,T.after(r)):(o=t.prev,i=Qa,a=eu,T.before(r)),d=l(f);do{if(f.isVisible()&&!a(u=l(f),d)){if(0<s.length&&i(u,m.last(s))&&c++,(u=Ka(u)).position=f,u.line=c,n(u))return s;s.push(u)}}while(f=o(f));return s},Oy=function(t){return function(e){return Ry(t,e)}},By=function(t){return function(e){return _y(t,e)}},My=oe.isContentEditableFalse,Iy=Ws,Ly=function(e,t){return Math.abs(e.left-t)},Fy=function(e,t){return Math.abs(e.right-t)},Hy=function(e,t){return e>=t.left&&e<=t.right},zy=function(e,o){return m.reduce(e,function(e,t){var n=Math.min(Ly(e,o),Fy(e,o)),r=Math.min(Ly(t,o),Fy(t,o));return Hy(o,t)||!Hy(o,e)&&(r===n&&My(t.node)||r<n)?t:e})},Uy=function(e,t,n,r){for(;r=Iy(r,e,Ya,t);)if(n(r))return},Wy=function(e,n){var r=[],t=function(t,e){e=_(Ty([e]),function(e){return!t(e,n)});return r=r.concat(e),0===e.length};return r.push(n),Uy(Ny.Up,e,v(t,Qa),n.node),Uy(Ny.Down,e,v(t,eu),n.node),r},jy=function(e){return _(Te(e.getElementsByTagName("*")),Ps)},Vy=function(e,t){return{node:e.node,before:Ly(e,t)<Fy(e,t)}},qy=function(e,t,n){var r=Ty(jy(e)),r=_(r,function(e){return n>=e.top&&n<=e.bottom}),r=zy(r,t);return(r=r&&zy(Wy(e,r),t))&&Ps(r.node)?Vy(r,t):null},$y={isXYWithinRange:function(n,r,e){return!e.collapsed&&le(e.getClientRects(),function(e,t){return e||tu(t,n,r)},!1)}},Yy={setup:function(t){var e=Di(function(){var e;t.removed||t.selection.getRng().collapsed&&(e=up(t,t.selection.getRng(),!1),t.selection.setRng(e))},0);t.on("focus",function(){e.throttle()}),t.on("blur",function(){e.cancel()})}},W={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,END:35,HOME:36,modifierPressed:function(e){return e.shiftKey||e.ctrlKey||e.altKey||this.metaKeyPressed(e)},metaKeyPressed:function(e){return ee.mac?e.metaKey:e.ctrlKey&&!e.altKey}},Xy=oe.isContentEditableTrue,Ky=oe.isContentEditableFalse,Gy=function(e,t){for(var n=e.getBody();t&&t!==n;){if(Xy(t)||Ky(t))return t;t=t.parentNode}return null},Jy=function(u){var s,n,r,o,t,e=function(e){return u.dom.isBlock(e)},i=u.getBody(),a=As(u.getBody(),e,function(){return rb.hasFocus(u)}),c="sel-"+u.dom.uniqueId(),l=function(e){return u.dom.hasClass(e,"mce-offscreen-selection")},f=function(){var e=u.dom.get(c);return e&&e.getElementsByTagName("*")[0]},d=function(e){e&&u.selection.setRng(e)},m=function(){return u.selection.getRng()},g=function(e,t,n,r){return void 0===r&&(r=!0),u.fire("ShowCaret",{target:t,direction:e,before:n}).isDefaultPrevented()?null:(r&&u.selection.scrollIntoView(t,-1===e),a.show(n,t))},h=function(e,t){return t=Gs(e,i,t),-1===e?T.fromRangeStart(t):T.fromRangeEnd(t)},e=function(e){e.hasAttribute("data-mce-caret")&&(Pa(e),d(m()),u.selection.scrollIntoView(e[0]))},p=function(){var e=u.contentStyles,t=".mce-content-body";e.push(a.getCss()),e.push(t+" .mce-offscreen-selection {position: absolute;left: -9999999999px;max-width: 1000000px;}"+t+" *[contentEditable=false] {cursor: default;}"+t+" *[contentEditable=true] {cursor: text;}")},v=function(e){return Ca(e)||_a(e)||Aa(e)},b=function(e){return v(e.startContainer)||v(e.endContainer)},y=function(e,t){var n,r,o,i=u.$,a=u.dom;if(!e)return null;if(e.collapsed){if(!b(e))if(!1===t){if(r=h(-1,e),Ps(r.getNode(!0)))return g(-1,r.getNode(!0),!1,!1);if(Ps(r.getNode()))return g(-1,r.getNode(),!r.isAtEnd(),!1)}else{if(r=h(1,e),Ps(r.getNode()))return g(1,r.getNode(),!r.isAtEnd(),!1);if(Ps(r.getNode(!0)))return g(1,r.getNode(!0),!1,!1)}return null}return t=e.startContainer,r=e.startOffset,o=e.endOffset,3===t.nodeType&&0===r&&Ky(t.parentNode)&&(t=t.parentNode,r=a.nodeIndex(t),t=t.parentNode),1!==t.nodeType||(o===r+1&&(n=t.childNodes[r]),!Ky(n))||(o=n.cloneNode(!0),(t=u.fire("ObjectSelected",{target:n,targetClone:o})).isDefaultPrevented())?null:(r=Gi(U.fromDom(u.getBody()),"#"+c).fold(function(){return i([])},function(e){return i([e.dom()])}),t=t.targetClone,0===r.length&&(r=i('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>').attr("id",c)).appendTo(u.getBody()),e=u.dom.createRng(),t===o&&ee.ie?(r.empty().append('<p style="font-size: 0" data-mce-bogus="all"></p>').append(t),e.setStartAfter(r[0].firstChild.firstChild),e.setEndAfter(t)):(r.empty().append("").append(t).append(""),e.setStart(r[0].firstChild,1),e.setEnd(r[0].lastChild,0)),r.css({top:a.getPos(n,u.getBody()).y}),r[0].focus(),(o=u.selection.getSel()).removeAllRanges(),o.addRange(e),R($i(U.fromDom(u.getBody()),"*[data-mce-selected]"),function(e){Er(e,"data-mce-selected")}),n.setAttribute("data-mce-selected","1"),s=n,C(),e)},x=function(){s&&(s.removeAttribute("data-mce-selected"),Gi(U.fromDom(u.getBody()),"#"+c).each(_i),s=null),Gi(U.fromDom(u.getBody()),"#"+c).each(_i),s=null},w=function(){a.destroy(),s=null},C=function(){a.hide()};{var S,k;ee.ceFalse&&(u.on("mouseup",function(e){var t=m();t.collapsed&&db.isXYInContentArea(u,e.clientX,e.clientY)&&d(ap(u,t,!1))}),u.on("click",function(e){var t=Gy(u,e.target);t&&(Ky(t)&&(e.preventDefault(),u.focus()),Xy(t))&&u.dom.isChildOf(t,u.selection.getNode())&&x()}),u.on("blur NewBlock",function(){x()}),u.on("ResizeWindow FullscreenStateChanged",function(){return a.reposition()}),n=function(e){var t=pc(e);return!!e.firstChild&&(e=T.before(e.firstChild),t=t.next(e))&&!Ud(t)&&!Wd(t)},r=function(e,t){return u.dom.getParent(e,u.dom.isBlock)===u.dom.getParent(t,u.dom.isBlock)},k=!(o=function(e,t){e=u.dom.getParent(e,u.dom.isBlock),t=u.dom.getParent(t,u.dom.isBlock);return!(!e||!u.dom.isChildOf(e,t)||!1!==Ky(Gy(u,e)))||e&&!r(e,t)&&n(e)}),(S=u).on("touchstart",function(){k=!1}),S.on("touchmove",function(){k=!0}),S.on("touchend",function(e){var t=Gy(S,e.target);Ky(t)&&!k&&(e.preventDefault(),y(ip(S,t)))}),u.on("mousedown",function(e){var t,n=e.target;n!==i&&"HTML"!==n.nodeName&&!u.dom.isChildOf(n,i)||!1===db.isXYInContentArea(u,e.clientX,e.clientY)||((t=Gy(u,n))?Ky(t)?(e.preventDefault(),y(ip(u,t))):(x(),Xy(t)&&e.shiftKey||$y.isXYWithinRange(e.clientX,e.clientY,u.selection.getRng())||(C(),u.selection.placeCaretAt(e.clientX,e.clientY))):!1===Ps(n)&&(x(),C(),t=qy(i,e.clientX,e.clientY))&&!o(e.target,t.node)&&(e.preventDefault(),n=g(1,t.node,t.before,!1),u.getBody().focus(),d(n)))}),u.on("keypress",function(e){W.modifierPressed(e)||(e.keyCode,Ky(u.selection.getNode())&&e.preventDefault())}),u.on("getSelectionRange",function(e){var t=e.range;s&&(s.parentNode?((t=t.cloneRange()).selectNode(s),e.range=t):s=null)}),u.on("setSelectionRange",function(e){var t=y(e.range,e.forward);t&&(e.range=t)}),t=function(e){return"mcepastebin"===e.id},u.on("AfterSetSelectionRange",function(e){e=e.range;b(e)||t(e.startContainer.parentNode)||C(),l(e.startContainer.parentNode)||x()}),u.on("copy",function(e){var t,n=e.clipboardData;e.isDefaultPrevented()||!e.clipboardData||ee.ie||(t=f())&&(e.preventDefault(),n.clearData(),n.setData("text/html",t.outerHTML),n.setData("text/plain",t.outerText))}),Sy.init(u),Yy.setup(u),p())}return{showCaret:g,showBlockCaretContainer:e,hideFakeCaret:C,destroy:w}},Zy=function(e){return 0===e.indexOf("data-")||0===e.indexOf("aria-")},Qy=function(e){return e.replace(/<!--|-->/g,"")},e0=function(e,t){return!e.allow_html_data_urls&&(/^data:image\//i.test(t)?!1===e.allow_svg_data_urls&&/^data:image\/svg\+xml/i.test(t):/^data:/i.test(t))},n0=function(e,t){var e=e.exec(t);return e&&(t=e[1],e=e[2],"string"==typeof t)&&"data-mce-bogus"===t.toLowerCase()?e:null},(GN=GN||{}).findEndTag=t0=function(e,t,n){var r,o,i=1,a=e.getShortEndedElements(),u=/<([!?\/])?([A-Za-z0-9\-_\:\.]+)((?:\s+[^"\'>]+(?:(?:"[^"]*")|(?:\'[^\']*\')|[^>]*))*|\/|\s+)>/g;for(u.lastIndex=r=n;o=u.exec(t);){if(r=u.lastIndex,"/"===o[1])i--;else if(!o[1]){if(o[2]in a)continue;i++}if(0===i)break}return r},r0=GN,o0=function(e,t){e=new RegExp(["\\s?("+e.join("|")+')="[^"]+"'].join("|"),"gi");return t.replace(e,"")},i0={trimExternal:p=function(e,t){var n,r,o,i,a=t,u=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,s=e.schema;for(a=o0(e.getTempAttrs(),a),i=s.getShortEndedElements();o=u.exec(a);)n=u.lastIndex,r=o[0].length,o=i[o[1]]?n:r0.findEndTag(s,a,n),a=a.substring(0,n-r)+a.substring(o),u.lastIndex=n-r;return l.trim(a)},trimInternal:p},a0={KEEP:0,DELETE:2,INSERT:1,diff:function(m,g){var e=m.length+g.length+2,h=new Array(e),p=new Array(e),i=function(e,t,n){return{start:e,end:t,diag:n}},c=function(e,t,n,r,o){var i,a,u,s=l(e,t,n,r);if(null===s||s.start===t&&s.diag===t-r||s.end===e&&s.diag===e-n)for(i=e,a=n;i<t||a<r;)i<t&&a<r&&m[i]===g[a]?(o.push([0,m[i]]),++i,++a):r-n<t-e?(o.push([2,m[i]]),++i):(o.push([1,g[a]]),++a);else{for(c(e,s.start,n,s.start-s.diag,o),u=s.start;u<s.end;++u)o.push([0,m[u]]);c(s.end,t,s.end-s.diag,r,o)}},v=function(e,t,n,r){for(var o=e;o-t<r&&o<n&&m[o]===g[o-t];)++o;return i(e,o,t)},l=function(e,t,n,r){var o,i,a,u,s,c,l,f=t-e,d=r-n;if(0==f||0==d)return null;for(o=f-d,h[1+(i=((d=d+f)%2==0?d:1+d)/2)]=e,p[1+i]=t+1,a=0;a<=i;++a){for(u=-a;u<=a;u+=2){for(s=u+i,u===-a||u!==a&&h[s-1]<h[s+1]?h[s]=h[s+1]:h[s]=h[s-1]+1,l=(c=h[s])-e+n-u;c<t&&l<r&&m[c]===g[l];)h[s]=++c,++l;if(o%2!=0&&o-a<=u&&u<=o+a&&p[s-o]<=h[s])return v(p[s-o],u+e-n,t,r)}for(u=o-a;u<=o+a;u+=2){for(s=u+i-o,u===o-a||u!==o+a&&p[s+1]<=p[s-1]?p[s]=p[s+1]-1:p[s]=p[s-1],l=(c=p[s]-1)-e+n-u;e<=c&&n<=l&&m[c]===g[l];)p[s]=c--,l--;if(o%2==0&&-a<=u&&u<=a&&p[s]<=h[s+o])return v(p[s],u+e-n,t,r)}}},e=[];return c(0,m.length,0,g.length,e),e}},u0=function(e){return oe.isElement(e)?e.outerHTML:oe.isText(e)?Ko.encodeRaw(e.data,!1):oe.isComment(e)?"\x3c!--"+e.data+"--\x3e":""},s0=function(e){var t,n=J.document.createElement("div"),r=J.document.createDocumentFragment();for(e&&(n.innerHTML=e);t=n.firstChild;)r.appendChild(t);return r},c0=function(e,t,n){t=s0(t);e.hasChildNodes()&&n<e.childNodes.length?(n=e.childNodes[n]).parentNode.insertBefore(t,n):e.appendChild(t)},l0=function(e,t){e.hasChildNodes()&&t<e.childNodes.length&&(e=e.childNodes[t]).parentNode.removeChild(e)},f0=function(e,t){var n=0;R(e,function(e){e[0]===a0.KEEP?n++:e[0]===a0.INSERT?(c0(t,e[1],n),n++):e[0]===a0.DELETE&&l0(t,n)})},d0=function(e){return _(Q(Te(e.childNodes),u0),function(e){return 0<e.length})},m0=function(e,t){var n=Q(Te(t.childNodes),u0);return f0(a0.diff(n,e),t),t},g0=Oi(b.none()),h0=function(){return g0.get().getOrThunk(function(){var e=J.document.implementation.createHTMLDocument("undo");return g0.set(b.some(e)),e})},p0=function(e){return-1!==e.indexOf("</iframe>")},y0=function(e){return"fragmented"===e.type?e.fragments.join(""):e.content},x0=function(e){var t=U.fromTag("body",h0());return pa(t,y0(e)),R($i(t,"*[data-mce-bogus]"),Ai),ha(t)},w0=function(e,t){return y0(e)===y0(t)},C0=function(e,t){return x0(e)===x0(t)},S0={createFragmentedLevel:v0=function(e){return{type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}},createCompleteLevel:b0=function(e){return{type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}},createFromEditor:function(t){var e=d0(t.getBody()),e=pe(e,function(e){e=i0.trimInternal(t.serializer,e);return 0<e.length?[e]:[]}),n=e.join("");return p0(n)?v0(e):b0(n)},applyToEditor:function(e,t,n){"fragmented"===t.type?m0(t.fragments,e.getBody()):e.setContent(t.content,{format:"raw"}),e.selection.moveToBookmark(n?t.beforeBookmark:t.bookmark)},isEq:function(e,t){return!(!e||!t)&&(!!w0(e,t)||C0(e,t))}},k0={},T0=m.filter,N0=m.each,qT=function(e,t){N0(k0[e],function(e){e(t)})},function(e,t){k0[e]||(k0[e]=[]),k0[e].push(t)}("pre",function(e){var t,n=e.selection.getRng(),r=function(e){return i(e.previousSibling)&&-1!==m.indexOf(t,e.previousSibling)},o=function(e,t){re(t).remove(),re(e).append("<br><br>").append(t.childNodes)},i=oe.matchNodeNames("pre");n.collapsed||(t=e.selection.getSelectedBlocks(),N0(T0(T0(t,i),r),function(e){o(e.previousSibling,e)}))}),E0=qT,R0=/^(src|href|style)$/,_0=ne.each,A0=w.isEq,D0=function(e){return/^(TH|TD)$/.test(e.nodeName)},P0=function(e,t,n){return e.isChildOf(t,n)&&t!==n&&!e.isBlock(n)},O0=function(e,t,n){var r,o=t[n?"startContainer":"endContainer"],t=t[n?"startOffset":"endOffset"];return oe.isElement(o)&&(r=o.childNodes.length-1,!n&&t&&t--,o=o.childNodes[r<t?r:t]),oe.isText(o)&&n&&t>=o.nodeValue.length&&(o=new BN(o,e.getBody()).next()||o),o=oe.isText(o)&&!n&&0===t?new BN(o,e.getBody()).prev()||o:o},B0=function(e,t,n,r){e=e.create(n,r);return t.parentNode.insertBefore(e,t),e.appendChild(t),e},M0=function(e,t,n,r,o){t=U.fromDom(t),e=U.fromDom(e.create(r,o)),r=(n?Zr:Jr)(t);return Ei(e,r),(n?(wi(t,e),Si):(Ci(t,e),ki))(e,t),e.dom()},I0=function(e,t,n){return!!A0(t,n.inline)||!!A0(t,n.block)||(n.selector?oe.isElement(t)&&e.is(t,n.selector):void 0)},L0=function(e,t){return t.links&&"A"===e.tagName},F0=function(e,t,n,r){return!(t=w.getNonWhiteSpaceSibling(t,n,r))||"BR"===t.nodeName||e.isBlock(t)},H0=function(t,e,n){var r,o=e.parentNode,i=t.dom,a=t.settings.forced_root_block;n.block&&(a?o!==i.getRoot()||n.list_block&&A0(e,n.list_block)||_0(ne.grep(e.childNodes),function(e){w.isValid(t,a,e.nodeName.toLowerCase())?r?r.appendChild(e):(r=B0(i,e,a),i.setAttribs(r,t.settings.forced_root_block_attrs)):r=0}):i.isBlock(e)&&!i.isBlock(o)&&(F0(i,e,!1)||F0(i,e.firstChild,!0,1)||e.insertBefore(i.create("br"),e.firstChild),F0(i,e,!0)||F0(i,e.lastChild,!1,1)||e.appendChild(i.create("br")))),n.selector&&n.inline&&!A0(n.inline,e)||i.remove(e,1)},U0=function(n,e,r,o,i){var a;return _0(w.getParents(n.dom,e.parentNode).reverse(),function(e){var t;a||"_start"===e.id||"_end"===e.id||(t=Eh.matchNode(n,e,r,o,i))&&!1!==t.split&&(a=e)}),a},W0=function(e,t,n,r,o,i,a,u){var s,c,l,f,d,m,g=e.dom;if(n){for(m=n.parentNode,s=r.parentNode;s&&s!==m;s=s.parentNode){for(c=g.clone(s,!1),d=0;d<t.length;d++)if(z0(e,t[d],u,c,c)){c=0;break}c&&(l&&c.appendChild(l),f=f||c,l=c)}!i||a.mixed&&g.isBlock(n)||(r=g.split(n,r)),l&&(o.parentNode.insertBefore(l,o),f.appendChild(o))}return r},j0={removeFormat:z0=function(e,n,r,o,i){var t,a,u,s,c=e.dom;if(!I0(c,o,n)&&!L0(o,n))return!1;if("all"!==n.remove)for(_0(n.styles,function(e,t){e=w.normalizeStyleValue(c,w.replaceVars(e,r),t),"number"==typeof t&&(t=e,i=0),!n.remove_similar&&i&&!A0(w.getStyle(c,i,t),e)||c.setStyle(o,t,""),u=1}),u&&""===c.getAttrib(o,"style")&&(o.removeAttribute("style"),o.removeAttribute("data-mce-style")),_0(n.attributes,function(e,t){var n;e=w.replaceVars(e,r),"number"==typeof t&&(t=e,i=0),i&&!A0(c.getAttrib(i,t),e)||("class"===t&&(e=c.getAttrib(o,t))&&(n="",_0(e.split(/\s+/),function(e){/mce\-\w+/.test(e)&&(n+=(n?" ":"")+e)}),n)?c.setAttrib(o,t,n):("class"===t&&o.removeAttribute("className"),R0.test(t)&&o.removeAttribute("data-mce-"+t),o.removeAttribute(t)))}),_0(n.classes,function(e){e=w.replaceVars(e,r),i&&!c.hasClass(i,e)||c.removeClass(o,e)}),a=c.getAttribs(o),t=0;t<a.length;t++)if(0!==(s=a[t].nodeName).indexOf("_")&&0!==s.indexOf("data-"))return!1;return"none"!==n.remove?(H0(e,o,n),!0):void 0},remove:function(a,n,u,e,r){var t,o,i,s=a.formatter.get(n),c=s[0],l=!0,f=a.dom,d=a.selection,m=function(e){var t=U0(a,e,n,u,r);return W0(a,s,t,e,e,!0,c,u)},g=function(e){return $c.isBookmarkNode(e)&&oe.isElement(e)&&("_start"===e.id||"_end"===e.id)},h=function(e){var t,n,r,o,i;if(oe.isElement(e)&&f.getContentEditable(e)&&(o=l,l="true"===f.getContentEditable(e),i=!0),t=ne.grep(e.childNodes),l&&!i)for(n=0,r=s.length;n<r&&!z0(a,s[n],u,e,e);n++);if(c.deep&&t.length){for(n=0,r=t.length;n<r;n++)h(t[n]);i&&(l=o)}},p=function(e){var t=f.get(e?"_start":"_end"),n=t[e?"firstChild":"lastChild"];return g(n)&&(n=n[e?"firstChild":"lastChild"]),oe.isText(n)&&0===n.data.length&&(n=e?t.previousSibling||t.nextSibling:t.nextSibling||t.previousSibling),f.remove(t,!0),n},v=function(e){var t,n,r,o=e.commonAncestorContainer;if(e=cl.expandRng(a,e,s,!0),c.split){if(e=_h.split(e),(t=O0(a,e,!0))!==(n=O0(a,e))){if(/^(TR|TH|TD)$/.test(t.nodeName)&&t.firstChild&&(t="TR"===t.nodeName?t.firstChild.firstChild||t:t.firstChild||t),o&&/^T(HEAD|BODY|FOOT|R)$/.test(o.nodeName)&&D0(n)&&n.firstChild&&(n=n.firstChild||n),P0(f,t,n))return r=b.from(t.firstChild).getOr(t),m(M0(f,r,!0,"span",{id:"_start","data-mce-type":"bookmark"})),void p(!0);if(P0(f,n,t))return r=b.from(n.lastChild).getOr(n),m(M0(f,r,!1,"span",{id:"_end","data-mce-type":"bookmark"})),void p(!1);t=B0(f,t,"span",{id:"_start","data-mce-type":"bookmark"}),n=B0(f,n,"span",{id:"_end","data-mce-type":"bookmark"}),m(t),m(n),t=p(!0),n=p()}else t=n=m(t);e.startContainer=t.parentNode||t,e.startOffset=f.nodeIndex(t),e.endContainer=n.parentNode||n,e.endOffset=f.nodeIndex(n)+1}dl(f,e,function(e){_0(e,function(e){h(e),oe.isElement(e)&&"underline"===a.dom.getStyle(e,"text-decoration")&&e.parentNode&&"underline"===w.getTextDecoration(f,e.parentNode)&&z0(a,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:"underline"}},null,e)})})};if(e)e.nodeType?((t=f.createRng()).setStartBefore(e),t.setEndAfter(e),v(t)):v(e);else if("false"===f.getContentEditable(d.getNode()))for(e=d.getNode(),o=0,i=s.length;o<i&&(!s[o].ceFalseOverride||!z0(a,s[o],u,e,e));o++);else d.isCollapsed()&&c.inline&&!f.select("td[data-mce-selected],th[data-mce-selected]").length?Vh(a,n,u,r):(t=ss.getPersistentBookmark(a.selection,!0),v(d.getRng()),d.moveToBookmark(t),c.inline&&Eh.match(a,n,u,d.getStart())&&w.moveStart(f,d,d.getRng()),a.nodeChanged())}},V0=ne.each,q0=function(e){return e&&1===e.nodeType&&!$c.isBookmarkNode(e)&&!ls(e)&&!oe.isBogus(e)},$0=function(e,t){for(var n=e;n;n=n[t]){if(3===n.nodeType&&0!==n.nodeValue.length)return e;if(1===n.nodeType&&!$c.isBookmarkNode(n))return n}return e},Y0=function(e,t,n){var r,o,i=new jl(e);if(t&&n&&(t=$0(t,"previousSibling"),n=$0(n,"nextSibling"),i.compare(t,n))){for(r=t.nextSibling;r&&r!==n;)r=(o=r).nextSibling,t.appendChild(o);return e.remove(n),ne.each(ne.grep(n.childNodes),function(e){t.appendChild(e)}),t}return n},X0=function(e,t,n){V0(e.childNodes,function(e){q0(e)&&(t(e)&&n(e),e.hasChildNodes())&&X0(e,t,n)})},K0=function(n,e){return v(function(e,t){return!(!t||!w.getStyle(n,t,e))},e)},G0=function(r,e,t){return v(function(e,t,n){r.setStyle(n,e,t),""===n.getAttribute("style")&&n.removeAttribute("style"),J0(r,n)},e,t)},J0=function(e,t){"SPAN"===t.nodeName&&0===e.getAttribs(t).length&&e.remove(t,!0)},Z0=function(e,t){var n;1===t.nodeType&&t.parentNode&&1===t.parentNode.nodeType&&(n=w.getTextDecoration(e,t.parentNode),e.getStyle(t,"color")&&n?e.setStyle(t,"text-decoration",n):e.getStyle(t,"text-decoration")===n&&e.setStyle(t,"text-decoration",null))},Q0=function(r,e,t){var n;e.clear_child_styles&&(n=e.links?"*:not(a)":"*",V0(r.select(n,t),function(n){q0(n)&&V0(e.styles,function(e,t){r.setStyle(n,t,"")})}))},ex=function(n,e,r,o){V0(e,function(t){V0(n.dom.select(t.inline,o),function(e){q0(e)&&j0.removeFormat(n,t,r,e,t.exact?e:null)}),Q0(n.dom,t,o)})},tx=function(e,t,n,r){(t.styles.color||t.styles.textDecoration)&&(ne.walk(r,v(Z0,e),"childNodes"),Z0(e,r))},nx=function(e,t,n,r){t.styles&&t.styles.backgroundColor&&X0(r,K0(e,"fontSize"),G0(e,"backgroundColor",w.replaceVars(t.styles.backgroundColor,n)))},rx=function(e,t,n,r){"sub"!==t.inline&&"sup"!==t.inline||(X0(r,K0(e,"fontSize"),G0(e,"fontSize","")),e.remove(e.select("sup"===t.inline?"sub":"sup",r),!0))},ox=function(e,t,n,r){r&&!1!==t.merge_siblings&&(r=Y0(e,w.getNonWhiteSpaceSibling(r),r),Y0(e,r,w.getNonWhiteSpaceSibling(r,!0)))},ix=function(t,n,r,o,i){Eh.matchNode(t,i.parentNode,r,o)&&j0.removeFormat(t,n,o,i)||n.merge_with_parents&&t.dom.getParent(i.parentNode,function(e){if(Eh.matchNode(t,e,r,o))return j0.removeFormat(t,n,o,i),!0})},ax=ne.each,ux=function(e){return e&&1===e.nodeType&&!$c.isBookmarkNode(e)&&!ls(e)&&!oe.isBogus(e)},cx={applyFormat:sx=function(g,h,p,r){var e,t,n,o,v=g.formatter.get(h),b=v[0],i=!r&&g.selection.isCollapsed(),a=g.dom,u=g.selection,y=function(n,e){var t;e=e||b,n&&(e.onformat&&e.onformat(n,e,p,r),ax(e.styles,function(e,t){a.setStyle(n,t,w.replaceVars(e,p))}),e.styles&&(t=a.getAttrib(n,"style"))&&n.setAttribute("data-mce-style",t),ax(e.attributes,function(e,t){a.setAttrib(n,t,w.replaceVars(e,p))}),ax(e.classes,function(e){e=w.replaceVars(e,p),a.hasClass(n,e)||a.addClass(n,e)}))},x=function(e,t){var n=!1;return!!b.selector&&(ax(e,function(e){return!("collapsed"in e&&e.collapsed!==i)&&a.is(t,e.selector)&&!ls(t)?(y(t,e),!(n=!0)):void 0}),n)},s=function(s,e,t,c){var l=[],f=!0,d=b.inline||b.block,m=s.create(d);y(m),dl(s,e,function(e){var a,u=function(e){var t,n,r=f,o=e.nodeName.toLowerCase(),i=e.parentNode.nodeName.toLowerCase();1===e.nodeType&&s.getContentEditable(e)&&(r=f,f="true"===s.getContentEditable(e),t=!0),w.isEq(o,"br")?(a=0,b.block&&s.remove(e)):b.wrapper&&Eh.matchNode(g,e,h,p)?a=0:f&&!t&&b.block&&!b.wrapper&&w.isTextBlock(g,o)&&w.isValid(g,i,d)?(e=s.rename(e,d),y(e),l.push(e),a=0):b.selector&&(n=x(v,e),!b.inline||n)?a=0:!f||t||!w.isValid(g,d,o)||!w.isValid(g,i,d)||!c&&3===e.nodeType&&1===e.nodeValue.length&&65279===e.nodeValue.charCodeAt(0)||ls(e)||b.inline&&s.isBlock(e)?(a=0,ax(ne.grep(e.childNodes),u),t&&(f=r),a=0):(a||(a=s.clone(m,!1),e.parentNode.insertBefore(a,e),l.push(a)),a.appendChild(e))};ax(e,u)}),!0===b.links&&ax(l,function(e){var t=function(e){"A"===e.nodeName&&y(e,b),ax(ne.grep(e.childNodes),t)};t(e)}),ax(l,function(e){var r=function(e){var t=!1;return ax(e.childNodes,function(e){if(ux(e))return t=e,!1}),t},t=function(e){var t,n=r(e);return n&&!$c.isBookmarkNode(n)&&Eh.matchName(s,n,b)&&(t=s.clone(n,!1),y(t),s.replace(t,e,!0),s.remove(n,1)),t||e},n=function(e){var t=0;return ax(e.childNodes,function(e){w.isWhiteSpaceNode(e)||$c.isBookmarkNode(e)||t++}),t}(e);(1<l.length||!s.isBlock(e))&&0===n?s.remove(e,1):(b.inline||b.wrapper)&&(b.exact||1!==n||(e=t(e)),ex(g,v,p,e),ix(g,b,h,p,e),nx(s,b,p,e),rx(s,b,p,e),ox(s,b,p,e))})};if("false"===a.getContentEditable(u.getNode())){for(r=u.getNode(),t=0,n=v.length;t<n;t++)if(v[t].ceFalseOverride&&a.is(r,v[t].selector))return void y(r,v[t])}else b&&(r?r.nodeType?x(v,r)||((o=a.createRng()).setStartBefore(r),o.setEndAfter(r),s(a,cl.expandRng(g,o,v),0,!0)):s(a,r,0,!0):i&&b.inline&&!a.select("td[data-mce-selected],th[data-mce-selected]").length?jh(g,h,p):(o=g.selection.getNode(),g.settings.forced_root_block||!v[0].defaultBlock||a.getParent(o,a.isBlock)||sx(g,v[0].defaultBlock),g.selection.setRng(Gl.normalize(g.selection.getRng())),e=ss.getPersistentBookmark(g.selection,!0),s(a,cl.expandRng(g,u.getRng(),v)),b.styles&&tx(a,b,p,o),u.moveToBookmark(e),w.moveStart(a,u,u.getRng()),g.nodeChanged()),E0(h,g))}},lx=ne.each,fx=function(e,i){var a={};e.set({}),i.on("NodeChange",function(n){var r=w.getParents(i.dom,n.element),o={};r=ne.grep(r,function(e){return 1===e.nodeType&&!e.getAttribute("data-mce-bogus")}),lx(e.get(),function(e,n){lx(r,function(t){return i.formatter.matchNode(t,n,{},e.similar)?(a[n]||(lx(e,function(e){e(!0,{node:t,format:n,parents:r})}),a[n]=e),o[n]=e,!1):!Eh.matchesUnInheritedFormatSelector(i,t,n)&&void 0})}),lx(a,function(e,t){o[t]||(delete a[t],lx(e,function(e){e(!1,{node:n.element,format:t,parents:r})}))})})},dx=function(e,t,n,r){var o=e.get();lx(t.split(","),function(e){o[e]||(o[e]=[],o[e].similar=r),o[e].push(n)}),e.set(o)},mx={formatChanged:function(e,t,n,r,o){null===t.get()&&fx(t,e),dx(t,n,r,o)}},gx={get:function(r){var t={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"left"},inherit:!1,preview:!1,defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"justify"},inherit:!1,defaultBlock:"div",preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(){return!0},onformat:function(n,e,t){ne.each(t,function(e,t){r.setAttrib(n,t,e)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return ne.each("p h1 h2 h3 h4 h5 h6 div address pre div dt dd samp".split(/\s/),function(e){t[e]={block:e,remove:"all"}}),t}},hx=ne.each,px=s.DOM,vx=function(e,t){var n,r,o=t&&t.schema||MN({}),i=function(e,t){t.classes.length&&px.addClass(e,t.classes.join(" ")),px.setAttribs(e,t.attrs)},s=function(e){return n="string"==typeof e?{name:e,classes:[],attrs:{}}:e,e=px.create(n.name),i(e,n),e},c=function(e,t){e="string"!=typeof e?e.nodeName.toLowerCase():e,e=o.getElementRule(e),e=e&&e.parentsRequired;return!(!e||!e.length)&&(t&&-1!==ne.inArray(e,t)?t:e[0])},l=function(t,e,n){var r,o,i=0<e.length&&e[0],a=i&&i.name,u=c(t,a);if(u)a===u?(o=e[0],e=e.slice(1)):o=u;else if(i)o=e[0],e=e.slice(1);else if(!n)return t;return o&&(r=s(o)).appendChild(t),n&&(r||(r=px.create("div")).appendChild(t),ne.each(n,function(e){e=s(e);r.insertBefore(e,t)})),l(r,e,o&&o.siblings)};return e&&e.length?(n=e[0],t=s(n),(r=px.create("div")).appendChild(l(t,e.slice(1),n.siblings)),r):""},bx=function(e){var t,i={classes:[],attrs:{}};return"*"!==(e=i.selector=ne.trim(e))&&(t=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,function(e,t,n,r,o){switch(t){case"#":i.attrs.id=n;break;case".":i.classes.push(n);break;case":":-1!==ne.inArray("checked disabled enabled read-only required".split(" "),n)&&(i.attrs[n]=n)}return"["===r&&(t=o.match(/([\w\-]+)(?:\=\"([^\"]+))?/))&&(i.attrs[t[1]]=t[2]),""})),i.name=t||"div",i},xx={getCssText:function(n,e){var t,r,o,i,a,u="",s=n.settings.preview_styles;if(!1===s)return"";if("string"!=typeof s&&(s="font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"),a=function(e){return e.replace(/%(\w+)/g,"")},"string"==typeof e){if(!(e=n.formatter.get(e)))return;e=e[0]}return"preview"in e&&!1===(s=e.preview)?"":(t=e.block||e.inline||"span",o=(o=yx(e.selector)).length?(o[0].name||(o[0].name=t),t=e.selector,vx(o,n)):vx([t],n),r=px.select(t,o)[0]||o.firstChild,hx(e.styles,function(e,t){(e=a(e))&&px.setStyle(r,t,e)}),hx(e.attributes,function(e,t){(e=a(e))&&px.setAttrib(r,t,e)}),hx(e.classes,function(e){e=a(e),px.hasClass(r,e)||px.addClass(r,e)}),n.fire("PreviewFormats"),px.setStyles(o,{position:"absolute",left:-65535}),n.getBody().appendChild(o),i=px.getStyle(n.getBody(),"fontSize",!0),i=/px$/.test(i)?parseInt(i,10):0,hx(s.split(" "),function(e){var t=px.getStyle(r,e,!0);if(!("background-color"===e&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(t)&&(t=px.getStyle(n.getBody(),e,!0),"#ffffff"===px.toHex(t).toLowerCase())||"color"===e&&"#000000"===px.toHex(t).toLowerCase())){if("font-size"===e&&/em|%$/.test(t)){if(0===i)return;t=parseFloat(t)/(/%$/.test(t)?100:1)*i+"px"}"border"===e&&t&&(u+="padding:0 2px;"),u+=e+":"+t+";"}}),n.fire("AfterPreviewFormats"),px.remove(o),u)},parseSelector:yx=function(e){return e&&"string"==typeof e?(e=(e=e.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),ne.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),function(e){var e=ne.map(e.split(/(?:~\+|~|\+)/),bx),t=e.pop();return e.length&&(t.siblings=e),t}).reverse()):[]},selectorToHtml:function(e,t){return vx(yx(e),t)}},wx={toggle:function(e,t,n,r,o){t=t.get(n);!Eh.match(e,n,r,o)||"toggle"in t[0]&&!t[0].toggle?cx.applyFormat(e,n,r,o):j0.remove(e,n,r,o)}},Cx={setup:function(e){e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(var t=1;t<=6;t++)e.addShortcut("access+"+t,"",["FormatBlock",!1,"h"+t]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])}},Sx=Object.prototype.hasOwnProperty,kx=function(a){return function(){for(var e,t,n,r,o=new Array(arguments.length),i=0;i<o.length;i++)o[i]=arguments[i];if(0===o.length)throw new Error("Can't merge zero objects");for(e={},t=0;t<o.length;t++)for(r in n=o[t])Sx.call(n,r)&&(e[r]=a(e[r],n[r]));return e}}(function(e,t){return t}),Tx={register:function(t,s,c){t.addAttributeFilter("data-mce-tabindex",function(e,t){for(var n,r=e.length;r--;)(n=e[r]).attr("tabindex",n.attributes.map["data-mce-tabindex"]),n.attr(t,null)}),t.addAttributeFilter("src,href,style",function(e,t){for(var n,r,o=e.length,i="data-mce-"+t,a=s.url_converter,u=s.url_converter_scope;o--;)void 0!==(r=(n=e[o]).attributes.map[i])?(n.attr(t,0<r.length?r:null),n.attr(i,null)):(r=n.attributes.map[t],"style"===t?r=c.serializeStyle(c.parseStyle(r),n.name):a&&(r=a.call(u,r,t,n.name)),n.attr(t,0<r.length?r:null))}),t.addAttributeFilter("class",function(e){for(var t,n,r=e.length;r--;)(t=e[r]).attr("class")&&(n=t.attr("class").replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),t.attr("class",0<n.length?n:null))}),t.addAttributeFilter("data-mce-type",function(e,t,n){for(var r,o=e.length;o--;)"bookmark"!==(r=e[o]).attributes.map["data-mce-type"]||n.cleanup||(b.from(r.firstChild).exists(function(e){return!l.isZwsp(e.value)})?r.unwrap():r.remove())}),t.addNodeFilter("noscript",function(e){for(var t,n=e.length;n--;)(t=e[n].firstChild)&&(t.value=Ko.decode(t.value))}),t.addNodeFilter("script,style",function(e,t){for(var n,r,o,i=e.length,a=function(e){return e.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")};i--;)r=(n=e[i]).firstChild?n.firstChild.value:"","script"===t?((o=n.attr("type"))&&n.attr("type","mce-no/type"===o?null:o.replace(/^mce\-/,"")),"xhtml"===s.element_format&&0<r.length&&(n.firstChild.value="// <![CDATA[\n"+a(r)+"\n// ]]>")):"xhtml"===s.element_format&&0<r.length&&(n.firstChild.value="\x3c!--\n"+a(r)+"\n--\x3e")}),t.addNodeFilter("#comment",function(e){for(var t,n=e.length;n--;)0===(t=e[n]).value.indexOf("[CDATA[")?(t.name="#cdata",t.type=4,t.value=t.value.replace(/^\[CDATA\[|\]\]$/g,"")):0===t.value.indexOf("mce:protected ")&&(t.name="#text",t.type=3,t.raw=!0,t.value=unescape(t.value).substr(14))}),t.addNodeFilter("xml:namespace,input",function(e,t){for(var n,r=e.length;r--;)7===(n=e[r]).type?n.remove():1!==n.type||"input"!==t||"type"in n.attributes.map||n.attr("type","text")}),t.addAttributeFilter("data-mce-type",function(e){R(e,function(e){"format-caret"===e.attr("data-mce-type")&&(e.isEmpty(t.schema.getNonEmptyElements())?e.remove():e.unwrap())})}),t.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-type,data-mce-resize",function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)})},trimTrailingBr:function(e){var t=function(e){return e&&"br"===e.name},e=e.lastChild;t(e)&&t(t=e.prev)&&(e.remove(),t.remove())}},Nx=function(e,t,n){var r,o,i,a=e.dom;return t=t.cloneNode(!0),(r=J.document.implementation).createHTMLDocument&&(o=r.createHTMLDocument(""),ne.each("BODY"===t.nodeName?t.childNodes:[t],function(e){o.body.appendChild(o.importNode(e,!0))}),t="BODY"!==t.nodeName?o.body.firstChild:o.body,i=a.doc,a.doc=o),Tv.firePreProcess(e,kx(n,{node:t})),i&&(a.doc=i),t},Ex=function(e,t){return e&&e.hasEventListeners("PreProcess")&&!t.no_events},Rx={process:function(e,t,n){return Ex(e,n)?Nx(e,t,n):t}},_x=function(t,e){R(e,function(e){t.attr(e,null)})},Ax=function(e,i,a){e.addNodeFilter("font",function(e){R(e,function(e){var t=i.parse(e.attr("style")),n=e.attr("color"),r=e.attr("face"),o=e.attr("size");n&&(t.color=n),r&&(t["font-family"]=r),o&&(t["font-size"]=a[parseInt(e.attr("size"),10)-1]),e.name="span",e.attr("style",i.serialize(t)),_x(e,["color","face","size"])})})},Dx=function(e,n){e.addNodeFilter("strike",function(e){R(e,function(e){var t=n.parse(e.attr("style"));t["text-decoration"]="line-through",e.name="span",e.attr("style",n.serialize(t))})})},Px=function(e,t){var n=IN();t.convert_fonts_to_spans&&Ax(e,n,ne.explode(t.font_size_legacy_values)),Dx(e,n)},Ox={register:function(e,t){t.inline_styles&&Px(e,t)}},Bx=/^[ \t\r\n]*$/,Mx={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},Ix=function(e,t,n){var r,o,i=n?"lastChild":"firstChild",a=n?"prev":"next";if(e[i])return e[i];if(e!==t){if(r=e[a])return r;for(o=e.parent;o&&o!==t;o=o.parent)if(r=o[a])return r}},QN.create=function(e,t){var n,r=new QN(e,Mx[e]||1);if(t)for(n in t)r.attr(n,t[n]);return r},QN.prototype.replace=function(e){return e.parent&&e.remove(),this.insert(e,this),this.remove(),this},QN.prototype.attr=function(e,t){var n,r;if("string"!=typeof e){for(r in e)this.attr(r,e[r]);return this}if(n=this.attributes){if(void 0===t)return n.map[e];if(null===t){if(e in n.map)for(delete n.map[e],r=n.length;r--;)if(n[r].name===e)return n=n.splice(r,1),this}else{if(e in n.map){for(r=n.length;r--;)if(n[r].name===e){n[r].value=t;break}}else n.push({name:e,value:t});n.map[e]=t}return this}},QN.prototype.clone=function(){var e,t,n,r,o,i=new QN(this.name,this.type);if(n=this.attributes){for((o=[]).map={},e=0,t=n.length;e<t;e++)"id"!==(r=n[e]).name&&(o[o.length]={name:r.name,value:r.value},o.map[r.name]=r.value);i.attributes=o}return i.value=this.value,i.shortEnded=this.shortEnded,i},QN.prototype.wrap=function(e){return this.parent.insert(e,this),e.append(this),this},QN.prototype.unwrap=function(){for(var e,t=this.firstChild;t;)e=t.next,this.insert(t,this,!0),t=e;this.remove()},QN.prototype.remove=function(){var e=this.parent,t=this.next,n=this.prev;return e&&(e.firstChild===this?(e.firstChild=t)&&(t.prev=null):n.next=t,e.lastChild===this?(e.lastChild=n)&&(n.next=null):t.prev=n,this.parent=this.next=this.prev=null),this},QN.prototype.append=function(e){var t;return e.parent&&e.remove(),(t=this.lastChild)?((t.next=e).prev=t,this.lastChild=e):this.lastChild=this.firstChild=e,e.parent=this,e},QN.prototype.insert=function(e,t,n){var r;return e.parent&&e.remove(),r=t.parent||this,n?(t===r.firstChild?r.firstChild=e:t.prev.next=e,e.prev=t.prev,(e.next=t).prev=e):(t===r.lastChild?r.lastChild=e:t.next.prev=e,e.next=t.next,(e.prev=t).next=e),e.parent=r,e},QN.prototype.getAll=function(e){for(var t=[],n=this.firstChild;n;n=Ix(n,this))n.name===e&&t.push(n);return t},QN.prototype.empty=function(){var e,t,n;if(this.firstChild){for(e=[],n=this.firstChild;n;n=Ix(n,this))e.push(n);for(t=e.length;t--;)(n=e[t]).parent=n.firstChild=n.lastChild=n.next=n.prev=null}return this.firstChild=this.lastChild=null,this},QN.prototype.isEmpty=function(e,t,n){var r,o,i=this.firstChild;if(t=t||{},i)do{if(1===i.type){if(i.attributes.map["data-mce-bogus"])continue;if(e[i.name])return!1;for(r=i.attributes.length;r--;)if("name"===(o=i.attributes[r].name)||0===o.indexOf("data-mce-bookmark"))return!1}if(8===i.type)return!1;if(3===i.type&&!Bx.test(i.value))return!1;if(3===i.type&&i.parent&&t[i.parent.name]&&Bx.test(i.value))return!1;if(n&&n(i))return!1}while(i=Ix(i,this));return!0},QN.prototype.walk=function(e){return Ix(this,null,e)},Lx=QN,Fx=function(e,t,n,r){(e.padd_empty_with_br||t.insert)&&n[r.name]?r.empty().append(new Lx("br",1)).shortEnded=!0:r.empty().append(new Lx("#text",3)).value=""},Hx=function(e){return zx(e,"#text")&&""===e.firstChild.value},zx=function(e,t){return e&&e.firstChild&&e.firstChild===e.lastChild&&e.firstChild.name===t},Ux=function(e,t){e=e.getElementRule(t.name);return e&&e.paddEmpty},Wx=function(t,e,n,r){return r.isEmpty(e,n,function(e){return Ux(t,e)})},jx=function(e,t){return e&&(t[e.name]||"br"===e.name)},Vx=function(e,g){var h=e.schema;g.remove_trailing_brs&&e.addNodeFilter("br",function(e,t,n){var r,o,i,a,u,s,c,l=e.length,f=ne.extend({},h.getBlockElements()),d=h.getNonEmptyElements(),m=h.getNonEmptyElements();for(f.body=1,r=0;r<l;r++)if(i=(o=e[r]).parent,f[o.parent.name]&&o===i.lastChild){for(u=o.prev;u;){if("span"!==(s=u.name)||"bookmark"!==u.attr("data-mce-type")){if("br"!==s)break;if("br"===s){o=null;break}}u=u.prev}o&&(o.remove(),Wx(h,d,m,i))&&(c=h.getElementRule(i.name))&&(c.removeEmpty?i.remove():c.paddEmpty&&Fx(g,n,f,i))}else{for(a=o;i&&i.firstChild===a&&i.lastChild===a&&!f[(a=i).name];)i=i.parent;a===i&&!0!==g.padd_empty_with_br&&((c=new Lx("#text",3)).value="",o.replace(c))}}),e.addAttributeFilter("href",function(e){var t,n=e.length,r=function(e){return e.split(" ").filter(function(e){return 0<e.length}).concat(["noopener"]).sort().join(" ")},o=function(e){e=e?ne.trim(e):"";return/\b(noopener)\b/g.test(e)?e:r(e)};if(!g.allow_unsafe_link_target)for(;n--;)"a"===(t=e[n]).name&&"_blank"===t.attr("target")&&t.attr("rel",o(t.attr("rel")))}),g.allow_html_in_named_anchor||e.addAttributeFilter("id,name",function(e){for(var t,n,r,o,i=e.length;i--;)if("a"===(o=e[i]).name&&o.firstChild&&!o.attr("href"))for(r=o.parent,t=o.lastChild;n=t.prev,r.insert(t,o),t=n;);}),g.fix_list_elements&&e.addNodeFilter("ul,ol",function(e){for(var t,n,r=e.length;r--;)"ul"!==(n=(t=e[r]).parent).name&&"ol"!==n.name||(t.prev&&"li"===t.prev.name?t.prev.append(t):((n=new Lx("li",1)).attr("style","list-style-type: none"),t.wrap(n)))}),g.validate&&h.getValidClasses()&&e.addAttributeFilter("class",function(e){for(var t,n,r,o,i,a,u,s=e.length,c=h.getValidClasses();s--;){for(n=(t=e[s]).attr("class").split(" "),i="",r=0;r<n.length;r++)o=n[r],u=!1,(a=c["*"])&&a[o]&&(u=!0),a=c[t.name],(u=!u&&a&&a[o]?!0:u)&&(i&&(i+=" "),i+=o);i.length||(i=null),t.attr("class",i)}})},qx=ne.makeMap,$x=ne.each,Yx=ne.explode,Xx=ne.extend,Kx=function(e,t,n){-1===ne.inArray(t,n)&&(e.addAttributeFilter(n,function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)}),t.push(n))},Gx=function(e,t,n){return!t.no_events&&e?Tv.firePostProcess(e,kx(t,{content:n})).content:n},Jx=function(e,t,n){e=l.trim(n.getInner?t.innerHTML:e.getOuterHTML(t));return n.selection||_o(U.fromDom(t))?e:ne.trim(e)},Zx=function(e,t,n){n=n.selection?kx({forced_root_block:!1},n):n,e=e.parse(t,n);return Tx.trimTrailingBr(e),e},Qx=function(e,t,n){return WN(e,t).serialize(n)},ew=function(e,t,n,r,o){t=Qx(t,n,r);return Gx(e,o,t)},(nE=nE||{}).isBookmarkNode=$c.isBookmarkNode,tw=nE,nw=oe.isContentEditableFalse,rw=oe.isContentEditableTrue,ow=function(e,t){for(;t&&t!==e;){if(rw(t)||nw(t))return t;t=t.parentNode}return null},iw=function(n,a){var u,s,c,l,f,d,m,g,h,p,v,o,b,y,x,w,i,L,F,C,r,S,k,T,N,E,R,_,A,D=a.dom,H=ne.each,P=a.getDoc(),O=J.document,z=Math.abs,B=Math.round,M=a.getBody(),I={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},e=".mce-content-body";return a.contentStyles.push(e+" div.mce-resizehandle {position: absolute;border: 1px solid black;box-sizing: content-box;background: #FFF;width: 7px;height: 7px;z-index: 10000}"+e+" .mce-resizehandle:hover {background: #000}"+e+" img[data-mce-selected],"+e+" hr[data-mce-selected] {outline: 1px solid black;resize: none}"+e+" .mce-clonedresizable {position: absolute;"+(ee.gecko?"":"outline: 1px dashed black;")+"opacity: .5;filter: alpha(opacity=50);z-index: 10000}"+e+" .mce-resize-helper {background: #555;background: rgba(0,0,0,0.75);border-radius: 3px;border: 1px;color: white;display: none;font-family: sans-serif;font-size: 12px;white-space: nowrap;line-height: 14px;margin: 5px 10px;padding: 5px;position: absolute;z-index: 10001}"),i=function(e){return e&&("IMG"===e.nodeName||a.dom.is(e,"figure.image"))},L=function(e,t){return i(e.target)&&!$y.isXYWithinRange(e.clientX,e.clientY,t)},F=function(e){var t=e.target;L(e,a.selection.getRng())&&!e.isDefaultPrevented()&&(e.preventDefault(),a.selection.select(t))},C=function(e){return a.dom.is(e,"figure.image")?e.querySelector("img"):e},r=function(e){var t=a.settings.object_resizing;return!1!==t&&!ee.iOS&&("string"!=typeof t&&(t="table,img,figure.image,div"),"false"!==e.getAttribute("data-mce-resize"))&&e!==a.getBody()&&Hr(U.fromDom(e),t)},S=function(e){var t,n=e.screenX-f,r=e.screenY-d;b=n*l[2]+h,y=r*l[3]+p,b=b<5?5:b,y=y<5?5:y,(i(u)&&!1!==a.settings.resize_img_proportional?!W.modifierPressed(e):W.modifierPressed(e)||i(u)&&l[2]*l[3]!=0)&&(z(n)>z(r)?(y=B(b*v),b=B(y/v)):(b=B(y/v),y=B(b*v))),D.setStyles(C(s),{width:b,height:y}),e=l.startPos.x+n,t=l.startPos.y+r,D.setStyles(c,{left:e=0<e?e:0,top:t=0<t?t:0,display:"block"}),c.innerHTML=b+" &times; "+y,l[2]<0&&s.clientWidth<=b&&D.setStyle(s,"left",m+(h-b)),l[3]<0&&s.clientHeight<=y&&D.setStyle(s,"top",g+(p-y)),(n=M.scrollWidth-x)+(r=M.scrollHeight-w)!=0&&D.setStyles(c,{left:e-n,top:t-r}),o||(Tv.fireObjectResizeStart(a,u,h,p),o=!0)},k=function(){o=!1;function e(e,t){t&&(u.style[e]||!a.schema.isValid(u.nodeName.toLowerCase(),e)?D.setStyle(C(u),e,t):D.setAttrib(C(u),e,t))}e("width",b),e("height",y),D.unbind(P,"mousemove",S),D.unbind(P,"mouseup",k),O!==P&&(D.unbind(O,"mousemove",S),D.unbind(O,"mouseup",k)),D.remove(s),D.remove(c),T(u),Tv.fireObjectResized(a,u,b,y),D.setAttrib(u,"style",D.getAttrib(u,"style")),a.nodeChanged()},T=function(e){var o,i,t;N(),_(),t=D.getPos(e,M),m=t.x,g=t.y,t=e.getBoundingClientRect(),o=t.width||t.right-t.left,i=t.height||t.bottom-t.top,u!==e&&(u=e,b=y=0),t=a.fire("ObjectSelected",{target:e}),r(e)&&!t.isDefaultPrevented()?H(I,function(t,e){var n=function(e){f=e.screenX,d=e.screenY,h=C(u).clientWidth,p=C(u).clientHeight,v=p/h,(l=t).startPos={x:o*t[0]+m,y:i*t[1]+g},x=M.scrollWidth,w=M.scrollHeight,s=u.cloneNode(!0),D.addClass(s,"mce-clonedresizable"),D.setAttrib(s,"data-mce-bogus","all"),s.contentEditable=!1,s.unSelectabe=!0,D.setStyles(s,{left:m,top:g,margin:0}),s.removeAttribute("data-mce-selected"),M.appendChild(s),D.bind(P,"mousemove",S),D.bind(P,"mouseup",k),O!==P&&(D.bind(O,"mousemove",S),D.bind(O,"mouseup",k)),c=D.add(M,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},h+" &times; "+p)},r=D.get("mceResizeHandle"+e);r&&D.remove(r),r=D.add(M,"div",{id:"mceResizeHandle"+e,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+e+"-resize; margin:0; padding:0"}),11===ee.ie&&(r.contentEditable=!1),D.bind(r,"mousedown",function(e){e.stopImmediatePropagation(),e.preventDefault(),n(e)}),t.elm=r,D.setStyles(r,{left:o*t[0]+m-r.offsetWidth/2,top:i*t[1]+g-r.offsetHeight/2})}):N(),u.setAttribute("data-mce-selected","1")},N=function(){var e,t;for(e in _(),u&&u.removeAttribute("data-mce-selected"),I)(t=D.get("mceResizeHandle"+e))&&(D.unbind(t),D.remove(t))},E=function(e){var t=function(e,t){if(e)do{if(e===t)return!0}while(e=e.parentNode)};o||a.removed||(H(D.select("img[data-mce-selected],hr[data-mce-selected]"),function(e){e.removeAttribute("data-mce-selected")}),e="mousedown"===e.type?e.target:n.getNode(),t(e=D.$(e).closest("table,img,figure.image,hr")[0],M)&&(A(),t(n.getStart(!0),e))&&t(n.getEnd(!0),e)?T(e):N())},R=function(e){return nw(ow(a.getBody(),e))},_=function(){var e,t;for(e in I)(t=I[e]).elm&&(D.unbind(t.elm),delete t.elm)},A=function(){try{a.getDoc().execCommand("enableObjectResizing",!1,!1)}catch(e){}},a.on("init",function(){A(),ee.ie&&11<=ee.ie&&(a.on("mousedown click",function(e){var t=e.target,n=t.nodeName;o||!/^(TABLE|IMG|HR)$/.test(n)||R(t)||(2!==e.button&&a.selection.select(t,"TABLE"===n),"mousedown"===e.type&&a.nodeChanged())}),a.dom.bind(M,"mscontrolselect",function(e){function t(e){Fe.setEditorTimeout(a,function(){a.selection.select(e)})}R(e.target)?(e.preventDefault(),t(e.target)):/^(TABLE|IMG|HR)$/.test(e.target.nodeName)&&(e.preventDefault(),"IMG"===e.target.tagName)&&t(e.target)}));var t=Fe.throttle(function(e){a.composing||E(e)});a.on("nodechange ResizeEditor ResizeWindow drop FullscreenStateChanged",t),a.on("keyup compositionend",function(e){u&&"TABLE"===u.nodeName&&t(e)}),a.on("hide blur",N),a.on("contextmenu",F)}),a.on("remove",_),{isResizable:r,showResizeRect:T,hideResizeRect:N,updateResizeRect:E,destroy:function(){u=s=null}}},aw=function(e){for(var t=0,n=0,r=e;r&&r.nodeType;)t+=r.offsetLeft||0,n+=r.offsetTop||0,r=r.offsetParent;return{x:t,y:n}},uw=function(e,t,n){t={elm:t,alignToTop:n};return e.fire("scrollIntoView",t),t.isDefaultPrevented()},sw=function(e){return e.inline?e.getBody().getBoundingClientRect():{left:0,right:(e=e.getWin()).innerWidth,top:0,bottom:e.innerHeight,width:e.innerWidth,height:e.innerHeight}},cw=function(e,t,n){e.inline?(e.getBody().scrollLeft+=t,e.getBody().scrollTop+=n):e.getWin().scrollBy(t,n)},lw={scrollElementIntoView:function(e,t,n){var r,o,i,a=e.dom,u=a.getRoot(),s=0;uw(e,t,n)||oe.isElement(t)&&(!1===n&&(s=t.offsetHeight),"BODY"!==u.nodeName&&(n=e.selection.getScrollContainer())?(r=aw(t).y-aw(n).y+s,i=n.clientHeight,(r<(o=n.scrollTop)||o+i<r+25)&&(n.scrollTop=r<o?r:r-i+25)):(u=a.getViewPort(e.getWin()),r=a.getPos(t).y+s,o=u.y,i=u.h,(r<u.y||o+i<r+25)&&e.getWin().scrollTo(0,r<o?r:r-i+25)))},scrollRangeIntoView:function(r,e){Se(y.fromRangeStart(e).getClientRects()).each(function(e){var t=sw(r),t=ou(t,e),e=0<t.x?t.x+4:t.x-4,n=0<t.y?t.y+4:t.y-4;cw(r,0!==t.x?e:0,0!==t.y?n:0)})}},fw=function(e){return oe.isContentEditableTrue(e)||oe.isContentEditableFalse(e)},dw=function(e,t,n){for(;e&&e!==t;){if(n(e))return e;e=e.parentNode}return null},mw=function(e,n,t){var r=t.elementFromPoint(e,n),o=t.body.createTextRange();if(r&&"HTML"!==r.tagName||(r=t.body),o.moveToElementText(r),0<(t=(t=ne.toArray(o.getClientRects())).sort(function(e,t){return(e=Math.abs(Math.max(e.top-n,e.bottom-n)))-(t=Math.abs(Math.max(t.top-n,t.bottom-n)))})).length){n=(t[0].bottom+t[0].top)/2;try{return o.moveToPoint(e,n),o.collapse(!0),o}catch(e){}}return null},gw=function(e,t){var n=e&&e.parentElement?e.parentElement():null;return oe.isContentEditableFalse(dw(n,t,fw))?null:e},hw={fromPoint:function(t,n,r){var o,e,i=r;if(i.caretPositionFromPoint)(e=i.caretPositionFromPoint(t,n))&&((o=r.createRange()).setStart(e.offsetNode,e.offset),o.collapse(!0));else if(r.caretRangeFromPoint)o=r.caretRangeFromPoint(t,n);else if(i.body.createTextRange){o=i.body.createTextRange();try{o.moveToPoint(t,n),o.collapse(!0)}catch(e){o=mw(t,n,r)}return gw(o,r.body)}return o}},pw={processRanges:function(n,e){return Q(e,function(e){var t=n.fire("GetSelectionRange",{range:e});return t.range!==e?t.range:e})}},vw=function(e,t){var n=(t||J.document).createDocumentFragment();return R(e,function(e){n.appendChild(e.dom())}),U.fromDom(n)},bw=r("element","width","rows"),yw=r("element","cells"),xw=r("x","y"),ww=function(e,t){e=parseInt(Tr(e,t),10);return isNaN(e)?1:e},Cw=function(e,t,n,r,o){for(var i,a=ww(o,"rowspan"),u=ww(o,"colspan"),s=e.rows(),c=n;c<n+a;c++)for(s[c]||(s[c]=yw(ma(r),[])),i=t;i<t+u;i++)s[c].cells()[i]=c===n&&i===t?o:da(o)},Sw=function(e,t,n){e=e.rows();return!!(e[n]?e[n].cells():[])[t]},kw=function(e,t,n){for(;Sw(e,t,n);)t++;return t},Tw=function(e){return le(e,function(e,t){return t.cells().length>e?t.cells().length:e},0)},Nw=function(e,t){for(var n,r,o=e.rows(),i=0;i<o.length;i++)for(n=o[i].cells(),r=0;r<n.length;r++)if(a(n[r],t))return b.some(xw(r,i));return b.none()},Ew=function(e,t,n,r,o){for(var i,a=[],u=e.rows(),s=n;s<=o;s++)i=u[s].cells(),i=t<r?i.slice(t,r+1):i.slice(r,t+1),a.push(yw(u[s].element(),i));return a},Rw=function(e,t,n){var r=t.x(),t=t.y(),o=n.x(),n=n.y(),r=t<n?Ew(e,r,t,o,n):Ew(e,r,n,o,t);return bw(e.element(),Tw(r),r)},_w=function(e,t){var e=da(e.element()),n=U.fromTag("tbody");return Ei(n,t),ki(e,n),e},Aw=function(e){return Q(e.rows(),function(e){var t=Q(e.cells(),function(e){e=ma(e);return Er(e,"colspan"),Er(e,"rowspan"),e}),e=da(e.element());return Ei(e,t),e})},Dw={fromDom:function(e){var o=bw(da(e),0,[]);return R($i(e,"tr"),function(n,r){R($i(n,"td,th"),function(e,t){Cw(o,kw(o,t,r),r,n,e)})}),bw(o.element(),Tw(o.rows()),o.rows())},toDom:function(e){return _w(e,Aw(e))},subsection:function(n,e,r){return Nw(n,e).bind(function(t){return Nw(n,r).map(function(e){return Rw(n,t,e)})})}},Pw=function(e){return fe(e,function(e){return"ul"===cr(e)||"ol"===cr(e)})},Ow=function(t,n){return fe(t,function(e){return"li"===cr(e)&&Yb(e,n)}).fold(Z([]),function(e){return Pw(t).map(function(e){return[U.fromTag("li"),U.fromTag(cr(e))]}).getOr([])})},Bw=function(e,t){e=le(t,function(e,t){return ki(t,e),t},e);return 0<t.length?vw([e]):e},Mw=function(t){return To(t)?Yr(t).filter(ko).fold(Z([]),function(e){return[t,e]}):ko(t)?[t]:[]},Iw=function(e,t){var n=U.fromDom(t.commonAncestorContainer),e=cd.parentsAndSelf(n,e),r=_(e,function(e){return wo(e)||yo(e)}),e=Ow(e,t),t=r.concat(e.length?e:Mw(n));return Q(t,da)},Lw=function(){return vw([])},Fw=function(e,t){return Bw(U.fromDom(t.cloneContents()),Iw(e,t))},Hw=function(e,t){return Ki(t,"table",v(a,e))},zw=function(e,r){return Hw(e,r[0]).bind(function(e){var t=r[0],n=r[r.length-1],e=Dw.fromDom(e);return Dw.subsection(e,t,n).map(function(e){return vw([Dw.toDom(e)])})}).getOrThunk(Lw)},Uw=function(e,t){return 0<t.length&&t[0].collapsed?Lw():Fw(e,t[0])},Ww={read:function(e,t){var n=nh.getCellsFromElementOrRanges(t,e);return 0<n.length?zw(e,n):Uw(e,t)}},jw=function(n){return b.from(n.selection.getRng()).map(function(e){var e=n.dom.add(n.getBody(),"div",{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},e.cloneContents()),t=l.trim(e.innerText);return n.dom.remove(e),t}).getOr("")},Vw=function(e,t){var n=e.selection.getRng(),r=e.dom.create("body"),o=e.selection.getSel(),o=pw.processRanges(e,Zg.getRanges(o)),o=t.contextual?Ww.read(U.fromDom(e.getBody()),o).dom():n.cloneContents();return o&&r.appendChild(o),e.selection.serializer.serialize(r,t)},qw={getContent:function(e,t){var n;return(t=void 0===t?{}:t).get=!0,t.format=t.format||"html",t.selection=!0,(t=e.fire("BeforeGetContent",t)).isDefaultPrevented()?(e.fire("GetContent",t),t.content):"text"===t.format?jw(e):(t.getInner=!0,n=Vw(e,t),"tree"===t.format?n:(t.content=e.selection.isCollapsed()?"":n,e.fire("GetContent",t),t.content))}},$w={setContent:function(e,t,n){var r,o,i=e.selection.getRng(),a=e.getDoc();if((n=n||{format:"html"}).set=!0,n.selection=!0,n.content=t,!n.no_events&&(n=e.fire("BeforeSetContent",n)).isDefaultPrevented())e.fire("SetContent",n);else{if(t=n.content,i.insertNode){t+='<span id="__caret">_</span>',i.startContainer===a&&i.endContainer===a||(i.deleteContents(),0===a.body.childNodes.length)?a.body.innerHTML=t:i.createContextualFragment?i.insertNode(i.createContextualFragment(t)):(r=a.createDocumentFragment(),o=a.createElement("div"),r.appendChild(o),o.outerHTML=t,i.insertNode(r)),o=e.dom.get("__caret"),(i=a.createRange()).setStartBefore(o),i.setEndBefore(o),e.selection.setRng(i),e.dom.remove("__caret");try{e.selection.setRng(i)}catch(e){}}else i.item&&(a.execCommand("Delete",!1,null),i=e.getRng()),/^\s+/.test(t)?(i.pasteHTML('<span id="__mce_tmp">_</span>'+t),e.dom.remove("__mce_tmp")):i.pasteHTML(t);n.no_events||e.fire("SetContent",n)}}},Yw=function(e,t,n,r,o){var i=n?t.startContainer:t.endContainer,a=n?t.startOffset:t.endOffset;return b.from(i).map(U.fromDom).map(function(e){return r&&t.collapsed?e:eo(e,o(e,a)).getOr(e)}).bind(function(e){return fr(e)?b.some(e):Yr(e)}).map(function(e){return e.dom()}).getOr(e)},Xw=function(e,t,n){return Yw(e,t,!0,n,function(e,t){return Math.min(ro(e),t)})},Kw=function(e,t,n){return Yw(e,t,!1,n,function(e,t){return 0<t?t-1:t})},Gw=function(e,t){for(var n=e;e&&oe.isText(e)&&0===e.length;)e=t?e.nextSibling:e.previousSibling;return e||n},Jw=function(e,t){var n,r,o,i,a;return t?(r=t.startContainer,o=t.endContainer,i=t.startOffset,a=t.endOffset,n=t.commonAncestorContainer,!t.collapsed&&(r===o&&a-i<2&&r.hasChildNodes()&&(n=r.childNodes[i]),3===r.nodeType)&&3===o.nodeType&&(r=r.length===i?Gw(r.nextSibling,!0):r.parentNode,o=0===a?Gw(o.previousSibling,!1):o.parentNode,r)&&r===o?r:n&&3===n.nodeType?n.parentNode:n):e},Zw=function(e,t,n,r){var o,i,a=[],u=e.getRoot();if(n=e.getParent(n||Xw(u,t,t.collapsed),e.isBlock),r=e.getParent(r||Kw(u,t,t.collapsed),e.isBlock),n&&n!==u&&a.push(n),n&&r&&n!==r)for(i=new BN(n,u);(o=i.next())&&o!==r;)e.isBlock(o)&&a.push(o);return r&&n!==r&&r!==u&&a.push(r),a},Qw=function(r,e,o){return b.from(e).map(function(e){var t=r.nodeIndex(e),n=r.createRng();return n.setStart(e.parentNode,t),n.setEnd(e.parentNode,t+1),o&&(Xb(r,n,e,!0),Xb(r,n,e,!1)),n})},e1=ne.each,t1=function(e){return!!e.select},n1=function(e){return!(!e||!e.ownerDocument)&&jr(U.fromDom(e.ownerDocument),U.fromDom(e))},r1=function(e){return!!e&&(!!t1(e)||n1(e.startContainer)&&n1(e.endContainer))},o1=function(a,i,e,u){var s,c,l,t=function(e,t){return $w.setContent(u,e,t)},r=function(e){var t=n();t.collapse(!!e),o(t)},f=function(){return i.getSelection?i.getSelection():i.document.selection},n=function(){var e,t,n,r,o=function(e,t,n){try{return t.compareBoundaryPoints(e,n)}catch(e){return-1}};if(!i)return null;if(null==(n=i.document))return null;if(void 0!==u.bookmark&&!1===rb.hasFocus(u)&&(r=fv.getRng(u)).isSome())return r.map(function(e){return pw.processRanges(u,[e])[0]}).getOr(n.createRange());try{(e=f())&&(t=0<e.rangeCount?e.getRangeAt(0):(e.createRange?e:n).createRange())}catch(e){}return(t=(t=pw.processRanges(u,[t])[0])||(n.createRange?n.createRange():n.body.createTextRange())).setStart&&9===t.startContainer.nodeType&&t.collapsed&&(r=a.getRoot(),t.setStart(r,0),t.setEnd(r,0)),s&&c&&(0===o(t.START_TO_START,t,s)&&0===o(t.END_TO_END,t,s)?t=c:c=s=null),t},o=function(e,t){var n,r;if(r1(e))if(r=t1(e)?e:null){c=null;try{r.select()}catch(e){}}else{if(r=f(),e=u.fire("SetSelectionRange",{range:e,forward:t}).range,r){c=e;try{r.removeAllRanges(),r.addRange(e)}catch(e){}!1===t&&r.extend&&(r.collapse(e.endContainer,e.endOffset),r.extend(e.startContainer,e.startOffset)),s=0<r.rangeCount?r.getRangeAt(0):null}e.collapsed||e.startContainer!==e.endContainer||!r.setBaseAndExtent||ee.ie||e.endOffset-e.startOffset<2&&e.startContainer.hasChildNodes()&&(n=e.startContainer.childNodes[e.startOffset])&&"IMG"===n.tagName&&(r.setBaseAndExtent(e.startContainer,e.startOffset,e.endContainer,e.endOffset),r.anchorNode===e.startContainer&&r.focusNode===e.endContainer||r.setBaseAndExtent(n,0,n,1)),u.fire("AfterSetSelectionRange",{range:e,forward:t})}},d=function(){var e,t,n=f();return!(n&&n.anchorNode&&n.focusNode)||((e=a.createRng()).setStart(n.anchorNode,n.anchorOffset),e.collapse(!0),(t=a.createRng()).setStart(n.focusNode,n.focusOffset),t.collapse(!0),e.compareBoundaryPoints(e.START_TO_START,t)<=0)},m={bookmarkManager:null,controlSelection:null,dom:a,win:i,serializer:e,editor:u,collapse:r,setCursorLocation:function(e,t){var n=a.createRng();e?(n.setStart(e,t),n.setEnd(e,t),o(n),r(!1)):(Xb(a,n,u.getBody(),!0),o(n))},getContent:function(e){return qw.getContent(u,e)},setContent:t,getBookmark:function(e,t){return g.getBookmark(e,t)},moveToBookmark:function(e){return g.moveToBookmark(e)},select:function(e,t){return Qw(a,e,t).each(o),e},isCollapsed:function(){var e=n(),t=f();return!(!e||e.item)&&(e.compareEndPoints?0===e.compareEndPoints("StartToEnd",e):!t||e.collapsed)},isForward:d,setNode:function(e){return t(a.getOuterHTML(e)),e},getNode:function(){return Jw(u.getBody(),n())},getSel:f,setRng:o,getRng:n,getStart:function(e){return Xw(u.getBody(),n(),e)},getEnd:function(e){return Kw(u.getBody(),n(),e)},getSelectedBlocks:function(e,t){return Zw(a,n(),e,t)},normalize:function(){var e=n(),t=f();return!Zg.hasMultipleRanges(t)&&Kb(u)?((t=Fp.normalize(a,e)).each(function(e){o(e,d())}),t.getOr(e)):e},selectorChanged:function(e,t){var i;return l||(l={},i={},u.on("NodeChange",function(e){var n=e.element,r=a.getParents(n,null,a.getRoot()),o={};e1(l,function(e,n){e1(r,function(t){if(a.is(t,n))return i[n]||(e1(e,function(e){e(!0,{node:t,selector:n,parents:r})}),i[n]=e),o[n]=e,!1})}),e1(i,function(e,t){o[t]||(delete i[t],e1(e,function(e){e(!1,{node:n,selector:t,parents:r})}))})})),l[e]||(l[e]=[]),l[e].push(t),m},getScrollContainer:function(){for(var e,t=a.getRoot();t&&"BODY"!==t.nodeName;){if(t.scrollHeight>t.clientHeight){e=t;break}t=t.parentNode}return e},scrollIntoView:function(e,t){return lw.scrollElementIntoView(u,e,t)},placeCaretAt:function(e,t){return o(hw.fromPoint(e,t,u.getDoc()))},getBoundingClientRect:function(){var e=n();return e.collapsed?T.fromRangeStart(e).getClientRects()[0]:e.getBoundingClientRect()},destroy:function(){i=s=c=null,h.destroy()}},g=tw(m),h=iw(m,u);return m.bookmarkManager=g,m.controlSelection=h,m},(h=i1=i1||{})[h.Br=0]="Br",h[h.Block=1]="Block",h[h.Wrap=2]="Wrap",h[h.Eol=3]="Eol",a1=function(e,t){return e===rc.Backwards?t.reverse():t},u1=function(e,t,n){return e===rc.Forwards?t.next(n):t.prev(n)},s1=function(e,t,n,r){return oe.isBr(r.getNode(t===rc.Forwards))?i1.Br:!1===Vs(n,r)?i1.Block:i1.Wrap},iN=function(n,r,o,e){return r(o,e).breakAt.map(function(e){var t=r(o,e).positions;return n===rc.Backwards?t.concat(e):[e].concat(t)}).getOr([])},c1=function(e,o){return le(e,function(e,r){return e.fold(function(){return b.some(r)},function(n){return cu([Se(n.getClientRects()),Se(r.getClientRects())],function(e,t){e=Math.abs(o-e.left);return Math.abs(o-t.left)<=e?r:n}).or(e)})},b.none())},l1=function(t,e){return Se(e.getClientRects()).bind(function(e){return c1(t,e.left)})},f1=v(u=function(e,t,n,r){for(var o,i,a=pc(n),u=r,s=[];u&&(o=u1(t,a,u));){if(oe.isBr(o.getNode(!1)))return t===rc.Forwards?{positions:a1(t,s).concat([o]),breakType:i1.Br,breakAt:b.some(o)}:{positions:a1(t,s),breakType:i1.Br,breakAt:b.some(o)};if(o.isVisible()){if(e(u,o))return i=s1(0,t,u,o),{positions:a1(t,s),breakType:i,breakAt:b.some(o)};s.push(o)}u=o}return{positions:a1(t,s),breakType:i1.Eol,breakAt:b.none()}},y.isAbove,-1),d1=v(u,y.isBelow,1),m1=function(e,t){return f1(e,t).breakAt.isNone()},g1=function(e,t){return d1(e,t).breakAt.isNone()},h1=v(iN,-1,f1),p1=v(iN,1,d1),v1=function(t){return c.firstPositionIn(t).map(function(e){return[e].concat(d1(t,e).positions)}).getOr([])},b1=function(t){return c.lastPositionIn(t).map(function(e){return f1(t,e).positions.concat(e)}).getOr([])},y1=oe.isContentEditableFalse,x1=iu,w1=function(e,t,n,r){var o,i,a=e===rc.Forwards,u=a?Ud:Wd;return!r.collapsed&&(o=x1(r),y1(o))?rp(e,t,o,e===rc.Backwards,!0):(o=Oa(r),u(i=Zs(e,t.getBody(),r))?ip(t,i.getNode(!a)):(i=f.normalizePosition(a,n(i)))?u(i)?rp(e,t,i.getNode(!a),a,!0):(n=n(i))&&u(n)&&nc(i,n)?rp(e,t,n.getNode(!a),a,!0):o?up(t,i.toRange(),!0):null:o?r:null)},C1=function(e,t,n,r){var o,i=x1(r),r=Zs(e,t.getBody(),r),n=n(t.getBody(),Oy(1),r),n=_(n,By(1)),a=m.last(r.getClientRects());return(Ud(r)||jd(r))&&(i=r.getNode()),(Wd(r)||Vd(r))&&(i=r.getNode(!0)),a?(r=a.left,(a=zy(n,r))&&y1(a.node)?(n=Math.abs(r-a.left),o=Math.abs(r-a.right),rp(e,t,a.node,n<o,!0)):i&&(n=Py(e,t.getBody(),Oy(1),i),a=(a=zy(_(n,By(1)),r))||m.last(_(n,By(0))))?up(t,a.position.toRange(),!0):void 0):null},S1=function(e){e=e.dom.create(A.getForcedRootBlock(e));return(!ee.ie||11<=ee.ie)&&(e.innerHTML='<br data-mce-bogus="1">'),e},k1=function(e,t,n){var r,o=pc(e.getBody()),i=v(tc,o.next),o=v(tc,o.prev);n.collapsed&&e.settings.forced_root_block&&(r=e.dom.getParent(n.startContainer,"PRE"))&&!(1===t?i:o)(T.fromRangeStart(n))&&(i=S1(e),1===t?e.$(r).after(i):e.$(r).before(i),e.selection.select(i,!0),e.selection.collapse())},T1=function(e,t){var n=pc(e.getBody()),r=v(tc,n.next),n=v(tc,n.prev),o=t?rc.Forwards:rc.Backwards,t=t?r:n,r=e.selection.getRng(),n=w1(o,e,t,r);return n||(k1(e,o,r),null)},N1=function(e,t){var n=t?1:-1,t=t?Dy:Ay,r=e.selection.getRng(),t=C1(n,e,t,r);return t||(k1(e,n,r),null)},E1=function(t,n){return function(){var e=T1(t,n);return!!e&&(t.selection.setRng(e),!0)}},R1=function(t,n){return function(){var e=N1(t,n);return!!e&&(t.selection.setRng(e),!0)}},_1=function(t){return function(e){return(t?Wd:Ud)(e)}},A1=function(t,n){return function(){var e=n?T.fromRangeEnd(t.selection.getRng()):T.fromRangeStart(t.selection.getRng()),e=(n?d1:f1)(t.getBody(),e);return(n?ke:Se)(e.positions).filter(_1(n)).fold(Z(!1),function(e){return t.selection.setRng(e.toRange()),!0})}},D1=function(e,t){return{left:e.left-t,top:e.top-t,right:e.right+2*t,bottom:e.bottom+2*t,width:e.width+t,height:e.height+t}},P1=function(n,e){return pe(e,function(e){var t=D1(Ka(e.getBoundingClientRect()),-1);return[{x:t.left,y:n(t),cell:e},{x:t.right,y:n(t),cell:e}]})},O1=function(e,o,i){return le(e,function(e,r){return e.fold(function(){return b.some(r)},function(e){var t=Math.sqrt(Math.abs(e.x-o)+Math.abs(e.y-i)),n=Math.sqrt(Math.abs(r.x-o)+Math.abs(r.y-i));return b.some(n<t?r:e)})},b.none())},pN=function(e){return e.top},mN=function(e,t){return e.y>t},B1=v(t=function(e,t,n,r,o){n=$i(U.fromDom(n),"td,th,caption").map(function(e){return e.dom()}),e=_(P1(e,n),function(e){return t(e,o)});return O1(e,r,o).map(function(e){return e.cell})},function(e){return e.bottom},function(e,t){return e.y<t}),M1=v(t,pN,mN),I1=function(t,n){return Se(n.getClientRects()).bind(function(e){return B1(t,e.left,e.top)}).bind(function(e){return l1(b1(e),n)})},L1=function(t,n){return ke(n.getClientRects()).bind(function(e){return M1(t,e.left,e.top)}).bind(function(e){return l1(v1(e),n)})},F1=function(e,t){e.selection.setRng(t),lw.scrollRangeIntoView(e,t)},H1=function(t,n,e){return e.breakAt.map(function(e){return t(n,e).breakAt.isSome()}).getOr(!1)},z1=function(e){return e.breakType===i1.Wrap&&0===e.positions.length},U1=function(e){return e.breakType===i1.Br&&1===e.positions.length},W1=v(xN=function(e,t,n){var r=e(t,n);return z1(r)||!oe.isBr(n.getNode())&&U1(r)?!H1(e,t,r):r.breakAt.isNone()},f1),j1=v(xN,d1),V1=function(e,t,n){var r=T.fromRangeStart(t);return c.positionIn(!e,n).map(function(e){return e.isEqual(r)}).getOr(!1)},q1=function(e,t,n,r){var o=e.selection.getRng(),i=t?1:-1;return!(!Ds()||!V1(t,o,n)||(o=rp(i,e,n,!t,!0),F1(e,o),0))},$1=function(t,n,e){return I1(n,e).orThunk(function(){return Se(e.getClientRects()).bind(function(e){return c1(h1(t,T.before(n)),e.left)})}).getOr(T.before(n))},Y1=function(t,n,e){return L1(n,e).orThunk(function(){return Se(e.getClientRects()).bind(function(e){return c1(p1(t,T.after(n)),e.left)})}).getOr(T.after(n))},X1=function(e,t){t=t.getNode(e);return oe.isElement(t)&&"TABLE"===t.nodeName?b.some(t):b.none()},K1=function(n,r,o,e){var i=A.getForcedRootBlock(r);i?r.undoManager.transact(function(){var e,t=U.fromTag(i);kr(t,A.getForcedRootBlockAttrs(r)),ki(t,U.fromTag("br")),(n?Ci:wi)(U.fromDom(o),t),(e=r.dom.createRng()).setStart(t.dom(),0),e.setEnd(t.dom(),0),F1(r,e)}):F1(r,e.toRange())},G1=function(n,r,o){var e=X1(!!r,o),i=!1===r;e.fold(function(){return F1(n,o.toRange())},function(t){return c.positionIn(i,n.getBody()).filter(function(e){return e.isEqual(o)}).fold(function(){return F1(n,o.toRange())},function(e){return K1(r,n,t,o)})})},J1=function(e,t,n,r){var o,i=e.selection.getRng(),i=T.fromRangeStart(i),a=e.getBody();return!t&&W1(r,i)?(o=$1(a,n,i),G1(e,t,o),!0):!(!t||!j1(r,i)||(o=Y1(a,n,i),G1(e,t,o),0))},Z1=function(t,n){return function(){return b.from(t.dom.getParent(t.selection.getNode(),"td,th")).bind(function(e){return b.from(t.dom.getParent(e,"table")).map(function(e){return q1(t,n,e)})}).getOr(!1)}},Q1=function(n,r){return function(){return b.from(n.dom.getParent(n.selection.getNode(),"td,th")).bind(function(t){return b.from(n.dom.getParent(t,"table")).map(function(e){return J1(n,r,e,t)})}).getOr(!1)}},eC=function(e){return K(["figcaption"],cr(e))},tC=function(e){var t=J.document.createRange();return t.setStartBefore(e.dom()),t.setEndBefore(e.dom()),t},nC=function(e,t,n){(n?ki:Si)(e,t)},rC=function(e,t){var n=U.fromTag("br");return nC(e,n,t),tC(n)},oC=function(e,t,n,r){var n=U.fromTag(n),o=U.fromTag("br");return kr(n,r),ki(n,o),nC(e,n,t),tC(o)},iC=function(e,t,n,r){return""===t?rC(e,r):oC(e,r,t,n)},aC=function(e,t){t=v(a,t);return Xi(U.fromDom(e.container()),xo,t).filter(eC)},uC=function(e,t,n){return(t?g1:m1)(e.dom(),n)},sC=function(t,n){var r=U.fromDom(t.getBody()),o=T.fromRangeStart(t.selection.getRng()),i=A.getForcedRootBlock(t),a=A.getForcedRootBlockAttrs(t);return aC(o,r).exists(function(){var e;return!!uC(r,n,o)&&(e=iC(r,i,a,n),t.selection.setRng(e),!0)})},cC=function(e,t){return function(){return!!e.selection.isCollapsed()&&sC(e,t)}},lC=function(e){return Q(e,function(e){return kx({shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0,action:C},e)})};fC=function(e,t){return t.keyCode===e.keyCode&&t.shiftKey===e.shiftKey&&t.altKey===e.altKey&&t.ctrlKey===e.ctrlKey&&t.metaKey===e.metaKey},o={match:dC=function(e,t){return pe(lC(e),function(e){return fC(e,t)?[e]:[]})},action:function(e){for(var t,n=1;n<arguments.length;n++)n-1,0;return t=Array.prototype.slice.call(arguments,1),function(){return e.apply(null,t)}},execute:function(e,t){return fe(dC(e,t),function(e){return e.action()})}},mC=function(e,t,n){var r=ur.detect().os;o.execute([{keyCode:W.RIGHT,action:E1(e,!0)},{keyCode:W.LEFT,action:E1(e,!1)},{keyCode:W.UP,action:R1(e,!1)},{keyCode:W.DOWN,action:R1(e,!0)},{keyCode:W.RIGHT,action:Z1(e,!0)},{keyCode:W.LEFT,action:Z1(e,!1)},{keyCode:W.UP,action:Q1(e,!1)},{keyCode:W.DOWN,action:Q1(e,!0)},{keyCode:W.RIGHT,action:Sg.move(e,t,!0)},{keyCode:W.LEFT,action:Sg.move(e,t,!1)},{keyCode:W.RIGHT,ctrlKey:!r.isOSX(),altKey:r.isOSX(),action:Sg.moveNextWord(e,t)},{keyCode:W.LEFT,ctrlKey:!r.isOSX(),altKey:r.isOSX(),action:Sg.movePrevWord(e,t)},{keyCode:W.UP,action:cC(e,!1)},{keyCode:W.DOWN,action:cC(e,!0)}],n).each(function(e){n.preventDefault()})},gC=function(t,n){t.on("keydown",function(e){!1===e.isDefaultPrevented()&&mC(t,n,e)})},hC=function(e,t,n){o.execute([{keyCode:W.BACKSPACE,action:o.action(Om.backspaceDelete,e,!1)},{keyCode:W.DELETE,action:o.action(Om.backspaceDelete,e,!0)},{keyCode:W.BACKSPACE,action:o.action(lp.backspaceDelete,e,!1)},{keyCode:W.DELETE,action:o.action(lp.backspaceDelete,e,!0)},{keyCode:W.BACKSPACE,action:o.action(Dg.backspaceDelete,e,t,!1)},{keyCode:W.DELETE,action:o.action(Dg.backspaceDelete,e,t,!0)},{keyCode:W.BACKSPACE,action:o.action(xh.backspaceDelete,e,!1)},{keyCode:W.DELETE,action:o.action(xh.backspaceDelete,e,!0)},{keyCode:W.BACKSPACE,action:o.action(Rd.backspaceDelete,e,!1)},{keyCode:W.DELETE,action:o.action(Rd.backspaceDelete,e,!0)},{keyCode:W.BACKSPACE,action:o.action(wd.backspaceDelete,e,!1)},{keyCode:W.DELETE,action:o.action(wd.backspaceDelete,e,!0)},{keyCode:W.BACKSPACE,action:o.action(ep.backspaceDelete,e,!1)},{keyCode:W.DELETE,action:o.action(ep.backspaceDelete,e,!0)}],n).each(function(e){n.preventDefault()})},pC=function(e,t){o.execute([{keyCode:W.BACKSPACE,action:o.action(Om.paddEmptyElement,e)},{keyCode:W.DELETE,action:o.action(Om.paddEmptyElement,e)}],t)},vC=function(t,n){t.on("keydown",function(e){!1===e.isDefaultPrevented()&&hC(t,n,e)}),t.on("keyup",function(e){!1===e.isDefaultPrevented()&&pC(t,e)})},bC=function(e){for(;e;){if(1===e.nodeType||3===e.nodeType&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}},xC={moveToCaretPosition:function(e,t){var n,r,o,i,a=t,u=e.dom,s=e.schema.getMoveCaretBeforeOnEnterElements();if(t){if(/^(LI|DT|DD)$/.test(t.nodeName)&&(i=bC(t.firstChild))&&/^(UL|OL|DL)$/.test(i.nodeName)&&t.insertBefore(u.doc.createTextNode(""),t.firstChild),o=u.createRng(),t.normalize(),t.hasChildNodes()){for(n=new BN(t,t);r=n.current();){if(oe.isText(r)){o.setStart(r,0),o.setEnd(r,0);break}if(s[r.nodeName.toLowerCase()]){o.setStartBefore(r),o.setEndBefore(r);break}a=r,r=n.next()}r||(o.setStart(a,0),o.setEnd(a,0))}else oe.isBr(t)?t.nextSibling&&u.isBlock(t.nextSibling)?(o.setStartBefore(t),o.setEndBefore(t)):(o.setStartAfter(t),o.setEndAfter(t)):(o.setStart(t,0),o.setEnd(t,0));e.selection.setRng(o),u.remove(void 0),e.selection.scrollIntoView(t)}},getEditableRoot:function(e,t){for(var n,r=e.getRoot(),o=t;o!==r&&"false"!==e.getContentEditable(o);)"true"===e.getContentEditable(o)&&(n=o),o=o.parentNode;return o!==r?n:r},getParentBlock:yC=function(e){return b.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock))},getParentBlockName:function(e){return yC(e).fold(Z(""),function(e){return e.nodeName.toUpperCase()})},isListItemParentBlock:function(e){return yC(e).filter(function(e){return To(U.fromDom(e))}).isSome()}},wC=function(e,t){return e.firstChild&&e.firstChild.nodeName===t},CC=function(e,t){return e&&e.parentNode&&e.parentNode.nodeName===t},SC=function(e){return e&&/^(OL|UL|LI)$/.test(e.nodeName)},kC=function(e){return SC(e)&&SC(e.parentNode)},TC=function(e){var t=e.parentNode;return/^(LI|DT|DD)$/.test(t.nodeName)?t:e},NC=function(e,t,n){for(var r=e[n?"firstChild":"lastChild"];r&&!oe.isElement(r);)r=r[n?"nextSibling":"previousSibling"];return r===t},EC=function(e,t,n,r,o){var i=e.dom,a=e.selection.getRng();n!==e.getBody()&&(t=(o=kC(n)?"LI":o)?t(o):i.create("BR"),NC(n,r,!0)&&NC(n,r,!1)?CC(n,"LI")?i.insertAfter(t,TC(n)):i.replace(t,n):NC(n,r,!0)?CC(n,"LI")?(i.insertAfter(t,TC(n)),t.appendChild(i.doc.createTextNode(" ")),t.appendChild(n)):n.parentNode.insertBefore(t,n):NC(n,r,!1)?i.insertAfter(t,TC(n)):(n=TC(n),(a=a.cloneRange()).setStartAfter(r),a.setEndAfter(n),a=a.extractContents(),"LI"===o&&wC(a,"LI")?(t=a.firstChild,i.insertAfter(a,n)):(i.insertAfter(a,n),i.insertAfter(t,n))),i.remove(r),xC.moveToCaretPosition(e,t))},RC=function(e){R(qi(U.fromDom(e),dr),function(e){e=e.dom();e.nodeValue=l.trim(e.nodeValue)})},_C=function(e,t){return t&&"A"===t.nodeName&&e.isEmpty(t)},AC=function(e){return e&&/^(TD|TH|CAPTION)$/.test(e.nodeName)},DC=function(e){e.innerHTML='<br data-mce-bogus="1">'},PC=function(e,t){return e.nodeName===t||e.previousSibling&&e.previousSibling.nodeName===t},OC=function(e,t){return t&&e.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&"true"!==e.getContentEditable(t)},BC=function(e,t,n){var r,o=n,i=[];if(o){for(;o=o.firstChild;){if(e.isBlock(o))return;oe.isElement(o)&&!t[o.nodeName.toLowerCase()]&&i.push(o)}for(r=i.length;r--;)(!(o=i[r]).hasChildNodes()||o.firstChild===o.lastChild&&""===o.firstChild.nodeValue||_C(e,o))&&e.remove(o)}},MC=function(e,t,n){return!1===oe.isText(t)?n:e?1===n&&t.data.charAt(n-1)===l.ZWSP?0:n:n===t.data.length-1&&t.data.charAt(n)===l.ZWSP?t.data.length:n},IC=function(e){var t=e.cloneRange();return t.setStart(e.startContainer,MC(!0,e.startContainer,e.startOffset)),t.setEnd(e.endContainer,MC(!1,e.endContainer,e.endOffset)),t},LC=function(e){for(;oe.isText(e)&&(e.nodeValue=e.nodeValue.replace(/^[\r\n]+/,"")),e=e.firstChild;);},FC=function(e,t){for(var n,r=e.getRoot(),o=t;o!==r&&"false"!==e.getContentEditable(o);)"true"===e.getContentEditable(o)&&(n=o),o=o.parentNode;return o!==r?n:r},HC=function(e,t){var n=A.getForcedRootBlock(e);n&&n.toLowerCase()===t.tagName.toLowerCase()&&e.dom.setAttribs(t,A.getForcedRootBlockAttrs(e))},zC=function(e,t,n,r,o){var i,a,u,s,t=t||"P",c=e.dom,l=FC(c,r),f=c.getParent(r,c.isBlock);if(!f||!OC(c,f)){if(l=((f=f||l)===e.getBody()||AC(f)?f:f.parentNode).nodeName.toLowerCase(),!f.hasChildNodes())return i=c.create(t),HC(e,i),f.appendChild(i),n.setStart(i,0),n.setEnd(i,0),i;for(u=r;u.parentNode!==f;)u=u.parentNode;for(;u&&!c.isBlock(u);)u=(a=u).previousSibling;if(a&&e.schema.isValidChild(l,t.toLowerCase())){for(i=c.create(t),HC(e,i),a.parentNode.insertBefore(i,a),u=a;u&&!c.isBlock(u);)s=u.nextSibling,i.appendChild(u),u=s;n.setStart(r,o),n.setEnd(r,o)}}return r},UC=function(e,t){var n;t.normalize(),(n=t.lastChild)&&!/^(left|right)$/gi.test(e.getStyle(n,"float",!0))||e.add(t,"br")},WC=function(a,e){var u,s,i,c,t,n,r,l,o,f,d,m=a.dom,g=a.schema,h=g.getNonEmptyElements(),p=a.selection.getRng(),v=function(e){var t,n,r,o=s,i=g.getTextInlineElements();if(e||"TABLE"===l||"HR"===l?(t=m.create(e||f),HC(a,t)):t=c.cloneNode(!1),r=t,!1===A.shouldKeepStyles(a))m.setAttrib(t,"style",null),m.setAttrib(t,"class",null);else for(;!i[o.nodeName]||ls(o)||$c.isBookmarkNode(o)||(n=o.cloneNode(!1),m.setAttrib(n,"id",""),t.hasChildNodes()?n.appendChild(t.firstChild):r=n,t.appendChild(n)),(o=o.parentNode)&&o!==u;);return DC(r),t},b=function(e){var t,n,r,o=MC(e,s,i);if(oe.isText(s)&&(e?0<o:o<s.nodeValue.length))return!1;if((s.parentNode!==c||!d||e)&&(!e||!oe.isElement(s)||s!==c.firstChild)){if(PC(s,"TABLE")||PC(s,"HR"))return d&&!e||!d&&e;for(t=new BN(s,c),oe.isText(s)&&(e&&0===o?t.prev():e||o!==s.nodeValue.length||t.next());n=t.current();){if(oe.isElement(n)){if(!n.getAttribute("data-mce-bogus")&&(r=n.nodeName.toLowerCase(),h[r])&&"br"!==r)return!1}else if(oe.isText(n)&&!/^[ \t\r\n]*$/.test(n.nodeValue))return!1;e?t.prev():t.next()}}return!0},y=function(){n=/^(H[1-6]|PRE|FIGURE)$/.test(l)&&"HGROUP"!==o?v(f):v(),A.shouldEndContainerOnEmptyBlock(a)&&OC(m,r)&&m.isEmpty(c)?n=m.split(r,c):m.insertAfter(n,c),xC.moveToCaretPosition(a,n)};Fp.normalize(m,p).each(function(e){p.setStart(e.startContainer,e.startOffset),p.setEnd(e.endContainer,e.endOffset)}),s=p.startContainer,i=p.startOffset,f=A.getForcedRootBlock(a),t=e.shiftKey,oe.isElement(s)&&s.hasChildNodes()&&(d=i>s.childNodes.length-1,s=s.childNodes[Math.min(i,s.childNodes.length-1)]||s,i=d&&oe.isText(s)?s.nodeValue.length:0),(u=FC(m,s))&&((f&&!t||!f&&t)&&(s=zC(a,f,p,s,i)),c=m.getParent(s,m.isBlock),r=c?m.getParent(c.parentNode,m.isBlock):null,l=c?c.nodeName.toUpperCase():"","LI"!==(o=r?r.nodeName.toUpperCase():"")||e.ctrlKey||(r=(c=r).parentNode,l=o),/^(LI|DT|DD)$/.test(l)&&m.isEmpty(c)?EC(a,v,r,c,f):f&&c===a.getBody()||(f=f||"P",xa(c)?(n=Pa(c),m.isEmpty(c)&&DC(c),xC.moveToCaretPosition(a,n)):b()?y():b(!0)?(n=c.parentNode.insertBefore(v(),c),xC.moveToCaretPosition(a,PC(c,"HR")?n:c)):((t=IC(p).cloneRange()).setEndAfter(c),e=t.extractContents(),RC(e),LC(e),n=e.firstChild,m.insertAfter(e,c),BC(m,h,n),UC(m,c),m.isEmpty(c)&&DC(c),n.normalize(),m.isEmpty(n)?(m.remove(n),y()):xC.moveToCaretPosition(a,n)),m.setAttrib(n,"id",""),a.fire("NewBlock",{newBlock:n})))},jC=function(e,t){return xC.getParentBlock(e).filter(function(e){return 0<t.length&&Hr(U.fromDom(e),t)}).isSome()},VC={shouldInsertBr:function(e){return jC(e,A.getBrNewLineSelector(e))},shouldBlockNewLine:function(e){return jC(e,A.getNoNewLineSelector(e))}},qC=i([{br:[]},{block:[]},{none:[]}]),$C=function(e,t){return VC.shouldBlockNewLine(e)},YC=function(n){return function(e,t){return""===A.getForcedRootBlock(e)===n}},XC=function(n){return function(e,t){return xC.isListItemParentBlock(e)===n}},KC=function(n,r){return function(e,t){return xC.getParentBlockName(e)===n.toUpperCase()===r}},GC=function(e){return KC("pre",e)},JC=function(){return KC("summary",!0)},ZC=function(n){return function(e,t){return A.shouldPutBrInPre(e)===n}},QC=function(e,t){return VC.shouldInsertBr(e)},eS=function(e,t){return t},tS=function(e){var t=A.getForcedRootBlock(e),n=xC.getEditableRoot(e.dom,e.selection.getStart());return n&&e.schema.isValidChild(n.nodeName,t||"P")},nS=function(e,t){return function(n,r){return le(e,function(e,t){return e&&t(n,r)},!0)?b.some(t):b.none()}},rS=function(e,t){return $m([nS([$C],qC.none()),nS([JC()],qC.br()),nS([GC(!0),ZC(!1),eS],qC.br()),nS([GC(!0),ZC(!1)],qC.block()),nS([GC(!0),ZC(!0),eS],qC.block()),nS([GC(!0),ZC(!0)],qC.br()),nS([XC(!0),eS],qC.br()),nS([XC(!0)],qC.block()),nS([YC(!0),eS,tS],qC.block()),nS([YC(!0)],qC.br()),nS([QC],qC.br()),nS([YC(!1),eS],qC.br()),nS([tS],qC.block())],[e,t.shiftKey]).getOr(qC.none())},oS={insert:function(e,t){rS(e,t).fold(function(){Jp.insert(e,t)},function(){WC(e,t)},C)}},iS=function(e){e.typing&&(e.typing=!1,e.add())},aS=function(e,t){t.isDefaultPrevented()||(t.preventDefault(),iS(e.undoManager),e.undoManager.transact(function(){!1===e.selection.isCollapsed()&&e.execCommand("Delete"),oS.insert(e,t)}))},uS=function(t){t.on("keydown",function(e){e.keyCode===W.ENTER&&aS(t,e)})},sS=v(e=function(n,r){var e=r.container(),t=r.offset();return oe.isText(e)?(e.insertData(t,n),b.some(y(e,t+n.length))):Qs(r).map(function(e){var t=U.fromText(n);return(r.isAtEnd()?Ci:wi)(e,t),y(t.dom(),n.length)})},""),cS=v(e," "),fS=v(g=function(t,n,r){var e=_(cd.parentsAndSelf(U.fromDom(r.container()),n),xo);return Se(e).fold(function(){return lS(t,n.dom(),r).forall(function(e){return!1===Vs(e,r,n.dom())})},function(e){return lS(t,e.dom(),r).isNone()})},!(lS=function(e,t,n){return c.navigateIgnore(e,t,n,zd)})),dS=v(g,!0),mS=function(e){return y.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd()},gS=function(e,t){t=_(cd.parentsAndSelf(U.fromDom(t.container()),e),xo);return Se(t).getOr(e)},hS=function(e,t){return mS(t)?Hd(t):Hd(t)||c.prevPosition(gS(e,t).dom(),t).exists(Hd)},pS=function(e,t){return mS(t)?Fd(t):Fd(t)||c.nextPosition(gS(e,t).dom(),t).exists(Fd)},vS=function(e){return K(["pre","pre-line","pre-wrap"],e)},bS=function(e){return Qs(e).bind(function(e){return Xi(e,fr)}).exists(function(e){return vS(Ar(e,"white-space"))})},yS=function(e,t){return c.prevPosition(e.dom(),t).isNone()},xS=function(e,t){return c.nextPosition(e.dom(),t).isNone()},wS=function(e,t){return yS(e,t)||xS(e,t)||fS(e,t)||dS(e,t)||Pd(e,t)||Dd(e,t)},CS=function(e,t){return!bS(t)&&(wS(e,t)||hS(e,t)||pS(e,t))},SS=function(e,t){return!bS(t)&&(fS(e,t)||Pd(e,t)||hS(e,t))},kS=function(e){var t=e.container(),n=e.offset();return oe.isText(t)&&n<t.data.length?y(t,n+1):e},TS=function(e,t){t=kS(t);return!bS(t)&&(dS(e,t)||Dd(e,t)||pS(e,t))},NS=function(e,t){return SS(e,t)||TS(e,t)},ES=function(e,t){return Md(e.charAt(t))},RS=function(e){e=e.container();return oe.isText(e)&&tr(e.data,"")},_S=function(e){return Q(e.split(""),function(e,t,n){return Md(e)&&0<t&&t<n.length-1&&Ld(n[t-1])&&Ld(n[t+1])?" ":e}).join("")},AS=function(e,t){var n=t.data,r=y(t,0);return!(!ES(n,0)||NS(e,r)||(t.data=" "+n.slice(1),0))},DS=function(e){var t=e.data,n=_S(t);return n!==t&&(e.data=n,!0)},PS=function(e,t){var n=t.data,r=y(t,n.length-1);return!(!ES(n,n.length-1)||NS(e,r)||(t.data=n.slice(0,-1)+" ",0))},OS=function(n,e){return b.some(e).filter(RS).bind(function(e){var t=e.container();return AS(n,t)||DS(t)||PS(n,t)?b.some(e):b.none()})},BS=function(t){var e=U.fromDom(t.getBody());t.selection.isCollapsed()&&OS(e,y.fromRangeStart(t.selection.getRng())).each(function(e){t.selection.setRng(e.toRange())})},MS=function(t){return function(e){return e.fold(function(e){return c.prevPosition(t.dom(),T.before(e))},function(e){return c.firstPositionIn(e)},function(e){return c.lastPositionIn(e)},function(e){return c.nextPosition(t.dom(),T.after(e))})}},IS=function(t,n){return function(e){return(CS(t,e)?sS:cS)(n)}},LS=function(t){return function(e){return t.selection.setRng(e.toRange()),t.nodeChanged(),!0}},FS=function(e){var t,n,r=T.fromRangeStart(e.selection.getRng()),o=U.fromDom(e.getBody());return!!e.selection.isCollapsed()&&(t=v(f.isInlineTarget,e),n=T.fromRangeStart(e.selection.getRng()),fg.readLocation(t,e.getBody(),n).bind(MS(o)).bind(IS(o,r)).exists(LS(e)))},HS=function(e,t){o.execute([{keyCode:W.SPACEBAR,action:o.action(FS,e)}],t).each(function(e){t.preventDefault()})},zS=function(t){t.on("keydown",function(e){!1===e.isDefaultPrevented()&&HS(t,e)})},US=function(e){return Gi(U.fromDom(e.getBody()),"*[data-mce-caret]").fold(Z(null),function(e){return e.dom()})},WS=function(e){e.selection.setRng(e.selection.getRng())},jS=function(e,t){t.hasAttribute("data-mce-caret")&&(Pa(t),WS(e),e.selection.scrollIntoView(t))},VS=function(e,t){var n=US(e);n&&("compositionstart"===t.type?(t.preventDefault(),t.stopPropagation(),jS(e,n)):Sa(n)&&(jS(e,n),e.undoManager.add()))},qS=function(e){e.on("keyup compositionstart",v(VS,e))},$S=ur.detect().browser,YS=function(e){var t=Di(function(){e.composing||BS(e)},0);$S.isIE()&&(e.on("keypress",function(e){t.throttle()}),e.on("remove",function(e){t.cancel()}))},XS=function(t){YS(t),t.on("input",function(e){!1===e.isComposing&&BS(t)})},KS=function(e,t){o.execute([{keyCode:W.END,action:A1(e,!0)},{keyCode:W.HOME,action:A1(e,!1)}],t).each(function(e){t.preventDefault()})},GS=function(t){t.on("keydown",function(e){!1===e.isDefaultPrevented()&&KS(t,e)})},JS=function(e){var t=Sg.setupSelectedState(e);qS(e),gC(e,t),vC(e,t),uS(e),zS(e),XS(e),GS(e)},ZS=function(e){return oe.isElement(e)&&So(U.fromDom(e))},QS=function(e){var t,n=e.selection.getRng(),r=y.fromRangeStart(n),o=y.fromRangeEnd(n);y.isElementPosition(r)&&(t=r.container(),ZS(t))&&c.firstPositionIn(t).each(function(e){return n.setStart(e.container(),e.offset())}),y.isElementPosition(o)&&(t=r.container(),ZS(t))&&c.lastPositionIn(t).each(function(e){return n.setEnd(e.container(),e.offset())}),e.selection.setRng(Gl.normalize(n))},ek=function(t){t.on("click",function(e){3<=e.detail&&QS(t)})},tk=function(t){t.on("click",function(e){t.dom.getParent(e.target,"details")&&e.preventDefault()})},nk=function(e){e.parser.addNodeFilter("details",function(e){R(e,function(e){e.attr("data-mce-open",e.attr("open")),e.attr("open","open")})}),e.serializer.addNodeFilter("details",function(e){R(e,function(e){var t=e.attr("data-mce-open");e.attr("open",L(t)?t:null),e.attr("data-mce-open",null)})})},rk=function(e){tk(e),nk(e)},ok=s.DOM,ik=function(e,t){var e=U.fromDom(e.getDoc().head),n=U.fromTag("style");Sr(n,"type","text/css"),ki(n,U.fromText(t)),ki(e,n)},ak=function(u){var e=eE(u.settings,u.schema);return e.addAttributeFilter("src,href,style,tabindex",function(e,t){for(var n,r,o,i=e.length,a=u.dom;i--;)r=(n=e[i]).attr(t),n.attributes.map[o="data-mce-"+t]||0!==r.indexOf("data:")&&0!==r.indexOf("blob:")&&("style"===t?((r=a.serializeStyle(a.parseStyle(r),n.name)).length||(r=null),n.attr(o,r),n.attr(t,r)):"tabindex"===t?(n.attr(o,r),n.attr(t,null)):n.attr(o,u.convertURL(r,t,n.name)))}),e.addNodeFilter("script",function(e){for(var t,n,r=e.length;r--;)0!==(n=(t=e[r]).attr("type")||"no/type").indexOf("mce-")&&t.attr("type","mce-"+n)}),e.addNodeFilter("#cdata",function(e){for(var t,n=e.length;n--;)(t=e[n]).type=8,t.name="#comment",t.value="[CDATA["+t.value+"]]"}),e.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(e){for(var t,n=e.length,r=u.schema.getNonEmptyElements();n--;)(t=e[n]).isEmpty(r)&&0===t.getAll("br").length&&(t.append(new Lx("br",1)).shortEnded=!0)}),e},uk=function(t){t.settings.auto_focus&&Fe.setEditorTimeout(t,function(){var e=!0===t.settings.auto_focus?t:t.editorManager.get(t.settings.auto_focus);e.destroyed||e.focus()},100)},sk=function(e){e.bindPendingEventDelegates(),e.initialized=!0,e.fire("init"),e.focus(!0),e.nodeChanged({initial:!0}),e.execCallback("init_instance_callback",e),uk(e)},ck=function(e){return(e.inline?ok:e.dom).styleSheetLoader},lk=function(t,e){var n,r=t.settings,o=t.getElement(),i=t.getDoc();r.inline||(t.getElement().style.visibility=t.orgVisibility),e||r.content_editable||(i.open(),i.write(t.iframeHTML),i.close()),r.content_editable&&(t.on("remove",function(){var e=this.getBody();ok.removeClass(e,"mce-content-body"),ok.removeClass(e,"mce-edit-focus"),ok.setAttrib(e,"contentEditable",null)}),ok.addClass(o,"mce-content-body"),t.contentDocument=i=r.content_document||J.document,t.contentWindow=r.content_window||J.window,t.bodyElement=o,r.content_document=r.content_window=null,r.root_name=o.nodeName.toLowerCase()),(e=t.getBody()).disabled=!0,t.readonly=r.readonly,t.readonly||(t.inline&&"static"===ok.getStyle(e,"position",!0)&&(e.style.position="relative"),e.contentEditable=t.getParam("content_editable_state",!0)),e.disabled=!1,t.editorUpload=XN(t),t.schema=MN(r),t.dom=s(i,{keep_values:!0,url_converter:t.convertURL,url_converter_scope:t,hex_colors:r.force_hex_style_colors,class_filter:r.class_filter,update_styles:!0,root_element:t.inline?t.getBody():null,collect:r.content_editable,schema:t.schema,contentCssCors:A.shouldUseContentCssCors(t),onSetAttrib:function(e){t.fire("SetAttrib",e)}}),t.parser=ak(t),t.serializer=tE(r,t),t.selection=o1(t.dom,t.getWin(),t.serializer,t),t.annotator=zN(t),t.formatter=ZN(t),t.undoManager=JN(t),t._nodeChangeDispatcher=new KN(t),t._selectionOverrides=Jy(t),rk(t),ek(t),JS(t),Wb(t),t.fire("PreInit"),r.browser_spellcheck||r.gecko_spellcheck||(i.body.spellcheck=!1,ok.setAttrib(e,"spellcheck","false")),t.quirks=rE(t),t.fire("PostRender"),r.directionality&&(e.dir=r.directionality),r.nowrap&&(e.style.whiteSpace="nowrap"),r.protect&&t.on("BeforeSetContent",function(t){ne.each(r.protect,function(e){t.content=t.content.replace(e,function(e){return"\x3c!--mce:protected "+escape(e)+"--\x3e"})})}),t.on("SetContent",function(){t.addVisual(t.getBody())}),t.load({initial:!0,format:"html"}),t.startContent=t.getContent({format:"raw"}),t.on("compositionstart compositionend",function(e){t.composing="compositionstart"===e.type}),0<t.contentStyles.length&&(n="",ne.each(t.contentStyles,function(e){n+=e+"\r\n"}),t.dom.addStyle(n)),ck(t).loadAll(t.contentCSS,function(e){sk(t)},function(e){sk(t)}),r.content_style&&ik(t,r.content_style)},fk=s.DOM,dk=function(e,t){var n;return!!(J.document.domain!==J.window.location.hostname&&ee.ie&&ee.ie<12)&&(n=Ib.uuid("mce"),e[n]=function(){lk(e)},n='javascript:(function(){document.open();document.domain="'+J.document.domain+'";var ed = window.parent.tinymce.get("'+e.id+'");document.write(ed.iframeHTML);document.close();ed.'+n+"(true);})()",fk.setAttrib(t,"src",n),!0)},mk=function(e){e="number"==typeof e?e+"px":e;return e||""},gk=function(e,t,n,r){var o=U.fromTag("iframe");return kr(o,r),kr(o,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:t}),_r(o,{width:"100%",height:mk(n),display:"block"}),o},hk=function(e){var t,n,r=A.getDocType(e)+"<html><head>";return A.getDocumentBaseUrl(e)!==e.documentBaseUrl&&(r+='<base href="'+e.documentBaseURI.getURI()+'" />'),r+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />',t=A.getBodyId(e),n=A.getBodyClass(e),A.getContentSecurityPolicy(e)&&(r+='<meta http-equiv="Content-Security-Policy" content="'+A.getContentSecurityPolicy(e)+'" />'),r+='</head><body id="'+t+'" class="mce-content-body '+n+'" data-id="'+e.id+'"><br></body></html>'},pk=function(e,t){var n=e.editorManager.translate("Rich Text Area. Press ALT-F9 for menu. Press ALT-F10 for toolbar. Press ALT-0 for help"),r=gk(e.id,n,t.height,A.getIframeAttrs(e)).dom();return r.onload=function(){r.onload=null,e.fire("load")},n=dk(e,r),e.contentAreaContainer=t.iframeContainer,e.iframeElement=r,e.iframeHTML=hk(e),fk.add(t.iframeContainer,r),n},vk=function(e,t){var n=pk(e,t);t.editorContainer&&(fk.get(t.editorContainer).style.display=e.orgDisplay,e.hidden=fk.isHidden(t.editorContainer)),e.getElement().style.display="none",fk.setAttrib(e.id,"aria-hidden","true"),n||lk(e)},bk=s.DOM,yk=function(t,n,r){var e,o=Sb.get(r),i=Sb.urls[r]||t.documentBaseUrl.replace(/\/$/,"");if(r=ne.trim(r),o&&-1===ne.inArray(n,r)&&(ne.each(Sb.dependencies(r),function(e){yk(t,n,e)}),!t.plugins[r]))try{e=new o(t,i,t.$),(t.plugins[r]=e).init&&(e.init(t,i),n.push(r))}catch(e){Cb.pluginInitError(t,r,e)}},xk=function(e){return e.replace(/^\-/,"")},wk=function(t){var n=[];ne.each(t.settings.plugins.split(/[ ,]/),function(e){yk(t,n,xk(e))})},Ck=function(e){var t,n=e.settings.theme;L(n)?(e.settings.theme=xk(n),t=kb.get(n),e.theme=new t(e,kb.urls[n]),e.theme.init&&e.theme.init(e,kb.urls[n]||e.documentBaseUrl.replace(/\/$/,""),e.$)):e.theme={}},Sk=function(e){var t=e.settings,n=e.getElement(),r=t.width||bk.getStyle(n,"width")||"100%",o=t.height||bk.getStyle(n,"height")||n.offsetHeight,i=t.min_height||100,a=/^[0-9\.]+(|px)$/i;return a.test(""+r)&&(r=Math.max(parseInt(r,10),100)),a.test(""+o)&&(o=Math.max(parseInt(o,10),i)),a=e.theme.renderUI({targetNode:n,width:r,height:o,deltaWidth:t.delta_width,deltaHeight:t.delta_height}),t.content_editable||(o=(a.iframeHeight||o)+("number"==typeof o?a.deltaHeight||0:""))<i&&(o=i),a.height=o,a},kk=function(e){var t=e.getElement(),n=e.settings.theme(e,t);return n.editorContainer.nodeType&&(n.editorContainer.id=n.editorContainer.id||e.id+"_parent"),n.iframeContainer&&n.iframeContainer.nodeType&&(n.iframeContainer.id=n.iframeContainer.id||e.id+"_iframecontainer"),n.height=n.iframeHeight||t.offsetHeight,n},Tk=function(e){return{editorContainer:e,iframeContainer:e}},Nk=function(e){var t=bk.create("div");return bk.insertAfter(t,e),Tk(t)},Ek=function(e){var t=e.getElement();return e.inline?Tk(null):Nk(t)},Rk=function(e){var t=e.settings,n=e.getElement();return e.orgDisplay=n.style.display,(L(t.theme)?Sk:V(t.theme)?kk:Ek)(e)},_k={init:function(t){var e=t.settings,n=t.getElement();return t.rtl=e.rtl_ui||t.editorManager.i18n.rtl,t.editorManager.i18n.setCode(e.language),e.aria_label=e.aria_label||bk.getAttrib(n,"aria-label",t.getLang("aria.rich_text_area")),t.fire("ScriptsLoaded"),Ck(t),wk(t),n=Rk(t),t.editorContainer=n.editorContainer||null,e.content_css&&ne.each(ne.explode(e.content_css),function(e){t.contentCSS.push(t.documentBaseURI.toAbsolute(e))}),e.content_editable?lk(t):vk(t,n)}},Ak=s.DOM,Dk=function(e){return"-"===e.charAt(0)},Pk=function(e,t){var n=t.settings;n.language&&"en"!==n.language&&!n.language_url&&(n.language_url=t.editorManager.baseURL+"/langs/"+n.language+".js"),n.language_url&&!t.editorManager.i18n.data[n.language]&&e.add(n.language_url)},Ok=function(e,t,n,r){var o=t.settings,i=o.theme;L(i)?(Dk(i)||kb.urls.hasOwnProperty(i)||((o=o.theme_url)?kb.load(i,t.documentBaseURI.toAbsolute(o)):kb.load(i,"themes/"+i+"/theme"+n+".js")),e.loadQueue(function(){kb.waitFor(i,r)})):r()},Bk=function(n,r){ne.isArray(n.plugins)&&(n.plugins=n.plugins.join(" ")),ne.each(n.external_plugins,function(e,t){Sb.load(t,e),n.plugins+=" "+t}),ne.each(n.plugins.split(/[ ,]/),function(e){var t;(e=ne.trim(e))&&!Sb.urls[e]&&(Dk(e)?(e=e.substr(1,e.length),t=Sb.dependencies(e),ne.each(t,function(e){e=Sb.createUrl({prefix:"plugins/",resource:e,suffix:"/plugin"+r+".js"},e),Sb.load(e.resource,e)})):Sb.load(e,{prefix:"plugins/",resource:e,suffix:"/plugin"+r+".js"}))})},Mk=function(t,e){var n=yi.ScriptLoader;Ok(n,t,e,function(){Pk(n,t),Bk(t.settings,e),n.loadQueue(function(){t.removed||_k.init(t)},t,function(e){Cb.pluginLoadError(t,e[0]),t.removed||_k.init(t)})})},Ik=function(t){var e,n=t.settings,r=t.id,o=function(){Ak.unbind(J.window,"ready",o),t.render()};Ke.Event.domLoaded?t.getElement()&&ee.contentEditable&&(n.inline?t.inline=!0:(t.orgVisibility=t.getElement().style.visibility,t.getElement().style.visibility="hidden"),(e=t.getElement().form||Ak.getParent(r,"form"))&&(t.formElement=e,n.hidden_input&&!/TEXTAREA|INPUT/i.test(t.getElement().nodeName)&&(Ak.insertAfter(Ak.create("input",{type:"hidden",name:r}),r),t.hasHiddenInput=!0),t.formEventDelegate=function(e){t.fire(e.type,e)},Ak.bind(e,"submit reset",t.formEventDelegate),t.on("reset",function(){t.setContent(t.startContent,{format:"raw"})}),!n.submit_patch||e.submit.nodeType||e.submit.length||e._mceOldSubmit||(e._mceOldSubmit=e.submit,e.submit=function(){return t.editorManager.triggerSave(),t.setDirty(!1),e._mceOldSubmit(e)})),t.windowManager=$N(t),t.notificationManager=qN(t),"xml"===n.encoding&&t.on("GetContent",function(e){e.save&&(e.content=Ak.encode(e.content))}),n.add_form_submit_trigger&&t.on("submit",function(){t.initialized&&t.save()}),n.add_unload_trigger&&(t._beforeUnload=function(){!t.initialized||t.destroyed||t.isHidden()||t.save({format:"raw",no_events:!0,set_dirty:!1})},t.editorManager.on("BeforeUnload",t._beforeUnload)),t.editorManager.add(t),Mk(t,t.suffix)):Ak.bind(J.window,"ready",o)},Lk=function(e,t,n){var r=e.sidebars||[];r.push({name:t,settings:n}),e.sidebars=r},Fk=ne.each,Hk=ne.trim,zk="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),Uk={ftp:21,http:80,https:443,mailto:25},(Wk=function(n,e){var t,r,o,i=this;n=Hk(n),t=(e=i.settings=e||{}).base_uri,/^([\w\-]+):([^\/]{2})/i.test(n)||/^\s*#/.test(n)?i.source=n:(o=0===n.indexOf("//"),0!==n.indexOf("/")||o||(n=(t&&t.protocol||"http")+"://mce_host"+n),/^[\w\-]*:?\/\//.test(n)||(r=e.base_uri?e.base_uri.path:new Wk(J.document.location.href).directory,n=""==e.base_uri.protocol?"//mce_host"+i.toAbsPath(r,n):(n=/([^#?]*)([#?]?.*)/.exec(n),(t&&t.protocol||"http")+"://mce_host"+i.toAbsPath(r,n[1])+n[2])),n=n.replace(/@@/g,"(mce_at)"),n=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(n),Fk(zk,function(e,t){t=(t=n[t])&&t.replace(/\(mce_at\)/g,"@@");i[e]=t}),t&&(i.protocol||(i.protocol=t.protocol),i.userInfo||(i.userInfo=t.userInfo),i.port||"mce_host"!==i.host||(i.port=t.port),i.host&&"mce_host"!==i.host||(i.host=t.host),i.source=""),o&&(i.protocol=""))}).prototype={setPath:function(e){e=/^(.*?)\/?(\w+)?$/.exec(e),this.path=e[0],this.directory=e[1],this.file=e[2],this.source="",this.getURI()},toRelative:function(e){var t,n;return"./"===e?e:"mce_host"!==(e=new Wk(e,{base_uri:this})).host&&this.host!==e.host&&e.host||this.port!==e.port||this.protocol!==e.protocol&&""!==e.protocol?e.getURI():(t=this.getURI())===(n=e.getURI())||"/"===t.charAt(t.length-1)&&t.substr(0,t.length-1)===n?t:(n=this.toRelPath(this.path,e.path),e.query&&(n+="?"+e.query),e.anchor&&(n+="#"+e.anchor),n)},toAbsolute:function(e,t){return(e=new Wk(e,{base_uri:this})).getURI(t&&this.isSameOrigin(e))},isSameOrigin:function(e){if(this.host==e.host&&this.protocol==e.protocol){if(this.port==e.port)return!0;var t=Uk[this.protocol];if(t&&(this.port||t)==(e.port||t))return!0}return!1},toRelPath:function(e,t){var n,r,o,i=0,a="";if(e=(e=e.substring(0,e.lastIndexOf("/"))).split("/"),n=t.split("/"),e.length>=n.length)for(r=0,o=e.length;r<o;r++)if(r>=n.length||e[r]!==n[r]){i=r+1;break}if(e.length<n.length)for(r=0,o=n.length;r<o;r++)if(r>=e.length||e[r]!==n[r]){i=r+1;break}if(1===i)return t;for(r=0,o=e.length-(i-1);r<o;r++)a+="../";for(r=i-1,o=n.length;r<o;r++)a+=r!==i-1?"/"+n[r]:n[r];return a},toAbsPath:function(e,t){var n,r=0,o=[],i=/\/$/.test(t)?"/":"";for(e=e.split("/"),t=t.split("/"),Fk(e,function(e){e&&o.push(e)}),e=o,n=t.length-1,o=[];0<=n;n--)0!==t[n].length&&"."!==t[n]&&(".."===t[n]?r++:0<r?r--:o.push(t[n]));return 0!==(e=(n=e.length-r)<=0?o.reverse().join("/"):e.slice(0,n).join("/")+"/"+o.reverse().join("/")).indexOf("/")&&(e="/"+e),i&&e.lastIndexOf("/")!==e.length-1&&(e+=i),e},getURI:function(e){var t,n=this;return n.source&&!e||(t="",e||(n.protocol?t+=n.protocol+"://":t+="//",n.userInfo&&(t+=n.userInfo+"@"),n.host&&(t+=n.host),n.port&&(t+=":"+n.port)),n.path&&(t+=n.path),n.query&&(t+="?"+n.query),n.anchor&&(t+="#"+n.anchor),n.source=t),n.source}},Wk.parseDataUri=function(e){var t,n;return e=decodeURIComponent(e).split(","),{type:t=(n=/data:([^;]+)/.exec(e[0]))?n[1]:t,data:e[1]}},Wk.getDocumentBaseUrl=function(e){e=0!==e.protocol.indexOf("http")&&"file:"!==e.protocol?e.href:e.protocol+"//"+e.host+e.pathname;return/^[^:]+:\/\/\/?[^\/]+\//.test(e)&&(e=e.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(e)||(e+="/")),e},Vk=function(e,t){e=A.getForcedRootBlock(e),e=new RegExp("^(<"+e+"[^>]*>(&nbsp;|&#160;|\\s||<br \\/>|)<\\/"+e+">[\r\n]*|<br \\/>[\r\n]*)$");return t.replace(e,"")},qk=function(e,t,n){var r;if(t.format=t.format||jk,t.get=!0,t.getInner=!0,t.no_events||e.fire("BeforeGetContent",t),"raw"===t.format)r=ne.trim(i0.trimExternal(e.serializer,n.innerHTML));else if("text"===t.format)r=l.trim(n.innerText||n.textContent);else{if("tree"===t.format)return e.serializer.serialize(n,t);r=Vk(e,e.serializer.serialize(n,t))}return"text"===t.format||_o(U.fromDom(n))?t.content=r:t.content=ne.trim(r),t.no_events||e.fire("GetContent",t),t.content},$k=function(t,n){return void 0===n&&(n={}),b.from(t.getBody()).fold(Z("tree"===n.format?new Lx("body",11):""),function(e){return qk(t,n,e)})},Yk=function(e,t){t(e),e.firstChild&&Yk(e.firstChild,t),e.next&&Yk(e.next,t)},Xk=function(e,n,t){var r,o={},i={},a=[];for(r in t.firstChild&&Yk(t.firstChild,function(t){R(e,function(e){e.name===t.name&&(o[e.name]?o[e.name].nodes.push(t):o[e.name]={filter:e,nodes:[t]})}),R(n,function(e){"string"==typeof t.attr(e.name)&&(i[e.name]?i[e.name].nodes.push(t):i[e.name]={filter:e,nodes:[t]})})}),o)o.hasOwnProperty(r)&&a.push(o[r]);for(r in i)i.hasOwnProperty(r)&&a.push(i[r]);return a},Kk=function(e,t,n){e=Xk(e,t,n);R(e,function(t){R(t.filter.callbacks,function(e){e(t.nodes,t.filter.name,{})})})},jk="html",Gk=function(e){return e instanceof Lx},Jk=function(n){rb.hasFocus(n)&&c.firstPositionIn(n.getBody()).each(function(e){var t=e.getNode(),t=oe.isTable(t)?c.firstPositionIn(t).getOr(e):e;n.selection.setRng(t.toRange())})},Zk=function(e,t){e.dom.setHTML(e.getBody(),t),Jk(e)},Qk=function(e,t,n,r){var o,i;return 0===n.length||/^\s+$/.test(n)?(i='<br data-mce-bogus="1">',"TABLE"===t.nodeName?n="<tr><td>"+i+"</td></tr>":/^(UL|OL)$/.test(t.nodeName)&&(n="<li>"+i+"</li>"),n=(o=A.getForcedRootBlock(e))&&e.schema.isValidChild(t.nodeName.toLowerCase(),o.toLowerCase())?e.dom.createHTML(o,e.settings.forced_root_block_attrs,n=i):n||'<br data-mce-bogus="1">',Zk(e,n),e.fire("SetContent",r)):("raw"!==r.format&&(n=WN({validate:e.validate},e.schema).serialize(e.parser.parse(n,{isRootContent:!0,insert:!0}))),r.content=_o(U.fromDom(t))?n:ne.trim(n),Zk(e,r.content),r.no_events||e.fire("SetContent",r)),r.content},eT=function(e,t,n,r){Kk(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),n);var o=WN({validate:e.validate},e.schema).serialize(n);return r.content=_o(U.fromDom(t))?o:ne.trim(o),Zk(e,r.content),r.no_events||e.fire("SetContent",r),n},tT=function(t,n,r){return(r=void 0===r?{}:r).format=r.format||"html",r.set=!0,r.content=Gk(n)?"":n,Gk(n)||r.no_events||(t.fire("BeforeSetContent",r),n=r.content),b.from(t.getBody()).fold(Z(n),function(e){return(Gk(n)?eT:Qk)(t,e,n,r)})},nT=s.DOM,rT=function(e){nT.setStyle(e.id,"display",e.orgDisplay)},oT=function(e){return b.from(e).each(function(e){return e.destroy()})},iT=function(e){e.contentAreaContainer=e.formElement=e.container=e.editorContainer=null,e.bodyElement=e.contentDocument=e.contentWindow=null,e.iframeElement=e.targetElm=null,e.selection&&(e.selection=e.selection.win=e.selection.dom=e.selection.dom.doc=null)},aT=function(e){var t=e.formElement;t&&(t._mceOldSubmit&&(t.submit=t._mceOldSubmit,t._mceOldSubmit=null),nT.unbind(t,"submit reset",e.formEventDelegate))},uT=function(e){var t,n,r,o;e.removed||(t=e._selectionOverrides,n=e.editorUpload,r=e.getBody(),o=e.getElement(),r&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&o&&nT.remove(o.nextSibling),Tv.fireRemove(e),e.editorManager.remove(e),!e.inline&&r&&rT(e),Tv.fireDetach(e),nT.remove(e.getContainer()),oT(t),oT(n),e.destroy())},sT=function(e,t){var n=e.selection,r=e.dom;e.destroyed||(t||e.removed?(t||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),oT(n),oT(r)),aT(e),iT(e),e.destroyed=!0):e.remove())},cT=s.DOM,lT=ne.extend,fT=ne.each,dT=ne.resolve,mT=ee.ie,lT((gT=function(e,t,n){var r=this,o=r.documentBaseUrl=n.documentBaseURL,i=n.baseURI;t=_f(r,e,o,n.defaultSettings,t),r.settings=t,FN.language=t.language||"en",FN.languageLoad=t.language_load,FN.baseURL=n.baseURL,r.id=e,r.setDirty(!1),r.plugins={},r.documentBaseURI=new Wk(t.document_base_url,{base_uri:i}),r.baseURI=i,r.contentCSS=[],r.contentStyles=[],r.shortcuts=new VN(r),r.loadedCSS={},r.editorCommands=new jN(r),r.suffix=n.suffix,r.editorManager=n,r.inline=t.inline,r.buttons={},r.menuItems={},t.cache_suffix&&(ee.cacheSuffix=t.cache_suffix.replace(/^[\?\&]+/,"")),!1===t.override_viewport&&(ee.overrideViewPort=!1),n.fire("SetupEditor",{editor:r}),r.execCallback("setup",r),r.$=re.overrideDefaults(function(){return{context:r.inline?r.getBody():r.getDoc(),element:r.getBody()}})}).prototype={render:function(){Ik(this)},focus:function(e){rb.focus(this,e)},hasFocus:function(){return rb.hasFocus(this)},execCallback:function(e){for(var t,n,r=1;r<arguments.length;r++)r-1,0;if(t=this.settings[e])return this.callbackLookup&&(n=this.callbackLookup[e])&&(t=n.func,n=n.scope),"string"==typeof t&&(n=(n=t.replace(/\.\w+$/,""))?dT(n):0,t=dT(t),this.callbackLookup=this.callbackLookup||{},this.callbackLookup[e]={func:t,scope:n}),t.apply(n||this,Array.prototype.slice.call(arguments,1))},translate:function(e){var n,r;return e&&ne.is(e,"string")&&(n=this.settings.language||"en",e=(r=this.editorManager.i18n).data[n+"."+e]||e.replace(/\{\#([^\}]+)\}/g,function(e,t){return r.data[n+"."+t]||"{#"+t+"}"})),this.editorManager.translate(e)},getLang:function(e,t){return this.editorManager.i18n.data[(this.settings.language||"en")+"."+e]||(void 0!==t?t:"{#"+e+"}")},getParam:function(e,t,n){return Bf(this,e,t,n)},nodeChanged:function(e){this._nodeChangeDispatcher.nodeChanged(e)},addButton:function(e,t){var n=this;t.cmd&&(t.onclick=function(){n.execCommand(t.cmd)}),t.stateSelector&&void 0===t.active&&(t.active=!1),t.text||t.icon||(t.icon=e),t.tooltip=t.tooltip||t.title,n.buttons[e]=t},addSidebar:function(e,t){return Lk(this,e,t)},addMenuItem:function(e,t){var n=this;t.cmd&&(t.onclick=function(){n.execCommand(t.cmd)}),n.menuItems[e]=t},addContextToolbar:function(e,t){var n,r=this;r.contextToolbars=r.contextToolbars||[],"string"==typeof e&&(n=e,e=function(e){return r.dom.is(e,n)}),r.contextToolbars.push({id:Ib.uuid("mcet"),predicate:e,items:t})},addCommand:function(e,t,n){this.editorCommands.addCommand(e,t,n)},addQueryStateHandler:function(e,t,n){this.editorCommands.addQueryStateHandler(e,t,n)},addQueryValueHandler:function(e,t,n){this.editorCommands.addQueryValueHandler(e,t,n)},addShortcut:function(e,t,n,r){this.shortcuts.add(e,t,n,r)},execCommand:function(e,t,n,r){return this.editorCommands.execCommand(e,t,n,r)},queryCommandState:function(e){return this.editorCommands.queryCommandState(e)},queryCommandValue:function(e){return this.editorCommands.queryCommandValue(e)},queryCommandSupported:function(e){return this.editorCommands.queryCommandSupported(e)},show:function(){this.hidden&&(this.hidden=!1,this.inline?this.getBody().contentEditable=!0:(cT.show(this.getContainer()),cT.hide(this.id)),this.load(),this.fire("show"))},hide:function(){var e=this,t=e.getDoc();e.hidden||(mT&&t&&!e.inline&&t.execCommand("SelectAll"),e.save(),e.inline?(e.getBody().contentEditable=!1,e===e.editorManager.focusedEditor&&(e.editorManager.focusedEditor=null)):(cT.hide(e.getContainer()),cT.setStyle(e.id,"display",e.orgDisplay)),e.hidden=!0,e.fire("hide"))},isHidden:function(){return!!this.hidden},setProgressState:function(e,t){this.fire("ProgressState",{state:e,time:t})},load:function(e){var t,n=this.getElement();return this.removed?"":n?((e=e||{}).load=!0,t=this.setContent(void 0!==n.value?n.value:n.innerHTML,e),e.element=n,e.no_events||this.fire("LoadContent",e),e.element=null,t):void 0},save:function(e){var t,n,r=this,o=r.getElement();if(o&&r.initialized&&!r.removed)return(e=e||{}).save=!0,e.element=o,e.content=r.getContent(e),e.no_events||r.fire("SaveContent",e),"raw"===e.format&&r.fire("RawSaveContent",e),t=e.content,/TEXTAREA|INPUT/i.test(o.nodeName)?o.value=t:(!e.is_removing&&r.inline||(o.innerHTML=t),(n=cT.getParent(r.id,"form"))&&fT(n.elements,function(e){if(e.name===r.id)return e.value=t,!1})),e.element=o=null,!1!==e.set_dirty&&r.setDirty(!1),t},setContent:function(e,t){return tT(this,e,t)},getContent:function(e){return $k(this,e)},insertContent:function(e,t){t&&(e=lT({content:e},t)),this.execCommand("mceInsertContent",!1,e)},isDirty:function(){return!this.isNotDirty},setDirty:function(e){var t=!this.isNotDirty;this.isNotDirty=!e,e&&e!==t&&this.fire("dirty")},setMode:function(e){_v(this,e)},getContainer:function(){return this.container||(this.container=cT.get(this.editorContainer||this.id+"_parent")),this.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return this.targetElm||(this.targetElm=cT.get(this.id)),this.targetElm},getWin:function(){var e;return this.contentWindow||(e=this.iframeElement)&&(this.contentWindow=e.contentWindow),this.contentWindow},getDoc:function(){var e;return this.contentDocument||(e=this.getWin())&&(this.contentDocument=e.document),this.contentDocument},getBody:function(){var e=this.getDoc();return this.bodyElement||(e?e.body:null)},convertURL:function(e,t,n){var r=this.settings;if(r.urlconverter_callback)return this.execCallback("urlconverter_callback",e,n,!0,t);if(r.convert_urls&&(!n||"LINK"!==n.nodeName)&&0!==e.indexOf("file:")&&0!==e.length){if(r.relative_urls)return this.documentBaseURI.toRelative(e);e=this.documentBaseURI.toAbsolute(e,r.remove_script_host)}return e},addVisual:function(e){var n,r=this,o=r.settings,i=r.dom;e=e||r.getBody(),void 0===r.hasVisual&&(r.hasVisual=o.visual),fT(i.select("table,a",e),function(e){var t;switch(e.nodeName){case"TABLE":return n=o.visual_table_class||"mce-item-table",void((t=i.getAttrib(e,"border"))&&"0"!==t||!r.hasVisual?i.removeClass(e,n):i.addClass(e,n));case"A":return void(i.getAttrib(e,"href")||(t=i.getAttrib(e,"name")||e.id,n=o.visual_anchor_class||"mce-item-anchor",t&&r.hasVisual?i.addClass(e,n):i.removeClass(e,n)))}}),r.fire("VisualAid",{element:e,hasVisual:r.hasVisual})},remove:function(){uT(this)},destroy:function(e){sT(this,e)},uploadImages:function(e){return this.editorUpload.uploadImages(e)},_scanForImages:function(){return this.editorUpload.scanForImages()}},Fv),hT={isEditorUIElement:function(e){return-1!==e.className.toString().indexOf("mce-")}},pT=function(e){return"nodechange"===e.type&&e.selectionChange},vT=function(e,t){function n(){t.throttle()}s.DOM.bind(J.document,"mouseup",n),e.on("remove",function(){s.DOM.unbind(J.document,"mouseup",n)})},bT=function(e){e.on("focusout",function(){fv.store(e)})},yT=function(e,t){e.on("mouseup touchend",function(e){t.throttle()})},xT=function(t,e){ur.detect().browser.isIE()?bT(t):yT(t,e),t.on("keyup nodechange",function(e){pT(e)||fv.store(t)})},wT={register:function(e){var t=Di(function(){fv.store(e)},0);e.inline&&vT(e,t),e.on("init",function(){xT(e,t)}),e.on("remove",function(){t.cancel()})}},ST=s.DOM,NT=function(){try{return J.document.activeElement}catch(e){return J.document.body}},ET=function(n,e){e=e.editor;wT.register(e),e.on("focusin",function(){var e=n.focusedEditor;e!==this&&(e&&e.fire("blur",{focusedEditor:this}),n.setActive(this),(n.focusedEditor=this).fire("focus",{blurredEditor:e}),this.focus(!0))}),e.on("focusout",function(){var t=this;Fe.setEditorTimeout(t,function(){var e=n.focusedEditor;TT(t,NT())||e!==t||(t.fire("blur",{focusedEditor:null}),n.focusedEditor=null)})}),CT||(CT=function(e){var t=n.activeEditor,e=e.target;t&&e.ownerDocument===J.document&&e!==J.document.body&&!TT(t,e)&&n.focusedEditor===t&&(t.fire("blur",{focusedEditor:null}),n.focusedEditor=null)},ST.bind(J.document,"focusin",CT))},_T=function(e){e.on("AddEditor",v(ET,e)),e.on("RemoveEditor",v(RT,e))},kT=function(e){return hT.isEditorUIElement(e)},TT=function(t,e){var n=t?t.settings.custom_ui_selector:"";return null!==ST.getParent(e,function(e){return kT(e)||!!n&&t.dom.is(e,n)})},AT=s.DOM,DT=ne.explode,PT=ne.each,OT=ne.extend,BT=0,LT=!(RT=function(e,t){e.focusedEditor===t.editor&&(e.focusedEditor=null),e.activeEditor||(ST.unbind(J.document,"focusin",CT),CT=null)}),HT=[],zT=function(e){return"length"!==e},UT=function(t){var n=t.type;PT(IT.get(),function(e){switch(n){case"scroll":e.fire("ScrollWindow",t);break;case"resize":e.fire("ResizeWindow",t)}})},WT=function(e){e!==LT&&(e?re(window).on("resize scroll",UT):re(window).off("resize scroll",UT),LT=e)},jT=function(t){var e,n=HT;for(delete FT[t.id],e=0;e<FT.length;e++)if(FT[e]===t){FT.splice(e,1);break}return HT=_(HT,function(e){return t!==e}),IT.activeEditor===t&&(IT.activeEditor=0<HT.length?HT[0]:null),IT.focusedEditor===t&&(IT.focusedEditor=null),n.length!==HT.length},VT=function(e){return e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(jT(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0,e=null),e},OT(IT={defaultSettings:{},$:re,majorVersion:"4",minorVersion:"9.4",releaseDate:"2019-03-20",editors:FT=[],i18n:hb,activeEditor:null,settings:{},setup:function(){var e,t,n,r,o,i,a="",u=Wk.getDocumentBaseUrl(J.document.location);if(/^[^:]+:\/\/\/?[^\/]+\//.test(u)&&(u=u.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(u)||(u+="/")),t=window.tinymce||window.tinyMCEPreInit)e=t.base||t.baseURL,a=t.suffix||".min";else{for(r=J.document.getElementsByTagName("script"),o=0;o<r.length;o++)if(i=(n=r[o].src).substring(n.lastIndexOf("/")),/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(n)){-1!==i.indexOf(".min")&&(a=".min"),e=n.substring(0,n.lastIndexOf("/"));break}!e&&J.document.currentScript&&(-1!==(n=J.document.currentScript.src).indexOf(".min")&&(a=".min"),e=n.substring(0,n.lastIndexOf("/")))}this.baseURL=new Wk(u).toAbsolute(e),this.documentBaseURL=u,this.baseURI=new Wk(this.baseURL),this.suffix=a,_T(this)},overrideDefaults:function(e){var t,n,r=e.base_url;for(n in r&&(this.baseURL=new Wk(this.documentBaseURL).toAbsolute(r.replace(/\/+$/,"")),this.baseURI=new Wk(this.baseURL)),r=e.suffix,e.suffix&&(this.suffix=r),t=(this.defaultSettings=e).plugin_base_urls)FN.PluginManager.urls[n]=t[n]},init:function(a){var n,u=this,r=ne.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option tbody tfoot thead tr script noscript style textarea video audio iframe object menu"," "),t=function(e,t){return e.inline&&t.tagName.toLowerCase()in r},s=function(e){var t=e.id;return t||(t=(t=e.name)&&!AT.get(t)?e.name:AT.uniqueId(),e.setAttribute("id",t)),t},e=function(e){e=a[e];if(e)return e.apply(u,Array.prototype.slice.call(arguments,2))},o=function(e,t){return t.constructor===RegExp?t.test(e.className):AT.hasClass(e,t)},c=function(t){var e,n=[];if(ee.ie&&ee.ie<11)return Cb.initError("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tinymce.com/docs/get-started/system-requirements/"),[];if(t.types)PT(t.types,function(e){n=n.concat(AT.select(e.selector))});else{if(t.selector)return AT.select(t.selector);if(t.target)return[t.target];switch(t.mode){case"exact":0<(e=t.elements||"").length&&PT(DT(e),function(t){var e;(e=AT.get(t))?n.push(e):PT(J.document.forms,function(e){PT(e.elements,function(e){e.name===t&&(t="mce_editor_"+BT++,AT.setAttrib(e,"id",t),n.push(e))})})});break;case"textareas":case"specific_textareas":PT(AT.select("textarea"),function(e){t.editor_deselector&&o(e,t.editor_deselector)||t.editor_selector&&!o(e,t.editor_selector)||n.push(e)})}}return n},l=function(e){n=e},f=function(){var r,o=0,i=[],n=function(e,t,n){e=new gT(e,t,u);i.push(e),e.on("init",function(){++o===r.length&&l(i)}),e.targetElm=e.targetElm||n,e.render()};AT.unbind(window,"ready",f),e("onpageload"),r=re.unique(c(a)),a.types?PT(a.types,function(t){ne.each(r,function(e){return!AT.is(e,t.selector)||(n(s(e),OT({},a,t),e),!1)})}):(ne.each(r,function(e){VT(u.get(e.id))}),0===(r=ne.grep(r,function(e){return!u.get(e.id)})).length?l([]):PT(r,function(e){t(a,e)?Cb.initError("Could not initialize inline editor on invalid inline target element",e):n(s(e),a,e)}))};return u.settings=a,AT.bind(window,"ready",f),new Oe(function(t){n?t(n):l=function(e){t(e)}})},get:function(t){return 0===arguments.length?HT.slice(0):L(t)?fe(HT,function(e){return e.id===t}).getOr(null):q(t)&&HT[t]||null},add:function(e){var t=this;return FT[e.id]===e||(null===t.get(e.id)&&(zT(e.id)&&(FT[e.id]=e),FT.push(e),HT.push(e)),WT(!0),t.activeEditor=e,t.fire("AddEditor",{editor:e}),MT)||(MT=function(){t.fire("BeforeUnload")},AT.bind(window,"beforeunload",MT)),e},createEditor:function(e,t){return this.add(new gT(e,t,this))},remove:function(e){var t,n,r=this;if(e){if(!L(e))return n=e,z(r.get(n.id))?null:(jT(n)&&r.fire("RemoveEditor",{editor:n}),0===HT.length&&AT.unbind(window,"beforeunload",MT),n.remove(),WT(0<HT.length),n);PT(AT.select(e),function(e){(n=r.get(e.id))&&r.remove(n)})}else for(t=HT.length-1;0<=t;t--)r.remove(HT[t])},execCommand:function(e,t,n){var r=this.get(n);switch(e){case"mceAddEditor":return this.get(n)||new gT(n,this.settings,this).render(),!0;case"mceRemoveEditor":return r&&r.remove(),!0;case"mceToggleEditor":return r?r.isHidden()?r.show():r.hide():this.execCommand("mceAddEditor",0,n),!0}return!!this.activeEditor&&this.activeEditor.execCommand(e,t,n)},triggerSave:function(){PT(HT,function(e){e.save()})},addI18n:function(e,t){hb.add(e,t)},translate:function(e){return hb.translate(e)},setActive:function(e){var t=this.activeEditor;this.activeEditor!==e&&(t&&t.fire("deactivate",{relatedTarget:e}),e.fire("activate",{relatedTarget:t})),this.activeEditor=e}},kv),IT.setup(),d=IT,(p=oE=oE||{}).compareRanges=Np.isEq,p.getCaretRangeFromPoint=hw.fromPoint,p.getSelectedNode=iu,p.getNode=au,qT=oE,$T=Math.min,YT=Math.max,XT=Math.round,r={inflate:function(e,t,n){return GT(e.x-t,e.y-n,e.w+2*t,e.h+2*n)},relativePosition:KT=function(e,t,n){var r=t.x,o=t.y,i=e.w,e=e.h,a=t.w,t=t.h;return"b"===(n=(n||"").split(""))[0]&&(o+=t),"r"===n[1]&&(r+=a),"c"===n[0]&&(o+=XT(t/2)),"c"===n[1]&&(r+=XT(a/2)),"b"===n[3]&&(o-=e),"r"===n[4]&&(r-=i),"c"===n[3]&&(o-=XT(e/2)),"c"===n[4]&&(r-=XT(i/2)),GT(r,o,i,e)},findBestRelativePosition:function(e,t,n,r){for(var o,i=0;i<r.length;i++)if((o=KT(e,t,r[i])).x>=n.x&&o.x+o.w<=n.w+n.x&&o.y>=n.y&&o.y+o.h<=n.h+n.y)return r[i];return null},intersect:function(e,t){var n=YT(e.x,t.x),r=YT(e.y,t.y),o=$T(e.x+e.w,t.x+t.w),e=$T(e.y+e.h,t.y+t.h);return o-n<0||e-r<0?null:GT(n,r,o-n,e-r)},clamp:function(e,t,n){var r=e.x,o=e.y,i=e.x+e.w,e=e.y+e.h,a=t.x+t.w,u=t.y+t.h,s=YT(0,t.x-r),t=YT(0,t.y-o),a=YT(0,i-a),u=YT(0,e-u);return r+=s,o+=t,n&&(i+=s,e+=t,r-=a,o-=u),GT(r,o,(i-=a)-r,(e-=u)-o)},create:GT=function(e,t,n,r){return{x:e,y:t,w:n,h:r}},fromClientRect:function(e){return GT(e.left,e.top,e.width,e.height)}},JT={},h={add:function(e,t){JT[e.toLowerCase()]=t},has:function(e){return!!JT[e.toLowerCase()]},get:function(e){var t=e.toLowerCase(),t=JT.hasOwnProperty(t)?JT[t]:null;if(null===t)throw new Error("Could not find module for type: "+e);return t},create:function(e,t){var n;if("string"==typeof e?(t=t||{}).type=e:e=(t=e).type,e=e.toLowerCase(),n=JT[e])return(n=new n(t)).type=e,n;throw new Error("Could not find control by type: "+e)}},ZT=ne.each,QT=ne.extend,(u=function(){}).extend=eN=function(n){var e,t,r,o=this.prototype,i=function(){var e,t,n;if(!tN&&(this.init&&this.init.apply(this,arguments),t=this.Mixins))for(e=t.length;e--;)(n=t[e]).init&&n.init.apply(this,arguments)},a=function(){return this},u=function(n,r){return function(){var e,t=this._super;return this._super=o[n],e=r.apply(this,arguments),this._super=t,e}};for(t in tN=!0,e=new this,tN=!1,n.Mixins&&(ZT(n.Mixins,function(e){for(var t in e)"init"!==t&&(n[t]=e[t])}),o.Mixins)&&(n.Mixins=o.Mixins.concat(n.Mixins)),n.Methods&&ZT(n.Methods.split(","),function(e){n[e]=a}),n.Properties&&ZT(n.Properties.split(","),function(e){var t="_"+e;n[e]=function(e){return void 0!==e?(this[t]=e,this):this[t]}}),n.Statics&&ZT(n.Statics,function(e,t){i[t]=e}),n.Defaults&&o.Defaults&&(n.Defaults=QT({},o.Defaults,n.Defaults)),n)"function"==typeof(r=n[t])&&o[t]?e[t]=u(t,r):e[t]=r;return i.prototype=e,(i.constructor=i).extend=eN,i},nN=Math.min,rN=Math.max,oN=Math.round,iN=function(e){var n={},i=0,a=0,u=0,t=function(e,t,n){var r,o,i,a=0;return(r=nN(e/=255,nN(t/=255,n/=255)))===(o=rN(e,rN(t,n)))?{h:0,s:0,v:100*(a=r)}:(i=(o-r)/o,{h:oN(60*((e===r?3:n===r?1:5)-(e===r?t-n:n===r?e-t:n-e)/((a=o)-r))),s:oN(100*i),v:oN(100*a)})},r=function(e,t,n){var r,o;if(e=(parseInt(e,10)||0)%360,t=parseInt(t,10)/100,n=parseInt(n,10)/100,t=rN(0,nN(t,1)),n=rN(0,nN(n,1)),0===t)i=a=u=oN(255*n);else{switch(e=e/60,o=(r=n*t)*(1-Math.abs(e%2-1)),t=n-r,Math.floor(e)){case 0:i=r,a=o,u=0;break;case 1:i=o,a=r,u=0;break;case 2:i=0,a=r,u=o;break;case 3:i=0,a=o,u=r;break;case 4:i=o,a=0,u=r;break;case 5:i=r,a=0,u=o;break;default:i=a=u=0}i=oN(255*(i+t)),a=oN(255*(a+t)),u=oN(255*(u+t))}},o=function(){function e(e){return 1<(e=parseInt(e,10).toString(16)).length?e:"0"+e}return"#"+e(i)+e(a)+e(u)},s=function(){return{r:i,g:a,b:u}},c=function(){return t(i,a,u)},l=function(e){var t;return"object"==typeof e?"r"in e?(i=e.r,a=e.g,u=e.b):"v"in e&&r(e.h,e.s,e.v):(t=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)[^\)]*\)/gi.exec(e))?(i=parseInt(t[1],10),a=parseInt(t[2],10),u=parseInt(t[3],10)):(t=/#([0-F]{2})([0-F]{2})([0-F]{2})/gi.exec(e))?(i=parseInt(t[1],16),a=parseInt(t[2],16),u=parseInt(t[3],16)):(t=/#([0-F])([0-F])([0-F])/gi.exec(e))&&(i=parseInt(t[1]+t[1],16),a=parseInt(t[2]+t[2],16),u=parseInt(t[3]+t[3],16)),i=i<0?0:255<i?255:i,a=a<0?0:255<a?255:a,u=u<0?0:255<u?255:u,n};return e&&l(e),n.toRgb=s,n.toHsv=c,n.toHex=o,n.parse=l,n},uN={serialize:aN=function(e,n){var r,o,t,i;if(n=n||'"',null===e)return"null";if("string"==(t=typeof e))return o="\bb\tt\nn\ff\rr\"\"''\\\\",n+e.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(e,t){return'"'===n&&"'"===e?e:(r=o.indexOf(t))+1?"\\"+o.charAt(r+1):(e=t.charCodeAt().toString(16),"\\u"+"0000".substring(e.length)+e)})+n;if("object"!=t)return""+e;if(e.hasOwnProperty&&"[object Array]"===Object.prototype.toString.call(e)){for(r=0,o="[";r<e.length;r++)o+=(0<r?",":"")+aN(e[r],n);return o+"]"}for(i in o="{",e)e.hasOwnProperty(i)&&(o+="function"!=typeof e[i]?(1<o.length?","+n:n)+i+n+":"+aN(e[i],n):"");return o+"}"},parse:function(e){try{return JSON.parse(e)}catch(e){}}},t={callbacks:{},count:0,send:function(t){var n=this,r=s.DOM,o=(void 0!==t.count?t:n).count,i="tinymce_jsonp_"+o;n.callbacks[o]=function(e){r.remove(i),delete n.callbacks[o],t.callback(e)},r.add(r.doc.body,"script",{id:i,src:t.url,type:"text/javascript"}),n.count++}},sN={send:function(e){var t,n=0,r=function(){!e.async||4===t.readyState||1e4<n++?(e.success&&n<1e4&&200===t.status?e.success.call(e.success_scope,""+t.responseText,t,e):e.error&&e.error.call(e.error_scope,1e4<n?"TIMED_OUT":"GENERAL",t,e),t=null):setTimeout(r,10)};if(e.scope=e.scope||this,e.success_scope=e.success_scope||e.scope,e.error_scope=e.error_scope||e.scope,e.async=!1!==e.async,e.data=e.data||"",sN.fire("beforeInitialize",{settings:e}),t=YN()){if(t.overrideMimeType&&t.overrideMimeType(e.content_type),t.open(e.type||(e.data?"POST":"GET"),e.url,e.async),e.crossDomain&&(t.withCredentials=!0),e.content_type&&t.setRequestHeader("Content-Type",e.content_type),e.requestheaders&&ne.each(e.requestheaders,function(e){t.setRequestHeader(e.key,e.value)}),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),(t=sN.fire("beforeSend",{xhr:t,settings:e}).xhr).send(e.data),!e.async)return r();setTimeout(r,10)}}},ne.extend(sN,kv),cN=ne.extend,(lN=function(e){this.settings=cN({},e),this.count=0}).sendRPC=function(e){return(new lN).send(e)},lN.prototype={send:function(n){var r=n.error,o=n.success;(n=cN(this.settings,n)).success=function(e,t){(e=void 0===(e=uN.parse(e))?{error:"JSON Parse error."}:e).error?r.call(n.error_scope||n.scope,e.error,t):o.call(n.success_scope||n.scope,e.result)},n.error=function(e,t){r&&r.call(n.error_scope||n.scope,e,t)},n.data=uN.serialize({id:n.id||"c"+this.count++,method:n.method,params:n.params}),n.content_type="application/json",sN.send(n)}},pN=function(){return n={},r=[],e={getItem:function(e){e=n[e];return e||null},setItem:function(e,t){r.push(e),n[e]=String(t)},key:function(e){return r[e]},removeItem:function(t){r=r.filter(function(e){return e===t}),delete n[t]},clear:function(){r=[],n={}},length:0},Object.defineProperty(e,"length",{get:function(){return r.length},configurable:!1,enumerable:!1}),e;var n,r,e};try{fN=J.window.localStorage}catch(e){fN=pN()}dN=d,mN={geom:{Rect:r},util:{Promise:Oe,Delay:Fe,Tools:ne,VK:W,URI:Wk,Class:u,EventDispatcher:Cv,Observable:kv,I18n:hb,XHR:sN,JSON:uN,JSONRequest:lN,JSONP:t,LocalStorage:fN,Color:iN},dom:{EventUtils:Ke,Sizzle:te,DomQuery:re,TreeWalker:BN,DOMUtils:s,ScriptLoader:yi,RangeUtils:qT,Serializer:tE,ControlSelection:iw,BookmarkManager:tw,Selection:o1,Event:Ke.Event},html:{Styles:IN,Entities:Ko,Node:Lx,Schema:MN,SaxParser:r0,DomParser:eE,Writer:UN,Serializer:WN},ui:{Factory:h},Env:ee,AddOnManager:FN,Annotator:zN,Formatter:ZN,UndoManager:JN,EditorCommands:jN,WindowManager:$N,NotificationManager:qN,EditorObservable:Fv,Shortcuts:VN,Editor:gT,FocusManager:hT,EditorManager:d,DOM:s.DOM,ScriptLoader:yi.ScriptLoader,PluginManager:FN.PluginManager,ThemeManager:FN.ThemeManager,trim:ne.trim,isArray:ne.isArray,is:ne.is,toArray:ne.toArray,makeMap:ne.makeMap,each:ne.each,map:ne.map,grep:ne.grep,inArray:ne.inArray,extend:ne.extend,create:ne.create,walk:ne.walk,createNS:ne.createNS,resolve:ne.resolve,explode:ne.explode,_addCacheSuffix:ne._addCacheSuffix,isOpera:ee.opera,isWebKit:ee.webkit,isIE:ee.ie,isGecko:ee.gecko,isMac:ee.mac},xN=function(e){if("object"==typeof module)try{module.exports=e}catch(e){}},function(e){window.tinymce=e,window.tinyMCE=e}(i=dN=ne.extend(dN,mN)),xN(i)}(window),function(r){"use strict";var I,L,F,n,H,l,e,z,f,U,u,a,s,c,W,i,j,d,m,g,h,p,V,q,$,Y,X,v,b,K,G,J,Z,Q,ee,te,ne,re,oe,o,ie,ae,ue,se,ce,le,fe,de,me,ge,he,pe,ve,be,ye,xe,we,Ce,y,Se,ke,Te,x,w,Ne,Ee,Re,_e,Ae,De,Pe,Oe,Be,Me,Ie,Le,Fe,He,ze,Ue,We,je,Ve,C,qe,$e,Ye,Xe,Ke,Ge,Je,Ze,Qe,et,S,tt,nt,rt,ot,it,at,ut,k,st,ct,lt,ft,t,dt,T,mt,N,gt,ht,pt,vt,bt,yt,E,xt,wt,Ct,St,kt,R,Tt,Nt,Et,Rt,_t,At,Dt,Pt,Ot,Bt,Mt,It,Lt,Ft,Ht,zt,Ut,Wt,jt,Vt,_,qt,$t,Yt,Xt,Kt,Gt,Jt,Zt,Qt,en,tn,nn,rn,on,A,an,un,sn,cn,ln,fn,dn,mn,gn,D,hn,pn,vn,bn,yn,xn,wn,P,Cn,Sn,kn,O,Tn,Nn,En,Rn,_n,An,Dn,Pn,On,Bn,Mn,In,Ln,Fn,Hn,zn,Un,Wn,jn,Vn,qn,$n,Yn,Xn,Kn,Gn,Jn,Zn,Qn,er,tr,nr,rr,or,ir,ar,ur,sr,cr,lr,fr,dr,mr,gr,B,M;I=tinymce.util.Tools.resolve("tinymce.PluginManager"),L=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),F=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),n=tinymce.util.Tools.resolve("tinymce.util.VK"),H=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager"),l=tinymce.util.Tools.resolve("tinymce.util.Tools"),e=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),f={isTextNode:function(e){return e&&3===e.nodeType},isListNode:function(e){return e&&/^(OL|UL|DL)$/.test(e.nodeName)},isOlUlNode:function(e){return e&&/^(OL|UL)$/.test(e.nodeName)},isDlItemNode:function(e){return e&&/^(DT|DD)$/.test(e.nodeName)},isListItemNode:function(e){return e&&/^(LI|DT|DD)$/.test(e.nodeName)},isTableCellNode:function(e){return e&&/^(TH|TD)$/.test(e.nodeName)},isBr:z=function(e){return e&&"BR"===e.nodeName},isFirstChild:function(e){return e.parentNode.firstChild===e},isLastChild:function(e){return e.parentNode.lastChild===e},isTextBlock:function(e,t){return t&&!!e.schema.getTextBlockElements()[t.nodeName]},isBlock:function(e,t){return e&&e.nodeName in t},isBogusBr:function(e,t){return!!z(t)&&!(!e.isBlock(t.nextSibling)||z(t.previousSibling))},isEmpty:function(e,t,n){var r=e.isEmpty(t);return!(n&&0<e.select("span[data-mce-type=bookmark]",t).length)&&r},isChildOfBody:function(e,t){return e.isChildOf(t,e.getRoot())}},U=function(e,t){var n;return f.isTextNode(e)?{container:e,offset:t}:(n=L.getNode(e,t),f.isTextNode(n)?{container:n,offset:t>=e.childNodes.length?n.data.length:0}:n.previousSibling&&f.isTextNode(n.previousSibling)?{container:n.previousSibling,offset:n.previousSibling.data.length}:n.nextSibling&&f.isTextNode(n.nextSibling)?{container:n.nextSibling,offset:0}:{container:e,offset:t})},u=function(e){var t=e.cloneRange(),n=U(e.startContainer,e.startOffset);return t.setStart(n.container,n.offset),n=U(e.endContainer,e.endOffset),t.setEnd(n.container,n.offset),t},a=e.DOM,s={createBookmark:function(o){var i={},e=function(e){var t,n=o[e?"startContainer":"endContainer"],r=o[e?"startOffset":"endOffset"];1===n.nodeType&&(t=a.create("span",{"data-mce-type":"bookmark"}),n.hasChildNodes()?(r=Math.min(r,n.childNodes.length-1),e?n.insertBefore(t,n.childNodes[r]):a.insertAfter(t,n.childNodes[r])):n.appendChild(t),n=t,r=0),i[e?"startContainer":"endContainer"]=n,i[e?"startOffset":"endOffset"]=r};return e(!0),o.collapsed||e(),i},resolveBookmark:function(o){function e(e){var t,n=t=o[e?"startContainer":"endContainer"],r=o[e?"startOffset":"endOffset"];n&&(1===n.nodeType&&(r=function(e){for(var t=e.parentNode.firstChild,n=0;t;){if(t===e)return n;1===t.nodeType&&"bookmark"===t.getAttribute("data-mce-type")||n++,t=t.nextSibling}return-1}(n),n=n.parentNode,a.remove(t),!n.hasChildNodes())&&a.isBlock(n)&&n.appendChild(a.create("br")),o[e?"startContainer":"endContainer"]=n,o[e?"startOffset":"endOffset"]=r)}e(!0),e();var t=a.createRng();return t.setStart(o.startContainer,o.startOffset),o.endContainer&&t.setEnd(o.endContainer,o.endOffset),u(t)}},M=(c=function(e){return function(){return e}})(!(W=function(n){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return!n.apply(null,e)}})),B=c(!0),M={fold:function(e,t){return e()},is:i=M,isSome:i,isNone:j=B,getOr:M=function(e){return e},getOrThunk:B=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:function(){return null},getOrUndefined:function(){},or:M,orThunk:B,map:d=function(){return m},ap:d,each:function(){},bind:d,flatten:d,exists:i,forall:j,filter:d,equals:B=function(e){return e.isNone()},equals_:B,toArray:function(){return[]},toString:c("none()")},Object.freeze&&Object.freeze(M),m=M,h=g=function(n){var e=function(){return n},t=function(){return o},r=function(e){return e(n)},o={fold:function(e,t){return t(n)},is:function(e){return n===e},isSome:j,isNone:i,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:t,orThunk:t,map:function(e){return g(e(n))},ap:function(e){return e.fold(d,function(e){return g(e(n))})},each:function(e){e(n)},bind:r,flatten:e,exists:r,forall:r,filter:function(e){return e(n)?o:m},equals:function(e){return e.is(n)},equals_:function(e,t){return e.fold(i,function(e){return t(n,e)})},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return o},p=d,V=function(e){return null==e?m:g(e)},q=function(e){var t;return null===e?"null":"object"==(t=typeof e)&&Array.prototype.isPrototypeOf(e)?"array":"object"==t&&String.prototype.isPrototypeOf(e)?"string":t},$=(B=function(t){return function(e){return q(e)===t}})("string"),Y=B("boolean"),M=B("function"),X=B("number"),v=function(e,t){for(var n,r=e.length,o=new Array(r),i=0;i<r;i++)n=e[i],o[i]=t(n,i,e);return o},b=function(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n,e)},K=function(e,t){for(var n,r=[],o=0,i=e.length;o<i;o++)t(n=e[o],o,e)&&r.push(n);return r},G=function(e,t){var n,r,o,i,a,u,s;if(0===e.length)return[];for(n=t(e[0]),r=[],o=[],i=0,a=e.length;i<a;i++)(s=t(u=e[i]))!==n&&(r.push(o),o=[]),n=s,o.push(u);return 0!==o.length&&r.push(o),r},J=function(e,t,n){return b(e,function(e){n=t(n,e)}),n},Z=function(e,t){for(var n,r=0,o=e.length;r<o;r++)if(t(n=e[r],r,e))return h(n);return p()},Q=Array.prototype.push,ee=function(e){for(var t=[],n=0,r=e.length;n<r;++n){if(!Array.prototype.isPrototypeOf(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);Q.apply(t,e[n])}return t},te=function(e,t){e=v(e,t);return ee(e)},ne=Array.prototype.slice,re=function(e){e=ne.call(e,0);return e.reverse(),e},oe=function(e){return 0===e.length?p():h(e[0])},o=function(e){return 0===e.length?p():h(e[e.length-1])},M(Array.from)&&Array.from,ie=void 0!==r.window?r.window:Function("return this;")(),ae=function(e,t){for(var n=null!=t?t:ie,r=0;r<e.length&&null!=n;++r)n=n[e[r]];return n},ue=function(e,t){e=e.split(".");return ae(e,t)},se=function(e,t){return ue(e,t)},ce={getOrDie:function(e,t){t=se(e,t);if(null==t)throw e+" not available on this browser";return t}},le=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),de=function(e,t){return e&&1===t.length&&t[0]===e},me=function(e){return l.grep(e.querySelectorAll("ol,ul,dl"),function(e){return f.isListNode(e)})},ge=function(n,e){e=l.map(e,function(e){var t=n.dom.getParent(e,"li,dd,dt",pe(n,e));return t||e});return le.unique(e)},ve=function(e,t){e=e.dom.getParents(t,"ol,ul",pe(e,t));return o(e)},be=function(e){var t=ve(e,e.selection.getStart()),e=K(e.selection.getSelectedBlocks(),f.isOlUlNode);return t.toArray().concat(e)},ye=function(t,e){e=v(e,function(e){return ve(t,e).getOr(e)});return le.unique(e)},xe=fe=function(e){var t=e.selection.getStart(!0);return e.dom.getParent(t,"OL,UL,DL",pe(e,t))},we=function(e){var t=fe(e),e=e.selection.getSelectedBlocks();return de(t,e)?me(t):l.grep(e,function(e){return f.isListNode(e)&&t!==e})},Ce=he=function(e){var t=e.selection.getSelectedBlocks();return l.grep(ge(e,t),function(e){return f.isListItemNode(e)})},y=pe=function(e,t){t=e.dom.getParents(t,"TD,TH");return 0<t.length?t[0]:e.getBody()},Se=function(e){return K(he(e),f.isDlItemNode)},ke=function(e){var t=be(e);return ye(e,t)},x=function(e,t){t=(t||r.document).createElement(e);return Te(t)},w=Te=function(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:c(e)}},Ne=function(e,t){for(var n,r=[],o=0;o<e.length;o++){if(!(n=e[o]).isSome())return p();r.push(n.getOrDie())}return h(t.apply(null,r))},Ee=function(e,t){var n=(t||r.document).createDocumentFragment();return b(e,function(e){n.appendChild(e.dom())}),w(n)},B=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(){for(var n,r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];if(t.length!==r.length)throw new Error('Wrong number of arguments to struct. Expected "['+t.length+']", got '+r.length+" arguments");return n={},b(t,function(e,t){n[e]=c(r[t])}),n}},Re=Object.keys,_e=function(e,t){for(var n,r=Re(e),o=0,i=r.length;o<i;o++)t(e[n=r[o]],n,e)},Ae=function(){return ce.getOrDie("Node")},De=function(e,t,n){return 0!=(e.compareDocumentPosition(t)&n)},Pe=function(e,t){return De(e,t,Ae().DOCUMENT_POSITION_CONTAINED_BY)},M=function(n){var r,o=!1;return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o||(o=!0,r=n.apply(null,e)),r}},Oe=function(e,t){for(var n,r=0;r<e.length;r++)if((n=e[r]).test(t))return n},Be=function(e,t){var n=Oe(e,t);return n?Ie((e=function(e){return Number(t.replace(n,"$"+e))})(1),e(2)):{major:0,minor:0}},Ie=function(e,t){return{major:e,minor:t}},Le=function(e,t){t=String(t).toLowerCase();return 0===e.length?Me():Be(e,t)},Fe=Me=function(){return Ie(0,0)},ze="Chrome",Ue="IE",We="Opera",je="Firefox",Ve="Safari",C=function(e,t){return function(){return t===e}},$e=function(){return qe({current:void 0,version:Fe()})},Ye=qe=function(e){var t=e.current;return{current:t,version:e.version,isEdge:C(He,t),isChrome:C(ze,t),isIE:C(Ue,t),isOpera:C(We,t),isFirefox:C(je,t),isSafari:C(Ve,t)}},c(He="Edge"),c(ze),c(Ue),c(We),c(je),c(Ve),Ke="iOS",Ge="Android",Je="Linux",Ze="OSX",Qe="Solaris",et="FreeBSD",S=function(e,t){return function(){return t===e}},nt=function(){return tt({current:void 0,version:Fe()})},rt=tt=function(e){var t=e.current;return{current:t,version:e.version,isWindows:S(Xe,t),isiOS:S(Ke,t),isAndroid:S(Ge,t),isOSX:S(Ze,t),isLinux:S(Je,t),isSolaris:S(Qe,t),isFreeBSD:S(et,t)}},c(Xe="Windows"),c(Ke),c(Ge),c(Je),c(Ze),c(Qe),c(et),ot=function(e,t,n){var r=e.isiOS()&&!0===/ipad/i.test(n),o=e.isiOS()&&!r,i=e.isAndroid()&&3===e.version.major,a=e.isAndroid()&&4===e.version.major,i=r||i||a&&!0===/mobile/i.test(n),a=e.isiOS()||e.isAndroid(),u=a&&!i,t=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(n);return{isiPad:c(r),isiPhone:c(o),isTablet:c(i),isPhone:c(u),isTouch:c(a),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:c(t)}},it=function(e,t){var n=String(t).toLowerCase();return Z(e,function(e){return e.search(n)})},at=function(e,n){return it(e,n).map(function(e){var t=Le(e.versionRegexes,n);return{current:e.name,version:t}})},ut=function(e,n){return it(e,n).map(function(e){var t=Le(e.versionRegexes,n);return{current:e.name,version:t}})},k=function(e,t){return-1!==e.indexOf(t)},T=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return k(e,"edge/")&&k(e,"chrome")&&k(e,"safari")&&k(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,T=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/],search:function(e){return k(e,"chrome")&&!k(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return k(e,"msie")||k(e,"trident")}},{name:"Opera",versionRegexes:[T,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:(t=function(t){return function(e){return k(e,t)}})("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:t("firefox")},{name:"Safari",versionRegexes:[T,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(k(e,"safari")||k(e,"mobile/"))&&k(e,"applewebkit")}}],t=[{name:"Windows",search:t("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return k(e,"iphone")||k(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:t("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:t("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:t("linux"),versionRegexes:[]},{name:"Solaris",search:t("sunos"),versionRegexes:[]},{name:"FreeBSD",search:t("freebsd"),versionRegexes:[]}],st={browsers:c(T),oses:c(t)},ct=function(e){var t=st.browsers(),n=st.oses(),t=at(t,e).fold($e,Ye),n=ut(n,e).fold(nt,rt);return{browser:t,os:n,deviceType:ot(n,t,e)}},T=M(function(){var e=r.navigator.userAgent;return ct(e)}),r.Node.ATTRIBUTE_NODE,r.Node.CDATA_SECTION_NODE,r.Node.COMMENT_NODE,r.Node.DOCUMENT_NODE,r.Node.DOCUMENT_TYPE_NODE,r.Node.DOCUMENT_FRAGMENT_NODE,t=r.Node.ELEMENT_NODE,r.Node.TEXT_NODE,r.Node.PROCESSING_INSTRUCTION_NODE,r.Node.ENTITY_REFERENCE_NODE,r.Node.ENTITY_NODE,r.Node.NOTATION_NODE,lt=t,M=function(e,t){e=e.dom();if(e.nodeType!==lt)return!1;if(void 0!==e.matches)return e.matches(t);if(void 0!==e.msMatchesSelector)return e.msMatchesSelector(t);if(void 0!==e.webkitMatchesSelector)return e.webkitMatchesSelector(t);if(void 0!==e.mozMatchesSelector)return e.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},ft=function(e,t){return e.dom()===t.dom()},t=function(e,t){e=e.dom(),t=t.dom();return e!==t&&e.contains(t)},dt=function(e,t){return Pe(e.dom(),t.dom())},T={detect:T}.detect().browser,mt=T.isIE()?dt:t,N=M,gt=function(e){e=e.dom();return V(e.parentNode).map(w)},ht=function(e){e=e.dom();return v(e.childNodes,w)},pt=function(e,t){e=e.dom().childNodes;return V(e[t]).map(w)},vt=function(e){return pt(e,0)},bt=function(e){return pt(e,e.dom().childNodes.length-1)},B("element","offset"),yt=function(t,n){gt(t).each(function(e){e.dom().insertBefore(n.dom(),t.dom())})},E=function(e,t){e.dom().appendChild(t.dom())},xt=function(t,e){b(e,function(e){yt(t,e)})},wt=function(t,e){b(e,function(e){E(t,e)})},Ct=function(e){e=e.dom();null!==e.parentNode&&e.parentNode.removeChild(e)},St=function(e){return e.dom().nodeName.toLowerCase()},kt=function(e,t,n){if(!($(n)||Y(n)||X(n)))throw r.console.error("Invalid call to Attr.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")},R=function(e,t){var n=e.dom();_e(t,function(e,t){kt(n,t,e)})},Tt=function(e){return J(e.dom().attributes,function(e,t){return e[t.name]=t.value,e},{})},Nt=function(e){return void 0!==e.style},Et=function(e,t,n){if(!$(n))throw r.console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);Nt(e)&&e.style.setProperty(t,n)},Rt=function(e,t,n){e=e.dom();Et(e,t,n)},_t=function(e,t){return w(e.dom().cloneNode(t))},At=function(e){return _t(e,!0)},Dt=function(e,t){t=x(t),e=Tt(e);return R(t,e),t},Pt=function(e,t){var n,t=Dt(e,t);return yt(e,t),n=ht(e),wt(t,n),Ct(e),t},Ot=function(e,t){E(e.item,t.list)},Bt=function(e){for(var t=1;t<e.length;t++)Ot(e[t-1],e[t])},Mt=function(e,t){Ne([o(e),oe(t)],Ot)},It=function(e,t){t={list:x(t,e),item:x("li",e)};return E(t.list,t.item),t},Lt=function(e,t,n){for(var r=[],o=0;o<n;o++)r.push(It(e,t.listType));return r},Ft=function(e,t){for(var n=0;n<e.length-1;n++)Rt(e[n].item,"list-style-type","none");o(e).each(function(e){R(e.list,t.listAttributes),R(e.item,t.itemAttributes),wt(e.item,t.content)})},Ht=function(e,t){St(e.list)!==t.listType&&(e.list=Pt(e.list,t.listType)),R(e.list,t.listAttributes)},zt=function(e,t,n){e=x("li",e);return R(e,t),wt(e,n),e},Ut=function(e,t){E(e.list,t),e.item=t},Wt=function(n,e,r){e=e.slice(0,r.depth);return o(e).each(function(e){var t=zt(n,r.itemAttributes,r.content);Ut(e,t),Ht(e,r)}),e},jt=function(e,t,n){e=Lt(e,n,n.depth-t.length);return Bt(e),Ft(e,n),Mt(t,e),t.concat(e)},Vt=function(n,e){e=J(e,function(e,t){return(t.depth>e.length?jt:Wt)(n,e,t)},[]);return oe(e).map(function(e){return e.list})},_=function(e){return N(e,"OL,UL")},qt=function(e){return vt(e).map(_).getOr(!1)},$t=function(e){return bt(e).map(_).getOr(!1)},Yt=function(e){return 0<e.depth},Xt=function(e){return e.isSelected},Kt=function(e){var t=ht(e),e=$t(e)?t.slice(0,-1):t;return v(e,At)},Gt=function(t,n,r){return gt(t).map(function(e){return{depth:n,isSelected:r,content:Kt(t),itemAttributes:Tt(t),listAttributes:Tt(e),listType:St(e)}})},Jt=function(e,t){switch(e){case"Indent":t.depth++;break;case"Outdent":t.depth--;break;case"Flatten":t.depth=0}},Zt=Object.prototype.hasOwnProperty,Qt=function(a){return function(){for(var e,t,n,r,o=new Array(arguments.length),i=0;i<o.length;i++)o[i]=arguments[i];if(0===o.length)throw new Error("Can't merge zero objects");for(e={},t=0;t<o.length;t++)for(r in n=o[t])Zt.call(n,r)&&(e[r]=a(e[r],n[r]));return e}}(function(e,t){return t}),en=function(e,t){e.listType=t.listType,e.listAttributes=Qt({},t.listAttributes)},tn=function(e,t){for(var n=e[t].depth,r=t-1;0<=r;r--){if(e[r].depth===n)return h(e[r]);if(e[r].depth<n)break}return p()},nn=function(n){b(n,function(t,e){tn(n,e).each(function(e){en(t,e)})})},rn=function(e){var t=e,e=function(){return t};return{get:e,set:function(e){t=e},clone:function(){return rn(t)}}},on=function(n,r,o,i){return vt(i).filter(_).fold(function(){var e,t;return r.each(function(e){ft(e.start,i)&&o.set(!0)}),e=Gt(i,n,o.get()),r.each(function(e){ft(e.end,i)&&o.set(!1)}),t=bt(i).filter(_).map(function(e){return A(n,r,o,e)}).getOr([]),e.toArray().concat(t)},function(e){return A(n,r,o,e)})},A=function(t,n,r,e){return te(ht(e),function(e){return(_(e)?A:on)(t+1,n,r,e)})},an=function(e,t){var n=rn(!1);return v(e,function(e){return{sourceList:e,entries:A(0,t,n,e)}})},un=tinymce.util.Tools.resolve("tinymce.Env"),sn=function(e,t){var n,r,o,i,a,u=e.dom,s=e.schema.getBlockElements(),c=u.createFragment();if((o=e.settings.forced_root_block?e.settings.forced_root_block:o)&&((r=u.create(o)).tagName===e.settings.forced_root_block&&u.setAttribs(r,e.settings.forced_root_block_attrs),f.isBlock(t.firstChild,s)||c.appendChild(r)),t)for(;n=t.firstChild;)a=n.nodeName,i||"SPAN"===a&&"bookmark"===n.getAttribute("data-mce-type")||(i=!0),f.isBlock(n,s)?(c.appendChild(n),r=null):(o?(r||(r=u.create(o),c.appendChild(r)),r):c).appendChild(n);return e.settings.forced_root_block?i||un.ie&&!(10<un.ie)||r.appendChild(u.create("br",{"data-mce-bogus":"1"})):c.appendChild(u.create("br")),c},cn=function(t,e){return v(e,function(e){e=Ee(e.content);return w(sn(t,e.dom()))})},ln=function(e,t){return nn(t),Vt(e.contentDocument,t).toArray()},fn=function(t,e){return te(G(e,Yt),function(e){return(oe(e).map(Yt).getOr(!1)?ln:cn)(t,e)})},dn=function(e,t){b(K(e,Xt),function(e){Jt(t,e)})},mn=function(e){e=v(Ce(e),w);return Ne([Z(e,W(qt)),Z(re(e),W(qt))],function(e,t){return{start:e,end:t}})},gn=function(t,e,n){e=an(e,mn(t));b(e,function(e){dn(e.entries,n),xt(e.sourceList,fn(t,e.entries)),Ct(e.sourceList)})},D=e.DOM,hn=function(e,t,n){var r,o=function(t){l.each(i,function(e){t.parentNode.insertBefore(e,n.parentNode)}),D.remove(t)},i=D.select('span[data-mce-type="bookmark"]',t),a=sn(e,n),u=D.createRng();for(u.setStartAfter(n),u.setEndAfter(t),r=(u=u.extractContents()).firstChild;r;r=r.firstChild)if("LI"===r.nodeName&&e.dom.isEmpty(r)){D.remove(r);break}e.dom.isEmpty(u)||D.insertAfter(u,t),D.insertAfter(a,t),f.isEmpty(e.dom,n.parentNode)&&o(n.parentNode),D.remove(n),f.isEmpty(e.dom,t)&&D.remove(t)},pn=function(t,n){N(n,"DD")?Pt(n,"DT"):N(n,"DT")&&gt(n).each(function(e){return hn(t,e.dom(),n.dom())})},vn=function(e){N(e,"DT")&&Pt(e,"DD")},bn=function(t,e,n){b(n,"Indent"===e?vn:function(e){pn(t,e)})},yn=function(e,t){var n,r=v(ke(e),w),o=v(Se(e),w),i=!1;return(r.length||o.length)&&(n=e.selection.getBookmark(),gn(e,r,t),bn(e,t,o),e.selection.moveToBookmark(n),e.selection.setRng(u(e.selection.getRng())),e.nodeChanged(),i=!0),i},xn=function(e){return yn(e,"Indent")},wn=function(e){return yn(e,"Outdent")},P=function(e){return yn(e,"Flatten")},Cn=function(e,t,n){n=n["list-style-type"]||null;e.setStyle(t,"list-style-type",n)},Sn=function(n,e){l.each(e,function(e,t){n.setAttribute(t,e)})},kn=function(e,t,n){Sn(t,n["list-attributes"]),l.each(e.select("li",t),function(e){Sn(e,n["list-item-attributes"])})},O=function(e,t,n){Cn(e,t,n),kn(e,t,n)},Tn=function(n,r,e){l.each(e,function(e){var t;return n.setStyle(r,((t={})[e]="",t))})},Nn=function(e,t,n,r){var o=t[n?"startContainer":"endContainer"],t=t[n?"startOffset":"endOffset"];for(1===o.nodeType&&(o=o.childNodes[Math.min(t,o.childNodes.length-1)]||o),!n&&f.isBr(o.nextSibling)&&(o=o.nextSibling);o.parentNode!==r;){if(f.isTextBlock(e,o))return o;if(/^(TD|TH)$/.test(o.parentNode.nodeName))return o;o=o.parentNode}return o},En=function(n,e,r){for(var o,i=[],a=n.dom,t=Nn(n,e,!0,r),u=Nn(n,e,!1,r),s=[],c=t;c&&(s.push(c),c!==u);c=c.nextSibling);return l.each(s,function(e){var t;f.isTextBlock(n,e)?(i.push(e),o=null):a.isBlock(e)||f.isBr(e)?(f.isBr(e)&&a.remove(e),o=null):(t=e.nextSibling,H.isBookmarkNode(e)&&(f.isTextBlock(n,t)||!t&&e.parentNode===r)?o=null:(o||(o=a.create("p"),e.parentNode.insertBefore(o,e),i.push(o)),o.appendChild(e)))}),i},Rn=function(e,t,n){e=e.getStyle(t,"list-style-type"),t=n?n["list-style-type"]:"";return e===(null===t?"":t)},_n=function(r,o,i){var e,t,a,n,u;void 0===i&&(i={}),e=r.selection.getRng(!0),a="LI",n=y(r,r.selection.getStart(!0)),"false"!==(u=r.dom).getContentEditable(r.selection.getNode())&&("DL"===(o=o.toUpperCase())&&(a="DT"),t=s.createBookmark(e),l.each(En(r,e,n),function(e){var t,n=e.previousSibling;n&&f.isListNode(n)&&n.nodeName===o&&Rn(u,n,i)?(t=n,e=u.rename(e,a),n.appendChild(e)):(t=u.create(o),e.parentNode.insertBefore(t,e),t.appendChild(e),e=u.rename(e,a)),Tn(u,e,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),O(u,t,i),Bn(r.dom,t)}),r.selection.setRng(s.resolveBookmark(t)))},An=function(e,t){return e&&t&&f.isListNode(e)&&e.nodeName===t.nodeName},Dn=function(e,t,n){return e.getStyle(t,"list-style-type",!0)===e.getStyle(n,"list-style-type",!0)},Pn=function(e,t){return e.className===t.className},On=function(e,t,n){return An(t,n)&&Dn(e,t,n)&&Pn(t,n)},Mn=function(e,t,n,r){t.nodeName!==n?(n=e.rename(t,n),O(e,n,r)):O(e,t,r)},In=function(t,e,n,r,o){var i;e.nodeName!==r||Ln(o)?(i=s.createBookmark(t.selection.getRng(!0)),l.each([e].concat(n),function(e){Mn(t.dom,e,r,o)}),t.selection.setRng(s.resolveBookmark(i))):P(t)},Ln=function(e){return"list-style-type"in e},Fn=function(e,t,n,r){var o;t!==e.getBody()&&(t?t.nodeName!==n||Ln(r)?(o=s.createBookmark(e.selection.getRng(!0)),O(e.dom,t,r),Bn(e.dom,e.dom.rename(t,n)),e.selection.setRng(s.resolveBookmark(o))):P(e):_n(e,n,r))},Hn=function(e,t,n){var r=xe(e),o=we(e);n=n||{},r&&0<o.length?In(e,r,o,t,n):Fn(e,r,t,n)},zn=Bn=function(e,t){var n,r=t.nextSibling;if(On(e,t,r)){for(;n=r.firstChild;)t.appendChild(n);e.remove(r)}if(r=t.previousSibling,On(e,t,r)){for(;n=r.lastChild;)t.insertBefore(n,t.firstChild);e.remove(r)}},Un=e.DOM,Wn=function(e,t){var n,r=t.parentNode;"LI"===r.nodeName&&r.firstChild===t&&((n=r.previousSibling)&&"LI"===n.nodeName?(n.appendChild(t),f.isEmpty(e,r)&&Un.remove(r)):Un.setStyle(r,"listStyleType","none")),f.isListNode(r)&&(n=r.previousSibling)&&"LI"===n.nodeName&&n.appendChild(t)},jn=function(t,e){l.each(l.grep(t.select("ol,ul",e)),function(e){Wn(t,e)})},Vn=function(e,t,n,r){var o,i,a=t.startContainer,t=t.startOffset;if(3===a.nodeType&&(n?t<a.data.length:0<t))return a;for(o=e.schema.getNonEmptyElements(),1===a.nodeType&&(a=L.getNode(a,t)),i=new F(a,r),n&&f.isBogusBr(e.dom,a)&&i.next();a=i[n?"next":"prev2"]();){if("LI"===a.nodeName&&!a.hasChildNodes())return a;if(o[a.nodeName])return a;if(3===a.nodeType&&0<a.data.length)return a}},qn=function(e,t){t=t.childNodes;return 1===t.length&&!f.isListNode(t[0])&&e.isBlock(t[0])},$n=function(e,t){qn(e,t)&&e.remove(t.firstChild,!0)},Yn=function(e,t,n){var r,o=qn(e,n)?n.firstChild:n;if($n(e,t),!f.isEmpty(e,t,!0))for(;r=t.firstChild;)o.appendChild(r)},Xn=function(t,e,n){var r,o=e.parentNode;f.isChildOfBody(t,e)&&f.isChildOfBody(t,n)&&(f.isListNode(n.lastChild)&&(r=n.lastChild),o===n.lastChild&&f.isBr(o.previousSibling)&&t.remove(o.previousSibling),(o=n.lastChild)&&f.isBr(o)&&e.hasChildNodes()&&t.remove(o),f.isEmpty(t,n,!0)&&t.$(n).empty(),Yn(t,e,n),r&&n.appendChild(r),o=mt(w(n),w(e))?t.getParents(e,f.isListNode,n):[],t.remove(e),b(o,function(e){f.isEmpty(t,e)&&e!==t.getRoot()&&t.remove(e)}))},Kn=function(e,t,n){e.dom.$(n).empty(),Xn(e.dom,t,n),e.selection.setCursorLocation(n)},Gn=function(e,t,n,r){var o=e.dom;o.isEmpty(r)?Kn(e,n,r):(t=s.createBookmark(t),Xn(o,n,r),e.selection.setRng(s.resolveBookmark(t)))},Jn=function(e,t,n,r){t=s.createBookmark(t);Xn(e.dom,n,r),n=s.resolveBookmark(t),e.selection.setRng(n)},Zn=function(e,t){var n,r=e.dom,o=e.selection,i=o.getStart(),i=y(e,i),a=r.getParent(o.getStart(),"LI",i);if(a){if((n=a.parentNode)===e.getBody()&&f.isEmpty(r,n))return!0;if(n=u(o.getRng(!0)),(o=r.getParent(Vn(e,n,t,i),"LI",i))&&o!==a)return t?Gn(e,n,o,a):Jn(e,n,a,o),!0;if(!o&&!t)return P(e),!0}return!1},Qn=function(e,t,n){n=e.getParent(t.parentNode,e.isBlock,n);e.remove(t),n&&e.isEmpty(n)&&e.remove(n)},er=function(e,t){var n,r=e.dom,o=e.selection.getStart(),i=y(e,o),a=r.getParent(o,r.isBlock,i);return!!(a&&r.isEmpty(a)&&(o=u(e.selection.getRng(!0)),n=r.getParent(Vn(e,o,t,i),"LI",i)))&&(e.undoManager.transact(function(){Qn(r,a,i),zn(r,n.parentNode),e.selection.select(n,!0),e.selection.collapse(t)}),!0)},tr=function(e,t){return Zn(e,t)||er(e,t)},nr=function(e){var t=e.selection.getStart(),n=y(e,t);return!!(e.dom.getParent(t,"LI,DT,DD",n)||0<Ce(e).length)&&(e.undoManager.transact(function(){e.execCommand("Delete"),jn(e.dom,e.getBody())}),!0)},or=function(t){t.on("keydown",function(e){e.keyCode===n.BACKSPACE?rr(t,!1)&&e.preventDefault():e.keyCode===n.DELETE&&rr(t,!0)&&e.preventDefault()})},ir=rr=function(e,t){return e.selection.isCollapsed()?tr(e,t):nr(e)},ar=function(t){return{backspaceDelete:function(e){ir(t,e)}}},ur=function(t,n){return function(){var e=t.dom.getParent(t.selection.getStart(),"UL,OL,DL");return e&&e.nodeName===n}},sr=function(n){n.on("BeforeExecCommand",function(e){e=e.command.toLowerCase();"indent"===e?xn(n):"outdent"===e&&wn(n)}),n.addCommand("InsertUnorderedList",function(e,t){Hn(n,"UL",t)}),n.addCommand("InsertOrderedList",function(e,t){Hn(n,"OL",t)}),n.addCommand("InsertDefinitionList",function(e,t){Hn(n,"DL",t)}),n.addCommand("RemoveList",function(){P(n)}),n.addQueryStateHandler("InsertUnorderedList",ur(n,"UL")),n.addQueryStateHandler("InsertOrderedList",ur(n,"OL")),n.addQueryStateHandler("InsertDefinitionList",ur(n,"DL"))},cr=function(e){return e.getParam("lists_indent_on_tab",!0)},lr=function(t){t.on("keydown",function(e){e.keyCode!==n.TAB||n.metaKeyPressed(e)||t.undoManager.transact(function(){(e.shiftKey?wn:xn)(t)&&e.preventDefault()})})},fr=function(e){cr(e)&&lr(e),or(e)},dr=function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n;return-1},mr=function(t,r){return function(e){var n=e.control;t.on("NodeChange",function(e){var t=dr(e.parents,f.isTableCellNode),t=-1!==t?e.parents.slice(0,t):e.parents,e=l.grep(t,f.isListNode);n.active(0<e.length&&e[0].nodeName===r)})}},gr=function(e){!function(e,t){e=e.settings.plugins||"";return-1!==l.inArray(e.split(/[ ,]/),t)}(e,"advlist")&&(e.addButton("numlist",{active:!1,title:"Numbered list",cmd:"InsertOrderedList",onPostRender:mr(e,"OL")}),e.addButton("bullist",{active:!1,title:"Bullet list",cmd:"InsertUnorderedList",onPostRender:mr(e,"UL")})),e.addButton("indent",{icon:"indent",title:"Increase indent",cmd:"Indent"})},I.add("lists",function(e){return fr(e),gr(e),sr(e),ar(e)})}(window),function(){"use strict";var e,i,a,t,n,r,o,u,s,c,l,f,d,m,g,h,p,v,b;e=tinymce.util.Tools.resolve("tinymce.PluginManager"),i=tinymce.util.Tools.resolve("tinymce.util.Tools"),a=function(e,t,n){e.execCommand("UL"===t?"InsertUnorderedList":"InsertOrderedList",!1,!1===n?null:{"list-style-type":n})},t=function(n){n.addCommand("ApplyUnorderedListStyle",function(e,t){a(n,"UL",t["list-style-type"])}),n.addCommand("ApplyOrderedListStyle",function(e,t){a(n,"OL",t["list-style-type"])})},n=function(e){e=e.getParam("advlist_number_styles","default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman");return e?e.split(/[ ,]/):[]},r=function(e){e=e.getParam("advlist_bullet_styles","default,circle,disc,square");return e?e.split(/[ ,]/):[]},o=function(e,t){return e.$.contains(e.getBody(),t)},u=function(e){return e&&/^(TH|TD)$/.test(e.nodeName)},s=function(t){return function(e){return e&&/^(OL|UL|DL)$/.test(e.nodeName)&&o(t,e)}},c=function(e){var t=e.dom.getParent(e.selection.getNode(),"ol,ul");return e.dom.getStyle(t,"listStyleType")||""},l=function(e){return e.replace(/\-/g," ").replace(/\b\w/g,function(e){return e.toUpperCase()})},f=function(e){return i.map(e,function(e){return{text:l(e),data:"default"===e?"":e}})},d=function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n;return-1},m=function(r,o){return function(e){var n=e.control;r.on("NodeChange",function(e){var t=d(e.parents,u),t=-1!==t?e.parents.slice(0,t):e.parents,e=i.grep(t,s(r));n.active(0<e.length&&e[0].nodeName===o)})}},g=function(n){return function(e){var t=c(n);e.control.items().each(function(e){e.active(e.settings.data===t)})}},h=function(t,e,n,r,o,i){t.addButton(e,{active:!1,type:"splitbutton",tooltip:n,menu:f(i),onPostRender:m(t,o),onshow:g(t),onselect:function(e){a(t,o,e.control.settings.data)},onclick:function(){t.execCommand(r)}})},p=function(e,t,n,r,o,i){e.addButton(t,{active:!1,type:"button",tooltip:n,onPostRender:m(e,o),onclick:function(){e.execCommand(r)}})},v=function(e,t,n,r,o,i){(0<i.length?h:p)(e,t,n,r,o,i)},b=function(e){v(e,"numlist","Numbered list","InsertOrderedList","OL",n(e)),v(e,"bullist","Bullet list","InsertUnorderedList","UL",r(e))},e.add("advlist",function(e){!function(e,t){e=e.settings.plugins||"";return-1!==i.inArray(e.split(/[ ,]/),t)}(e,"lists")||(b(e),t(e))})}(),function(s){"use strict";var e,i,a,u,c,r,l,f,o,n,d,m,g,h,p,v,t,b,y,x,w,C,S,k,T;function N(e){var t,n=this.parent().parent().find("#alt")[0];""==n.value()&&(t=this.value(),n.value(t.substring(t.lastIndexOf("/")+1)))}function E(u){var t=function(n,t,r,o){var i,a=new(g("XMLHttpRequest"));a.open("POST",u.url),a.withCredentials=u.credentials,a.upload.onprogress=function(e){o(e.loaded/e.total*100)},a.onerror=function(){r("File upload failed due to a XHR Transport error. Code: "+a.status)},a.onload=function(){var e;a.status<200||300<=a.status?r("HTTP Error: "+a.status):(e=JSON.parse(a.responseText))&&"string"==typeof e.location?t(w(u.basePath,e.location)):r("Invalid JSON: "+a.responseText)},(i=new s.FormData).append("type","attach"),n.blob.type.startsWith("image")?p.resizeImage(n,function(e,t){e?i.append("file",t,n.name.replace(/\.\w+$/,".jpg")):i.append("file",n.blob,n.name),a.send(i)}):(i.append("file",n.blob,n.name),a.send(i))},n=function(n,r){return new h(function(e,t){try{r(n,e,t,x)}catch(e){t(e.message)}})},r=function(e){return e===t},e=function(e){return!u.url&&r(u.handler)?h.reject("Upload url missing from the settings."):n(e,u.handler)};return u=p.extend({credentials:!1,handler:t},u),{upload:e}}function R(e,t){var n;(n=t.data.src)?(n={href:n,target:"_blank",class:"attach"},c?(e.focus(),l&&t.data.alt!=r&&("innerText"in c?c.innerText=t.data.alt:c.textContent=t.data.alt),a.setAttribs(c,n),i.select(c),e.undoManager.add()):l?e.insertContent(a.createHTML("a",n,a.encode(t.data.alt))):e.execCommand("mceInsertLink",!1,n)):e.execCommand("unlink")}function _(r){for(var o=[],e=1;e<arguments.length;e++)o[e-1]=arguments[e];return function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e=o.concat(t),r.apply(null,e)}}function A(o){function e(){var e,t,n,r;i=o.selection,a=o.dom,u=i.getNode(),c=a.getParent(u,"a[href].attach"),l=function(e){var t,n,r=i.getContent();if(/</.test(r)&&(!/^<a [^>]+>[^<]+<\/a>$/.test(r)||-1==r.indexOf("href=")))return!1;if(e){if(0===(t=e.childNodes).length)return!1;for(n=t.length-1;0<=n;n--)if(3!=t[n].nodeType)return!1}return!0}(c),t={},n=(e=o).selection,e=e.dom,r=n.getNode(),r=e.getParent(r,"a[href].attach"),t.alt=r?r.innerText||r.textContent:n.getContent({format:"text"}),t.src=r?e.getAttrib(r,"href"):"",n=t,f.hasUploadUrl(o)||f.hasUploadHandler(o)?(e=[b.makeTab(o)],(f.hasUploadUrl(o)||f.hasUploadHandler(o))&&e.push(S.makeTab(o)),o.windowManager.open({title:"Attach File",data:n,bodyType:"tabpanel",body:e,onSubmit:_(R,o)})):o.windowManager.open({title:"Attach File",data:n,body:b.getGeneralItems(o),onSubmit:_(R,o)})}return{open:function(){e()}}}e=tinymce.util.Tools.resolve("tinymce.PluginManager"),f={hasDescription:function(e){return!1!==e.settings.image_description},hasUploadUrl:function(e){return e.getParam("images_upload_url",!1)},hasUploadHandler:function(e){return e.getParam("images_upload_handler",!1)},getUploadUrl:function(e){return e.getParam("images_upload_url")},getUploadHandler:function(e){return e.getParam("images_upload_handler")},getUploadBasePath:function(e){return e.getParam("images_upload_base_path")},getUploadCredentials:function(e){return e.getParam("images_upload_credentials")}},o=void 0!==s.window?s.window:Function("return this;")(),n=function(e,t){for(var n=null!=t?t:o,r=0;r<e.length&&null!=n;++r)n=n[e[r]];return n},d=function(e,t){e=e.split(".");return n(e,t)},m=function(e,t){return d(e,t)},g=function(e,t){t=m(e,t);if(null==t)throw e+" not available on this browser";return t},h=tinymce.util.Tools.resolve("tinymce.util.Promise"),p=tinymce.util.Tools.resolve("tinymce.util.Tools"),v=function(e){e.meta=e.control.rootControl.toJSON()},b={makeTab:function(e){return{title:"General",type:"form",items:t(e)}},getGeneralItems:t=function(e){var t=[{name:"src",type:"filepicker",filetype:"file",size:40,label:"Source",autofocus:!0,onchange:N,onbeforecall:v}];return f.hasDescription(e)&&t.push({name:"alt",type:"textbox",label:"File description",size:40}),t}},y=tinymce.util.Tools.resolve("tinymce.ui.Factory"),x=function(){},w=function(e,t){return e?e.replace(/\/$/,"")+"/"+t.replace(/^\//,""):t},C=function(i){return function(e){var t=y.get("Throbber"),n=e.control.rootControl,r=new t(n.getEl()),t=e.control.value(),e=E({url:f.getUploadUrl(i),basePath:f.getUploadBasePath(i),credentials:f.getUploadCredentials(i),handler:f.getUploadHandler(i)}),o=function(){r.hide()};return r.show(),t={blob:t,name:t.name||null},e.upload(t).then(function(e){var t=n.find("#src");return t.value(e),n.find("tabpanel")[0].activateTab(0),t.fire("change"),o(),e})}},S={makeTab:function(e){return{title:"Upload",type:"form",layout:"flex",direction:"column",align:"stretch",padding:"20 20 20 20",items:[{type:"container",layout:"flex",direction:"column",align:"center",spacing:10,items:[{text:"Browse for a file",type:"browsebutton",onchange:C(e)},{text:"OR",type:"label"}]},{text:"Drop a file here",type:"dropzone",height:100,onchange:C(e)}]}}},k=function(e){e.addCommand("mceAttach",A(e).open)},T=function(e){e.addButton("attach",{icon:"attach",tooltip:"Attach File",onclick:A(e).open,stateSelector:"a[href].attach"}),e.addMenuItem("attach",{icon:"attach",text:"Attach File",onclick:A(e).open,stateSelector:"a[href].attach",context:"insert",prependToContext:!0})},e.add("attach",function(e){T(e),k(e)})}(window),function(){"use strict";var e,n,f,d,m,r,o,i,a,g,h,t,u;e=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=tinymce.util.Tools.resolve("tinymce.Env"),f=function(e){return e.getParam("autolink_pattern",/^(https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.|(?:mailto:)?[A-Z0-9._%+\-]+@)(.+)$/i)},d=function(e){return e.getParam("default_link_target","")},m=function(e,t){return e===t||" "===e||160===e.charCodeAt(0)},r=function(e){t(e,-1,"(")},o=function(e){t(e,0,"")},i=function(e){t(e,-1,"")},a=function(e,t){return t<0&&(t=0),t=3===e.nodeType&&(e=e.data.length)<t?e:t},g=function(e,t,n){1!==t.nodeType||t.hasChildNodes()?e.setStart(t,a(t,n)):e.setStartBefore(t)},h=function(e,t,n){1!==t.nodeType||t.hasChildNodes()?e.setEnd(t,a(t,n)):e.setEndAfter(t)},t=function(e,t,n){var r,o,i,a,u,s,c=f(e),l=d(e);if("A"!==e.selection.getNode().tagName){if((r=e.selection.getRng(!0).cloneRange()).startOffset<5){if(!(a=r.endContainer.previousSibling)){if(!r.endContainer.firstChild||!r.endContainer.firstChild.nextSibling)return;a=r.endContainer.firstChild.nextSibling}if(u=a.length,g(r,a,u),h(r,a,u),r.endOffset<5)return;o=r.endOffset,i=a}else{if(3!==(i=r.endContainer).nodeType&&i.firstChild){for(;3!==i.nodeType&&i.firstChild;)i=i.firstChild;3===i.nodeType&&(g(r,i,0),h(r,i,i.nodeValue.length))}o=1===r.endOffset?2:r.endOffset-1-t}for(u=o;g(r,i,2<=o?o-2:0),h(r,i,1<=o?o-1:0),--o," "!==(s=r.toString())&&""!==s&&160!==s.charCodeAt(0)&&0<=o-2&&s!==n;);m(r.toString(),n)?(g(r,i,o),h(r,i,u),o+=1):(0===r.startOffset?g(r,i,0):g(r,i,o),h(r,i,u)),"."===(a=r.toString()).charAt(a.length-1)&&h(r,i,u-1),(t=(a=r.toString().trim()).match(c))&&("www."===t[1]?t[1]="http://www.":/@$/.test(t[1])&&!/^mailto:/.test(t[1])&&(t[1]="mailto:"+t[1]),u=e.selection.getBookmark(),e.selection.setRng(r),e.execCommand("createlink",!1,t[1]+t[2]),l&&e.dom.setAttrib(e.selection.getNode(),"target",l),e.selection.moveToBookmark(u),e.nodeChanged())}},u=function(t){var e;t.on("keydown",function(e){if(13===e.keyCode)return i(t)}),n.ie?t.on("focus",function(){if(!e){e=!0;try{t.execCommand("AutoUrlDetect",!1,!0)}catch(e){}}}):(t.on("keypress",function(e){if(41===e.keyCode)return r(t)}),t.on("keyup",function(e){if(32===e.keyCode)return o(t)}))},e.add("autolink",function(e){u(e)})}(),function(s){"use strict";var e,c,F,H,z,U,l,o,f,W,i,d,t,j,a,r,u,m,g,n,h,p,v,V,q,$,b,y,x,w,C,S,k,Y,T,N,X,K,E,R,_,A,D,P,O,B,G,J,Z,Q,ee,te,M,ne,I,re,oe,ie,L,ae,ue,se,ce,le,fe,de,me,ge,he,pe,ve,be,ye,xe,we,Ce,Se;function ke(u){var t=function(n,t,r,o){var i,a=new(l.getOrDie("XMLHttpRequest"));a.open("POST",u.url),a.withCredentials=u.credentials,a.upload.onprogress=function(e){o(e.loaded/e.total*100)},a.onerror=function(){r("Image upload failed due to a XHR Transport error. Code: "+a.status)},a.onload=function(){var e;a.status<200||300<=a.status?r("HTTP Error: "+a.status):(e=JSON.parse(a.responseText))&&"string"==typeof e.location?t(ge(u.basePath,e.location)):r("Invalid JSON: "+a.responseText)},i=new s.FormData,f.resizeImage(n,function(e,t){e?i.append("file",t,n.filename().replace(/\.\w+$/,".jpg")):i.append("file",n.blob(),n.filename()),a.send(i)})},n=function(n,r){return new o(function(e,t){try{r(n,e,t,me)}catch(e){t(e.message)}})},r=function(e){return e===t},e=function(e){return!u.url&&r(u.handler)?o.reject("Upload url missing from the settings."):n(e,u.handler)};return u=f.extend({credentials:!1,handler:t},u),{upload:e}}function Te(r){for(var o=[],e=1;e<arguments.length;e++)o[e-1]=arguments[e];return function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e=o.concat(t),r.apply(null,e)}}function Ne(o){function e(e){var n,t,r=B(o);e&&(t={type:"listbox",label:"Image list",name:"image-list",values:d.buildListItems(e,function(e){e.value=o.convertURL(e.value||e.url,"src")},[{text:"None",value:""}]),value:r.src&&o.convertURL(r.src,"src"),onselect:function(e){var t=n.find("#alt");(!t.value()||e.lastControl&&t.value()===e.lastControl.text())&&t.value(e.control.text()),n.find("#src").value(e.control.value()).fire("change")},onPostRender:function(){t=this}}),n=c.hasAdvTab(o)||c.hasUploadUrl(o)||c.hasUploadHandler(o)?(e=[ce.makeTab(o,t)],c.hasAdvTab(o)&&e.push(ne.makeTab(o)),(c.hasUploadUrl(o)||c.hasUploadHandler(o))&&e.push(ve.makeTab(o)),o.windowManager.open({title:"Insert/edit image",data:r,bodyType:"tabpanel",body:e,onSubmit:Te(be,o)})):o.windowManager.open({title:"Insert/edit image",data:r,body:ce.getGeneralItems(o,t),onSubmit:Te(be,o)}),L.syncSize(n)}return{open:function(){d.createImageList(o,e)}}}e=tinymce.util.Tools.resolve("tinymce.PluginManager"),c={hasDimensions:function(e){return!1!==e.settings.image_dimensions},hasAdvTab:function(e){return!0===e.settings.image_advtab},getPrependUrl:function(e){return e.getParam("image_prepend_url","")},getClassList:function(e){return e.getParam("image_class_list")},hasDescription:function(e){return!1!==e.settings.image_description},hasImageTitle:function(e){return!0===e.settings.image_title},hasImageCaption:function(e){return!0===e.settings.image_caption},getImageList:function(e){return e.getParam("image_list",!1)},hasUploadUrl:function(e){return e.getParam("images_upload_url",!1)},hasUploadHandler:function(e){return e.getParam("images_upload_handler",!1)},getUploadUrl:function(e){return e.getParam("images_upload_url")},getUploadHandler:function(e){return e.getParam("images_upload_handler")},getUploadBasePath:function(e){return e.getParam("images_upload_base_path")},getUploadCredentials:function(e){return e.getParam("images_upload_credentials")}},F=void 0!==s.window?s.window:Function("return this;")(),H=function(e,t){for(var n=null!=t?t:F,r=0;r<e.length&&null!=n;++r)n=n[e[r]];return n},z=function(e,t){e=e.split(".");return H(e,t)},U=function(e,t){return z(e,t)},l={getOrDie:function(e,t){t=U(e,t);if(null==t)throw e+" not available on this browser";return t}},o=tinymce.util.Tools.resolve("tinymce.util.Promise"),f=tinymce.util.Tools.resolve("tinymce.util.Tools"),W=tinymce.util.Tools.resolve("tinymce.util.XHR"),i=function(e,t){return Math.max(parseInt(e,10),parseInt(t,10))},d={getImageSize:function(e,n){var r,t;function o(e,t){r.parentNode&&r.parentNode.removeChild(r),n({width:e,height:t})}(r=s.document.createElement("img")).onload=function(){o(i(r.width,r.clientWidth),i(r.height,r.clientHeight))},r.onerror=function(){o(0,0)},(t=r.style).visibility="hidden",t.position="fixed",t.bottom=t.left="0px",t.width=t.height="auto",s.document.body.appendChild(r),r.src=e},buildListItems:function(e,o,t){return function n(e,r){return r=r||[],f.each(e,function(e){var t={text:e.text||e.title};e.menu?t.menu=n(e.menu):(t.value=e.value,o(t)),r.push(t)}),r}(e,t||[])},removePixelSuffix:function(e){return e=e&&e.replace(/px$/,"")},addPixelSuffix:function(e){return 0<e.length&&/^[0-9]+$/.test(e)&&(e+="px"),e},mergeMargins:function(e){if(e.margin){var t=e.margin.split(" ");switch(t.length){case 1:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[0],e["margin-bottom"]=e["margin-bottom"]||t[0],e["margin-left"]=e["margin-left"]||t[0];break;case 2:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[0],e["margin-left"]=e["margin-left"]||t[1];break;case 3:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[2],e["margin-left"]=e["margin-left"]||t[1];break;case 4:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[2],e["margin-left"]=e["margin-left"]||t[3]}delete e.margin}return e},createImageList:function(e,t){e=c.getImageList(e);"string"==typeof e?W.send({url:e,success:function(e){t(JSON.parse(e))}}):"function"==typeof e?e(t):t(e)},waitLoadImage:function(e,t,n){function r(){n.onload=n.onerror=null,e.selection&&(e.selection.select(n),e.nodeChanged())}n.onload=function(){t.width||t.height||!c.hasDimensions(e)||e.dom.setAttribs(n,{width:n.clientWidth,height:n.clientHeight}),r()},n.onerror=r},blobToDataUri:function(r){return new o(function(e,t){var n=new(l.getOrDie("FileReader"));n.onload=function(){e(n.result)},n.onerror=function(){t(n.error.message)},n.readAsDataURL(r)})}},t=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),j=Object.prototype.hasOwnProperty,a=function(a){return function(){for(var e,t,n,r,o=new Array(arguments.length),i=0;i<o.length;i++)o[i]=arguments[i];if(0===o.length)throw new Error("Can't merge zero objects");for(e={},t=0;t<o.length;t++)for(r in n=o[t])j.call(n,r)&&(e[r]=a(e[r],n[r]));return e}}(function(e,t){return t}),r=t.DOM,u=function(e){return e.style.marginLeft&&e.style.marginRight&&e.style.marginLeft===e.style.marginRight?d.removePixelSuffix(e.style.marginLeft):""},m=function(e){return e.style.marginTop&&e.style.marginBottom&&e.style.marginTop===e.style.marginBottom?d.removePixelSuffix(e.style.marginTop):""},g=function(e){return e.style.borderWidth?d.removePixelSuffix(e.style.borderWidth):""},n=function(e,t){return e.hasAttribute(t)?e.getAttribute(t):""},h=function(e,t){return e.style[t]||""},p=function(e){return null!==e.parentNode&&"FIGURE"===e.parentNode.nodeName},v=function(e,t,n){e.setAttribute(t,n)},V=function(e){var t=r.create("figure",{class:"image"});r.insertAfter(t,e),t.appendChild(e),t.appendChild(r.create("figcaption",{contentEditable:!0},"Caption")),t.contentEditable="false"},q=function(e){var t=e.parentNode;r.insertAfter(e,t),r.remove(t)},$=function(e){(p(e)?q:V)(e)},b=function(e,t){var n=e.getAttribute("style"),t=t(null!==n?n:"");0<t.length?(e.setAttribute("style",t),e.setAttribute("data-mce-style",t)):e.removeAttribute("style")},y=function(e,r){return function(e,t,n){e.style[t]?(e.style[t]=d.addPixelSuffix(n),b(e,r)):v(e,t,n)}},x=function(e,t){return e.style[t]?d.removePixelSuffix(e.style[t]):n(e,t)},w=function(e,t){t=d.addPixelSuffix(t);e.style.marginLeft=t,e.style.marginRight=t},C=function(e,t){t=d.addPixelSuffix(t);e.style.marginTop=t,e.style.marginBottom=t},S=function(e,t){t=d.addPixelSuffix(t);e.style.borderWidth=t},k=function(e,t){e.style.borderStyle=t},Y=function(e){return h(e,"borderStyle")},T=function(e){return"FIGURE"===e.nodeName},N=function(){return{src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:""}},X=function(e,t){var n=s.document.createElement("img");return v(n,"style",t.style),!u(n)&&""===t.hspace||w(n,t.hspace),!m(n)&&""===t.vspace||C(n,t.vspace),!g(n)&&""===t.border||S(n,t.border),!Y(n)&&""===t.borderStyle||k(n,t.borderStyle),e(n.getAttribute("style"))},K=function(e,t){var n=s.document.createElement("img");return A(e,a(t,{caption:!1}),n),v(n,"alt",t.alt),t.caption?((e=r.create("figure",{class:"image"})).appendChild(n),e.appendChild(r.create("figcaption",{contentEditable:!0},"Caption")),e.contentEditable="false",e):n},E=function(e,t){return{src:n(t,"src"),alt:n(t,"alt"),title:n(t,"title"),width:x(t,"width"),height:x(t,"height"),class:n(t,"class"),style:e(n(t,"style")),caption:p(t),hspace:u(t),vspace:m(t),border:g(t),borderStyle:h(t,"borderStyle")}},R=function(e,t,n,r,o){n[r]!==t[r]&&o(e,r,n[r])},_=function(r,o){return function(e,t,n){r(e,n),b(e,o)}},A=function(e,t,n){var r=E(e,n);R(n,r,t,"caption",function(e,t,n){return $(e)}),R(n,r,t,"src",v),R(n,r,t,"alt",v),R(n,r,t,"title",v),R(n,r,t,"width",y("width",e)),R(n,r,t,"height",y("height",e)),R(n,r,t,"class",v),R(n,r,t,"style",_(function(e,t){return v(e,"style",t)},e)),R(n,r,t,"hspace",_(w,e)),R(n,r,t,"vspace",_(C,e)),R(n,r,t,"border",_(S,e)),R(n,r,t,"borderStyle",_(k,e))},D=function(e,t){t=e.dom.styles.parse(t),t=d.mergeMargins(t),t=e.dom.styles.parse(e.dom.styles.serialize(t));return e.dom.styles.serialize(t)},P=function(e){var t=e.selection.getNode(),n=e.dom.getParent(t,"figure.image");return n?e.dom.select("img",n)[0]:t&&("IMG"!==t.nodeName||t.getAttribute("data-mce-object")||t.getAttribute("data-mce-placeholder"))?null:t},O=function(t,e){var n=t.dom,r=n.getParent(e.parentNode,function(e){return t.schema.getTextBlockElements()[e.nodeName]},t.getBody());return r?n.split(r,e):e},B=function(t){var e=P(t);return e?E(function(e){return D(t,e)},e):N()},G=function(t,e){var n,e=K(function(e){return D(t,e)},e);t.dom.setAttrib(e,"data-mce-id","__mcenew"),t.focus(),t.selection.setContent(e.outerHTML),e=t.dom.select('*[data-mce-id="__mcenew"]')[0],t.dom.setAttrib(e,"data-mce-id",null),T(e)?(n=O(t,e),t.selection.select(n)):t.selection.select(e)},J=function(e,t){e.dom.setAttrib(t,"src",t.getAttribute("src"))},Z=function(e,t){t&&(t=e.dom.is(t.parentNode,"figure.image")?t.parentNode:t,e.dom.remove(t),e.focus(),e.nodeChanged(),e.dom.isEmpty(e.getBody()))&&(e.setContent(""),e.selection.setCursorLocation())},Q=function(t,e){var n,r=P(t);A(function(e){return D(t,e)},e,r),J(t,r),T(r.parentNode)?(n=r.parentNode,O(t,n),t.selection.select(r.parentNode)):(t.selection.select(r),d.waitLoadImage(t,e,r))},ee=function(e,t){var n=P(e);n?t.src?Q(e,t):Z(e,n):t.src&&G(e,t)},te=function(r){return function(e){var t,n=r.dom,e=e.control.rootControl;c.hasAdvTab(r)&&(t=e.toJSON(),t=n.parseStyle(t.style),e.find("#vspace").value(""),e.find("#hspace").value(""),((t=d.mergeMargins(t))["margin-top"]&&t["margin-bottom"]||t["margin-right"]&&t["margin-left"])&&(t["margin-top"]===t["margin-bottom"]?e.find("#vspace").value(d.removePixelSuffix(t["margin-top"])):e.find("#vspace").value(""),t["margin-right"]===t["margin-left"]?e.find("#hspace").value(d.removePixelSuffix(t["margin-right"])):e.find("#hspace").value("")),t["border-width"]?e.find("#border").value(d.removePixelSuffix(t["border-width"])):e.find("#border").value(""),t["border-style"]?e.find("#borderStyle").value(t["border-style"]):e.find("#borderStyle").value(""),e.find("#style").value(n.serializeStyle(n.parseStyle(n.serializeStyle(t)))))}},M=function(n,r){r.find("#style").each(function(e){var t=X(function(e){return D(n,e)},a(N(),r.toJSON()));e.value(t)})},ne={makeTab:function(t){return{title:"Advanced",type:"form",pack:"start",items:[{label:"Style",name:"style",type:"textbox",onchange:te(t)},{type:"form",layout:"grid",packV:"start",columns:2,padding:0,defaults:{type:"textbox",maxWidth:50,onchange:function(e){M(t,e.control.rootControl)}},items:[{label:"Vertical space",name:"vspace"},{label:"Border width",name:"border"},{label:"Horizontal space",name:"hspace"},{label:"Border style",type:"listbox",name:"borderStyle",width:90,maxWidth:90,onselect:function(e){M(t,e.control.rootControl)},values:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]}]}]}}},I=function(e,t){e.state.set("oldVal",e.value()),t.state.set("oldVal",t.value())},re=function(e,t){var n=e.find("#width")[0],r=e.find("#height")[0],e=e.find("#constrain")[0];n&&r&&e&&t(n,r,e.checked())},oe=function(e,t,n){var r=e.state.get("oldVal"),o=t.state.get("oldVal"),i=e.value(),a=t.value();n&&r&&o&&i&&a&&(i!==r?(a=Math.round(i/r*a),isNaN(a)||t.value(a)):(i=Math.round(a/o*i),isNaN(i)||e.value(i))),I(e,t)},L={createUi:function(){function e(e){ie(e.control.rootControl)}return{type:"container",label:"Dimensions",layout:"flex",align:"center",spacing:5,items:[{name:"width",type:"textbox",maxLength:5,size:5,onchange:e,ariaLabel:"Width"},{type:"label",text:"x"},{name:"height",type:"textbox",maxLength:5,size:5,onchange:e,ariaLabel:"Height"},{name:"constrain",type:"checkbox",checked:!0,text:"Constrain proportions"}]}},syncSize:function(e){re(e,I)},updateSize:ie=function(e){re(e,oe)}},ae=function(e,t){var n,r=e.meta||{},e=e.control,o=e.rootControl,i=o.find("#image-list")[0];i&&i.value(t.convertURL(e.value(),"src")),f.each(r,function(e,t){o.find("#"+t).value(e)}),r.width||r.height||(i=t.convertURL(e.value(),"src"),r=c.getPrependUrl(t),n=new RegExp("^(?:[a-z]+:)?//","i"),r&&!n.test(i)&&i.substring(0,r.length)!==r&&(i=r+i),e.value(i),d.getImageSize(t.documentBaseURI.toAbsolute(e.value()),function(e){e.width&&e.height&&c.hasDimensions(t)&&(o.find("#width").value(e.width),o.find("#height").value(e.height),L.syncSize(o))}))},ue=function(e){e.meta=e.control.rootControl.toJSON()},ce={makeTab:function(e,t){return{title:"General",type:"form",items:se(e,t)}},getGeneralItems:se=function(t,e){e=[{name:"src",type:"filepicker",filetype:"image",label:"Source",autofocus:!0,onchange:function(e){ae(e,t)},onbeforecall:ue},e];return c.hasDescription(t)&&e.push({name:"alt",type:"textbox",label:"Image description"}),c.hasImageTitle(t)&&e.push({name:"title",type:"textbox",label:"Image Title"}),c.hasDimensions(t)&&e.push(L.createUi()),c.getClassList(t)&&e.push({name:"class",type:"listbox",label:"Class",values:d.buildListItems(c.getClassList(t),function(e){e.value&&(e.textStyle=function(){return t.formatter.getCssText({inline:"img",classes:[e.value]})})})}),c.hasImageCaption(t)&&e.push({name:"caption",type:"checkbox",label:"Caption"}),e}},le=function(){return l.getOrDie("URL")},fe={createObjectURL:function(e){return le().createObjectURL(e)},revokeObjectURL:function(e){le().revokeObjectURL(e)}},de=tinymce.util.Tools.resolve("tinymce.ui.Factory"),me=function(){},ge=function(e,t){return e?e.replace(/\/$/,"")+"/"+t.replace(/^\//,""):t},he=function(s){return function(e){var t=de.get("Throbber"),n=e.control.rootControl,r=new t(n.getEl()),o=e.control.value(),i=fe.createObjectURL(o),a=ke({url:c.getUploadUrl(s),basePath:c.getUploadBasePath(s),credentials:c.getUploadCredentials(s),handler:c.getUploadHandler(s)}),u=function(){r.hide(),fe.revokeObjectURL(i)};return r.show(),d.blobToDataUri(o).then(function(e){e=s.editorUpload.blobCache.create({blob:o,blobUri:i,name:o.name?o.name.replace(/\.[^\.]+$/,""):null,base64:e.split(",")[1]});return a.upload(e).then(function(e){var t=n.find("#src");return t.value(e),n.find("tabpanel")[0].activateTab(0),t.fire("change"),u(),e})}).catch(function(e){s.windowManager.alert(e),u()})}},pe=".jpg,.jpeg,.png,.gif",ve={makeTab:function(e){return{title:"Upload",type:"form",layout:"flex",direction:"column",align:"stretch",padding:"20 20 20 20",items:[{type:"container",layout:"flex",direction:"column",align:"center",spacing:10,items:[{text:"Browse for an image",type:"browsebutton",accept:pe,onchange:he(e)},{text:"OR",type:"label"}]},{text:"Drop an image here",type:"dropzone",accept:pe,height:100,onchange:he(e)}]}}},be=function(t,e){var n=e.control.getRoot();L.updateSize(n),t.undoManager.transact(function(){var e=a(B(t),n.toJSON());ee(t,e)}),t.editorUpload.uploadImagesAuto()},ye=function(e){e.addCommand("mceImage",Ne(e).open)},xe=function(e){e=e.attr("class");return e&&/\bimage\b/.test(e)},we=function(o){return function(e){for(var t,n=e.length,r=function(e){e.attr("contenteditable",o?"true":null)};n--;)t=e[n],xe(t)&&(t.attr("contenteditable",o?"false":null),f.each(t.getAll("figcaption"),r))}},Ce=function(e){e.on("preInit",function(){e.parser.addNodeFilter("figure",we(!0)),e.serializer.addNodeFilter("figure",we(!1))})},Se=function(e){e.addButton("image",{icon:"image",tooltip:"Insert/edit image",onclick:Ne(e).open,stateSelector:"img:not([data-mce-object],[data-mce-placeholder]),figure.image"}),e.addMenuItem("image",{icon:"image",text:"Image",onclick:Ne(e).open,context:"insert",prependToContext:!0})},e.add("image",function(e){Ce(e),Se(e),ye(e)})}(window),function(){"use strict";var e,n,o,t,r,i,a,u,s,c,l,f,d,m,g,h,p;e=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=function(e,t){return e.fire("insertCustomChar",{chr:t})},o=function(e,t){t=n(e,t).chr;e.execCommand("mceInsertContent",!1,t)},t=tinymce.util.Tools.resolve("tinymce.util.Tools"),r={getCharMap:function(e){return e.settings.charmap},getCharMapAppend:function(e){return e.settings.charmap_append}},i=t.isArray,a=function(){return[["160","no-break space"],["173","soft hyphen"],["34","quotation mark"],["162","cent sign"],["8364","euro sign"],["163","pound sign"],["165","yen sign"],["169","copyright sign"],["174","registered sign"],["8482","trade mark sign"],["8240","per mille sign"],["181","micro sign"],["183","middle dot"],["8226","bullet"],["8230","three dot leader"],["8242","minutes / feet"],["8243","seconds / inches"],["167","section sign"],["182","paragraph sign"],["223","sharp s / ess-zed"],["8249","single left-pointing angle quotation mark"],["8250","single right-pointing angle quotation mark"],["171","left pointing guillemet"],["187","right pointing guillemet"],["8216","left single quotation mark"],["8217","right single quotation mark"],["8220","left double quotation mark"],["8221","right double quotation mark"],["8218","single low-9 quotation mark"],["8222","double low-9 quotation mark"],["60","less-than sign"],["62","greater-than sign"],["8804","less-than or equal to"],["8805","greater-than or equal to"],["8211","en dash"],["8212","em dash"],["175","macron"],["8254","overline"],["164","currency sign"],["166","broken bar"],["168","diaeresis"],["161","inverted exclamation mark"],["191","turned question mark"],["710","circumflex accent"],["732","small tilde"],["176","degree sign"],["8722","minus sign"],["177","plus-minus sign"],["247","division sign"],["8260","fraction slash"],["215","multiplication sign"],["185","superscript one"],["178","superscript two"],["179","superscript three"],["188","fraction one quarter"],["189","fraction one half"],["190","fraction three quarters"],["402","function / florin"],["8747","integral"],["8721","n-ary sumation"],["8734","infinity"],["8730","square root"],["8764","similar to"],["8773","approximately equal to"],["8776","almost equal to"],["8800","not equal to"],["8801","identical to"],["8712","element of"],["8713","not an element of"],["8715","contains as member"],["8719","n-ary product"],["8743","logical and"],["8744","logical or"],["172","not sign"],["8745","intersection"],["8746","union"],["8706","partial differential"],["8704","for all"],["8707","there exists"],["8709","diameter"],["8711","backward difference"],["8727","asterisk operator"],["8733","proportional to"],["8736","angle"],["180","acute accent"],["184","cedilla"],["170","feminine ordinal indicator"],["186","masculine ordinal indicator"],["8224","dagger"],["8225","double dagger"],["192","A - grave"],["193","A - acute"],["194","A - circumflex"],["195","A - tilde"],["196","A - diaeresis"],["197","A - ring above"],["256","A - macron"],["198","ligature AE"],["199","C - cedilla"],["200","E - grave"],["201","E - acute"],["202","E - circumflex"],["203","E - diaeresis"],["274","E - macron"],["204","I - grave"],["205","I - acute"],["206","I - circumflex"],["207","I - diaeresis"],["298","I - macron"],["208","ETH"],["209","N - tilde"],["210","O - grave"],["211","O - acute"],["212","O - circumflex"],["213","O - tilde"],["214","O - diaeresis"],["216","O - slash"],["332","O - macron"],["338","ligature OE"],["352","S - caron"],["217","U - grave"],["218","U - acute"],["219","U - circumflex"],["220","U - diaeresis"],["362","U - macron"],["221","Y - acute"],["376","Y - diaeresis"],["562","Y - macron"],["222","THORN"],["224","a - grave"],["225","a - acute"],["226","a - circumflex"],["227","a - tilde"],["228","a - diaeresis"],["229","a - ring above"],["257","a - macron"],["230","ligature ae"],["231","c - cedilla"],["232","e - grave"],["233","e - acute"],["234","e - circumflex"],["235","e - diaeresis"],["275","e - macron"],["236","i - grave"],["237","i - acute"],["238","i - circumflex"],["239","i - diaeresis"],["299","i - macron"],["240","eth"],["241","n - tilde"],["242","o - grave"],["243","o - acute"],["244","o - circumflex"],["245","o - tilde"],["246","o - diaeresis"],["248","o slash"],["333","o macron"],["339","ligature oe"],["353","s - caron"],["249","u - grave"],["250","u - acute"],["251","u - circumflex"],["252","u - diaeresis"],["363","u - macron"],["253","y - acute"],["254","thorn"],["255","y - diaeresis"],["563","y - macron"],["913","Alpha"],["914","Beta"],["915","Gamma"],["916","Delta"],["917","Epsilon"],["918","Zeta"],["919","Eta"],["920","Theta"],["921","Iota"],["922","Kappa"],["923","Lambda"],["924","Mu"],["925","Nu"],["926","Xi"],["927","Omicron"],["928","Pi"],["929","Rho"],["931","Sigma"],["932","Tau"],["933","Upsilon"],["934","Phi"],["935","Chi"],["936","Psi"],["937","Omega"],["945","alpha"],["946","beta"],["947","gamma"],["948","delta"],["949","epsilon"],["950","zeta"],["951","eta"],["952","theta"],["953","iota"],["954","kappa"],["955","lambda"],["956","mu"],["957","nu"],["958","xi"],["959","omicron"],["960","pi"],["961","rho"],["962","final sigma"],["963","sigma"],["964","tau"],["965","upsilon"],["966","phi"],["967","chi"],["968","psi"],["969","omega"],["8501","alef symbol"],["982","pi symbol"],["8476","real part symbol"],["978","upsilon - hook symbol"],["8472","Weierstrass p"],["8465","imaginary part"],["8592","leftwards arrow"],["8593","upwards arrow"],["8594","rightwards arrow"],["8595","downwards arrow"],["8596","left right arrow"],["8629","carriage return"],["8656","leftwards double arrow"],["8657","upwards double arrow"],["8658","rightwards double arrow"],["8659","downwards double arrow"],["8660","left right double arrow"],["8756","therefore"],["8834","subset of"],["8835","superset of"],["8836","not a subset of"],["8838","subset of or equal to"],["8839","superset of or equal to"],["8853","circled plus"],["8855","circled times"],["8869","perpendicular"],["8901","dot operator"],["8968","left ceiling"],["8969","right ceiling"],["8970","left floor"],["8971","right floor"],["9001","left-pointing angle bracket"],["9002","right-pointing angle bracket"],["9674","lozenge"],["9824","black spade suit"],["9827","black club suit"],["9829","black heart suit"],["9830","black diamond suit"],["8194","en space"],["8195","em space"],["8201","thin space"],["8204","zero width non-joiner"],["8205","zero width joiner"],["8206","left-to-right mark"],["8207","right-to-left mark"]]},u=function(e){return t.grep(e,function(e){return i(e)&&2===e.length})},s=function(e){return i(e)?[].concat(u(e)):"function"==typeof e?e():[]},c=function(e,t){var n=r.getCharMap(e);return n&&(t=s(n)),(n=r.getCharMapAppend(e))?[].concat(t).concat(s(n)):t},l=function(e){return c(e,a())},f=function(t){return{getCharMap:function(){return l(t)},insertChar:function(e){o(t,e)}}},d=function(e){for(var t,n,r,o,i=Math.min(e.length,25),a=Math.ceil(e.length/i),u='<table role="presentation" cellspacing="0" class="mce-charmap"><tbody>',s=0;s<a;s++){for(u+="<tr>",t=0;t<i;t++)(n=s*i+t)<e.length?(n=e[n],r=parseInt(n[0],10),o=n?String.fromCharCode(r):"&nbsp;",u+='<td title="'+n[1]+'"><div tabindex="-1" title="'+n[1]+'" role="button" data-chr="'+r+'">'+o+"</div></td>"):u+="<td />";u+="</tr>"}return u+="</tbody></table>"},m=function(e){for(;e;){if("TD"===e.nodeName)return e;e=e.parentNode}},g=function(n){var e={type:"container",html:d(l(n)),onclick:function(e){var t=e.target;/^(TD|DIV)$/.test(t.nodeName)&&(t=m(t).firstChild)&&t.hasAttribute("data-chr")&&(t=t.getAttribute("data-chr"),t=parseInt(t,10),isNaN(t)||o(n,String.fromCharCode(t)),e.ctrlKey||r.close())},onmouseover:function(e){e=m(e.target);e&&e.firstChild?(r.find("#preview").text(e.firstChild.firstChild.data),r.find("#previewTitle").text(e.title)):(r.find("#preview").text(" "),r.find("#previewTitle").text(" "))}},r=n.windowManager.open({title:"Special character",spacing:10,padding:10,items:[e,{type:"container",layout:"flex",direction:"column",align:"center",spacing:5,minWidth:160,minHeight:160,items:[{type:"label",name:"preview",text:" ",style:"font-size: 40px; text-align: center",border:1,minWidth:140,minHeight:80},{type:"spacer",minHeight:20},{type:"label",name:"previewTitle",text:" ",style:"white-space: pre-wrap;",border:1,minWidth:140}]}],buttons:[{text:"Close",onclick:function(){r.close()}}]})},h=function(e){e.addCommand("mceShowCharmap",function(){g(e)})},p=function(e){e.addButton("charmap",{icon:"charmap",tooltip:"Special character",cmd:"mceShowCharmap"}),e.addMenuItem("charmap",{icon:"charmap",text:"Special character",cmd:"mceShowCharmap",context:"insert"})},e.add("charmap",function(e){return h(e),p(e),f(e)})}(),function(){"use strict";var e,r,o,t,n,i,a,u,s;e=tinymce.util.Tools.resolve("tinymce.PluginManager"),r={isValidId:function(e){return/^[A-Za-z][A-Za-z0-9\-:._]*$/.test(e)},getId:function(e){var t=e.selection.getNode();return"A"===t.tagName&&""===e.dom.getAttrib(t,"href")?t.id||t.name:""},insert:function(e,t){var n=e.selection.getNode();"A"===n.tagName&&""===e.dom.getAttrib(n,"href")?(n.removeAttribute("name"),n.id=t,e.undoManager.add()):(e.focus(),e.selection.collapse(!0),e.execCommand("mceInsertContent",!1,e.dom.createHTML("a",{id:t})))}},o=function(e,t){return r.isValidId(t)?(r.insert(e,t),!1):(e.windowManager.alert("Id should start with a letter, followed only by letters, numbers, dashes, dots, colons or underscores."),!0)},t=function(n){var e=r.getId(n);n.windowManager.open({title:"Anchor",body:{type:"textbox",name:"id",size:40,label:"Id",value:e},onsubmit:function(e){var t=e.data.id;o(n,t)&&e.preventDefault()}})},n=function(e){e.addCommand("mceAnchor",function(){t(e)})},i=function(e){return!e.attr("href")&&(e.attr("id")||e.attr("name"))&&!e.firstChild},a=function(n){return function(e){for(var t=0;t<e.length;t++)i(e[t])&&e[t].attr("contenteditable",n)}},u=function(e){e.on("PreInit",function(){e.parser.addNodeFilter("a",a("false")),e.serializer.addNodeFilter("a",a(null))})},s=function(e){e.addButton("anchor",{icon:"anchor",tooltip:"Anchor",cmd:"mceAnchor",stateSelector:"a:not([href])"}),e.addMenuItem("anchor",{icon:"anchor",text:"Anchor",context:"insert",cmd:"mceAnchor"})},e.add("anchor",function(e){u(e),n(e),s(e)})}(),function(){"use strict";var n,e,m,i,g,a,h,u,s,p,v,b,y,c,x,w,l,f,d,t,C,S,r,o,k,T,N,E;function R(e){return e&&1===e.nodeType&&"false"===e.contentEditable}n=function(e){var t=e,e=function(){return t};return{get:e,set:function(e){t=e},clone:function(){return n(t)}}},e=tinymce.util.Tools.resolve("tinymce.PluginManager"),m=tinymce.util.Tools.resolve("tinymce.util.Tools"),i={findAndReplaceDOMText:function(e,t,n,r,o){var i,a,u,m,s,c,l,f,g,d,h,p,v,b,y,x,w,C,S,k,T,N;function E(e,t){var n;if(t=t||0,!e[0])throw new Error("findAndReplaceDOMText cannot handle zero-length matches");if(n=e.index,0<t){if(!(t=e[t]))throw new Error("Invalid capture group");n+=e[0].indexOf(t),e[0]=t}return[n,n+e[0].length,[e[0]]]}if(a=[],b=0,m=t.ownerDocument,s=o.getBlockElements(),c=o.getWhiteSpaceElements(),l=o.getShortEndedElements(),u=function e(t){var n;if(3===t.nodeType)return t.data;if(c[t.nodeName]&&!s[t.nodeName])return"";if(n="",R(t))return"\n";if((s[t.nodeName]||l[t.nodeName])&&(n+="\n"),t=t.firstChild)for(;n+=e(t),t=t.nextSibling;);return n}(t)){if(e.global)for(;i=e.exec(u);)a.push(E(i,r));else i=u.match(e),a.push(E(i,r));if(a.length){b=a.length,y=t,x=a,w=(g="function"!=typeof(o=n)?(f=o.nodeType?o:m.createElement(o),function(e,t){var n=f.cloneNode(!1);return n.setAttribute("data-mce-index",t),e&&n.appendChild(m.createTextNode(e)),n}):o,function(e){var t,n,r,o,i,a,u,s,c,l=e.startNode,f=e.endNode,d=e.matchIndex;if(l===f)return r=(o=l).parentNode,0<e.startNodeIndex&&(t=m.createTextNode(o.data.substring(0,e.startNodeIndex)),r.insertBefore(t,o)),c=g(e.match[0],d),r.insertBefore(c,o),e.endNodeIndex<o.length&&(n=m.createTextNode(o.data.substring(e.endNodeIndex)),r.insertBefore(n,o)),o.parentNode.removeChild(o),c;for(t=m.createTextNode(l.data.substring(0,e.startNodeIndex)),n=m.createTextNode(f.data.substring(e.endNodeIndex)),o=g(l.data.substring(e.startNodeIndex),d),i=0,a=e.innerNodes.length;i<a;++i)u=e.innerNodes[i],s=g(u.data,d),u.parentNode.replaceChild(s,u);return c=g(f.data.substring(0,e.endNodeIndex),d),(r=l.parentNode).insertBefore(t,l),r.insertBefore(o,l),r.removeChild(l),(r=f.parentNode).insertBefore(c,f),r.insertBefore(n,f),r.removeChild(f),c}),C=[],S=0,k=y,T=x.shift(),N=0;e:for(;;){if((s[k.nodeName]||l[k.nodeName]||R(k))&&S++,3===k.nodeType&&(!h&&k.length+S>=T[1]?(h=k,v=T[1]-S):d&&C.push(k),!d&&k.length+S>T[0]&&(d=k,p=T[0]-S),S+=k.length),d&&h){if(k=w({startNode:d,startNodeIndex:p,endNode:h,endNodeIndex:v,innerNodes:C,match:T[2],matchIndex:N}),S-=h.length-v,h=d=null,C=[],N++,!(T=x.shift()))break}else if(c[k.nodeName]&&!s[k.nodeName]||!k.firstChild){if(k.nextSibling){k=k.nextSibling;continue}}else if(!R(k)){k=k.firstChild;continue}for(;;){if(k.nextSibling){k=k.nextSibling;break}if(k.parentNode===y)break e;k=k.parentNode}}}return b}}},g=function(e){e=e.getAttribute("data-mce-index");return"number"==typeof e?""+e:e},a=function(e,t,n){var r,o=e.dom.create("span",{"data-mce-bogus":1});return o.className="mce-match-marker",r=e.getBody(),c(e,t,!1),i.findAndReplaceDOMText(n,r,o,!1,e.schema)},h=function(e){var t=e.parentNode;e.firstChild&&t.insertBefore(e.firstChild,e),e.parentNode.removeChild(e)},u=function(e,t){var n,r,o=[],i=m.toArray(e.getBody().getElementsByTagName("span"));if(i.length)for(n=0;n<i.length;n++)null!==(r=g(i[n]))&&r.length&&r===t.toString()&&o.push(i[n]);return o},s=function(e,t,n){var r=t.get(),o=e.dom;return(n=!1!==n)?r++:r--,o.removeClass(u(e,t.get()),"mce-match-marker-selected"),(n=u(e,r)).length?(o.addClass(u(e,r),"mce-match-marker-selected"),e.selection.scrollIntoView(n[0]),r):-1},p=function(e,t){var n=t.parentNode;e.remove(t),e.isEmpty(n)&&e.remove(n)},y=function(e){e=g(e);return null!==e&&0<e.length},l=c=function(e,t,n){for(var r,o,i,a,u=m.toArray(e.getBody().getElementsByTagName("span")),s=0;s<u.length;s++)null!==(i=g(u[s]))&&i.length&&(i===t.get().toString()&&(r=r||u[s].firstChild,o=u[s].firstChild),h(u[s]));if(r&&o)return(a=e.dom.createRng()).setStart(r,0),a.setEnd(o,o.data.length),!1!==n&&e.selection.setRng(a),a},f=function(e,t,n,r,o){n=(n=n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")).replace(/\s/g,"[^\\S\\r\\n]"),n=o?"\\b"+n+"\\b":n;o=a(e,t,new RegExp(n,r?"g":"gi"));return o&&(t.set(-1),t.set(s(e,t,!0))),o},d=v=function(e,t){e=s(e,t,!0);-1!==e&&t.set(e)},t=b=function(e,t){e=s(e,t,!1);-1!==e&&t.set(e)},C=function(e,t,n,r,o){var i,a,u,s,c,l,f,d=t.get();for(r=!1!==r,u=e.getBody(),a=m.grep(m.toArray(u.getElementsByTagName("span")),y),i=0;i<a.length;i++)if(f=g(a[i]),s=c=parseInt(f,10),o||s===t.get()){for(n.length?(a[i].firstChild.nodeValue=n,h(a[i])):p(e.dom,a[i]);a[++i];){if((s=parseInt(g(a[i]),10))!==c){i--;break}p(e.dom,a[i])}r&&d--}else c>t.get()&&a[i].setAttribute("data-mce-index",c-1);return t.set(d),(r?(l=x(e,t),v):(l=w(e,t),b))(e,t),!o&&l},S=x=function(e,t){return 0<u(e,t.get()+1).length},r=w=function(e,t){return 0<u(e,t.get()-1).length},o=function(r,o){return{done:function(e){return l(r,o,e)},find:function(e,t,n){return f(r,o,e,t,n)},next:function(){return d(r,o)},prev:function(){return t(r,o)},replace:function(e,t,n){return C(r,o,e,t,n)}}},k={open:function(o,i){var a,e,u;function s(){u.statusbar.find("#next").disabled(!1===S(o,i)),u.statusbar.find("#prev").disabled(!1===r(o,i))}function c(){o.windowManager.alert("Could not find the specified string.",function(){u.find("#find")[0].focus()})}a={},o.undoManager.add(),e=m.trim(o.selection.getContent({format:"text"})),u=o.windowManager.open({layout:"flex",pack:"center",align:"center",onClose:function(){o.focus(),l(o,i),o.undoManager.add()},onSubmit:function(e){var t,n,r;if(e.preventDefault(),e=u.find("#case").checked(),r=u.find("#words").checked(),(n=u.find("#find").value()).length){if(a.text===n&&a.caseState===e&&a.wholeWord===r)return S(o,i)?(d(o,i),void s()):void c();(t=f(o,i,n,e,r))||c(),u.statusbar.items().slice(1).disabled(0===t),s(),a={text:n,caseState:e,wholeWord:r}}else l(o,i,!1),u.statusbar.items().slice(1).disabled(!0)},buttons:[{text:"Find",subtype:"primary",onclick:function(){u.submit()}},{text:"Replace",disabled:!0,onclick:function(){C(o,i,u.find("#replace").value())||(u.statusbar.items().slice(1).disabled(!0),i.set(-1),a={})}},{text:"Replace all",disabled:!0,onclick:function(){C(o,i,u.find("#replace").value(),!0,!0),u.statusbar.items().slice(1).disabled(!0),a={}}},{type:"spacer",flex:1},{text:"Prev",name:"prev",disabled:!0,onclick:function(){t(o,i),s()}},{text:"Next",name:"next",disabled:!0,onclick:function(){d(o,i),s()}}],title:"Find and replace",items:{type:"form",padding:20,labelGap:30,spacing:10,items:[{type:"textbox",name:"find",size:40,label:"Find",value:e},{type:"textbox",name:"replace",size:40,label:"Replace with"},{type:"checkbox",name:"case",text:"Match case",label:" "},{type:"checkbox",name:"words",text:"Whole words",label:" "}]}})}},T=function(e,t){e.addCommand("SearchReplace",function(){k.open(e,t)})},N=function(e,t){return function(){k.open(e,t)}},E=function(e,t){e.addMenuItem("searchreplace",{text:"Find and replace",shortcut:"Meta+F",onclick:N(e,t),separator:"before",context:"edit"}),e.addButton("searchreplace",{tooltip:"Find and replace",onclick:N(e,t)}),e.shortcuts.add("Meta+F","",N(e,t))},e.add("searchreplace",function(e){var t=n(-1);return T(e,t),E(e,t),o(e,t)})}(),function(){"use strict";var e,t,r,o,i,a,n,u,s;e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),r=function(e){return e.getParam("code_dialog_width",600)},o=function(e){return e.getParam("code_dialog_height",Math.min(t.DOM.getViewPort().h-200,500))},i=function(e,t){e.focus(),e.undoManager.transact(function(){e.setContent(t)}),e.selection.setCursorLocation(),e.nodeChanged()},a=function(e){return e.getContent({source_view:!0})},n=function(t){var e=r(t),n=o(t);t.windowManager.open({title:"Source code",body:{type:"textbox",name:"code",multiline:!0,minWidth:e,minHeight:n,spellcheck:!1,style:"direction: ltr; text-align: left"},onSubmit:function(e){i(t,e.data.code)}}).find("#code").value(a(t))},u=function(e){e.addCommand("mceCodeEditor",function(){n(e)})},s=function(e){e.addButton("code",{icon:"code",tooltip:"Source code",onclick:function(){n(e)}}),e.addMenuItem("code",{icon:"code",text:"Source code",onclick:function(){n(e)}})},e.add("code",function(e){return u(e),s(e),{}})}(),function(r){"use strict";var e,o,t,n,i,x,a,u,s,c,w,l,f,d,m,g,h,p,C,v,b,S,y,k,T,N,E,R,_,A,D,I,P,O,B,L,F,M,H,z,U,W,j,V;e=tinymce.util.Tools.resolve("tinymce.PluginManager"),o=tinymce.util.Tools.resolve("tinymce.util.VK"),x={assumeExternalTargets:function(e){return"boolean"==typeof e.link_assume_external_targets&&e.link_assume_external_targets},hasContextToolbar:function(e){return"boolean"==typeof e.link_context_toolbar&&e.link_context_toolbar},getLinkList:function(e){return e.link_list},hasDefaultLinkTarget:function(e){return"string"==typeof e.default_link_target},getDefaultLinkTarget:function(e){return e.default_link_target},getTargetList:t=function(e){return e.target_list},setTargetList:function(e,t){e.settings.target_list=t},shouldShowTargetList:function(e){return!1!==t(e)},getRelList:n=function(e){return e.rel_list},hasRelList:function(e){return void 0!==n(e)},getLinkClassList:i=function(e){return e.link_class_list},hasLinkClassList:function(e){return void 0!==i(e)},shouldShowLinkTitle:function(e){return!1!==e.link_title},allowUnsafeLinkTarget:function(e){return"boolean"==typeof e.allow_unsafe_link_target&&e.allow_unsafe_link_target}},a=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),u=tinymce.util.Tools.resolve("tinymce.Env"),s=function(e,t){r.document.body.appendChild(e),e.dispatchEvent(t),r.document.body.removeChild(e)},c={open:function(e){var t,n;!u.ie||10<u.ie?((t=r.document.createElement("a")).target="_blank",t.href=e,t.rel="noreferrer noopener",(n=r.document.createEvent("MouseEvents")).initMouseEvent("click",!0,!0,r.window,0,0,0,0,0,!1,!1,!1,!1,0,null),s(t,n)):(t=r.window.open("","_blank"))&&(t.opener=null,(n=t.document).open(),n.write('<meta http-equiv="refresh" content="0; url='+a.DOM.encode(e)+'">'),n.close())}},w=tinymce.util.Tools.resolve("tinymce.util.Tools"),f=function(e){return e.replace(/\uFEFF/g,"")},g=function(e){return e&&"FIGURE"===e.nodeName&&/\bimage\b/i.test(e.className)},h=function(e,t){var n=e.dom.select("img",t)[0];n&&(t=e.dom.getParents(n,"a[href]",t)[0])&&(t.parentNode.insertBefore(n,t),e.dom.remove(t))},p=function(e,t,n){t=e.dom.select("img",t)[0];t&&(e=e.dom.create("a",n),t.parentNode.insertBefore(e,t),e.appendChild(t))},C={link:function(o,i){return function(r){o.undoManager.transact(function(){var e=o.selection.getNode(),t=d(o,e),n={href:r.href,target:r.target||null,rel:r.rel||null,class:r.class||null,title:r.title||null};x.hasRelList(o.settings)||!1!==x.allowUnsafeLinkTarget(o.settings)||(n.rel=l(n.rel,"_blank"===n.target)),r.href===i.href&&(i.attach(),i={}),t?(o.focus(),r.hasOwnProperty("text")&&("innerText"in t?t.innerText=r.text:t.textContent=r.text),o.dom.setAttribs(t,n),o.selection.select(t),o.undoManager.add()):g(e)?p(o,e,n):r.hasOwnProperty("text")?o.insertContent(o.dom.createHTML("a",n,o.dom.encode(r.text))):o.execCommand("mceInsertLink",!1,n)})}},unlink:function(t){return function(){t.undoManager.transact(function(){var e=t.selection.getNode();g(e)?h(t,e):t.execCommand("unlink")})}},isLink:m=function(e){return e&&"A"===e.nodeName&&e.href},hasLinks:function(e){return 0<w.grep(e,m).length},isOnlyTextSelected:function(e){return!(/</.test(e)&&(!/^<a [^>]+>[^<]+<\/a>$/.test(e)||-1===e.indexOf("href=")))},getAnchorElement:d=function(e,t){return t=t||e.selection.getNode(),g(t)?e.dom.select("a[href]",t)[0]:e.dom.getParent(t,"a[href]")},getAnchorText:function(e,t){t=t?t.innerText||t.textContent:e.getContent({format:"text"});return f(t)},toggleTargetRules:l=function(e,t){var n=["noopener"],e=e?e.split(/\s+/):[],r=function(e){return w.trim(e.sort().join(" "))},o=function(e){return e.filter(function(e){return-1===w.inArray(n,e)})};return(e=(t?function(e){return(e=o(e)).length?e.concat(n):n}:o)(e)).length?r(e):null}},v=tinymce.util.Tools.resolve("tinymce.util.Delay"),b=tinymce.util.Tools.resolve("tinymce.util.XHR"),S={},y=function(t,n){var e=x.getLinkList(t.settings);"string"==typeof e?b.send({url:e,success:function(e){n(t,JSON.parse(e))}}):"function"==typeof e?e(function(e){n(t,e)}):n(t,e)},k=function(e,r,t){function o(e,n){return n=n||[],w.each(e,function(e){var t={text:e.text||e.title};e.menu?t.menu=o(e.menu):(t.value=e.value,r&&r(t)),n.push(t)}),n}return o(e,t||[])},T=function(t,e,n){var r=t.selection.getRng();v.setEditorTimeout(t,function(){t.windowManager.confirm(e,function(e){t.selection.setRng(r),n(e)})})},N=function(a,e){var u,r,t,n,o,i,s,c,l,f={},d=a.selection,m=a.dom,g=function(e){var t=r.find("#text");(!t.value()||e.lastControl&&t.value()===e.lastControl.text())&&t.value(e.control.text()),r.find("#href").value(e.control.value())},h=function(t){var n=[];if(w.each(a.dom.select("a:not([href])"),function(e){e=e.name||e.id;e&&n.push({text:e,value:"#"+e,selected:-1!==t.indexOf("#"+e)})}),n.length)return n.unshift({text:"None",value:""}),{name:"anchor",type:"listbox",label:"Anchors",values:n,onselect:g}},p=function(){u||!y||f.text||this.parent().parent().find("#text")[0].value(this.value())},v=function(e){var t=e.meta||{};n&&n.value(a.convertURL(this.value(),"href")),w.each(e.meta,function(e,t){var n=r.find("#"+t);"text"===t?0===u.length&&(n.value(e),f.text=e):n.value(e)}),t.attach&&(S={href:this.value(),attach:t.attach}),t.text||p.call(this)},b=function(e){e.meta=r.toJSON()},y=C.isOnlyTextSelected(d.getContent()),d=C.getAnchorElement(a);f.text=u=C.getAnchorText(a.selection,d),f.href=d?m.getAttrib(d,"href"):"",d?f.target=m.getAttrib(d,"target"):x.hasDefaultLinkTarget(a.settings)&&(f.target=x.getDefaultLinkTarget(a.settings)),(l=m.getAttrib(d,"rel"))&&(f.rel=l),(l=m.getAttrib(d,"class"))&&(f.class=l),(l=m.getAttrib(d,"title"))&&(f.title=l),y&&(t={name:"text",type:"textbox",size:40,label:"Text to display",onchange:function(){f.text=this.value()}}),e&&(n={type:"listbox",label:"Link list",values:k(e,function(e){e.value=a.convertURL(e.value||e.url,"href")},[{text:"None",value:""}]),onselect:g,value:a.convertURL(f.href,"href"),onPostRender:function(){n=this}}),x.shouldShowTargetList(a.settings)&&(void 0===x.getTargetList(a.settings)&&x.setTargetList(a,[{text:"None",value:""},{text:"New window",value:"_blank"}]),i={name:"target",type:"listbox",label:"Target",values:k(x.getTargetList(a.settings))}),x.hasRelList(a.settings)&&(o={name:"rel",type:"listbox",label:"Rel",values:k(x.getRelList(a.settings),function(e){!1===x.allowUnsafeLinkTarget(a.settings)&&(e.value=C.toggleTargetRules(e.value,"_blank"===f.target))})}),x.hasLinkClassList(a.settings)&&(s={name:"class",type:"listbox",label:"Class",values:k(x.getLinkClassList(a.settings),function(e){e.value&&(e.textStyle=function(){return a.formatter.getCssText({inline:"a",classes:[e.value]})})})}),x.shouldShowLinkTitle(a.settings)&&(c={name:"title",type:"textbox",label:"Title",value:f.title}),r=a.windowManager.open({title:"Insert link",data:f,body:[{name:"href",type:"filepicker",filetype:"file",size:40,autofocus:!0,label:"Url",onchange:v,onkeyup:p,onpaste:p,onbeforecall:b},t,c,h(f.href),n,o,i,s],onSubmit:function(e){var t=x.assumeExternalTargets(a.settings),n=C.link(a,S),r=C.unlink(a),o=w.extend({},f,e.data),i=o.href;i?(y&&o.text!==u||delete o.text,0<i.indexOf("@")&&-1===i.indexOf("//")&&-1===i.indexOf("mailto:")?T(a,"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",function(e){e&&(o.href="mailto:"+i),n(o)}):!0===t&&!/^\w+:/i.test(i)||!1===t&&/^\s*www[\.|\d\.]/i.test(i)?T(a,"The URL you entered seems to be an external link. Do you want to add the required http:// prefix?",function(e){e&&(o.href="http://"+i),n(o)}):n(o)):r()}})},E=function(e){y(e,N)},R=function(e,t){return e.dom.getParent(t,"a[href]")},_=function(e){return R(e,e.selection.getStart())},A=function(e){var t=e.getAttribute("data-mce-href");return t||e.getAttribute("href")},D=function(e){e=e.plugins.contextmenu;return!!e&&e.isContextMenuVisible()},I=function(e){return!0===e.altKey&&!1===e.shiftKey&&!1===e.ctrlKey&&!1===e.metaKey},P=function(e,t){var n;t&&(n=A(t),/^#/.test(n)?(n=e.$(n)).length&&e.selection.scrollIntoView(n[0],!0):c.open(t.href))},O=function(e){return function(){E(e)}},B=function(e){return function(){P(e,_(e))}},L=function(r){return function(e){var t,n;return!!(x.hasContextToolbar(r.settings)&&!D(r)&&C.isLink(e)&&3===(n=(t=(e=r.selection).getRng()).startContainer).nodeType&&e.isCollapsed()&&0<t.startOffset&&t.startOffset<n.data.length)}},F=function(n){n.on("click",function(e){var t=R(n,e.target);t&&o.metaKeyPressed(e)&&(e.preventDefault(),P(n,t))}),n.on("keydown",function(e){var t=_(n);t&&13===e.keyCode&&I(e)&&(e.preventDefault(),P(n,t))})},M=function(n){return function(){var t=this;n.on("nodechange",function(e){t.active(!n.readonly&&!!C.getAnchorElement(n,e.element))})}},H=function(n){return function(){var t=this,e=function(e){C.hasLinks(e.parents)?t.show():t.hide()};C.hasLinks(n.dom.getParents(n.selection.getStart()))||t.hide(),n.on("nodechange",e),t.on("remove",function(){n.off("nodechange",e)})}},z=function(e){e.addCommand("mceLink",O(e))},U=function(e){e.addShortcut("Meta+K","",O(e))},W=function(e){e.addButton("link",{active:!1,icon:"link",tooltip:"Insert/edit link",onclick:O(e),onpostrender:M(e)}),e.addButton("unlink",{active:!1,icon:"unlink",tooltip:"Remove link",onclick:C.unlink(e),onpostrender:M(e)}),e.addContextToolbar&&e.addButton("openlink",{icon:"newtab",tooltip:"Open link",onclick:B(e)})},j=function(e){e.addMenuItem("openlink",{text:"Open link",icon:"newtab",onclick:B(e),onPostRender:H(e),prependToContext:!0}),e.addMenuItem("link",{icon:"link",text:"Link",shortcut:"Meta+K",onclick:O(e),stateSelector:"a[href]",context:"insert",prependToContext:!0}),e.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onclick:C.unlink(e),stateSelector:"a[href]"})},V=function(e){e.addContextToolbar&&e.addContextToolbar(L(e),"openlink | link unlink")},e.add("link",function(e){W(e),j(e),V(e),F(e),z(e),U(e)})}(window),function(){"use strict";var e,m,t,g,s,n,r,o,i,a,c,h,u,l,f,d,p,v;e=tinymce.util.Tools.resolve("tinymce.PluginManager"),m={getCurrentColor:function(e,t){var n;return e.dom.getParents(e.selection.getStart(),function(e){(e=e.style["forecolor"===t?"color":"background-color"])&&(n=n||e)}),n},mapColors:function(e){for(var t=[],n=0;n<e.length;n+=2)t.push({text:e[n+1],color:"#"+e[n]});return t},applyFormat:function(e,t,n){e.undoManager.transact(function(){e.focus(),e.formatter.apply(t,{value:n}),e.nodeChanged()})},removeFormat:function(e,t){e.undoManager.transact(function(){e.focus(),e.formatter.remove(t,{value:null},null,!0),e.nodeChanged()})}},t=function(n){n.addCommand("mceApplyTextcolor",function(e,t){m.applyFormat(n,e,t)}),n.addCommand("mceRemoveTextcolor",function(e){m.removeFormat(n,e)})},g=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),s=tinymce.util.Tools.resolve("tinymce.util.Tools"),n=["000000","Black","993300","Burnt orange","333300","Dark olive","003300","Dark green","003366","Dark azure","000080","Navy Blue","333399","Indigo","333333","Very dark gray","800000","Maroon","FF6600","Orange","808000","Olive","008000","Green","008080","Teal","0000FF","Blue","666699","Grayish blue","808080","Gray","FF0000","Red","FF9900","Amber","99CC00","Yellow green","339966","Sea green","33CCCC","Turquoise","3366FF","Royal blue","800080","Purple","999999","Medium gray","FF00FF","Magenta","FFCC00","Gold","FFFF00","Yellow","00FF00","Lime","00FFFF","Aqua","00CCFF","Sky blue","993366","Red violet","FFFFFF","White","FF99CC","Pink","FFCC99","Peach","FFFF99","Light yellow","CCFFCC","Pale green","CCFFFF","Pale cyan","99CCFF","Light sky blue","CC99FF","Plum"],r=function(e){return e.getParam("textcolor_map",n)},o=function(e){return e.getParam("textcolor_rows",5)},i=function(e){return e.getParam("textcolor_cols",8)},c={getForeColorMap:function(e){return e.getParam("forecolor_map",r(e))},getBackColorMap:function(e){return e.getParam("backcolor_map",r(e))},getForeColorRows:function(e){return e.getParam("forecolor_rows",o(e))},getBackColorRows:function(e){return e.getParam("backcolor_rows",o(e))},getForeColorCols:function(e){return e.getParam("forecolor_cols",i(e))},getBackColorCols:function(e){return e.getParam("backcolor_cols",i(e))},getColorPickerCallback:a=function(e){return e.getParam("color_picker_callback",null)},hasColorPicker:function(e){return"function"==typeof a(e)}},h=tinymce.util.Tools.resolve("tinymce.util.I18n"),u={getHtml:function(e,t,n,r){var o,i,a,u,s,c=0,l=g.DOM.uniqueId("mcearia"),f=function(e,t){var n="transparent"===e;return'<td class="mce-grid-cell'+(n?" mce-colorbtn-trans":"")+'"><div id="'+l+"-"+c+++'" data-mce-color="'+(e||"")+'" role="option" tabIndex="-1" style="'+(e?"background-color: "+e:"")+'" title="'+h.translate(t)+'">'+(n?"&#215;":"")+"</div></td>"},d=m.mapColors(n);for(d.push({text:h.translate("No color"),color:"transparent"}),o='<table class="mce-grid mce-grid-border mce-colorbutton-grid" role="list" cellspacing="0"><tbody>',i=d.length-1,u=0;u<t;u++){for(o+="<tr>",a=0;a<e;a++)o+=i<(s=u*e+a)?"<td></td>":f((s=d[s]).color,s.text);o+="</tr>"}if(r){for(o=o+('<tr><td colspan="'+e+'" class="mce-custom-color-btn"><div id="'+l+'-c" class="mce-widget mce-btn mce-btn-small mce-btn-flat" role="button" tabindex="-1" aria-labelledby="'+l+'-c" style="width: 100%"><button type="button" role="presentation" tabindex="-1">'+h.translate("Custom...")+"</button></div></td></tr>")+"<tr>",a=0;a<e;a++)o+=f("","Custom color");o+="</tr>"}return o+="</tbody></table>"}},l=function(e,t){e.style.background=t,e.setAttribute("data-mce-color",t)},f=function(t){return function(e){e=e.control;e._color?t.execCommand("mceApplyTextcolor",e.settings.format,e._color):t.execCommand("mceRemoveTextcolor",e.settings.format)}},d=function(r,u){return function(e){var i=this.parent(),t=m.getCurrentColor(r,i.settings.format),a=function(e){r.execCommand("mceApplyTextcolor",i.settings.format,e),i.hidePanel(),i.color(e)},n=function(){r.execCommand("mceRemoveTextcolor",i.settings.format),i.hidePanel(),i.resetColor()};g.DOM.getParent(e.target,".mce-custom-color-btn")&&(i.hidePanel(),c.getColorPickerCallback(r).call(r,function(e){for(var t,n=i.panel.getEl().getElementsByTagName("table")[0],r=s.map(n.rows[n.rows.length-1].childNodes,function(e){return e.firstChild}),o=0;o<r.length&&(t=r[o]).getAttribute("data-mce-color");o++);if(o===u)for(o=0;o<u-1;o++)l(r[o],r[o+1].getAttribute("data-mce-color"));l(t,e),a(e)},t)),(t=e.target.getAttribute("data-mce-color"))?(this.lastId&&g.DOM.get(this.lastId).setAttribute("aria-selected","false"),e.target.setAttribute("aria-selected",!0),this.lastId=e.target.id,"transparent"===t?n():a(t)):null!==t&&i.hidePanel()}},p=function(o,i){return function(){var e=i?c.getForeColorCols(o):c.getBackColorCols(o),t=i?c.getForeColorRows(o):c.getBackColorRows(o),n=i?c.getForeColorMap(o):c.getBackColorMap(o),r=c.hasColorPicker(o);return u.getHtml(e,t,n,r)}},v=function(e){e.addButton("forecolor",{type:"colorbutton",tooltip:"Text color",format:"forecolor",panel:{role:"application",ariaRemember:!0,html:p(e,!0),onclick:d(e,c.getForeColorCols(e))},onclick:f(e)}),e.addButton("backcolor",{type:"colorbutton",tooltip:"Background color",format:"hilitecolor",panel:{role:"application",ariaRemember:!0,html:p(e,!1),onclick:d(e,c.getBackColorCols(e))},onclick:f(e)})},e.add("textcolor",function(e){t(e),v(e)})}(),function(){"use strict";var e,i,a,u,n,t,s,r,o,c,l,f,d,m,I,L,g,h,p,v,b,y,x,F,H,z,U,w,W,j,V,q,$,Y,X,K,G,C,J,Z,S,k,T,N,Q,ee,E,te,R,ne,re,_,oe,A,ie,ae,D,ue,se,P,O,ce,le,B,M,fe,de,me,ge,he;e=tinymce.util.Tools.resolve("tinymce.PluginManager"),i=tinymce.util.Tools.resolve("tinymce.Env"),a=tinymce.util.Tools.resolve("tinymce.util.Tools"),u={getScripts:function(e){return e.getParam("media_scripts")},getAudioTemplateCallback:function(e){return e.getParam("audio_template_callback")},getVideoTemplateCallback:function(e){return e.getParam("video_template_callback")},hasLiveEmbeds:function(e){return e.getParam("media_live_embeds",!0)},shouldFilterHtml:function(e){return e.getParam("media_filter_html",!0)},getUrlResolver:function(e){return e.getParam("media_url_resolver")},hasAltSource:function(e){return e.getParam("media_alt_source",!0)},hasPoster:function(e){return e.getParam("media_poster",!0)},hasDimensions:function(e){return e.getParam("media_dimensions",!0)}},n=tinymce.util.Tools.resolve("tinymce.html.SaxParser"),t=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),s={getVideoScriptMatch:function(e,t){if(e)for(var n=0;n<e.length;n++)if(-1!==t.indexOf(e[n].filter))return e[n]}},r=function(e){return e.replace(/px$/,"")},o=function(e){return/^[0-9.]+$/.test(e)?e+"px":e},l={getMaxWidth:(c=function(t){return function(e){return e?r(e.style[t]):""}})("maxWidth"),getMaxHeight:c("maxHeight"),setMaxWidth:(c=function(n){return function(e,t){e&&(e.style[n]=o(t))}})("maxWidth"),setMaxHeight:c("maxHeight")},f=t.DOM,d=function(e){return f.getAttrib(e,"data-ephox-embed-iri")},m=function(e){e=f.createFragment(e);return""!==d(e.firstChild)},I=function(r,e){var o={};return n({validate:!1,allow_conditional_comments:!0,special:"script,noscript",start:function(e,t){if(o.source1||"param"!==e||(o.source1=t.map.movie),"iframe"!==e&&"object"!==e&&"embed"!==e&&"video"!==e&&"audio"!==e||(o.type||(o.type=e),o=a.extend(t.map,o)),"script"===e){var n=s.getVideoScriptMatch(r,t.map.src);if(!n)return;o={type:"script",source1:t.map.src,width:n.width,height:n.height}}"source"===e&&(o.source1?o.source2||(o.source2=t.map.src):o.source1=t.map.src),"img"!==e||o.poster||(o.poster=t.map.src)}}).parse(e),o.source1=o.source1||o.src||o.data,o.source2=o.source2||"",o.poster=o.poster||"",o},L=function(e){e=f.createFragment(e).firstChild;return{type:"ephox-embed-iri",source1:d(e),source2:"",poster:"",width:l.getMaxWidth(e),height:l.getMaxHeight(e)}},g={htmlToData:function(e,t){return m(t)?L(t):I(e,t)}},h=tinymce.util.Tools.resolve("tinymce.util.Promise"),p=function(e){e={mp3:"audio/mpeg",wav:"audio/wav",mp4:"video/mp4",webm:"video/webm",ogg:"video/ogg",swf:"application/x-shockwave-flash"}[e.toLowerCase().split(".").pop()];return e||""},v=tinymce.util.Tools.resolve("tinymce.html.Writer"),b=tinymce.util.Tools.resolve("tinymce.html.Schema"),y=t.DOM,x=function(e,t){var n,r,o,i;for(n in t)if(o=""+t[n],e.map[n])for(r=e.length;r--;)(i=e[r]).name===n&&(o?(e.map[n]=o,i.value=o):(delete e.map[n],e.splice(r,1)));else o&&(e.push({name:n,value:o}),e.map[n]=o)},F=function(e){var t=v();return n(t).parse(e),t.getContent()},H=function(e,o,i){var a,u=v(),s=0;return n({validate:!1,allow_conditional_comments:!0,special:"script,noscript",comment:function(e){u.comment(e)},cdata:function(e){u.cdata(e)},text:function(e,t){u.text(e,t)},start:function(e,t,n){switch(e){case"video":case"object":case"embed":case"img":case"iframe":void 0!==o.height&&void 0!==o.width&&x(t,{width:o.width,height:o.height})}if(i)switch(e){case"video":x(t,{poster:o.poster,src:""}),o.source2&&x(t,{src:""});break;case"iframe":x(t,{src:o.source1});break;case"source":if(++s<=2&&(x(t,{src:o["source"+s],type:o["source"+s+"mime"]}),!o["source"+s]))return;break;case"img":if(!o.poster)return;a=!0}u.start(e,t,n)},end:function(e){var t,n,r;if("video"===e&&i)for(t=1;t<=2;t++)o["source"+t]&&((n=[]).map={},s<t)&&(x(n,{src:o["source"+t],type:o["source"+t+"mime"]}),u.start("source",n,!0));o.poster&&"object"===e&&i&&!a&&((r=[]).map={},x(r,{src:o.poster,width:o.width,height:o.height}),u.start("img",r,!0)),u.end(e)}},b({})).parse(e),u.getContent()},z=function(e){e=y.createFragment(e);return""!==y.getAttrib(e.firstChild,"data-ephox-embed-iri")},U=function(e,t){e=y.createFragment(e).firstChild;return l.setMaxWidth(e,t.width),l.setMaxHeight(e,t.height),F(e.outerHTML)},W=[{regex:/youtu\.be\/([\w\-_\?&=.]+)/i,type:"iframe",w:560,h:314,url:"//www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/youtube\.com(.+)v=([^&]+)(&([a-z0-9&=\-_]+))?/i,type:"iframe",w:560,h:314,url:"//www.youtube.com/embed/$2?$4",allowFullscreen:!0},{regex:/youtube.com\/embed\/([a-z0-9\?&=\-_]+)/i,type:"iframe",w:560,h:314,url:"//www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)/,type:"iframe",w:425,h:350,url:"//player.vimeo.com/video/$1?title=0&byline=0&portrait=0&color=8dc7dc",allowFullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)/,type:"iframe",w:425,h:350,url:"//player.vimeo.com/video/$2?title=0&amp;byline=0",allowFullscreen:!0},{regex:/maps\.google\.([a-z]{2,3})\/maps\/(.+)msid=(.+)/,type:"iframe",w:425,h:350,url:'//maps.google.com/maps/ms?msid=$2&output=embed"',allowFullscreen:!(w={updateHtml:function(e,t,n){return z(e)?U(e,t):H(e,t,n)}})},{regex:/dailymotion\.com\/video\/([^_]+)/,type:"iframe",w:480,h:270,url:"//www.dailymotion.com/embed/video/$1",allowFullscreen:!0},{regex:/dai\.ly\/([^_]+)/,type:"iframe",w:480,h:270,url:"//www.dailymotion.com/embed/video/$1",allowFullscreen:!0}],j=function(e,t){for(var n=e.regex.exec(t),r=e.url,o=function(e){r=r.replace("$"+e,function(){return n[e]||""})},i=0;i<n.length;i++)o(i);return r.replace(/\?$/,"")},V=function(t){var e=W.filter(function(e){return e.regex.test(t)});return 0<e.length?a.extend({},e[0],{url:j(e[0],t)}):null},q=function(e){var t=e.allowFullscreen?' allowFullscreen="1"':"";return'<iframe src="'+e.source1+'" width="'+e.width+'" height="'+e.height+'"'+t+"></iframe>"},$=function(e){var t='<object data="'+e.source1+'" width="'+e.width+'" height="'+e.height+'" type="application/x-shockwave-flash">';return e.poster&&(t+='<img src="'+e.poster+'" width="'+e.width+'" height="'+e.height+'" />'),t+="</object>"},Y=function(e,t){return t?t(e):'<audio controls="controls" src="'+e.source1+'">'+(e.source2?'\n<source src="'+e.source2+'"'+(e.source2mime?' type="'+e.source2mime+'"':"")+" />\n":"")+"</audio>"},X=function(e,t){return t?t(e):'<video width="'+e.width+'" height="'+e.height+'"'+(e.poster?' poster="'+e.poster+'"':"")+' controls="controls">\n<source src="'+e.source1+'"'+(e.source1mime?' type="'+e.source1mime+'"':"")+" />\n"+(e.source2?'<source src="'+e.source2+'"'+(e.source2mime?' type="'+e.source2mime+'"':"")+" />\n":"")+"</video>"},K=function(e){return'<script src="'+e.source1+'"><\/script>'},G={dataToHtml:function(n,e){var t,r=a.extend({},e);return r.source1||(a.extend(r,g.htmlToData(u.getScripts(n),r.embed)),r.source1)?(r.source2||(r.source2=""),r.poster||(r.poster=""),r.source1=n.convertURL(r.source1,"source"),r.source2=n.convertURL(r.source2,"source"),r.source1mime=p(r.source1),r.source2mime=p(r.source2),r.poster=n.convertURL(r.poster,"poster"),(e=V(r.source1))&&(r.source1=e.url,r.type=e.type,r.allowFullscreen=e.allowFullscreen,r.width=r.width||e.w,r.height=r.height||e.h),r.embed?w.updateHtml(r.embed,r,!0):((e=s.getVideoScriptMatch(u.getScripts(n),r.source1))&&(r.type="script",r.width=e.width,r.height=e.height),e=u.getAudioTemplateCallback(n),t=u.getVideoTemplateCallback(n),r.width=r.width||300,r.height=r.height||150,a.each(r,function(e,t){r[t]=n.dom.encode(e)}),"iframe"===r.type?q(r):"application/x-shockwave-flash"===r.source1mime?$(r):-1!==r.source1mime.indexOf("audio")?Y(r,e):"script"===r.type?K(r):X(r,t))):""}},C={},J=function(r,o,i){return new h(function(t,e){function n(e){return e.html&&(C[r.source1]=e),t({url:r.source1,html:e.html||o(r)})}C[r.source1]?n(C[r.source1]):i({url:r.source1},n,e)})},Z=function(t,n){return new h(function(e){e({html:n(t),url:t.source1})})},S=function(t){return function(e){return G.dataToHtml(t,e)}},k={getEmbedHtml:function(e,t){var n=u.getUrlResolver(e);return n?J(t,S(e),n):Z(t,S(e))},isCached:function(e){return C.hasOwnProperty(e)}},T=function(e,t){e.state.set("oldVal",e.value()),t.state.set("oldVal",t.value())},N=function(e,t){var n=e.find("#width")[0],r=e.find("#height")[0],e=e.find("#constrain")[0];n&&r&&e&&t(n,r,e.checked())},Q=function(e,t,n){var r=e.state.get("oldVal"),o=t.state.get("oldVal"),i=e.value(),a=t.value();n&&r&&o&&i&&a&&(i!==r?(a=Math.round(i/r*a),isNaN(a)||t.value(a)):(i=Math.round(a/o*i),isNaN(i)||e.value(i))),T(e,t)},E={createUi:function(e){function t(){e(function(e){ee(e)})}return{type:"container",label:"Dimensions",layout:"flex",align:"center",spacing:5,items:[{name:"width",type:"textbox",maxLength:5,size:5,onchange:t,ariaLabel:"Width"},{type:"label",text:"x"},{name:"height",type:"textbox",maxLength:5,size:5,onchange:t,ariaLabel:"Height"},{name:"constrain",type:"checkbox",checked:!0,text:"Constrain proportions"}]}},syncSize:function(e){N(e,T)},updateSize:ee=function(e){N(e,Q)}},te=i.ie&&i.ie<=8?"onChange":"onInput",R=function(t){return function(e){e=e&&e.msg?"Media embed handler error: "+e.msg:"Media embed handler threw unknown error.";t.notificationManager.open({type:"error",text:e})}},ne=function(e){var t=e.selection.getNode(),n=t.getAttribute("data-ephox-embed-iri");return n?{source1:n,"data-ephox-embed-iri":n,width:l.getMaxWidth(t),height:l.getMaxHeight(t)}:t.getAttribute("data-mce-object")?g.htmlToData(u.getScripts(e),e.serializer.serialize(t,{selection:!0})):{}},re=function(e){var t=e.selection.getNode();if(t.getAttribute("data-mce-object")||t.getAttribute("data-ephox-embed-iri"))return e.selection.getContent()},_=function(r,o){return function(e){var t=e.html,n=r.find("#embed")[0],e=a.extend(g.htmlToData(u.getScripts(o),t),{source1:e.url});r.fromJSON(e),n&&(n.value(t),E.updateSize(r))}},oe=function(e,t){for(var n,r=e.dom.select("img[data-mce-object]"),o=0;o<t.length;o++)for(n=r.length-1;0<=n;n--)t[o]===r[n]&&r.splice(n,1);e.selection.select(r[0])},A=function(e,t){var n=e.dom.select("img[data-mce-object]");e.insertContent(t),oe(e,n),e.nodeChanged()},ie=function(e,t){e=e.toJSON();e.embed=w.updateHtml(e.embed,e),e.embed&&k.isCached(e.source1)?A(t,e.embed):k.getEmbedHtml(t,e).then(function(e){A(t,e.html)}).catch(R(t))},ae=function(n,e){a.each(e,function(e,t){n.find("#"+t).value(e)})},D=function(t){var n,r,e=[{name:"source1",type:"filepicker",filetype:"media",size:40,autofocus:!0,label:"Source",onpaste:function(){setTimeout(function(){k.getEmbedHtml(t,n.toJSON()).then(_(n,t)).catch(R(t))},1)},onchange:function(e){k.getEmbedHtml(t,n.toJSON()).then(_(n,t)).catch(R(t)),ae(n,e.meta)},onbeforecall:function(e){e.meta=n.toJSON()}}],o=[],i=function(e){e(n),r=n.toJSON(),n.find("#embed").value(w.updateHtml(r.embed,r))};u.hasAltSource(t)&&o.push({name:"source2",type:"filepicker",filetype:"media",size:40,label:"Alternative source"}),u.hasPoster(t)&&o.push({name:"poster",type:"filepicker",filetype:"image",size:40,label:"Poster"}),u.hasDimensions(t)&&(i=E.createUi(i),e.push(i)),r=ne(t),(i={id:"mcemediasource",type:"textbox",flex:1,name:"embed",value:re(t),multiline:!0,rows:5,label:"Source"})[te]=function(){r=a.extend({},g.htmlToData(u.getScripts(t),this.value())),this.parent().parent().fromJSON(r)},e=[{title:"General",type:"form",items:e},{title:"Embed",type:"container",layout:"flex",direction:"column",align:"stretch",padding:10,spacing:10,items:[{type:"label",text:"Paste your embed code below:",forId:"mcemediasource"},i]}],0<o.length&&e.push({title:"Advanced",type:"form",items:o}),n=t.windowManager.open({title:"Insert/edit media",data:r,bodyType:"tabpanel",body:e,onSubmit:function(){E.updateSize(n),ie(n,t)}}),E.syncSize(n)},ue=function(e){return{showDialog:function(){D(e)}}},se=function(e){e.addCommand("mceMedia",function(){D(e)})},P=tinymce.util.Tools.resolve("tinymce.html.Node"),O={sanitize:function(o,e){var i,a;return!1===u.shouldFilterHtml(o)?e:(i=v(),n({validate:!1,allow_conditional_comments:!1,special:"script,noscript",comment:function(e){i.comment(e)},cdata:function(e){i.cdata(e)},text:function(e,t){i.text(e,t)},start:function(e,t,n){if(a=!0,"script"!==e&&"noscript"!==e){for(var r=0;r<t.length;r++){if(0===t[r].name.indexOf("on"))return;"style"===t[r].name&&(t[r].value=o.dom.serializeStyle(o.dom.parseStyle(t[r].value),e))}i.start(e,t,n),a=!1}},end:function(e){a||i.end(e)}},b({})).parse(e),i.getContent())}},B=function(e,t,n){for(var r,o,i=t.attributes,a=i.length;a--;)r=i[a].name,o=i[a].value,"width"!==r&&"height"!==r&&"style"!==r&&("data"!==r&&"src"!==r||(o=e.convertURL(o,r)),n.attr("data-mce-p-"+r,o));(t=t.firstChild&&t.firstChild.value)&&(n.attr("data-mce-html",escape(O.sanitize(e,t))),n.firstChild=null)},M=function(e){for(;e=e.parent;)if(e.attr("data-ephox-embed-iri"))return!0;return!1},le=function(e,t){var n=t.name,r=new P("span",1);return r.attr({contentEditable:"false",style:t.attr("style"),"data-mce-object":n,class:"mce-preview-object mce-object-"+n}),B(e,t,r),(e=new P(n,1)).attr({src:t.attr("src"),allowfullscreen:t.attr("allowfullscreen"),style:t.attr("style"),class:t.attr("class"),width:t.attr("width"),height:t.attr("height"),frameborder:"0"}),(n=new P("span",1)).attr("class","mce-shim"),r.append(e),r.append(n),r},ce=function(e,t){var n=t.name,r=new P("img",1);return r.shortEnded=!0,B(e,t,r),r.attr({width:t.attr("width")||"300",height:t.attr("height")||("audio"===n?"30":"150"),style:t.attr("style"),src:i.transparentSrc,"data-mce-object":n,class:"mce-object mce-object-"+n}),r},fe=function(o){return function(e){for(var t,n,r=e.length;r--;)!(t=e[r]).parent||t.parent.attr("data-mce-object")||"script"===t.name&&!(n=s.getVideoScriptMatch(u.getScripts(o),t.attr("src")))||(n&&(n.width&&t.attr("width",n.width.toString()),n.height)&&t.attr("height",n.height.toString()),"iframe"===t.name&&u.hasLiveEmbeds(o)&&i.ceFalse?M(t)||t.replace(le(o,t)):M(t)||t.replace(ce(o,t)))}},de=function(l){l.on("preInit",function(){var t,n=l.schema.getSpecialElements();a.each("video audio iframe object".split(" "),function(e){n[e]=new RegExp("</"+e+"[^>]*>","gi")}),t=l.schema.getBoolAttrs(),a.each("webkitallowfullscreen mozallowfullscreen allowfullscreen".split(" "),function(e){t[e]={}}),l.parser.addNodeFilter("iframe,video,audio,object,embed,script",fe(l)),l.serializer.addAttributeFilter("data-mce-object",function(e,t){for(var n,r,o,i,a,u,s,c=e.length;c--;)if((n=e[c]).parent){for(a=n.attr(t),r=new P(a,1),"audio"!==a&&"script"!==a&&((u=n.attr("class"))&&-1!==u.indexOf("mce-preview-object")?r.attr({width:n.firstChild.attr("width"),height:n.firstChild.attr("height")}):r.attr({width:n.attr("width"),height:n.attr("height")})),r.attr({style:n.attr("style")}),o=(i=n.attributes).length;o--;)0===(s=i[o].name).indexOf("data-mce-p-")&&r.attr(s.substr(11),i[o].value);"script"===a&&r.attr("type","text/javascript"),(u=n.attr("data-mce-html"))&&((a=new P("#text",3)).raw=!0,a.value=O.sanitize(l,unescape(u)),r.append(a)),n.replace(r)}})}),l.on("setContent",function(){l.$("span.mce-preview-object").each(function(e,t){var n=l.$(t);0===n.find("span.mce-shim",t).length&&n.append('<span class="mce-shim"></span>')})})},me=function(e){e.on("ResolveName",function(e){var t;1===e.target.nodeType&&(t=e.target.getAttribute("data-mce-object"))&&(e.name=t)})},ge=function(t){t.on("click keyup",function(){var e=t.selection.getNode();e&&t.dom.hasClass(e,"mce-preview-object")&&t.dom.getAttrib(e,"data-mce-selected")&&e.setAttribute("data-mce-selected","2")}),t.on("ObjectSelected",function(e){var t=e.target.getAttribute("data-mce-object");"audio"!==t&&"script"!==t||e.preventDefault()}),t.on("objectResized",function(e){var t,n=e.target;n.getAttribute("data-mce-object")&&(t=n.getAttribute("data-mce-html"))&&(t=unescape(t),n.setAttribute("data-mce-html",escape(w.updateHtml(t,{width:e.width,height:e.height}))))})},he=function(e){e.addButton("media",{tooltip:"Insert/edit media",cmd:"mceMedia",stateSelector:["img[data-mce-object]","span[data-mce-object]","div[data-ephox-embed-iri]"]}),e.addMenuItem("media",{icon:"media",text:"Media",cmd:"mceMedia",context:"insert",prependToContext:!0})},e.add("media",function(e){return se(e),he(e),me(e),de(e),ge(e),ue(e)})}(),function(s){"use strict";var I,C,L,S,F,H,z,U,W,f,j,V,q,$,Y,k,X,K,G,J,Z,Q,ee,c,te,h,x,ne,re,oe,ie,ae,ue,se,ce,le,fe,de,me,ge,he,pe,ve,be,ye,xe,we,t,Ce,Se,ke,Te,Ne,Ee,Re,_e,b,Ae,De,Pe,Oe,Be,Me,y,Ie,w,Le,T,Fe,He,n,ze,Ue,We,je,Ve,N,qe,$e,Ye,Xe,Ke,Ge,Je,Ze,Qe,et,tt,nt,rt,ot,it,at,ut,st,ct,lt,ft,dt,mt,gt,ht,pt,vt,bt,yt,xt,wt,Ct,St,kt,Tt,Nt,Et,Rt,_t,At,Dt,Pt,Ot,Bt,Mt,It,Lt,Ft,Ht,zt,Ut,Wt,jt,Vt,qt,$t,Yt,Xt,Kt,E,Gt,Jt,Zt,Qt,en,tn,nn,rn,u,on,an,un,sn,cn,d,ln,fn,dn,mn,gn,hn,pn,m,vn,bn,yn,xn,wn,Cn,Sn,kn,Tn,Nn,En,Rn,_n,l,An,Dn,Pn,On,R,Bn,Mn,g,In,Ln,Fn,Hn,zn,Un,Wn,jn,Vn,qn,$n,Yn,Xn,Kn,Gn,Jn,Zn,Qn,er,tr,nr,rr,or,ir,ar,ur,sr,cr,lr,fr,dr,mr,gr,hr,pr,vr,br,yr,xr,wr,Cr,Sr,kr,Tr,Nr,Er,Rr,_r,Ar,Dr,Pr,Or,Br,Mr,Ir,Lr,Fr,Hr,zr,Ur,Wr,jr,Vr,qr,$r,Yr,Xr,Kr,Gr,Jr,Zr,Qr,eo,to,no,ro,oo,io,ao,uo,so,co,lo,fo,mo,go,ho,po,vo,bo,yo,xo,wo,Co,So,ko,To,No,Eo,Ro,_o,Ao,Do,Po,Oo,Bo,Mo,Io,Lo,Fo,Ho,zo,Uo,a,Wo,jo,Vo,qo,$o,Yo,Xo,Ko,Go,Jo,Zo,Qo,ei,ti,ni,ri,oi,ii,ai,ui,si,ci,li,fi,di,mi,gi,hi,pi,vi,bi,yi,xi,wi,Ci,Si,ki,Ti,Ni,Ei,Ri,_i,Ai,Di,Pi,Oi,Bi,Mi,Ii,Li,Fi,Hi,zi,Ui,Wi,ji,Vi,p,qi,$i,Yi,Xi,Ki,Gi,Ji,Zi,v,Qi,ea,ta,na,ra,oa,ia,aa,ua,sa,ca,la,fa,da,ma,ga,ha,pa,va,ba,ya,xa,wa,Ca,Sa,ka,Ta,Na,Ea,Ra,_a,Aa,Da,Pa,Oa,Ba,Ma,Ia,La,Fa,Ha,za,Ua,Wa,ja,Va,qa,$a,Ya,Xa,Ka,Ga,Ja,Za,Qa,eu,tu,nu,ru,ou,iu,au,uu,su,cu,lu,_,fu,du,mu,gu,hu,pu,vu,bu,yu,xu,wu,Cu,Su,ku,Tu,Nu,Eu,Ru,A,_u,Au,Du,Pu,Ou,Bu,Mu,Iu,Lu,Fu,Hu,zu,Uu,Wu,ju,Vu,qu,$u,Yu,Xu,Ku,Gu,Ju,Zu,Qu,es,ts,ns,rs,os,is,as,us,ss,cs,ls,fs,ds,ms,gs,hs,ps,vs,bs,ys,xs,ws,Cs,Ss,D,ks,Ts,Ns,P,Es,Rs,_s,As,Ds,Ps,Os,Bs,Ms,Is,Ls,Fs,Hs,zs,Us,Ws,js,Vs,qs,$s,Ys,Xs,Ks,Gs,Js,Zs,Qs,ec,tc,nc,e,r,rc,oc,ic,ac,uc,sc,cc,lc,fc,dc,mc,gc,hc,pc,vc,bc,yc,xc,wc,Cc,Sc,kc,Tc,Nc,Ec,Rc,_c,Ac,Dc,Pc,Oc,O,Bc,Mc,Ic,Lc,Fc,Hc,zc,Uc,Wc,jc,Vc,qc,$c,Yc,Xc,Kc,Gc,Jc,Zc,Qc,el,tl,nl,rl,ol,il,al,ul,sl,cl,ll,fl,dl,ml,gl,hl,pl,vl,bl,yl,xl,wl,Cl,Sl,kl,Tl,Nl,El,Rl,_l,Al,Dl,Pl,Ol,Bl,Ml,Il,Ll,Fl,Hl,zl,Ul,Wl,jl,Vl,ql,$l,Yl,Xl,Kl,Gl,Jl,Zl,Ql,ef,tf,nf,rf,of,af,uf,sf,cf,lf,ff,df,mf,gf,hf,pf,vf,bf,yf,xf,wf,Cf,Sf,kf,Tf,Nf,Ef,Rf,_f,o,Af,Df,Pf,Of,Bf,Mf,If,i,Lf,Ff,Hf,zf,Uf,Wf,jf,Vf,qf,$f,Yf,Xf,Kf,Gf,Jf,Zf,Qf,ed,td,nd,rd,od,id,ad,ud,sd,cd,ld,fd,dd,md,gd,hd,pd,vd,bd,yd,xd,wd,Cd,Sd,kd,Td,Nd,Ed,Rd,_d,B,Ad,Dd,Pd,Od,Bd,Md,Id,Ld,Fd;function M(r){for(var o=[],e=1;e<arguments.length;e++)o[e-1]=arguments[e];return function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e=o.concat(t),r.apply(null,e)}}function Hd(e,t,n,r,o){return e(n,r)?k.some(n):Z(o)&&o(n)?k.none():t(n,r,o)}function zd(){var e=function(e){return N.fromDom(e.dom().cloneNode(!1))},t=function(e){return e.dom().ownerDocument},n=function(e){return!!Pe(e)&&("body"===b(e)||c(fr,b(e)))},r=function(e){return!!Pe(e)&&c(["br","img","hr","input"],b(e))},o=function(e,t){return e.dom().compareDocumentPosition(t.dom())},i=function(e,t){e=Fe(e);Ie(t,e)};return{up:S({selector:En,closest:l,predicate:Sn,all:tn}),down:S({selector:Cn,predicate:yn}),styles:S({get:Ze,getRaw:et,set:Ge,remove:tt}),attrs:S({get:w,set:y,remove:T,copyTo:i}),insert:S({before:un,after:sn,afterAll:dn,append:d,appendAll:mn,prepend:cn,wrap:ln}),remove:S({unwrap:pn,remove:hn}),create:S({nu:N.fromTag,clone:e,text:N.fromText}),query:S({comparePosition:o,prevSibling:nn,nextSibling:rn}),property:S({children:u,name:b,parent:en,document:t,isText:Oe,isComment:De,isElement:Pe,getText:jn,setText:qn,isBoundary:n,isEmptyTag:r}),eq:E,is:Jt}}function Ud(n,r){var e=function(e){var t=r(e);return t<=0||null===t?(e=Ze(e,n),parseFloat(e)||0):t},o=function(n,e){return ae(e,function(e,t){t=Ze(n,t),t=void 0===t?0:parseInt(t,10);return isNaN(t)?e:e+t},0)};return{set:function(e,t){if(!Q(t)&&!t.match(/^[0-9]+$/))throw new Error(n+".set accepts only positive integer values. Value was "+t);e=e.dom();We(e)&&(e.style[n]=t+"px")},get:e,getOuter:e,aggregate:o,max:function(e,t,n){e=o(e,n);return e<t?t-e:0}}}function Wd(t){var n=function(e){return t(e).isRtl()?ri.rtl:ri.ltr};return{delta:function(e,t){return n(t).delta(e,t)},edge:function(e){return n(e).edge(e)},positions:function(e,t){return n(t).positions(e)}}}function jd(o,i,a,e){var u,s;function c(e,t,n){1!==i.length&&!n||u.setAttrib(e,t,n)}u=o.dom,is(o)&&P.syncAdvancedStyleFields(o,e),s=e.control.rootControl.toJSON(),o.undoManager.transact(function(){D.each(i,function(e){var t,n,r;c(e,"scope",s.scope),c(e,"style",s.style),c(e,"class",s.class),t=e,n="height",r=qu(s.height),1!==i.length&&!r||u.setStyle(t,n,r),s.type!==e.parentNode.nodeName.toLowerCase()&&Ps(o.dom,e,s.type),s.align!==a.align&&(ks.unApplyAlign(o,e),ks.applyAlign(o,e,s.align))}),o.focus()})}function Vd(e){var n=t.apply(null,e),r=[];return{bind:function(e){if(void 0===e)throw"Event bind error: undefined handler";r.push(e)},unbind:function(t){r=re(r,function(e){return e!==t})},trigger:function(){var t=n.apply(null,arguments);x(r,function(e){e(t)})}}}function qd(){var e,n,r,t,o,i,a,u={onEvent:function(e,t){},reset:C};return r=k.none(),t=function(){r=k.none()},o=function(t,n){var e=r.map(function(e){return t.compare(e,n)});return r=k.some(n),e},i=function(e,t){t.extract(e).each(function(e){o(t,e).each(function(e){a.trigger.move(e)})})},a=nc.create({move:Vd(["info"])}),e={onEvent:i,reset:t,events:a.registry},n=u,{on:function(){n.reset(),n=e},off:function(){n.reset(),n=u},isOn:function(){return n===e},onEvent:function(e,t){n.onEvent(e,t)},events:e.events}}function $d(){var e,n,r=nc.create({drag:Vd(["xDelta","yDelta","target"])}),o=k.none();return(e={mutate:function(e,t){n.trigger.drag(e,t)},events:(n=nc.create({drag:Vd(["xDelta","yDelta"])})).registry}).events.drag.bind(function(t){o.each(function(e){r.trigger.drag(t.xDelta(),t.yDelta(),e)})}),{assign:function(e){o=k.some(e)},get:function(){return o},mutate:e.mutate,events:r.registry}}function Yd(e,n){var r,o,t,i,a,u,s,c,l,f,d,m,g,h,p,v=ni.height;return o=e,t=n,i=v,m=$d(),g=vc(m,{}),h=k.none(),p=function(e,t){return k.from(w(e,t))},m.events.drag.bind(function(n){p(n.target(),"data-row").each(function(e){var t=Ha.getInt(n.target(),"top");Ge(n.target(),"top",t+n.yDelta()+"px")}),p(n.target(),"data-column").each(function(e){var t=Ha.getInt(n.target(),"left");Ge(n.target(),"left",t+n.xDelta()+"px")})}),a=function(e,t){return Ha.getInt(e,t)-parseInt(w(e,"data-initial-"+t),10)},g.events.stop.bind(function(){m.get().each(function(r){h.each(function(n){p(r,"data-row").each(function(e){var t=a(r,"top");T(r,"data-initial-top"),d.trigger.adjustHeight(n,t,parseInt(e,10))}),p(r,"data-column").each(function(e){var t=a(r,"left");T(r,"data-initial-left"),d.trigger.adjustWidth(n,t,parseInt(e,10))}),Li(o,n,i,t)})})}),u=function(e,t){d.trigger.startAdjust(),m.assign(e),y(e,"data-initial-"+t,parseInt(Ze(e,t),10)),yi(e,yc),Ge(e,"opacity","0.2"),g.go(o.parent())},s=mc(o.parent(),"mousedown",function(e){Ui(e.target())&&u(e.target(),"top"),Wi(e.target())&&u(e.target(),"left")}),c=function(e){return E(e,o.view())},l=mc(o.view(),"mouseover",function(e){"table"===b(e.target())||bc(e.target(),"table",c)?(h="table"===b(e.target())?k.some(e.target()):En(e.target(),"table",c)).each(function(e){Li(o,e,i,t)}):qe(e.target())&&zi(o)}),e=function(){s.unbind(),l.unbind(),g.destroy(),zi(o)},f=function(e){Li(o,e,i,t)},d=nc.create({adjustHeight:Vd(["table","delta","row"]),adjustWidth:Vd(["table","delta","column"]),startAdjust:Vd([])}),e={destroy:e,refresh:f,on:g.on,off:g.off,hideBars:M(Fi,o),showBars:M(Hi,o),events:d.registry},r=nc.create({beforeResize:Vd(["table"]),afterResize:Vd(["table"]),startDrag:Vd([])}),e.events.adjustHeight.bind(function(e){r.trigger.beforeResize(e.table());var t=v.delta(e.delta());ou.adjustHeight(e.table(),t,e.row(),v),r.trigger.afterResize(e.table())}),e.events.startAdjust.bind(function(e){r.trigger.startDrag()}),e.events.adjustWidth.bind(function(e){r.trigger.beforeResize(e.table());var t=n.delta(e.delta(),e.table());ou.adjustWidth(e.table(),t,e.column(),n),r.trigger.afterResize(e.table())}),{on:e.on,off:e.off,hideBars:e.hideBars,showBars:e.showBars,destroy:e.destroy,events:r.registry}}function Xd(o){return{elementFromPoint:function(e,t){return N.fromPoint(N.fromDom(o.document),e,t)},getRect:function(e){return e.dom().getBoundingClientRect()},getRangedRect:function(e,t,n,r){e=Hc(e,t,n,r);return Pl(o,e).map(function(e){return xe(e,U)})},getSelection:function(){return Dl(o).map(function(e){return Xl.convertToRange(o,e)})},fromSitus:function(e){e=Fc(e.start(),e.finish());return Xl.convertToRange(o,e)},situsFromPoint:function(e,t){return Ol(o,e,t).map(function(e){return{start:S(O.on(e.start(),e.soffset())),finish:S(O.on(e.finish(),e.foffset()))}})},clearSelection:function(){Bl(o)},setSelection:function(e){kl(o,e.start(),e.soffset(),e.finish(),e.foffset())},setRelativeSelection:function(e,t){Tl(o,e,t)},selectContents:function(e){_l(o,e)},getInnerHeight:function(){return o.innerHeight},getScrollY:function(){return Kl(N.fromDom(o.document)).top()},scrollBy:function(e,t){Gl(e,t,N.fromDom(o.document))}}}I=tinymce.util.Tools.resolve("tinymce.PluginManager"),C=function(){for(var e=0;e<arguments.length;e++)e,0},L=function(n,r){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n(r.apply(null,e))}},F=function(e){return e},H=function(n){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return!n.apply(null,e)}},z=function(e){return function(){throw new Error(e)}},W=(S=function(e){return function(){return e}})(!(U=function(e){return e()})),f=S(!0),Ad={fold:function(e,t){return e()},is:j=W,isSome:j,isNone:V=f,getOr:Ad=function(e){return e},getOrThunk:B=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:function(){return null},getOrUndefined:function(){},or:Ad,orThunk:B,map:q=function(){return $},ap:q,each:function(){},bind:q,flatten:q,exists:j,forall:V,filter:q,equals:B=function(e){return e.isNone()},equals_:B,toArray:function(){return[]},toString:S("none()")},Object.freeze&&Object.freeze(Ad),$=Ad,k={some:Y=function(n){var e=function(){return n},t=function(){return o},r=function(e){return e(n)},o={fold:function(e,t){return t(n)},is:function(e){return n===e},isSome:V,isNone:j,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:t,orThunk:t,map:function(e){return Y(e(n))},ap:function(e){return e.fold(q,function(e){return Y(e(n))})},each:function(e){e(n)},bind:r,flatten:e,exists:r,forall:r,filter:function(e){return e(n)?o:$},equals:function(e){return e.is(n)},equals_:function(e,t){return e.fold(j,function(e){return t(n,e)})},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return o},none:q,from:function(e){return null==e?$:Y(e)}},X=function(e){var t;return null===e?"null":"object"==(t=typeof e)&&Array.prototype.isPrototypeOf(e)?"array":"object"==t&&String.prototype.isPrototypeOf(e)?"string":t},K=(B=function(t){return function(e){return X(e)===t}})("string"),G=B("array"),J=B("boolean"),Z=B("function"),Q=B("number"),Dd=Array.prototype.indexOf,ee=void 0===Dd?function(e,t){return ce(e,t)}:function(e,t){return Dd.call(e,t)},c=function(e,t){return-1<ee(e,t)},te=function(e,t){return se(e,t).isSome()},h=function(e,t){for(var n,r=e.length,o=new Array(r),i=0;i<r;i++)n=e[i],o[i]=t(n,i,e);return o},x=function(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n,e)},ne=function(e,t){for(var n=e.length-1;0<=n;n--)t(e[n],n,e)},re=function(e,t){for(var n,r=[],o=0,i=e.length;o<i;o++)t(n=e[o],o,e)&&r.push(n);return r},oe=function(e,t){var n,r,o,i,a,u,s;if(0===e.length)return[];for(n=t(e[0]),r=[],o=[],i=0,a=e.length;i<a;i++)(s=t(u=e[i]))!==n&&(r.push(o),o=[]),n=s,o.push(u);return 0!==o.length&&r.push(o),r},ie=function(e,t,n){return ne(e,function(e){n=t(n,e)}),n},ae=function(e,t,n){return x(e,function(e){n=t(n,e)}),n},ue=function(e,t){for(var n,r=0,o=e.length;r<o;r++)if(t(n=e[r],r,e))return k.some(n);return k.none()},se=function(e,t){for(var n=0,r=e.length;n<r;n++)if(t(e[n],n,e))return k.some(n);return k.none()},ce=function(e,t){for(var n=0,r=e.length;n<r;++n)if(e[n]===t)return n;return-1},le=Array.prototype.push,fe=function(e){for(var t=[],n=0,r=e.length;n<r;++n){if(!Array.prototype.isPrototypeOf(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);le.apply(t,e[n])}return t},de=function(e,t){e=h(e,t);return fe(e)},me=function(e,t){for(var n=0,r=e.length;n<r;++n)if(!0!==t(e[n],n,e))return!1;return!0},ge=Array.prototype.slice,he=function(e){e=ge.call(e,0);return e.reverse(),e},pe=function(e,t){e=ge.call(e,0);return e.sort(t),e},ve=function(e){return 0===e.length?k.none():k.some(e[e.length-1])},Z(Array.from)&&Array.from,be=Object.keys,ye=function(e,t){for(var n,r=be(e),o=0,i=r.length;o<i;o++)t(e[n=r[o]],n,e)},xe=function(e,r){return we(e,function(e,t,n){return{k:t,v:r(e,t,n)}})},we=function(n,r){var o={};return ye(n,function(e,t){e=r(e,t,n);o[e.k]=e.v}),o},t=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(){for(var n,r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];if(t.length!==r.length)throw new Error('Wrong number of arguments to struct. Expected "['+t.length+']", got '+r.length+" arguments");return n={},x(t,function(e,t){n[e]=S(r[t])}),n}},Ce=function(e){return e.slice(0).sort()},Se=function(e,t){throw new Error("All required keys ("+Ce(e).join(", ")+") were not specified. Specified keys were: "+Ce(t).join(", ")+".")},ke=function(e){throw new Error("Unsupported keys for object: "+Ce(e).join(", "))},Te=function(t,e){if(!G(e))throw new Error("The "+t+" fields must be an array. Was: "+e+".");x(e,function(e){if(!K(e))throw new Error("The value "+e+" in the "+t+" fields was not a string.")})},Ne=function(e,t){throw new Error("All values need to be of type: "+t+". Keys ("+Ce(e).join(", ")+") were not.")},Ee=function(e){var n=Ce(e);ue(n,function(e,t){return t<n.length-1&&e===n[t+1]}).each(function(e){throw new Error("The field: "+e+" occurs more than once in the combined fields: ["+n.join(", ")+"].")})},Re=function(o,i){var a=o.concat(i);if(0===a.length)throw new Error("You must specify at least one required or optional field.");return Te("required",o),Te("optional",i),Ee(a),function(t){var e,n,r=be(t);return me(o,function(e){return c(r,e)})||Se(o,r),0<(e=re(r,function(e){return!c(a,e)})).length&&ke(e),n={},x(o,function(e){n[e]=S(t[e])}),x(i,function(e){n[e]=S(Object.prototype.hasOwnProperty.call(t,e)?k.some(t[e]):k.none())}),n}},s.Node.ATTRIBUTE_NODE,s.Node.CDATA_SECTION_NODE,_e=s.Node.COMMENT_NODE,Ad=s.Node.DOCUMENT_NODE,s.Node.DOCUMENT_TYPE_NODE,s.Node.DOCUMENT_FRAGMENT_NODE,B=s.Node.ELEMENT_NODE,i=s.Node.TEXT_NODE,s.Node.PROCESSING_INSTRUCTION_NODE,s.Node.ENTITY_REFERENCE_NODE,s.Node.ENTITY_NODE,s.Node.NOTATION_NODE,b=function(e){return e.dom().nodeName.toLowerCase()},Ae=function(e){return e.dom().nodeType},De=function(e){return Ae(e)===_e||"#comment"===b(e)},Pe=(r=function(t){return function(e){return Ae(e)===t}})(B),Oe=r(i),Be=r(Ad),Me=function(e,t,n){if(!(K(n)||J(n)||Q(n)))throw s.console.error("Invalid call to Attr.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")},y=function(e,t,n){Me(e.dom(),t,n)},Ie=function(e,t){var n=e.dom();ye(t,function(e,t){Me(n,t,e)})},w=function(e,t){e=e.dom().getAttribute(t);return null===e?void 0:e},Le=function(e,t){e=e.dom();return!(!e||!e.hasAttribute)&&e.hasAttribute(t)},T=function(e,t){e.dom().removeAttribute(t)},Fe=function(e){return ae(e.dom().attributes,function(e,t){return e[t.name]=t.value,e},{})},He=function(e,t,n){return""===t||!(e.length<t.length)&&e.substr(n,n+t.length)===t},n=function(e,t){return-1!==e.indexOf(t)},ze=function(e,t){return He(e,t,e.length-t.length)},Ue=function(e){return e.replace(/^\s+|\s+$/g,"")},We=function(e){return void 0!==e.style},N={fromHtml:function(e,t){t=(t||s.document).createElement("div");if(t.innerHTML=e,!t.hasChildNodes()||1<t.childNodes.length)throw s.console.error("HTML does not have a single root node",e),new Error("HTML must have a single root node");return Ve(t.childNodes[0])},fromTag:function(e,t){t=(t||s.document).createElement(e);return Ve(t)},fromText:function(e,t){t=(t||s.document).createTextNode(e);return Ve(t)},fromDom:Ve=function(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:S(e)}},fromPoint:function(e,t,n){e=e.dom();return k.from(e.elementFromPoint(t,n)).map(Ve)}},qe=function(e){e=Oe(e)?e.dom().parentNode:e.dom();return null!=e&&e.ownerDocument.body.contains(e)},$e=(je=function(n){var r,o=!1;return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o||(o=!0,r=n.apply(null,e)),r}})(function(){return Ye(N.fromDom(s.document))}),Ye=function(e){e=e.dom().body;if(null==e)throw new Error("Body is not available yet");return N.fromDom(e)},Xe=function(e,t,n){if(!K(n))throw s.console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);We(e)&&e.style.setProperty(t,n)},Ke=function(e,t){We(e)&&e.style.removeProperty(t)},Ge=function(e,t,n){e=e.dom();Xe(e,t,n)},Je=function(e,t){var n=e.dom();ye(t,function(e,t){Xe(n,t,e)})},Ze=function(e,t){var n=e.dom(),r=s.window.getComputedStyle(n).getPropertyValue(t),e=""!==r||qe(e)?r:Qe(n,t);return null===e?void 0:e},Qe=function(e,t){return We(e)?e.style.getPropertyValue(t):""},et=function(e,t){e=e.dom(),e=Qe(e,t);return k.from(e).filter(function(e){return 0<e.length})},tt=function(e,t){var n=e.dom();Ke(n,t),Le(e,"style")&&""===Ue(w(e,"style"))&&T(e,"style")},nt=function(e,t){e=e.dom(),t=t.dom();We(e)&&We(t)&&(t.style.cssText=e.style.cssText)},rt=void 0!==s.window?s.window:Function("return this;")(),ot=function(e,t){for(var n=null!=t?t:rt,r=0;r<e.length&&null!=n;++r)n=n[e[r]];return n},it=function(e,t){e=e.split(".");return ot(e,t)},at=function(e,t){return it(e,t)},ut={getOrDie:function(e,t){t=at(e,t);if(null==t)throw e+" not available on this browser";return t}},st=function(){return ut.getOrDie("Node")},ct=function(e,t,n){return 0!=(e.compareDocumentPosition(t)&n)},lt=function(e,t){return ct(e,t,st().DOCUMENT_POSITION_CONTAINED_BY)},ft=function(e,t){for(var n,r=0;r<e.length;r++)if((n=e[r]).test(t))return n},dt=function(e,t){var n=ft(e,t);return n?gt((e=function(e){return Number(t.replace(n,"$"+e))})(1),e(2)):{major:0,minor:0}},gt=function(e,t){return{major:e,minor:t}},ht=function(e,t){t=String(t).toLowerCase();return 0===e.length?mt():dt(e,t)},pt=mt=function(){return gt(0,0)},bt="Chrome",yt="IE",xt="Opera",wt="Firefox",Ct="Safari",St=function(e,t){return function(){return t===e}},Tt=function(){return kt({current:void 0,version:pt()})},Nt=kt=function(e){var t=e.current;return{current:t,version:e.version,isEdge:St(vt,t),isChrome:St(bt,t),isIE:St(yt,t),isOpera:St(xt,t),isFirefox:St(wt,t),isSafari:St(Ct,t)}},S(vt="Edge"),S(bt),S(yt),S(xt),S(wt),S(Ct),Rt="iOS",_t="Android",At="Linux",Dt="OSX",Pt="Solaris",Ot="FreeBSD",Bt=function(e,t){return function(){return t===e}},It=function(){return Mt({current:void 0,version:pt()})},Lt=Mt=function(e){var t=e.current;return{current:t,version:e.version,isWindows:Bt(Et,t),isiOS:Bt(Rt,t),isAndroid:Bt(_t,t),isOSX:Bt(Dt,t),isLinux:Bt(At,t),isSolaris:Bt(Pt,t),isFreeBSD:Bt(Ot,t)}},S(Et="Windows"),S(Rt),S(_t),S(At),S(Dt),S(Pt),S(Ot),Ft=function(e,t,n){var r=e.isiOS()&&!0===/ipad/i.test(n),o=e.isiOS()&&!r,i=e.isAndroid()&&3===e.version.major,a=e.isAndroid()&&4===e.version.major,i=r||i||a&&!0===/mobile/i.test(n),a=e.isiOS()||e.isAndroid(),u=a&&!i,t=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(n);return{isiPad:S(r),isiPhone:S(o),isTablet:S(i),isPhone:S(u),isTouch:S(a),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:S(t)}},Ht=function(e,t){var n=String(t).toLowerCase();return ue(e,function(e){return e.search(n)})},zt=function(e,n){return Ht(e,n).map(function(e){var t=ht(e.versionRegexes,n);return{current:e.name,version:t}})},Ut=function(e,n){return Ht(e,n).map(function(e){var t=ht(e.versionRegexes,n);return{current:e.name,version:t}})},i=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return n(e,"edge/")&&n(e,"chrome")&&n(e,"safari")&&n(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,i=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/],search:function(e){return n(e,"chrome")&&!n(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return n(e,"msie")||n(e,"trident")}},{name:"Opera",versionRegexes:[i,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:(r=function(t){return function(e){return n(e,t)}})("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:r("firefox")},{name:"Safari",versionRegexes:[i,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(n(e,"safari")||n(e,"mobile/"))&&n(e,"applewebkit")}}],r=[{name:"Windows",search:r("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return n(e,"iphone")||n(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:r("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:r("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:r("linux"),versionRegexes:[]},{name:"Solaris",search:r("sunos"),versionRegexes:[]},{name:"FreeBSD",search:r("freebsd"),versionRegexes:[]}],Wt={browsers:S(i),oses:S(r)},jt=function(e){var t=Wt.browsers(),n=Wt.oses(),t=zt(t,e).fold(Tt,Nt),n=Ut(n,e).fold(It,Lt);return{browser:t,os:n,deviceType:Ft(n,t,e)}},i=je(function(){var e=s.navigator.userAgent;return jt(e)}),Vt=B,qt=Ad,$t=function(e,t){e=e.dom();if(e.nodeType!==Vt)return!1;if(void 0!==e.matches)return e.matches(t);if(void 0!==e.msMatchesSelector)return e.msMatchesSelector(t);if(void 0!==e.webkitMatchesSelector)return e.webkitMatchesSelector(t);if(void 0!==e.mozMatchesSelector)return e.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},Yt=function(e){return e.nodeType!==Vt&&e.nodeType!==qt||0===e.childElementCount},Xt=function(e,t){t=void 0===t?s.document:t.dom();return Yt(t)?[]:h(t.querySelectorAll(e),N.fromDom)},Kt=function(e,t){t=void 0===t?s.document:t.dom();return Yt(t)?k.none():k.from(t.querySelector(e)).map(N.fromDom)},E=function(e,t){return e.dom()===t.dom()},r=function(e,t){e=e.dom(),t=t.dom();return e!==t&&e.contains(t)},B=function(e,t){return lt(e.dom(),t.dom())},i=(Ad={detect:i}).detect().browser,Gt=i.isIE()?B:r,Jt=$t,Zt=function(e){return N.fromDom(e.dom().ownerDocument)},Qt=function(e){e=e.dom().ownerDocument.defaultView;return N.fromDom(e)},en=function(e){e=e.dom();return k.from(e.parentNode).map(N.fromDom)},tn=function(e,t){for(var n,r,o=Z(t)?t:S(!1),i=e.dom(),a=[];null!==i.parentNode&&void 0!==i.parentNode&&(n=i.parentNode,r=N.fromDom(n),a.push(r),!0!==o(r));)i=n;return a},nn=function(e){e=e.dom();return k.from(e.previousSibling).map(N.fromDom)},rn=function(e){e=e.dom();return k.from(e.nextSibling).map(N.fromDom)},u=function(e){e=e.dom();return h(e.childNodes,N.fromDom)},on=function(e,t){e=e.dom().childNodes;return k.from(e[t]).map(N.fromDom)},an=function(e){return on(e,0)},t("element","offset"),un=function(t,n){en(t).each(function(e){e.dom().insertBefore(n.dom(),t.dom())})},sn=function(e,t){rn(e).fold(function(){en(e).each(function(e){d(e,t)})},function(e){un(e,t)})},cn=function(t,n){an(t).fold(function(){d(t,n)},function(e){t.dom().insertBefore(n.dom(),e.dom())})},d=function(e,t){e.dom().appendChild(t.dom())},ln=function(e,t){un(e,t),d(t,e)},fn=function(t,e){x(e,function(e){un(t,e)})},dn=function(n,r){x(r,function(e,t){t=0===t?n:r[t-1];sn(t,e)})},mn=function(t,e){x(e,function(e){d(t,e)})},gn=function(e){e.dom().textContent="",x(u(e),function(e){hn(e)})},hn=function(e){e=e.dom();null!==e.parentNode&&e.parentNode.removeChild(e)},pn=function(e){var t=u(e);0<t.length&&fn(e,t),hn(e)},i=t("width","height"),B=t("rows","columns"),r=t("row","column"),e=t("x","y"),o=t("element","rowspan","colspan"),Bd=t("element","rowspan","colspan","isNew"),fu=t("element","rowspan","colspan","row","column"),Md=t("element","cells","section"),Ld=t("element","isNew"),Bf=t("element","cells","section","isNew"),na=t("cells","section"),ra=t("details","section"),ro=t("startRow","startCol","finishRow","finishCol"),m={dimensions:i,grid:B,address:r,coords:e,extended:fu,detail:o,detailnew:Bd,rowdata:Md,elementnew:Ld,rowdatanew:Bf,rowcells:na,rowdetails:ra,bounds:ro},vn=function(e,t,n){return re(tn(e,n),t)},bn=function(e,t){return re(u(e),t)},yn=function(e,t){var n=[];return x(u(e),function(e){n=(n=t(e)?n.concat([e]):n).concat(yn(e,t))}),n},xn=function(e,t,n){return vn(e,function(e){return $t(e,t)},n)},wn=function(e,t){return bn(e,function(e){return $t(e,t)})},Cn=function(e,t){return Xt(t,e)},Sn=function(e,t,n){for(var r,o=e.dom(),i=Z(n)?n:S(!1);o.parentNode;){if(o=o.parentNode,t(r=N.fromDom(o)))return k.some(r);if(i(r))break}return k.none()},kn=function(e,t,n){return Hd(function(e){return t(e)},Sn,e,t,n)},Tn=function(e,t){return ue(e.dom().childNodes,L(t,N.fromDom)).map(N.fromDom)},Nn=function(e,r){function o(e){for(var t,n=0;n<e.childNodes.length;n++){if(r(N.fromDom(e.childNodes[n])))return k.some(N.fromDom(e.childNodes[n]));if((t=o(e.childNodes[n])).isSome())return t}return k.none()}return o(e.dom())},En=function(e,t,n){return Sn(e,function(e){return $t(e,t)},n)},Rn=function(e,t){return Tn(e,function(e){return $t(e,t)})},_n=function(e,t){return Kt(t,e)},l=function(e,t,n){return Hd($t,En,e,t,n)},Dn={firstLayer:function(e,t){return An(e,t,S(!0))},filterFirstLayer:An=function(e,t,n){return de(u(e),function(e){return $t(e,t)?n(e)?[e]:[]:An(e,t,n)})}},Pn=function(e,t,n){var r=void 0!==n?n:S(!1);return r(t)?k.none():c(e,b(t))?k.some(t):(n=function(e){return $t(e,"table")||r(e)},En(t,e.join(","),n))},i=function(e,t){return Pn(["td","th"],e,t)},B=function(e){return Dn.firstLayer(e,"th,td")},r=function(e,t){return Pn(["caption","tr","tbody","tfoot","thead"],e,t)},fu=M(e=function(t,e){return en(e).map(function(e){return wn(e,t)})},"th,td"),o=M(e,"tr"),R={cell:i,firstCell:function(e){return _n(e,"th,td")},cells:B,neighbourCells:fu,table:function(e,t){return l(e,"table",t)},row:function(e,t){return Pn(["tr"],e,t)},rows:function(e){return Dn.firstLayer(e,"tr")},notCell:r,neighbourRows:o,attr:On=function(e,t){return parseInt(w(e,t),10)},grid:function(e,t,n){t=On(e,t),e=On(e,n);return m.grid(t,e)}},Bn={fromTable:function(e){e=R.rows(e);return h(e,function(e){var t=e,n=en(t).map(function(e){e=b(e);return"tfoot"===e||"thead"===e||"tbody"===e?e:"tbody"}).getOr("tbody"),e=h(R.cells(e),function(e){var t=Le(e,"rowspan")?parseInt(w(e,"rowspan"),10):1,n=Le(e,"colspan")?parseInt(w(e,"colspan"),10):1;return m.detail(e,t,n)});return m.rowdata(t,e,n)})},fromPastedRows:function(e,n){return h(e,function(e){var t=h(R.cells(e),function(e){var t=Le(e,"rowspan")?parseInt(w(e,"rowspan"),10):1,n=Le(e,"colspan")?parseInt(w(e,"colspan"),10):1;return m.detail(e,t,n)});return m.rowdata(e,t,n.section())})}},g={generate:function(e){var c={},t=[],n=e.length,l=0;return x(e,function(e,u){var s=[];x(e.cells(),function(e,t){for(var n,r,o,i,a=0;void 0!==c[u+","+a];)a++;for(n=m.extended(e.element(),e.rowspan(),e.colspan(),u,a),r=0;r<e.colspan();r++)for(o=0;o<e.rowspan();o++)c[u+o+","+(i=a+r)]=n,l=Math.max(l,i+1);s.push(n)}),t.push(m.rowdata(e.element(),s,e.section()))}),e=m.grid(n,l),{grid:S(e),access:S(c),all:S(t)}},getAt:function(e,t,n){e=e.access()[t+","+n];return void 0!==e?k.some(e):k.none()},findItem:function(e,t,n){e=Mn(e,function(e){return n(t,e.element())});return 0<e.length?k.some(e[0]):k.none()},filterItems:Mn=function(e,t){e=de(e.all(),function(e){return e.cells()});return re(e,t)},justCells:function(e){e=h(e.all(),function(e){return e.cells()});return fe(e)}},In=t("minRow","minCol","maxRow","maxCol"),Ln=function(e,o){var t=e.grid().columns(),i=e.grid().rows(),a=t,u=0,s=0;return ye(e.access(),function(e){var t,n,r;o(e)&&(n=(t=e.row())+e.rowspan()-1,e=(r=e.column())+e.colspan()-1,t<i?i=t:u<n&&(u=n),r<a?a=r:s<e&&(s=e))}),In(i,a,u,s)},Fn=function(e,t,n){e=e[n].element(),n=N.fromTag("td");d(n,N.fromTag("br")),(t?d:cn)(e,n)},Hn=function(e,t,n,r){for(var o,i,a=t.grid().columns(),u=t.grid().rows(),s=0;s<u;s++)for(o=!1,i=0;i<a;i++)s<n.minRow()||s>n.maxRow()||i<n.minCol()||i>n.maxCol()||(g.getAt(t,s,i).filter(r).isNone()?Fn(e,o,s):o=!0)},zn=function(e,t){var n=re(Dn.firstLayer(e,"tr"),function(e){return 0===e.dom().childElementCount});x(n,hn),t.minCol()!==t.maxCol()&&t.minRow()!==t.maxRow()||x(Dn.firstLayer(e,"th,td"),function(e){T(e,"rowspan"),T(e,"colspan")}),T(e,"width"),T(e,"height"),tt(e,"width"),tt(e,"height")},Un={extract:function(e,t){var n=function(e){return $t(e.element(),t)},r=Bn.fromTable(e),o=g.generate(r),i=Ln(o,n),a="th:not("+t+"),td:not("+t+")",u=Dn.filterFirstLayer(e,"th,td",function(e){return $t(e,a)});return x(u,hn),Hn(r,o,i,n),zn(e,i),e}},Pd=Oe,Od="text",Bd=function(e){if(Pd(e))return Fd(e).getOr("");throw new Error("Can only get "+Od+" value of a "+Od+" node")},Md=function(e){try{return Id(e)}catch(e){return k.none()}},Id=function(e){return Pd(e)?k.from(e.dom().nodeValue):k.none()},Ld=Ad.detect().browser,Fd=Ld.isIE()&&10===Ld.version.major?Md:Id,Wn={get:Bd,getOption:Fd,set:function(e,t){if(!Pd(e))throw new Error("Can only set raw "+Od+" value of a "+Od+" node");e.dom().nodeValue=t}},jn=function(e){return Wn.get(e)},Vn=function(e){return Wn.getOption(e)},qn=function(e,t){Wn.set(e,t)},$n=function(e){return"img"===b(e)?1:Vn(e).fold(function(){return u(e).length},function(e){return e.length})},Yn=function(e){return Vn(e).filter(function(e){return 0!==e.trim().length||-1<e.indexOf("")}).isSome()},Xn=["img","br"],Kn=function(e){return Yn(e)||c(Xn,b(e))},Gn=function(e){return Nn(e,Kn)},Jn=function(e){return Zn(e,Kn)},Zn=function(e,o){function i(e){for(var t,n=u(e),r=n.length-1;0<=r;r--){if(t=n[r],o(t))return k.some(t);if((t=i(t)).isSome())return t}return k.none()}return i(e)},Qn=function(e,t){return N.fromDom(e.dom().cloneNode(t))},er=function(e){return Qn(e,!1)},tr=function(e){return Qn(e,!0)},nr=function(e,t){t=N.fromTag(t),e=Fe(e);return Ie(t,e),t},rr=function(e,t){t=nr(e,t),e=u(tr(e));return mn(t,e),t},or=function(){var e=N.fromTag("td");return d(e,N.fromTag("br")),e},ir=function(e,t,n){var r=rr(e,t);return ye(n,function(e,t){null===e?T(r,t):y(r,t,e)}),r},ar=function(e){return e},ur=function(e){return function(){return N.fromTag("tr",e.dom())}},sr=function(n,r,o){return Gn(n).map(function(e){var t=o.join(","),e=xn(e,t,function(e){return E(e,n)});return ie(e,function(e,t){t=er(t);return T(t,"contenteditable"),d(e,t),t},r)}).getOr(r)},cr={cellOperations:function(r,e,o){return{row:ur(e),cell:function(e){var t=Zt(e.element()),t=N.fromTag(b(e.element()),t.dom()),n=o.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),n=0<n.length?sr(e.element(),t,n):t;return d(n,N.fromTag("br")),nt(e.element(),t),tt(t,"height"),1!==e.colspan()&&tt(e.element(),"width"),r(e.element(),t),t},replace:ir,gap:or}},paste:function(e){return{row:ur(e),cell:or,replace:ar,gap:or}}},lr=function(e,t){t=(t||s.document).createElement("div");return t.innerHTML=e,u(N.fromDom(t))},fr=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],dr=t("left","right"),mr=function(e,t,n){var r=e.property().children(t);return se(r,M(e.eq,n)).map(function(e){return{before:S(r.slice(0,e)),after:S(r.slice(e+1))}})},gr=function(n,r,o){return mr(n,r,o).map(function(e){var t=n.create().clone(r);return n.insert().appendAll(t,e.before().concat([o])),n.insert().appendAll(r,e.after()),n.insert().before(r,t),dr(t,r)})},hr=function(n,r,e){return mr(n,r,e).map(function(e){var t=n.create().clone(r);return n.insert().appendAll(t,e.after()),n.insert().after(r,t),dr(r,t)})},pr=function(i,e,a,u){var r=t("first","second","splits"),s=function(e,t,o){var n=r(e,k.none(),o);return a(e)?r(e,t,o):i.property().parent(e).bind(function(r){return u(i,r,e).map(function(e){var t=[{first:e.left,second:e.right}],n=a(r)?r:e.left();return s(n,k.some(e.right()),o.concat(t))}).getOr(n)})};return s(e,k.none(),[])},vr=function(e,t,n,r){return r(e,t,n[0],n.slice(1))},br=function(n,r,e,t){e=r(n,e);return ie(t,function(e,t){t=r(n,t);return yr(n,e,t)},e)},yr=function(t,e,n){return e.bind(function(e){return n.filter(M(t.eq,e))})},xr=function(e,t,n){return 0<n.length?vr(e,t,n,br):k.none()},wr=function(e,t){return M(e.eq,t)},Cr=function(n,r,e,t){var o,i,a=n.property().children(r);return n.eq(r,e[0])?k.some([e[0]]):n.eq(r,t[0])?k.some([t[0]]):(e=(o=function(e){var e=he(e),t=se(e,wr(n,r)).getOr(-1),e=t<e.length-1?e[t+1]:e[t];return se(a,wr(n,e))})(e),i=o(t),e.bind(function(n){return i.map(function(e){var t=Math.min(n,e),e=Math.max(n,e);return a.slice(t,e+1)})}))},kr=function(t,e,n){var r=Sr(t,e,n);return r.shared().bind(function(e){return Cr(t,e,r.firstpath(),r.secondpath())})},Tr=Sr=function(t,e,n,r){var o=void 0!==r?r:S(!1),r=[e].concat(t.up().all(e)),e=[n].concat(t.up().all(n)),n=function(t){return se(t,o).fold(function(){return t},function(e){return t.slice(0,e+1)})},r=n(r),i=n(e),n=ue(r,function(e){return te(i,wr(t,e))});return{firstpath:S(r),secondpath:S(i),shared:S(n)}},Nr=function(e,t,n){return xr(e,t,n)},Er=function(e,t,n){return kr(e,t,n)},Rr=function(e,t,n,r){return Tr(e,t,n,r)},_r=function(e,t,n){return gr(e,t,n)},Ar=function(e,t,n){return hr(e,t,n)},Dr=function(e,t,n,r){return pr(e,t,n,r)},Pr=zd(),Or={sharedOne:function(n,e){return Nr(Pr,function(e,t){return n(t)},e)},subset:function(e,t){return Er(Pr,e,t)},ancestors:function(e,t,n){return Rr(Pr,e,t,n)},breakToLeft:function(e,t){return _r(Pr,e,t)},breakToRight:function(e,t){return Ar(Pr,e,t)},breakPath:function(e,t,r){return Dr(Pr,e,t,function(e,t,n){return r(t,n)})}},Mr=function(e,t){var n=t.column(),r=t.column()+t.colspan()-1,o=t.row(),t=t.row()+t.rowspan()-1;return n<=e.finishCol()&&r>=e.startCol()&&o<=e.finishRow()&&t>=e.startRow()},Br=function(e,t){return t.column()>=e.startCol()&&t.column()+t.colspan()-1<=e.finishCol()&&t.row()>=e.startRow()&&t.row()+t.rowspan()-1<=e.finishRow()},Ir=function(e,t){for(var n,r=!0,o=M(Br,t),i=t.startRow();i<=t.finishRow();i++)for(n=t.startCol();n<=t.finishCol();n++)r=r&&g.getAt(e,i,n).exists(o);return r?k.some(t):k.none()},Lr=function(e,t){return m.bounds(Math.min(e.row(),t.row()),Math.min(e.column(),t.column()),Math.max(e.row()+e.rowspan()-1,t.row()+t.rowspan()-1),Math.max(e.column()+e.colspan()-1,t.column()+t.colspan()-1))},Hr=Fr=function(e,t,n){var t=g.findItem(e,t,E),r=g.findItem(e,n,E);return t.bind(function(t){return r.map(function(e){return Lr(t,e)})})},zr=function(t,e,n){return Fr(t,e,n).bind(function(e){return Ir(t,e)})},Ur=function(n,e,r,o){return g.findItem(n,e,E).bind(function(e){var t=0<r?e.row()+e.rowspan()-1:e.row(),e=0<o?e.column()+e.colspan()-1:e.column();return g.getAt(n,t+r,e+o).map(function(e){return e.element()})})},Wr=function(t,e,n){return Hr(t,e,n).map(function(e){e=g.filterItems(t,M(Mr,e));return h(e,function(e){return e.element()})})},jr=function(e,t){return g.findItem(e,t,function(e,t){return Gt(t,e)}).bind(function(e){return e.element()})},Vr=function(e){e=Bn.fromTable(e);return g.generate(e)},qr=function(t,n,r){return R.table(t).bind(function(e){e=Vr(e);return Ur(e,t,n,r)})},$r=function(e,t,n){e=Vr(e);return Wr(e,t,n)},Yr=function(e,t,n,r,o){var i=Vr(e),n=E(e,n)?t:jr(i,t),t=E(e,o)?r:jr(i,r);return Wr(i,n,t)},Xr=function(e,t,n){e=Vr(e);return zr(e,t,n)},Kr=function(e,t){return En(e,"table")},Gr=Re(["boxes","start","finish"],[]),Zr=function(e,t){return ue(e,function(e){return $t(e,t)})},Qr=function(t,n){return En(t,"table").bind(function(e){return _n(e,n).bind(function(e){return Jr(e,t).bind(function(t){return t.boxes().map(function(e){return{boxes:S(e),start:S(t.start()),finish:S(t.finish())}})})})})},eo={identify:Jr=function(i,a,n){function u(t){return function(e){return n(e)||E(e,t)}}return E(i,a)?k.some(Gr({boxes:k.some([i]),start:i,finish:a})):Kr(i).bind(function(o){return Kr(a).bind(function(r){var e,t;return E(o,r)?k.some(Gr({boxes:$r(o,i,a),start:i,finish:a})):Gt(o,r)?(t=0<(e=xn(a,"td,th",u(o))).length?e[e.length-1]:a,k.some(Gr({boxes:Yr(o,i,o,a,r),start:i,finish:t}))):Gt(r,o)?(t=0<(e=xn(i,"td,th",u(r))).length?e[e.length-1]:i,k.some(Gr({boxes:Yr(r,i,o,a,r),start:i,finish:t}))):Or.ancestors(i,a).shared().bind(function(e){return l(e,"table",n).bind(function(e){var t=xn(a,"td,th",u(e)),t=0<t.length?t[t.length-1]:a,n=xn(i,"td,th",u(e)),n=0<n.length?n[n.length-1]:i;return k.some(Gr({boxes:Yr(e,i,o,a,r),start:n,finish:t}))})})})})},retrieve:function(e,t){e=Cn(e,t);return 0<e.length?k.some(e):k.none()},shiftSelection:function(e,t,n,r,o){return Zr(e,o).bind(function(e){return qr(e,t,n).bind(function(e){return Qr(e,r)})})},getEdges:function(e,t,r){return _n(e,t).bind(function(n){return _n(e,r).bind(function(t){return Or.sharedOne(Kr,[n,t]).map(function(e){return{first:S(n),last:S(t),table:S(e)}})})})}},to={retrieve:function(e,t){return eo.retrieve(e,t)},retrieveBox:function(o,e,t){return eo.getEdges(o,e,t).bind(function(n){var e=function(e){return E(o,e)},t=En(n.first(),"thead,tfoot,tbody,table",e),r=En(n.last(),"thead,tfoot,tbody,table",e);return t.bind(function(t){return r.bind(function(e){return E(t,e)?Xr(n.table(),n.first(),n.last()):k.none()})})})}},Bf="data-mce-selected",na="data-mce-first-selected",ra="data-mce-last-selected",no={selected:S(Bf),selectedSelector:S("td[data-mce-selected],th[data-mce-selected]"),attributeSelector:S("[data-mce-selected]"),firstSelected:S(na),firstSelectedSelector:S("td[data-mce-first-selected],th[data-mce-first-selected]"),lastSelected:S(ra),lastSelectedSelector:S("td[data-mce-last-selected],th[data-mce-last-selected]")},e=(ro=function(a){var u,n;if(!G(a))throw new Error("cases must be an array");if(0===a.length)throw new Error("there must be at least one case");return u=[],n={},x(a,function(e,r){var o,i,t=be(e);if(1!==t.length)throw new Error("one and only one name per case");if(o=t[0],i=e[o],void 0!==n[o])throw new Error("duplicate key detected:"+o);if("cata"===o)throw new Error("cannot have a case named cata (sorry)");if(!G(i))throw new Error("case arguments must be an array");u.push(o),n[o]=function(){var n,e,t=arguments.length;if(t!==i.length)throw new Error("Wrong number of arguments to case "+o+". Expected "+i.length+" ("+i+"), got "+t);for(n=new Array(t),e=0;e<n.length;e++)n[e]=arguments[e];return{fold:function(){if(arguments.length!==a.length)throw new Error("Wrong number of arguments to fold. Expected "+a.length+", got "+arguments.length);return arguments[r].apply(null,n)},match:function(e){var t=be(e);if(u.length!==t.length)throw new Error("Wrong number of arguments to match. Expected: "+u.join(",")+"\nActual: "+t.join(","));if(me(u,function(e){return c(t,e)}))return e[o].apply(null,n);throw new Error("Not all branches were specified when using match. Specified: "+t.join(", ")+"\nRequired: "+u.join(", "))},log:function(e){s.console.log(e,{constructors:u,constructor:o,params:n})}}}}),n})([{none:[]},{multiple:["elements"]},{single:["selection"]}]),oo={cata:function(e,t,n,r){return e.fold(t,n,r)},none:e.none,multiple:e.multiple,single:e.single},ao=function(n,e){return oo.cata(e.get(),k.none,function(t,e){return 0===t.length?k.none():to.retrieveBox(n,no.firstSelectedSelector(),no.lastSelectedSelector()).bind(function(e){return 1<t.length?k.some({bounds:S(e),cells:S(t)}):k.none()})},k.none)},uo=function(e,t){var n=function(e){return Le(e,"rowspan")&&1<parseInt(w(e,"rowspan"),10)||Le(e,"colspan")&&1<parseInt(w(e,"colspan"),10)},e=io(e,t);return 0<e.length&&me(e,n)?k.some(e):k.none()},so=io=function(e,t){return oo.cata(t.get(),S([]),F,S([e]))},i=function(e,t,n){return{element:S(n),mergable:S(ao(t,e)),unmergable:S(uo(n,e)),selection:S(so(n,e))}},fu=B=function(e){return{element:S(e),mergable:k.none,unmergable:k.none,selection:S([e])}},r=t("element","clipboard","generators"),co={noMenu:B,forMenu:i,notCell:fu,paste:r,pasteRows:function(e,t,n,r,o){return{element:S(n),mergable:k.none,unmergable:k.none,selection:S(so(n,e)),clipboard:S(r),generators:S(o)}}},lo=function(e){return R.table(e[0]).map(tr).map(function(e){return[Un.extract(e,no.attributeSelector())]})},fo=function(t,e){return h(e,function(e){return t.selection.serializer.serialize(e.dom(),{})}).join("")},mo=function(e){return h(e,function(e){return e.dom().innerText}).join("")},go=function(i,e,a,u){i.on("BeforeGetContent",function(t){!0===t.selection&&oo.cata(e.get(),C,function(e){t.preventDefault(),lo(e).each(function(e){t.content="text"===t.format?mo(e):fo(i,e)})},C)}),i.on("BeforeSetContent",function(o){!0===o.selection&&!0===o.paste&&k.from(i.dom.getParent(i.selection.getStart(),"th,td")).each(function(e){var r=N.fromDom(e);R.table(r).each(function(t){var e,n=re(lr(o.content),function(e){return"meta"!==b(e)});1===n.length&&"table"===b(n[0])&&(o.preventDefault(),e=N.fromDom(i.getDoc()),e=cr.paste(e),n=co.paste(r,n[0],e),a.pasteCells(t,n).each(function(e){i.selection.setRng(e),i.focus(),u.clear(t)}))})})})},ho=Ud("height",function(e){var t=e.dom();return qe(e)?t.getBoundingClientRect().height:t.offsetHeight}),po=function(e){return ho.get(e)},vo=function(e){return ho.getOuter(e)},bo=Ud("width",function(e){return e.dom().offsetWidth}),yo=function(e){return bo.get(e)},xo=function(e){return bo.getOuter(e)},wo=Ad.detect(),Co=function(){return wo.browser.isIE()||wo.browser.isEdge()},So=function(e,t){e=parseFloat(e);return isNaN(e)?t:e},ko=function(e,t,n){return So(Ze(e,t),n)},To=function(e){var t=ko(e,"padding-top",0),n=ko(e,"padding-bottom",0),r=ko(e,"border-top-width",0),o=ko(e,"border-bottom-width",0),i=e.dom().getBoundingClientRect().height;return"border-box"===Ze(e,"box-sizing")?i:i-t-n-(r+o)},No=function(e){return Co()?To(e):ko(e,"height",po(e))},Eo=/(\d+(\.\d+)?)(\w|%)*/,_o=/(\d+(\.\d+)?)px|em/,o=function(e,t){Ge(e,"width",t+"px")},Ld=function(e,t){Ge(e,"width",t+"%")},Ao=function(e,t){Ge(e,"height",t+"px")},Do=function(e){return et(e,"height").getOrThunk(function(){return No(e)+"px"})},Po=function(e,t,n,r){var o=R.table(e).map(function(e){e=n(e);return Math.floor(t/100*e)}).getOr(t);return r(e,o),o},Oo=function(e,t,n,r){var o=parseInt(e,10);return ze(e,"%")&&"table"!==b(t)?Po(t,o,n,r):o},Bo=function(e){var t=Do(e);return t?Oo(t,e,po,Ao):po(e)},Mo=function(e,t,n){return n(e)/Io(e,t)},Io=function(e,t){return Le(e,t)?parseInt(w(e,t),10):1},Lo=function(e){return et(e,"width").fold(function(){return k.from(w(e,"width"))},function(e){return k.some(e)})},Fo=function(e,t){return e/t.pixelWidth()*100},Ho=function(e,t,n){return Ro.test(t)?(t=Ro.exec(t),parseFloat(t[1])):(t=yo(e),Fo(t,n))},Md=function(t,n){return Lo(t).fold(function(){var e=yo(t);return Fo(e,n)},function(e){return Ho(t,e,n)})},zo=function(e,t){return e/100*t.pixelWidth()},Uo=function(e,t,n){var r;return _o.test(t)?(r=_o.exec(t),parseInt(r[1],10)):Ro.test(t)?(r=Ro.exec(t),t=parseFloat(r[1]),zo(t,n)):yo(e)},Bd=function(t,n){return Lo(t).fold(function(){return yo(t)},function(e){return Uo(t,e,n)})},Bf=function(e){return Mo(e,"rowspan",Bo)},na=function(e){return Lo(e).bind(function(e){return Eo.test(e)?(e=Eo.exec(e),k.some({width:S(e[1]),unit:S(e[3])})):k.none()})},ra=function(e,t,n){Ge(e,"width",t+n)},a={percentageBasedSizeRegex:S(Ro=/(\d+(\.\d+)?)%/),pixelBasedSizeRegex:S(_o),setPixelWidth:o,setPercentageWidth:Ld,setHeight:Ao,getPixelWidth:Bd,getPercentageWidth:Md,getGenericWidth:na,setGenericWidth:ra,getHeight:Bf,getRawWidth:Lo},Wo={halve:function(n,r){a.getGenericWidth(n).each(function(e){var t=e.width()/2;a.setGenericWidth(n,t,e.unit()),a.setGenericWidth(r,t,e.unit())})}},jo=function(e,t){t=t||N.fromDom(s.document.documentElement);return Sn(e,M(E,t)).isSome()},Vo=function(e){var t=e.dom();return t===t.window&&e instanceof s.Window?e:Be(e)?t.defaultView||t.parentWindow:null},$o=qo=function(n,r){return{left:S(n),top:S(r),translate:function(e,t){return qo(n+e,r+t)}}},Yo=function(e){e=e.getBoundingClientRect();return $o(e.left,e.top)},Xo=function(e,t){return void 0!==e?e:void 0!==t?t:0},Ko=function(e){var t=e.dom().ownerDocument,n=t.body,r=Vo(N.fromDom(t)),t=t.documentElement,o=Xo(r.pageYOffset,t.scrollTop),r=Xo(r.pageXOffset,t.scrollLeft),i=Xo(t.clientTop,n.clientTop),t=Xo(t.clientLeft,n.clientLeft);return Go(e).translate(r-t,o-i)},Go=function(e){var t=e.dom(),n=t.ownerDocument,r=n.body,n=N.fromDom(n.documentElement);return r===t?$o(r.offsetLeft,r.offsetTop):jo(e,n)?Yo(t):$o(0,0)},Jo=t("row","y"),Zo=t("col","x"),Qo=function(e){return Ko(e).left()+xo(e)},ei=function(e){return Ko(e).left()},e=function(e,t){return Zo(e,ei(t))},B=function(e,t){return Zo(e,Qo(t))},ti=function(e){return Ko(e).top()},i=function(e,t){return-e},r={delta:F,positions:M(fu=function(n,t,r){var e,o;return 0===r.length?[]:(e=h(r.slice(1),function(e,t){return e.map(function(e){return n(t,e)})}),o=r[r.length-1].map(function(e){return t(r.length-1,e)}),e.concat([o]))},function(e,t){return Jo(e,ti(t))},function(e,t){return Jo(e,ti(t)+vo(t))}),edge:ti},o={delta:F,edge:ei,positions:M(fu,e,B)},Ld={delta:i,edge:Qo,positions:M(fu,B,e)},ri={ltr:(ni={height:r,rtl:Ld,ltr:o}).ltr,rtl:ni.rtl},oi={getGridSize:function(e){e=Bn.fromTable(e);return g.generate(e).grid()}},ii=Object.prototype.hasOwnProperty,ai=function(a){return function(){for(var e,t,n,r,o=new Array(arguments.length),i=0;i<o.length;i++)o[i]=arguments[i];if(0===o.length)throw new Error("Can't merge zero objects");for(e={},t=0;t<o.length;t++)for(r in n=o[t])ii.call(n,r)&&(e[r]=a(e[r],n[r]));return e}}(function(e,t){return t}),ui=function(e){for(var t=[],n=function(e){t.push(e)},r=0;r<e.length;r++)e[r].each(n);return t},si=function(e,t){for(var n,r=0;r<e.length;r++)if((n=t(e[r],r)).isSome())return n;return k.none()},ci=function(e,t,n,r){n===r?T(e,t):y(e,t,n)},li=function(r,e){var o=[],i=[],n=function(e,t){var n=Rn(r,t).getOrThunk(function(){var e=N.fromTag(t,Zt(r).dom());return d(r,e),e});gn(n),e=h(e,function(e){e.isNew()&&o.push(e.element());var t=e.element();return gn(t),x(e.cells(),function(e){e.isNew()&&i.push(e.element()),ci(e.element(),"colspan",e.colspan(),1),ci(e.element(),"rowspan",e.rowspan(),1),d(t,e.element())}),t}),mn(n,e)},a=function(e){Rn(r,e).each(hn)},t=function(e,t){0<e.length?n(e,t):a(t)},u=[],s=[],c=[];return x(e,function(e){switch(e.section()){case"thead":u.push(e);break;case"tbody":s.push(e);break;case"tfoot":c.push(e)}}),t(u,"thead"),t(s,"tbody"),t(c,"tfoot"),{newRows:S(o),newCells:S(i)}},fi=function(e){return h(e,function(e){var n=er(e.element());return x(e.cells(),function(e){var t=tr(e.element());ci(t,"colspan",e.colspan(),1),ci(t,"rowspan",e.rowspan(),1),d(n,t)}),n})},di=function(e,t){e=w(e,t);return void 0===e||""===e?[]:e.split(" ")},mi=function(e,t,n){n=di(e,t).concat([n]);return y(e,t,n.join(" ")),!0},gi=function(e,t,n){var r=re(di(e,t),function(e){return e!==n});return 0<r.length?y(e,t,r.join(" ")):T(e,t),!1},hi=function(e){return void 0!==e.dom().classList},pi=function(e){return di(e,"class")},vi=function(e,t){return mi(e,"class",t)},bi=function(e,t){return gi(e,"class",t)},yi=function(e,t){hi(e)?e.dom().classList.add(t):vi(e,t)},xi=function(e){0===(hi(e)?e.dom().classList:pi(e)).length&&T(e,"class")},wi=function(e,t){hi(e)?e.dom().classList.remove(t):bi(e,t),xi(e)},Ci=function(e,t){return hi(e)&&e.dom().classList.contains(t)},Si={repeat:function(e,t){for(var n=[],r=0;r<e;r++)n.push(t(r));return n},range:function(e,t){for(var n=[],r=e;r<t;r++)n.push(r);return n},unique:function(n,r){var o=[];return x(n,function(e,t){(t<n.length-1&&!r(e,n[t+1])||t===n.length-1)&&o.push(e)}),o},deduce:function(t,n){var e,r;return n<0||n>=t.length-1?k.none():(e=t[n].fold(function(){var e=he(t.slice(0,n));return si(e,function(e,t){return e.map(function(e){return{value:e,delta:t+1}})})},function(e){return k.some({value:e,delta:0})}),r=t[n+1].fold(function(){var e=t.slice(n+1);return si(e,function(e,t){return e.map(function(e){return{value:e,delta:t+1}})})},function(e){return k.some({value:e,delta:1})}),e.bind(function(n){return r.map(function(e){var t=e.delta+n.delta;return Math.abs(e.value-n.value)/t})}))}},ki=function(e,t,n){var r=e();return ue(r,t).orThunk(function(){return k.from(r[0]).orThunk(n)}).map(function(e){return e.element()})},Ti={columns:function(n){var e=n.grid(),t=Si.range(0,e.columns()),r=Si.range(0,e.rows());return h(t,function(t){return ki(function(){return de(r,function(e){return g.getAt(n,e,t).filter(function(e){return e.column()===t}).fold(S([]),function(e){return[e]})})},function(e){return 1===e.colspan()},function(){return g.getAt(n,0,t)})})},rows:function(n){var e=n.grid(),t=Si.range(0,e.rows()),r=Si.range(0,e.columns());return h(t,function(t){return ki(function(){return de(r,function(e){return g.getAt(n,t,e).filter(function(e){return e.row()===t}).fold(S([]),function(e){return[e]})})},function(e){return 1===e.rowspan()},function(){return g.getAt(n,t,0)})})}},Md={resolve:(Bd=function(e){var t=e.replace(/\./g,"-");return{resolve:function(e){return t+"-"+e}}})("ephox-snooker").resolve},Ni=function(e,t,n,r,o){var i=N.fromTag("div");return Je(i,{position:"absolute",left:t-r/2+"px",top:n+"px",height:o+"px",width:r+"px"}),Ie(i,{"data-column":e,role:"presentation"}),i},Ei=function(e,t,n,r,o){var i=N.fromTag("div");return Je(i,{position:"absolute",left:t+"px",top:n-o/2+"px",height:o+"px",width:r+"px"}),Ie(i,{"data-row":e,role:"presentation"}),i},Ri=Md.resolve("resizer-bar"),_i=Md.resolve("resizer-rows"),Ai=Md.resolve("resizer-cols"),Pi=function(n,e,r){var o=n.origin();x(e,function(e,t){e.each(function(e){e=r(o,e);yi(e,Ri),d(n.parent(),e)})})},Oi=function(e,t,n,r){Pi(e,t,function(e,t){t=Ni(t.col(),t.x()-e.left(),n.top()-e.top(),7,r);return yi(t,Ai),t})},Bi=function(e,t,n,r){Pi(e,t,function(e,t){t=Ei(t.row(),n.left()-e.left(),t.y()-e.top(),r,7);return yi(t,_i),t})},Mi=function(e,t,n,r,o,i){var a=Ko(t),o=0<n.length?o.positions(n,t):[];Bi(e,o,a,xo(t)),n=0<r.length?i.positions(r,t):[],Oi(e,n,a,vo(t))},Ii=function(e,t){e=Cn(e.parent(),"."+Ri);x(e,t)},Li=function(e,t,n,r){var o,i;Di(e),i=Bn.fromTable(t),i=g.generate(i),o=Ti.rows(i),i=Ti.columns(i),Mi(e,t,o,i,n,r)},Fi=function(e){Ii(e,function(e){Ge(e,"display","none")})},Hi=function(e){Ii(e,function(e){Ge(e,"display","block")})},zi=Di=function(e){e=Cn(e.parent(),"."+Ri);x(e,hn)},Ui=function(e){return Ci(e,_i)},Wi=function(e){return Ci(e,Ai)},p={addCell:function(e,t,n){var r=e.cells(),o=r.slice(0,t),r=r.slice(t),t=o.concat([n]).concat(r);return ji(e,t)},setCells:ji=function(e,t){return m.rowcells(t,e.section())},mutateCell:function(e,t,n){e.cells()[t]=n},getCell:Vi=function(e,t){return e.cells()[t]},getCellElement:function(e,t){return Vi(e,t).element()},mapCells:function(e,t){var n=e.cells(),n=h(n,t);return m.rowcells(n,e.section())},cellLength:function(e){return e.cells().length}},qi=function(e,t){return h(e,function(e){return p.getCell(e,t)})},$i=function(e,t){var n;return 0===e.length?0:(n=e[0],se(e,function(e){return!t(n.element(),e.element())}).fold(function(){return e.length},function(e){return e}))},Yi=function(e,t,n,r){var o=e[t].cells().slice(n),o=$i(o,r),e=qi(e,n).slice(t),n=$i(e,r);return{colspan:S(o),rowspan:S(n)}},Xi={toDetails:function(o,i){var a=h(o,function(e,t){return h(e.cells(),function(e,t){return!1})}),u=function(e,t,n,r){for(var o,i=e;i<e+n;i++)for(o=t;o<t+r;o++)a[i][o]=!0};return h(o,function(e,r){var t=de(e.cells(),function(e,t){var n;return!1===a[r][t]?(n=Yi(o,r,t,i),u(r,t,n.rowspan(),n.colspan()),[m.detailnew(e.element(),n.rowspan(),n.colspan(),e.isNew())]):[]});return m.rowdetails(t,e.section())})},toGrid:function(e,t,n){for(var r,o,i,a,u=[],s=0;s<e.grid().rows();s++){for(r=[],o=0;o<e.grid().columns();o++)i=g.getAt(e,s,o).map(function(e){return m.elementnew(e.element(),n)}).getOrThunk(function(){return m.elementnew(t.gap(),!0)}),r.push(i);a=m.rowcells(r,e.all()[s].section()),u.push(a)}return u}},Ki=function(e,t){return Xi.toGrid(e,t,!1)},Gi=function(e,n){return h(e,function(e){t=e.details();var t=si(t,function(e){return en(e.element()).map(function(e){var t=en(e).isNone();return m.elementnew(e,t)})}).getOrThunk(function(){return m.elementnew(n.row(),!0)});return m.rowdatanew(t.element(),e.details(),e.section(),t.isNew())})},Zi=function(e,t){e=fe(h(e.all(),function(e){return e.cells()}));return ue(e,function(e){return E(t,e.element())})},v=function(u,s,c,l,f){return function(n,r,e,o,i){var t=Bn.fromTable(r),a=g.generate(t);return s(a,e).map(function(e){var t=Ki(a,o),t=u(t,e,E,f(o)),e=Ji(t.grid(),o);return{grid:S(e),cursor:t.cursor}}).fold(function(){return k.none()},function(e){var t=li(r,e.grid());return c(r,e.grid(),i),l(r),Li(n,r,ni.height,i),k.some({cursor:e.cursor,newRows:t.newRows,newCells:t.newCells})})}},Qi=Ji=function(e,t){e=Xi.toDetails(e,E);return Gi(e,t)},ea=function(t,e){return R.cell(e.element()).bind(function(e){return Zi(t,e)})},ta=function(t,e){e=h(e.selection(),function(e){return R.cell(e).bind(function(e){return Zi(t,e)})}),e=ui(e);return 0<e.length?k.some(e):k.none()},na=function(t,n){return R.cell(n.element()).bind(function(e){return Zi(t,e).map(function(e){return ai(e,{generators:n.generators,clipboard:n.clipboard})})})},ra=function(t,e){var n=h(e.selection(),function(e){return R.cell(e).bind(function(e){return Zi(t,e)})}),n=ui(n);return 0<n.length?k.some(ai({cells:n},{generators:e.generators,clipboard:e.clipboard})):k.none()},Bf=function(e,t){return t.mergable()},i=function(e,t){return t.unmergable()},aa=oa=function(n){var e=function(e){return oa(n)},t=function(e){return oa(n)},r=function(e){return oa(e(n))},o=function(e){return oa(n)},i=function(e){e(n)},a=function(e){return e(n)},u=function(e,t){return t(n)},s=function(e){return e(n)},c=function(e){return e(n)},l=function(){return k.some(n)};return{is:function(e){return n===e},isValue:f,isError:W,getOr:S(n),getOrThunk:S(n),getOrDie:S(n),or:e,orThunk:t,fold:u,map:r,mapError:o,each:i,bind:a,exists:s,forall:c,toOption:l}},ua=ia=function(n){return{is:W,isValue:W,isError:f,getOr:F,getOrThunk:function(e){return e()},getOrDie:function(){return z(String(n))()},or:function(e){return e},orThunk:function(e){return e()},fold:function(e,t){return e(n)},map:function(e){return ia(n)},mapError:function(e){return ia(e(n))},each:C,bind:function(e){return ia(n)},exists:W,forall:f,toOption:k.none}},sa=function(e,t){return h(e,function(){return m.elementnew(t.cell(),!0)})},ca=function(t,e,n){return t.concat(Si.repeat(e,function(e){return p.setCells(t[t.length-1],sa(t[t.length-1].cells(),n))}))},la=function(e,t,n){return h(e,function(e){return p.setCells(e,e.cells().concat(sa(Si.range(0,t),n)))})},fa=function(e,t,n){var r;return e.row()>=t.length||e.column()>p.cellLength(t[0])?ua("invalid start address out of table bounds, row: "+e.row()+", column: "+e.column()):(e=(t=t.slice(e.row()))[0].cells().slice(e.column()),r=p.cellLength(n[0]),n=n.length,aa({rowDelta:S(t.length-n),colDelta:S(e.length-r)}))},da=function(e,t){e=p.cellLength(e[0]),t=p.cellLength(t[0]);return{rowDelta:S(0),colDelta:S(e-t)}},ma=function(e,t,n){var r=t.colDelta()<0?la:F;return(t.rowDelta()<0?ca:F)(r(e,Math.abs(t.colDelta()),n),Math.abs(t.rowDelta()),n)},ga=function(e,n){return ae(e,function(e,t){return te(e,function(e){return n(e.element(),t.element())})?e:e.concat([t])},[])},ha={merge:function(e,t,n,r){var o,i;if(0!==e.length)for(o=t.startRow();o<=t.finishRow();o++)for(i=t.startCol();i<=t.finishCol();i++)p.mutateCell(e[o],i,m.elementnew(r(),!1));return e},unmerge:function(e,t,n,r){for(var o,i,a=!0,u=0;u<e.length;u++)for(o=0;o<p.cellLength(e[0]);o++)!0===(i=n(p.getCellElement(e[u],o),t))&&!1===a?p.mutateCell(e[u],o,m.elementnew(r(),!0)):!0===i&&(a=!1);return e},splitRows:function(i,n,a,u){var e;return 0<n&&n<i.length&&(e=i[n-1].cells(),e=ga(e,a),x(e,function(r){for(var o=k.none(),e=function(n){for(var e=function(t){var e=i[n].cells()[t];a(e.element(),r.element())&&(o=o.isNone()?k.some(u()):o).each(function(e){p.mutateCell(i[n],t,m.elementnew(e,!0))})},t=0;t<p.cellLength(i[0]);t++)e(t)},t=n;t<i.length;t++)e(t)})),i}},pa=function(e,t,n,r){var r=M(r,p.getCell(e[t],n).element()),o=e[t];return 1<e.length&&1<p.cellLength(o)&&(0<n&&r(p.getCellElement(o,n-1))||n<o.length-1&&r(p.getCellElement(o,n+1))||0<t&&r(p.getCellElement(e[t-1],n))||t<e.length-1&&r(p.getCellElement(e[t+1],n)))},va=function(e,t,n,r,o){for(var i,a,u=e.row(),s=e.column(),c=u+n.length,l=s+p.cellLength(n[0]),f=u;f<c;f++)for(i=s;i<l;i++)pa(t,f,i,o)&&ha.unmerge(t,p.getCellElement(t[f],i),o,r.cell),a=p.getCellElement(n[f-u],i-s),a=r.replace(a),p.mutateCell(t[f],i,m.elementnew(a,!0));return t},ba=function(t,n,r,o,i){return fa(t,n,r).map(function(e){e=ma(n,e,o);return va(t,e,r,o,i)})},ya=function(e,t,n,r,o){return ha.splitRows(t,e,o,r.cell),o=da(n,t),n=ma(n,o,r),o=da(t,n),(t=ma(t,o,r)).slice(0,e).concat(n).concat(t.slice(e,t.length))},xa=function(n,r,e,o,i){var t=n.slice(0,r),a=n.slice(r),e=p.mapCells(n[e],function(e,t){return 0<r&&r<n.length&&o(p.getCellElement(n[r-1],t),p.getCellElement(n[r],t))?p.getCell(n[r],t):m.elementnew(i(e.element(),o),!0)});return t.concat([e]).concat(a)},wa=function(e,n,r,o,i){return h(e,function(e){var t=0<n&&n<p.cellLength(e)&&o(p.getCellElement(e,n-1),p.getCellElement(e,n))?p.getCell(e,n):m.elementnew(i(p.getCellElement(e,r),o),!0);return p.addCell(e,n,t)})},Ca=function(e,n,r,o,i){var a=r+1;return h(e,function(e,t){t=t===n?m.elementnew(i(p.getCellElement(e,r),o),!0):p.getCell(e,r);return p.addCell(e,a,t)})},Sa=function(e,t,n,r,o){var i=t+1,a=e.slice(0,i),i=e.slice(i),e=p.mapCells(e[t],function(e,t){return t===n?m.elementnew(o(e.element(),r),!0):e});return a.concat([e]).concat(i)},ka=function(e,t,n){return e.slice(0,t).concat(e.slice(n+1))},Ta=function(e,n,r){e=h(e,function(e){var t=e.cells().slice(0,n).concat(e.cells().slice(r+1));return m.rowcells(t,e.section())});return re(e,function(e){return 0<e.cells().length})},Na=function(e){return e.dom().textContent},Ea=function(e,n,r,o){return h(e,function(e){return p.mapCells(e,function(e){return t=e,te(n,function(e){return r(t.element(),e.element())})?m.elementnew(o(e.element(),r),!0):e;var t})})},Ra=function(e,t,n,r){return void 0!==p.getCellElement(e[t],n)&&0<t&&r(p.getCellElement(e[t-1],n),p.getCellElement(e[t],n))},_a=function(e,t,n){return 0<t&&n(p.getCellElement(e,t-1),p.getCellElement(e,t))},Aa=function(n,r,o,e){var t=de(n,function(e,t){return Ra(n,t,r,o)||_a(e,r,o)?[]:[p.getCell(e,r)]});return Ea(n,t,o,e)},Da=function(n,r,o,e){var i=n[r],t=de(i.cells(),function(e,t){return Ra(n,r,t,o)||_a(i,t,o)?[]:[e]});return Ea(n,t,o,e)},Pa=function(e,n,r,o){var e=oe(e,function(e){return b(p.getCell(e,n).element())}),t=function(e){e=h(e,function(e){var t=p.getCell(e,n);return{row:e,text:Na(t.element())}}),e=pe(e,function(e,t){e=r(e.text,t.text);return o?e:-1*e});return h(e,function(e){return e.row})};return de(e,function(e){return"th"===b(p.getCell(e[0],n).element())?e:t(e)})},Oa=function(e,t,n,r){var o=e[t].cells(),i=h(o,function(e){return Na(e.element())}),t=function(e){var t=oe(e.zippedCells,function(e){return b(e.reference.element())}),t=de(t,function(e){return"th"===b(e[0].reference.element())?e:pe(e,function(e,t){e=n(e.referenceText,t.referenceText);return r?e:-1*e})}),t=h(t,function(e){return e.cell});return m.rowcells(t,e.section)},e=h(e,function(e){return{zippedCells:h(e.cells(),function(e,t){return{cell:e,reference:o[t],referenceText:i[t]}}),section:e.section()}});return h(e,t)},Ba=function(e){return{fold:e}},Ma={none:function(){return Ba(function(e,t,n,r,o){return e()})},only:function(i){return Ba(function(e,t,n,r,o){return t(i)})},left:function(i,a){return Ba(function(e,t,n,r,o){return n(i,a)})},middle:function(i,a,u){return Ba(function(e,t,n,r,o){return r(i,a,u)})},right:function(i,a){return Ba(function(e,t,n,r,o){return o(i,a)})}},Ia=function(e,t){return 0===e.length?Ma.none():1===e.length?Ma.only(0):0===t?Ma.left(0,1):t===e.length-1?Ma.right(t-1,t):0<t&&t<e.length-1?Ma.middle(t-1,t,t+1):Ma.none()},La=function(e,t,o,i){var a=e.slice(0),e=Ia(e,t),u=function(e){return h(e,S(0))},t=S(u(a)),r=function(e,t){var n,r;return(0<=o?(n=Math.max(i.minCellWidth(),a[t]-o),u(a.slice(0,e)).concat([o,n-a[t]])):(n=Math.max(i.minCellWidth(),a[e]+o),r=a[e]-n,u(a.slice(0,e)).concat([n-a[e],r]))).concat(u(a.slice(t+1)))};return e.fold(t,function(e){return i.singleColumnWidth(a[e],o)},r,function(e,t,n){return r(t,n)},function(e,t){var n;return 0<=o?u(a.slice(0,t)).concat([o]):(n=Math.max(i.minCellWidth(),a[t]+o),u(a.slice(0,t)).concat([n-a[t]]))})},Fa=function(e,t){return Le(e,t)&&1<parseInt(w(e,t),10)},fu=function(e,t){return parseInt(Ze(e,t),10)},Ha={hasColspan:function(e){return Fa(e,"colspan")},hasRowspan:function(e){return Fa(e,"rowspan")},minWidth:S(10),minHeight:S(10),getInt:fu},za=function(e,t,n){return et(e,t).fold(function(){return n(e)+"px"},function(e){return e})},Ua=function(e){return za(e,"width",a.getPixelWidth)},Wa=function(e){return za(e,"height",a.getHeight)},ja=function(e,t,n,r,o){var e=Ti.columns(e),i=h(e,function(e){return e.map(t.edge)});return h(e,function(e,t){return e.filter(H(Ha.hasColspan)).fold(function(){var e=Si.deduce(i,t);return r(e)},function(e){return n(e,o)})})},Va=function(e){return e.map(function(e){return e+"px"}).getOr("")},qa=function(e,t,n,r){var e=Ti.rows(e),o=h(e,function(e){return e.map(t.edge)});return h(e,function(e,t){return e.filter(H(Ha.hasRowspan)).fold(function(){var e=Si.deduce(o,t);return r(e)},function(e){return n(e)})})},$a={getRawWidths:function(e,t){return ja(e,t,Ua,Va)},getPixelWidths:function(e,t,n){return ja(e,t,a.getPixelWidth,function(e){return e.getOrThunk(n.minCellWidth)},n)},getPercentageWidths:function(e,t,n){return ja(e,t,a.getPercentageWidth,function(e){return e.fold(function(){return n.minCellWidth()},function(e){return e/n.pixelWidth()*100})},n)},getPixelHeights:function(e,t){return qa(e,t,a.getHeight,function(e){return e.getOrThunk(Ha.minHeight)})},getRawHeights:function(e,t){return qa(e,t,Wa,Va)}},Ya=function(e,t,n){for(var r=0,o=e;o<t;o++)r+=void 0!==n[o]?n[o]:0;return r},Xa=function(e,n){e=g.justCells(e);return h(e,function(e){var t=Ya(e.column(),e.column()+e.colspan(),n);return{element:e.element,width:S(t),colspan:e.colspan}})},Ka=function(e,n){e=g.justCells(e);return h(e,function(e){var t=Ya(e.row(),e.row()+e.rowspan(),n);return{element:e.element,height:S(t),rowspan:e.rowspan}})},Ga=function(e,n){return h(e.all(),function(e,t){return{element:e.element,height:S(n[t])}})},Ja=function(e,t){var r=parseFloat(e),n=yo(t),e=function(e){return e/n*100},t=function(e,t){return[100-e]},o=function(){return Ha.minWidth()/n*100},i=function(e,t,n){a.setPercentageWidth(e,r+n)};return{width:S(r),pixelWidth:S(n),getWidths:$a.getPercentageWidths,getCellDelta:e,singleColumnWidth:t,minCellWidth:o,setElementWidth:a.setPercentageWidth,setTableWidth:i}},Za=function(e){var e=parseInt(e,10),t=F,n=function(e,t){return[Math.max(Ha.minWidth(),e+t)-e]},r=function(e,t,n){t=ie(t,function(e,t){return e+t},0);a.setPixelWidth(e,t)};return{width:S(e),pixelWidth:S(e),getWidths:$a.getPixelWidths,getCellDelta:t,singleColumnWidth:n,minCellWidth:Ha.minWidth,setElementWidth:a.setPixelWidth,setTableWidth:r}},Qa=function(e,t){var n;return a.percentageBasedSizeRegex().test(t)?(n=a.percentageBasedSizeRegex().exec(t),Ja(n[1],e)):a.pixelBasedSizeRegex().test(t)?(n=a.pixelBasedSizeRegex().exec(t),Za(n[1])):(t=yo(e),Za(t))},eu=function(t){return a.getRawWidth(t).fold(function(){var e=yo(t);return Za(e)},function(e){return Qa(t,e)})},tu=function(e){return g.generate(e)},nu=function(e){return ie(e,function(e,t){return e+t},0)},ru=function(e){e=Bn.fromTable(e);return tu(e)},ou={adjustWidth:function(e,t,n,r){var o=eu(e),t=o.getCellDelta(t),i=ru(e),a=o.getWidths(i,r,o),r=La(a,n,t,o),r=h(r,function(e,t){return e+a[t]}),u=Xa(i,r);x(u,function(e){o.setElementWidth(e.element(),e.width())}),n===i.grid().columns()-1&&o.setTableWidth(e,r,t)},adjustHeight:function(e,n,r,t){var o=ru(e),t=$a.getPixelHeights(o,t),t=h(t,function(e,t){return r===t?Math.max(n+e,Ha.minHeight()):e}),i=Ka(o,t),o=Ga(o,t);x(o,function(e){a.setHeight(e.element(),e.height())}),x(i,function(e){a.setHeight(e.element(),e.height())}),o=nu(t),a.setHeight(e,o)},adjustWidthTo:function(e,t,n){var r=eu(e),t=tu(t),n=r.getWidths(t,n,r),t=Xa(t,n);x(t,function(e){r.setElementWidth(e.element(),e.width())}),n=ie(n,function(e,t){return t+e},0),0<t.length&&r.setTableWidth(e,n)}},iu=function(e){var t=e,e=function(){return t};return{get:e,set:function(e){t=e},clone:function(){return iu(t)}}},au=function(e,t){return uu(e,t,{validate:Z,label:"function"})},uu=function(r,o,i){if(0===o.length)throw new Error("You must specify at least one required field.");return Te("required",o),Ee(o),function(t){var e,n=be(t);return me(o,function(e){return c(n,e)})||Se(o,n),r(o,n),0<(e=re(o,function(e){return!i.validate(t[e],e)})).length&&Ne(e,i.label),t}},su=function(t,e){e=re(e,function(e){return!c(t,e)});0<e.length&&ke(e)},cu=function(e){var t=Le(e,"colspan")?parseInt(w(e,"colspan"),10):1,n=Le(e,"rowspan")?parseInt(w(e,"rowspan"),10):1;return{element:S(e),colspan:S(t),rowspan:S(n)}},B=function(t,e){var n,r,o,i,a,u;return lu(t),n=iu(k.none()),r=void 0!==e?e:cu,o=function(e){return t.cell(e)},i=function(e){e=r(e);return o(e)},a=function(e){var t=i(e);return n.get().isNone()&&n.set(k.some(t)),u=k.some({item:e,replacement:t}),t},u=k.none(),{getOrInit:function(t,n){return u.fold(function(){return a(t)},function(e){return n(t,e.item)?e.replacement:a(t)})},cursor:n.get}},e=function(a,u){return function(n){var r,e,o,i=iu(k.none());return lu(n),r=[],e=function(t,n){return ue(r,function(e){return n(e.item,t)})},o=function(e){var t=n.replace(e,u,{scope:a});return r.push({item:e,sub:t}),i.get().isNone()&&i.set(k.some(t)),t},{replaceOrInit:function(t,n){return e(t,n).fold(function(){return o(t)},function(e){return n(t,e.item)?e.sub:o(t)})},cursor:i.get}}},r=function(n){var e;return lu(n),{combine:function(t){return e.get().isNone()&&e.set(k.some(t)),function(){var e=n.cell({element:S(t),colspan:S(1),rowspan:S(1)});return tt(e,"width"),tt(t,"width"),e}},cursor:(e=iu(k.none())).get}},lu=(Ld=function(e){return au(su,e)})(["cell","row","replace","gap"]),_=B,o=e,fu=r,du=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],hu=mu=function(e,t){e=e.property().name(t);return c(du,e)},pu=function(e,t){e=e.property().name(t);return c(["ol","ul"],e)},vu=function(e,t){e=e.property().name(t);return c(["address","pre","p","h1","h2","h3","h4","h5","h6"],e)},bu=function(e,t){e=e.property().name(t);return c(["h1","h2","h3","h4","h5","h6"],e)},yu=function(e,t){return c(["div","li","td","th","blockquote","body","caption"],e.property().name(t))},xu=gu=function(e,t){return c(["br","img","hr","input"],e.property().name(t))},wu=function(e,t){return"iframe"===e.property().name(t)},Cu=function(e,t){return!(mu(e,t)||gu(e,t))&&"li"!==e.property().name(t)},Su=zd(),ku={isBlock:function(e){return hu(Su,e)},isList:function(e){return pu(Su,e)},isFormatting:function(e){return vu(Su,e)},isHeading:function(e){return bu(Su,e)},isContainer:function(e){return yu(Su,e)},isEmptyTag:function(e){return xu(Su,e)},isFrame:function(e){return wu(Su,e)},isInline:function(e){return Cu(Su,e)}},Tu=function(t){var o=function(e){return"br"===b(e)},n=function(e){return me(e,function(e){return o(e)||Oe(e)&&0===jn(e).trim().length})},i=function(e){return"li"===b(e)||Sn(e,ku.isList).isSome()},e=function(e){return rn(e).map(function(e){return!!ku.isBlock(e)||(ku.isEmptyTag(e)?"img"!==b(e):void 0)}).getOr(!1)},r=function(r){return Jn(r).bind(function(t){var n=e(t);return en(t).map(function(e){return!0===n||i(e)||o(t)||ku.isBlock(e)&&!E(r,e)?[]:[N.fromTag("br")]})}).getOr([])},a=function(){var e=de(t,function(e){var t=u(e);return n(t)?[]:t.concat(r(e))});return 0===e.length?[N.fromTag("br")]:e}();gn(t[0]),mn(t[0],a)},B=function(e){0===R.cells(e).length&&hn(e)},Nu=t("grid","cursor"),Eu=function(e,t,n){return Ru(e,t,n).orThunk(function(){return Ru(e,0,0)})},Ru=function(e,t,n){return k.from(e[t]).bind(function(e){return k.from(e.cells()[n]).bind(function(e){return k.from(e.element())})})},A=function(e,t,n){return Nu(e,Ru(e,t,n))},_u=function(e){return ae(e,function(e,t){return te(e,function(e){return e.row()===t.row()})?e:e.concat([t])},[]).sort(function(e,t){return e.row()-t.row()})},Au=function(e){return ae(e,function(e,t){return te(e,function(e){return e.column()===t.column()})?e:e.concat([t])},[]).sort(function(e,t){return e.column()-t.column()})},e=function(e,t,n,r){var o=t[0].row(),i=t[0].row(),a=_u(t),a=ae(a,function(e,t){return xa(e,i,o,n,r.getOrInit)},e);return A(a,i,t[0].column())},r=function(e,t,n,r){var o=t.row(),i=t.row()+t.rowspan(),e=xa(e,i,o,n,r.getOrInit);return A(e,i,t.column())},rc=function(e,t,n,r){var o=_u(t),i=o[o.length-1].row(),a=o[o.length-1].row()+o[o.length-1].rowspan(),o=ae(o,function(e,t){return xa(e,a,i,n,r.getOrInit)},e);return A(o,a,t[0].column())},ic=function(e,t,n,r){var o=t.column(),i=t.column(),e=wa(e,i,o,n,r.getOrInit);return A(e,t.row(),i)},Ac=function(e,t,n,r){var o=Au(t),i=o[0].column(),a=o[0].column(),o=ae(o,function(e,t){return wa(e,a,i,n,r.getOrInit)},e);return A(o,t[0].row(),a)},Dc=function(e,t,n,r){var o=t.column(),i=t.column()+t.colspan(),e=wa(e,i,o,n,r.getOrInit);return A(e,t.row(),i)},Pc=function(e,t,n,r){var o=t[t.length-1].column(),i=t[t.length-1].column()+t[t.length-1].colspan(),a=Au(t),a=ae(a,function(e,t){return wa(e,i,o,n,r.getOrInit)},e);return A(a,t[0].row(),i)},Sf=function(e,t,n,r){e=Da(e,t.row(),n,r.replaceOrInit);return A(e,t.row(),t.column())},$l=function(e,t,n,r){e=Aa(e,t.column(),n,r.replaceOrInit);return A(e,t.row(),t.column())},kf=function(e,t,n,r){e=Da(e,t.row(),n,r.replaceOrInit);return A(e,t.row(),t.column())},cf=function(e,t,n,r){e=Aa(e,t.column(),n,r.replaceOrInit);return A(e,t.row(),t.column())},Oc=function(e,t,n,r){e=Ca(e,t.row(),t.column(),n,r.getOrInit);return A(e,t.row(),t.column())},Bc=function(e,t,n,r){e=Sa(e,t.row(),t.column(),n,r.getOrInit);return A(e,t.row(),t.column())},jl=function(e,t,n,r){var o=Au(t),e=Ta(e,o[0].column(),o[o.length-1].column()),o=Eu(e,t[0].row(),t[0].column());return Nu(e,o)},ql=function(e,t,n,r){var o=_u(t),e=ka(e,o[0].row(),o[o.length-1].row()),o=Eu(e,t[0].row(),t[0].column());return Nu(e,o)},Af=function(e,t,n,r){var o=t.cells();return Tu(o),e=ha.merge(e,t.bounds(),n,S(o[0])),Nu(e,k.from(o[0]))},Mf=function(e,t,n,r){e=ie(t,function(e,t){return ha.unmerge(e,t,n,r.combine(t))},e);return Nu(e,k.from(t[0]))},Du=function(e,n,t,r){var o=function(e,t){e=Bn.fromTable(e),e=g.generate(e);return Xi.toGrid(e,t,!0)}(n.clipboard(),n.generators()),i=m.address(n.row(),n.column());return ba(i,e,o,n.generators(),t).fold(function(){return Nu(e,k.some(n.element()))},function(e){var t=Eu(e,n.row(),n.column());return Nu(e,t)})},Pu=function(e,t,n){e=Bn.fromPastedRows(e,n),n=g.generate(e);return Xi.toGrid(n,t,!0)},Ou=function(e,t,n,r){var o=e[t.cells[0].row()],i=t.cells[0].row(),o=Pu(t.clipboard(),t.generators(),o),i=ya(i,e,o,t.generators(),n),e=Eu(i,t.cells[0].row(),t.cells[0].column());return Nu(i,e)},Bu=function(e,t,n,r){var o=e[t.cells[0].row()],i=t.cells[t.cells.length-1].row()+t.cells[t.cells.length-1].rowspan(),o=Pu(t.clipboard(),t.generators(),o),i=ya(i,e,o,t.generators(),n),e=Eu(i,t.cells[0].row(),t.cells[0].column());return Nu(i,e)},Mu=function(e,t,n,r){e=Pa(e,t.column(),n,r);return A(e,t.row(),t.column())},Iu=function(e,t,n,r){e=Oa(e,t.row(),n,r);return A(e,t.row(),t.column())},Lu=function(u){return function(e,t,n,r,o,i,a){return v(function(e,t,n,r){return u(e,t,i,a)},ea,C,C,_)(e,t,n,r,o)}},Fu=ou.adjustWidthTo,Hu={insertRowBefore:v(function(e,t,n,r){var o=t.row(),i=t.row(),e=xa(e,i,o,n,r.getOrInit);return A(e,i,t.column())},ea,C,C,_),insertRowsBefore:v(e,ta,C,C,_),insertRowAfter:v(r,ea,C,C,_),insertRowsAfter:v(rc,ta,C,C,_),insertColumnBefore:v(ic,ea,Fu,C,_),insertColumnsBefore:v(Ac,ta,Fu,C,_),insertColumnAfter:v(Dc,ea,Fu,C,_),insertColumnsAfter:v(Pc,ta,Fu,C,_),splitCellIntoColumns:v(Oc,ea,Fu,C,_),splitCellIntoRows:v(Bc,ea,C,C,_),eraseColumns:v(jl,ta,Fu,B,_),eraseRows:v(ql,ta,C,B,_),makeColumnHeader:v($l,ea,C,C,o("row","th")),unmakeColumnHeader:v(cf,ea,C,C,o(null,"td")),makeRowHeader:v(Sf,ea,C,C,o("col","th")),unmakeRowHeader:v(kf,ea,C,C,o(null,"td")),mergeCells:v(Af,Bf,C,C,fu),unmergeCells:v(Mf,i,Fu,C,fu),pasteCells:v(Du,na,Fu,C,_),pasteRowsBefore:v(Ou,ra,C,C,_),pasteRowsAfter:v(Bu,ra,C,C,_),sortRows:Lu(Mu),sortColumns:Lu(Iu)},zu=function(e){return N.fromDom(e.getBody())},Uu=function(e){return e.getBoundingClientRect().width},Wu=function(e){return e.getBoundingClientRect().height},ju=function(t){return function(e){return E(e,zu(t))}},Vu=function(e){return e?e.replace(/px$/,""):""},qu=function(e){return/^[0-9]+$/.test(e)&&(e+="px"),e},$u=function(e){var t=Cn(e,"td[data-mce-style],th[data-mce-style]");T(e,"data-mce-style"),x(t,function(e){T(e,"data-mce-style")})},Xu={isRtl:S(!(Yu=function(e){return"rtl"===Ze(e,"direction")?"rtl":"ltr"}))},Ku={isRtl:S(!0)},Gu={directionAt:function(e){return"rtl"===Yu(e)?Ku:Xu}},Ju=["tableprops","tabledelete","|","tableinsertrowbefore","tableinsertrowafter","tabledeleterow","|","tableinsertcolbefore","tableinsertcolafter","tabledeletecol"],Zu={"border-collapse":"collapse",width:"100%"},Qu={border:"1"},es=function(e){return e.getParam("table_default_attributes",Qu,"object")},ts=function(e){return e.getParam("table_default_styles",Zu,"object")},ns=function(e){return e.getParam("table_resize_bars",!0,"boolean")},rs=function(e){return e.getParam("table_tab_navigation",!0,"boolean")},os=function(e){return e.getParam("table_cell_advtab",!0,"boolean")},is=function(e){return e.getParam("table_row_advtab",!0,"boolean")},as=function(e){return e.getParam("table_advtab",!0,"boolean")},us=function(e){return e.getParam("table_appearance_options",!0,"boolean")},ss=function(e){return e.getParam("table_grid",!0,"boolean")},cs=function(e){return e.getParam("table_style_by_css",!1,"boolean")},ls=function(e){return e.getParam("table_cell_class_list",[],"array")},fs=function(e){return e.getParam("table_row_class_list",[],"array")},ds=function(e){return e.getParam("table_class_list",[],"array")},ms=function(e){return e.getParam("color_picker_callback")},gs=function(e){return!1===e.getParam("table_responsive_width")},hs=function(e){e=e.getParam("table_clone_elements");return K(e)?k.some(e.split(/[ ,]/)):Array.isArray(e)?k.some(e):k.none()},ps=function(e){e=e.getParam("object_resizing",!0);return"table"===e||e},vs=function(e){e=e.getParam("table_toolbar",Ju);return""===e||!1===e?[]:K(e)?e.split(/[ ,]/):G(e)?e:[]},bs=function(e,t){return e.fire("newrow",{node:t})},ys=function(e,t){return e.fire("newcell",{node:t})},xs=function(e,t,n,r){e.fire("ObjectResizeStart",{target:t,width:n,height:r})},ws=function(e,t,n,r){e.fire("ObjectResized",{target:t,width:n,height:r})},Cs=function(c,e){var t=function(e){return"table"===b(zu(e))},n=function(e){e=oi.getGridSize(e);return!1===t(c)||1<e.rows()},r=function(e){e=oi.getGridSize(e);return!1===t(c)||1<e.columns()},l=hs(c),o=function(i,a,u,s){return function(e,t){var n,r,o;return $u(e),n=s(),o=N.fromDom(c.getDoc()),r=Wd(Gu.directionAt),o=cr.cellOperations(u,o,l),a(e)?i(n,e,t,o,r).bind(function(e){return x(e.newRows(),function(e){bs(c,e.dom())}),x(e.newCells(),function(e){ys(c,e.dom())}),e.cursor().map(function(e){var t=c.dom.createRng();return t.setStart(e.dom(),0),t.setEnd(e.dom(),0),t})}):k.none()}};return{deleteRow:o(Hu.eraseRows,n,C,e),deleteColumn:o(Hu.eraseColumns,r,C,e),insertRowsBefore:o(Hu.insertRowsBefore,f,C,e),insertRowsAfter:o(Hu.insertRowsAfter,f,C,e),insertColumnsBefore:o(Hu.insertColumnsBefore,f,Wo.halve,e),insertColumnsAfter:o(Hu.insertColumnsAfter,f,Wo.halve,e),mergeCells:o(Hu.mergeCells,f,C,e),unmergeCells:o(Hu.unmergeCells,f,C,e),pasteRowsBefore:o(Hu.pasteRowsBefore,f,C,e),pasteRowsAfter:o(Hu.pasteRowsAfter,f,C,e),pasteCells:o(Hu.pasteCells,f,C,e)}},Ss=function(e,t,n){var e=Bn.fromTable(e),r=g.generate(e);return ta(r,t).map(function(e){e=Xi.toGrid(r,n,!1).slice(e[0].row(),e[e.length-1].row()+e[e.length-1].rowspan()),e=Qi(e,n);return fi(e)})},D=tinymce.util.Tools.resolve("tinymce.util.Tools"),ks={applyAlign:function(e,t,n){n&&e.formatter.apply("align"+n,{},t)},applyVAlign:function(e,t,n){n&&e.formatter.apply("valign"+n,{},t)},unApplyAlign:function(t,n){D.each("left center right".split(" "),function(e){t.formatter.remove("align"+e,{},n)})},unApplyVAlign:function(t,n){D.each("top middle bottom".split(" "),function(e){t.formatter.remove("valign"+e,{},n)})},getTDTHOverallStyle:function(e,t,n){for(var r,o=void 0,i=e.select("td,th",t),a=0;a<i.length;a++)if(r=e.getStyle(i[a],n),(o=void 0===o?r:o)!==r)return"";return o}},P={createStyleForm:function(n){function e(){var e=ms(n);if(e)return function(t){return e.call(n,function(e){t.control.value(e).fire("change")},t.control.value())}}return{title:"Advanced",type:"form",defaults:{onchange:M(Ts,n)},items:[{label:"Style",name:"style",type:"textbox",onchange:M(Ns,n)},{type:"form",padding:0,formItemDefaults:{layout:"grid",alignH:["start","right"]},defaults:{size:7},items:[{label:"Border style",type:"listbox",name:"borderStyle",width:90,onselect:M(Ts,n),values:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]},{label:"Border color",type:"colorbox",name:"borderColor",onaction:e()},{label:"Background color",type:"colorbox",name:"backgroundColor",onaction:e()}]}]}},buildListItems:function(e,r,t){function o(e,n){return n=n||[],D.each(e,function(e){var t={text:e.text||e.title};e.menu?t.menu=o(e.menu):(t.value=e.value,r&&r(t)),n.push(t)}),n}return o(e,t||[])},updateStyleField:Ts=function(e,t){var e=e.dom,t=t.control.rootControl,n=t.toJSON(),r=e.parseStyle(n.style);r["border-style"]=n.borderStyle,r["border-color"]=n.borderColor,r["background-color"]=n.backgroundColor,r.width=n.width?qu(n.width):"",r.height=n.height?qu(n.height):"",t.find("#style").value(e.serializeStyle(e.parseStyle(e.serializeStyle(r))))},extractAdvancedStyles:function(e,t){var t=e.parseStyle(e.getAttrib(t,"style")),n={};return t["border-style"]&&(n.borderStyle=t["border-style"]),t["border-color"]&&(n.borderColor=t["border-color"]),t["background-color"]&&(n.backgroundColor=t["background-color"]),n.style=e.serializeStyle(t),n},updateAdvancedFields:Ns=function(e,t){var e=e.dom,t=t.control.rootControl,n=t.toJSON(),e=e.parseStyle(n.style);t.find("#borderStyle").value(e["border-style"]||""),t.find("#borderColor").value(e["border-color"]||""),t.find("#backgroundColor").value(e["background-color"]||""),t.find("#width").value(e.width||""),t.find("#height").value(e.height||"")},syncAdvancedStyleFields:function(e,t){(t.control.rootControl.find("#style")[0].getEl().isEqualNode(s.document.activeElement)?Ns:Ts)(e,t)}},Es=function(e,t){delete e.dataset.mceStyle,e.style.cssText+=";"+t},Rs=function(t,n){var e=t.dom,r={width:e.getStyle(n,"width")||e.getAttrib(n,"width"),height:e.getStyle(n,"height")||e.getAttrib(n,"height"),scope:e.getAttrib(n,"scope"),class:e.getAttrib(n,"class"),type:n.nodeName.toLowerCase(),style:"",align:"",valign:""};return D.each("left center right".split(" "),function(e){t.formatter.matchNode(n,"align"+e)&&(r.align=e)}),D.each("top middle bottom".split(" "),function(e){t.formatter.matchNode(n,"valign"+e)&&(r.valign=e)}),os(t)&&D.extend(r,P.extractAdvancedStyles(e,n)),r},_s=function(t,r,e){var o,n;function i(e,t,n){1!==r.length&&!n||o.setAttrib(e,t,n)}function a(e,t,n){1!==r.length&&!n||o.setStyle(e,t,n)}o=t.dom,os(t)&&P.syncAdvancedStyleFields(t,e),n=e.control.rootControl.toJSON(),t.undoManager.transact(function(){D.each(r,function(e){i(e,"scope",n.scope),1===r.length?i(e,"style",n.style):Es(e,n.style),i(e,"class",n.class),a(e,"width",qu(n.width)),a(e,"height",qu(n.height)),n.type&&e.nodeName.toLowerCase()!==n.type&&(e=o.rename(e,n.type)),1===r.length&&(ks.unApplyAlign(t,e),ks.unApplyVAlign(t,e)),n.align&&ks.applyAlign(t,e,n.align),n.valign&&ks.applyVAlign(t,e,n.valign)}),t.focus()})},As=function(t){var e,n,r=[];r=t.dom.select("td[data-mce-selected],th[data-mce-selected]"),e=t.dom.getParent(t.selection.getStart(),"td,th"),!r.length&&e&&r.push(e),(e=e||r[0])&&(e=1<r.length?{width:"",height:"",scope:"",class:"",align:"",valign:"",style:"",type:e.nodeName.toLowerCase()}:Rs(t,e),0<ls(t).length&&(n={name:"class",type:"listbox",label:"Class",values:P.buildListItems(ls(t),function(e){e.value&&(e.textStyle=function(){return t.formatter.getCssText({block:"td",classes:[e.value]})})})}),n={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",layout:"grid",columns:2,labelGapCalc:!1,padding:0,defaults:{type:"textbox",maxWidth:50},items:[{label:"Width",name:"width",onchange:M(P.updateStyleField,t)},{label:"Height",name:"height",onchange:M(P.updateStyleField,t)},{label:"Cell type",name:"type",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{label:"Scope",name:"scope",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{label:"H Align",name:"align",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"V Align",name:"valign",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}]}]},n]},os(t)?t.windowManager.open({title:"Cell properties",bodyType:"tabpanel",data:e,body:[{title:"General",type:"form",items:n},P.createStyleForm(t)],onsubmit:M(_s,t,r)}):t.windowManager.open({title:"Cell properties",data:e,body:n,onsubmit:M(_s,t,r)}))},Ds=function(t,n){var e=t.dom,r={height:e.getStyle(n,"height")||e.getAttrib(n,"height"),scope:e.getAttrib(n,"scope"),class:e.getAttrib(n,"class"),align:"",style:"",type:n.parentNode.nodeName.toLowerCase()};return D.each("left center right".split(" "),function(e){t.formatter.matchNode(n,"align"+e)&&(r.align=e)}),is(t)&&D.extend(r,P.extractAdvancedStyles(e,n)),r},Ps=function(e,t,n){var r=e.getParent(t,"table"),o=t.parentNode,i=e.select(n,r)[0];i||(i=e.create(n),r.firstChild?"CAPTION"===r.firstChild.nodeName?e.insertAfter(i,r.firstChild):r.insertBefore(i,r.firstChild):r.appendChild(i)),i.appendChild(t),o.hasChildNodes()||e.remove(o)},Os=function(t){var e,n=t.dom,r=[],o=n.getParent(t.selection.getStart(),"table"),i=n.getParent(t.selection.getStart(),"td,th");D.each(o.rows,function(t){D.each(t.cells,function(e){if(n.getAttrib(e,"data-mce-selected")||e===i)return r.push(t),!1})}),(o=r[0])&&(o=1<r.length?{height:"",scope:"",style:"",class:"",align:"",type:o.parentNode.nodeName.toLowerCase()}:Ds(t,o),e={type:"form",columns:2,padding:0,defaults:{type:"textbox"},items:[{type:"listbox",name:"type",label:"Row type",text:"Header",maxWidth:null,values:[{text:"Header",value:"thead"},{text:"Body",value:"tbody"},{text:"Footer",value:"tfoot"}]},{type:"listbox",name:"align",label:"Alignment",text:"None",maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height"},e=0<fs(t).length?{name:"class",type:"listbox",label:"Class",values:P.buildListItems(fs(t),function(e){e.value&&(e.textStyle=function(){return t.formatter.getCssText({block:"tr",classes:[e.value]})})})}:e]},is(t)?t.windowManager.open({title:"Row properties",data:o,bodyType:"tabpanel",body:[{title:"General",type:"form",items:e},P.createStyleForm(t)],onsubmit:M(jd,t,r,o)}):t.windowManager.open({title:"Row properties",data:o,body:e,onsubmit:M(jd,t,r,o)}))},Bs=tinymce.util.Tools.resolve("tinymce.Env"),Ms={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},percentages:!0},Is=function(){return N.fromTag("table")},Ls=function(){return N.fromTag("tbody")},Fs=function(){return N.fromTag("tr")},Hs=function(){return N.fromTag("th")},zs=function(){return N.fromTag("td")},Us=function(e,t,n,r,o){var i,a,u,s,c,l,f;for(void 0===o&&(o=Ms),i=Is(),Je(i,o.styles),Ie(i,o.attributes),a=Ls(),d(i,a),u=[],s=0;s<e;s++){for(c=Fs(),l=0;l<t;l++)f=(s<n||l<r?Hs:zs)(),l<r&&y(f,"scope","row"),s<n&&y(f,"scope","col"),d(f,N.fromTag("br")),o.percentages&&Ge(f,"width",100/t+"%"),d(c,f);u.push(c)}return mn(a,u),i},Ws=function(e){return e.dom().innerHTML},js=function(e){var t=N.fromTag("div"),e=N.fromDom(e.dom().cloneNode(!0));return d(t,e),Ws(t)},Vs=function(e,t){e.selection.select(t.dom(),!0),e.selection.collapse(!0)},qs=function(e,t){_n(t,"td,th").each(M(Vs,e))},$s=function(t,e){x(Cn(e,"tr"),function(e){bs(t,e.dom()),x(Cn(e,"th,td"),function(e){ys(t,e.dom())})})},Ys=function(e){return K(e)&&-1!==e.indexOf("%")},Xs={insert:function(t,e,n){var r=ts(t),r={styles:r,attributes:es(t),percentages:Ys(r.width)&&!gs(t)},n=Us(n,e,0,0,r);return y(n,"data-mce-id","__mce"),e=js(n),t.insertContent(e),_n(zu(t),'table[data-mce-id="__mce"]').map(function(e){return gs(t)&&Ge(e,"width",Ze(e,"width")),T(e,"data-mce-id"),$s(t,e),qs(t,e),e.dom()}).getOr(null)}},Ks=function(t,n){var e=t.dom,r={width:e.getStyle(n,"width")||e.getAttrib(n,"width"),height:e.getStyle(n,"height")||e.getAttrib(n,"height"),cellspacing:e.getStyle(n,"border-spacing")||e.getAttrib(n,"cellspacing"),cellpadding:e.getAttrib(n,"data-mce-cell-padding")||e.getAttrib(n,"cellpadding")||ks.getTDTHOverallStyle(t.dom,n,"padding"),border:e.getAttrib(n,"data-mce-border")||e.getAttrib(n,"border")||ks.getTDTHOverallStyle(t.dom,n,"border"),borderColor:e.getAttrib(n,"data-mce-border-color"),caption:!!e.select("caption",n)[0],class:e.getAttrib(n,"class")};return D.each("left center right".split(" "),function(e){t.formatter.matchNode(n,"align"+e)&&(r.align=e)}),as(t)&&D.extend(r,P.extractAdvancedStyles(e,n)),r},Gs=function(e,t,n){var r,o=e.dom,i={},a={};if(i.class=n.class,a.height=qu(n.height),o.getAttrib(t,"width")&&!cs(e)?i.width=Vu(n.width):a.width=qu(n.width),cs(e)?(a["border-width"]=qu(n.border),a["border-spacing"]=qu(n.cellspacing),D.extend(i,{"data-mce-border-color":n.borderColor,"data-mce-cell-padding":n.cellpadding,"data-mce-border":n.border})):D.extend(i,{border:n.border,cellpadding:n.cellpadding,cellspacing:n.cellspacing}),cs(e)&&t.children)for(r=0;r<t.children.length;r++)!function e(t,n,r,o){if("TD"===n.tagName||"TH"===n.tagName)t.setStyle(n,r,o);else if(n.children)for(var i=0;i<n.children.length;i++)e(t,n.children[i],r,o)}(o,t.children[r],{"border-width":qu(n.border),"border-color":n.borderColor,padding:qu(n.cellpadding)});n.style?D.extend(a,o.parseStyle(n.style)):a=D.extend({},o.parseStyle(o.getAttrib(t,"style")),a),i.style=o.serializeStyle(a),o.setAttribs(t,i)},Js=function(e,t,n){var r,o,i=e.dom;as(e)&&P.syncAdvancedStyleFields(e,n),!1===(o=n.control.rootControl.toJSON()).class&&delete o.class,e.undoManager.transact(function(){t=t||Xs.insert(e,o.cols||1,o.rows||1),Gs(e,t,o),(r=i.select("caption",t)[0])&&!o.caption&&i.remove(r),!r&&o.caption&&((r=i.create("caption")).innerHTML=Bs.ie?"":'<br data-mce-bogus="1"/>',t.insertBefore(r,t.firstChild)),ks.unApplyAlign(e,t),o.align&&ks.applyAlign(e,t,o.align),e.focus(),e.addVisual()})},Zs=function(t,e){var n,r,o,i,a=t.dom,u={};!0===e?(n=a.getParent(t.selection.getStart(),"table"))&&(u=Ks(t,n)):(r={label:"Cols",name:"cols"},o={label:"Rows",name:"rows"}),0<ds(t).length&&(u.class&&(u.class=u.class.replace(/\s*mce\-item\-table\s*/g,"")),i={name:"class",type:"listbox",label:"Class",values:P.buildListItems(ds(t),function(e){e.value&&(e.textStyle=function(){return t.formatter.getCssText({block:"table",classes:[e.value]})})})}),e={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",labelGapCalc:!1,padding:0,layout:"grid",columns:2,defaults:{type:"textbox",maxWidth:50},items:us(t)?[r,o,{label:"Width",name:"width",onchange:M(P.updateStyleField,t)},{label:"Height",name:"height",onchange:M(P.updateStyleField,t)},{label:"Cell spacing",name:"cellspacing"},{label:"Cell padding",name:"cellpadding"},{label:"Border",name:"border"},{label:"Caption",name:"caption",type:"checkbox"}]:[r,o,{label:"Width",name:"width",onchange:M(P.updateStyleField,t)},{label:"Height",name:"height",onchange:M(P.updateStyleField,t)}]},{label:"Alignment",name:"align",type:"listbox",text:"None",values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},i]},as(t)?t.windowManager.open({title:"Table properties",data:u,bodyType:"tabpanel",body:[{title:"General",type:"form",items:e},P.createStyleForm(t)],onsubmit:M(Js,t,n)}):t.windowManager.open({title:"Table properties",data:u,body:e,onsubmit:M(Js,t,n)})},Qs=D.each,ec=function(i,t,a,u,n){var r=ju(i),e=function(e){return function(){return k.from(i.dom.getParent(i.selection.getStart(),e)).map(N.fromDom)}},o=e("caption"),s=e("th,td"),c=function(e){return R.table(e,r)},l=function(e){return{width:Uu(e.dom()),height:Uu(e.dom())}},f=function(e,t,n){var r=l(n);t.width===r.width&&t.height===r.height||(xs(e,n.dom(),t.width,t.height),ws(e,n.dom(),r.width,r.height))},d=function(o){s().each(function(r){c(r).each(function(t){var e=co.forMenu(u,t,r),n=l(t);o(t,e).each(function(e){f(i,n,t),i.selection.setRng(e),i.focus(),a.clear(t),$u(t)})})})},m=function(e){return s().bind(function(r){return c(r).bind(function(e){var t=N.fromDom(i.getDoc()),n=co.forMenu(u,e,r),t=cr.cellOperations(C,t,k.none());return Ss(e,n,t)})})},g=function(o){n.get().each(function(e){var r=h(e,function(e){return tr(e)});s().each(function(n){c(n).each(function(t){var e=N.fromDom(i.getDoc()),e=cr.paste(e),e=co.pasteRows(u,t,n,r,e);o(t,e).each(function(e){i.selection.setRng(e),i.focus(),a.clear(t)})})})})};Qs({mceTableSplitCells:function(){d(t.unmergeCells)},mceTableMergeCells:function(){d(t.mergeCells)},mceTableInsertRowBefore:function(){d(t.insertRowsBefore)},mceTableInsertRowAfter:function(){d(t.insertRowsAfter)},mceTableInsertColBefore:function(){d(t.insertColumnsBefore)},mceTableInsertColAfter:function(){d(t.insertColumnsAfter)},mceTableDeleteCol:function(){d(t.deleteColumn)},mceTableDeleteRow:function(){d(t.deleteRow)},mceTableCutRow:function(e){n.set(m()),d(t.deleteRow)},mceTableCopyRow:function(e){n.set(m())},mceTablePasteRowBefore:function(e){g(t.pasteRowsBefore)},mceTablePasteRowAfter:function(e){g(t.pasteRowsAfter)},mceTableDelete:function(){s().orThunk(o).each(function(e){R.table(e,r).filter(H(r)).each(function(e){var t=N.fromText("");sn(e,t),hn(e),(e=i.dom.createRng()).setStart(t.dom(),0),e.setEnd(t.dom(),0),i.selection.setRng(e)})})}},function(e,t){i.addCommand(t,e)}),Qs({mceInsertTable:M(Zs,i),mceTableProps:M(Zs,i,!0),mceTableRowProps:M(Os,i),mceTableCellProps:M(As,i)},function(n,e){i.addCommand(e,function(e,t){n(t)})})},tc={only:function(e){var t=k.from(e.dom().documentElement).map(N.fromDom).getOr(e);return{parent:S(t),view:S(e),origin:S($o(0,0))}},detached:function(e,t){var n=M(Ko,t);return{parent:S(t),view:S(e),origin:n}},body:function(e,t){return{parent:S(t),view:S(e),origin:S($o(0,0))}}},nc={create:function(e){return{registry:xe(e,function(e){return{bind:e.bind,unbind:e.unbind}}),trigger:xe(e,function(e){return e.trigger})}}},e=Ld(["compare","extract","mutate","sink"]),r=Ld(["element","start","stop","destroy"]),rc=Ld(["forceDrop","drop","move","delayDrop"]),oc={mode:e,sink:r,api:rc},ic=Bd("ephox-dragster"),ac={resolve:ic.resolve},uc=function(e,t,n,r,o,i,a){return{target:S(e),x:S(t),y:S(n),stop:r,prevent:o,kill:i,raw:S(a)}},sc=function(i,a){return function(e){var t,n,r,o;i(e)&&(o=N.fromDom(e.target),r=L(n=function(){e.preventDefault()},t=function(){e.stopPropagation()}),o=uc(o,e.clientX,e.clientY,t,n,r,e),a(o))}},cc=function(e,t,n,r,o){n=sc(n,r);return e.dom().addEventListener(t,n,o),{unbind:M(fc,e,t,n,o)}},lc=function(e,t,n,r){return cc(e,t,n,r,!1)},fc=function(e,t,n,r){e.dom().removeEventListener(t,n,r)},dc=S(!0),mc=function(e,t,n){return lc(e,t,dc,n)},gc=oc.mode({compare:function(e,t){return $o(t.left()-e.left(),t.top()-e.top())},extract:function(e){return k.some($o(e.x(),e.y()))},sink:function(e,t){var n,r,o,i,a,u;return t=t,t=ai({layerClass:ac.resolve("blocker")},t),u=N.fromTag("div"),y(u,"role","presentation"),Je(u,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),yi(u,ac.resolve("blocker")),yi(u,t.layerClass),r=mc((n={element:function(){return u},destroy:function(){hn(u)}}).element(),"mousedown",e.forceDrop),o=mc(n.element(),"mouseup",e.drop),i=mc(n.element(),"mousemove",e.move),a=mc(n.element(),"mouseout",e.delayDrop),oc.sink({element:n.element,start:function(e){d(e,n.element())},stop:function(){hn(n.element())},destroy:function(){n.destroy(),o.unbind(),i.unbind(),a.unbind(),r.unbind()}})},mutate:function(e,t){e.mutate(t.left(),t.top())}}),hc=function(n,r){var o=null;return{cancel:function(){null!==o&&(s.clearTimeout(o),o=null)},throttle:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];null!==o&&s.clearTimeout(o),o=s.setTimeout(function(){n.apply(null,e),o=null},r)}}},pc=function(t,n,e){var r,o,i,a,u=!1,s=nc.create({start:Vd([]),stop:Vd([])}),c=qd(),l=function(){a.stop(),c.isOn()&&(c.off(),s.trigger.stop())},f=hc(l,200),d=function(e){a.start(e),c.on(),s.trigger.start()},m=function(e,t){f.cancel(),c.onEvent(e,n)};return c.events.move.bind(function(e){n.mutate(t,e.info())}),r=function(){u=!0},o=function(){u=!1},{element:(a=n.sink(oc.api({forceDrop:l,drop:(i=function(t){return function(){var e=Array.prototype.slice.call(arguments,0);if(u)return t.apply(null,e)}})(l),move:i(m),delayDrop:i(f.throttle)}),e)).element,go:d,on:r,off:o,destroy:function(){a.destroy()},events:s.registry}},vc=function(e,t){var n=void 0!==t?t:{},n=void 0!==n.mode?n.mode:gc;return pc(e,n,t)},bc=function(e,t,n){return l(e,t,n).isSome()},yc=Md.resolve("resizer-bar-dragging"),xc=function(){var e=N.fromTag("div");return Je(e,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),d($e(),e),e},wc={get:function(e,t){return e.inline?tc.body(zu(e),xc()):tc.only(N.fromDom(e.getDoc()))},remove:function(e,t){e.inline&&hn(t.parent())}},Cc=function(o){var i,a,n=k.none(),r=k.none(),u=k.none(),s=/(\d+(\.\d+)?)%/,c=function(e){return"TABLE"===e.nodeName},l=function(e){return o.dom.getStyle(e,"width")||o.dom.getAttrib(e,"width")},e=function(){return r},t=function(){return u.getOr(tc.only(N.fromDom(o.getBody())))},f=function(){r.each(function(e){e.destroy()}),u.each(function(e){wc.remove(o,e)})};return o.on("init",function(){var e=Wd(Gu.directionAt),t=wc.get(o);u=k.some(t),ps(o)&&ns(o)&&((t=Yd(t,e)).on(),t.events.startDrag.bind(function(e){n=k.some(o.selection.getRng())}),t.events.beforeResize.bind(function(e){e=e.table().dom();xs(o,e,Uu(e),Wu(e))}),t.events.afterResize.bind(function(e){var e=e.table(),t=e.dom();$u(e),n.each(function(e){o.selection.setRng(e),o.focus()}),ws(o,t,Uu(t),Wu(t)),o.undoManager.add()}),r=k.some(t))}),o.on("ObjectResizeStart",function(e){var t=e.target;c(t)&&(i=e.width,a=l(t))}),o.on("ObjectResized",function(e){var t,n,r=e.target;c(r)&&(r=r,s.test(a)?(t=parseFloat(s.exec(a)[1]),e=e.width*t/i,o.dom.setStyle(r,"width",e+"%")):(n=[],D.each(r.rows,function(e){D.each(e.cells,function(e){var t=o.dom.getStyle(e,"width",!0);n.push({cell:e,width:t})})}),D.each(n,function(e){o.dom.setStyle(e.cell,"width",e.width),o.dom.setAttrib(e.cell,"width",null)})))}),{lazyResize:e,lazyWire:t,destroy:f}},Sc=function(e){return{fold:e}},kc=function(o){return Sc(function(e,t,n,r){return e(o)})},Tc=function(o){return Sc(function(e,t,n,r){return t(o)})},Nc=function(o,i){return Sc(function(e,t,n,r){return n(o,i)})},Ec=function(o){return Sc(function(e,t,n,r){return r(o)})},Rc=function(n,e){return R.table(n,e).bind(function(e){var t=R.cells(e);return se(t,function(e){return E(n,e)}).map(function(e){return{index:S(e),all:S(t)}})})},_c={next:function(t,e){return Rc(t,e).fold(function(){return kc(t)},function(e){return e.index()+1<e.all().length?Nc(t,e.all()[e.index()+1]):Ec(t)})},prev:function(t,e){return Rc(t,e).fold(function(){return kc()},function(e){return 0<=e.index()-1?Nc(t,e.all()[e.index()-1]):Tc(t)})}},Dc=(Ac=ro([{before:["element"]},{on:["element","offset"]},{after:["element"]}])).before,Pc=Ac.on,Oc=Ac.after,O={before:Dc,on:Pc,after:Oc,cata:function(e,t,n,r){return e.fold(t,n,r)},getStart:function(e){return e.fold(F,F,F)}},Bc=ro([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Mc=t("start","soffset","finish","foffset"),Ic=function(e){return e.match({domRange:function(e){return N.fromDom(e.startContainer)},relative:function(e,t){return O.getStart(e)},exact:function(e,t,n,r){return e}})},Lc=function(e){e=Ic(e);return Qt(e)},Fc=Bc.relative,Hc=Bc.exact,zc=function(e,t,n,r){var o=Zt(e).dom().createRange();return o.setStart(e.dom(),t),o.setEnd(n.dom(),r),o},Uc=function(e,t,n,r){var o=zc(e,t,n,r),e=E(e,n)&&t===r;return o.collapsed&&!e},Wc=function(e,t){e=e.document.createRange();return jc(e,t),e},jc=function(e,t){e.selectNodeContents(t.dom())},Vc=function(n,e){e.fold(function(e){n.setStartBefore(e.dom())},function(e,t){n.setStart(e.dom(),t)},function(e){n.setStartAfter(e.dom())})},qc=function(n,e){e.fold(function(e){n.setEndBefore(e.dom())},function(e,t){n.setEnd(e.dom(),t)},function(e){n.setEndAfter(e.dom())})},$c=function(e,t,n){e=e.document.createRange();return Vc(e,t),qc(e,n),e},Yc=function(e,t,n,r,o){e=e.document.createRange();return e.setStart(t.dom(),n),e.setEnd(r.dom(),o),e},Xc=function(e){return{left:S(e.left),top:S(e.top),right:S(e.right),bottom:S(e.bottom),width:S(e.width),height:S(e.height)}},Kc=function(e){var t=e.getClientRects(),t=0<t.length?t[0]:e.getBoundingClientRect();return 0<t.width||0<t.height?k.some(t).map(Xc):k.none()},Gc=ro([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Jc=function(e,t,n){return t(N.fromDom(n.startContainer),n.startOffset,N.fromDom(n.endContainer),n.endOffset)},Zc=function(o,e){return e.match({domRange:function(e){return{ltr:S(e),rtl:k.none}},relative:function(e,t){return{ltr:je(function(){return $c(o,e,t)}),rtl:je(function(){return k.some($c(o,t,e))})}},exact:function(e,t,n,r){return{ltr:je(function(){return Yc(o,e,t,n,r)}),rtl:je(function(){return k.some(Yc(o,n,r,e,t))})}}})},Qc=function(e,t){var n=t.ltr();return n.collapsed?t.rtl().filter(function(e){return!1===e.collapsed}).map(function(e){return Gc.rtl(N.fromDom(e.endContainer),e.endOffset,N.fromDom(e.startContainer),e.startOffset)}).getOrThunk(function(){return Jc(0,Gc.ltr,n)}):Jc(0,Gc.ltr,n)},el=function(e,t){e=Zc(e,t);return Qc(0,e)},tl=function(i,e){return el(i,e).match({ltr:function(e,t,n,r){var o=i.document.createRange();return o.setStart(e.dom(),t),o.setEnd(n.dom(),r),o},rtl:function(e,t,n,r){var o=i.document.createRange();return o.setStart(n.dom(),r),o.setEnd(e.dom(),t),o}})},nl=function(e,t,n,r,o){var i,a,u,s;if(0!==o){if(t===r)return o-1;for(i=r,a=1;a<o;a++)if(u=e(a),s=Math.abs(t-u.left),n<=u.bottom){if(n<u.top||i<s)return a-1;i=s}}return 0},rl=function(e,t,n){return t>=e.left&&t<=e.right&&n>=e.top&&n<=e.bottom},ol=function(n,r,e,t,o){var i=function(e){var t=n.dom().createRange();return t.setStart(r.dom(),e),t.collapse(!0),t},a=function(e){return i(e).getBoundingClientRect()},u=jn(r).length,a=nl(a,e,t,o.right,u);return i(a)},il=function(t,n,r,o){var e=t.dom().createRange();return e.selectNode(n.dom()),e=e.getClientRects(),si(e,function(e){return rl(e,r,o)?k.some(e):k.none()}).map(function(e){return ol(t,n,r,o,e)})},al=function(t,e,n,r){var o=t.dom().createRange(),e=u(e);return si(e,function(e){return o.selectNode(e.dom()),rl(o.getBoundingClientRect(),n,r)?ul(t,e,n,r):k.none()})},ul=function(e,t,n,r){return(Oe(t)?il:al)(e,t,n,r)},sl=function(e,t,n,r){var o=e.dom().createRange();return o.selectNode(t.dom()),o=o.getBoundingClientRect(),n=Math.max(o.left,Math.min(o.right,n)),o=Math.max(o.top,Math.min(o.bottom,r)),ul(e,t,n,o)},cl=function(e,t){return t-e.left<e.right-t},ll=function(e,t,n){e=e.dom().createRange();return e.selectNode(t.dom()),e.collapse(n),e},fl=function(t,e,n){var r,o=t.dom().createRange();return o.selectNode(e.dom()),o=o.getBoundingClientRect(),(!0===(r=cl(o,n))?Gn:Jn)(e).map(function(e){return ll(t,e,r)})},dl=function(e,t,n){var r=t.dom().getBoundingClientRect(),r=cl(r,n);return k.some(ll(e,t,r))},ml=function(e,t,n){return(0===u(t).length?dl:fl)(e,t,n)},gl=function(e,t,n,r){var o=e.dom().createRange();return o.selectNode(t.dom()),o=o.getBoundingClientRect(),n=Math.max(o.left,Math.min(o.right,n)),o=Math.max(o.top,Math.min(o.bottom,r)),sl(e,t,n,o)},hl=document.caretPositionFromPoint?function(n,e,t){return k.from(n.dom().caretPositionFromPoint(e,t)).bind(function(e){var t;return null===e.offsetNode?k.none():((t=n.dom().createRange()).setStart(e.offsetNode,e.offset),t.collapse(),k.some(t))})}:document.caretRangeFromPoint?function(e,t,n){return k.from(e.dom().caretRangeFromPoint(t,n))}:function(n,r,o){return N.fromPoint(n,r,o).bind(function(e){function t(){return ml(n,e,r)}return 0===u(e).length?t():gl(n,e,r,o).orThunk(t)})},pl=function(e,t){var n=b(e);return"input"===n?O.after(e):c(["br","img"],n)?0===t?O.before(e):O.after(e):O.on(e,t)},vl=function(e,t){e=e.fold(O.before,pl,O.after),t=t.fold(O.before,pl,O.after);return Fc(e,t)},bl=function(e,t,n,r){e=pl(e,t),t=pl(n,r);return Fc(e,t)},yl=function(e){return e.match({domRange:function(e){var t=N.fromDom(e.startContainer),n=N.fromDom(e.endContainer);return bl(t,e.startOffset,n,e.endOffset)},relative:vl,exact:bl})},xl=function(e,t){k.from(e.getSelection()).each(function(e){e.removeAllRanges(),e.addRange(t)})},wl=function(e,t,n,r,o){t=Yc(e,t,n,r,o);xl(e,t)},Cl=function(e,t,n,r,o,i){t.collapse(n.dom(),r),t.extend(o.dom(),i)},Sl=function(i,e){return el(i,e).match({ltr:function(e,t,n,r){wl(i,e,t,n,r)},rtl:function(t,n,r,o){var e=i.getSelection();if(e.setBaseAndExtent)e.setBaseAndExtent(t.dom(),n,r.dom(),o);else if(e.extend)try{Cl(0,e,t,n,r,o)}catch(e){wl(i,r,o,t,n)}else wl(i,r,o,t,n)}})},kl=function(e,t,n,r,o){t=bl(t,n,r,o);Sl(e,t)},Tl=function(e,t,n){t=vl(t,n);Sl(e,t)},Nl=function(e){var o=Lc(e).dom(),t=function(e,t,n,r){return Yc(o,e,t,n,r)},e=yl(e);return el(o,e).match({ltr:t,rtl:t})},El=function(e){var t;return 0<e.rangeCount?(t=e.getRangeAt(0),e=e.getRangeAt(e.rangeCount-1),k.some(Mc(N.fromDom(t.startContainer),t.startOffset,N.fromDom(e.endContainer),e.endOffset))):k.none()},Rl=function(e){var t=N.fromDom(e.anchorNode),n=N.fromDom(e.focusNode);return Uc(t,e.anchorOffset,n,e.focusOffset)?k.some(Mc(t,e.anchorOffset,n,e.focusOffset)):El(e)},_l=function(e,t){t=Wc(e,t);xl(e,t)},Al=function(e){return k.from(e.getSelection()).filter(function(e){return 0<e.rangeCount}).bind(Rl)},Dl=function(e){return Al(e).map(function(e){return Hc(e.start(),e.soffset(),e.finish(),e.foffset())})},Pl=function(e,t){e=tl(e,t);return Kc(e)},Ol=function(e,t,n){e=N.fromDom(e.document);return hl(e,t,n).map(function(e){return Mc(N.fromDom(e.startContainer),e.startOffset,N.fromDom(e.endContainer),e.endOffset)})},Bl=function(e){e.getSelection().removeAllRanges()},Ml=tinymce.util.Tools.resolve("tinymce.util.VK"),Il=function(e,t,n,r){return zl(e,t,_c.next(n),r)},Ll=function(e,t,n,r){return zl(e,t,_c.prev(n),r)},Fl=function(e,t){t=Hc(t,0,t,0);return Nl(t)},Hl=function(e,t){t=Cn(t,"tr");return ve(t).bind(function(e){return _n(e,"td,th").map(function(e){return Fl(0,e)})})},zl=function(r,e,t,o,n){return t.fold(k.none,k.none,function(e,t){return Gn(t).map(function(e){return Fl(0,e)})},function(n){return R.table(n,e).bind(function(e){var t=co.noMenu(n);return r.undoManager.transact(function(){o.insertRowsAfter(e,t)}),Hl(0,e)})})},Ul=["table","li","dl"],Wl=function(t,n,r,o){var i,a,e;t.keyCode===Ml.TAB&&(i=zu(n),a=function(e){var t=b(e);return E(e,i)||c(Ul,t)},(e=n.selection.getRng()).collapsed)&&(e=N.fromDom(e.startContainer),R.cell(e,a).each(function(e){t.preventDefault(),(t.shiftKey?Ll:Il)(n,a,e,r,o).each(function(e){n.selection.setRng(e)})}))},jl=t("selection","kill"),Vl={response:jl},B=(ql=function(t){return function(e){return e===t}})(38),$l=ql(40),Yl={ltr:{isBackward:ql(37),isForward:ql(39)},rtl:{isBackward:ql(39),isForward:ql(37)},isUp:B,isDown:$l,isNavigation:function(e){return 37<=e&&e<=40}},Xl={convertToRange:function(e,t){e=tl(e,t);return{start:S(N.fromDom(e.startContainer)),soffset:S(e.startOffset),finish:S(N.fromDom(e.endContainer)),foffset:S(e.endOffset)}},makeSitus:function(e,t,n,r){return{start:S(O.on(e,t)),finish:S(O.on(n,r))}}},Ad.detect().browser.isSafari(),Kl=function(e){var e=void 0!==e?e.dom():s.document,t=e.body.scrollLeft||e.documentElement.scrollLeft,e=e.body.scrollTop||e.documentElement.scrollTop;return $o(t,e)},Gl=function(e,t,n){(void 0!==n?n.dom():s.document).defaultView.scrollBy(e,t)},Zl=function(n,r,e,t,o,i,a){return E(e,o)&&t===i?k.none():l(e,"td,th",r).bind(function(t){return l(o,"td,th",r).bind(function(e){return Jl(n,r,t,e,a)})})},Ql=Jl=function(n,e,r,t,o){return E(r,t)?k.none():eo.identify(r,t,e).bind(function(e){var t=e.boxes().getOr([]);return 0<t.length?(o(n,t,e.start(),e.finish()),k.some(Vl.response(k.some(Xl.makeSitus(r,0,r,$n(r))),!0))):k.none()})},ef=function(e,t,n,r,o){return eo.shiftSelection(r,e,t,o.firstSelectedSelector(),o.lastSelectedSelector()).map(function(e){return o.clear(n),o.selectRange(n,e.boxes(),e.start(),e.finish()),e.boxes()})},tf=Re(["left","top","right","bottom"],[]),nf={nu:tf,moveUp:function(e,t){return tf({left:e.left(),top:e.top()-t,right:e.right(),bottom:e.bottom()-t})},moveDown:function(e,t){return tf({left:e.left(),top:e.top()+t,right:e.right(),bottom:e.bottom()+t})},moveBottomTo:function(e,t){var n=e.bottom()-e.top();return tf({left:e.left(),top:t-n,right:e.right(),bottom:t})},moveTopTo:function(e,t){var n=e.bottom()-e.top();return tf({left:e.left(),top:t,right:e.right(),bottom:t+n})},getTop:function(e){return e.top()},getBottom:function(e){return e.bottom()},translate:function(e,t,n){return tf({left:e.left()+t,top:e.top()+n,right:e.right()+t,bottom:e.bottom()+n})},toString:function(e){return"("+e.left()+", "+e.top()+") -> ("+e.right()+", "+e.bottom()+")"}},rf=function(e,t,n){return 0<=n&&n<$n(t)?e.getRangedRect(t,n,t,n+1):0<n?e.getRangedRect(t,n-1,t,n):k.none()},of=function(e){return nf.nu({left:e.left,top:e.top,right:e.right,bottom:e.bottom})},af=function(e,t){return k.some(e.getRect(t))},uf={getBoxAt:function(e,t,n){return Pe(t)?af(e,t).map(of):Oe(t)?rf(e,t,n).map(of):k.none()},getEntireBox:function(e,t){return Pe(t)?af(e,t).map(of):Oe(t)?e.getRangedRect(t,0,t,$n(t)).map(of):k.none()}},sf=t("item","mode"),ff=function(e,t,n,r){return void 0===r&&(r=ff),e=e.property().children(t),n.first(e).map(function(e){return sf(e,r)})},df=[{current:cf=function(e,t,n,r){return void 0===r&&(r=lf),e.property().parent(t).map(function(e){return sf(e,r)})},next:lf=function(e,t,n,r){return void 0===r&&(r=ff),n.sibling(e,t).map(function(e){return sf(e,r)})},fallback:k.none()},{current:lf,next:ff,fallback:k.some(cf)},{current:ff,next:ff,fallback:k.some(lf)}],mf=function(t,n,r,o,e){return ue(e=void 0===e?df:e,function(e){return e.current===r}).bind(function(e){return e.current(t,n,o,e.next).orThunk(function(){return e.fallback.bind(function(e){return mf(t,n,e,o)})})})},gf=function(){return{sibling:function(e,t){return e.query().prevSibling(t)},first:function(e){return 0<e.length?k.some(e[e.length-1]):k.none()}}},hf=function(){return{sibling:function(e,t){return e.query().nextSibling(t)},first:function(e){return 0<e.length?k.some(e[0]):k.none()}}},pf=function(t,e,n,r,o,i){return mf(t,e,r,o).bind(function(e){return i(e.item())?k.none():n(e.item())?k.some(e.item()):pf(t,e.item(),n,e.mode(),o,i)})},vf=function(t){return function(e){return 0===t.property().children(e).length}},bf=function(e,t,n){return xf(e,t,vf(e),n)},yf=function(e,t,n){return wf(e,t,vf(e),n)},xf=function(e,t,n,r){return pf(e,t,n,lf,gf(),r)},wf=function(e,t,n,r){return pf(e,t,n,lf,hf(),r)},Cf=zd(),Sf=function(e,t){return bf(Cf,e,t)},kf=function(e,t){return yf(Cf,e,t)},Tf=function(e,t,n){return xf(Cf,e,t,n)},Nf=function(e,t,n){return wf(Cf,e,t,n)},Ef=ro([{none:[]},{retry:["caret"]}]),Rf=function(e,t){return e.left()<t.left()||Math.abs(t.right()-e.left())<1||e.left()>t.right()},_f=function(t,e,n){return kn(e,ku.isBlock).fold(S(!1),function(e){return uf.getEntireBox(t,e).exists(function(e){return Rf(n,e)})})},o={point:nf.getTop,adjuster:function(e,t,n,r,o){var i=nf.moveUp(o,5);return Math.abs(n.top()-r.top())<1||n.bottom()<o.top()?Ef.retry(i):n.bottom()===o.top()?Ef.retry(nf.moveUp(o,1)):_f(e,t,o)?Ef.retry(nf.translate(i,5,0)):Ef.none()},move:nf.moveUp,gather:Sf},Af={point:nf.getBottom,adjuster:function(e,t,n,r,o){var i=nf.moveDown(o,5);return Math.abs(n.bottom()-r.bottom())<1||n.top()>o.bottom()?Ef.retry(i):n.top()===o.bottom()?Ef.retry(nf.moveDown(o,1)):_f(e,t,o)?Ef.retry(nf.translate(i,5,0)):Ef.none()},move:nf.moveDown,gather:kf},Df=function(e,t,n){return e.elementFromPoint(t,n).filter(function(e){return"table"===b(e)}).isSome()},Pf=function(e,t,n,r,o){return Of(e,t,n,t.move(r,5),o)},Of=function(n,r,o,i,a){return 0===a?k.some(i):Df(n,i.left(),r.point(i))?Pf(n,r,o,i,a-1):n.situsFromPoint(i.left(),r.point(i)).bind(function(e){return e.start().fold(k.none,function(t,e){return uf.getEntireBox(n,t,e).bind(function(e){return r.adjuster(n,t,e,o,i).fold(k.none,function(e){return Of(n,r,o,e,a-1)})}).orThunk(function(){return k.some(i)})},k.none)})},Bf=function(e,t){return e.situsFromPoint(t.left(),t.bottom()+5)},Mf=function(e,t){return e.situsFromPoint(t.left(),t.top()-5)},If=function(e,t,n){return e.point(t)>n.getInnerHeight()?k.some(e.point(t)-n.getInnerHeight()):e.point(t)<0?k.some(-e.point(t)):k.none()},Lf={tryUp:M(i=function(t,n,e){var r=t.move(e,5),o=Of(n,t,e,r,100).getOr(r);return If(t,o,n).fold(function(){return n.situsFromPoint(o.left(),t.point(o))},function(e){return n.scrollBy(0,e),n.situsFromPoint(o.left(),t.point(o)-e)})},o),tryDown:M(i,Af),ieTryUp:Mf,ieTryDown:Bf,getJumpSize:S(5)},Ff=ro([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),Hf=function(e,t,n){t=e.getRect(t),e=e.getRect(n);return e.right>t.left&&e.left<t.right},zf=function(e){return l(e,"tr")},Uf={verify:function(n,t,e,r,o,i,a){return l(r,"td,th",a).bind(function(e){return l(t,"td,th",a).map(function(t){return E(e,t)?E(r,e)&&$n(e)===o?i(t):Ff.none("in same cell"):Or.sharedOne(zf,[e,t]).fold(function(){return Hf(n,t,e)?Ff.success():i(t)},function(e){return i(t)})})}).getOr(Ff.none("default"))},cata:function(e,t,n,r,o){return e.fold(t,n,r,o)},adt:Ff},Wf=t("element","offset"),t("element","deltaOffset"),t("element","start","finish"),t("begin","end"),t("element","text"),t("ancestor","descendants","element","index"),jf=t("parent","children","element","index"),Vf=function(r){return en(r).bind(function(t){var n=u(t);return qf(n,r).map(function(e){return jf(t,n,r,e)})})},qf=function(e,t){return se(e,M(E,t))},$f=function(e){return"br"===b(e)},Yf=function(e,t,n){return t(e,n).bind(function(e){return Oe(e)&&0===jn(e).trim().length?Yf(e,t,n):k.some(e)})},Xf=function(e,t,n){return n.traverse(t).orThunk(function(){return Yf(t,n.gather,e)}).map(n.relative)},Kf=function(e,t){return on(e,t).filter($f).orThunk(function(){return on(e,t-1).filter($f)})},Gf=function(t,e,n,r){return Kf(e,n).bind(function(e){return r.traverse(e).fold(function(){return Yf(e,r.gather,t).map(r.relative)},function(e){return Vf(e).map(function(e){return O.on(e.parent(),e.index())})})})},Jf={tryBr:function(e,t,n,r){return($f(t)?Xf(e,t,r):Gf(e,t,n,r)).map(function(e){return{start:S(e),finish:S(e)}})},process:function(e){return Uf.cata(e,function(e){return k.none()},function(){return k.none()},function(e){return k.some(Wf(e,0))},function(e){return k.some(Wf(e,$n(e)))})}},Zf=Ad.detect(),Qf=function(n,r,o){return n.getSelection().bind(function(t){return Jf.tryBr(r,t.finish(),t.foffset(),o).fold(function(){return k.some(Wf(t.finish(),t.foffset()))},function(e){e=n.fromSitus(e),e=Uf.verify(n,t.finish(),t.foffset(),e.finish(),e.foffset(),o.failure,r);return Jf.process(e)})})},ed=function(n,r,o,i,a,u){return 0===u?k.none():rd(n,r,o,i,a).bind(function(e){var t=n.fromSitus(e),t=Uf.verify(n,o,i,t.finish(),t.foffset(),a.failure,r);return Uf.cata(t,function(){return k.none()},function(){return k.some(e)},function(e){return E(o,e)&&0===i?td(n,o,i,nf.moveUp,a):ed(n,r,e,0,a,u-1)},function(e){return E(o,e)&&i===$n(e)?td(n,o,i,nf.moveDown,a):ed(n,r,e,$n(e),a,u-1)})})},td=function(t,e,n,r,o){return uf.getBoxAt(t,e,n).bind(function(e){return nd(t,o,r(e,Lf.getJumpSize()))})},nd=function(e,t,n){return Zf.browser.isChrome()||Zf.browser.isSafari()||Zf.browser.isFirefox()||Zf.browser.isEdge()?t.otherRetry(e,n):Zf.browser.isIE()?t.ieRetry(e,n):k.none()},rd=function(t,e,n,r,o){return uf.getBoxAt(t,n,r).bind(function(e){return nd(t,o,e)})},od={handle:function(t,n,r){return Qf(t,n,r).bind(function(e){return ed(t,n,e.element(),e.offset(),r,20).map(t.fromSitus)})}},id=function(e,t,n){return Sn(e,t,n).isSome()},ad=Ad.detect(),ud=function(e,t){return id(e,function(e){return en(e).exists(function(e){return E(e,t)})})},sd=function(t,r,o,e,i){return l(e,"td,th",r).bind(function(n){return l(n,"table",r).bind(function(e){return ud(i,e)?od.handle(t,r,o).bind(function(t){return l(t.finish(),"td,th",r).map(function(e){return{start:S(n),finish:S(e),range:S(t)}})}):k.none()})})},cd=function(e,t,n,r,o,i){return ad.browser.isIE()?k.none():i(r,t).orThunk(function(){return sd(e,t,n,r,o).map(function(e){e=e.range();return Vl.response(k.some(Xl.makeSitus(e.start(),e.soffset(),e.finish(),e.foffset())),!0)})})},ld=function(e,t,n,r,o,i,a){return sd(e,n,r,o,i).bind(function(e){return Ql(t,n,e.start(),e.finish(),a)})},fd=function(e,r){return l(e,"tr",r).bind(function(n){return l(n,"table",r).bind(function(e){var t=Cn(e,"tr");return E(n,t[0])?Tf(e,function(e){return Jn(e).isSome()},r).map(function(e){var t=$n(e);return Vl.response(k.some(Xl.makeSitus(e,t,e,t)),!0)}):k.none()})})},dd=function(e,r){return l(e,"tr",r).bind(function(n){return l(n,"table",r).bind(function(e){var t=Cn(e,"tr");return E(n,t[t.length-1])?Nf(e,function(e){return Gn(e).isSome()},r).map(function(e){return Vl.response(k.some(Xl.makeSitus(e,0,e,0)),!0)}):k.none()})})},md=function(e,t){return l(e,"td,th",t)},gd={down:{traverse:rn,gather:kf,relative:O.before,otherRetry:Lf.tryDown,ieRetry:Lf.ieTryDown,failure:Uf.adt.failedDown},up:{traverse:nn,gather:Sf,relative:O.before,otherRetry:Lf.tryUp,ieRetry:Lf.ieTryUp,failure:Uf.adt.failedUp}},hd=t("rows","cols"),pd={mouse:function(e,t,n,r){var o,i,a,u,s,c,e=Xd(e);return o=e,i=t,a=n,u=r,s=k.none(),c=function(){s=k.none()},{mousedown:(e={mousedown:function(e){u.clear(i),s=md(e.target(),a)},mouseover:function(e){s.each(function(r){u.clear(i),md(e.target(),a).each(function(n){eo.identify(r,n,a).each(function(e){var t=e.boxes().getOr([]);(1<t.length||1===t.length&&!E(r,n))&&(u.selectRange(i,t,e.start(),e.finish()),o.selectContents(n))})})})},mouseup:function(){s.each(c)}}).mousedown,mouseover:e.mouseover,mouseup:e.mouseup}},keyboard:function(e,s,c,l){var f=Xd(e),d=function(){return l.clear(s),k.none()};return{keydown:function(e,t,n,r,o,i){var a=e.raw().which,u=!0===e.raw().shiftKey;return eo.retrieve(s,l.selectedSelector()).fold(function(){return Yl.isDown(a)&&u?M(ld,f,s,c,gd.down,r,t,l.selectRange):Yl.isUp(a)&&u?M(ld,f,s,c,gd.up,r,t,l.selectRange):Yl.isDown(a)?M(cd,f,c,gd.down,r,t,dd):Yl.isUp(a)?M(cd,f,c,gd.up,r,t,fd):k.none},function(t){function e(e){return function(){return si(e,function(e){return ef(e.rows(),e.cols(),s,t,l)}).fold(function(){return eo.getEdges(s,l.firstSelectedSelector(),l.lastSelectedSelector()).map(function(e){var t=Yl.isDown(a)||i.isForward(a)?O.after:O.before;return f.setRelativeSelection(O.on(e.first(),0),t(e.table())),l.clear(s),Vl.response(k.none(),!0)})},function(e){return k.some(Vl.response(k.none(),!0))})}}return Yl.isDown(a)&&u?e([hd(1,0)]):Yl.isUp(a)&&u?e([hd(-1,0)]):i.isBackward(a)&&u?e([hd(0,-1),hd(-1,0)]):i.isForward(a)&&u?e([hd(0,1),hd(1,0)]):Yl.isNavigation(a)&&!1==u?d:k.none})()},keyup:function(t,n,r,o,i){return eo.retrieve(s,l.selectedSelector()).fold(function(){var e=t.raw().which;return!1!=(!0===t.raw().shiftKey)&&Yl.isNavigation(e)?Zl(s,c,n,r,o,i,l.selectRange):k.none()},k.none)}}}},vd=function(t,e){x(e,function(e){wi(t,e)})},bd=function(t){return function(e){yi(e,t)}},yd=function(t){return function(e){vd(e,t)}},xd={byClass:function(o){var i=bd(o.selected()),t=yd([o.selected(),o.lastSelected(),o.firstSelected()]),a=function(e){e=Cn(e,o.selectedSelector());x(e,t)};return{clear:a,selectRange:function(e,t,n,r){a(e),x(t,i),yi(n,o.firstSelected()),yi(r,o.lastSelected())},selectedSelector:o.selectedSelector,firstSelectedSelector:o.firstSelectedSelector,lastSelectedSelector:o.lastSelectedSelector}},byAttr:function(o){var t=function(e){T(e,o.selected()),T(e,o.firstSelected()),T(e,o.lastSelected())},i=function(e){y(e,o.selected(),"1")},a=function(e){e=Cn(e,o.selectedSelector());x(e,t)};return{clear:a,selectRange:function(e,t,n,r){a(e),x(t,i),y(n,o.firstSelected(),"1"),y(r,o.lastSelected(),"1")},selectedSelector:o.selectedSelector,firstSelectedSelector:o.firstSelectedSelector,lastSelectedSelector:o.lastSelectedSelector}}},wd=function(e){return!1===Ci(N.fromDom(e.target),"ephox-snooker-resizer-bar")},Cd=function(t){return{get:function(){var e=zu(t);return to.retrieve(e,no.selectedSelector()).fold(function(){return void 0===t.selection.getStart()?oo.none():oo.single(t.selection)},function(e){return oo.multiple(e)})}}},Sd=D.each,kd=function(t){var n=[];function e(e){return function(){t.execCommand(e)}}Sd("inserttable tableprops deletetable | cell row column".split(" "),function(e){n.push("|"===e?{text:"-"}:t.menuItems[e])}),t.addButton("table",{type:"menubutton",title:"Table",menu:n}),t.addButton("tableprops",{title:"Table properties",onclick:e("mceTableProps"),icon:"table"}),t.addButton("tabledelete",{title:"Delete table",onclick:e("mceTableDelete")}),t.addButton("tablecellprops",{title:"Cell properties",onclick:e("mceTableCellProps")}),t.addButton("tablemergecells",{title:"Merge cells",onclick:e("mceTableMergeCells")}),t.addButton("tablesplitcells",{title:"Split cell",onclick:e("mceTableSplitCells")}),t.addButton("tableinsertrowbefore",{title:"Insert row before",onclick:e("mceTableInsertRowBefore")}),t.addButton("tableinsertrowafter",{title:"Insert row after",onclick:e("mceTableInsertRowAfter")}),t.addButton("tabledeleterow",{title:"Delete row",onclick:e("mceTableDeleteRow")}),t.addButton("tablerowprops",{title:"Row properties",onclick:e("mceTableRowProps")}),t.addButton("tablecutrow",{title:"Cut row",onclick:e("mceTableCutRow")}),t.addButton("tablecopyrow",{title:"Copy row",onclick:e("mceTableCopyRow")}),t.addButton("tablepasterowbefore",{title:"Paste row before",onclick:e("mceTablePasteRowBefore")}),t.addButton("tablepasterowafter",{title:"Paste row after",onclick:e("mceTablePasteRowAfter")}),t.addButton("tableinsertcolbefore",{title:"Insert column before",onclick:e("mceTableInsertColBefore")}),t.addButton("tableinsertcolafter",{title:"Insert column after",onclick:e("mceTableInsertColAfter")}),t.addButton("tabledeletecol",{title:"Delete column",onclick:e("mceTableDeleteCol")})},Td=function(t){var e=function(e){return t.dom.is(e,"table")&&t.getBody().contains(e)},n=vs(t);0<n.length&&t.addContextToolbar(e,n.join(" "))},Nd=function(r,n){var o,e,i,a,u,s,c,t,l,f,d,m,g,h,p,v,b;function y(e){return function(){r.execCommand(e)}}o=k.none(),e=[],i=[],a=[],u=[],s=function(e){e.disabled(!0)},c=function(e){e.disabled(!1)},h=function(){var t=this;e.push(t),o.fold(function(){s(t)},function(e){c(t)})},b=function(){var t=this;i.push(t),o.fold(function(){s(t)},function(e){c(t)})},t=function(){var t=this;a.push(t),o.fold(function(){s(t)},function(e){t.disabled(e.mergable().isNone())})},l=function(){var t=this;u.push(t),o.fold(function(){s(t)},function(e){t.disabled(e.unmergable().isNone())})},f=function(){o.fold(function(){x(e,s),x(i,s),x(a,s),x(u,s)},function(t){x(e,c),x(i,c),x(a,function(e){e.disabled(t.mergable().isNone())}),x(u,function(e){e.disabled(t.unmergable().isNone())})})},r.on("init",function(){r.on("nodechange",function(e){var t=k.from(r.dom.getParent(r.selection.getStart(),"th,td"));o=t.bind(function(e){var t=N.fromDom(e);return R.table(t).map(function(e){return co.forMenu(n,e,t)})}),f()})}),m=function(){var e,t,n="";for(n='<table role="grid" class="mce-grid mce-grid-border" aria-readonly="true">',e=0;e<10;e++){for(n+="<tr>",t=0;t<10;t++)n+='<td role="gridcell" tabindex="-1"><a id="mcegrid'+(10*e+t)+'" href="#" data-mce-x="'+t+'" data-mce-y="'+e+'"></a></td>';n+="</tr>"}return n=n+"</table>"+'<div class="mce-text-center" role="presentation">1 x 1</div>'},m=!(d=function(e,t,n,r){var o,i,a,u,s,c=r.getEl().getElementsByTagName("table")[0],l=r.isRtl()||"tl-tr"===r.parent().rel;for(c.nextSibling.innerHTML=t+1+" x "+(n+1),l&&(t=9-t),i=0;i<10;i++)for(o=0;o<10;o++)u=c.rows[i].childNodes[o].firstChild,e.dom.toggleClass(u,"mce-active",s=(l?t<=o:o<=t)&&i<=n),s&&(a=u);return a.parentNode})===ss(r)?{text:"Table",icon:"table",context:"table",onclick:y("mceInsertTable")}:{text:"Table",icon:"table",context:"table",ariaHideMenu:!0,onclick:function(e){e.aria&&(this.parent().hideAll(),e.stopImmediatePropagation(),r.execCommand("mceInsertTable"))},onshow:function(){d(r,0,0,this.menu.items()[0])},onhide:function(){var e=this.menu.items()[0].getEl().getElementsByTagName("a");r.dom.removeClass(e,"mce-active"),r.dom.addClass(e[0],"mce-active")},menu:[{type:"container",html:m(),onPostRender:function(){this.lastX=this.lastY=0},onmousemove:function(e){var t,n=e.target;"A"===n.tagName.toUpperCase()&&(t=parseInt(n.getAttribute("data-mce-x"),10),n=parseInt(n.getAttribute("data-mce-y"),10),(t=!this.isRtl()&&"tl-tr"!==this.parent().rel?t:9-t)===this.lastX&&n===this.lastY||(d(r,t,n,e.control),this.lastX=t,this.lastY=n))},onclick:function(e){var t=this;"A"===e.target.tagName.toUpperCase()&&(e.preventDefault(),e.stopPropagation(),t.parent().cancel(),r.undoManager.transact(function(){Xs.insert(r,t.lastX+1,t.lastY+1)}),r.addVisual())}}]},g={text:"Table properties",context:"table",onPostRender:h,onclick:y("mceTableProps")},h={text:"Delete table",context:"table",onPostRender:h,cmd:"mceTableDelete"},p={text:"Row",context:"table",menu:[{text:"Insert row before",onclick:y("mceTableInsertRowBefore"),onPostRender:b},{text:"Insert row after",onclick:y("mceTableInsertRowAfter"),onPostRender:b},{text:"Delete row",onclick:y("mceTableDeleteRow"),onPostRender:b},{text:"Row properties",onclick:y("mceTableRowProps"),onPostRender:b},{text:"-"},{text:"Cut row",onclick:y("mceTableCutRow"),onPostRender:b},{text:"Copy row",onclick:y("mceTableCopyRow"),onPostRender:b},{text:"Paste row before",onclick:y("mceTablePasteRowBefore"),onPostRender:b},{text:"Paste row after",onclick:y("mceTablePasteRowAfter"),onPostRender:b}]},v={text:"Column",context:"table",menu:[{text:"Insert column before",onclick:y("mceTableInsertColBefore"),onPostRender:b},{text:"Insert column after",onclick:y("mceTableInsertColAfter"),onPostRender:b},{text:"Delete column",onclick:y("mceTableDeleteCol"),onPostRender:b}]},b={separator:"before",text:"Cell",context:"table",menu:[{text:"Cell properties",onclick:y("mceTableCellProps"),onPostRender:b},{text:"Merge cells",onclick:y("mceTableMergeCells"),onPostRender:t},{text:"Split cell",onclick:y("mceTableSplitCells"),onPostRender:l}]},r.addMenuItem("inserttable",m),r.addMenuItem("tableprops",g),r.addMenuItem("deletetable",h),r.addMenuItem("row",p),r.addMenuItem("column",v),r.addMenuItem("cell",b)},Ed=function(e){return e.get().fold(function(){},function(e){return h(e,function(e){return e.dom()})})},Rd=function(e,t){e=h(e,N.fromDom);t.set(k.from(e))},_d=function(n,t){return{insertTable:function(e,t){return Xs.insert(n,e,t)},setClipboardRows:function(e){return Rd(e,t)},getClipboardRows:function(){return Ed(t)}}},I.add("table",function(t){var e,n,r,o,v,b,y,x,w,i=Cc(t);return v=t,b=i.lazyResize,y=Re(["mousedown","mouseover","mouseup","keyup","keydown"],[]),x=k.none(),w=xd.byAttr(no),v.on("init",function(e){var n=v.getWin(),r=zu(v),t=ju(v),o=function(){var e=v.selection,t=N.fromDom(e.getStart()),e=N.fromDom(e.getEnd());Or.sharedOne(R.table,[t,e]).fold(function(){w.clear(r)},C)},i=pd.mouse(n,r,t,w),a=pd.keyboard(n,r,t,w),u=function(e){return!0===e.raw().shiftKey},s=function(e,t){u(e)&&(t.kill()&&e.kill(),t.selection().each(function(e){e=Fc(e.start(),e.finish()),e=tl(n,e);v.selection.setRng(e)}))},t=function(e){var t,n,r=f(e);r.raw().shiftKey&&Yl.isNavigation(r.raw().which)&&(e=v.selection.getRng(),t=N.fromDom(e.startContainer),n=N.fromDom(e.endContainer),a.keyup(r,t,e.startOffset,n,e.endOffset).each(function(e){s(r,e)}))},c=function(e){var t,n,r,o=f(e);b().each(function(e){e.hideBars()}),e=v.selection.getRng(),r=N.fromDom(v.selection.getStart()),t=N.fromDom(e.startContainer),n=N.fromDom(e.endContainer),r=Gu.directionAt(r).isRtl()?Yl.rtl:Yl.ltr,a.keydown(o,t,e.startOffset,n,e.endOffset,r).each(function(e){s(o,e)}),b().each(function(e){e.showBars()})},l=function(e){return e.hasOwnProperty("x")&&e.hasOwnProperty("y")},f=function(e){var t=N.fromDom(e.target),n=function(){e.stopPropagation()},r=function(){e.preventDefault()},o=L(r,n);return{target:S(t),x:S(l(e)?e.x:null),y:S(l(e)?e.y:null),stop:n,prevent:r,kill:o,raw:S(e)}},d=function(e){return 0===e.button},m=function(e){return void 0===e.buttons||0!=(1&e.buttons)},g=function(e){d(e)&&wd(e)&&i.mousedown(f(e))},h=function(e){m(e)&&wd(e)&&i.mouseover(f(e))},p=function(e){d(e)&&wd(e)&&i.mouseup(f(e))};v.on("mousedown",g),v.on("mouseover",h),v.on("mouseup",p),v.on("keyup",t),v.on("keydown",c),v.on("nodechange",o),x=k.some(y({mousedown:g,mouseover:h,mouseup:p,keyup:t,keydown:c}))}),e={clear:w.clear,destroy:function(){x.each(function(e){})}},n=Cs(t,i.lazyWire),r=Cd(t),o=iu(k.none()),ec(t,n,e,r,o),go(t,r,n,e),Nd(t,r),kd(t),Td(t),t.on("PreInit",function(){t.serializer.addTempAttr(no.firstSelected()),t.serializer.addTempAttr(no.lastSelected())}),rs(t)&&t.on("keydown",function(e){Wl(e,t,n,i.lazyWire)}),t.on("remove",function(){i.destroy(),e.destroy()}),_d(t,o)})}(window),function(m){"use strict";var i,t,I,L,o,s,F,H,z,U,g,h,f,W,j,n,p,V,q,$,Y,v,c,d,l,X,b,K,a,u,G,J,Z,Q,r,y,ee,te,ne,re,oe,ie,ae,e,x,w,C,S,k,ue,se,ce,T,N,le,fe,E,de,me,ge,R,_,he,pe,ve,A,be,ye,xe,D,we,Ce,Se,ke,Te,Ne,Ee,Re,_e,Ae,De,Pe,Oe,Be,P,Me,Ie,Le,Fe,O,He,ze,Ue,We,je,Ve,qe,$e,Ye,Xe,Ke,Ge,Je,Ze,Qe,et,tt,nt,rt,ot,it,at,ut,st,ct,lt,ft,B,M;function dt(t,e){return f.each(e,function(e){t=e.constructor===RegExp?t.replace(e,""):t.replace(e[0],e[1])}),t}function mt(e){var o,i,a,t,n,r,u,s;function c(e,t){if(3!==e.type||!t.test(e.value)){if(e=e.firstChild)do{if(!c(e,t))return}while(e=e.next);return 1}e.value=e.value.replace(t,"")}function l(e,t,n){var r=e._listLevel||a;(o=r!==a?r<a?o&&o.parent.parent:(i=o,null):o)&&o.name===t?o.append(e):(i=i||o,o=new d(t,1),1<n&&o.attr("start",""+n),e.wrap(o)),e.name="li",a<r&&i&&i.lastChild.append(o),a=r,function e(t){if(t._listIgnore)t.remove();else if(t=t.firstChild)for(;e(t),t=t.next;);}(e),c(e,/^\u00a0+/),c(e,/^\s*([\u2022\u00b7\u00a7\u25CF]|\w+\.)/),c(e,/^\u00a0+/)}for(a=1,t=[],n=e.firstChild;null!=n;)if(t.push(n),null!==(n=n.walk()))for(;void 0!==n&&n.parent!==e;)n=n.walk();for(r=0;r<t.length;r++)"p"===(e=t[r]).name&&e.firstChild?(u=function e(t){var n="";if(3===t.type)return t.value;if(t=t.firstChild)for(;n+=e(t),t=t.next;);return n}(e),/^[\s\u00a0]*[\u2022\u00b7\u00a7\u25CF]\s*/.test(u)?l(e,"ul"):!function(t){var n,e=[/^[IVXLMCD]{1,2}\.[ \u00a0]/,/^[ivxlmcd]{1,2}\.[ \u00a0]/,/^[a-z]{1,2}[\.\)][ \u00a0]/,/^[A-Z]{1,2}[\.\)][ \u00a0]/,/^[0-9]+\.[ \u00a0]/,/^[\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]+\.[ \u00a0]/,/^[\u58f1\u5f10\u53c2\u56db\u4f0d\u516d\u4e03\u516b\u4e5d\u62fe]+\.[ \u00a0]/];return t=t.replace(/^[\u00a0 ]+/,""),f.each(e,function(e){if(e.test(t))return!(n=!0)}),n}(u)?e._listLevel?l(e,"ul",1):o=null:(s=1,l(e,"ol",s=(u=/([0-9]+)\./.exec(u))?parseInt(u[1],10):s))):(i=o,o=null)}function gt(t,n){t.on("PastePreProcess",function(e){e.content=n(t,e.content,e.internal,e.wordContent)})}function ht(e,t){var n;return a.isWordContent(t)&&(n=[],f.each(e.schema.getBlockElements(),function(e,t){n.push(t)}),e=new RegExp("(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?("+n.join("|")+")[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*","g"),t=b.filter(t,[[e,"$1"]]),t=b.filter(t,[[/<br><br>/g,"<BR><BR>"],[/<br>/g," "],[/<BR><BR>/g,"<br>"]])),t}function pt(e,t,n,r){var c,l,f;return r||n||(r=s.getWebkitStyles(e),!1!==s.shouldRemoveWebKitStyles(e)&&"all"!==r&&(t=(t=(c=r?r.split(/[, ]/):c)?(l=e.dom,f=e.selection.getNode(),t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,function(e,t,n,r){var o,i,a,u=l.parseStyle(l.decode(n)),s={};if("none"===c)return t+r;for(o=0;o<c.length;o++)i=u[c[o]],a=l.getStyle(f,c[o],!0),/color/.test(c[o])&&(i=l.toHex(i),a=l.toHex(a)),a!==i&&(s[c[o]]=i);return(s=l.serializeStyle(s,"span"))?t+' style="'+s+'"'+r:t+r})):t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3")).replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,function(e,t,n,r){return t+' style="'+n+'"'+r}))),t}function vt(n,e){n.$("a",e).find("font,u").each(function(e,t){n.dom.remove(t,!0)})}i=function(e){var t=e,e=function(){return t};return{get:e,set:function(e){t=e},clone:function(){return i(t)}}},t=tinymce.util.Tools.resolve("tinymce.PluginManager"),I=function(e){return!(!/(^|[ ,])powerpaste([, ]|$)/.test(e.settings.plugins)||!t.get("powerpaste")||(void 0!==m.window.console&&m.window.console.log&&m.window.console.log("PowerPaste is incompatible with Paste plugin! Remove 'paste' from the 'plugins' option."),0))},L=function(e,t){return{clipboard:e,quirks:t}},o={firePastePreProcess:function(e,t,n,r){return e.fire("PastePreProcess",{content:t,internal:n,wordContent:r})},firePastePostProcess:function(e,t,n,r){return e.fire("PastePostProcess",{node:t,internal:n,wordContent:r})},firePastePlainTextToggle:function(e,t){return e.fire("PastePlainTextToggle",{state:t})},firePaste:function(e,t){return e.fire("paste",{ieFake:t})}},s={shouldPlainTextInform:function(e){return e.getParam("paste_plaintext_inform",!0)},shouldBlockDrop:function(e){return e.getParam("paste_block_drop",!1)},shouldPasteDataImages:function(e){return e.getParam("paste_data_images",!1)},shouldFilterDrop:function(e){return e.getParam("paste_filter_drop",!0)},getPreProcess:function(e){return e.getParam("paste_preprocess")},getPostProcess:function(e){return e.getParam("paste_postprocess")},getWebkitStyles:function(e){return e.getParam("paste_webkit_styles")},shouldRemoveWebKitStyles:function(e){return e.getParam("paste_remove_styles_if_webkit",!0)},shouldMergeFormats:function(e){return e.getParam("paste_merge_formats",!0)},isSmartPasteEnabled:function(e){return e.getParam("smart_paste",!0)},isPasteAsTextEnabled:function(e){return e.getParam("paste_as_text",!1)},getRetainStyleProps:function(e){return e.getParam("paste_retain_style_properties")},getWordValidElements:function(e){return e.getParam("paste_word_valid_elements","-strong/b,-em/i,-u,-span,-p,-ol,-ul,-li,-h1,-h2,-h3,-h4,-h5,-h6,-p/div,-a[href|name],sub,sup,strike,br,del,table[width],tr,td[colspan|rowspan|width],th[colspan|rowspan|width],thead,tfoot,tbody")},shouldConvertWordFakeLists:function(e){return e.getParam("paste_convert_word_fake_lists",!0)},shouldUseDefaultFilters:function(e){return e.getParam("paste_enable_default_filters",!0)}},F=function(e,t){return!1===t.get()&&s.shouldPlainTextInform(e)},H=function(e,t){e.notificationManager.open({text:e.translate(t),type:"info"})},z=function(e,t,n){"text"===t.pasteFormat.get()?(t.pasteFormat.set("html"),o.firePastePlainTextToggle(e,!1)):(t.pasteFormat.set("text"),o.firePastePlainTextToggle(e,!0),F(e,n)&&(H(e,"Paste is now in plain text mode. Contents will now be pasted as plain text until you toggle this option off."),n.set(!0))),e.focus()},U=function(e,n,t){e.addCommand("mceTogglePlainTextPaste",function(){z(e,n,t)}),e.addCommand("mceInsertClipboardContent",function(e,t){t.content&&n.pasteHtml(t.content,t.internal),t.text&&n.pasteText(t.text)})},g=tinymce.util.Tools.resolve("tinymce.Env"),h=tinymce.util.Tools.resolve("tinymce.util.Delay"),f=tinymce.util.Tools.resolve("tinymce.util.Tools"),W=tinymce.util.Tools.resolve("tinymce.util.VK"),n="\x3c!-- "+(j="x-tinymce/html")+" --\x3e",p={mark:function(e){return n+e},unmark:function(e){return e.replace(n,"")},isMarked:function(e){return-1!==e.indexOf(n)},internalHtmlMime:function(){return j}},V=tinymce.util.Tools.resolve("tinymce.html.Entities"),$=function(e,t){var n,r=[],e="<"+e;if("object"==typeof t){for(n in t)t.hasOwnProperty(n)&&r.push(n+'="'+V.encodeAllRaw(t[n])+'"');r.length&&(e+=" "+r.join(" "))}return e+">"},v={isPlainText:function(e){return!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e)},convert:function(e,t,n){return t?Y(e,t,n):q(e)},toBRs:q=function(e){return e.replace(/\r?\n/g,"<br>")},toBlockElements:Y=function(e,t,n){var e=e.split(/\n\n/),r=$(t,n),o="</"+t+">",n=f.map(e,function(e){return e.split(/\n/).join("<br />")});return 1===n.length?n[0]:f.map(n,function(e){return r+e+o}).join("")}},c=tinymce.util.Tools.resolve("tinymce.html.DomParser"),d=tinymce.util.Tools.resolve("tinymce.html.Node"),l=tinymce.util.Tools.resolve("tinymce.html.Schema"),X=tinymce.util.Tools.resolve("tinymce.html.Serializer"),b={filter:dt,innerText:function(e){var t,n,o,i,a,u;return t=l(),n=c({},t),o="",i=t.getShortEndedElements(),a=f.makeMap("script noscript style textarea video audio iframe object"," "),u=t.getBlockElements(),e=dt(e,[/<!\[[^\]]+\]>/g]),function e(t){var n=t.name,r=t;if("br"===n)o+="\n";else if("wbr"!==n)if(i[n]&&(o+=" "),a[n])o+=" ";else{if(3===t.type&&(o+=t.value),!t.shortEnded&&(t=t.firstChild))for(;e(t),t=t.next;);u[n]&&r.next&&(o+="\n","p"===n)&&(o+="\n")}}(n.parse(e)),o},trimHtml:function(e){return e=dt(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,function(e,t,n){return t||n?"":" "}],/<br class="Apple-interchange-newline">/g,/<br>$/i])},createIdGenerator:function(e){var t=0;return function(){return e+t++}},isMsEdge:function(){return-1!==m.navigator.userAgent.indexOf(" Edge/")}},K=function(r,e){var o,t,n=s.getRetainStyleProps(r);return n&&(o=f.makeMap(n.split(/[, ]/))),e=b.filter(e,[/<br class="?Apple-interchange-newline"?>/gi,/<b[^>]+id="?docs-internal-[^>]*>/gi,/<!--[\s\S]+?-->/gi,/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,[/<(\/?)s>/gi,"<$1strike>"],[/&nbsp;/gi,""],[/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,function(e,t){return 0<t.length?t.replace(/./," ").slice(Math.floor(t.length/2)).split("").join(""):""}]]),n=s.getWordValidElements(r),n=l({valid_elements:n,valid_children:"-li[p]"}),f.each(n.elements,function(e){e.attributes.class||(e.attributes.class={},e.attributesOrder.push("class")),e.attributes.style||(e.attributes.style={},e.attributesOrder.push("style"))}),(t=c({},n)).addAttributeFilter("style",function(e){for(var t,n=e.length;n--;)(t=e[n]).attr("style",function(n,r,o,i){var a,u={},e=n.dom.parseStyle(i);return f.each(e,function(e,t){switch(t){case"mso-list":(a=/\w+ \w+([0-9]+)/i.exec(i))&&(o._listLevel=parseInt(a[1],10)),/Ignore/i.test(e)&&o.firstChild&&(o._listIgnore=!0,o.firstChild._listIgnore=!0);break;case"horiz-align":t="text-align";break;case"vert-align":t="vertical-align";break;case"font-color":case"mso-foreground":t="color";break;case"mso-background":case"mso-highlight":t="background";break;case"font-weight":case"font-style":return void("normal"!==e&&(u[t]=e));case"mso-element":if(/^(comment|comment-list)$/i.test(e))return void o.remove()}0===t.indexOf("mso-comment")?o.remove():0!==t.indexOf("mso-")&&("all"===s.getRetainStyleProps(n)||r&&r[t])&&(u[t]=e)}),/(bold)/i.test(u["font-weight"])&&(delete u["font-weight"],o.wrap(new d("b",1))),/(italic)/i.test(u["font-style"])&&(delete u["font-style"],o.wrap(new d("i",1))),(u=n.dom.serializeStyle(u,o.name))||null}(r,o,t,t.attr("style"))),"span"===t.name&&t.parent&&!t.attributes.length&&t.unwrap()}),t.addAttributeFilter("class",function(e){for(var t,n,r=e.length;r--;)n=(t=e[r]).attr("class"),/^(MsoCommentReference|MsoCommentText|msoDel)$/i.test(n)&&t.remove(),t.attr("class",null)}),t.addNodeFilter("del",function(e){for(var t=e.length;t--;)e[t].remove()}),t.addNodeFilter("a",function(e){for(var t,n,r,o=e.length;o--;)n=(t=e[o]).attr("href"),r=t.attr("name"),n&&-1!==n.indexOf("#_msocom_")?t.remove():!(n=n&&0===n.indexOf("file://")?(n=n.split("#")[1])&&"#"+n:n)&&!r||r&&!/^_?(?:toc|edn|ftn)/i.test(r)?t.unwrap():t.attr({href:n,name:r})}),t=t.parse(e),s.shouldConvertWordFakeLists(r)&&mt(t),e=X({validate:r.settings.validate},n).serialize(t)},a={preProcess:function(e,t){return s.shouldUseDefaultFilters(e)?K(e,t):t},isWordContent:function(e){return/<font face="Times New Roman"|class="?Mso|style="[^"]*\bmso-|style='[^'']*\bmso-|w:WordDocument/i.test(e)||/class="OutlineElement/.test(e)||/id="?docs\-internal\-guid\-/.test(e)}},u=function(e,t){return{content:e,cancelled:t}},G=function(e,t,n,r){t=e.dom.create("div",{style:"display:none"},t),e=o.firePastePostProcess(e,t,n,r);return u(e.node.innerHTML,e.isDefaultPrevented())},J=function(e,t,n,r){t=o.firePastePreProcess(e,t,n,r);return e.hasEventListeners("PastePostProcess")&&!t.isDefaultPrevented()?G(e,t.content,n,r):u(t.content,t.isDefaultPrevented())},Z={process:function(e,t,n){var r=a.isWordContent(t),t=r?a.preProcess(e,t):t;return J(e,t,n,r)}},Q=function(e,t){e=e.dom.create("body",{},t);return f.each(e.querySelectorAll("meta"),function(e){return e.parentNode.removeChild(e)}),e.innerHTML},r=function(e,t){return e.insertContent(Q(e,t),{merge:s.shouldMergeFormats(e),paste:!0}),!0},te=function(e,t,n){return e.undoManager.extra(function(){n(e,t)},function(){e.insertContent('<img src="'+t+'">')}),!0},ne=function(e,t,n){return e.undoManager.extra(function(){n(e,t)},function(){e.execCommand("mceInsertLink",!1,t)}),!0},re=function(e,t,n){return!(!1!==e.selection.isCollapsed()||!y(t))&&ne(e,t,n)},oe=function(e,t,n){return!!ee(t)&&te(e,t,n)},ie=function(t,n){f.each([re,oe,r],function(e){return!0!==e(t,n,r)})},M=(e=function(e){return function(){return e}})(!(ae={isImageUrl:ee=function(e){return y(e)&&/.(gif|jpe?g|png)$/.test(e)},isAbsoluteUrl:y=function(e){return/^https?:\/\/[\w\?\-\/+=.&%@~#]+$/i.test(e)},insertContent:function(e,t){(!1===s.isSmartPasteEnabled(e)?r:ie)(e,t)}})),B=e(!0),M={fold:function(e,t){return e()},is:x=M,isSome:x,isNone:w=B,getOr:M=function(e){return e},getOrThunk:B=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:function(){return null},getOrUndefined:function(){},or:M,orThunk:B,map:C=function(){return S},ap:C,each:function(){},bind:C,flatten:C,exists:x,forall:w,filter:C,equals:B=function(e){return e.isNone()},equals_:B,toArray:function(){return[]},toString:e("none()")},Object.freeze&&Object.freeze(M),S=M,ue=k=function(n){var e=function(){return n},t=function(){return o},r=function(e){return e(n)},o={fold:function(e,t){return t(n)},is:function(e){return n===e},isSome:w,isNone:x,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:t,orThunk:t,map:function(e){return k(e(n))},ap:function(e){return e.fold(C,function(e){return k(e(n))})},each:function(e){e(n)},bind:r,flatten:e,exists:r,forall:r,filter:function(e){return e(n)?o:S},equals:function(e){return e.is(n)},equals_:function(e,t){return e.fold(x,function(e){return t(n,e)})},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return o},se=C,ce=function(e){var t;return null===e?"null":"object"==(t=typeof e)&&Array.prototype.isPrototypeOf(e)?"array":"object"==t&&String.prototype.isPrototypeOf(e)?"string":t},B=function(t){return function(e){return ce(e)===t}}("function"),T=function(e,t){for(var n,r=e.length,o=new Array(r),i=0;i<r;i++)n=e[i],o[i]=t(n,i,e);return o},N=function(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n,e)},le=function(e,t){for(var n,r=[],o=0,i=e.length;o<i;o++)t(n=e[o],o,e)&&r.push(n);return r},fe=Array.prototype.slice,E=B(Array.from)?Array.from:function(e){return fe.call(e)},me=de=function(e){var n=se(),t=[],r=function(n){return de(function(t){o(function(e){t(n(e))})})},o=function(e){i()?u(e):t.push(e)},i=function(){return n.isSome()},a=function(e){N(e,u)},u=function(t){n.each(function(e){m.setTimeout(function(){t(e)},0)})};return e(function(e){n=ue(e),a(t),t=[]}),{get:o,map:r,isReady:i}},ge=function(r){return function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e=this,m.setTimeout(function(){r.apply(e,t)},0)}},_=R=function(t){var e=function(e){t(ge(e))},n=function(){return me(e)};return{map:function(n){return R(function(t){e(function(e){e=n(e);t(e)})})},bind:function(n){return R(function(t){e(function(e){n(e).get(t)})})},anonBind:function(n){return R(function(t){e(function(e){n.get(t)})})},toLazy:n,toCached:function(){var t=null;return R(function(e){(t=null===t?n():t).get(e)})},get:e}},he=function(a,e){return e(function(n){var r=[],o=0,i=function(t){return function(e){r[t]=e,++o>=a.length&&n(r)}};0===a.length?n([]):N(a,function(e,t){e.get(i(t))})})},pe=function(e){return he(e,_)},ve=function(e,t){e=T(e,t);return pe(e)},A=function(e,t,n){n=n||p.isMarked(t),t=Z.process(e,p.unmark(t),n);!1===t.cancelled&&ae.insertContent(e,t.content)},be=function(e,t){t=e.dom.encode(t).replace(/\r\n/g,"\n"),t=v.convert(t,e.settings.forced_root_block,e.settings.forced_root_block_attrs),A(e,t,!1)},ye=function(e){var t,n,r,o={};if(e&&(e.getData&&(t=e.getData("Text"))&&0<t.length&&-1===t.indexOf("data:text/mce-internal,")&&(o["text/plain"]=t),e.types))for(n=0;n<e.types.length;n++){r=e.types[n];try{o[r]=e.getData(r)}catch(e){o[r]=""}}return o},xe=function(e,t){t=ye(t.clipboardData||e.getDoc().dataTransfer);return b.isMsEdge()?f.extend(t,{"text/html":""}):t},D=function(e,t){return t in e&&0<e[t].length},we=function(e){return D(e,"text/html")||D(e,"text/plain")},Ce=function(e){var t=e.indexOf(",");return-1!==t?e.substr(t+1):null},Se=function(e,t){return!e.images_dataimg_filter||e.images_dataimg_filter(t)},ke=function(e,t){t=t.match(/([\s\S]+?)\.(?:jpeg|jpg|png|gif)$/i);return t?e.dom.encode(t[1]):null},Te=b.createIdGenerator("mceclip"),Ne=function(e,t){var n,r,o=Ce(t.uri),i=Te(),a=e.settings.images_reuse_filename&&t.blob.name?ke(e,t.blob.name):i,u=new m.Image;u.src=t.uri,Se(e.settings,u)?(u=void 0,(r=(n=e.editorUpload.blobCache).findFirst(function(e){return e.base64()===o}))?u=r:(u=n.create(i,t.blob,o,a),n.add(u)),A(e,'<img src="'+u.blobUri()+'">',!1)):A(e,'<img src="'+t.uri+'">',!1)},Ee=function(e){return"paste"===e.type},Re=function(e){return ve(e,function(r){return _(function(e){var t=r.getAsFile?r.getAsFile():r,n=new window.FileReader;n.onload=function(){e({blob:t,uri:n.result})},n.readAsDataURL(t)})})},_e=function(e){var t=e.items?T(E(e.items),function(e){return e.getAsFile()}):[],e=e.files?E(e.files):[];return le(0<t.length?t:e,function(e){return/^image\/(jpeg|png|gif|bmp)$/.test(e.type)})},Ae=function(t,e,n){var r=Ee(e)?e.clipboardData:e.dataTransfer;return!!(t.settings.paste_data_images&&r&&0<(r=_e(r)).length)&&(e.preventDefault(),Re(r).get(function(e){n&&t.selection.setRng(n),N(e,function(e){Ne(t,e)})}),!0)},De=function(e){e=e.clipboardData;return-1!==m.navigator.userAgent.indexOf("Android")&&e&&e.items&&0===e.items.length},Pe=function(e){return W.metaKeyPressed(e)&&86===e.keyCode||e.shiftKey&&45===e.keyCode},Oe=function(a,u,s){var c,l,f;function d(e,t,n,r){var o,i;D(e,"text/html")?o=e["text/html"]:(o=u.getHtml(),r=r||p.isMarked(o),u.isDefaultContent(o)&&(n=!0)),o=b.trimHtml(o),u.remove(),i=!1===r&&v.isPlainText(o),(n=o.length&&!i?n:!0)&&(o=D(e,"text/plain")&&i?e["text/plain"]:b.innerText(o)),u.isDefaultContent(o)?t||a.windowManager.alert("Please use Ctrl+V/Cmd+V keyboard shortcuts to paste contents."):n?be(a,o):A(a,o,r)}c=0,a.on("keydown",function(e){function t(e){Pe(e)&&!e.isDefaultPrevented()&&u.remove()}!Pe(e)||e.isDefaultPrevented()||(l=e.shiftKey&&86===e.keyCode)&&g.webkit&&-1!==m.navigator.userAgent.indexOf("Version/")||(e.stopImmediatePropagation(),c=(new Date).getTime(),g.ie&&l?(e.preventDefault(),o.firePaste(a,!0)):(u.remove(),u.create(),a.once("keyup",t),a.once("paste",function(){a.off("keyup",t)})))}),f=function(){return u.getLastRng()||a.selection.getRng()},a.on("paste",function(e){var t=(new Date).getTime(),n=xe(a,e),t=(new Date).getTime()-t,r=(new Date).getTime()-c-t<1e3,o="text"===s.get()||l,i=D(n,p.internalHtmlMime());l=!1,e.isDefaultPrevented()||De(e)||!we(n)&&Ae(a,e,f())?u.remove():(r||e.preventDefault(),!g.ie||r&&!e.ieFake||D(n,"text/html")||(u.create(),a.dom.bind(u.getEl(),"paste",function(e){e.stopPropagation()}),a.getDoc().execCommand("Paste",!1,null),n["text/html"]=u.getHtml()),D(n,"text/html")?(e.preventDefault(),i=i||p.isMarked(n["text/html"]),d(n,r,o,i)):h.setEditorTimeout(a,function(){d(n,r,o,i)},0))})},Be=function(u,e,t){var s;Oe(u,e,t),u.parser.addNodeFilter("img",function(e,t,n){var r,o=function(e){e.attr("data-mce-object")||s===g.transparentSrc||e.remove()},i=function(e){return 0===e.indexOf("webkit-fake-url")},a=function(e){return 0===e.indexOf("data:")};if(!u.settings.paste_data_images&&function(e){return e.data&&!0===e.data.paste}(n))for(r=e.length;r--;)(s=e[r].attributes.map.src)&&(i(s)||!u.settings.allow_html_data_urls&&a(s))&&o(e[r])})},P=function(e){return g.ie&&e.inline?m.document.body:e.getBody()},Me=function(e){return P(e)!==e.getBody()},Ie=function(t,e,n){Me(t)&&t.dom.bind(e,"paste keyup",function(e){je(t,n)||t.fire("paste")})},Le=function(e,t,n){var r=e.dom,o=e.getBody();t.set(e.selection.getRng()),t=e.dom.add(P(e),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},n),(g.ie||g.gecko)&&r.setStyle(t,"left","rtl"===r.getStyle(o,"direction",!0)?65535:-65535),r.bind(t,"beforedeactivate focusin focusout",function(e){e.stopPropagation()}),Ie(e,t,n),t.focus(),e.selection.select(t,!0)},Fe=function(e,t){var n,r;if(O(e)){for(r=t.get();n=e.dom.get("mcepastebin");)e.dom.remove(n),e.dom.unbind(n);r&&e.selection.setRng(r)}t.set(null)},O=function(e){return e.dom.get("mcepastebin")},He=function(n){var e,t,r,o=function(e,t){e.appendChild(t),n.dom.remove(t,!0)},i=f.grep(P(n).childNodes,function(e){return"mcepastebin"===e.id}),a=i.shift();for(f.each(i,function(e){o(a,e)}),e=(t=n.dom.select("div[id=mcepastebin]",a)).length-1;0<=e;e--)r=n.dom.create("div"),a.insertBefore(r,t[e]),o(r,t[e]);return a?a.innerHTML:""},ze=function(e){return e.get()},Ue=function(e,t){return t===e},We=function(e){return e&&"mcepastebin"===e.id},je=function(e,t){e=O(e);return We(e)&&Ue(t,e.innerHTML)},Ve=function(e){var t=i(null),n="%MCEPASTEBIN%";return{create:function(){return Le(e,t,n)},remove:function(){return Fe(e,t)},getEl:function(){return O(e)},getHtml:function(){return He(e)},getLastRng:function(){return ze(t)},isDefault:function(){return je(e,n)},isDefaultContent:function(e){return Ue(n,e)}}},qe=function(n,e){var t=Ve(n);return n.on("preInit",function(){return Be(n,t,e)}),{pasteFormat:e,pasteHtml:function(e,t){return A(n,e,t)},pasteText:function(e){return be(n,e)},pasteImageData:function(e,t){return Ae(n,e,t)},getDataTransferItems:ye,hasHtmlOrText:we,hasContentType:D}},$e=function(){},Ye=function(e){return!1===g.iOS&&void 0!==e&&"function"==typeof e.setData&&!0!==b.isMsEdge()},Xe=function(e,t,n){if(!Ye(e))return!1;try{return e.clearData(),e.setData("text/html",t),e.setData("text/plain",n),e.setData(p.internalHtmlMime(),t),!0}catch(e){return!1}},Ke=function(e,t,n,r){Xe(e.clipboardData,t.html,t.text)?(e.preventDefault(),r()):n(t.html,r)},Ge=function(i){return function(e,t){var n,r,e=p.mark(e),o=i.dom.create("div",{contenteditable:"false","data-mce-bogus":"all"}),e=i.dom.create("div",{contenteditable:"true"},e);i.dom.setStyles(o,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),o.appendChild(e),i.dom.add(i.getBody(),o),n=i.selection.getRng(),e.focus(),(r=i.dom.createRng()).selectNodeContents(e),i.selection.setRng(r),setTimeout(function(){i.selection.setRng(n),o.parentNode.removeChild(o),t()},0)}},Je=function(e){return{html:e.selection.getContent({contextual:!0}),text:e.selection.getContent({format:"text"})}},Ze=function(e){return!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody())},Qe=function(e){return!e.selection.isCollapsed()||Ze(e)},et=function(t){return function(e){Qe(t)&&Ke(e,Je(t),Ge(t),function(){setTimeout(function(){t.execCommand("Delete")},0)})}},tt=function(t){return function(e){Qe(t)&&Ke(e,Je(t),Ge(t),$e)}},nt=function(e){e.on("cut",et(e)),e.on("copy",tt(e))},rt=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),ot=function(e,t){return rt.getCaretRangeFromPoint(t.clientX,t.clientY,e.getDoc())},it=function(e){e=e["text/plain"];return!!e&&0===e.indexOf("file://")},at=function(e,t){e.focus(),e.selection.setRng(t)},ut=function(i,a,u){s.shouldBlockDrop(i)&&i.on("dragend dragover draggesture dragdrop drop drag",function(e){e.preventDefault(),e.stopPropagation()}),s.shouldPasteDataImages(i)||i.on("drop",function(e){var t=e.dataTransfer;t&&t.files&&0<t.files.length&&e.preventDefault()}),i.on("drop",function(e){var t,n,r,o=ot(i,e);e.isDefaultPrevented()||u.get()||(t=a.getDataTransferItems(e.dataTransfer),n=a.hasContentType(t,p.internalHtmlMime()),(a.hasHtmlOrText(t)&&!it(t)||!a.pasteImageData(e,o))&&o&&s.shouldFilterDrop(i)&&(r=t["mce-internal"]||t["text/html"]||t["text/plain"])&&(e.preventDefault(),h.setEditorTimeout(i,function(){i.undoManager.transact(function(){t["mce-internal"]&&i.execCommand("Delete"),at(i,o),r=b.trimHtml(r),t["text/html"]?a.pasteHtml(r,n):a.pasteText(r)})})))}),i.on("dragstart",function(e){u.set(!0)}),i.on("dragover dragend",function(e){s.shouldPasteDataImages(i)&&!1===u.get()&&(e.preventDefault(),at(i,ot(i,e))),"dragend"===e.type&&u.set(!1)})},st=function(e){var t,n=e.plugins.paste,r=s.getPreProcess(e);r&&e.on("PastePreProcess",function(e){r.call(n,n,e)}),(t=s.getPostProcess(e))&&e.on("PastePostProcess",function(e){t.call(n,n,e)})},ct=function(e){var t,n;g.webkit&&gt(e,pt),g.ie&&(gt(e,ht),n=vt,(t=e).on("PastePostProcess",function(e){n(t,e.node)}))},lt=function(e,t,n){var r=n.control;r.active("text"===t.pasteFormat.get()),e.on("PastePlainTextToggle",function(e){r.active(e.state)})},ft=function(e,t){var n=function(r){for(var o=[],e=1;e<arguments.length;e++)o[e-1]=arguments[e];return function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e=o.concat(t),r.apply(null,e)}}(lt,e,t);e.addButton("pastetext",{active:!1,icon:"pastetext",tooltip:"Paste as text",cmd:"mceTogglePlainTextPaste",onPostRender:n}),e.addMenuItem("pastetext",{text:"Paste as text",selectable:!0,active:t.pasteFormat,cmd:"mceTogglePlainTextPaste",onPostRender:n})},t.add("paste",function(e){var t,n,r,o;if(!1===I(e))return t=i(!1),n=i(!1),r=i(s.isPasteAsTextEnabled(e)?"text":"html"),r=qe(e,r),o=ct(e),ft(e,r),U(e,r,t),st(e),nt(e),ut(e,r,n),L(r,o)})}(window),tinymce.PluginManager.requireLangPack("asciimath"),tinymce.create("tinymce.plugins.AsciimathPlugin",{init:function(i,e){var a=this;i.addCommand("mceAsciimath",function(e){null==a.lastAMnode?-1==(existing=i.selection.getContent()).indexOf("class=AM")&&(existing=(existing=(existing=(existing=existing.replace(/<([^>]*)>/g,"")).replace(/&(m|n)dash;/g,"-")).replace(/&?nbsp;?/g," ")).replace(/&(.*?);/g,"$1"),e&&(existing=e),entity="<span class=AMedit>`"+existing+'<span id="removeme"></span>`</span>&nbsp;',tinymce.isIE&&i.focus(),i.selection.setContent(entity),i.selection.setCursorLocation(i.dom.get("removeme"),0),i.dom.remove("removeme"),a.justinserted=!0,i.nodeChanged(),a.justinserted=null):e&&i.selection.setContent(" "+e+" ")}),i.addCommand("mceAsciimathDlg",function(){"undefined"==typeof AMTcgiloc&&(AMTcgiloc=""),i.windowManager.open({title:"Math Symbols",file:e+"/amcharmap.htm",width:720,height:380,inline:1},{plugin_url:e,AMTcgiloc:AMTcgiloc})}),i.on("KeyDown",function(e){var t;13==e.keyCode||35==e.keyCode||40==e.keyCode?(t=i.dom.getParent(i.selection.getNode(),"span.AMedit"))&&(i.selection.select(t),i.selection.collapse(!1)):(46==e.keyCode||8==e.keyCode)&&(node=i.selection.getNode(),t=i.dom.getParent(node,"span.AM"))&&t.parentNode.removeChild(t)}),i.on("KeyPress",function(e){"`"==String.fromCharCode(e.charCode||e.keyCode)&&(null==a.lastAMnode&&-1==(existing=i.selection.getContent()).indexOf("class=AM")&&(existing=(existing=(existing=(existing=existing.replace(/<([^>]*)>/g,"")).replace(/&(m|n)dash;/g,"-")).replace(/&?nbsp;?/g," ")).replace(/&(.*?);/g,"$1"),entity='<span class="AMedit">`'+existing+'<span id="removeme"></span>`</span>&nbsp;',tinymce.isIE&&i.focus(),i.selection.setContent(entity),i.selection.setCursorLocation(i.dom.get("removeme"),0),i.dom.remove("removeme"),a.justinserted=!0,i.nodeChanged(),a.justinserted=null),e.stopPropagation?(e.stopPropagation(),e.preventDefault()):(e.cancelBubble=!0,e.returnValue=!1))}),i.addButton("asciimath",{tooltip:"Add New Math",cmd:"mceAsciimath",icon:"mathadd"}),i.addButton("asciimathcharmap",{tooltip:"Math Symbols",cmd:"mceAsciimathDlg",icon:"math"}),i.on("PastePostProcess",function(e){for(var t,n,r=i.dom.select("span.AM",e.node),o=0;o<r.length;o++)a.math2ascii(r[o]);for(t=i.dom.select("span[data-asciimath]",e.node),o=0;o<t.length;o++)a.mathjax2ascii(t[o]);for(t=i.dom.select("mjx-container[data-asciimath]",e.node),o=0;o<t.length;o++)n=i.dom.create("span",{"data-asciimath":t[o].getAttribute("data-asciimath")}),t[o].parentNode.replaceChild(n,t[o]),a.mathjax2ascii(n)}),i.on("PreProcess",function(e){var t,n;if(e.get){for(AMtags=i.dom.select("span.AM",e.node),t=0;t<AMtags.length;t++)a.math2ascii(AMtags[t]);for(AMtags=i.dom.select("span.AMedit",e.node),t=0;t<AMtags.length;t++)n=AMtags[t].innerHTML,n="`"+a.cleanmath(n)+"`",AMtags[t].innerHTML=n,AMtags[t].className="AM"}}),i.on("LoadContent",function(e){AMtags=i.dom.select("span.AM");for(var t=0;t<AMtags.length;t++)a.nodeToAM(AMtags[t]);a.loaded=!0}),i.on("SetContent",function(e){if(a.loaded){AMtags=i.dom.select("span.AM");for(var t=0;t<AMtags.length;t++)AMtags[t].innerHTML.match(/(math|img)/)||a.nodeToAM(AMtags[t])}}),i.on("BeforeSetContent",function(e){e.content=e.content.replace(/(<span[^>]+AM.*?<\/span>)</,"$1 <")}),i.on("BeforeExecCommand",function(e){if(null!=a.lastAMnode){if("Superscript"==e.command||"Subscript"==e.command||"Bold"==e.command||"Subscript"==e.command||"mceToggleFormat"==e.command)return void e.preventDefault();if("mceShowCharmap"==e.command)return e.preventDefault(),void i.execCommand("mceAsciimathDlg")}if("mceAsciimath"!=e.command&&"mceAsciimathDlg"!=e.command){AMtags=i.dom.select("span.AM");for(var t=0;t<AMtags.length;t++)a.math2ascii(AMtags[t])}}),i.on("ExecCommand",function(e){var t;if("mceAsciimath"!=e.command&&"mceAsciimathDlg"!=e.command){for(AMtags=i.dom.select("span.AM"),t=0;t<AMtags.length;t++)AMtags[t].innerHTML.match(/(math|img)/)||(AMtags[t].innerHTML=AMtags[t].title,a.nodeToAM(AMtags[t]));for(AMimgs=i.dom.select("img.AMimg"),t=0;t<AMimgs.length;t++)a.imgwrap(i,AMimgs[t])}}),i.on("NodeChange",function(e){var t=!0;if(null!=(p=a.testAMclass(e.element)?e.element:i.dom.getParent(e.element,a.testAMclass))){if(a.lastAMnode!=p){if(a.math2ascii(p),p.className="AMedit",null!=a.lastAMnode&&(a.nodeToAM(a.lastAMnode),a.lastAMnode.className="AM"),null==a.justinserted&&p.parentNode.innerHTML.match(/<span[^>]*class="AMedit"[^<]*?<\/span>(\s*<br>)?\s*$/)){for(;"span"!=p.parentNode.lastChild.nodeName.toLowerCase();)p.parentNode.removeChild(p.parentNode.lastChild);p.parentNode.appendChild(i.dom.doc.createTextNode(""))}if(null==a.justinserted&&p.parentNode.innerHTML.match(/^\s*<span[^>]*class="AMedit"/)){for(;"span"!=p.parentNode.firstChild.nodeName.toLowerCase();)p.parentNode.removeChild(p.parentNode.firstChild);p.parentNode.insertBefore(i.dom.doc.createTextNode(""),p.parentNode.firstChild)}null==a.justinserted&&i.selection.setCursorLocation(p,0),a.lastAMnode=p}t=!1}t&&null!=a.lastAMnode&&(a.lastAMnode.innerHTML.match(/`(&nbsp;|\s|\u00a0|&#160;)*`/)||a.lastAMnode.innerHTML.match(/^(&nbsp;|\s|\u00a0|&#160;)*$/)?(p=a.lastAMnode.parentNode).removeChild(a.lastAMnode):(a.nodeToAM(a.lastAMnode),a.lastAMnode.className="AM"),a.lastAMnode=null)}),i.on("Deactivate",function(e){null!=a.lastAMnode&&(a.lastAMnode.innerHTML.match(/`(&nbsp;|\s)*`/)||a.lastAMnode.innerHTML.match(/^(&nbsp;|\s|\u00a0|&#160;)*$/)?(p=a.lastAMnode.parentNode).removeChild(a.lastAMnode):(a.nodeToAM(a.lastAMnode),a.lastAMnode.className="AM"),a.lastAMnode=null)})},getInfo:function(){return{longname:"Asciimath plugin",author:"David Lippman",authorurl:"http://dlippman.imathas.com",infourl:"",version:"4.0"}},math2ascii:function(e){var t=e.innerHTML;-1==t.indexOf("`")&&(t=(t=(t=(t=(t=""!=e.title&&-1==e.title.indexOf("math")&&-1==e.title.indexOf("img")?e.title:-1==t.indexOf("title")?(t=(t=(t=t.replace(/.+alt=\"(.*?)\".+/g,"$1")).replace(/.+alt=\'(.*?)\'.+/g,"$1")).replace(/.+alt=([^>]*?)\s.*>.*/g,"$1")).replace(/.+alt=(.*?)>.*/g,"$1"):(t=(t=(t=t.replace(/.+title=\"(.*?)\".+/g,"$1")).replace(/.+title=\'(.*?)\'.+/g,"$1")).replace(/.+title=([^>]*?)\s.*>.*/g,"$1")).replace(/.+title=(.*?)>.*/g,"$1")).replace(/<span[^>]*>(.*?)<\/span>/,"$1")).replace(/<br\s*\/>/," ")).replace(/>/g,"&gt;")).replace(/</g,"&lt;"),t="`"+this.cleanmath(t)+"`",e.innerHTML=t)},mathjax2ascii:function(e){for(var t=e.getAttribute("data-asciimath"),n=e.attributes,r=n.length;r--;)e.removeAttribute(n[r].name);e.className="AM",e.title=t,e.innerHTML="`"+t+"`"},nodeToAM:function(e){var t,n=e.innerHTML.replace(/\`/g,"");n=(n=n.replace(/<span[^>]*>(.*?)<\/span>/,"$1").replace(/<br\s*\/>/," ").replace(/<img[^>]*title="(.*?)".*?>/g,"$1")).replace(/[\u200B-\u200D\uFEFF]/g,""),tinymce.isIE?((t=document.createElement("span")).className="AM",t.appendChild(AMTparseMath(n)),e.innerHTML=t.innerHTML,e.title=n):(t="`"+this.cleanmath(n)+"`",e.innerHTML=t,AMprocessNode(e),e.title=t.replace(/\`/g,""))},cleanmath:function(e){return e.replace(/\`/g,"").replace(/<([^>]*)>/g,"").replace(/&(m|n)dash;/g,"-").replace(/&?nbsp;?/g," ").replace(/&(.*?);/g,function(e,t){return"lt"==t||"gt"==t?e:t})},imgwrap:function(e,t){null==(p=e.dom.getParent(t,this.testAMclass))&&((e=document.createElement("span")).className="AM",t=t.parentNode.replaceChild(e,t),e.appendChild(t),p=e)},lastAMnode:null,loaded:!1,preventAMrender:!1,testAMclass:function(e){return"AM"==e.className||"AMedit"==e.className}}),tinymce.PluginManager.add("asciimath",tinymce.plugins.AsciimathPlugin),tinymce.PluginManager.requireLangPack("asciisvg"),tinymce.create("tinymce.plugins.AsciisvgPlugin",{init:function(r,e){var n=this;r.addCommand("mceAsciisvg",function(){"IMG"!=(el=r.selection.getNode()).nodeName||""==r.dom.getAttrib(el,"sscr")&&!r.dom.getAttrib(el,"src").match(/sscr=/)?(isnew=!0,sscr="-7.5,7.5,-5,5,1,1,1,1,1,300,200",elwidth=300,elheight=200,alignm="middle"):(""==(sscr=r.dom.getAttrib(el,"sscr"))&&(sscr=r.dom.getAttrib(el,"src"),sscr=decodeURIComponent(sscr.replace(/.*sscr=(.*)/,"$1"))),isnew=!1,elwidth=parseInt(r.dom.getStyle(el,"width")),elheight=parseInt(r.dom.getStyle(el,"height")),"none"==(alignm=r.dom.getStyle(el,"float"))&&(alignm=r.dom.getStyle(el,"vertical-align"))),r.windowManager.open({title:"Graph Editor",file:e+"/asciisvgdlg.htm",width:670,height:460,inline:1},{plugin_url:e,isnew:isnew,sscr:sscr,width:elwidth,height:elheight,alignm:alignm,AScgiloc:r.getParam("AScgiloc")})}),r.addButton("asciisvg",{tooltip:"Add/Edit Graph",cmd:"mceAsciisvg",icon:"graph",stateSelector:"img[data-asciisvg]"}),r.on("PostProcess",function(e){var t,n;if(e.get&&null!=(t=e.content.match(/<img[^>]*sscr[^>]*>/gi)))for(n=0;n<t.length;n++)sscr=t[n].match(/sscr=\"/)?t[n].replace(/.*sscr=\"(.*?)\".*/,"$1"):t[n].replace(/.*sscr=(.*?)(\s|\").*/,"$1"),style=t[n].match(/style=\"/)?t[n].replace(/.*style=\"(.*?)\".*/,"$1"):"",rep='<embed type="image/svg+xml" style="'+style+'" sscr="'+decodeURIComponent(sscr)+'" />',e.content=e.content.replace(t[n],rep)}),r.on("BeforeSetContent",function(e){var t,n=e.content.match(/<embed[^>]*sscr[^>]*>/gi);if(null!=n)for(t=0;t<n.length;t++)sscr=n[t].match(/sscr=\"/)?n[t].replace(/.*sscr=\"(.*?)\".*/,"$1"):n[t].replace(/.*sscr=(.*?)\s.*/,"$1"),style=n[t].match(/style=\"/)?n[t].replace(/.*style=\"(.*?)\".*/,"$1"):"",rep='<img src="'+r.getParam("AScgiloc")+"?sscr="+encodeURIComponent(sscr)+'" style="'+style+'" data-sscr="'+decodeURIComponent(sscr)+'" data-asciisvg="1" data-mce-placeholder="1"/>',e.content=e.content.replace(n[t],rep)}),r.on("ObjectResized",function(e){var t=e.target;"IMG"==t.nodeName&&""!=r.dom.getAttrib(t,"data-sscr")&&setTimeout(function(){n.processresize(r,t)},50)})},getInfo:function(){return{longname:"Asciisvg plugin",author:"David Lippman",authorurl:"http://dlippman.imathas.com",infourl:"",version:"4.3"}},processresize:function(e,t){width=parseInt(t.style.width),height=parseInt(t.style.height),0<width&&0<height&&((sscra=decodeURIComponent(t.getAttribute("data-sscr")).split(","))[9]=width,sscra[10]=height,sscr=sscra.join(","),e.dom.setAttrib(t,"data-sscr",sscr),e.dom.setAttrib(t,"src",e.getParam("AScgiloc")+"?sscr="+encodeURIComponent(sscr)),e.dom.setStyle(t,"width",width+"px"),e.dom.setStyle(t,"height",height+"px"))}}),tinymce.PluginManager.add("asciisvg",tinymce.plugins.AsciisvgPlugin),tinymce.PluginManager.add("rollups",function(e,t){e.addButton("myEdit",{type:"menubutton",text:"Edit",icon:!1,menu:[e.menuItems.undo,e.menuItems.Redo,{text:"-"},e.menuItems.cut,e.menuItems.copy,e.menuItems.paste,e.menuItems.pastetext,,{text:"-"},e.menuItems.selectall,{text:"-"},e.menuItems.searchreplace]}),e.addButton("myInsert",{type:"menubutton",text:"Insert",icon:!1,menu:[e.menuItems.media,e.menuItems.link,e.menuItems.image,e.menuItems.attach,e.menuItems.snippet,{text:"-"},e.menuItems.charmap,e.menuItems.anchor,{icon:"hr",text:"Horizontal line",onclick:function(){e.execCommand("mceInsertContent",!1,"<hr />")}}]});var n=e.buttons.styleselect;n&&n.menu.items.push(e.menuItems.removeformat)}),function(){"use strict";var e,r,o,i,a;e=tinymce.util.Tools.resolve("tinymce.PluginManager"),r=tinymce.util.Tools.resolve("tinymce.util.Color"),o=function(e,t){e.find("#preview")[0].getEl().style.background=t},i=function(e,t){var t=r(t),n=t.toRgb();e.fromJSON({r:n.r,g:n.g,b:n.b,hex:t.toHex().substr(1)}),o(e,t.toHex())},a=function(e,t,n){var r=e.windowManager.open({title:"Color",items:{type:"container",layout:"flex",direction:"row",align:"stretch",padding:5,spacing:10,items:[{type:"colorpicker",value:n,onchange:function(){var e=this.rgb();r&&(r.find("#r").value(e.r),r.find("#g").value(e.g),r.find("#b").value(e.b),r.find("#hex").value(this.value().substr(1)),o(r,this.value()))}},{type:"form",padding:0,labelGap:5,defaults:{type:"textbox",size:7,value:"0",flex:1,spellcheck:!1,onchange:function(){var e=r.find("colorpicker")[0],t=this.name(),n=this.value();"hex"===t?(i(r,n="#"+n),e.value(n)):(n={r:r.find("#r").value(),g:r.find("#g").value(),b:r.find("#b").value()},e.value(n),i(r,n))}},items:[{name:"r",label:"R",autofocus:1},{name:"g",label:"G"},{name:"b",label:"B"},{name:"hex",label:"#",value:"000000"},{name:"preview",type:"container",border:1}]}]},onSubmit:function(){t("#"+r.toJSON().hex)}});i(r,n)},e.add("colorpicker",function(n){n.settings.color_picker_callback||(n.settings.color_picker_callback=function(e,t){a(n,e,t)})})}(),function(){var n,u={},r=function(e){for(var t=u[e],n=t.deps,r=t.defn,o=n.length,i=new Array(o),a=0;a<o;++a)i[a]=s(n[a]);if(void 0===(r=r.apply(null,i)))throw"module ["+e+"] returned undefined";t.instance=r},e=function(e,t,n){if("string"!=typeof e)throw"module id must be a string";if(void 0===t)throw"no dependencies for "+e;if(void 0===n)throw"no definition function for "+e;u[e]={deps:t,defn:n,instance:void 0}},s=function(e){var t=u[e];if(void 0===t)throw"module ["+e+"] was undefined";return void 0===t.instance&&r(e),t.instance},t=function(e,t){for(var n=e.length,r=new Array(n),o=0;o<n;++o)r.push(s(e[o]));t.apply(null,t)};n=e,(t=function(e,t){n(e,[],function(){return t})})("global!Array",Array),t("global!Error",Error),n("ephox.katamari.api.Fun",["global!Array","global!Error"],function(i,t){var e=function(e){return function(){return e}};return{noop:function(){},compose:function(e,t){return function(){return e(t.apply(null,arguments))}},constant:e,identity:function(e){return e},tripleEquals:function(e,t){return e===t},curry:function(r){for(var o=new i(arguments.length-1),e=1;e<arguments.length;e++)o[e-1]=arguments[e];return function(){for(var e,t=new i(arguments.length),n=0;n<t.length;n++)t[n]=arguments[n];return e=o.concat(t),r.apply(null,e)}},not:function(e){return function(){return!e.apply(null,arguments)}},die:function(e){return function(){throw new t(e)}},apply:function(e){return e()},call:function(e){e()},never:e(!1),always:e(!0)}}),t("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),n("tinymce.core.dom.DOMUtils",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.dom.DOMUtils")}),n("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),n("tinymce.core.util.JSON",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.JSON")}),n("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Tools")}),n("tinymce.core.util.XHR",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.XHR")}),n("tinymce.plugins.snippet.core.Snippets",["tinymce.core.util.Tools","tinymce.core.util.XHR"],function(e,r){return{createSnippetList:function(t,n){return function(){var e=t.snippets;"function"==typeof e?e(n):"string"==typeof e?r.send({url:e,success:function(e){n(JSON.parse(e))}}):n(e)}},insertSnippet:function(e,t,n){e.dom,e.selection.getContent();e.execCommand("mceInsertContent",!1,n),e.addVisual()}}}),n("tinymce.plugins.snippet.Plugin",["ephox.katamari.api.Fun","tinymce.core.dom.DOMUtils","tinymce.core.PluginManager","tinymce.core.util.JSON","tinymce.core.util.Tools","tinymce.core.util.XHR","tinymce.plugins.snippet.core.Snippets"],function(t,o,e,n,s,r,c){return e.add("snippet",function(u){function e(e){var i,a,n,t=[],r=[];e&&0!==e.length?(s.each(e,function(e){t.push({selected:!t.length,text:e.text,value:{items:e.items}})}),s.each(e[0].items,function(e){r.push({selected:!r.length,text:e.text,value:{content:e.content}})}),(i=u.windowManager.open({title:"Insert Prewritten Snippet",layout:"flex",direction:"column",align:"stretch",padding:15,spacing:10,items:[{type:"form",flex:0,padding:0,items:[{type:"container",label:"Group",items:{type:"listbox",label:"Group",name:"snippetgroup",values:t,onselect:function(e){var e=e.control.value(),t=[];s.each(e.items,function(e){t.push({text:e.text,value:{content:e.content}})}),n.menu=null,n.state.data.menu=n.settings.values=t,n.value(t[0].value),i.find("listbox")[1].fire("select")}}},{type:"container",label:"Snippets",items:{type:"listbox",id:"snippet",label:"Snippets",name:"snippet",values:r,onselect:function(e){var t,n,r,o,e=e.control.value();e.content&&(a=e.content,t=u,e=i,-1==(n=a).indexOf("<html>")&&(r="",s.each(t.contentCSS,function(e){r+='<link type="text/css" rel="stylesheet" href="'+t.documentBaseURI.toAbsolute(e)+'">'}),-1!=(o=t.settings.body_class||"").indexOf("=")&&(o=(o=t.getParam("body_class","","hash"))[t.id]||""),n="<!DOCTYPE html><html><head>"+r+'</head><body class="'+o+'">'+n+"</body></html>"),(o=e.find("iframe")[0].getEl().contentWindow.document).open(),o.write(n),o.close())},onPostRender:function(){n=this}}}]},{type:"iframe",flex:1,border:1}],buttons:[{text:"Add / Edit Snippets",onclick:function(){window.open(imasroot+"/course/editsnippets.php","_blank"),tinymce.activeEditor.windowManager.close()}},{type:"spacer",flex:1},{text:"Insert",subtype:"primary",onclick:function(){c.insertSnippet(u,!1,a),tinymce.activeEditor.windowManager.close()}},{text:"Cancel",onclick:function(){tinymce.activeEditor.windowManager.close()}}],onsubmit:function(){c.insertSnippet(u,!1,a)},minWidth:Math.min(o.DOM.getViewPort().w,u.getParam("snippet_popup_width",600)),minHeight:Math.min(o.DOM.getViewPort().h,u.getParam("snippet_popup_height",500))})).find("listbox")[0].fire("select")):(e=u.translate("No Snippets defined."),e=(e+='<br><a href="'+imasroot+'/course/editsnippets.php" target="_blank">')+u.translate("Create some")+"</a>",u.notificationManager.open({text:e,type:"info"}))}u.addCommand("mceInsertSnippet",t.curry(c.insertSnippet,u)),void 0!==u.settings.snippets&&!1!==u.settings.snippets&&(u.addButton("snippet",{title:"Insert Prewritten Snippet",onclick:c.createSnippetList(u.settings,e)}),u.addMenuItem("snippet",{text:"Prewritten Snippet",onclick:c.createSnippetList(u.settings,e),context:"insert",icon:"snippet"}))}),function(){}}),s("tinymce.plugins.snippet.Plugin")()}(),function(y){"use strict";var I,o,f,L,F,H,z,U,W,j,V,q,$,Y,X,K,G,J,Z,Q,ee,te,ne,d,m,re,g,oe,ie,h,p,ae,s,ue,se,i,ce,le,fe,a,de,me,ge,he,pe,ve,be,ye,xe,v,we,Ce,Se,ke,Te,Ne,Ee,Re,_e,Ae,De,Pe,Oe,c,Be,Me,Ie,Le,Fe,He,ze,Ue,We,je,Ve,qe,$e,Ye,Xe,Ke,Ge,Je,Ze,Qe,b,et,tt,nt,rt,ot,it,at,ut,st,ct,lt,ft,dt,mt,x,gt,w,ht,pt,vt,bt,yt,xt,wt,Ct,St,kt,Tt,Nt,Et,Rt,u,_t,At,Dt,Pt,Ot,Bt,n,Mt,It,Lt,Ft,Ht,zt,Ut,l,Wt,jt,e,Vt,qt,$t,Yt,Xt,Kt,C,S,Gt,k,Jt,Zt,Qt,en,tn,nn,t,rn,on,an,T,un,sn,N,cn,ln,fn,dn,mn,gn,hn,pn,vn,bn,yn,xn,wn,Cn,Sn,kn,Tn,Nn,En,Rn,_n,An,Dn,Pn,On,Bn,Mn,In,Ln,Fn,Hn,zn,Un,Wn,jn,Vn,qn,$n,Yn,r,Xn,Kn,Gn,Jn,Zn,Qn,er,tr,nr,rr,E,or,ir,ar,ur,sr,cr,lr,R,fr,dr,_,mr,gr,hr,pr,vr,br,yr,A,xr,wr,Cr,Sr,kr,Tr,Nr,Er,Rr,_r,Ar,Dr,Pr,Or,Br,Mr,Ir,Lr,Fr,Hr,zr,D,Ur,Wr,jr,Vr,qr,$r,Yr,Xr,Kr,Gr,Jr,Zr,Qr,eo,to,no,ro,oo,P,io,ao,uo,so,co,lo,fo,mo,go,ho,po,vo,bo,yo,xo,wo,Co,So,ko,To,No,Eo,Ro,_o,Ao,Do,Po,Oo,Bo,Mo,Io,Lo,Fo,Ho,zo,Uo,Wo,jo,Vo,qo,$o,Yo,Xo,Ko,Go,Jo,Zo,Qo,ei,ti,ni,ri,oi,ii,ai,ui,si,ci,li,fi,di,mi,gi,hi,pi,vi,bi,yi,xi,wi,Ci,Si,ki,Ti,O,B,Ni,Ei;function Ri(e,t,n){var r,o=bt(),i=w.getPos(t,pe(e)),a=i.x,i=i.y;return pt(e)&&ht(y.document.body)&&(a-=o.x,i-=o.y),o=e.getEl(),o=(e=w.getSize(o)).width,r=e.height,t=(e=w.getSize(t)).width,e=e.height,"b"===(n=(n||"").split(""))[0]&&(i+=e),"r"===n[1]&&(a+=t),"c"===n[0]&&(i+=Math.round(e/2)),"c"===n[1]&&(a+=Math.round(t/2)),"b"===n[3]&&(i-=r),"r"===n[4]&&(a-=o),"c"===n[3]&&(i-=Math.round(r/2)),"c"===n[4]&&(a-=Math.round(o/2)),{x:a,y:i,w:o,h:r}}function _i(){}function Ai(e){this.cls=[],this.cls._map={},this.onchange=e||_i,this.prefix=""}function Di(e){return 0<e.nodeType}function Pi(n){return n._eventDispatcher||(n._eventDispatcher=new wt({scope:n,toggleEvent:function(e,t){t&&wt.isNative(e)&&(n._nativeEvents||(n._nativeEvents={}),n._nativeEvents[e]=!0,n.state.get("rendered"))&&Oi(n)}})),n._eventDispatcher}function Oi(u){var e,t,n,s,r,o,i;function a(e){var t=u.getParentCtrl(e.target);t&&t.fire(e.type,e)}function c(){var e=s._lastHoverCtrl;e&&(e.fire("mouseleave",{target:e.getEl()}),e.parents().each(function(e){e.fire("mouseleave",{target:e.getEl()})}),s._lastHoverCtrl=null)}function l(e){var t,n,r,o=u.getParentCtrl(e.target),i=s._lastHoverCtrl,a=0;if(o!==i){if((n=(s._lastHoverCtrl=o).parents().toArray().reverse()).push(o),i){for((r=i.parents().toArray().reverse()).push(i),a=0;a<r.length&&n[a]===r[a];a++);for(t=r.length-1;a<=t;t--)(i=r[t]).fire("mouseleave",{target:i.getEl()})}for(t=a;t<n.length;t++)(o=n[t]).fire("mouseenter",{target:o.getEl()})}}function f(e){e.preventDefault(),"mousewheel"===e.type?(e.deltaY=-.025*e.wheelDelta,e.wheelDeltaX&&(e.deltaX=-.025*e.wheelDeltaX)):(e.deltaX=0,e.deltaY=e.detail),u.fire("wheel",e)}if(r=u._nativeEvents){for((n=u.parents().toArray()).unshift(u),e=0,t=n.length;!s&&e<t;e++)s=n[e]._eventsRoot;for(s=s||n[n.length-1]||u,u._eventsRoot=s,t=e,e=0;e<t;e++)n[e]._eventsRoot=s;for(o in i=(i=s._delegates)||(s._delegates={}),r){if(!r)return;"wheel"!==o||Ft?("mouseenter"===o||"mouseleave"===o?s._hasMouseEnter||(x(s.getEl()).on("mouseleave",c).on("mouseover",l),s._hasMouseEnter=1):i[o]||(x(s.getEl()).on(o,a),i[o]=!0),r[o]=!1):Lt?x(u.getEl()).on("mousewheel",f):x(u.getEl()).on("DOMMouseScroll",f)}}}function Bi(e){var t,i,o;function n(e){return e&&1===e.nodeType}t=e.root;try{i=y.document.activeElement}catch(e){i=y.document.body}function a(e){return n(e=e||i)?e.getAttribute("role"):null}function u(e){for(var t,n=e||i;n=n.parentNode;)if(t=a(n))return t}function r(e){var t=i;return n(t)&&t.getAttribute("aria-"+e)}function s(e){e=e.tagName.toUpperCase();return"INPUT"===e||"TEXTAREA"===e||"SELECT"===e}function c(e){var o=[];return function e(t){var n,r;if(1===t.nodeType&&"none"!==t.style.display&&!t.disabled)for((s(n=t)&&!n.hidden||Wt(n)||/^(button|menuitem|checkbox|tab|menuitemcheckbox|option|gridcell|slider)$/.test(a(n)))&&o.push(t),r=0;r<t.childNodes.length;r++)e(t.childNodes[r])}(e||t.getEl()),o}function l(e){var t,n,r;for((n=(e=e||o).parents().toArray()).unshift(e),r=0;r<n.length&&!(t=n[r]).settings.ariaRoot;r++);return t}function f(e,t){return e<0?e=t.length-1:e>=t.length&&(e=0),t[e]&&t[e].focus(),e}function d(e,t){var n,r=-1,o=l();for(t=t||c(o.getEl()),n=0;n<t.length;n++)t[n]===i&&(r=n);o.lastAriaIndex=f(r+=e,t)}function m(){"tablist"===u()?d(-1,c(i.parentNode)):o.parent().submenu?v():d(-1)}function g(){var e=a(),t=u();"tablist"===t?d(1,c(i.parentNode)):"menuitem"===e&&"menu"===t&&r("haspopup")?b():d(1)}function h(){d(-1)}function p(){var e=a(),t=u();"menuitem"===e&&"menubar"===t?b():"button"===e&&r("haspopup")?b({key:"down"}):d(1)}function v(){o.fire("cancel")}function b(e){o.fire("click",{target:i,aria:e=e||{}})}return o=t.getParentCtrl(i),t.on("keydown",function(e){function t(e,t){s(i)||Wt(i)||"slider"!==a(i)&&!1!==t(e)&&e.preventDefault()}var n,r;if(!e.isDefaultPrevented())switch(e.keyCode){case 37:t(e,m);break;case 39:t(e,g);break;case 38:t(e,h);break;case 40:t(e,p);break;case 27:v();break;case 14:case 13:case 32:t(e,b);break;case 9:n=e,"tablist"===u()?(r=c(o.getEl("body"))[0])&&r.focus():d(n.shiftKey?-1:1),e.preventDefault()}}),t.on("focusin",function(e){i=e.target,o=e.control}),{focusFirst:function(e){var t=c((e=l(e)).getEl());e.settings.ariaRemember&&"lastAriaIndex"in e?f(e.lastAriaIndex,t):f(0,t)}}}function Mi(e){var t,n;if(e.changedTouches)for(t="screenX screenY pageX pageY clientX clientY".split(" "),n=0;n<t.length;n++)e[t[n]]=e.changedTouches[0][t[n]]}function M(e,c){var l,f,d,m,g,h,p,v=c.document||y.document;c=c||{},p=v.getElementById(c.handle||e),e=function(e){var t,n,r,o,i,a,u,s;t=v,n=Math.max,r=t.documentElement,t=t.body,o=n(r.scrollWidth,t.scrollWidth),i=n(r.clientWidth,t.clientWidth),a=n(r.offsetWidth,t.offsetWidth),u=n(r.scrollHeight,t.scrollHeight),s=n(r.clientHeight,t.clientHeight),a={width:o<a?i:o,height:u<n(r.offsetHeight,t.offsetHeight)?s:u},Mi(e),e.preventDefault(),f=e.button,i=p,g=e.screenX,h=e.screenY,o=y.window.getComputedStyle?y.window.getComputedStyle(i,null).getPropertyValue("cursor"):i.runtimeStyle.cursor,l=x("<div></div>").css({position:"absolute",top:0,left:0,width:a.width,height:a.height,zIndex:2147483647,opacity:1e-4,cursor:o}).appendTo(v.body),x(v).on("mousemove touchmove",m).on("mouseup touchend",d),c.start(e)},m=function(e){if(Mi(e),e.button!==f)return d(e);e.deltaX=e.screenX-g,e.deltaY=e.screenY-h,e.preventDefault(),c.drag(e)},d=function(e){Mi(e),x(v).off("mousemove touchmove",m).off("mouseup touchend",d),l.remove(),c.stop&&c.stop(e)},this.destroy=function(){x(p).off()},x(p).on("mousedown touchstart",e)}function Ii(e){for(var t,n,r=C.length;r--;)n=(t=C[r]).getParentCtrl(e.target),!t.settings.autohide||n&&(function(e,t){for(;e;){if(e===t)return 1;e=e.parent()}}(n,t)||t.parent()===n)||(e=t.fire("autohide",{target:e.target})).isDefaultPrevented()||t.hide()}function Li(o){var e=w.getViewPort().y;function t(e,t){for(var n,r=0;r<C.length;r++)if(C[r]!==o)for(n=C[r].parent();n=n&&n.parent();)n===o&&C[r].fixed(e).moveBy(0,t).repaint()}o.settings.autofix&&(o.state.get("fixed")?o._autoFixY>e&&(o.fixed(!1).layoutRect({y:o._autoFixY}).repaint(),t(!1,o._autoFixY-e)):(o._autoFixY=o.layoutRect().y,o._autoFixY<e&&(o.fixed(!0).layoutRect({y:0}).repaint(),t(!0,e-o._autoFixY))))}function Fi(e,t){var n,r,o=k.zIndex||65535;if(e)S.push(t);else for(n=S.length;n--;)S[n]===t&&S.splice(n,1);if(S.length)for(n=0;n<S.length;n++)S[n].modal&&(o++,r=S[n]),S[n].getEl().style.zIndex=o,S[n].zIndex=o,o++;e=x("#"+t.classPrefix+"modal-block",t.getContainerElm())[0],r?x(e).css("z-index",r.zIndex-1):e&&(e.parentNode.removeChild(e),Gt=!1),k.currentZIndex=o}function Hi(e){for(var t=C.length;t--;)C[t]===e&&C.splice(t,1);for(t=S.length;t--;)S[t]===e&&S.splice(t,1)}function zi(r,o){var i,a,u=this,s=l.classPrefix;u.show=function(e,t){function n(){i&&(x(r).append('<div class="'+s+"throbber"+(o?" "+s+"throbber-inline":"")+'"></div>'),t)&&t()}return u.hide(),i=!0,e?a=p.setTimeout(n,e):n(),u},u.hide=function(){var e=r.lastChild;return p.clearTimeout(a),e&&-1!==e.className.indexOf("throbber")&&e.parentNode.removeChild(e),i=!1,u}}function Ui(e){var t,n=x("meta[name=viewport]")[0];!1!==b.overrideViewPort&&(n||((n=y.document.createElement("meta")).setAttribute("name","viewport"),y.document.getElementsByTagName("head")[0].appendChild(n)),(t=n.getAttribute("content"))&&void 0!==un&&(un=t),n.setAttribute("content",e?"width=device-width,initial-scale=1.0,user-scalable=0,minimum-scale=1.0,maximum-scale=1.0":un))}function Wi(e,t){!function(){for(var e=0;e<T.length;e++)if(T[e]._fullscreen)return 1;return}()||!1!==t||x([y.document.documentElement,y.document.body]).removeClass(e+"fullscreen")}function ji(e){var t,n="";if(e)for(t=0;t<e.length;t++)n+='<option value="'+e[t]+'">'+e[t]+"</option>";return n}function Vi(e,t,n){return e=n<(e=e<t?t:e)?n:e}function qi(e,t,n){e.setAttribute("aria-"+t,n)}function $i(e,t){var n,r,o="v"===e.settings.orientation?(r="top",n="height","h"):(r="left",n="width","w"),i=e.getEl("handle"),o=((e.layoutRect()[o]||100)-w.getSize(i)[n])*((t-e._minValue)/(e._maxValue-e._minValue))+"px";i.style[r]=o,i.style.height=e.layoutRect().h+"px",qi(i,"valuenow",t),qi(i,"valuetext",""+e.settings.previewFilter(t)),qi(i,"valuemin",e._minValue),qi(i,"valuemax",e._maxValue)}I=tinymce.util.Tools.resolve("tinymce.ThemeManager"),o=tinymce.util.Tools.resolve("tinymce.EditorManager"),f=tinymce.util.Tools.resolve("tinymce.util.Tools"),L=function(e){return e.getParam("branding",!0,"boolean")},F=function(e){return!1!==H(e)},H=function(e){return e.getParam("menubar")},z=function(e){return e.getParam("statusbar",!0,"boolean")},U=function(e){return e.getParam("toolbar_items_size")},W=function(e){return e.getParam("readonly",!1,"boolean")},j=function(e){return e.getParam("fixed_toolbar_container")},V=function(e){return e.getParam("inline_toolbar_position_handler")},q=function(e){return e.getParam("menu")},$=function(e){return e.getParam("removed_menuitems","")},Y=function(e){return e.getParam("min_width",100,"number")},X=function(e){return e.getParam("min_height",100,"number")},K=function(e){return e.getParam("max_width",65535,"number")},G=function(e){return e.getParam("max_height",65535,"number")},J=function(e){return!1===e.settings.skin},Z=function(e){return e.getParam("inline",!1,"boolean")},Q=function(e){e=e.getParam("resize","vertical");return!1===e?"none":"both"===e?"both":"vertical"},ee=function(e){var t=e.settings,n=t.skin,t=t.skin_url;return!1!==n&&(n=n||"lightgray",t=t?e.documentBaseURI.toAbsolute(t):o.baseURL+"/skins/"+n),t},te=function(e,t){for(var n,r=[],o=1;o<10&&(n=e["toolbar"+o]);o++)r.push(n);return t=e.toolbar?[e.toolbar]:[t],0<r.length?r:t},ne=function(e){var t=e.getParam("toolbar");return!1===t?[]:f.isArray(t)?f.grep(t,function(e){return 0<e.length}):te(e.settings,"undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image")},d=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),m=tinymce.util.Tools.resolve("tinymce.ui.Factory"),re=tinymce.util.Tools.resolve("tinymce.util.I18n"),g={fireSkinLoaded:function(e){return e.fire("SkinLoaded")},fireResizeEditor:function(e){return e.fire("ResizeEditor")},fireBeforeRenderUI:function(e){return e.fire("BeforeRenderUI")}},oe=function(t,n){return function(){var e=t.find(n)[0];e&&e.focus(!0)}},ie=function(e,t){e.shortcuts.add("Alt+F9","",oe(t,"menubar")),e.shortcuts.add("Alt+F10,F10","",oe(t,"toolbar")),e.shortcuts.add("Alt+F11","",oe(t,"elementpath")),t.on("cancel",function(){e.focus()})},h=tinymce.util.Tools.resolve("tinymce.geom.Rect"),p=tinymce.util.Tools.resolve("tinymce.util.Delay"),B=(s=function(e){return function(){return e}})(!(ae=function(){for(var e=0;e<arguments.length;e++)e,0})),O=s(!0),B={fold:function(e,t){return e()},is:ue=B,isSome:ue,isNone:se=O,getOr:B=function(e){return e},getOrThunk:O=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:function(){return null},getOrUndefined:function(){},or:B,orThunk:O,map:i=function(){return ce},ap:i,each:function(){},bind:i,flatten:i,exists:ue,forall:se,filter:i,equals:O=function(e){return e.isNone()},equals_:O,toArray:function(){return[]},toString:s("none()")},Object.freeze&&Object.freeze(B),ce=B,fe=le=function(n){var e=function(){return n},t=function(){return o},r=function(e){return e(n)},o={fold:function(e,t){return t(n)},is:function(e){return n===e},isSome:se,isNone:ue,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:t,orThunk:t,map:function(e){return le(e(n))},ap:function(e){return e.fold(i,function(e){return le(e(n))})},each:function(e){e(n)},bind:r,flatten:e,exists:r,forall:r,filter:function(e){return e(n)?o:ce},equals:function(e){return e.is(n)},equals_:function(e,t){return e.fold(ue,function(e){return t(n,e)})},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return o},a=i,de=function(e){return null==e?ce:le(e)},ge=function(e){var t,n,e=me(e);return e&&"static"!==d.DOM.getStyle(e,"position",!0)?(t=d.DOM.getPos(e),n=e.scrollLeft-t.x,e=e.scrollTop-t.y,fe({x:n,y:e})):a()},he=function(e,t){e=d.DOM.select(e.settings.ui_container)[0];t.getRoot().uiContainer=e},pe=me=function(e){return e?e.getRoot().uiContainer:null},ve=function(e,t){return t.uiContainer=me(e)},ye=be=function(r,e,o){var i,a=[];if(e)return f.each(e.split(/[ ,]/),function(t){var e,n=function(){var e=r.selection;t.settings.stateSelector&&e.selectorChanged(t.settings.stateSelector,function(e){t.active(e)},!0),t.settings.disabledStateSelector&&e.selectorChanged(t.settings.disabledStateSelector,function(e){t.disabled(e)})};"|"===t?i=null:(i||(i={type:"buttongroup",items:[]},a.push(i)),r.buttons[t]&&(e=t,(t="function"==typeof(t=r.buttons[e])?t():t).type=t.type||"button",t.size=o,t=m.create(t),i.items.push(t),r.initialized?n():r.on("init",n)))}),{type:"toolbar",layout:"flow",items:a}},xe=function(t,n){var r=[],o=function(e){e&&r.push(be(t,e,n))};if(f.each(ne(t),function(e){o(e)}),r.length)return{type:"panel",layout:"stack",classes:"toolbar-grp",ariaRoot:!0,ariaRemember:!0,items:r}},v=d.DOM,we=function(e){return{left:e.x,top:e.y,width:e.w,height:e.h,right:e.x+e.w,bottom:e.y+e.h}},Ce=function(e){f.each(e.contextToolbars,function(e){e.panel&&e.panel.hide()})},Se=function(e,t){e.moveTo(t.left,t.top)},ke=function(n,r,o){r=r?r.substr(0,2):"",f.each({t:"down",b:"up"},function(e,t){n.classes.toggle("arrow-"+e,o(t,r.substr(0,1)))}),f.each({l:"left",r:"right"},function(e,t){n.classes.toggle("arrow-"+e,o(t,r.substr(1,1)))})},Te=function(e,t,n,r,o,i){return i=we({x:t,y:n,w:i.w,h:i.h}),i=e?e({elementRect:we(r),contentAreaRect:we(o),panelRect:i}):i},Ne=function(c){var r,i=function(){return c.contextToolbars||[]},l=function(e){var t=v.getPos(c.getContentAreaContainer()),e=c.dom.getRect(e),n=c.dom.getRoot();return"BODY"===n.nodeName&&(e.x-=n.ownerDocument.documentElement.scrollLeft||n.scrollLeft,e.y-=n.ownerDocument.documentElement.scrollTop||n.scrollTop),e.x+=t.x,e.y+=t.y,e},n=function(e,t){var n,r,o,i,a,u,s=V(c);c.removed||(e&&e.toolbar.panel?(a=["bc-tc","tc-bc","tl-bl","bl-tl","tr-br","br-tr"],o=e.toolbar.panel,t&&o.show(),t=l(e.element),n=v.getRect(o.getEl()),r=v.getRect(c.getContentAreaContainer()||c.getBody()),u=ge(o).getOr({x:0,y:0}),t.x+=u.x,t.y+=u.y,n.x+=u.x,n.y+=u.y,r.x+=u.x,r.y+=u.y,"inline"!==v.getStyle(e.element,"display",!0)&&(u=e.element.getBoundingClientRect(),t.w=u.width,t.h=u.height),c.inline||(r.w=c.getDoc().documentElement.offsetWidth),c.selection.controlSelection.isResizable(e.element)&&t.w<25&&(t=h.inflate(t,0,8)),u=h.findBestRelativePosition(n,t,r,a),t=h.clamp(t,r),u?(i=h.relativePosition(n,t,u),Se(o,Te(s,i.x,i.y,t,r,n))):(r.h+=n.h,(t=h.intersect(r,t))?(u=h.findBestRelativePosition(n,t,r,["bc-tc","bl-tl","br-tr"]))?(i=h.relativePosition(n,t,u),Se(o,Te(s,i.x,i.y,t,r,n))):Se(o,Te(s,t.x,t.y,t,r,n)):o.hide()),ke(o,u,function(e,t){return e===t})):Ce(c))},o=function(e){return function(){p.requestAnimationFrame(function(){c.selection&&n(s(c.selection.getNode()),e)})}},a=function(e){var t,n;r||(t=o(!0),n=pe(e),r=c.selection.getScrollContainer()||c.getWin(),v.bind(r,"scroll",t),v.bind(n,"scroll",t),c.on("remove",function(){v.unbind(r,"scroll",t),v.unbind(n,"scroll",t)}))},t=function(e){var t;e.toolbar.panel?e.toolbar.panel.show():(t=m.create({type:"floatpanel",role:"dialog",classes:"tinymce tinymce-inline arrow",ariaLabel:"Inline toolbar",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:!0,fixed:!0,border:1,items:ye(c,e.toolbar.items),oncancel:function(){c.focus()}}),he(c,t),a(t),(e.toolbar.panel=t).renderTo().reflow()),n(e)},u=function(){f.each(i(),function(e){e.panel&&e.panel.hide()})},s=function(e){for(var t,n=i(),r=c.$(e).parents().add(e),o=r.length-1;0<=o;o--)for(t=n.length-1;0<=t;t--)if(n[t].predicate(r[o]))return{toolbar:n[t],element:r[o]};return null};c.on("click keyup setContent ObjectResized",function(e){"setcontent"===e.type&&!e.selection||p.setEditorTimeout(c,function(){var e=s(c.selection.getNode());e?(u(),t(e)):u()})}),c.on("blur hide contextmenu",u),c.on("ObjectResizeStart",function(){var e=s(c.selection.getNode());e&&e.toolbar.panel&&e.toolbar.panel.hide()}),c.on("ResizeEditor ResizeWindow",o(!0)),c.on("nodeChange",o(!1)),c.on("remove",function(){f.each(i(),function(e){e.panel&&e.panel.remove()}),c.contextToolbars={}}),c.shortcuts.add("ctrl+F9","",function(){var e=s(c.selection.getNode());e&&e.toolbar.panel&&e.toolbar.panel.items()[0].focus()})},Ee=function(e){var t;return null===e?"null":"object"==(t=typeof e)&&Array.prototype.isPrototypeOf(e)?"array":"object"==t&&String.prototype.isPrototypeOf(e)?"string":t},B=(O=function(t){return function(e){return Ee(e)===t}})("function"),Re=O("number"),Ni=Array.prototype.indexOf,_e=void 0===Ni?function(e,t){return Le(e,t)}:function(e,t){return Ni.call(e,t)},Ae=function(e,t){e=_e(e,t);return-1===e?a():fe(e)},De=function(e,t){return Ie(e,t).isSome()},Pe=function(e,t){for(var n,r=e.length,o=new Array(r),i=0;i<r;i++)n=e[i],o[i]=t(n,i,e);return o},Oe=function(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n,e)},c=function(e,t){for(var n,r=[],o=0,i=e.length;o<i;o++)t(n=e[o],o,e)&&r.push(n);return r},Be=function(e,t,n){return Oe(e,function(e){n=t(n,e)}),n},Me=function(e,t){for(var n,r=0,o=e.length;r<o;r++)if(t(n=e[r],r,e))return fe(n);return a()},Ie=function(e,t){for(var n=0,r=e.length;n<r;n++)if(t(e[n],n,e))return fe(n);return a()},Le=function(e,t){for(var n=0,r=e.length;n<r;++n)if(e[n]===t)return n;return-1},Fe=Array.prototype.push,He=function(e){for(var t=[],n=0,r=e.length;n<r;++n){if(!Array.prototype.isPrototypeOf(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);Fe.apply(t,e[n])}return t},Array.prototype.slice,B(Array.from)&&Array.from,ze={file:{title:"File",items:"newdocument restoredraft | preview | print"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen"},insert:{title:"Insert",items:"image link media template codesample inserttable | charmap hr | pagebreak nonbreaking anchor toc | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | blockformats align | removeformat"},tools:{title:"Tools",items:"spellchecker spellcheckerlanguage | a11ycheck code"},table:{title:"Table"},help:{title:"Help"}},Ue=function(){return{name:"|",item:{text:"|"}}},We=function(e,t){t=t?{name:e,item:t}:null;return"|"===e?Ue():t},je=function(e,t){return Ie(e,function(e){return e.name===t}).isSome()},Ve=function(e){return e&&"|"===e.item.text},qe=function(e,t){e=c(e,function(e){return!1===t.hasOwnProperty(e.name)}),e=c(e,function(e,t,n){return!Ve(e)||!Ve(n[t-1])});return c(e,function(e,t,n){return!Ve(e)||0<t&&t<n.length-1})},$e=function(t,e,n,r){var o,i,a,u;return e?(i=e[r],u=!0):i=ze[r],i&&(o={text:i.title},a=[],f.each((i.items||"").split(/[ ,]/),function(e){e=We(e,t[e]);e&&a.push(e)}),u||f.each(t,function(e,t){e.context!==r||je(a,t)||("before"===e.separator&&a.push(Ue()),e.prependToContext?a.unshift(We(t,e)):a.push(We(t,e)),"after"===e.separator&&a.push(Ue()))}),o.menu=Pe(qe(a,n),function(e){return e.item}),!o.menu.length)?null:o},Ye=function(e){var t,n=[],e=q(e);if(e)for(t in e)n.push(t);else for(t in ze)n.push(t);return n},Xe=function(e){for(var t,n=[],r=Ye(e),o=f.makeMap($(e).split(/[ ,]/)),i=H(e),a="string"==typeof i?i.split(/[ ,]/):r,u=0;u<a.length;u++)t=a[u],(t=$e(e.menuItems,q(e),o,t))&&n.push(t);return n},Ke=d.DOM,Ge=function(e){return{width:e.clientWidth,height:e.clientHeight}},Ze=Je=function(e,t,n){var r=e.getContainer(),o=e.getContentAreaContainer().firstChild,i=Ge(r),a=Ge(o);null!==t&&(t=Math.max(Y(e),t),t=Math.min(K(e),t),Ke.setStyle(r,"width",t+(i.width-a.width)),Ke.setStyle(o,"width",t)),n=Math.max(X(e),n),n=Math.min(G(e),n),Ke.setStyle(o,"height",n),g.fireResizeEditor(e)},Qe=function(e,t,n){var r=e.getContentAreaContainer();Je(e,r.clientWidth+t,r.clientHeight+n)},b=tinymce.util.Tools.resolve("tinymce.Env"),et=function(e){return{element:function(){return e}}},tt=function(e,t,n){e=e.settings[n];e&&e(et(t.getEl("body")))},nt=function(n,r,e){f.each(e,function(e){var t=r.items().filter("#"+e.name)[0];t&&t.visible()&&e.name!==n&&(tt(e,t,"onhide"),t.visible(!1))})},rt=function(e){e.items().each(function(e){e.active(!1)})},ot=function(e,t){return f.grep(e,function(e){return e.name===t})[0]},it=function(o,i,a){return function(e){var e=e.control,t=e.parents().filter("panel")[0],n=t.find("#"+i)[0],r=ot(a,i);nt(i,t,a),rt(e.parent()),n&&n.visible()?(tt(r,n,"onhide"),n.hide(),e.active(!1)):(n?n.show():(n=m.create({type:"container",name:i,layout:"stack",classes:"sidebar-panel",html:""}),t.prepend(n),tt(r,n,"onrender")),tt(r,n,"onshow"),e.active(!0)),g.fireResizeEditor(o)}},at=function(){return!b.ie||11<=b.ie},ut={hasSidebar:function(e){return!(!at()||!e.sidebars)&&0<e.sidebars.length},createSidebar:function(n){return{type:"panel",name:"sidebar",layout:"stack",classes:"sidebar",items:[{type:"toolbar",layout:"stack",classes:"sidebar-toolbar",items:f.map(n.sidebars,function(e){var t=e.settings;return{type:"button",icon:t.icon,image:t.image,tooltip:t.tooltip,onclick:it(n,e.name,n.sidebars)}})}]}}},st=function(e){function t(){e._skinLoaded=!0,g.fireSkinLoaded(e)}return function(){e.initialized?t():e.on("init",t)}},ct=d.DOM,lt=function(t){return function(e){t.find("*").disabled("readonly"===e.mode)}},ft=function(e){return{type:"panel",name:"iframe",layout:"stack",classes:"edit-area",border:e,html:""}},dt=function(e){return{type:"panel",layout:"stack",classes:"edit-aria-container",border:"1 0 0 0",items:[ft("0"),ut.createSidebar(e)]}},mt=function(t,e,n){var r,o,i;return!1===J(t)&&n.skinUiCss?ct.styleSheetLoader.load(n.skinUiCss,st(t)):st(t)(),r=e.panel=m.create({type:"panel",role:"application",classes:"tinymce",style:"visibility: hidden",layout:"stack",border:1,items:[{type:"container",classes:"top-part",items:[!1===F(t)?null:{type:"menubar",border:"0 0 1 0",items:Xe(t)},xe(t,U(t))]},ut.hasSidebar(t)?dt(t):ft("1 0 0 0")]}),he(t,r),"none"!==Q(t)&&(o={type:"resizehandle",direction:Q(t),onResizeStart:function(){var e=t.getContentAreaContainer().firstChild;i={width:e.clientWidth,height:e.clientHeight}},onResize:function(e){"both"===Q(t)?Ze(t,i.width+e.deltaX,i.height+e.deltaY):Ze(t,null,i.height+e.deltaY)}}),z(t)&&(e=re.translate(["Powered by {0}",'<a href="https://www.tiny.cloud/?utm_campaign=editor_referral&amp;utm_medium=poweredby&amp;utm_source=tinymce" rel="noopener" target="_blank" role="presentation" tabindex="-1">Tiny</a>']),e=L(t)?{type:"label",classes:"branding",html:" "+e}:null,r.add({type:"panel",name:"statusbar",classes:"statusbar",layout:"flow",border:"1 0 0 0",ariaRoot:!0,items:[{type:"elementpath",editor:t},o,e]})),g.fireBeforeRenderUI(t),t.on("SwitchMode",lt(r)),r.renderBefore(n.targetNode).reflow(),W(t)&&t.setMode("readonly"),n.width&&ct.setStyle(r.getEl(),"width",n.width),t.on("remove",function(){r.remove(),r=null}),ie(t,r),Ne(t),{iframeContainer:r.find("#iframe")[0].getEl(),editorContainer:r.getEl()}},x=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),gt=0,w={id:function(){return"mceu_"+gt++},create:function(e,t,n){var r=y.document.createElement(e);return d.DOM.setAttribs(r,t),"string"==typeof n?r.innerHTML=n:f.each(n,function(e){e.nodeType&&r.appendChild(e)}),r},createFragment:function(e){return d.DOM.createFragment(e)},getWindowSize:function(){return d.DOM.getViewPort()},getSize:function(e){var t,n=e.getBoundingClientRect?(n=e.getBoundingClientRect(),t=Math.max(n.width||n.right-n.left,e.offsetWidth),Math.max(n.height||n.bottom-n.bottom,e.offsetHeight)):(t=e.offsetWidth,e.offsetHeight);return{width:t,height:n}},getPos:function(e,t){return d.DOM.getPos(e,t||w.getContainer())},getContainer:function(){return b.container||y.document.body},getViewPort:function(e){return d.DOM.getViewPort(e)},get:function(e){return y.document.getElementById(e)},addClass:function(e,t){return d.DOM.addClass(e,t)},removeClass:function(e,t){return d.DOM.removeClass(e,t)},hasClass:function(e,t){return d.DOM.hasClass(e,t)},toggleClass:function(e,t,n){return d.DOM.toggleClass(e,t,n)},css:function(e,t,n){return d.DOM.setStyle(e,t,n)},getRuntimeStyle:function(e,t){return d.DOM.getStyle(e,t,!0)},on:function(e,t,n,r){return d.DOM.bind(e,t,n,r)},off:function(e,t,n){return d.DOM.unbind(e,t,n)},fire:function(e,t,n){return d.DOM.fire(e,t,n)},innerHtml:function(e,t){d.DOM.setHTML(e,t)}},ht=function(e){return"static"===w.getRuntimeStyle(e,"position")},pt=function(e){return e.state.get("fixed")},vt=function(e){return{x:0,y:0,w:e.scrollWidth-1,h:e.scrollHeight-1}},bt=function(){var e=y.window;return{x:Math.max(e.pageXOffset,y.document.body.scrollLeft,y.document.documentElement.scrollLeft),y:Math.max(e.pageYOffset,y.document.body.scrollTop,y.document.documentElement.scrollTop),w:e.innerWidth||y.document.documentElement.clientWidth,h:e.innerHeight||y.document.documentElement.clientHeight}},yt=function(e){var t=pe(e);return t&&!pt(e)?vt(t):bt()},xt={testMoveRel:function(e,t){for(var n,r=yt(this),o=0;o<t.length;o++)if(n=Ri(this,e,t[o]),pt(this)){if(0<n.x&&n.x+n.w<r.w&&0<n.y&&n.y+n.h<r.h)return t[o]}else if(n.x>r.x&&n.x+n.w<r.w+r.x&&n.y>r.y&&n.y+n.h<r.h+r.y)return t[o];return t[0]},moveRel:function(e,t){"string"!=typeof t&&(t=this.testMoveRel(e,t));e=Ri(this,e,t);return this.moveTo(e.x,e.y)},moveBy:function(e,t){var n=this.layoutRect();return this.moveTo(n.x+e,n.y+t),this},moveTo:function(e,t){var n,r,o;function i(e,t,n){return e<0||t<e+n&&(e=t-n)<0?0:e}return(n=this).settings.constrainToViewport&&(o=yt(this),r=n.layoutRect(),e=i(e,o.w+o.x,r.w),t=i(t,o.h+o.y,r.h)),(o=pe(n))&&ht(o)&&!pt(n)&&(e-=o.scrollLeft,t-=o.scrollTop),o&&(e+=1,t+=1),n.state.get("rendered")?n.layoutRect({x:e,y:t}).repaint():(n.settings.x=e,n.settings.y=t),n.fire("move",{x:e,y:t}),n}},O=tinymce.util.Tools.resolve("tinymce.util.Class"),wt=tinymce.util.Tools.resolve("tinymce.util.EventDispatcher"),Ct=function(e){var t;if(e)return"number"==typeof e?{top:e=e||0,left:e,bottom:e,right:e}:(1===(t=(e=e.split(" ")).length)?e[1]=e[2]=e[3]=e[0]:2===t?(e[2]=e[0],e[3]=e[1]):3===t&&(e[3]=e[1]),{top:parseInt(e[0],10)||0,right:parseInt(e[1],10)||0,bottom:parseInt(e[2],10)||0,left:parseInt(e[3],10)||0})},St=function(n,e){function t(e){var t=parseFloat((e=e,(t=n.ownerDocument.defaultView)?(t=t.getComputedStyle(n,null))?(e=e.replace(/[A-Z]/g,function(e){return"-"+e}),t.getPropertyValue(e)):null:n.currentStyle[e]));return isNaN(t)?0:t}return{top:t(e+"TopWidth"),right:t(e+"RightWidth"),bottom:t(e+"BottomWidth"),left:t(e+"LeftWidth")}},f.extend(Ai.prototype,{add:function(e){return e&&!this.contains(e)&&(this.cls._map[e]=!0,this.cls.push(e),this._change()),this},remove:function(e){if(this.contains(e)){for(var t=void 0,t=0;t<this.cls.length&&this.cls[t]!==e;t++);this.cls.splice(t,1),delete this.cls._map[e],this._change()}return this},toggle:function(e,t){var n=this.contains(e);return n!==t&&(n?this.remove(e):this.add(e),this._change()),this},contains:function(e){return!!this.cls._map[e]},_change:function(){delete this.clsValue,this.onchange.call(this)}}),Ai.prototype.toString=function(){var e,t;if(this.clsValue)return this.clsValue;for(e="",t=0;t<this.cls.length;t++)0<t&&(e+=" "),e+=this.prefix+this.cls[t];return e},kt=/^([\w\\*]+)?(?:#([\w\-\\]+))?(?:\.([\w\\\.]+))?(?:\[\@?([\w\\]+)([\^\$\*!~]?=)([\w\\]+)\])?(?:\:(.+))?/i,Tt=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,Nt=/^\s*|\s*$/g,Rt=O.extend({init:function(e){var o=this.match;function a(e,t,n){function r(e){e&&t.push(e)}return r(function(t){if(t)return t=t.toLowerCase(),function(e){return"*"===t||e.type===t}}((e=kt.exec(e.replace(Nt,"")))[1])),r(function(t){if(t)return function(e){return e._name===t}}(e[2])),r(function(n){if(n)return n=n.split("."),function(e){for(var t=n.length;t--;)if(!e.classes.contains(n[t]))return!1;return!0}}(e[3])),r(function(t,n,r){if(t)return function(e){e=e[t]?e[t]():"";return n?"="===n?e===r:"*="===n?0<=e.indexOf(r):"~="===n?0<=(" "+e+" ").indexOf(" "+r+" "):"!="===n?e!==r:"^="===n?0===e.indexOf(r):"$="===n&&e.substr(e.length-r.length)===r:!!r}}(e[4],e[5],e[6])),r(function(r){var t;if(r)return(r=/(?:not\((.+)\))|(.+)/i.exec(r))[1]?(t=u(r[1],[]),function(e){return!o(e,t)}):(r=r[2],function(e,t,n){return"first"===r?0===t:"last"===r?t===n-1:"even"===r?t%2==0:"odd"===r?t%2==1:!!e[r]&&e[r]()})}(e[7])),t.pseudo=!!e[7],t.direct=n,t}function u(e,t){var n,r,o,i=[];do{if(Tt.exec(""),(r=Tt.exec(e))&&(e=r[3],i.push(r[1]),r[2])){n=r[3];break}}while(r);for(n&&u(n,t),e=[],o=0;o<i.length;o++)">"!==i[o]&&e.push(a(i[o],[],">"===i[o-1]));return t.push(e),t}this._selectors=u(e,[])},match:function(e,t){for(var n,r,o,i,a,u,s,c,l,f,d,m=0,g=(t=t||this._selectors).length;m<g;m++){for(d=e,f=0,n=(r=(o=t[m]).length)-1;0<=n;n--)for(u=o[n];d;){if(u.pseudo)for(s=c=(l=d.parent().items()).length;s--&&l[s]!==d;);for(i=0,a=u.length;i<a;i++)if(!u[i](d,s,c)){i=a+1;break}if(i===a){f++;break}if(n===r-1)break;d=d.parent()}if(f===r)return!0}return!1},find:function(e){var l,t,n,r;if(l=[],r=this._selectors,e.items){for(t=0,n=r.length;t<n;t++)!function e(t,n,r){for(var o,i,a,u=n[r],s=0,c=t.length;s<c;s++){for(a=t[s],o=0,i=u.length;o<i;o++)if(!u[o](a,s,c)){o=i+1;break}if(o===i)r===n.length-1?l.push(a):a.items&&e(a.items(),n,r+1);else if(u.direct)return;a.items&&e(a.items(),n,r)}}(e.items(),r[t],0);1<n&&(l=function(e){for(var t,n=[],r=e.length;r--;)(t=e[r]).__checked||(n.push(t),t.__checked=1);for(r=n.length;r--;)delete n[r].__checked;return n}(l))}return new(Et=Et||Rt.Collection)(l)}}),At=Array.prototype.push,Dt=Array.prototype.slice,_t={length:0,init:function(e){e&&this.add(e)},add:function(e){return f.isArray(e)?At.apply(this,e):e instanceof u?this.add(e.toArray()):At.call(this,e),this},set:function(e){var t,n=this.length;for(this.length=0,this.add(e),t=this.length;t<n;t++)delete this[t];return this},filter:function(t){for(var e,n=[],r="string"==typeof t?(t=new Rt(t),function(e){return t.match(e)}):t,o=0,i=this.length;o<i;o++)r(e=this[o])&&n.push(e);return new u(n)},slice:function(){return new u(Dt.apply(this,arguments))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},each:function(e){return f.each(this,e),this},toArray:function(){return f.toArray(this)},indexOf:function(e){for(var t=this.length;t--&&this[t]!==e;);return t},reverse:function(){return new u(f.toArray(this).reverse())},hasClass:function(e){return!!this[0]&&this[0].classes.contains(e)},prop:function(t,n){var e;return void 0!==n?(this.each(function(e){e[t]&&e[t](n)}),this):(e=this[0])&&e[t]?e[t]():void 0},exec:function(t){var n=f.toArray(arguments).slice(1);return this.each(function(e){e[t]&&e[t].apply(e,n)}),this},remove:function(){for(var e=this.length;e--;)this[e].remove();return this},addClass:function(t){return this.each(function(e){e.classes.add(t)})},removeClass:function(t){return this.each(function(e){e.classes.remove(t)})}},f.each("fire on off show hide append prepend before after reflow".split(" "),function(n){_t[n]=function(){var t=f.toArray(arguments);return this.each(function(e){n in e&&e[n].apply(e,t)}),this}}),f.each("text name disabled active selected checked visible parent value data".split(" "),function(t){_t[t]=function(e){return this.prop(t,e)}}),u=O.extend(_t),Rt.Collection=u,Pt=u,(Ot=function(e){this.create=e.create}).create=function(o,i){return new Ot({create:function(t,n){var r,e=function(e){t.set(n,e.value)};return t.on("change:"+n,function(e){o.set(i,e.value)}),o.on("change:"+i,e),(r=t._bindings)||(r=t._bindings=[],t.on("destroy",function(){for(var e=r.length;e--;)r[e]()})),r.push(function(){o.off("change:"+i,e)}),o.get(i)}})},B=tinymce.util.Tools.resolve("tinymce.util.Observable"),Bt=O.extend({Mixins:[B],init:function(e){var t,n;for(t in e=e||{})(n=e[t])instanceof Ot&&(e[t]=n.create(this,t));this.data=e},set:function(e,t){var n,r=this.data[e];if(t instanceof Ot&&(t=t.create(this,e)),"object"==typeof e)for(n in e)this.set(n,e[n]);else!function e(t,n){var r,o;if(t!==n){if(null===t||null===n)return t===n;if("object"!=typeof t||"object"!=typeof n)return t===n;if(f.isArray(n)){if(t.length!==n.length)return;for(r=t.length;r--;)if(!e(t[r],n[r]))return}if(Di(t)||Di(n))return t===n;for(r in o={},n){if(!e(t[r],n[r]))return;o[r]=!0}for(r in t)if(!o[r]&&!e(t[r],n[r]))return}return 1}(r,t)&&(this.data[e]=t,this.fire("change:"+e,t={target:this,name:e,value:t,oldValue:r}),this.fire("change",t));return this},get:function(e){return this.data[e]},has:function(e){return e in this.data},bind:function(e){return Ot.create(this,e)},destroy:function(){this.fire("destroy")}}),n={},It={add:function(e){e=e.parent();e&&e._layout&&!e._layout.isNative()&&(n[e._id]||(n[e._id]=e),!Mt)&&(Mt=!0,p.requestAnimationFrame(function(){var e,t;for(e in Mt=!1,n)(t=n[e]).state.get("rendered")&&t.reflow();n={}},y.document.body))},remove:function(e){n[e._id]&&delete n[e._id]}},Lt="onmousewheel"in y.document,Ft=!1,zt=0,Ut={Statics:{classPrefix:"mce-"},isRtl:function(){return Ht.rtl},classPrefix:"mce-",init:function(t){var n,e,r;function o(e){var t;for(e=e.split(" "),t=0;t<e.length;t++)n.classes.add(e[t])}(n=this).settings=t=f.extend({},n.Defaults,t),n._id=t.id||"mceu_"+zt++,n._aria={role:t.role},n._elmCache={},n.$=x,n.state=new Bt({visible:!0,active:!1,disabled:!1,value:""}),n.data=new Bt(t.data),n.classes=new Ai(function(){n.state.get("rendered")&&(n.getEl().className=this.toString())}),n.classes.prefix=n.classPrefix,(e=t.classes)&&(n.Defaults&&(r=n.Defaults.classes)&&e!==r&&o(r),o(e)),f.each("title text name visible disabled active value".split(" "),function(e){e in t&&n[e](t[e])}),n.on("click",function(){if(n.disabled())return!1}),n.settings=t,n.borderBox=Ct(t.border),n.paddingBox=Ct(t.padding),n.marginBox=Ct(t.margin),t.hidden&&n.hide()},Properties:"parent,name",getContainerElm:function(){var e=pe(this);return e||w.getContainer()},getParentCtrl:function(e){for(var t,n=this.getRoot().controlIdLookup;e&&n&&!(t=n[e.id]);)e=e.parentNode;return t},initLayoutRect:function(){var e,t,n,r,o,i,a,u,s,c=this,l=c.settings,f=c.getEl(),d=c.borderBox=c.borderBox||St(f,"border");return c.paddingBox=c.paddingBox||St(f,"padding"),c.marginBox=c.marginBox||St(f,"margin"),f=w.getSize(f),o=l.minWidth,i=l.minHeight,n=o||f.width,f=i||f.height,e=l.width,t=l.height,r=void 0!==(r=l.autoResize)?r:!e&&!t,a=d.left+d.right,d=d.top+d.bottom,u=l.maxWidth||65535,s=l.maxHeight||65535,c._layoutRect=l={x:l.x||0,y:l.y||0,w:e=e||n,h:t=t||f,deltaW:a,deltaH:d,contentW:e-a,contentH:t-d,innerW:e-a,innerH:t-d,startMinWidth:o||0,startMinHeight:i||0,minW:Math.min(n,u),minH:Math.min(f,s),maxW:u,maxH:s,autoResize:r,scrollW:0},c._lastLayoutRect={},l},layoutRect:function(e){var t,n,r,o=this._layoutRect;return o=o||this.initLayoutRect(),e?(t=o.deltaW,n=o.deltaH,void 0!==e.x&&(o.x=e.x),void 0!==e.y&&(o.y=e.y),void 0!==e.minW&&(o.minW=e.minW),void 0!==e.minH&&(o.minH=e.minH),void 0!==(r=e.w)&&(r=(r=r<o.minW?o.minW:r)>o.maxW?o.maxW:r,o.w=r,o.innerW=r-t),void 0!==(r=e.h)&&(r=(r=r<o.minH?o.minH:r)>o.maxH?o.maxH:r,o.h=r,o.innerH=r-n),void 0!==(r=e.innerW)&&(r=(r=r<o.minW-t?o.minW-t:r)>o.maxW-t?o.maxW-t:r,o.innerW=r,o.w=r+t),void 0!==(r=e.innerH)&&(r=(r=r<o.minH-n?o.minH-n:r)>o.maxH-n?o.maxH-n:r,o.innerH=r,o.h=r+n),void 0!==e.contentW&&(o.contentW=e.contentW),void 0!==e.contentH&&(o.contentH=e.contentH),(t=this._lastLayoutRect).x===o.x&&t.y===o.y&&t.w===o.w&&t.h===o.h||((r=Ht.repaintControls)&&r.map&&!r.map[this._id]&&(r.push(this),r.map[this._id]=!0),t.x=o.x,t.y=o.y,t.w=o.w,t.h=o.h),this):o},repaint:function(){var e,t,n,r=this,o=y.document.createRange?function(e){return e}:Math.round,i=r.getEl().style,a=r._layoutRect,u=r._lastRepaintRect||{},s=r.borderBox,c=s.left+s.right,s=s.top+s.bottom;a.x!==u.x&&(i.left=o(a.x)+"px",u.x=a.x),a.y!==u.y&&(i.top=o(a.y)+"px",u.y=a.y),a.w!==u.w&&(n=o(a.w-c),i.width=(0<=n?n:0)+"px",u.w=a.w),a.h!==u.h&&(n=o(a.h-s),i.height=(0<=n?n:0)+"px",u.h=a.h),r._hasBody&&a.innerW!==u.innerW&&(n=o(a.innerW),(t=r.getEl("body"))&&((e=t.style).width=(0<=n?n:0)+"px"),u.innerW=a.innerW),r._hasBody&&a.innerH!==u.innerH&&(n=o(a.innerH),(t=t||r.getEl("body"))&&((e=e||t.style).height=(0<=n?n:0)+"px"),u.innerH=a.innerH),r._lastRepaintRect=u,r.fire("repaint",{},!1)},updateLayoutRect:function(){this.parent()._lastRect=null,w.css(this.getEl(),{width:"",height:""}),this._layoutRect=this._lastRepaintRect=this._lastLayoutRect=null,this.initLayoutRect()},on:function(e,t){var n,r,o,i=this;return Pi(i).on(e,"string"!=typeof(n=t)?n:function(e){if(r||i.parentsAndSelf().each(function(e){var t=e.settings.callbacks;if(t&&(r=t[n]))return o=e,!1}),r)return r.call(o,e);e.action=n,this.fire("execute",e)}),i},off:function(e,t){return Pi(this).off(e,t),this},fire:function(e,t,n){var r;if((t=t||{}).control||(t.control=this),t=Pi(this).fire(e,t),!1!==n&&this.parent)for(r=this.parent();r&&!t.isPropagationStopped();)r.fire(e,t,!1),r=r.parent();return t},hasEventListeners:function(e){return Pi(this).has(e)},parents:function(e){for(var t=new Pt,n=this.parent();n;n=n.parent())t.add(n);return t=e?t.filter(e):t},parentsAndSelf:function(e){return new Pt(this).add(this.parents(e))},next:function(){var e=this.parent().items();return e[e.indexOf(this)+1]},prev:function(){var e=this.parent().items();return e[e.indexOf(this)-1]},innerHtml:function(e){return this.$el.html(e),this},getEl:function(e){e=e?this._id+"-"+e:this._id;return this._elmCache[e]||(this._elmCache[e]=x("#"+e)[0]),this._elmCache[e]},show:function(){return this.visible(!0)},hide:function(){return this.visible(!1)},focus:function(){try{this.getEl().focus()}catch(e){}return this},blur:function(){return this.getEl().blur(),this},aria:function(e,t){var n=this.getEl(this.ariaTarget);return void 0===t?this._aria[e]:(this._aria[e]=t,this.state.get("rendered")&&n.setAttribute("role"===e?e:"aria-"+e,t),this)},encode:function(e,t){return((e=!1!==t?this.translate(e):e)||"").replace(/[&<>"]/g,function(e){return"&#"+e.charCodeAt(0)+";"})},translate:function(e){return Ht.translate?Ht.translate(e):e},before:function(e){var t=this.parent();return t&&t.insert(e,t.items().indexOf(this),!0),this},after:function(e){var t=this.parent();return t&&t.insert(e,t.items().indexOf(this)),this},remove:function(){var t,e,n,r=this,o=r.getEl(),i=r.parent();if(r.items)for(e=(n=r.items().toArray()).length;e--;)n[e].remove();return i&&i.items&&(t=[],i.items().each(function(e){e!==r&&t.push(e)}),i.items().set(t),i._lastRect=null),r._eventsRoot&&r._eventsRoot===r&&x(o).off(),(i=r.getRoot().controlIdLookup)&&delete i[r._id],o&&o.parentNode&&o.parentNode.removeChild(o),r.state.set("rendered",!1),r.state.destroy(),r.fire("remove"),r},renderBefore:function(e){return x(e).before(this.renderHtml()),this.postRender(),this},renderTo:function(e){return x(e||this.getContainerElm()).append(this.renderHtml()),this.postRender(),this},preRender:function(){},render:function(){},renderHtml:function(){return'<div id="'+this._id+'" class="'+this.classes+'"></div>'},postRender:function(){var e,t,n,r,o,i=this,a=i.settings;for(t in i.$el=x(i.getEl()),i.state.set("rendered",!0),a)0===t.indexOf("on")&&i.on(t.substr(2),a[t]);if(i._eventsRoot){for(e=i.parent();!n&&e;e=e.parent())n=e._eventsRoot;if(n)for(t in n._nativeEvents)i._nativeEvents[t]=!0}for(o in Oi(i),a.style&&(r=i.getEl())&&(r.setAttribute("style",a.style),r.style.cssText=a.style),i.settings.border&&(r=i.borderBox,i.$el.css({"border-top-width":r.top,"border-right-width":r.right,"border-bottom-width":r.bottom,"border-left-width":r.left})),(r=i.getRoot()).controlIdLookup||(r.controlIdLookup={}),(r.controlIdLookup[i._id]=i)._aria)i.aria(o,i._aria[o]);!1===i.state.get("visible")&&(i.getEl().style.display="none"),i.bindStates(),i.state.on("change:visible",function(e){var t,e=e.value;i.state.get("rendered")&&(i.getEl().style.display=!1===e?"none":"",i.getEl().getBoundingClientRect()),(t=i.parent())&&(t._lastRect=null),i.fire(e?"show":"hide"),It.add(i)}),i.fire("postrender",{},!1)},bindStates:function(){},scrollIntoView:function(e){var t,n,r,o,i,a,u;return n=(u=function(e,t){for(var n,r=e,o=n=0;r&&r!==t&&r.nodeType;)o+=r.offsetLeft||0,n+=r.offsetTop||0,r=r.offsetParent;return{x:o,y:n}}(o=this.getEl(),t=o.parentNode)).x,u=u.y,r=o.offsetWidth,o=o.offsetHeight,i=t.clientWidth,a=t.clientHeight,"end"===e?(n-=i-r,u-=a-o):"center"===e&&(n-=i/2-r/2,u-=a/2-o/2),t.scrollLeft=n,t.scrollTop=u,this},getRoot:function(){for(var e,t,n=this,r=[];n;){if(n.rootControl){e=n.rootControl;break}r.push(n),n=(e=n).parent()}for(e=e||this,t=r.length;t--;)r[t].rootControl=e;return e},reflow:function(){It.remove(this);var e=this.parent();return e&&e._layout&&!e._layout.isNative()&&e.reflow(),this}},f.each("text title visible disabled active value".split(" "),function(t){Ut[t]=function(e){return 0===arguments.length?this.state.get(t):(void 0!==e&&this.state.set(t,e),this)}}),Ht=O.extend(Ut),Wt=function(e){return!!e.getAttribute("data-mce-tabstop")},jt={},e=(l=Ht).extend({init:function(e){var t=this;t._super(e),(e=t.settings).fixed&&t.state.set("fixed",!0),t._items=new Pt,t.isRtl()&&t.classes.add("rtl"),t.bodyClasses=new Ai(function(){t.state.get("rendered")&&(t.getEl("body").className=this.toString())}),t.bodyClasses.prefix=t.classPrefix,t.classes.add("container"),t.bodyClasses.add("container-body"),e.containerCls&&t.classes.add(e.containerCls),t._layout=m.create((e.layout||"")+"layout"),t.settings.items?t.add(t.settings.items):t.add(t.render()),t._hasBody=!0},items:function(){return this._items},find:function(e){return(e=jt[e]=jt[e]||new Rt(e)).find(this)},add:function(e){return this.items().add(this.create(e)).parent(this),this},focus:function(e){var t,n;if(!e||!(n=this.keyboardNav||this.parents().eq(-1)[0].keyboardNav))return e=this.find("*"),this.statusbar&&e.add(this.statusbar.items()),e.each(function(e){if(e.settings.autofocus)return t=null,!1;e.canFocus&&(t=t||e)}),t&&t.focus(),this;n.focusFirst(this)},replace:function(e,t){for(var n,r=this.items(),o=r.length;o--;)if(r[o]===e){r[o]=t;break}0<=o&&((n=t.getEl())&&n.parentNode.removeChild(n),n=e.getEl())&&n.parentNode.removeChild(n),t.parent(this)},create:function(e){var t,n=this,r=[];return f.isArray(e)||(e=[e]),f.each(e,function(e){e&&(e instanceof l||(t=f.extend({},n.settings.defaults,e="string"==typeof e?{type:e}:e),e.type=t.type=t.type||e.type||n.settings.defaultType||(t.defaults?t.defaults.type:null),e=m.create(t)),r.push(e))}),r},renderNew:function(){var r=this;return r.items().each(function(e,t){var n;e.parent(r),e.state.get("rendered")||((n=r.getEl("body")).hasChildNodes()&&t<=n.childNodes.length-1?x(n.childNodes[t]).before(e.renderHtml()):x(n).append(e.renderHtml()),e.postRender(),It.add(e))}),r._layout.applyClasses(r.items().filter(":visible")),r._lastRect=null,r},append:function(e){return this.add(e).renderNew()},prepend:function(e){return this.items().set(this.create(e).concat(this.items().toArray())),this.renderNew()},insert:function(e,t,n){var r;return e=this.create(e),r=this.items(),!n&&t<r.length-1&&(t+=1),0<=t&&t<r.length&&(n=r.slice(0,t).toArray(),t=r.slice(t).toArray(),r.set(n.concat(e,t))),this.renderNew()},fromJSON:function(e){for(var t in e)this.find("#"+t).value(e[t]);return this},toJSON:function(){var n={};return this.find("*").each(function(e){var t=e.name(),e=e.value();t&&void 0!==e&&(n[t]=e)}),n},renderHtml:function(){var e=this._layout,t=this.settings.role;return this.preRender(),e.preRender(this),'<div id="'+this._id+'" class="'+this.classes+'"'+(t?' role="'+this.settings.role+'"':"")+'><div id="'+this._id+'-body" class="'+this.bodyClasses+'">'+(this.settings.html||"")+e.renderHtml(this)+"</div></div>"},postRender:function(){var e,t=this;return t.items().exec("postRender"),t._super(),t._layout.postRender(t),t.state.set("rendered",!0),t.settings.style&&t.$el.css(t.settings.style),t.settings.border&&(e=t.borderBox,t.$el.css({"border-top-width":e.top,"border-right-width":e.right,"border-bottom-width":e.bottom,"border-left-width":e.left})),t.parent()||(t.keyboardNav=Bi({root:t})),t},initLayoutRect:function(){var e=this._super();return this._layout.recalc(this),e},recalc:function(){var e=this._layoutRect,t=this._lastRect;if(!t||t.w!==e.w||t.h!==e.h)return this._layout.recalc(this),e=this.layoutRect(),this._lastRect={x:e.x,y:e.y,w:e.w,h:e.h},!0},reflow:function(){var e;if(It.remove(this),this.visible()){for(l.repaintControls=[],l.repaintControls.map={},this.recalc(),e=l.repaintControls.length;e--;)l.repaintControls[e].repaint();"flow"!==this.settings.layout&&"stack"!==this.settings.layout&&this.repaint(),l.repaintControls=[]}return this}}),Vt={init:function(){this.on("repaint",this.renderScroll)},renderScroll:function(){var f=this;function n(){var c,l,e;function t(e,t,n,r,o,i){var a,u,s=f.getEl("scroll"+e);s&&(a=t.toLowerCase(),u=n.toLowerCase(),x(f.getEl("absend")).css(a,f.layoutRect()[r]-1),o?(x(s).css("display","block"),r=f.getEl("body"),o=f.getEl("scroll"+e+"t"),e=r["client"+n]-4,i=(e-=c&&l?s["client"+i]:0)/r["scroll"+n],(n={})[a]=r["offset"+t]+2,n[u]=e,x(s).css(n),(n={})[a]=r["scroll"+t]*i,n[u]=e*i,x(o).css(n)):x(s).css("display","none"))}e=f.getEl("body"),c=e.scrollWidth>e.clientWidth,l=e.scrollHeight>e.clientHeight,t("h","Left","Width","contentW",c,"Height"),t("v","Top","Height","contentH",l,"Width")}function e(o,i,a,u,s){var c,e=f._id+"-scroll"+o,t=f.classPrefix;x(f.getEl()).append('<div id="'+e+'" class="'+t+"scrollbar "+t+"scrollbar-"+o+'"><div id="'+e+'t" class="'+t+'scrollbar-thumb"></div></div>'),f.draghelper=new M(e+"t",{start:function(){c=f.getEl("body")["scroll"+i],x("#"+e).addClass(t+"active")},drag:function(e){var t=f.layoutRect(),n=t.contentW>t.innerW,t=t.contentH>t.innerH,r=f.getEl("body")["client"+a]-4,n=(r-=n&&t?f.getEl("scroll"+o)["client"+s]:0)/f.getEl("body")["scroll"+a];f.getEl("body")["scroll"+i]=c+e["delta"+u]/n},stop:function(){x("#"+e).removeClass(t+"active")}})}f.settings.autoScroll&&(f._hasScroll||(f._hasScroll=!0,f.classes.add("scroll"),e("v","Top","Height","Y","Width"),e("h","Left","Width","X","Height"),f.on("wheel",function(e){var t=f.getEl("body");t.scrollLeft+=10*(e.deltaX||0),t.scrollTop+=10*e.deltaY,n()}),x(f.getEl("body")).on("scroll",n)),n())}},qt=e.extend({Defaults:{layout:"fit",containerCls:"panel"},Mixins:[Vt],renderHtml:function(){var e=this,t=e._layout,n=e.settings.html;return e.preRender(),t.preRender(e),void 0===n?n='<div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+t.renderHtml(e)+"</div>":("function"==typeof n&&(n=n.call(e)),e._hasBody=!1),'<div id="'+e._id+'" class="'+e.classes+'" hidefocus="1" tabindex="-1" role="group">'+(e._preBodyHtml||"")+n+"</div>"}}),$t={resizeToContent:function(){this._layoutRect.autoResize=!0,this._lastRect=null,this.reflow()},resizeTo:function(e,t){var n;return(e<=1||t<=1)&&(n=w.getWindowSize(),e=e<=1?e*n.w:e,t=t<=1?t*n.h:t),this._layoutRect.autoResize=!1,this.layoutRect({minW:e,minH:t,w:e,h:t}).reflow()},resizeBy:function(e,t){var n=this.layoutRect();return this.resizeTo(n.w+e,n.h+t)}},C=[],S=[],(k=qt.extend({Mixins:[xt,$t],init:function(e){var t,n,r,o=this;o._super(e),(o._eventsRoot=o).classes.add("floatpanel"),e.autohide&&(Yt||(Yt=function(e){2!==e.button&&Ii(e)},x(y.document).on("click touchstart",Yt)),Kt||(t=y.document.documentElement,n=t.clientWidth,r=t.clientHeight,Kt=function(){y.document.all&&n===t.clientWidth&&r===t.clientHeight||(n=t.clientWidth,r=t.clientHeight,k.hideAll())},x(y.window).on("resize",Kt)),C.push(o)),e.autofix&&(Xt||(Xt=function(){for(var e=C.length;e--;)Li(C[e])},x(y.window).on("scroll",Xt)),o.on("move",function(){Li(this)})),o.on("postrender show",function(e){var t,n;e.control===o&&(n=o.classPrefix,o.modal&&!Gt&&((t=x("#"+n+"modal-block",o.getContainerElm()))[0]||(t=x('<div id="'+n+'modal-block" class="'+n+"reset "+n+'fade"></div>').appendTo(o.getContainerElm())),p.setTimeout(function(){t.addClass(n+"in"),x(o.getEl()).addClass(n+"in")}),Gt=!0),Fi(!0,o))}),o.on("show",function(){o.parents().each(function(e){if(e.state.get("fixed"))return o.fixed(!0),!1})}),e.popover&&(o._preBodyHtml='<div class="'+o.classPrefix+'arrow"></div>',o.classes.add("popover").add("bottom").add(o.isRtl()?"end":"start")),o.aria("label",e.ariaLabel),o.aria("labelledby",o._id),o.aria("describedby",o.describedBy||o._id+"-none")},fixed:function(e){var t;return this.state.get("fixed")!==e&&(this.state.get("rendered")&&(t=w.getViewPort(),e?this.layoutRect().y-=t.y:this.layoutRect().y+=t.y),this.classes.toggle("fixed",e),this.state.set("fixed",e)),this},show:function(){for(var e=this._super(),t=C.length;t--&&C[t]!==this;);return-1===t&&C.push(this),e},hide:function(){return Hi(this),Fi(!1,this),this._super()},hideAll:function(){k.hideAll()},close:function(){return this.fire("close").isDefaultPrevented()||(this.remove(),Fi(!1,this)),this},remove:function(){Hi(this),this._super()},postRender:function(){return this.settings.bodyRole&&this.getEl("body").setAttribute("role",this.settings.bodyRole),this._super()}})).hideAll=function(){for(var e,t=C.length;t--;)(e=C[t])&&e.settings.autohide&&(e.hide(),C.splice(t,1))},Jt=function(){try{return window.self!==window.top}catch(e){return!0}},Zt=function(e,t){return!(!e||t.settings.ui_container)},Qt=function(i,e,t){var a,n,r,o,u,s,c=d.DOM,l=j(i);return l&&(n=c.select(l)[0]),r=function(){var e,t,n,r,o;a&&a.moveRel&&a.visible()&&!a._fixed&&(o=i.selection.getScrollContainer(),e=i.getBody(),n=t=0,o&&(r=c.getPos(e),o=c.getPos(o),t=Math.max(0,o.x-r.x),n=Math.max(0,o.y-r.y)),a.fixed(!1).moveRel(e,i.rtl?["tr-br","br-tr"]:["tl-bl","bl-tl","tr-br"]).moveBy(t,n))},o=function(){a&&(a.show(),r(),c.addClass(i.getBody(),"mce-edit-focus"))},u=function(){a&&(a.hide(),k.hideAll(),c.removeClass(i.getBody(),"mce-edit-focus"))},s=function(){a?a.visible()||o():(a=e.panel=m.create({type:n?"panel":"floatpanel",role:"application",classes:"tinymce tinymce-inline",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:!0,fixed:Zt(n,i),border:1,items:[!1===F(i)?null:{type:"menubar",border:"0 0 1 0",items:Xe(i)},xe(i,U(i))]}),he(i,a),g.fireBeforeRenderUI(i),(n?a.renderTo(n):a.renderTo()).reflow(),ie(i,a),o(),Ne(i),i.on("nodeChange",r),i.on("ResizeWindow",r),i.on("activate",o),i.on("deactivate",u),i.nodeChanged())},i.settings.content_editable=!0,i.on("focus",function(){!1===J(i)&&t.skinUiCss?c.styleSheetLoader.load(t.skinUiCss,s,s):s()}),i.on("blur hide",u),i.on("remove",function(){a&&(a.remove(),a=null)}),!1===J(i)&&t.skinUiCss?c.styleSheetLoader.load(t.skinUiCss,st(i)):st(i)(),{}},en=function(e,t){var n;e.on("ProgressState",function(e){n=n||new zi(t.panel.getEl("body")),e.state?n.show(e.time):n.hide()})},tn=function(e,t,n){var r=ee(e);return r&&(n.skinUiCss=r+"/skin.min.css",e.contentCSS.push(r+"/content"+(e.inline?".inline":"")+".min.css")),en(e,t),(Z(e)?Qt:mt)(e,t,n)},nn=l.extend({Mixins:[xt],Defaults:{classes:"widget tooltip tooltip-n"},renderHtml:function(){var e=this.classPrefix;return'<div id="'+this._id+'" class="'+this.classes+'" role="presentation"><div class="'+e+'tooltip-arrow"></div><div class="'+e+'tooltip-inner">'+this.encode(this.state.get("text"))+"</div></div>"},bindStates:function(){var t=this;return t.state.on("change:text",function(e){t.getEl().lastChild.innerHTML=t.encode(e.value)}),t._super()},repaint:function(){var e=this.getEl().style,t=this._layoutRect;e.left=t.x+"px",e.top=t.y+"px",e.zIndex=131070}}),t=l.extend({init:function(n){var r=this;r._super(n),n=r.settings,r.canFocus=!0,n.tooltip&&!1!==t.tooltips&&(r.on("mouseenter",function(e){var t=r.tooltip().moveTo(-65535);e.control===r?(e=t.text(n.tooltip).show().testMoveRel(r.getEl(),["bc-tc","bc-tl","bc-tr"]),t.classes.toggle("tooltip-n","bc-tc"===e),t.classes.toggle("tooltip-nw","bc-tl"===e),t.classes.toggle("tooltip-ne","bc-tr"===e),t.moveRel(r.getEl(),e)):t.hide()}),r.on("mouseleave mousedown click",function(){r.tooltip().remove(),r._tooltip=null})),r.aria("label",n.ariaLabel||n.tooltip)},tooltip:function(){return this._tooltip||(this._tooltip=new nn({type:"tooltip"}),ve(this,this._tooltip),this._tooltip.renderTo()),this._tooltip},postRender:function(){var e=this.settings;this._super(),this.parent()||!e.width&&!e.height||(this.initLayoutRect(),this.repaint()),e.autofocus&&this.focus()},bindStates:function(){var t=this;function n(e){t.aria("disabled",e),t.classes.toggle("disabled",e)}function r(e){t.aria("pressed",e),t.classes.toggle("active",e)}return t.state.on("change:disabled",function(e){n(e.value)}),t.state.on("change:active",function(e){r(e.value)}),t.state.get("disabled")&&n(!0),t.state.get("active")&&r(!0),t._super()},remove:function(){this._super(),this._tooltip&&(this._tooltip.remove(),this._tooltip=null)}}),rn=t.extend({Defaults:{value:0},init:function(e){this._super(e),this.classes.add("progress"),this.settings.filter||(this.settings.filter=function(e){return Math.round(e)})},renderHtml:function(){var e=this._id,t=this.classPrefix;return'<div id="'+e+'" class="'+this.classes+'"><div class="'+t+'bar-container"><div class="'+t+'bar"></div></div><div class="'+t+'text">0%</div></div>'},postRender:function(){return this._super(),this.value(this.settings.value),this},bindStates:function(){var t=this;function n(e){e=t.settings.filter(e),t.getEl().lastChild.innerHTML=e+"%",t.getEl().firstChild.firstChild.style.width=e+"%"}return t.state.on("change:value",function(e){n(e.value)}),n(t.state.get("value")),t._super()}}),on=function(e,t){e.getEl().lastChild.textContent=t+(e.progressBar?" "+e.progressBar.value()+"%":"")},an=l.extend({Mixins:[xt],Defaults:{classes:"widget notification"},init:function(e){var t=this;t._super(e),t.maxWidth=e.maxWidth,e.text&&t.text(e.text),e.icon&&(t.icon=e.icon),e.color&&(t.color=e.color),e.type&&t.classes.add("notification-"+e.type),e.timeout&&(e.timeout<0||0<e.timeout)&&!e.closeButton?t.closeButton=!1:(t.classes.add("has-close"),t.closeButton=!0),e.progressBar&&(t.progressBar=new rn),t.on("click",function(e){-1!==e.target.className.indexOf(t.classPrefix+"close")&&t.close()})},renderHtml:function(){var e,t=this,n=t.classPrefix,r="",o="",i="";return t.icon&&(r='<i class="'+n+"ico "+n+"i-"+t.icon+'"></i>'),e=' style="max-width: '+t.maxWidth+"px;"+(t.color?"background-color: "+t.color+';"':'"'),t.closeButton&&(o='<button type="button" class="'+n+'close" aria-hidden="true"></button>'),t.progressBar&&(i=t.progressBar.renderHtml()),'<div id="'+t._id+'" class="'+t.classes+'"'+e+' role="presentation">'+r+'<div class="'+n+'notification-inner">'+t.state.get("text")+"</div>"+i+o+'<div style="clip: rect(1px, 1px, 1px, 1px);height: 1px;overflow: hidden;position: absolute;width: 1px;" aria-live="assertive" aria-relevant="additions" aria-atomic="true"></div></div>'},postRender:function(){var e=this;return p.setTimeout(function(){e.$el.addClass(e.classPrefix+"in"),on(e,e.state.get("text"))},100),e._super()},bindStates:function(){var t=this;return t.state.on("change:text",function(e){t.getEl().firstChild.innerHTML=e.value,on(t,e.value)}),t.progressBar&&(t.progressBar.bindStates(),t.progressBar.state.on("change:value",function(e){on(t,t.state.get("text"))})),t._super()},close:function(){return this.fire("close").isDefaultPrevented()||this.remove(),this},repaint:function(){var e=this.getEl().style,t=this._layoutRect;e.left=t.x+"px",e.top=t.y+"px",e.zIndex=65534}}),T=[],un="",sn=k.extend({modal:!0,Defaults:{border:1,layout:"flex",containerCls:"panel",role:"dialog",callbacks:{submit:function(){this.fire("submit",{data:this.toJSON()})},close:function(){this.close()}}},init:function(e){var n=this;n._super(e),n.isRtl()&&n.classes.add("rtl"),n.classes.add("window"),Jt()&&n.classes.add("iniframe"),n.bodyClasses.add("window-body"),n.state.set("fixed",!0),e.buttons&&(n.statusbar=new qt({layout:"flex",border:"1 0 0 0",spacing:3,padding:10,align:"center",pack:n.isRtl()?"start":"end",defaults:{type:"button"},items:e.buttons}),n.statusbar.classes.add("foot"),n.statusbar.parent(n)),n.on("click",function(e){var t=n.classPrefix+"close";(w.hasClass(e.target,t)||w.hasClass(e.target.parentNode,t))&&n.close()}),n.on("cancel",function(){n.close()}),n.on("move",function(e){e.control===n&&k.hideAll()}),n.aria("describedby",n.describedBy||n._id+"-none"),n.aria("label",e.title),n._fullscreen=!1},recalc:function(){var e,t,n,r,o=this,i=o.statusbar;o._fullscreen&&(o.layoutRect(w.getWindowSize()),o.layoutRect().contentH=o.layoutRect().innerH),o._super(),e=o.layoutRect(),o.settings.title&&!o._fullscreen&&(t=e.headerW)>e.w&&(n=e.x-Math.max(0,t/2),o.layoutRect({w:t,x:n}),r=!0),i&&(i.layoutRect({w:o.layoutRect().innerW}).recalc(),(t=i.layoutRect().minW+e.deltaW)>e.w)&&(n=e.x-Math.max(0,t-e.w),o.layoutRect({w:t,x:n}),r=!0),r&&o.recalc()},initLayoutRect:function(){var e,t=this._super(),n=0;return this.settings.title&&!this._fullscreen&&(e=this.getEl("head"),e=w.getSize(e),t.headerW=e.width,t.headerH=e.height,n+=t.headerH),this.statusbar&&(n+=this.statusbar.layoutRect().h),t.deltaH+=n,t.minH+=n,t.h+=n,e=w.getWindowSize(),t.x=this.settings.x||Math.max(0,e.w/2-t.w/2),t.y=this.settings.y||Math.max(0,e.h/2-t.h/2),Jt()&&(t.y=o.activeEditor.editorContainer.getBoundingClientRect().y),t},renderHtml:function(){var e=this,t=e._layout,n=e._id,r=e.classPrefix,o=e.settings,i="",a="",u=o.html;return e.preRender(),t.preRender(e),o.title&&(i='<div id="'+n+'-head" class="'+r+'window-head"><div id="'+n+'-title" class="'+r+'title">'+e.encode(o.title)+'</div><div id="'+n+'-dragh" class="'+r+'dragh"></div><button type="button" class="'+r+'close" aria-hidden="true"><i class="mce-ico mce-i-remove"></i></button></div>'),void 0===(u=o.url?'<iframe src="'+o.url+'" tabindex="-1"></iframe>':u)&&(u=t.renderHtml(e)),e.statusbar&&(a=e.statusbar.renderHtml()),'<div id="'+n+'" class="'+e.classes+'" hidefocus="1"><div class="'+e.classPrefix+'reset" role="application">'+i+'<div id="'+n+'-body" class="'+e.bodyClasses+'">'+u+"</div>"+a+"</div></div>"},fullscreen:function(e){var n,t,r=this,o=y.document.documentElement,i=r.classPrefix;return e!==r._fullscreen&&(x(y.window).on("resize",function(){var e,t;r._fullscreen&&(n?r._timer||(r._timer=p.setTimeout(function(){var e=w.getWindowSize();r.moveTo(0,0).resizeTo(e.w,e.h),r._timer=0},50)):(e=(new Date).getTime(),t=w.getWindowSize(),r.moveTo(0,0).resizeTo(t.w,t.h),50<(new Date).getTime()-e&&(n=!0)))}),t=r.layoutRect(),(r._fullscreen=e)?(r._initial={x:t.x,y:t.y,w:t.w,h:t.h},r.borderBox=Ct("0"),r.getEl("head").style.display="none",t.deltaH-=t.headerH+2,x([o,y.document.body]).addClass(i+"fullscreen"),r.classes.add("fullscreen"),e=w.getWindowSize(),r.moveTo(0,0).resizeTo(e.w,e.h)):(r.borderBox=Ct(r.settings.border),r.getEl("head").style.display="",t.deltaH+=t.headerH,x([o,y.document.body]).removeClass(i+"fullscreen"),r.classes.remove("fullscreen"),r.moveTo(r._initial.x,r._initial.y).resizeTo(r._initial.w,r._initial.h))),r.reflow()},postRender:function(){var t,n=this;setTimeout(function(){n.classes.add("in"),n.fire("open")},0),n._super(),n.statusbar&&n.statusbar.postRender(),n.focus(),this.dragHelper=new M(n._id+"-dragh",{start:function(){t={x:n.layoutRect().x,y:n.layoutRect().y}},drag:function(e){n.moveTo(t.x+e.deltaX,t.y+e.deltaY)}}),n.on("submit",function(e){e.isDefaultPrevented()||n.close()}),T.push(n),Ui(!0)},submit:function(){return this.fire("submit",{data:this.toJSON()})},remove:function(){var e;for(this.dragHelper.destroy(),this._super(),this.statusbar&&this.statusbar.remove(),Wi(this.classPrefix,!1),e=T.length;e--;)T[e]===this&&T.splice(e,1);Ui(0<T.length)},getContentWindow:function(){var e=this.getEl().getElementsByTagName("iframe")[0];return e?e.contentWindow:null}}),b.desktop||(Ei={w:y.window.innerWidth,h:y.window.innerHeight},p.setInterval(function(){var e=y.window.innerWidth,t=y.window.innerHeight;Ei.w===e&&Ei.h===t||(Ei={w:e,h:t},x(y.window).trigger("resize"))},100)),x(y.window).on("resize",function(){for(var e,t,n=w.getWindowSize(),r=0;r<T.length;r++)e=T[r].layoutRect(),t=Jt()?o.activeEditor.editorContainer.getBoundingClientRect().y:Math.max(0,n.h/2-e.h/2),T[r].moveTo(T[r].settings.x||Math.max(0,n.w/2-e.w/2),T[r].settings.y||t)}),N=sn.extend({init:function(e){this._super({border:1,padding:20,layout:"flex",pack:"center",align:"center",containerCls:"panel",autoScroll:!0,buttons:{type:"button",text:"Ok",action:"ok"},items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200}})},Statics:{OK:1,OK_CANCEL:2,YES_NO:3,YES_NO_CANCEL:4,msgBox:function(e){var t,r;function n(e,t,n){return{type:"button",text:e,subtype:n?"primary":"",onClick:function(e){e.control.parents()[1].close(),r(t)}}}switch(r=e.callback||function(){},e.buttons){case N.OK_CANCEL:t=[n("Ok",!0,!0),n("Cancel",!1)];break;case N.YES_NO:case N.YES_NO_CANCEL:t=[n("Yes",1,!0),n("No",0)],e.buttons===N.YES_NO_CANCEL&&t.push(n("Cancel",-1));break;default:t=[n("Ok",!0,!0)]}return new sn({padding:20,x:e.x,y:e.y,minWidth:300,minHeight:100,layout:"flex",pack:"center",align:"center",buttons:t,title:e.title,role:"alertdialog",items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200,text:e.text},onPostRender:function(){this.aria("describedby",this.items()[0]._id)},onClose:e.onClose,onCancel:function(){r(!1)}}).renderTo(y.document.body).reflow()},alert:function(e,t){return(e="string"==typeof e?{text:e}:e).callback=t,N.msgBox(e)},confirm:function(e,t){return(e="string"==typeof e?{text:e}:e).callback=t,e.buttons=N.OK_CANCEL,N.msgBox(e)}}}),cn=function(a){return{renderUI:function(e){return tn(a,this,e)},resizeTo:function(e,t){return Ze(a,e,t)},resizeBy:function(e,t){return Qe(a,e,t)},getNotificationManagerImpl:function(){return r=a,o=function(e){return e.inline?e.getElement():e.getContentAreaContainer()},i=function(){var e=o(r);return w.getSize(e).width},t=function(e){Oe(e,function(e){e.moveTo(0,0)})},n=function(n){var e,t;0<n.length&&(e=n.slice(0,1)[0],t=o(r),e.moveRel(t,"tc-tc"),Oe(n,function(e,t){0<t&&e.moveRel(n[t-1].getEl(),"bc-tc")}))},{open:function(e,t){var e=f.extend(e,{maxWidth:i()}),n=new an(e);return 0<(n.args=e).timeout&&(n.timer=setTimeout(function(){n.close(),t()},e.timeout)),n.on("close",function(){t()}),n.renderTo(),n},close:function(e){e.close()},reposition:function(e){t(e),n(e)},getArgs:function(e){return e.args}};var r,o,i,t,n},getWindowManagerImpl:function(){return{open:function(n,e,t){var r;return n.title=n.title||" ",n.url=n.url||n.file,n.url&&(n.width=parseInt(n.width||320,10),n.height=parseInt(n.height||240,10)),n.body&&(n.items={defaults:n.defaults,type:n.bodyType||"form",items:n.body,data:n.data,callbacks:n.commands}),n.url||n.buttons||(n.buttons=[{text:"Ok",subtype:"primary",onclick:function(){r.find("form")[0].submit()}},{text:"Cancel",onclick:function(){r.close()}}]),(r=new sn(n)).on("close",function(){t(r)}),n.data&&r.on("postRender",function(){this.find("*").each(function(e){var t=e.name();t in n.data&&e.value(n.data[t])})}),r.features=n||{},r.params=e||{},r=r.renderTo(y.document.body).reflow()},alert:function(e,t,n){var r=N.alert(e,function(){t()});return r.on("close",function(){n(r)}),r},confirm:function(e,t,n){var r=N.confirm(e,function(e){t(e)});return r.on("close",function(){n(r)}),r},close:function(e){e.close()},getParams:function(e){return e.params},setParams:function(e,t){e.params=t}}}}},ln=O.extend({Defaults:{firstControlClass:"first",lastControlClass:"last"},init:function(e){this.settings=f.extend({},this.Defaults,e)},preRender:function(e){e.bodyClasses.add(this.settings.containerClass)},applyClasses:function(e){var t,n,r=this.settings,o=r.firstControlClass,i=r.lastControlClass;e.each(function(e){e.classes.remove(o).remove(i).add(r.controlClass),e.visible()&&(t=t||e,n=e)}),t&&t.classes.add(o),n&&n.classes.add(i)},renderHtml:function(e){var t="";return this.applyClasses(e.items()),e.items().each(function(e){t+=e.renderHtml()}),t},recalc:function(){},postRender:function(){},isNative:function(){return!1}}),fn=ln.extend({Defaults:{containerClass:"abs-layout",controlClass:"abs-layout-item"},recalc:function(e){e.items().filter(":visible").each(function(e){var t=e.settings;e.layoutRect({x:t.x,y:t.y,w:t.w,h:t.h}),e.recalc&&e.recalc()})},renderHtml:function(e){return'<div id="'+e._id+'-absend" class="'+e.classPrefix+'abs-end"></div>'+this._super(e)}}),dn=t.extend({Defaults:{classes:"widget btn",role:"button"},init:function(e){var t,n=this;n._super(e),e=n.settings,t=n.settings.size,n.on("click mousedown",function(e){e.preventDefault()}),n.on("touchstart",function(e){e.control===n&&(n.fire("click",e),e.preventDefault())}),e.subtype&&n.classes.add(e.subtype),t&&n.classes.add("btn-"+t),e.icon&&n.icon(e.icon)},icon:function(e){return arguments.length?(this.state.set("icon",e),this):this.state.get("icon")},repaint:function(){var e=this.getEl().firstChild;e&&((e=e.style).width=e.height="100%"),this._super()},renderHtml:function(){var e=this._id,t=this.classPrefix,n=this.state.get("icon"),r=this.state.get("text"),o="",i=this.settings,a=i.image;return a=a?(n="none"," style=\"background-image: url('"+(a="string"!=typeof a?y.window.getSelection?a[0]:a[1]:a)+"')\""):"",r&&(this.classes.add("btn-has-text"),o='<span class="'+t+'txt">'+this.encode(r)+"</span>"),r="boolean"==typeof i.active?' aria-pressed="'+i.active+'"':"",'<div id="'+e+'" class="'+this.classes+'" tabindex="-1"'+r+'><button id="'+e+'-button" role="presentation" type="button" tabindex="-1">'+((n=n?t+"ico "+t+"i-"+n:"")?'<i class="'+n+'"'+a+"></i>":"")+o+"</button></div>"},bindStates:function(){var r=this,n=r.$,o=r.classPrefix+"txt";function i(e){var t=n("span."+o,r.getEl());e?(t[0]||(n("button:first",r.getEl()).append('<span class="'+o+'"></span>'),t=n("span."+o,r.getEl())),t.html(r.encode(e))):t.remove(),r.classes.toggle("btn-has-text",!!e)}return r.state.on("change:text",function(e){i(e.value)}),r.state.on("change:icon",function(e){var t,e=e.value,n=r.classPrefix;e=(r.settings.icon=e)?n+"ico "+n+"i-"+r.settings.icon:"",t=(n=r.getEl().firstChild).getElementsByTagName("i")[0],e?(t&&t===n.firstChild||(t=y.document.createElement("i"),n.insertBefore(t,n.firstChild)),t.className=e):t&&n.removeChild(t),i(r.state.get("text"))}),r._super()}}),mn=dn.extend({init:function(e){e=f.extend({text:"Browse...",multiple:!1,accept:null},e),this._super(e),this.classes.add("browsebutton"),e.multiple&&this.classes.add("multiple")},postRender:function(){var n=this,t=w.create("input",{type:"file",id:n._id+"-browse",accept:n.settings.accept});n._super(),x(t).on("change",function(e){var t=e.target.files;n.value=function(){return t.length?n.settings.multiple?t:t[0]:null},e.preventDefault(),t.length&&n.fire("change",e)}),x(t).on("click touchstart",function(e){e.stopPropagation()}),x(n.getEl("button")).on("click touchstart",function(e){e.stopPropagation(),"touchstart"==e.type&&e.preventDefault(),t.click()}),n.getEl().appendChild(t)},remove:function(){x(this.getEl("button")).off(),x(this.getEl("input")).off(),this._super()}}),gn=e.extend({Defaults:{defaultType:"button",role:"group"},renderHtml:function(){var e=this._layout;return this.classes.add("btn-group"),this.preRender(),e.preRender(this),'<div id="'+this._id+'" class="'+this.classes+'"><div id="'+this._id+'-body">'+(this.settings.html||"")+e.renderHtml(this)+"</div></div>"}}),hn=t.extend({Defaults:{classes:"checkbox",role:"checkbox",checked:!1},init:function(e){var t=this;t._super(e),t.on("click mousedown",function(e){e.preventDefault()}),t.on("click",function(e){e.preventDefault(),t.disabled()||t.checked(!t.checked())}),t.checked(t.settings.checked)},checked:function(e){return arguments.length?(this.state.set("checked",e),this):this.state.get("checked")},value:function(e){return arguments.length?this.checked(e):this.checked()},renderHtml:function(){var e=this._id,t=this.classPrefix;return'<div id="'+e+'" class="'+this.classes+'" unselectable="on" aria-labelledby="'+e+'-al" tabindex="-1"><i class="'+t+"ico "+t+'i-checkbox"></i><span id="'+e+'-al" class="'+t+'label">'+this.encode(this.state.get("text"))+"</span></div>"},bindStates:function(){var r=this;function t(e){r.classes.toggle("checked",e),r.aria("checked",e)}return r.state.on("change:text",function(e){r.getEl("al").firstChild.data=r.translate(e.value)}),r.state.on("change:checked change:value",function(e){r.fire("change"),t(e.value)}),r.state.on("change:icon",function(e){var t,e=e.value,n=r.classPrefix;if(void 0===e)return r.settings.icon;e=(r.settings.icon=e)?n+"ico "+n+"i-"+r.settings.icon:"",t=(n=r.getEl().firstChild).getElementsByTagName("i")[0],e?(t&&t===n.firstChild||(t=y.document.createElement("i"),n.insertBefore(t,n.firstChild)),t.className=e):t&&n.removeChild(t)}),r.state.get("checked")&&t(!0),r._super()}}),pn=tinymce.util.Tools.resolve("tinymce.util.VK"),vn=t.extend({init:function(r){var o=this;o._super(r),r=o.settings,o.classes.add("combobox"),o.subinput=!0,o.ariaTarget="inp",r.menu=r.menu||r.values,r.menu&&(r.icon="caret"),o.on("click",function(e){var t=e.target,n=o.getEl();if(x.contains(n,t)||t===n)for(;t&&t!==n;)t.id&&-1!==t.id.indexOf("-open")&&(o.fire("action"),r.menu)&&(o.showMenu(),e.aria)&&o.menu.items()[0].focus(),t=t.parentNode}),o.on("keydown",function(e){var t;13===e.keyCode&&"INPUT"===e.target.nodeName&&(e.preventDefault(),o.parents().reverse().each(function(e){if(e.toJSON)return t=e,!1}),o.fire("submit",{data:t.toJSON()}))}),o.on("keyup",function(e){var t,n;"INPUT"===e.target.nodeName&&(t=o.state.get("value"),(n=e.target.value)!==t)&&(o.state.set("value",n),o.fire("autocomplete",e))}),o.on("mouseover",function(e){var t,n=o.tooltip().moveTo(-65535);o.statusLevel()&&-1!==e.target.className.indexOf(o.classPrefix+"status")&&(t=o.statusMessage()||"Ok",t=n.text(t).show().testMoveRel(e.target,["bc-tc","bc-tl","bc-tr"]),n.classes.toggle("tooltip-n","bc-tc"===t),n.classes.toggle("tooltip-nw","bc-tl"===t),n.classes.toggle("tooltip-ne","bc-tr"===t),n.moveRel(e.target,t))})},statusLevel:function(e){return 0<arguments.length&&this.state.set("statusLevel",e),this.state.get("statusLevel")},statusMessage:function(e){return 0<arguments.length&&this.state.set("statusMessage",e),this.state.get("statusMessage")},showMenu:function(){var t=this,e=t.settings;t.menu||((e=e.menu||[]).length?e={type:"menu",items:e}:e.type=e.type||"menu",t.menu=m.create(e).parent(t).renderTo(t.getContainerElm()),t.fire("createmenu"),t.menu.reflow(),t.menu.on("cancel",function(e){e.control===t.menu&&t.focus()}),t.menu.on("show hide",function(e){e.control.items().each(function(e){e.active(e.value()===t.value())})}).fire("show"),t.menu.on("select",function(e){t.value(e.control.value())}),t.on("focusin",function(e){"INPUT"===e.target.tagName.toUpperCase()&&t.menu.hide()}),t.aria("expanded",!0)),t.menu.show(),t.menu.layoutRect({w:t.layoutRect().w}),t.menu.moveRel(t.getEl(),t.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"])},focus:function(){this.getEl("inp").focus()},repaint:function(){var e,t=this.getEl(),n=this.getEl("open"),r=this.layoutRect(),o=0,t=t.firstChild;return this.statusLevel()&&"none"!==this.statusLevel()&&(o=parseInt(w.getRuntimeStyle(t,"padding-right"),10)-parseInt(w.getRuntimeStyle(t,"padding-left"),10)),n=n?r.w-w.getSize(n).width-10:r.w-10,(r=y.document).all&&(!r.documentMode||r.documentMode<=8)&&(e=this.layoutRect().h-2+"px"),x(t).css({width:n-o,lineHeight:e}),this._super(),this},postRender:function(){var t=this;return x(this.getEl("inp")).on("change",function(e){t.state.set("value",e.target.value),t.fire("change",e)}),t._super()},renderHtml:function(){var e,t,n,r=this,o=r._id,i=r.settings,a=r.classPrefix,u=r.state.get("value")||"",s="",c="";return"spellcheck"in i&&(c+=' spellcheck="'+i.spellcheck+'"'),i.maxLength&&(c+=' maxlength="'+i.maxLength+'"'),i.size&&(c+=' size="'+i.size+'"'),i.subtype&&(c+=' type="'+i.subtype+'"'),n='<i id="'+o+'-status" class="mce-status mce-ico" style="display: none"></i>',r.disabled()&&(c+=' disabled="disabled"'),(e=i.icon)&&"caret"!==e&&(e=a+"ico "+a+"i-"+i.icon),t=r.state.get("text"),(e||t)&&(s='<div id="'+o+'-open" class="'+a+"btn "+a+'open" tabIndex="-1" role="button"><button id="'+o+'-action" type="button" hidefocus="1" tabindex="-1">'+("caret"!==e?'<i class="'+e+'"></i>':'<i class="'+a+'caret"></i>')+(t?(e?" ":"")+t:"")+"</button></div>",r.classes.add("has-open")),'<div id="'+o+'" class="'+r.classes+'"><input id="'+o+'-inp" class="'+a+'textbox" value="'+r.encode(u,!1)+'" hidefocus="1"'+c+' placeholder="'+r.encode(i.placeholder)+'" />'+n+s+"</div>"},value:function(e){return arguments.length?(this.state.set("value",e),this):(this.state.get("rendered")&&this.state.set("value",this.getEl("inp").value),this.state.get("value"))},showAutoComplete:function(e,t){var n,r=this;0===e.length?r.hideMenu():(n=function(e,t){return function(){r.fire("selectitem",{title:t,value:e})}},r.menu?r.menu.items().remove():r.menu=m.create({type:"menu",classes:"combobox-menu",layout:"flow"}).parent(r).renderTo(),f.each(e,function(e){r.menu.add({text:e.title,url:e.previewUrl,match:t,classes:"menu-item-ellipsis",onclick:n(e.value,e.title)})}),r.menu.renderNew(),r.hideMenu(),r.menu.on("cancel",function(e){e.control.parent()===r.menu&&(e.stopPropagation(),r.focus(),r.hideMenu())}),r.menu.on("select",function(){r.focus()}),e=r.layoutRect().w,r.menu.layoutRect({w:e,minW:0,maxW:e}),r.menu.repaint(),r.menu.reflow(),r.menu.show(),r.menu.moveRel(r.getEl(),r.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"]))},hideMenu:function(){this.menu&&this.menu.hide()},bindStates:function(){var n,r=this;return r.state.on("change:value",function(e){r.getEl("inp").value!==e.value&&(r.getEl("inp").value=e.value)}),r.state.on("change:disabled",function(e){r.getEl("inp").disabled=e.value}),r.state.on("change:statusLevel",function(e){var t=r.getEl("status"),n=r.classPrefix,e=e.value;w.css(t,"display","none"===e?"none":""),w.toggleClass(t,n+"i-checkmark","ok"===e),w.toggleClass(t,n+"i-warning","warn"===e),w.toggleClass(t,n+"i-error","error"===e),r.classes.toggle("has-status","none"!==e),r.repaint()}),w.on(r.getEl("status"),"mouseleave",function(){r.tooltip().hide()}),r.on("cancel",function(e){r.menu&&r.menu.visible()&&(e.stopPropagation(),r.hideMenu())}),n=function(e,t){t&&0<t.items().length&&t.items().eq(e)[0].focus()},r.on("keydown",function(e){var t=e.keyCode;"INPUT"===e.target.nodeName&&(t===pn.DOWN?(e.preventDefault(),r.fire("autocomplete"),n(0,r.menu)):t===pn.UP&&(e.preventDefault(),n(-1,r.menu)))}),r._super()},remove:function(){x(this.getEl("inp")).off(),this.menu&&this.menu.remove(),this._super()}}),bn=vn.extend({init:function(e){var t=this;e.spellcheck=!1,e.onaction&&(e.icon="none"),t._super(e),t.classes.add("colorbox"),t.on("change keyup postrender",function(){t.repaintColor(t.value())})},repaintColor:function(e){var t=this.getEl("open"),t=t?t.getElementsByTagName("i")[0]:null;if(t)try{t.style.background=e}catch(e){}},bindStates:function(){var t=this;return t.state.on("change:value",function(e){t.state.get("rendered")&&t.repaintColor(e.value)}),t._super()}}),yn=dn.extend({showPanel:function(){var e,t,n=this,r=n.settings;n.classes.add("opened"),n.panel?n.panel.show():((t=(t=r.panel).type?{layout:"grid",items:t}:t).role=t.role||"dialog",t.popover=!0,t.autohide=!0,t.ariaRoot=!0,n.panel=new k(t).on("hide",function(){n.classes.remove("opened")}).on("cancel",function(e){e.stopPropagation(),n.focus(),n.hidePanel()}).parent(n).renderTo(n.getContainerElm()),n.panel.fire("show"),n.panel.reflow()),t=["bc-tc","bc-tl","bc-tr"],e=["bc-tc","bc-tr","bc-tl","tc-bc","tc-br","tc-bl"],r=n.panel.testMoveRel(n.getEl(),r.popoverAlign||(n.isRtl()?t:e)),n.panel.classes.toggle("start","l"===r.substr(-1)),n.panel.classes.toggle("end","r"===r.substr(-1)),t="t"===r.substr(0,1),n.panel.classes.toggle("bottom",!t),n.panel.classes.toggle("top",t),n.panel.moveRel(n.getEl(),r)},hidePanel:function(){this.panel&&this.panel.hide()},postRender:function(){var t=this;return t.aria("haspopup",!0),t.on("click",function(e){e.control===t&&(t.panel&&t.panel.visible()?t.hidePanel():(t.showPanel(),t.panel.focus(!!e.aria)))}),t._super()},remove:function(){return this.panel&&(this.panel.remove(),this.panel=null),this._super()}}),xn=d.DOM,wn=yn.extend({init:function(e){this._super(e),this.classes.add("splitbtn"),this.classes.add("colorbutton")},color:function(e){return e?(this._color=e,this.getEl("preview").style.backgroundColor=e,this):this._color},resetColor:function(){return this._color=null,this.getEl("preview").style.backgroundColor=null,this},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix,r=e.state.get("text"),o=e.settings.icon?n+"ico "+n+"i-"+e.settings.icon:"",i=e.settings.image?" style=\"background-image: url('"+e.settings.image+"')\"":"",a="";return r&&(e.classes.add("btn-has-text"),a='<span class="'+n+'txt">'+e.encode(r)+"</span>"),'<div id="'+t+'" class="'+e.classes+'" role="button" tabindex="-1" aria-haspopup="true"><button role="presentation" hidefocus="1" type="button" tabindex="-1">'+(o?'<i class="'+o+'"'+i+"></i>":"")+'<span id="'+t+'-preview" class="'+n+'preview"></span>'+a+'</button><button type="button" class="'+n+'open" hidefocus="1" tabindex="-1"> <i class="'+n+'caret"></i></button></div>'},postRender:function(){var t=this,n=t.settings.onclick;return t.on("click",function(e){e.aria&&"down"===e.aria.key||e.control!==t||xn.getParent(e.target,"."+t.classPrefix+"open")||(e.stopImmediatePropagation(),n.call(t,e))}),delete t.settings.onclick,t._super()}}),Cn=tinymce.util.Tools.resolve("tinymce.util.Color"),Sn=t.extend({Defaults:{classes:"widget colorpicker"},init:function(e){this._super(e)},postRender:function(){var r,t,n,o,i,a,u;function s(e,t){var n=w.getPos(e),r=t.pageX-n.x,t=t.pageY-n.y;return{x:Math.max(0,Math.min(r/e.clientWidth,1)),y:Math.max(0,Math.min(t/e.clientHeight,1))}}function c(e,t){var n=(360-e.h)/360;w.css(i,{top:100*n+"%"}),t||w.css(u,{left:e.s+"%",top:100-e.v+"%"}),a.style.background=Cn({s:100,v:100,h:e.h}).toHex(),r.color().parse({s:e.s,v:e.v,h:e.h})}function e(e){e=s(a,e);n.s=100*e.x,n.v=100*(1-e.y),c(n),r.fire("change")}function l(e){e=s(o,e);(n=t.toHsv()).h=360*(1-e.y),c(n,!0),r.fire("change")}t=(r=this).color(),o=r.getEl("h"),i=r.getEl("hp"),a=r.getEl("sv"),u=r.getEl("svp"),r._repaint=function(){c(n=t.toHsv())},r._super(),r._svdraghelper=new M(r._id+"-sv",{start:e,drag:e}),r._hdraghelper=new M(r._id+"-h",{start:l,drag:l}),r._repaint()},rgb:function(){return this.color().toRgb()},value:function(e){if(!arguments.length)return this.color().toHex();this.color().parse(e),this._rendered&&this._repaint()},color:function(){return this._color||(this._color=Cn()),this._color},renderHtml:function(){var e,i,t,a;return e=this._id,i=this.classPrefix,a="#ff0000,#ff0080,#ff00ff,#8000ff,#0000ff,#0080ff,#00ffff,#00ff80,#00ff00,#80ff00,#ffff00,#ff8000,#ff0000",t='<div id="'+e+'-h" class="'+i+'colorpicker-h" style="background: -ms-linear-gradient(top,#ff0000,#ff0080,#ff00ff,#8000ff,#0000ff,#0080ff,#00ffff,#00ff80,#00ff00,#80ff00,#ffff00,#ff8000,#ff0000);background: linear-gradient(to bottom,#ff0000,#ff0080,#ff00ff,#8000ff,#0000ff,#0080ff,#00ffff,#00ff80,#00ff00,#80ff00,#ffff00,#ff8000,#ff0000);">'+function(){for(var e="",t="filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=",n=a.split(","),r=0,o=n.length-1;r<o;r++)e+='<div class="'+i+'colorpicker-h-chunk" style="height:'+100/o+"%;"+t+n[r]+",endColorstr="+n[r+1]+");-ms-"+t+n[r]+",endColorstr="+n[r+1]+')"></div>';return e}()+'<div id="'+e+'-hp" class="'+i+'colorpicker-h-marker"></div></div>','<div id="'+e+'" class="'+this.classes+'"><div id="'+e+'-sv" class="'+i+'colorpicker-sv"><div class="'+i+'colorpicker-overlay1"><div class="'+i+'colorpicker-overlay2"><div id="'+e+'-svp" class="'+i+'colorpicker-selector1"><div class="'+i+'colorpicker-selector2"></div></div></div></div></div>'+t+"</div>"}}),kn=t.extend({init:function(e){e=f.extend({height:100,text:"Drop an image here",multiple:!1,accept:null},e),this._super(e),this.classes.add("dropzone"),e.multiple&&this.classes.add("multiple")},renderHtml:function(){var e=this.settings,t={id:this._id,hidefocus:"1"},t=w.create("div",t,"<span>"+this.translate(e.text)+"</span>");return e.height&&w.css(t,"height",e.height+"px"),e.width&&w.css(t,"width",e.width+"px"),t.className=this.classes,t.outerHTML},postRender:function(){var r=this,e=function(e){e.preventDefault(),r.classes.toggle("dragenter"),r.getEl().className=r.classes},n=function(e){var t,n=r.settings.accept;return"string"!=typeof n?e:(t=new RegExp("("+n.split(/\s*,\s*/).join("|")+")$","i"),f.grep(e,function(e){return t.test(e.name)}))};r._super(),r.$el.on("dragover",function(e){e.preventDefault()}),r.$el.on("dragenter",e),r.$el.on("dragleave",e),r.$el.on("drop",function(e){var t;e.preventDefault(),r.state.get("disabled")||(t=n(e.dataTransfer.files),r.value=function(){return t.length?r.settings.multiple?t:t[0]:null},t.length&&r.fire("change",e))})},remove:function(){this.$el.off(),this._super()}}),Tn=t.extend({init:function(e){var t=this;e.delimiter||(e.delimiter=""),t._super(e),t.classes.add("path"),t.canFocus=!0,t.on("click",function(e){(e=e.target.getAttribute("data-index"))&&t.fire("select",{value:t.row()[e],index:e})}),t.row(t.settings.row)},focus:function(){return this.getEl().firstChild.focus(),this},row:function(e){return arguments.length?(this.state.set("row",e),this):this.state.get("row")},renderHtml:function(){return'<div id="'+this._id+'" class="'+this.classes+'">'+this._getDataPathHtml(this.state.get("row"))+"</div>"},bindStates:function(){var t=this;return t.state.on("change:row",function(e){t.innerHtml(t._getDataPathHtml(e.value))}),t._super()},_getDataPathHtml:function(e){for(var t=e||[],n="",r=this.classPrefix,o=0,i=t.length;o<i;o++)n+=(0<o?'<div class="'+r+'divider" aria-hidden="true"> '+this.settings.delimiter+" </div>":"")+'<div role="button" class="'+r+"path-item"+(o===i-1?" "+r+"last":"")+'" data-index="'+o+'" tabindex="-1" id="'+this._id+"-"+o+'" aria-level="'+(o+1)+'">'+t[o].name+"</div>";return n=n||'<div class="'+r+'path-item"></div>'}}),Nn=Tn.extend({postRender:function(){var i=this,a=i.settings.editor;return!1!==a.settings.elementpath&&(i.on("select",function(e){a.focus(),a.selection.select(this.row()[e.index].element),a.nodeChanged()}),a.on("nodeChange",function(e){for(var t,n=[],r=e.parents,o=r.length;o--&&(1!==r[o].nodeType||function(e){if(1===e.nodeType){if("BR"===e.nodeName||e.getAttribute("data-mce-bogus"))return 1;if("bookmark"===e.getAttribute("data-mce-type"))return 1}}(r[o])||((t=a.fire("ResolveName",{name:r[o].nodeName.toLowerCase(),target:r[o]})).isDefaultPrevented()||n.push({name:t.name,element:r[o]}),!t.isPropagationStopped())););i.row(n)})),i._super()}}),En=e.extend({Defaults:{layout:"flex",align:"center",defaults:{flex:1}},renderHtml:function(){var e=this,t=e._layout,n=e.classPrefix;return e.classes.add("formitem"),t.preRender(e),'<div id="'+e._id+'" class="'+e.classes+'" hidefocus="1" tabindex="-1">'+(e.settings.title?'<div id="'+e._id+'-title" class="'+n+'title">'+e.settings.title+"</div>":"")+'<div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div></div>"}}),Rn=e.extend({Defaults:{containerCls:"form",layout:"flex",direction:"column",align:"stretch",flex:1,padding:15,labelGap:30,spacing:10,callbacks:{submit:function(){this.submit()}}},preRender:function(){var n=this,e=n.items();n.settings.formItemDefaults||(n.settings.formItemDefaults={layout:"flex",autoResize:"overflow",defaults:{flex:1}}),e.each(function(e){var t=e.settings.label;t&&((t=new En(f.extend({items:{type:"label",id:e._id+"-l",text:t,flex:0,forId:e._id,disabled:e.disabled()}},n.settings.formItemDefaults))).type="formitem",e.aria("labelledby",e._id+"-l"),void 0===e.settings.flex&&(e.settings.flex=1),n.replace(e,t),t.add(e))})},submit:function(){return this.fire("submit",{data:this.toJSON()})},postRender:function(){this._super(),this.fromJSON(this.settings.data)},bindStates:function(){var o=this;function e(){var e,t,n=0,r=[];if(!1!==o.settings.labelGapCalc)for(("children"===o.settings.labelGapCalc?o.find("formitem"):o.items()).filter("formitem").each(function(e){var e=e.items()[0],t=e.getEl().clientWidth;n=n<t?t:n,r.push(e)}),t=o.settings.labelGap||0,e=r.length;e--;)r[e].settings.minWidth=n+t}o._super(),o.on("show",e),e()}}),_n=Rn.extend({Defaults:{containerCls:"fieldset",layout:"flex",direction:"column",align:"stretch",flex:1,padding:"25 15 5 15",labelGap:30,spacing:10,border:1},renderHtml:function(){var e=this,t=e._layout,n=e.classPrefix;return e.preRender(),t.preRender(e),'<fieldset id="'+e._id+'" class="'+e.classes+'" hidefocus="1" tabindex="-1">'+(e.settings.title?'<legend id="'+e._id+'-title" class="'+n+'fieldset-title">'+e.settings.title+"</legend>":"")+'<div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div></fieldset>"}}),An=0,Dn=function(e){var t=(new Date).getTime();return e+"_"+Math.floor(1e9*Math.random())+ ++An+String(t)},On={fromHtml:function(e,t){t=(t||y.document).createElement("div");if(t.innerHTML=e,!t.hasChildNodes()||1<t.childNodes.length)throw y.console.error("HTML does not have a single root node",e),new Error("HTML must have a single root node");return Pn(t.childNodes[0])},fromTag:function(e,t){t=(t||y.document).createElement(e);return Pn(t)},fromText:function(e,t){t=(t||y.document).createTextNode(e);return Pn(t)},fromDom:Pn=function(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:s(e)}},fromPoint:function(e,t,n){e=e.dom();return de(e.elementFromPoint(t,n)).map(Pn)}},B=function(n){var r,o=!1;return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o||(o=!0,r=n.apply(null,e)),r}},y.Node.ATTRIBUTE_NODE,y.Node.CDATA_SECTION_NODE,y.Node.COMMENT_NODE,O=y.Node.DOCUMENT_NODE,y.Node.DOCUMENT_TYPE_NODE,y.Node.DOCUMENT_FRAGMENT_NODE,Bn=y.Node.ELEMENT_NODE,y.Node.TEXT_NODE,y.Node.PROCESSING_INSTRUCTION_NODE,y.Node.ENTITY_REFERENCE_NODE,y.Node.ENTITY_NODE,y.Node.NOTATION_NODE,Mn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(){for(var n,r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];if(t.length!==r.length)throw new Error('Wrong number of arguments to struct. Expected "['+t.length+']", got '+r.length+" arguments");return n={},Oe(t,function(e,t){n[e]=s(r[t])}),n}},void 0!==y.window?y.window:Function("return this;")(),In=function(e,t){for(var n,r=0;r<e.length;r++)if((n=e[r]).test(t))return n},Ln=function(e,t){var n=In(e,t);return n?Hn((e=function(e){return Number(t.replace(n,"$"+e))})(1),e(2)):{major:0,minor:0}},Hn=function(e,t){return{major:e,minor:t}},zn=function(e,t){t=String(t).toLowerCase();return 0===e.length?Fn():Ln(e,t)},Un=Fn=function(){return Hn(0,0)},jn="Chrome",Vn="IE",qn="Opera",$n="Firefox",Yn="Safari",r=function(e,t){return function(){return t===e}},Kn=function(){return Xn({current:void 0,version:Un()})},Gn=Xn=function(e){var t=e.current;return{current:t,version:e.version,isEdge:r(Wn,t),isChrome:r(jn,t),isIE:r(Vn,t),isOpera:r(qn,t),isFirefox:r($n,t),isSafari:r(Yn,t)}},s(Wn="Edge"),s(jn),s(Vn),s(qn),s($n),s(Yn),Zn="iOS",Qn="Android",er="Linux",tr="OSX",nr="Solaris",rr="FreeBSD",E=function(e,t){return function(){return t===e}},ir=function(){return or({current:void 0,version:Un()})},ar=or=function(e){var t=e.current;return{current:t,version:e.version,isWindows:E(Jn,t),isiOS:E(Zn,t),isAndroid:E(Qn,t),isOSX:E(tr,t),isLinux:E(er,t),isSolaris:E(nr,t),isFreeBSD:E(rr,t)}},s(Jn="Windows"),s(Zn),s(Qn),s(er),s(tr),s(nr),s(rr),ur=function(e,t,n){var r=e.isiOS()&&!0===/ipad/i.test(n),o=e.isiOS()&&!r,i=e.isAndroid()&&3===e.version.major,a=e.isAndroid()&&4===e.version.major,i=r||i||a&&!0===/mobile/i.test(n),a=e.isiOS()||e.isAndroid(),u=a&&!i,t=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(n);return{isiPad:s(r),isiPhone:s(o),isTablet:s(i),isPhone:s(u),isTouch:s(a),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:s(t)}},sr=function(e,t){var n=String(t).toLowerCase();return Me(e,function(e){return e.search(n)})},cr=function(e,n){return sr(e,n).map(function(e){var t=zn(e.versionRegexes,n);return{current:e.name,version:t}})},lr=function(e,n){return sr(e,n).map(function(e){var t=zn(e.versionRegexes,n);return{current:e.name,version:t}})},R=function(e,t){return-1!==e.indexOf(t)},_=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return R(e,"edge/")&&R(e,"chrome")&&R(e,"safari")&&R(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,_=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/],search:function(e){return R(e,"chrome")&&!R(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return R(e,"msie")||R(e,"trident")}},{name:"Opera",versionRegexes:[_,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:(A=function(t){return function(e){return R(e,t)}})("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:A("firefox")},{name:"Safari",versionRegexes:[_,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(R(e,"safari")||R(e,"mobile/"))&&R(e,"applewebkit")}}],A=[{name:"Windows",search:A("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return R(e,"iphone")||R(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:A("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:A("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:A("linux"),versionRegexes:[]},{name:"Solaris",search:A("sunos"),versionRegexes:[]},{name:"FreeBSD",search:A("freebsd"),versionRegexes:[]}],fr={browsers:s(_),oses:s(A)},dr=function(e){var t=fr.browsers(),n=fr.oses(),t=cr(t,e).fold(Kn,Gn),n=lr(n,e).fold(ir,ar);return{browser:t,os:n,deviceType:ur(n,t,e)}},_=B(function(){var e=y.navigator.userAgent;return dr(e)}),mr=Bn,gr=O,hr=function(e){return e.nodeType!==mr&&e.nodeType!==gr||0===e.childElementCount},pr=function(e,t){t=void 0===t?y.document:t.dom();return hr(t)?[]:Pe(t.querySelectorAll(e),On.fromDom)},vr=function(e,t){t=void 0===t?y.document:t.dom();return hr(t)?a():de(t.querySelector(e)).map(On.fromDom)},{detect:_}.detect().browser.isIE(),Mn("element","offset"),br=function(e,t){return pr(t,e)},yr=f.trim,xr=(A=function(t){return function(e){if(e&&1===e.nodeType){if(e.contentEditable===t)return!0;if(e.getAttribute("data-mce-contenteditable")===t)return!0}return!1}})("true"),wr=A("false"),Cr=function(e,t,n,r,o){return{type:e,title:t,url:n,level:r,attach:o}},Sr=function(e){for(;e=e.parentNode;){var t=e.contentEditable;if(t&&"inherit"!==t)return xr(e)}return!1},kr=function(e,t){return Pe(br(On.fromDom(t),e),function(e){return e.dom()})},Tr=function(e){return e.innerText||e.textContent},Nr=function(e){return e.id||Dn("h")},Er=function(e){return e&&"A"===e.nodeName&&(e.id||e.name)},Rr=function(e){return Er(e)&&Ar(e)},_r=function(e){return e&&/^(H[1-6])$/.test(e.nodeName)},Ar=function(e){return Sr(e)&&!wr(e)},Dr=function(e){return _r(e)&&Ar(e)},Pr=function(e){return _r(e)?parseInt(e.nodeName.substr(1),10):0},Or=function(e){var t=Nr(e),n=function(){e.id=t};return Cr("header",Tr(e),"#"+t,Pr(e),n)},Br=function(e){var t=e.id||e.name,e=Tr(e);return Cr("anchor",e||"#"+t,"#"+t,0,ae)},Mr=function(e){return Pe(c(e,Dr),Or)},Ir=function(e){return Pe(c(e,Rr),Br)},Lr=function(e){return kr("h1,h2,h3,h4,h5,h6,a:not([href])",e)},Fr=function(e){return 0<yr(e.title).length},Hr=function(e){e=Lr(e);return c(Mr(e).concat(Ir(e)),Fr)},zr=function(){return(window.tinymce||o).activeEditor},D={},Ur=5,Wr=function(e){return{title:e.title,value:{title:{raw:e.title},url:e.url,attach:e.attach}}},jr=function(e){return f.map(e,Wr)},Vr=function(e,t){return{title:e,value:{title:e,url:t,attach:ae}}},qr=function(t,e){return!De(e,function(e){return e.url===t})},$r=function(e,t,n){e=t in e?e[t]:n;return!1===e?null:e},Yr=function(e,n,t,r){var o={title:"-"},i=function(e){e=e.hasOwnProperty(t)?e[t]:[],e=c(e,function(e){return qr(e,n)});return f.map(e,function(e){return{title:e,value:{title:e,url:e,attach:ae}}})},a=function(t){var e=c(n,function(e){return e.type===t});return jr(e)},u=function(){var e=a("anchor"),t=$r(r,"anchor_top","#top"),n=$r(r,"anchor_bottom","#bottom");return null!==t&&e.unshift(Vr("<top>",t)),null!==n&&e.push(Vr("<bottom>",n)),e};return!1===r.typeahead_urls?[]:"file"===t?(u=[Kr(e,i(D)),Kr(e,a("header")),Kr(e,u())],Be(u,function(e,t){return 0===e.length||0===t.length?e.concat(t):e.concat(o,t)},[])):Kr(e,i(D))},Xr=function(e,t){var n=D[t];/^https?/.test(e)&&(n?Ae(n,e).isNone()&&(D[t]=n.slice(0,Ur).concat(e)):D[t]=[e])},Kr=function(e,t){var n=e.toLowerCase(),t=f.grep(t,function(e){return-1!==e.title.toLowerCase().indexOf(n)});return 1===t.length&&t[0].title===e?[]:t},Gr=function(e){e=e.title;return e.raw||e},Jr=function(n,r,o,i){function t(e){var t=Hr(o),t=Yr(e,t,i,r);n.showAutoComplete(t,e)}n.on("autocomplete",function(){t(n.value())}),n.on("selectitem",function(e){var t,e=e.value;n.value(e.url),t=Gr(e),"image"===i?n.fire("change",{meta:{alt:t,attach:e.attach}}):n.fire("change",{meta:{text:t,attach:e.attach}}),n.focus()}),n.on("click",function(e){0===n.value().length&&"INPUT"===e.target.nodeName&&t("")}),n.on("PostRender",function(){n.getRoot().on("submit",function(e){e.isDefaultPrevented()||Xr(n.value(),i)})})},Zr=function(e){var t=e.status,e=e.message;return"valid"===t?{status:"ok",message:e}:"unknown"===t||"invalid"===t?{status:"warn",message:e}:{status:"none",message:""}},Qr=function(t,e,n){var r,o=e.filepicker_validator_handler;o&&(r=function(e){0===e.length?t.statusLevel("none"):o({url:e,type:n},function(e){e=Zr(e);t.statusMessage(e.message),t.statusLevel(e.status)})},t.state.on("change:value",function(e){r(e.value)}))},eo=vn.extend({Statics:{clearHistory:function(){D={}}},init:function(e){var t,n,r,o=this,i=zr(),a=i.settings,u=e.filetype;e.spellcheck=!1,(r=(r=a.file_picker_types||a.file_browser_callback_types)&&f.makeMap(r,/[, ]/))&&!r[u]||(!(n=a.file_picker_callback)||r&&!r[u]?!(n=a.file_browser_callback)||r&&!r[u]||(t=function(){n(o.getEl("inp").id,o.value(),u,window)}):t=function(){var e=o.fire("beforecall").meta,e=f.extend({filetype:u},e);n.call(i,function(e,t){o.value(e).fire("change",{meta:t})},o.value(),e)}),t&&(e.icon="browse",e.onaction=t),o._super(e),o.classes.add("filepicker"),Jr(o,a,i.getBody(),u),Qr(o,a,u)}}),to=fn.extend({recalc:function(e){var t=e.layoutRect(),n=e.paddingBox;e.items().filter(":visible").each(function(e){e.layoutRect({x:n.left,y:n.top,w:t.innerW-n.right-n.left,h:t.innerH-n.top-n.bottom}),e.recalc&&e.recalc()})}}),no=fn.extend({recalc:function(e){var t,n,r,o,i,a,u,s,I,c,l,f,d,m,g,h,p,v,b,y,x,w,C,S,k,T,N,E,R=[],_=Math.max,L=Math.min,A=e.items().filter(":visible"),D=e.layoutRect(),P=e.paddingBox,O=e.settings,B=e.isRtl()?O.direction||"row-reversed":O.direction,M=O.align,F=e.isRtl()?O.pack||"end":O.pack,H=O.spacing||0;for("row-reversed"!==B&&"column-reverse"!==B||(A=A.set(A.toArray().reverse()),B=B.split("-")[0]),O="column"===B?(h="y",m="h",g="minH",p="maxH",b="innerH",v="top",y="deltaH",x="contentH",T="left",S="w",w="x",C="innerW",k="minW",N="right",E="deltaW","contentW"):(h="x",m="w",g="minW",p="maxW",b="innerW",v="left",y="deltaW",x="contentW",T="top",S="h",w="y",C="innerH",k="minH",N="bottom",E="deltaH","contentH"),o=D[b]-P[v]-P[v],t=d=r=0,n=A.length;t<n;t++)a=(i=A[t]).layoutRect(),o-=t<n-1?H:0,0<(u=i.settings.flex)&&(r+=u,a[p]&&R.push(i),a.flex=u),o-=a[g],d<(s=P[T]+a[k]+P[N])&&(d=s);if((l={})[g]=o<0?D[g]-o+D[y]:D[b]-o+D[y],l[k]=d+D[E],l[x]=D[b]-o,l[O]=d,l.minW=L(l.minW,D.maxW),l.minH=L(l.minH,D.maxH),l.minW=_(l.minW,D.startMinWidth),l.minH=_(l.minH,D.startMinHeight),!D.autoResize||l.minW===D.minW&&l.minH===D.minH){for(c=o/r,t=0,n=R.length;t<n;t++)(I=(a=(i=R[t]).layoutRect())[p])<(s=a[g]+a.flex*c)?(o-=a[p]-a[g],r-=a.flex,a.flex=0,a.maxFlexSize=I):a.maxFlexSize=0;for(c=o/r,f=P[v],l={},0===r&&("end"===F?f=o+P[v]:"center"===F?(f=Math.round(D[b]/2-(D[b]-o)/2)+P[v])<0&&(f=P[v]):"justify"===F&&(f=P[v],H=Math.floor(o/(A.length-1)))),l[w]=P[T],t=0,n=A.length;t<n;t++)s=(a=(i=A[t]).layoutRect()).maxFlexSize||a[g],"center"===M?l[w]=Math.round(D[C]/2-a[S]/2):"stretch"===M?(l[S]=_(a[k]||0,D[C]-P[T]-P[N]),l[w]=P[T]):"end"===M&&(l[w]=D[C]-a[S]-P.top),0<a.flex&&(s+=a.flex*c),l[m]=s,l[h]=f,i.layoutRect(l),i.recalc&&i.recalc(),f+=s+H}else l.w=l.minW,l.h=l.minH,e.layoutRect(l),this.recalc(e),null===e._lastRect&&(B=e.parent())&&(B._lastRect=null,B.recalc())}}),ro=ln.extend({Defaults:{containerClass:"flow-layout",controlClass:"flow-layout-item",endClass:"break"},recalc:function(e){e.items().filter(":visible").each(function(e){e.recalc&&e.recalc()})},isNative:function(){return!0}}),oo=function(e,t){return vr(t,e)},P=function(e,t){return function(){e.execCommand("mceToggleFormat",!1,t)}},io=function(e,t,n){function r(e){n(e,t)}e.formatter?e.formatter.formatChanged(t,r):e.on("init",function(){e.formatter.formatChanged(t,r)})},ao=function(e,n){return function(t){io(e,n,function(e){t.control.active(e)})}},uo=function(r){var t=["alignleft","aligncenter","alignright","alignjustify"],e=[{text:"Left",icon:"alignleft",onclick:P(r,"alignleft")},{text:"Center",icon:"aligncenter",onclick:P(r,"aligncenter")},{text:"Right",icon:"alignright",onclick:P(r,"alignright")},{text:"Justify",icon:"alignjustify",onclick:P(r,"alignjustify")}];r.addMenuItem("align",{text:"Align",menu:e}),r.addButton("align",{type:"menubutton",icon:"alignleft",menu:e,onShowMenu:function(e){var n=e.control.menu;f.each(t,function(t,e){n.items().eq(e).each(function(e){return e.active(r.formatter.match(t))})})},onPostRender:function(e){var n=e.control;f.each(t,function(t,e){io(r,t,function(e){n.icon("alignleft"),e&&n.icon(t)})})}}),f.each({alignleft:["Align left","JustifyLeft"],aligncenter:["Align center","JustifyCenter"],alignright:["Align right","JustifyRight"],alignjustify:["Justify","JustifyFull"],alignnone:["No alignment","JustifyNone"]},function(e,t){r.addButton(t,{active:!1,tooltip:e[0],cmd:e[1],onPostRender:ao(r,t)})})},so=function(e){return e?e.split(",")[0]:""},co=function(e,t){var n,r=t?t.toLowerCase():"";return f.each(e,function(e){e.value.toLowerCase()===r&&(n=e.value)}),f.each(e,function(e){n||so(e.value).toLowerCase()!==so(r).toLowerCase()||(n=e.value)}),n},lo=function(o,i){return function(){var r=this;r.state.set("value",null),o.on("init nodeChange",function(e){var t=o.queryCommandValue("FontName"),n=co(i,t);r.value(n||null),!n&&t&&r.text(so(t))})}},fo=function(e){for(var t=(e=e.replace(/;$/,"").split(";")).length;t--;)e[t]=e[t].split("=");return e},mo=function(e){e=fo(e.settings.font_formats||"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats");return f.map(e,function(e){return{text:{raw:e[0]},value:e[1],textStyle:-1===e[1].indexOf("dings")?"font-family:"+e[1]:""}})},go=function(t){t.addButton("fontselect",function(){var e=mo(t);return{type:"listbox",text:"Font Family",tooltip:"Font Family",values:e,fixedWidth:!0,onPostRender:lo(t,e),onselect:function(e){e.control.settings.value&&t.execCommand("FontName",!1,e.control.settings.value)}}})},ho=function(e){go(e)},po=function(e,t){t=Math.pow(10,t);return Math.round(e*t)/t},vo=function(e,t){return/[0-9.]+px$/.test(e)?po(72*parseInt(e,10)/96,t||0)+"pt":e},bo=function(e,t,n){var r;return f.each(e,function(e){e.value===n?r=n:e.value===t&&(r=t)}),r},yo=function(a,u){return function(){var i=this;a.on("init nodeChange",function(e){var t,n,r,o=a.queryCommandValue("FontSize");if(o)for(n=3;!r&&0<=n;n--)t=vo(o,n),r=bo(u,t,o);i.value(r||null),r||i.text(t)})}},xo=function(e){e=e.settings.fontsize_formats||"8pt 10pt 12pt 14pt 18pt 24pt 36pt";return f.map(e.split(" "),function(e){var t=e,n=e,e=e.split("=");return 1<e.length&&(t=e[0],n=e[1]),{text:t,value:n}})},wo=function(t){t.addButton("fontsizeselect",function(){var e=xo(t);return{type:"listbox",text:"Font Sizes",tooltip:"Font Sizes",values:e,fixedWidth:!0,onPostRender:yo(t,e),onclick:function(e){e.control.settings.value&&t.execCommand("FontSize",!1,e.control.settings.value)}}})},Co=function(e){wo(e)},So=function(n,e){var r=e.length;return f.each(e,function(e){e.menu&&(e.hidden=0===So(n,e.menu));var t=e.format;t&&(e.hidden=!n.formatter.canApply(t)),e.hidden&&r--}),r},ko=function(n,e){var r=e.items().length;return e.items().each(function(e){e.menu&&e.visible(0<ko(n,e.menu)),!e.menu&&e.settings.menu&&e.visible(0<So(n,e.settings.menu));var t=e.settings.format;t&&e.visible(n.formatter.canApply(t)),e.visible()||r--}),r},To=function(n){var o=0,i=[],t=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",icon:"bold",format:"bold"},{title:"Italic",icon:"italic",format:"italic"},{title:"Underline",icon:"underline",format:"underline"},{title:"Strikethrough",icon:"strikethrough",format:"strikethrough"},{title:"Superscript",icon:"superscript",format:"superscript"},{title:"Subscript",icon:"subscript",format:"subscript"},{title:"Code",icon:"code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Alignment",items:[{title:"Left",icon:"alignleft",format:"alignleft"},{title:"Center",icon:"aligncenter",format:"aligncenter"},{title:"Right",icon:"alignright",format:"alignright"},{title:"Justify",icon:"alignjustify",format:"alignjustify"}]}],a=function(e){var r=[];if(e)return f.each(e,function(e){var t,n={text:e.title,icon:e.icon};e.items?n.menu=a(e.items):(t=e.format||"custom"+o++,e.format||(e.name=t,i.push(e)),n.format=t,n.cmd=e.cmd),r.push(n)}),r},e=function(){var e=n.settings.style_formats_merge?n.settings.style_formats?a(t.concat(n.settings.style_formats)):a(t):a(n.settings.style_formats||t);return e};return n.on("init",function(){f.each(i,function(e){n.formatter.register(e.name,e)})}),{type:"menu",items:e(),onPostRender:function(e){n.fire("renderFormatsMenu",{control:e.control})},itemDefaults:{preview:!0,textStyle:function(){if(this.settings.format)return n.formatter.getCssText(this.settings.format)},onPostRender:function(){var t=this;t.parent().on("show",function(){var e=t.settings.format;e&&(t.disabled(!n.formatter.canApply(e)),t.active(n.formatter.match(e))),(e=t.settings.cmd)&&t.active(n.queryCommandState(e))})},onclick:function(){this.settings.format&&P(n,this.settings.format)(),this.settings.cmd&&n.execCommand(this.settings.cmd)}}}},No=function(e,t){e.addMenuItem("formats",{text:"Formats",menu:t})},Eo=function(e,t){e.addButton("styleselect",{type:"menubutton",text:"Formats",menu:t,onShowMenu:function(){e.settings.style_formats_autohide&&ko(e,this.menu)}})},Ro=function(e){var t=To(e);No(e,t),Eo(e,t)},_o=function(e){for(var t=(e=e.replace(/;$/,"").split(";")).length;t--;)e[t]=e[t].split("=");return e},Ao=function(o,i,a){return function(){var t=this;o.on("nodeChange",function(e){var n=o.formatter,r=null;f.each(e.parents,function(t){if(f.each(i,function(e){if(a?n.matchNode(t,a,{value:e.value})&&(r=e.value):n.matchNode(t,e.value)&&(r=e.value),r)return!1}),r)return!1}),t.value(r)})}},Do=function(n,e){return function(){var t=[];return f.each(e,function(e){t.push({text:e[0],value:e[1],textStyle:function(){return n.formatter.getCssText(e[1])}})}),{type:"listbox",text:e[0][0],values:t,fixedWidth:!0,onselect:function(e){e.control&&(e=e.control.value(),P(n,e)())},onPostRender:Ao(n,t)}}},Po=function(t,e){return f.map(e,function(e){return{text:e[0],onclick:P(t,e[1]),textStyle:function(){return t.formatter.getCssText(e[1])}}})},Oo=function(e){var t=_o(e.settings.block_formats||"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre");e.addMenuItem("blockformats",{text:"Blocks",menu:Po(e,t)}),e.addButton("formatselect",Do(e,t))},Bo=function(t,e){var n;if("string"==typeof e)n=e.split(" ");else if(f.isArray(e))return He(f.map(e,function(e){return Bo(t,e)}));return e=f.grep(n,function(e){return"|"===e||e in t.menuItems}),f.map(e,function(e){return"|"===e?{text:"-"}:t.menuItems[e]})},Mo=function(e){return e&&"-"===e.text},Io=function(e){e=c(e,function(e,t,n){return!Mo(e)||!Mo(n[t-1])});return c(e,function(e,t,n){return!Mo(e)||0<t&&t<n.length-1})},Lo=function(e,t){var n=[{text:"-"}],e=f.grep(e.menuItems,function(e){return e.context===t});return f.each(e,function(e){"before"===e.separator&&n.push({text:"|"}),e.prependToContext?n.unshift(e):n.push(e),"after"===e.separator&&n.push({text:"|"})}),n},Fo=function(e){var t=e.settings.insert_button_items;return Io(t?Bo(e,t):Lo(e,"insert"))},Ho=function(e){e.addButton("insert",{type:"menubutton",icon:"insert",menu:[],oncreatemenu:function(){this.menu.add(Fo(e)),this.menu.renderNew()}})},zo=function(e){Ho(e)},Uo=function(n){f.each({bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript"},function(e,t){n.addButton(t,{active:!1,tooltip:e,onPostRender:ao(n,t),onclick:P(n,t)})})},Wo=function(n){f.each({outdent:["Decrease indent","Outdent"],indent:["Increase indent","Indent"],cut:["Cut","Cut"],copy:["Copy","Copy"],paste:["Paste","Paste"],help:["Help","mceHelp"],selectall:["Select all","SelectAll"],visualaid:["Visual aids","mceToggleVisualAid"],newdocument:["New document","mceNewDocument"],removeformat:["Clear formatting","RemoveFormat"],remove:["Remove","Delete"]},function(e,t){n.addButton(t,{tooltip:e[0],cmd:e[1]})})},jo=function(n){f.each({blockquote:["Blockquote","mceBlockQuote"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"]},function(e,t){n.addButton(t,{active:!1,tooltip:e[0],cmd:e[1],onPostRender:ao(n,t)})})},Vo=function(e){Uo(e),Wo(e),jo(e)},qo=function(n){f.each({bold:["Bold","Bold","Meta+B"],italic:["Italic","Italic","Meta+I"],underline:["Underline","Underline","Meta+U"],strikethrough:["Strikethrough","Strikethrough"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"],removeformat:["Clear formatting","RemoveFormat"],newdocument:["New document","mceNewDocument"],cut:["Cut","Cut","Meta+X"],copy:["Copy","Copy","Meta+C"],paste:["Paste","Paste","Meta+V"],selectall:["Select all","SelectAll","Meta+A"]},function(e,t){n.addMenuItem(t,{text:e[0],icon:t,shortcut:e[2],cmd:e[1]})}),n.addMenuItem("codeformat",{text:"Code",icon:"code",onclick:P(n,"code")})},$o=function(e){Vo(e),qo(e)},Yo=function(n,r){return function(){var e=this,t=function(){return!!n.undoManager&&n.undoManager["redo"===r?"hasRedo":"hasUndo"]()};e.disabled(!t()),n.on("Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",function(){e.disabled(n.readonly||!t())})}},Xo=function(e){e.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onPostRender:Yo(e,"undo"),cmd:"undo"}),e.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onPostRender:Yo(e,"redo"),cmd:"redo"})},Ko=function(e){e.addButton("undo",{tooltip:"Undo",onPostRender:Yo(e,"undo"),cmd:"undo"}),e.addButton("redo",{tooltip:"Redo",onPostRender:Yo(e,"redo"),cmd:"redo"})},Go=function(e){Xo(e),Ko(e)},Jo=function(e){return function(){var t=this;e.on("VisualAid",function(e){t.active(e.hasVisual)}),t.active(e.hasVisual)}},Zo=function(e){e.addMenuItem("visualaid",{text:"Visual aids",selectable:!0,onPostRender:Jo(e),cmd:"mceToggleVisualAid"})},Qo=function(e){Zo(e)},ei=function(){t.tooltips=!b.iOS,l.translate=function(e){return o.translate(e)}},ti=function(e){e.settings.ui_container&&(b.container=oo(On.fromDom(y.document.body),e.settings.ui_container).fold(s(null),function(e){return e.dom()}))},ni=function(e){e.rtl&&(l.rtl=!0)},ri=function(e){e.on("mousedown progressstate",function(){k.hideAll()})},oi={setup:function(e){ni(e),ri(e),ti(e),ei(),Oo(e),uo(e),$o(e),Go(e),Co(e),ho(e),Ro(e),Qo(e),zo(e)}},ii=fn.extend({recalc:function(e){var t,n,r,o,i,a,u,s,c,l,f,d,m,g,h,p,v,b,y,x,w,C=[],S=[],k=e.settings,T=e.items().filter(":visible"),N=e.layoutRect(),E=k.columns||Math.ceil(Math.sqrt(T.length)),R=Math.ceil(T.length/E),_=k.spacingH||k.spacing||0,A=k.spacingV||k.spacing||0,D=k.alignH||k.align,P=k.alignV||k.align,O=e.paddingBox,B="reverseRows"in k?k.reverseRows:e.isRtl();for(D&&"string"==typeof D&&(D=[D]),P&&"string"==typeof P&&(P=[P]),a=0;a<E;a++)C.push(0);for(u=0;u<R;u++)S.push(0);for(u=0;u<R;u++)for(a=0;a<E&&(i=T[u*E+a]);a++)g=(o=i.layoutRect()).minW,h=o.minH,C[a]=C[a]<g?g:C[a],S[u]=S[u]<h?h:S[u];for(p=N.innerW-O.left-O.right,a=d=0;a<E;a++)d+=C[a]+(0<a?_:0),p-=(0<a?_:0)+C[a];for(v=N.innerH-O.top-O.bottom,u=m=0;u<R;u++)m+=S[u]+(0<u?A:0),v-=(0<u?A:0)+S[u];if(d+=O.left+O.right,m+=O.top+O.bottom,(r={}).minW=d+(N.w-N.innerW),r.minH=m+(N.h-N.innerH),r.contentW=r.minW-N.deltaW,r.contentH=r.minH-N.deltaH,r.minW=Math.min(r.minW,N.maxW),r.minH=Math.min(r.minH,N.maxH),r.minW=Math.max(r.minW,N.startMinWidth),r.minH=Math.max(r.minH,N.startMinHeight),!N.autoResize||r.minW===N.minW&&r.minH===N.minH){if(N.autoResize&&((r=e.layoutRect(r)).contentW=r.minW-N.deltaW,r.contentH=r.minH-N.deltaH),b="start"!==k.packV&&0<v?Math.floor(v/R):0,y=0,x=k.flexWidths)for(a=0;a<x.length;a++)y+=x[a];else y=E;for(w=p/y,a=0;a<E;a++)C[a]+=x?x[a]*w:w;for(c=O.top,u=0;u<R;u++){for(s=O.left,n=S[u]+b,a=0;a<E&&(i=T[B?u*E+E-1-a:u*E+a]);a++)l=i.settings,o=i.layoutRect(),t=Math.max(C[a],o.startMinWidth),o.x=s,o.y=c,"center"===(f=l.alignH||(D?D[a]||D[0]:null))?o.x=s+t/2-o.w/2:"right"===f?o.x=s+t-o.w:"stretch"===f&&(o.w=t),"center"===(f=l.alignV||(P?P[a]||P[0]:null))?o.y=c+n/2-o.h/2:"bottom"===f?o.y=c+n-o.h:"stretch"===f&&(o.h=n),i.layoutRect(o),s+=t+_,i.recalc&&i.recalc();c+=n+A}}else r.w=r.minW,r.h=r.minH,e.layoutRect(r),this.recalc(e),null===e._lastRect&&(N=e.parent())&&(N._lastRect=null,N.recalc())}}),ai=t.extend({renderHtml:function(){return this.classes.add("iframe"),this.canFocus=!1,'<iframe id="'+this._id+'" class="'+this.classes+'" tabindex="-1" src="'+(this.settings.url||"javascript:''")+'" frameborder="0"></iframe>'},src:function(e){this.getEl().src=e},html:function(e,t){var n=this,r=this.getEl().contentWindow.document.body;return r?(r.innerHTML=e,t&&t()):p.setTimeout(function(){n.html(e)}),this}}),ui=t.extend({init:function(e){this._super(e),this.classes.add("widget").add("infobox"),this.canFocus=!1},severity:function(e){this.classes.remove("error"),this.classes.remove("warning"),this.classes.remove("success"),this.classes.add(e)},help:function(e){this.state.set("help",e)},renderHtml:function(){var e=this.classPrefix;return'<div id="'+this._id+'" class="'+this.classes+'"><div id="'+this._id+'-body">'+this.encode(this.state.get("text"))+'<button role="button" tabindex="-1"><i class="'+e+"ico "+e+'i-help"></i></button></div></div>'},bindStates:function(){var t=this;return t.state.on("change:text",function(e){t.getEl("body").firstChild.data=t.encode(e.value),t.state.get("rendered")&&t.updateLayoutRect()}),t.state.on("change:help",function(e){t.classes.toggle("has-help",e.value),t.state.get("rendered")&&t.updateLayoutRect()}),t._super()}}),si=t.extend({init:function(e){this._super(e),this.classes.add("widget").add("label"),this.canFocus=!1,e.multiline&&this.classes.add("autoscroll"),e.strong&&this.classes.add("strong")},initLayoutRect:function(){var e=this._super();return this.settings.multiline&&(w.getSize(this.getEl()).width>e.maxW&&(e.minW=e.maxW,this.classes.add("multiline")),this.getEl().style.width=e.minW+"px",e.startMinH=e.h=e.minH=Math.min(e.maxH,w.getSize(this.getEl()).height)),e},repaint:function(){return this.settings.multiline||(this.getEl().style.lineHeight=this.layoutRect().h+"px"),this._super()},severity:function(e){this.classes.remove("error"),this.classes.remove("warning"),this.classes.remove("success"),this.classes.add(e)},renderHtml:function(){var e,t=this,n=t.settings.forId,r=t.settings.html||t.encode(t.state.get("text"));return(n=!n&&(e=t.settings.forName)&&(e=t.getRoot().find("#"+e)[0])?e._id:n)?'<label id="'+t._id+'" class="'+t.classes+'"'+(n?' for="'+n+'"':"")+">"+r+"</label>":'<span id="'+t._id+'" class="'+t.classes+'">'+r+"</span>"},bindStates:function(){var t=this;return t.state.on("change:text",function(e){t.innerHtml(t.encode(e.value)),t.state.get("rendered")&&t.updateLayoutRect()}),t._super()}}),ci=e.extend({Defaults:{role:"toolbar",layout:"flow"},init:function(e){this._super(e),this.classes.add("toolbar")},postRender:function(){return this.items().each(function(e){e.classes.add("toolbar-item")}),this._super()}}),li=ci.extend({Defaults:{role:"menubar",containerCls:"menubar",ariaRoot:!0,defaults:{type:"menubutton"}}}),fi=dn.extend({init:function(e){this._renderOpen=!0,this._super(e),e=this.settings,this.classes.add("menubtn"),e.fixedWidth&&this.classes.add("fixed-width"),this.aria("haspopup",!0),this.state.set("menu",e.menu||this.render())},showMenu:function(e){var t,n=this;if(n.menu&&n.menu.visible()&&!1!==e)return n.hideMenu();n.menu||(e=n.state.get("menu")||[],n.classes.add("opened"),e.length?e={type:"menu",animate:!0,items:e}:(e.type=e.type||"menu",e.animate=!0),e.renderTo?n.menu=e.parent(n).show().renderTo():n.menu=m.create(e).parent(n).renderTo(),n.fire("createmenu"),n.menu.reflow(),n.menu.on("cancel",function(e){e.control.parent()===n.menu&&(e.stopPropagation(),n.focus(),n.hideMenu())}),n.menu.on("select",function(){n.focus()}),n.menu.on("show hide",function(e){"hide"===e.type&&e.control.parent()===n&&n.classes.remove("opened-under"),e.control===n.menu&&(n.activeMenu("show"===e.type),n.classes.toggle("opened","show"===e.type)),n.aria("expanded","show"===e.type)}).fire("show")),n.menu.show(),n.menu.layoutRect({w:n.layoutRect().w}),n.menu.repaint(),n.menu.moveRel(n.getEl(),n.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"]),e=n.menu.layoutRect(),(t=n.$el.offset().top+n.layoutRect().h)>e.y&&t<e.y+e.h&&n.classes.add("opened-under"),n.fire("showmenu")},hideMenu:function(){this.menu&&(this.menu.items().each(function(e){e.hideMenu&&e.hideMenu()}),this.menu.hide())},activeMenu:function(e){this.classes.toggle("active",e)},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix,r=e.settings.icon,o=e.state.get("text"),i="",a=e.settings.image;return a=a?(r="none"," style=\"background-image: url('"+(a="string"!=typeof a?y.window.getSelection?a[0]:a[1]:a)+"')\""):"",o&&(e.classes.add("btn-has-text"),i='<span class="'+n+'txt">'+e.encode(o)+"</span>"),r=e.settings.icon?n+"ico "+n+"i-"+r:"",e.aria("role",e.parent()instanceof li?"menuitem":"button"),'<div id="'+t+'" class="'+e.classes+'" tabindex="-1" aria-labelledby="'+t+'"><button id="'+t+'-open" role="presentation" type="button" tabindex="-1">'+(r?'<i class="'+r+'"'+a+"></i>":"")+i+' <i class="'+n+'caret"></i></button></div>'},postRender:function(){var r=this;return r.on("click",function(e){e.control===r&&function(e,t){for(;e;){if(t===e)return 1;e=e.parentNode}}(e.target,r.getEl())&&(r.focus(),r.showMenu(!e.aria),e.aria)&&r.menu.items().filter(":visible")[0].focus()}),r.on("mouseenter",function(e){var t,n=e.control,e=r.parent();n&&e&&n instanceof fi&&n.parent()===e&&(e.items().filter("MenuButton").each(function(e){e.hideMenu&&e!==n&&(e.menu&&e.menu.visible()&&(t=!0),e.hideMenu())}),t)&&(n.focus(),n.showMenu())}),r._super()},bindStates:function(){var e=this;return e.state.on("change:menu",function(){e.menu&&e.menu.remove(),e.menu=null}),e._super()},remove:function(){this._super(),this.menu&&this.menu.remove()}}),di=k.extend({Defaults:{defaultType:"menuitem",border:1,layout:"stack",role:"application",bodyRole:"menu",ariaRoot:!0},init:function(e){var t,n;if(e.autohide=!0,e.constrainToViewport=!0,"function"==typeof e.items&&(e.itemsFactory=e.items,e.items=[]),e.itemDefaults)for(n=(t=e.items).length;n--;)t[n]=f.extend({},e.itemDefaults,t[n]);this._super(e),this.classes.add("menu"),e.animate&&11!==b.ie&&this.classes.add("animate")},repaint:function(){return this.classes.toggle("menu-align",!0),this._super(),this.getEl().style.height="",this.getEl("body").style.height="",this},cancel:function(){this.hideAll(),this.fire("select")},load:function(){var t,n;function r(){t.throbber&&(t.throbber.hide(),t.throbber=null)}(t=this).settings.itemsFactory&&(t.throbber||(t.throbber=new zi(t.getEl("body"),!0),0===t.items().length?(t.throbber.show(),t.fire("loading")):t.throbber.show(100,function(){t.items().remove(),t.fire("loading")}),t.on("hide close",r)),t.requestTime=n=(new Date).getTime(),t.settings.itemsFactory(function(e){0===e.length?t.hide():t.requestTime===n&&(t.getEl().style.width="",t.getEl("body").style.width="",r(),t.items().remove(),t.getEl("body").innerHTML="",t.add(e),t.renderNew(),t.fire("loaded"))}))},hideAll:function(){return this.find("menuitem").exec("hideMenu"),this._super()},preRender:function(){var t=this;return t.items().each(function(e){e=e.settings;if(e.icon||e.image||e.selectable)return!(t._hasIcons=!0)}),t.settings.itemsFactory&&t.on("postrender",function(){t.settings.itemsFactory&&t.load()}),t.on("show hide",function(e){e.control===t&&("show"===e.type?p.setTimeout(function(){t.classes.add("in")},0):t.classes.remove("in"))}),t._super()}}),mi=fi.extend({init:function(r){var o,e,i,a,n;(o=this)._super(r),r=o.settings,o._values=e=r.values,e&&(void 0!==r.value&&function e(t){for(var n=0;n<t.length;n++){if(i=t[n].selected||r.value===t[n].value)return a=a||t[n].text,o.state.set("value",t[n].value),1;if(t[n].menu&&e(t[n].menu))return 1}}(e),!i&&0<e.length&&(a=e[0].text,o.state.set("value",e[0].value)),o.state.set("menu",e)),o.state.set("text",r.text||a),o.classes.add("listbox"),o.on("select",function(e){var t=e.control;n&&(e.lastControl=n),r.multiple?t.active(!t.active()):o.value(e.control.value()),n=t})},value:function(n){return 0===arguments.length?this.state.get("value"):(void 0!==n&&(this.settings.values&&!function t(e){return De(e,function(e){return e.menu?t(e.menu):e.value===n})}(this.settings.values)?null===n&&this.state.set("value",null):this.state.set("value",n)),this)},bindStates:function(){var n=this;return n.on("show",function(e){var t;e=e.control,t=n.value(),e instanceof di&&e.items().each(function(e){e.hasMenus()||e.active(e.value()===t)})}),n.state.on("change:value",function(e){e=function e(t,n){var r,o;if(t)for(o=0;o<t.length;o++){if(t[o].value===n)return t[o];if(t[o].menu&&(r=e(t[o].menu,n)))return r}}(n.state.get("menu"),e.value);e?n.text(e.text):n.text(n.settings.text)}),n._super()}}),gi=function(e,t){var n=e._textStyle;n&&((e=e.getEl("text")).setAttribute("style",n),t)&&(e.style.color="",e.style.backgroundColor="")},hi=t.extend({Defaults:{border:0,role:"menuitem"},init:function(e){var t,n=this;n._super(e),e=n.settings,n.classes.add("menu-item"),e.menu&&n.classes.add("menu-item-expand"),e.preview&&n.classes.add("menu-item-preview"),"-"!==(t=n.state.get("text"))&&"|"!==t||(n.classes.add("menu-item-sep"),n.aria("role","separator"),n.state.set("text","-")),e.selectable&&(n.aria("role","menuitemcheckbox"),n.classes.add("menu-item-checkbox"),e.icon="selected"),e.preview||e.selectable||n.classes.add("menu-item-normal"),n.on("mousedown",function(e){e.preventDefault()}),e.menu&&!e.ariaHideMenu&&n.aria("haspopup",!0)},hasMenus:function(){return!!this.settings.menu},showMenu:function(){var t,n=this,e=n.settings,r=n.parent();r.items().each(function(e){e!==n&&e.hideMenu()}),e.menu&&((t=n.menu)?t.show():((t=e.menu).length?t={type:"menu",items:t}:t.type=t.type||"menu",r.settings.itemDefaults&&(t.itemDefaults=r.settings.itemDefaults),(t=n.menu=m.create(t).parent(n).renderTo()).reflow(),t.on("cancel",function(e){e.stopPropagation(),n.focus(),t.hide()}),t.on("show hide",function(e){e.control.items&&e.control.items().each(function(e){e.active(e.settings.selected)})}).fire("show"),t.on("hide",function(e){e.control===t&&n.classes.remove("selected")}),t.submenu=!0),t._parentMenu=r,t.classes.add("menu-sub"),e=t.testMoveRel(n.getEl(),n.isRtl()?["tl-tr","bl-br","tr-tl","br-bl"]:["tr-tl","br-bl","tl-tr","bl-br"]),t.moveRel(n.getEl(),e),e="menu-sub-"+(t.rel=e),t.classes.remove(t._lastRel).add(e),t._lastRel=e,n.classes.add("selected"),n.aria("expanded",!0))},hideMenu:function(){return this.menu&&(this.menu.items().each(function(e){e.hideMenu&&e.hideMenu()}),this.menu.hide(),this.aria("expanded",!1)),this},renderHtml:function(){var e,t,n,r,o,i,a,u,s;function c(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function l(e){var t=n.match||"";return t?e.replace(new RegExp(c(t),"gi"),function(e){return"!mce~match["+e+"]mce~match!"}):e}function f(e){return e.replace(new RegExp(c("!mce~match["),"g"),"<b>").replace(new RegExp(c("]mce~match!"),"g"),"</b>")}return t=(e=this)._id,n=e.settings,r=e.classPrefix,o=e.state.get("text"),s=e.settings.icon,i="",a=n.shortcut,u=e.encode(n.url),s&&e.parent().classes.add("menu-has-icons"),n.image&&(i=" style=\"background-image: url('"+n.image+"')\""),a=a&&function(e){var t,n,r={},r=b.mac?{alt:"&#x2325;",ctrl:"&#x2318;",shift:"&#x21E7;",meta:"&#x2318;"}:{meta:"Ctrl"};for(e=e.split("+"),t=0;t<e.length;t++)(n=r[e[t].toLowerCase()])&&(e[t]=n);return e.join("+")}(a),s=r+"ico "+r+"i-"+(e.settings.icon||"none"),s="-"!==o?'<i class="'+s+'"'+i+"></i>":"",o=f(e.encode(l(o))),u=f(e.encode(l(u))),'<div id="'+t+'" class="'+e.classes+'" tabindex="-1">'+s+("-"!==o?'<span id="'+t+'-text" class="'+r+'text">'+o+"</span>":"")+(a?'<div id="'+t+'-shortcut" class="'+r+'menu-shortcut">'+a+"</div>":"")+(n.menu?'<div class="'+r+'caret"></div>':"")+(u?'<div class="'+r+'menu-item-link">'+u+"</div>":"")+"</div>"},postRender:function(){var e,t=this,n=t.settings,r=n.textStyle;return(r="function"==typeof r?r.call(this):r)&&(e=t.getEl("text"))&&(e.setAttribute("style",r),t._textStyle=r),t.on("mouseenter click touchstart",function(e){e.control===t&&("touchstart"===e.type?(e.preventDefault(),t.fire("click",e)):n.menu||"click"!==e.type?(t.showMenu(),e.aria&&t.menu.focus(!0)):(t.fire("select"),p.requestAnimationFrame(function(){t.parent().hideAll()})))}),t._super(),t},hover:function(){return this.parent().items().each(function(e){e.classes.remove("selected")}),this.classes.toggle("selected",!0),this},active:function(e){return gi(this,e),void 0!==e&&this.aria("checked",e),this._super(e)},remove:function(){this._super(),this.menu&&this.menu.remove()}}),pi=hn.extend({Defaults:{classes:"radio",role:"radio"}}),vi=t.extend({renderHtml:function(){var e=this.classPrefix;return this.classes.add("resizehandle"),"both"===this.settings.direction&&this.classes.add("resizehandle-both"),this.canFocus=!1,'<div id="'+this._id+'" class="'+this.classes+'"><i class="'+e+"ico "+e+'i-resize"></i></div>'},postRender:function(){var t=this;t._super(),t.resizeDragHelper=new M(this._id,{start:function(){t.fire("ResizeStart")},drag:function(e){"both"!==t.settings.direction&&(e.deltaX=0),t.fire("Resize",e)},stop:function(){t.fire("ResizeEnd")}})},remove:function(){return this.resizeDragHelper&&this.resizeDragHelper.destroy(),this._super()}}),bi=t.extend({Defaults:{classes:"selectbox",role:"selectbox",options:[]},init:function(e){var n=this;n._super(e),n.settings.size&&(n.size=n.settings.size),n.settings.options&&(n._options=n.settings.options),n.on("keydown",function(e){var t;13===e.keyCode&&(e.preventDefault(),n.parents().reverse().each(function(e){if(e.toJSON)return t=e,!1}),n.fire("submit",{data:t.toJSON()}))})},options:function(e){return arguments.length?(this.state.set("options",e),this):this.state.get("options")},renderHtml:function(){var e="",t=ji(this._options);return this.size&&(e=' size = "'+this.size+'"'),'<select id="'+this._id+'" class="'+this.classes+'"'+e+">"+t+"</select>"},bindStates:function(){var t=this;return t.state.on("change:options",function(e){t.getEl().innerHTML=ji(e.value)}),t._super()}}),yi=t.extend({init:function(e){e.previewFilter||(e.previewFilter=function(e){return Math.round(100*e)/100}),this._super(e),this.classes.add("slider"),"v"===e.orientation&&this.classes.add("vertical"),this._minValue=Re(e.minValue)?e.minValue:0,this._maxValue=Re(e.maxValue)?e.maxValue:100,this._initValue=this.state.get("value")},renderHtml:function(){var e=this._id,t=this.classPrefix;return'<div id="'+e+'" class="'+this.classes+'"><div id="'+e+'-handle" class="'+t+'slider-handle" role="slider" tabindex="-1"></div></div>'},reset:function(){this.value(this._initValue).repaint()},postRender:function(){var n,e,t,r,o,i,a,u,s,c,l,f,d,m,g,h,p;function v(e){var t=n.value();t=Vi(((t+u)/(s-u)+.05*e)*(s-u)-u,u,s),n.value(t),n.fire("dragstart",{value:t}),n.fire("drag",{value:t}),n.fire("dragend",{value:t})}e=(n=this)._minValue,t=n._maxValue,a="v"===n.settings.orientation?(r="screenY",o="top",i="height","h"):(r="screenX",o="left",i="width","w"),n._super(),u=e,s=t,n.on("keydown",function(e){switch(e.keyCode){case 37:case 38:v(-1);break;case 39:case 40:v(1)}}),c=e,l=t,f=n.getEl("handle"),n._dragHelper=new M(n._id,{handle:n._id+"-handle",start:function(e){d=e[r],m=parseInt(n.getEl("handle").style[o],10),g=(n.layoutRect()[a]||100)-w.getSize(f)[i],n.fire("dragstart",{value:p})},drag:function(e){e=e[r]-d;h=Vi(m+e,0,g),f.style[o]=h+"px",p=c+h/g*(l-c),n.value(p),n.tooltip().text(""+n.settings.previewFilter(p)).show().moveRel(f,"bc tc"),n.fire("drag",{value:p})},stop:function(){n.tooltip().hide(),n.fire("dragend",{value:p})}})},repaint:function(){this._super(),$i(this,this.value())},bindStates:function(){var t=this;return t.state.on("change:value",function(e){$i(t,e.value)}),t._super()}}),xi=t.extend({renderHtml:function(){return this.classes.add("spacer"),this.canFocus=!1,'<div id="'+this._id+'" class="'+this.classes+'"></div>'}}),wi=fi.extend({Defaults:{classes:"widget btn splitbtn",role:"button"},repaint:function(){var e,t=this.getEl(),n=this.layoutRect();return this._super(),e=t.firstChild,t=t.lastChild,x(e).css({width:n.w-w.getSize(t).width,height:n.h-2}),x(t).css({height:n.h-2}),this},activeMenu:function(e){x(this.getEl().lastChild).toggleClass(this.classPrefix+"active",e)},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix,r=e.state.get("icon"),o=e.state.get("text"),i=e.settings,a="",u=i.image;return u=u?(r="none"," style=\"background-image: url('"+(u="string"!=typeof u?y.window.getSelection?u[0]:u[1]:u)+"')\""):"",r=i.icon?n+"ico "+n+"i-"+r:"",o&&(e.classes.add("btn-has-text"),a='<span class="'+n+'txt">'+e.encode(o)+"</span>"),o="boolean"==typeof i.active?' aria-pressed="'+i.active+'"':"",'<div id="'+t+'" class="'+e.classes+'" role="button"'+o+' tabindex="-1"><button type="button" hidefocus="1" tabindex="-1">'+(r?'<i class="'+r+'"'+u+"></i>":"")+a+'</button><button type="button" class="'+n+'open" hidefocus="1" tabindex="-1">'+(e._menuBtnText?(r?"":"")+e._menuBtnText:"")+' <i class="'+n+'caret"></i></button></div>'},postRender:function(){var n=this.settings.onclick;return this.on("click",function(e){var t=e.target;if(e.control===this)for(;t;){if(e.aria&&"down"!==e.aria.key||"BUTTON"===t.nodeName&&-1===t.className.indexOf("open"))return e.stopImmediatePropagation(),void(n&&n.call(this,e));t=t.parentNode}}),delete this.settings.onclick,this._super()}}),Ci=ro.extend({Defaults:{containerClass:"stack-layout",controlClass:"stack-layout-item",endClass:"break"},isNative:function(){return!0}}),Si=qt.extend({Defaults:{layout:"absolute",defaults:{type:"panel"}},activateTab:function(n){var e;this.activeTabId&&(e=this.getEl(this.activeTabId),x(e).removeClass(this.classPrefix+"active"),e.setAttribute("aria-selected","false")),this.activeTabId="t"+n,(e=this.getEl("t"+n)).setAttribute("aria-selected","true"),x(e).addClass(this.classPrefix+"active"),this.items()[n].show().fire("showtab"),this.reflow(),this.items().each(function(e,t){n!==t&&e.hide()})},renderHtml:function(){var n=this,e=n._layout,r="",o=n.classPrefix;return n.preRender(),e.preRender(n),n.items().each(function(e,t){t=n._id+"-t"+t;e.aria("role","tabpanel"),e.aria("labelledby",t),r+='<div id="'+t+'" class="'+o+'tab" unselectable="on" role="tab" aria-controls="'+e._id+'" aria-selected="false" tabIndex="-1">'+n.encode(e.settings.title)+"</div>"}),'<div id="'+n._id+'" class="'+n.classes+'" hidefocus="1" tabindex="-1"><div id="'+n._id+'-head" class="'+o+'tabs" role="tablist">'+r+'</div><div id="'+n._id+'-body" class="'+n.bodyClasses+'">'+e.renderHtml(n)+"</div></div>"},postRender:function(){var r=this;r._super(),r.settings.activeTab=r.settings.activeTab||0,r.activateTab(r.settings.activeTab),this.on("click",function(e){var t,n=e.target.parentNode;if(n&&n.id===r._id+"-head")for(t=n.childNodes.length;t--;)n.childNodes[t]===e.target&&r.activateTab(t)})},initLayoutRect:function(){var e,t,n,r=w.getSize(this.getEl("head")).width;return r=r<0?0:r,t=0,this.items().each(function(e){r=Math.max(r,e.layoutRect().minW),t=Math.max(t,e.layoutRect().minH)}),this.items().each(function(e){e.settings.x=0,e.settings.y=0,e.settings.w=r,e.settings.h=t,e.layoutRect({x:0,y:0,w:r,h:t})}),n=w.getSize(this.getEl("head")).height,this.settings.minWidth=r,this.settings.minHeight=t+n,(e=this._super()).deltaH+=n,e.innerH=e.h-e.deltaH,e}}),ki=t.extend({init:function(e){var n=this;n._super(e),n.classes.add("textbox"),e.multiline?n.classes.add("multiline"):(n.on("keydown",function(e){var t;13===e.keyCode&&(e.preventDefault(),n.parents().reverse().each(function(e){if(e.toJSON)return t=e,!1}),n.fire("submit",{data:t.toJSON()}))}),n.on("keyup",function(e){n.state.set("value",e.target.value)}))},repaint:function(){var e,t=this.getEl().style,n=this._layoutRect,r=this._lastRepaintRect||{},o=y.document;return!this.settings.multiline&&o.all&&(!o.documentMode||o.documentMode<=8)&&(t.lineHeight=+n.h+"px"),e=(o=this.borderBox).left+o.right+8,o=o.top+o.bottom+(this.settings.multiline?8:0),n.x!==r.x&&(t.left=n.x+"px",r.x=n.x),n.y!==r.y&&(t.top=n.y+"px",r.y=n.y),n.w!==r.w&&(t.width=n.w-e+"px",r.w=n.w),n.h!==r.h&&(t.height=n.h-o+"px",r.h=n.h),this._lastRepaintRect=r,this.fire("repaint",{},!1),this},renderHtml:function(){var e,t=this.settings,n={id:this._id,hidefocus:"1"};return f.each(["rows","spellcheck","maxLength","size","readonly","min","max","step","list","pattern","placeholder","required","multiple"],function(e){n[e]=t[e]}),this.disabled()&&(n.disabled="disabled"),t.subtype&&(n.type=t.subtype),(e=w.create(t.multiline?"textarea":"input",n)).value=this.state.get("value"),e.className=this.classes.toString(),e.outerHTML},value:function(e){return arguments.length?(this.state.set("value",e),this):(this.state.get("rendered")&&this.state.set("value",this.getEl().value),this.state.get("value"))},postRender:function(){var t=this;t.getEl().value=t.state.get("value"),t._super(),t.$el.on("change",function(e){t.state.set("value",e.target.value),t.fire("change",e)})},bindStates:function(){var t=this;return t.state.on("change:value",function(e){t.getEl().value!==e.value&&(t.getEl().value=e.value)}),t.state.on("change:disabled",function(e){t.getEl().disabled=e.value}),t._super()},remove:function(){this.$el.off(),this._super()}}),Ti=function(){return{Selector:Rt,Collection:Pt,ReflowQueue:It,Control:l,Factory:m,KeyboardNavigation:Bi,Container:e,DragHelper:M,Scrollable:Vt,Panel:qt,Movable:xt,Resizable:$t,FloatPanel:k,Window:sn,MessageBox:N,Tooltip:nn,Widget:t,Progress:rn,Notification:an,Layout:ln,AbsoluteLayout:fn,Button:dn,ButtonGroup:gn,Checkbox:hn,ComboBox:vn,ColorBox:bn,PanelButton:yn,ColorButton:wn,ColorPicker:Sn,Path:Tn,ElementPath:Nn,FormItem:En,Form:Rn,FieldSet:_n,FilePicker:eo,FitLayout:to,FlexLayout:no,FlowLayout:ro,FormatControls:oi,GridLayout:ii,Iframe:ai,InfoBox:ui,Label:si,Toolbar:ci,MenuBar:li,MenuButton:fi,MenuItem:hi,Throbber:zi,Menu:di,ListBox:mi,Radio:pi,ResizeHandle:vi,SelectBox:bi,Slider:yi,Spacer:xi,SplitButton:wi,StackLayout:Ci,TabPanel:Si,TextBox:ki,DropZone:kn,BrowseButton:mn}},B=function(n){n.ui?f.each(Ti(),function(e,t){n.ui[t]=e}):n.ui=Ti()},function(){f.each(Ti(),function(e,t){m.add(t,e)})}(),B(window.tinymce||{}),I.add("modern",function(e){return oi.setup(e),cn(e)})}(window),tinymce.each("tinymce,plugins/lists/plugin,plugins/advlist/plugin,plugins/attach/plugin,plugins/autolink/plugin,plugins/image/plugin,plugins/charmap/plugin,plugins/anchor/plugin,plugins/searchreplace/plugin,plugins/code/plugin,plugins/link/plugin,plugins/textcolor/plugin,plugins/media/plugin,plugins/table/plugin,plugins/paste/plugin,plugins/asciimath/plugin,plugins/asciisvg/plugin,plugins/rollups/plugin,plugins/colorpicker/plugin,plugins/snippet/plugin,themes/modern/theme".split(","),function(e){tinymce.ScriptLoader.markDone(tinyMCE.baseURL+"/"+e+".js")});
