(function(){function e(){}function b(a){var r=P.call(arguments,1);return function(){return a.apply(this,r)}}function n(a,b){if(!b)throw Error("prayer failed: "+a);}function y(a){n("a direction was passed",-1===a||1===a)}function J(a,b,g,f){function r(){l=U;var a=t.selection?"$"+t.selection.latex()+"$":"";n.select(a)}var G=a.contents().detach();g||a.addClass("mathquill-rendered-math");b.jQ=a.attr("mathquill-block-id",b.id);b.revert=function(){a.empty().unbind(".mathquill").removeClass("mathquill-rendered-math mathquill-editable mathquill-textbox").append(G)};
var t=b.cursor=ja(b);b.renderLatex(G.text());if(navigator.userAgent.match("Android"))var h=b.textarea=w('<span class="textarea"><input type="password"/></span>'),k=h.children();else h=b.textarea=w('<span class="textarea"><textarea></textarea></span>'),k=h.children();var l;b.selectionChanged=function(){l===U&&(l=setTimeout(r));da(a[0])};a.bind("selectstart.mathquill",function(a){a.target!==k[0]&&a.preventDefault();a.stopPropagation()});var H,q=t.blink;a.bind("mousedown.mathquill",function(g){function r(a){t.seek(w(a.target),
a.pageX,a.pageY);t[-1]===H[-1]&&t.parent===H.parent||t.selectFrom(H);return!1}function b(a){delete a.target;return r(a)}function E(g){H=U;t.blink=q;t.selection||(f?t.show():h.detach());a.unbind("mousemove",r);w(g.target.ownerDocument).unbind("mousemove",b).unbind("mouseup",E)}setTimeout(function(){document.activeElement!=k[0]&&k.focus()});t.blink=e;t.seek(w(g.target),g.pageX,g.pageY);H=u(t.parent,t[-1],t[1]);f||a.prepend(h);a.mousemove(r);w(g.target.ownerDocument).mousemove(b).mouseup(E);return!1});
if(f)n=L(k,{container:a,key:function(a,g){t.parent.bubble("onKey",a,g)},text:function(a){t.parent.bubble("onText",a)},cut:function(a){t.selection&&setTimeout(function(){t.prepareEdit();t.parent.bubble("redraw")});a.stopPropagation()},paste:function(a){a="$"===a.slice(0,1)&&"$"===a.slice(-1)?a.slice(1,-1):"\\text{"+a+"}";t.writeLatex(a).show()}}),a.prepend(h),a.addClass("mathquill-editable"),g&&a.addClass("mathquill-textbox"),k.focus(function(a){t.parent||t.insAtRightEnd(b);t.parent.jQ.addClass("hasCursor");
t.selection?(t.selection.jQ.removeClass("blur"),setTimeout(b.selectionChanged)):t.show();a.stopPropagation()}).blur(function(a){t.hide().parent.blur();t.selection&&t.selection.jQ.addClass("blur");a.stopPropagation()}),a.bind("focus.mathquill blur.mathquill",function(a){k.trigger(a)}).bind("click.mathquill",function(a){document.activeElement!=k[0]&&k.focus()}).blur();else{var m=function(){h.detach()},n=L(k,{container:a});a.bind("cut paste",!1).bind("copy",r).prepend('<span class="selectable">$'+b.latex()+
"$</span>");k.blur(function(){t.clearSelection();setTimeout(m)})}}function M(a,b,g){return v(Y,{ctrlSeq:a,htmlTemplate:"<"+b+" "+g+">&0</"+b+">"})}var F=window.jQuery,U,Q=Math.min,P=[].slice,A=navigator.userAgent.match("Android"),v=function(a,b,g){function f(a){return"function"===typeof a}function r(){}function e(t,E){function u(){var a=new G;f(a.init)&&a.init.apply(a,arguments);return a}function G(){}E===g&&(E=t,t=Object);u.Bare=G;var X=r[a]=t[a],h=G[a]=u[a]=new r,k;h.constructor=u;u.mixin=function(g){G[a]=
u[a]=e(u,g)[a];return u};return(u.open=function(a){k={};f(a)?k=a.call(u,h,X,u,t):"object"===typeof a&&(k=a);if("object"===typeof k)for(var g in k)b.call(k,g)&&(h[g]=k[g]);f(h.init)||(h.init=t);return u})(E)}return e}("prototype",{}.hasOwnProperty),L=function(){function a(a){var g=a.which||a.keyCode,r=b[g],e=[];a.ctrlKey&&e.push("Ctrl");a.originalEvent&&a.originalEvent.metaKey&&e.push("Meta");a.altKey&&e.push("Alt");a.shiftKey&&e.push("Shift");a=r||String.fromCharCode(g);if(!e.length&&!r)return a;
e.push(a);return e.join("-")}var b={8:"Backspace",9:"Tab",10:"Enter",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Esc",32:"Spacebar",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",45:"Insert",46:"Del",144:"NumLock"};return function(g,f){function r(a){var g=F.trim(m.val());m.val(" ");g&&a(g)}function b(g){G&&(h||A)&&l(a(G),G);h=g;v=g=t;clearTimeout(x);x=setTimeout(g)}function t(){var a=m[0];("selectionStart"in a?a.selectionStart!==a.selectionEnd:
document.selection&&"Text"===document.selection.type&&document.selection.createRange&&document.selection.createRange().parentElement()===m[0])||r(k)}function u(){r(H)}var G=null,h=null;f||(f={});var k=f.text||e,l=f.key||e,H=f.paste||e,q=f.cut||e,m=F(g),n=F(f.container||m),v=e,x;n.bind("keydown keypress input keyup focusout paste",function(){v()});n.bind({keydown:function(g){G=g;h=null;A?b():l(a(G),G)},keypress:b,focusout:function(){G=h=null},cut:q,paste:function(a){m.focus();v=u;clearTimeout(x);x=
setTimeout(u)}});return{select:function(a){v();v=e;clearTimeout(x);m.val(a);a&&m[0].select()}}}}(),D=v(function(a,b,g){function f(a,g){throw"Parse Error: "+g+" at "+(a?"'"+a+"'":"EOF");}a.init=function(a){this._=a};a.parse=function(a){return this.skip(e)._(a,function(a,g){return g},f)};a.or=function(a){n("or is passed a parser",a instanceof g);var f=this;return g(function(g,b,r){return f._(g,b,function(f){return a._(g,b,r)})})};a.then=function(a){var f=this;return g(function(b,r,t){return f._(b,function(f,
b){var E=a instanceof g?a:a(b);n("a parser is returned",E instanceof g);return E._(f,r,t)},t)})};a.many=function(){var a=this;return g(function(g,f,b){function r(a,f){g=a;E.push(f);return!0}function t(){return!1}for(var E=[];a._(g,r,t););return f(g,E)})};a.times=function(a,f){2>arguments.length&&(f=a);var b=this;return g(function(g,r,t){function E(a,f){G.push(f);g=a;return!0}function e(a,f){X=f;g=a;return!1}function u(a,g){return!1}for(var G=[],h=!0,X,k=0;k<a;k+=1)if(h=b._(g,E,e),!h)return t(g,X);
for(;k<f&&h;k+=1)h=b._(g,E,u);return r(g,G)})};a.result=function(a){return this.then(r(a))};a.atMost=function(a){return this.times(0,a)};a.atLeast=function(a){var g=this;return g.times(a).then(function(a){return g.many().map(function(g){return a.concat(g)})})};a.map=function(a){return this.then(function(g){return r(a(g))})};a.skip=function(a){return this.then(function(g){return a.result(g)})};this.string=function(a){var f=a.length,b="expected '"+a+"'";return g(function(g,r,E){var t=g.slice(0,f);return t===
a?r(g.slice(f),t):E(g,b)})};a=this.regex=function(a){n("regexp parser is anchored","^"===a.toString().charAt(1));var f="expected "+a;return g(function(g,b,r){var E=a.exec(g);return E?(r=E[0],b(g.slice(r.length),r)):r(g,f)})};var r=g.succeed=function(a){return g(function(g,f){return f(g,a)})};g.fail=function(a){return g(function(g,f,b){return b(g,a)})};g.letter=a(/^[a-z]/i);g.letters=a(/^[a-z]*/i);g.digit=a(/^[0-9]/);g.digits=a(/^[0-9]*/);g.whitespace=a(/^\s+/);g.optWhitespace=a(/^\s*/);g.any=g(function(a,
g,f){return a?g(a.slice(1),a.charAt(0)):f(a,"expected any character")});g.all=g(function(a,g,f){return g("",a)});var e=g.eof=g(function(a,g,f){return a?f(a,"expected EOF"):g(a,a)})}),w=v(F,function(a){a.insDirOf=function(a,g){return-1===a?this.insertBefore(g.first()):this.insertAfter(g.last())};a.insAtDirEnd=function(a,g){return-1===a?this.prependTo(g):this.appendTo(g)}}),u=v(function(a){a.parent=0;a[-1]=0;a[1]=0;a.init=function(a,g,f){this.parent=a;this[-1]=g;this[1]=f}}),H=v(function(a){a[-1]=0;
a[1]=0;a.parent=0;a.init=function(){this.ends={};this.ends[-1]=0;this.ends[1]=0};a.children=function(){return l(this.ends[-1],this.ends[1])};a.eachChild=function(a){return this.children().each(a)};a.foldChildren=function(a,g){return this.children().fold(a,g)};a.adopt=function(a,g,f){l(this,this).adopt(a,g,f);return this};a.disown=function(){l(this,this).disown();return this}}),l=v(function(a){function b(a,f,b){n("a parent is always present",a);var g=f?f[1]===b&&f.parent===a:a.ends[-1]===b;n("leftward is properly set up",
g);a=b?b[-1]===f&&b.parent===a:a.ends[1]===f;n("rightward is properly set up",a)}a.init=function(a,f){n("no half-empty fragments",!a===!f);this.ends={};a&&(n("left end node is passed to Fragment",a instanceof H),n("right end node is passed to Fragment",f instanceof H),n("leftEnd and rightEnd have the same parent",a.parent===f.parent),this.ends[-1]=a,this.ends[1]=f)};a.adopt=function(a,f,r){b(a,f,r);this.disowned=!1;var g=this.ends[-1];if(!g)return this;var E=this.ends[1];f||(a.ends[-1]=g);r?r[-1]=
E:a.ends[1]=E;this.ends[1][1]=r;this.each(function(g){g[-1]=f;g.parent=a;f&&(f[1]=g);f=g});return this};a.disown=function(){var a=this.ends[-1];if(!a||this.disowned)return this;this.disowned=!0;var f=this.ends[1],r=a.parent;b(r,a[-1],a);b(r,f,f[1]);a[-1]?a[-1][1]=f[1]:r.ends[-1]=f[1];f[1]?f[1][-1]=a[-1]:r.ends[1]=a[-1];return this};a.each=function(a){var g=this.ends[-1];if(!g)return this;for(;g!==this.ends[1][1]&&!1!==a.call(this,g);g=g[1]);return this};a.fold=function(a,f){this.each(function(g){a=
f.call(this,a,g)});return a}}),k=function(){var a=0;return function(){return a+=1}}(),m=v(H,function(a,b){a.init=function(a){b.init.call(this);this.id=k();m[this.id]=this};a.toString=function(){return"[MathElement "+this.id+"]"};a.bubble=function(a){for(var g=P.call(arguments,1),b=this;b&&!1!==(b[a]&&b[a].apply(b,g));b=b.parent);return this};a.postOrder=function(a){var g=P.call(arguments,1);if("string"===typeof a){var b=a;a=function(a){b in a&&a[b].apply(a,g)}}(function ka(g){g.eachChild(ka);a(g)})(this)};
a.jQ=w();a.jQadd=function(a){this.jQ=this.jQ.add(a)};this.jQize=function(a){a=w(a);a.find("*").andSelf().each(function(){var a=w(this),g=a.attr("mathquill-command-id"),b=a.attr("mathquill-block-id");g&&m[g].jQadd(a);b&&m[b].jQadd(a)});return a};a.finalizeInsert=function(){this.postOrder("finalizeTree");this.postOrder("blur");this.postOrder("respace");this[1].respace&&this[1].respace();this[-1].respace&&this[-1].respace();this.postOrder("redraw");this.bubble("redraw")}}),q=v(m,function(a,b){a.init=
function(a,f,r){b.init.call(this);this.ctrlSeq||(this.ctrlSeq=a);f&&(this.htmlTemplate=f);r&&(this.textTemplate=r)};a.replaces=function(a){a.disown();this.replacedFragment=a};a.isEmpty=function(){return this.foldChildren(!0,function(a,f){return a&&f.isEmpty()})};a.parser=function(){var a=this;return R.block.times(a.numBlocks()).map(function(g){a.blocks=g;for(var f=0;f<g.length;f+=1)g[f].adopt(a,a.ends[1],0);return a})};a.createLeftOf=function(a){var g=this.replacedFragment;this.createBlocks();m.jQize(this.html());
g&&(g.adopt(this.ends[-1],0,0),g.jQ.appendTo(this.ends[-1].jQ));a.jQ.before(this.jQ);a[-1]=this.adopt(a.parent,a[-1],a[1]);this.finalizeInsert(a);this.placeCursor(a)};a.createBlocks=function(){for(var a=this.numBlocks(),f=this.blocks=Array(a),b=0;b<a;b+=1)(f[b]=K()).adopt(this,this.ends[1],0)};a.respace=e;a.placeCursor=function(a){a.insAtRightEnd(this.foldChildren(this.ends[-1],function(a,g){return a.isEmpty()?a:g}))};a.remove=function(){this.disown();this.jQ.remove();this.postOrder(function(a){delete m[a.id]});
return this};a.numBlocks=function(){var a=this.htmlTemplate.match(/&\d+/g);return a?a.length:0};a.html=function(){var a=this.blocks,f=" mathquill-command-id="+this.id,b=this.htmlTemplate.match(/<[^<>]+>|[^<>]+/g);n("no unmatched angle brackets",b.join("")===this.htmlTemplate);for(var r=0,t=b[0];t;r+=1,t=b[r])if("/>"===t.slice(-2))b[r]=t.slice(0,-2)+f+"/>";else if("<"===t.charAt(0)){n("not an unmatched top-level close tag","/"!==t.charAt(1));b[r]=t.slice(0,-1)+f+">";var e=1;do r+=1,t=b[r],n("no missing close tags",
t),"</"===t.slice(0,2)?--e:"<"===t.charAt(0)&&"/>"!==t.slice(-2)&&(e+=1);while(0<e)}return b.join("").replace(/>&(\d+)/g,function(g,f){return" mathquill-block-id="+a[f].id+">"+a[f].join("html")})};a.latex=function(){return this.foldChildren(this.ctrlSeq,function(a,f){return a+"{"+(f.latex()||" ")+"}"})};a.textTemplate=[""];a.text=function(){var a=0;return this.foldChildren(this.textTemplate[a],function(g,b){a+=1;var f=b.text();return g&&"("===this.textTemplate[a]&&"("===f[0]&&")"===f.slice(-1)?g+
f.slice(1,-1)+this.textTemplate[a]:g+b.text()+(this.textTemplate[a]||"")})}}),O=v(q,function(a,b){a.init=function(a,f,r){r||(r=a&&1<a.length?a.slice(1):a);b.init.call(this,a,f,[r])};a.parser=function(){return D.succeed(this)};a.numBlocks=function(){return 0};a.replaces=function(a){a.remove()};a.createBlocks=e;a.latex=function(){return this.ctrlSeq};a.text=function(){return this.textTemplate};a.placeCursor=e;a.isEmpty=function(){return!0}}),K=v(m,function(b){b.join=function(a){return this.foldChildren("",
function(g,f){return g+f[a]()})};b.latex=function(){return this.join("latex")};b.text=function(){return this.ends[-1]===this.ends[1]?this.ends[-1].text():"("+this.join("text")+")"};b.isEmpty=function(){return 0===this.ends[-1]&&0===this.ends[1]};b.write=function(b,g,f){var r=g.match(/^[a-eg-zA-Z]$/)?I(g):(r=C[g]||a[g])?r(g):h(g);f&&r.replaces(f);r.createLeftOf(b)};b.focus=function(){this.jQ.addClass("hasCursor");this.jQ.removeClass("empty");return this};b.blur=function(){this.jQ.removeClass("hasCursor");
this.isEmpty()&&this.jQ.addClass("empty");return this}}),Z=v(l,function(a,b){a.init=function(a,f){b.init.call(this,a,f||a);this.jQ=this.fold(w(),function(a,g){return g.jQ.add(a)})};a.latex=function(){return this.fold("",function(a,f){return a+f.latex()})};a.remove=function(){this.jQ.remove();this.each(function(a){a.postOrder(function(a){delete m[a.id]})});return this.disown()}}),B=v(K,function(a,b){a.latex=function(){return b.latex.call(this).replace(/(\\[a-z]+) (?![a-z])/ig,"$1")};a.text=function(){return this.foldChildren("",
function(a,f){return a+f.text()})};a.renderLatex=function(a){this.jQ.children().slice(1).remove();this.ends[-1]=this.ends[1]=0;delete this.cursor.selection;this.cursor.insAtRightEnd(this).writeLatex(a)};a.onKey=function(a,f){switch(a){case "Ctrl-Shift-Backspace":case "Ctrl-Backspace":for(;this.cursor[-1]||this.cursor.selection;)this.cursor.backspace();break;case "Shift-Backspace":case "Backspace":this.cursor.backspace();break;case "Esc":case "Tab":case "Spacebar":var g=this.cursor.parent;if(g===this.cursor.root){"Spacebar"===
a&&f.preventDefault();return}this.cursor.prepareMove();g[1]?this.cursor.insAtLeftEnd(g[1]):this.cursor.insRightOf(g.parent);break;case "Shift-Tab":case "Shift-Esc":case "Shift-Spacebar":g=this.cursor.parent;if(g===this.cursor.root){"Shift-Spacebar"===a&&f.preventDefault();return}this.cursor.prepareMove();g[-1]?this.cursor.insAtRightEnd(g[-1]):this.cursor.insLeftOf(g.parent);break;case "Enter":"function"===typeof savemathquill&&savemathquill();break;case "End":this.cursor.prepareMove().insAtRightEnd(this.cursor.parent);
break;case "Ctrl-End":this.cursor.prepareMove().insAtRightEnd(this);break;case "Shift-End":for(;this.cursor[1];)this.cursor.selectRight();break;case "Ctrl-Shift-End":for(;this.cursor[1]||this.cursor.parent!==this;)this.cursor.selectRight();break;case "Home":this.cursor.prepareMove().insAtLeftEnd(this.cursor.parent);break;case "Ctrl-Home":this.cursor.prepareMove().insAtLeftEnd(this);break;case "Shift-Home":for(;this.cursor[-1];)this.cursor.selectLeft();break;case "Ctrl-Shift-Home":for(;this.cursor[-1]||
this.cursor.parent!==this;)this.cursor.selectLeft();break;case "Left":this.cursor.moveLeft();break;case "Shift-Left":this.cursor.selectLeft();break;case "Ctrl-Left":break;case "Right":this.cursor.moveRight();break;case "Shift-Right":this.cursor.selectRight();break;case "Ctrl-Right":break;case "Up":this.cursor.moveUp();break;case "Down":this.cursor.moveDown();break;case "Shift-Up":if(this.cursor[-1])for(;this.cursor[-1];)this.cursor.selectLeft();else this.cursor.selectLeft();case "Shift-Down":if(this.cursor[1])for(;this.cursor[1];)this.cursor.selectRight();
else this.cursor.selectRight();case "Ctrl-Up":break;case "Ctrl-Down":break;case "Ctrl-Shift-Del":case "Ctrl-Del":for(;this.cursor[1]||this.cursor.selection;)this.cursor.deleteForward();break;case "Shift-Del":case "Del":this.cursor.deleteForward();break;case "Meta-A":case "Ctrl-A":if(this!==this.cursor.root)return;for(this.cursor.prepareMove().insAtRightEnd(this);this.cursor[-1];)this.cursor.selectLeft();break;default:return!1}f.preventDefault();return!1};a.onText=function(a){this.cursor.write(a);
return!1}}),ba=v(q,function(a,b){a.init=function(a){b.init.call(this,"$");this.cursor=a};a.htmlTemplate='<span class="mathquill-rendered-math">&0</span>';a.createBlocks=function(){this.ends[-1]=this.ends[1]=B();this.blocks=[this.ends[-1]];this.ends[-1].parent=this;this.ends[-1].cursor=this.cursor;this.ends[-1].write=function(a,f,b){"$"!==f?K.prototype.write.call(this,a,f,b):this.isEmpty()?(a.insRightOf(this.parent).backspace().show(),h("\\$","$").createLeftOf(a)):a[1]?a[-1]?K.prototype.write.call(this,
a,f,b):a.insLeftOf(this.parent):a.insRightOf(this.parent)}};a.latex=function(){return"$"+this.ends[-1].latex()+"$"}}),la=v(K,function(a){a.renderLatex=function(a){var g=this.cursor;this.jQ.children().slice(1).remove();this.ends[-1]=this.ends[1]=0;delete g.selection;g.show().insAtRightEnd(this);var f=D.regex,b=D.string,r=D.eof,t=D.all,e=b("$").then(R).skip(b("$").or(r)).map(function(a){var f=ba(g);f.createBlocks();var b=f.ends[-1];a.children().adopt(b,0,0);return f});f=b("\\$").result("$").or(f(/^[^$]/)).map(h);
if(a=e.or(f).many().skip(r).or(t.result(!1)).parse(a)){for(r=0;r<a.length;r+=1)a[r].adopt(this,this.ends[1],0);a=this.join("html");m.jQize(a).appendTo(this.jQ);this.finalizeInsert()}};a.onKey=function(a){"Spacebar"!==a&&"Shift-Spacebar"!==a&&B.prototype.onKey.apply(this,arguments)};a.onText=B.prototype.onText;a.write=function(a,g,f){f&&f.remove();if("$"===g)ba(a).createLeftOf(a);else{var b;"<"===g?b="&lt;":">"===g&&(b="&gt;");h(g,b).createLeftOf(a)}}}),C={},a={},da=e,z=document.createElement("div").style,
S={transform:1,WebkitTransform:1,MozTransform:1,OTransform:1,msTransform:1},ca;for(ca in S)if(ca in z){var ea=ca;break}if(ea)var W=function(a,b,g){a.css(ea,"scale("+b+","+g+")")};else"filter"in z?(da=function(a){a.className=a.className},W=function(a,b,g){function f(){a.css("marginRight",(1+a.width())*(b-1)/b+"px")}b/=1+(g-1)/2;a.addClass("matrixed").css({fontSize:g+.05+"em",marginTop:"-.05em",filter:"progid:DXImageTransform.Microsoft.Matrix(M11="+b+",SizingMethod='auto expand')"});f();var r=setInterval(f);
w(window).load(function(){clearTimeout(r);f()})}):W=function(a,b,g){a.css("fontSize",g+"em")};z=v(q,function(a,b){a.init=function(a,f,r){b.init.call(this,a,"<"+f+" "+r+">&0</"+f+">")}});a.mathrm=b(z,"\\mathrm","span",'class="roman font"');a.mathit=b(z,"\\mathit","i",'class="font"');a.mathbf=b(z,"\\mathbf","b",'class="font"');a.mathsf=b(z,"\\mathsf","span",'class="sans-serif font"');a.mathtt=b(z,"\\mathtt","span",'class="monospace font"');a.underline=b(z,"\\underline","span",'class="non-leaf underline"');
a.overline=a.bar=b(z,"\\overline","span",'class="non-leaf overline"');var N=v(q,function(a,b){a.init=function(a,f,r){b.init.call(this,a,"<"+f+' class="non-leaf">&0</'+f+">",[r])};a.finalizeTree=function(){function a(a){var f=this.parent,g=a;do{if(g[1])return a.insLeftOf(f),!1;g=g.parent.parent}while(g!==f);a.insRightOf(f);return!1}n("SupSub is only _ and ^","^"===this.ctrlSeq||"_"===this.ctrlSeq);"_"===this.ctrlSeq?(this.down=this.ends[-1],this.ends[-1].up=a):(this.up=this.ends[-1],this.ends[-1].down=
a)};a.latex=function(){var a=this.ends[-1].latex();return 1===a.length?this.ctrlSeq+a:this.ctrlSeq+"{"+(a||" ")+"}"};a.redraw=function(){this[-1]&&this[-1].respace();this[-1]instanceof N||(this.respace(),!this[1]||this[1]instanceof N||this[1].respace())};a.respace=function(){"\\int "===this[-1].ctrlSeq||this[-1]instanceof N&&this[-1].ctrlSeq!=this.ctrlSeq&&this[-1][-1]&&"\\int "===this[-1][-1].ctrlSeq?this.limit||(this.limit=!0,this.jQ.addClass("limit")):this.limit&&(this.limit=!1,this.jQ.removeClass("limit"));
if(this.respaced=this[-1]instanceof N&&this[-1].ctrlSeq!=this.ctrlSeq&&!this[-1].respaced){var a=+this.jQ.css("fontSize").slice(0,-2),f=this[-1].jQ.outerWidth(),b=this.jQ.outerWidth();this.jQ.css({left:(this.limit&&"_"===this.ctrlSeq?-.25:0)-f/a+"em",marginRight:.1-Q(b,f)/a+"em"})}else this.limit&&"_"===this.ctrlSeq?this.jQ.css({left:"-.25em",marginRight:""}):this.jQ.css({left:"",marginRight:""});this[1]instanceof N&&this[1].respace();return this}});a.subscript=a._=b(N,"_","sub","_");a.superscript=
a.supscript=a["^"]=b(N,"^","sup","**");z=a.frac=a.dfrac=a.cfrac=a.fraction=v(q,function(a,b){a.ctrlSeq="\\frac";a.htmlTemplate='<span class="fraction non-leaf"><span class="numerator">&0</span><span class="denominator">&1</span><span style="display:inline-block;width:0">&nbsp;</span></span>';a.textTemplate=["(","/",")"];a.finalizeTree=function(){this.up=this.ends[1].up=this.ends[-1];this.down=this.ends[-1].down=this.ends[1]};a.redraw=function(){if(F.browser.msie&&7>=parseInt(F.browser.version,10)){var a=
this.jQ,f=a.children(".numerator");a=a.children(".denominator");f.css("width","auto");a.css("width","auto");var b=Math.max(f.width(),a.width());f.css("width",b+"px");a.css("width",b+"px")}}});var ma=a.over=C["/"]=v(z,function(a,b){a.createLeftOf=function(a){if(!this.replacedFragment){for(var f=a[-1];f&&!(f instanceof x||f instanceof Y||f instanceof V||-1<",;:".indexOf(f.ctrlSeq));)f=f[-1];f instanceof V&&f[1]instanceof N&&(f=f[1],f[1]instanceof N&&f[1].ctrlSeq!=f.ctrlSeq&&(f=f[1]));f!==a[-1]&&(this.replaces(Z(f[1]||
a.parent.ends[-1],a[-1])),a[-1]=f)}b.createLeftOf.call(this,a)}});z=a.sqrt=a["\u00e2\u02c6\u0161"]=v(q,function(a,b){a.ctrlSeq="\\sqrt";a.htmlTemplate='<span class="non-leaf"><span class="scaled sqrt-prefix">&radic;</span><span class="non-leaf sqrt-stem">&0</span></span>';a.textTemplate=["sqrt(",")"];a.parser=function(){return R.optBlock.then(function(a){return R.block.map(function(f){var b=na();b.blocks=[a,f];a.adopt(b,0,0);f.adopt(b,a,0);return b})}).or(b.parser.call(this))};a.redraw=function(){var a=
this.ends[1].jQ;W(a.prev(),1,a.innerHeight()/+a.css("fontSize").slice(0,-2)-.1)}});a.vec=v(q,function(a,b){a.ctrlSeq="\\vec";a.htmlTemplate='<span class="non-leaf"><span class="vector-prefix">&rarr;</span><span class="vector-stem">&0</span></span>';a.textTemplate=["vec(",")"]});var na=a.nthroot=v(z,function(a,b){a.htmlTemplate='<sup class="nthroot non-leaf">&0</sup><span class="scaled"><span class="sqrt-prefix scaled">&radic;</span><span class="sqrt-stem non-leaf">&1</span></span>';a.textTemplate=
["sqrt[","](",")"];a.latex=function(){return"\\sqrt["+this.ends[-1].latex()+"]{"+this.ends[1].latex()+"}"}}),T=v(q,function(a,b){a.init=function(a,f,r,e){b.init.call(this,"\\left"+r,'<span class="non-leaf"><span class="scaled paren">'+a+'</span><span class="non-leaf">&0</span><span class="scaled paren">'+f+"</span></span>",[a,f]);this.end="\\right"+e};a.jQadd=function(){b.jQadd.apply(this,arguments);var a=this.jQ;this.bracketjQs=a.children(":first").add(a.children(":last"))};a.latex=function(){return this.ctrlSeq+
this.ends[-1].latex()+this.end};a.redraw=function(){var a=this.ends[-1].jQ;a=a.outerHeight()/+a.css("fontSize").slice(0,-2);W(this.bracketjQs,Q(1+.2*(a-1),1.2),1.05*a)}});a.left=v(q,function(a){a.parser=function(){var a=D.regex,b=D.string,f=D.succeed,r=D.optWhitespace;return r.then(a(/^(?:[([|]|\\\{)/)).then(function(g){"\\"===g.charAt(0)&&(g=g.slice(1));var t=C[g]();return R.map(function(a){t.blocks=[a];a.adopt(t,0,0)}).then(b("\\right")).skip(r).then(a(/^(?:[\])|]|\\\})/)).then(function(a){return a.slice(-1)!==
t.end.slice(-1)?D.fail("open doesn't match close"):f(t)})})}});a.right=v(q,function(a){a.parser=function(){return D.fail("unmatched \\right")}});a.intervalopenleft=b(T,"(","]","(","]");a.intervalopenright=b(T,"[",")","[",")");a.lbrace=C["{"]=b(T,"{","}","\\{","\\}");a.langle=a.lang=b(T,"&lang;","&rang;","\\langle ","\\rangle ");var aa=v(T,function(a,b){a.createLeftOf=function(a){a[1]||!a.parent.parent||a.parent.parent.end!==this.end||this.replacedFragment?b.createLeftOf.call(this,a):a.insRightOf(a.parent.parent)};
a.placeCursor=function(a){this.ends[-1].blur();a.insRightOf(this)}});a.rbrace=C["}"]=b(aa,"{","}","\\{","\\}");a.rangle=a.rang=b(aa,"&lang;","&rang;","\\langle ","\\rangle ");S=function(a,b){a.init=function(a,f){b.init.call(this,a,f,a,f)}};z=v(T,S);a.lparen=C["("]=b(z,"(",")");a.lbrack=a.lbracket=C["["]=b(z,"[","]");S=v(aa,S);a.rparen=C[")"]=b(S,"(",")");a.rbrack=a.rbracket=C["]"]=b(S,"[","]");a.lpipe=a.rpipe=C["|"]=v(z,function(a,b){a.init=function(){b.init.call(this,"|","|")};a.createLeftOf=aa.prototype.createLeftOf});
var Y=C.$=a.text=a.textnormal=a.textrm=a.textup=a.textmd=v(q,function(a,b){a.ctrlSeq="\\text";a.htmlTemplate='<span class="text">&0</span>';a.replaces=function(a){a instanceof Z?this.replacedText=a.remove().jQ.text():"string"===typeof a&&(this.replacedText=a)};a.textTemplate=['"','"'];a.parser=function(){var a=this,b=D.string,e=D.regex;return D.optWhitespace.then(b("{")).then(e(/^[^}]*/)).skip(b("}")).map(function(b){a.createBlocks();for(var f=a.ends[-1],g=0;g<b.length;g+=1)h(b.charAt(g)).adopt(f,
f.ends[1],0);return a})};a.createBlocks=function(){this.ends[-1]=this.ends[1]=oa();this.blocks=[this.ends[-1]];this.ends[-1].parent=this};a.finalizeInsert=function(){this.ends[-1].blur=function(){delete this.blur;return this};b.finalizeInsert.call(this)};a.createLeftOf=function(a){b.createLeftOf.call(this,this.cursor=a);if(this.replacedText)for(var f=0;f<this.replacedText.length;f+=1)this.ends[-1].write(a,this.replacedText.charAt(f))}}),oa=v(K,function(a,b){a.onKey=function(a,b){if("Spacebar"===a||
"Shift-Spacebar"===a)return!1};a.deleteOutOf=function(a,b){this.isEmpty()&&b.insRightOf(this.parent)};a.write=function(a,b,e){e&&e.remove();if("$"!==b){var f;"<"===b?f="&lt;":">"===b&&(f="&gt;");h(b,f).createLeftOf(a)}else this.isEmpty()?(a.insRightOf(this.parent).backspace(),h("\\$","$").createLeftOf(a)):a[1]?a[-1]?(b=Y(),b.replaces(Z(a[1],this.ends[1])),a.insRightOf(this.parent),b.adopt=function(){delete this.adopt;this.adopt.apply(this,arguments);this[-1]=0},b.createLeftOf(a),b[-1]=this.parent,
a.insLeftOf(b)):a.insLeftOf(this.parent):a.insRightOf(this.parent);return!1};a.blur=function(){this.jQ.removeClass("hasCursor");if(this.isEmpty()){var a=this.parent,b=a.cursor;b.parent===this?this.jQ.addClass("empty"):(b.hide(),a.remove(),b[1]===a?b[1]=a[1]:b[-1]===a&&(b[-1]=a[-1]),b.show().parent.bubble("redraw"))}return this};a.focus=function(){b.focus.call(this);var a=this.parent;if(a[1].ctrlSeq===a.ctrlSeq){var f=this,e=a.cursor;a=a[1].ends[-1];a.eachChild(function(a){a.parent=f;a.jQ.appendTo(f.jQ)});
this.ends[1]?this.ends[1][1]=a.ends[-1]:this.ends[-1]=a.ends[-1];a.ends[-1][-1]=this.ends[1];this.ends[1]=a.ends[1];a.parent.remove();e[-1]?e.insRightOf(e[-1]):e.insAtLeftEnd(this);e.parent.bubble("redraw")}else a[-1].ctrlSeq===a.ctrlSeq&&(e=a.cursor,e[-1]?a[-1].ends[-1].focus():e.insAtRightEnd(a[-1].ends[-1]));return this}});a.em=a.italic=a.italics=a.emph=a.textit=a.textsl=M("\\textit","i",'class="text"');a.strong=a.bold=a.textbf=M("\\textbf","b",'class="text"');a.sf=a.textsf=M("\\textsf","span",
'class="sans-serif text"');a.tt=a.texttt=M("\\texttt","span",'class="monospace text"');a.textsc=M("\\textsc","span",'style="font-variant:small-caps" class="text"');a.uppercase=M("\\uppercase","span",'style="text-transform:uppercase" class="text"');a.lowercase=M("\\lowercase","span",'style="text-transform:lowercase" class="text"');C["\\"]=v(q,function(a,b){a.ctrlSeq="\\";a.replaces=function(a){this._replacedFragment=a.disown();this.isEmpty=function(){return!1}};a.htmlTemplate='<span class="latex-command-input non-leaf">\\<span>&0</span></span>';
a.textTemplate=["\\"];a.createBlocks=function(){b.createBlocks.call(this);this.ends[-1].focus=function(){this.parent.jQ.addClass("hasCursor");this.isEmpty()&&this.parent.jQ.removeClass("empty");return this};this.ends[-1].blur=function(){this.parent.jQ.removeClass("hasCursor");this.isEmpty()&&this.parent.jQ.addClass("empty");return this}};a.createLeftOf=function(a){b.createLeftOf.call(this,a);this.cursor=a.insAtRightEnd(this.ends[-1]);if(this._replacedFragment){var f=this.jQ[0];this.jQ=this._replacedFragment.jQ.addClass("blur").bind("mousedown mousemove",
function(a){w(a.target=f).trigger(a);return!1}).insertBefore(this.jQ).add(this.jQ)}this.ends[-1].write=function(a,b,f){f&&f.remove();b.match(/[a-z]/i)?h(b).createLeftOf(a):(this.parent.renderCommand(),"\\"===b&&this.isEmpty()||this.parent.parent.write(a,b))}};a.latex=function(){return"\\"+this.ends[-1].latex()+" "};a.onKey=function(a,b){if("Tab"===a||"Enter"===a||"Spacebar"===a)return this.renderCommand(),b.preventDefault(),!1};a.renderCommand=function(){this.jQ=this.jQ.last();this.remove();this[1]?
this.cursor.insLeftOf(this[1]):this.cursor.insAtRightEnd(this.parent);var a=this.ends[-1].latex();a||(a="backslash");this.cursor.insertCmd(a,this._replacedFragment)}});z=a.binom=a.binomial=v(q,function(a,b){a.ctrlSeq="\\binom";a.htmlTemplate='<span class="paren scaled">(</span><span class="non-leaf"><span class="array non-leaf"><span>&0</span><span>&1</span></span></span><span class="paren scaled">)</span>';a.textTemplate=["choose(",",",")"];a.redraw=function(){var a=this.jQ.eq(1);a=a.outerHeight()/
+a.css("fontSize").slice(0,-2);var b=this.jQ.filter(".paren");W(b,Q(1+.2*(a-1),1.2),1.05*a)}});a.choose=v(z,function(a){a.createLeftOf=ma.prototype.createLeftOf});a.vector=v(q,function(a,b){a.ctrlSeq="\\vector";a.htmlTemplate='<span class="array"><span>&0</span></span>';a.latex=function(){return"\\begin{matrix}"+this.foldChildren([],function(a,b){a.push(b.latex());return a}).join("\\\\")+"\\end{matrix}"};a.text=function(){return"["+this.foldChildren([],function(a,b){a.push(b.text());return a}).join()+
"]"};a.createLeftOf=function(a){b.createLeftOf.call(this,this.cursor=a)};a.onKey=function(a,b){var f=this.cursor.parent;if(f.parent===this){if("Enter"===a){var g=K();g.parent=this;g.jQ=w("<span></span>").attr("mathquill-block-id",g.id).insertAfter(f.jQ);f[1]?f[1][-1]=g:this.ends[1]=g;g[1]=f[1];f[1]=g;g[-1]=f;this.bubble("redraw").cursor.insAtRightEnd(g);b.preventDefault();return!1}if("Tab"===a&&!f[1]){if(f.isEmpty()){if(f[-1])return this.cursor.insRightOf(this),delete f[-1][1],this.ends[1]=f[-1],
f.jQ.remove(),this.bubble("redraw"),b.preventDefault(),!1;return}g=K();g.parent=this;g.jQ=w("<span></span>").attr("mathquill-block-id",g.id).appendTo(this.jQ);this.ends[1]=g;f[1]=g;g[-1]=f;this.bubble("redraw").cursor.insAtRightEnd(g);b.preventDefault();return!1}if(8===b.which){if(f.isEmpty())return f[-1]?(this.cursor.insAtRightEnd(f[-1]),f[-1][1]=f[1]):(this.cursor.insLeftOf(this),this.ends[-1]=f[1]),f[1]?f[1][-1]=f[-1]:this.ends[1]=f[-1],f.jQ.remove(),this.isEmpty()?this.cursor.deleteForward():
this.bubble("redraw"),b.preventDefault(),!1;if(!this.cursor[-1])return b.preventDefault(),!1}}}});a.editable=v(ba,function(a,b){a.init=function(){q.prototype.init.call(this,"\\editable")};a.jQadd=function(){b.jQadd.apply(this,arguments);var a=this.ends[-1].disown(),f=this.jQ.children().detach();this.ends[-1]=this.ends[1]=B();this.blocks=[this.ends[-1]];this.ends[-1].parent=this;J(this.jQ,this.ends[-1],!1,!0);this.cursor=this.ends[-1].cursor;a.children().adopt(this.ends[-1],0,0);f.appendTo(this.ends[-1].jQ);
this.ends[-1].cursor.insAtRightEnd(this.ends[-1])};a.latex=function(){return this.ends[-1].latex()};a.text=function(){return this.ends[-1].text()}});a.f=b(O,"f",'<var class="florin">&fnof;</var><span style="display:inline-block;width:0">&nbsp;</span>');var I=v(O,function(a,b){a.init=function(a,f){b.init.call(this,a,"<var>"+(f||a)+"</var>")};a.text=function(){var a=this.ctrlSeq;!this[-1]||this[-1]instanceof I||this[-1]instanceof x||(a="*"+a);!this[1]||this[1]instanceof x||"^"===this[1].ctrlSeq||(a+=
"*");return a};a.createLeftOf=function(a){var b=this.ctrlSeq;for(d=a[-1];d&&d instanceof I;)b=d.ctrlSeq+b,d=d[-1];var g;if(g=b.match(/(sqrt|root|arcsin|arccos|arctan|sin|cos|tan|sec|csc|cot|log|ln)/)){for(b=0;b<g[0].length-1;b++)a.selectLeft();"root"==g[0]&&(g[0]="nthroot{3}");g[0].match(/(sqrt|root)/)?a.writeLatex("\\"+g[0]+"{}").parent.blur():a.writeLatex("\\"+g[0]+"\\left(\\right)").parent.blur();a.moveLeft()}else(g=b.match(/(pi|^oo)$/))?("oo"==g[0]&&(g[0]="infty"),a.selectLeft(),a.writeLatex("\\"+
g[0]).parent.blur()):q.prototype.createLeftOf.apply(this,arguments)}}),h=v(O,function(a,b){a.init=function(a,f){b.init.call(this,a,"<span>"+(f||a)+"</span>")}});C[" "]=b(h,"\\:"," ");a.prime=C["'"]=b(h,"'","&prime;");z=v(O,function(a,b){a.init=function(a,f){b.init.call(this,a,'<span class="nonSymbola">'+(f||a)+"</span>")}});a["@"]=z;a["&"]=b(z,"\\&","&amp;");a["%"]=b(z,"\\%","%");a.alpha=a.beta=a.gamma=a.delta=a.zeta=a.eta=a.theta=a.iota=a.kappa=a.mu=a.nu=a.xi=a.rho=a.sigma=a.tau=a.chi=a.psi=a.omega=
v(I,function(a,b){a.init=function(a){b.init.call(this,"\\"+a+" ","&"+a+";")}});a.phi=b(I,"\\phi ","&#981;");a.phiv=a.varphi=b(I,"\\varphi ","&phi;");a.epsilon=b(I,"\\epsilon ","&#1013;");a.epsiv=a.varepsilon=b(I,"\\varepsilon ","&epsilon;");a.piv=a.varpi=b(I,"\\varpi ","&piv;");a.sigmaf=a.sigmav=a.varsigma=b(I,"\\varsigma ","&sigmaf;");a.thetav=a.vartheta=a.thetasym=b(I,"\\vartheta ","&thetasym;");a.upsilon=a.upsi=b(I,"\\upsilon ","&upsilon;");a.gammad=a.Gammad=a.digamma=b(I,"\\digamma ","&#989;");
a.kappav=a.varkappa=b(I,"\\varkappa ","&#1008;");a.rhov=a.varrho=b(I,"\\varrho ","&#1009;");a.pi=a["\u00cf\u20ac"]=b(z,"\\pi ","&pi;");a.lambda=b(z,"\\lambda ","&lambda;");a.Upsilon=a.Upsi=a.upsih=a.Upsih=b(O,"\\Upsilon ",'<var style="font-family: serif">&upsih;</var>');a.Gamma=a.Delta=a.Theta=a.Lambda=a.Xi=a.Pi=a.Sigma=a.Phi=a.Psi=a.Omega=a.forall=v(h,function(a,b){a.init=function(a){b.init.call(this,"\\"+a+" ","&"+a+";")}});z=v(q,function(a){a.init=function(a){this.latex=a};a.createLeftOf=function(a){a.writeLatex(this.latex)};
a.parser=function(){var a=R.parse(this.latex).children();return D.succeed(a)}});a["\u00b9"]=b(z,"^1");a["\u00b2"]=b(z,"^2");a["\u00b3"]=b(z,"^3");a["\u00bc"]=b(z,"\\frac14");a["\u00bd"]=b(z,"\\frac12");a["\u00be"]=b(z,"\\frac34");var x=v(O,function(a,b){a.init=function(a,f,e){b.init.call(this,a,'<span class="binary-operator">'+f+"</span>",e)}});z=v(x,function(a){a.init=h.prototype.init;a.respace=function(){this.jQ[0].className=this[-1]?this[-1]instanceof x&&this[1]&&!(this[1]instanceof x)?"unary-operator":
"binary-operator":"";return this}});a["+"]=b(z,"+","+");a["\u2013"]=a["-"]=b(z,"-","&minus;");a["\u00b1"]=a.pm=a.plusmn=a.plusminus=b(z,"\\pm ","&plusmn;");a.mp=a.mnplus=a.minusplus=b(z,"\\mp ","&#8723;");C["*"]=a.sdot=a.cdot=b(x,"\\cdot ","&middot;");a["="]=b(x,"=","=");a["<"]=b(x,"<","&lt;");a[">"]=b(x,">","&gt;");a.notin=a.sim=a.cong=a.equiv=a.oplus=a.otimes=v(x,function(a,b){a.init=function(a){b.init.call(this,"\\"+a+" ","&"+a+";")}});a.times=b(x,"\\times ","&times;","[x]");a["\u00f7"]=a.div=
a.divide=a.divides=b(x,"\\div ","&divide;","[/]");a["\u2260"]=a.ne=a.neq=b(x,"\\ne ","&ne;");a.ast=a.star=a.loast=a.lowast=b(x,"\\ast ","&lowast;");a.therefor=a.therefore=b(x,"\\therefore ","&there4;");a.cuz=a.because=b(x,"\\because ","&#8757;");a.prop=a.propto=b(x,"\\propto ","&prop;");a["\u2248"]=a.asymp=a.approx=b(x,"\\approx ","&asymp;");a.lt=b(x,"<","&lt;");a.gt=b(x,">","&gt;");a["\u2264"]=a.le=a.leq=b(x,"\\le ","&le;");a["\u2265"]=a.ge=a.geq=b(x,"\\ge ","&ge;");a.isin=a["in"]=b(x,"\\in ","&isin;");
a.ni=a.contains=b(x,"\\ni ","&ni;");a.notni=a.niton=a.notcontains=a.doesnotcontain=b(x,"\\not\\ni ","&#8716;");a.sub=a.subset=b(x,"\\subset ","&sub;");a.sup=a.supset=a.superset=b(x,"\\supset ","&sup;");a.nsub=a.notsub=a.nsubset=a.notsubset=b(x,"\\not\\subset ","&#8836;");a.nsup=a.notsup=a.nsupset=a.notsupset=a.nsuperset=a.notsuperset=b(x,"\\not\\supset ","&#8837;");a.sube=a.subeq=a.subsete=a.subseteq=b(x,"\\subseteq ","&sube;");a.supe=a.supeq=a.supsete=a.supseteq=a.supersete=a.superseteq=b(x,"\\supseteq ",
"&supe;");a.nsube=a.nsubeq=a.notsube=a.notsubeq=a.nsubsete=a.nsubseteq=a.notsubsete=a.notsubseteq=b(x,"\\not\\subseteq ","&#8840;");a.nsupe=a.nsupeq=a.notsupe=a.notsupeq=a.nsupsete=a.nsupseteq=a.notsupsete=a.notsupseteq=a.nsupersete=a.nsuperseteq=a.notsupersete=a.notsuperseteq=b(x,"\\not\\supseteq ","&#8841;");var V=v(O,function(a,b){a.init=function(a,f){b.init.call(this,a,"<big>"+f+"</big>")}});a["\u2211"]=a.sum=a.summation=b(V,"\\sum ","&sum;");a["\u220f"]=a.prod=a.product=b(V,"\\prod ","&prod;");
a.coprod=a.coproduct=b(V,"\\coprod ","&#8720;");a["\u222b"]=a["int"]=a.integral=b(V,"\\int ","&int;");a.N=a.naturals=a.Naturals=b(h,"\\mathbb{N}","&#8469;");a.P=a.primes=a.Primes=a.projective=a.Projective=a.probability=a.Probability=b(h,"\\mathbb{P}","&#8473;");a.Z=a.integers=a.Integers=b(h,"\\mathbb{Z}","&#8484;");a.Q=a.rationals=a.Rationals=b(h,"\\mathbb{Q}","&#8474;");a.R=a.reals=a.Reals=b(h,"\\mathbb{R}","&#8477;");a.C=a.complex=a.Complex=a.complexes=a.Complexes=a.complexplane=a.Complexplane=
a.ComplexPlane=b(h,"\\mathbb{C}","&#8450;");a.H=a.Hamiltonian=a.quaternions=a.Quaternions=b(h,"\\mathbb{H}","&#8461;");a.quad=a.emsp=b(h,"\\quad ","    ");a.qquad=b(h,"\\qquad ","        ");a.diamond=b(h,"\\diamond ","&#9671;");a.bigtriangleup=b(h,"\\bigtriangleup ","&#9651;");a.ominus=b(h,"\\ominus ","&#8854;");a.uplus=b(h,"\\uplus ","&#8846;");a.bigtriangledown=b(h,"\\bigtriangledown ","&#9661;");a.sqcap=b(h,"\\sqcap ","&#8851;");a.triangleleft=b(h,"\\triangleleft ","&#8882;");a.sqcup=b(h,"\\sqcup ",
"&#8852;");a.triangleright=b(h,"\\triangleright ","&#8883;");a.odot=b(h,"\\odot ","&#8857;");a.bigcirc=b(h,"\\bigcirc ","&#9711;");a.dagger=b(h,"\\dagger ","&#0134;");a.ddagger=b(h,"\\ddagger ","&#135;");a.wr=b(h,"\\wr ","&#8768;");a.amalg=b(h,"\\amalg ","&#8720;");a.models=b(h,"\\models ","&#8872;");a.prec=b(h,"\\prec ","&#8826;");a.succ=b(h,"\\succ ","&#8827;");a.preceq=b(h,"\\preceq ","&#8828;");a.succeq=b(h,"\\succeq ","&#8829;");a.simeq=b(h,"\\simeq ","&#8771;");a.mid=b(h,"\\mid ","&#8739;");
a.ll=b(h,"\\ll ","&#8810;");a.gg=b(h,"\\gg ","&#8811;");a.parallel=b(h,"\\parallel ","&#8741;");a.bowtie=b(h,"\\bowtie ","&#8904;");a.sqsubset=b(h,"\\sqsubset ","&#8847;");a.sqsupset=b(h,"\\sqsupset ","&#8848;");a.smile=b(h,"\\smile ","&#8995;");a.sqsubseteq=b(h,"\\sqsubseteq ","&#8849;");a.sqsupseteq=b(h,"\\sqsupseteq ","&#8850;");a.doteq=b(h,"\\doteq ","&#8784;");a.frown=b(h,"\\frown ","&#8994;");a.vdash=b(h,"\\vdash ","&#8870;");a.dashv=b(h,"\\dashv ","&#8867;");a.longleftarrow=b(h,"\\longleftarrow ",
"&#8592;");a.longrightarrow=b(h,"\\longrightarrow ","&#8594;");a.Longleftarrow=b(h,"\\Longleftarrow ","&#8656;");a.Longrightarrow=b(h,"\\Longrightarrow ","&#8658;");a.longleftrightarrow=b(h,"\\longleftrightarrow ","&#8596;");a.updownarrow=b(h,"\\updownarrow ","&#8597;");a.Longleftrightarrow=b(h,"\\Longleftrightarrow ","&#8660;");a.Updownarrow=b(h,"\\Updownarrow ","&#8661;");a.mapsto=b(h,"\\mapsto ","&#8614;");a.nearrow=b(h,"\\nearrow ","&#8599;");a.hookleftarrow=b(h,"\\hookleftarrow ","&#8617;");
a.hookrightarrow=b(h,"\\hookrightarrow ","&#8618;");a.searrow=b(h,"\\searrow ","&#8600;");a.leftharpoonup=b(h,"\\leftharpoonup ","&#8636;");a.rightharpoonup=b(h,"\\rightharpoonup ","&#8640;");a.swarrow=b(h,"\\swarrow ","&#8601;");a.leftharpoondown=b(h,"\\leftharpoondown ","&#8637;");a.rightharpoondown=b(h,"\\rightharpoondown ","&#8641;");a.nwarrow=b(h,"\\nwarrow ","&#8598;");a.ldots=b(h,"\\ldots ","&#8230;");a.cdots=b(h,"\\cdots ","&#8943;");a.vdots=b(h,"\\vdots ","&#8942;");a.ddots=b(h,"\\ddots ",
"&#8944;");a.surd=b(h,"\\surd ","&#8730;");a.triangle=b(h,"\\triangle ","&#9653;");a.ell=b(h,"\\ell ","&#8467;");a.top=b(h,"\\top ","&#8868;");a.flat=b(h,"\\flat ","&#9837;");a.natural=b(h,"\\natural ","&#9838;");a.sharp=b(h,"\\sharp ","&#9839;");a.wp=b(h,"\\wp ","&#8472;");a.bot=b(h,"\\bot ","&#8869;");a.clubsuit=b(h,"\\clubsuit ","&#9827;");a.diamondsuit=b(h,"\\diamondsuit ","&#9826;");a.heartsuit=b(h,"\\heartsuit ","&#9825;");a.spadesuit=b(h,"\\spadesuit ","&#9824;");a.oint=b(h,"\\oint ","&#8750;");
a.bigcap=b(h,"\\bigcap ","&#8745;");a.bigcup=b(h,"\\bigcup ","&#8746;");a.bigsqcup=b(h,"\\bigsqcup ","&#8852;");a.bigvee=b(h,"\\bigvee ","&#8744;");a.bigwedge=b(h,"\\bigwedge ","&#8743;");a.bigodot=b(h,"\\bigodot ","&#8857;");a.bigotimes=b(h,"\\bigotimes ","&#8855;");a.bigoplus=b(h,"\\bigoplus ","&#8853;");a.biguplus=b(h,"\\biguplus ","&#8846;");a.lfloor=b(h,"\\lfloor ","&#8970;");a.rfloor=b(h,"\\rfloor ","&#8971;");a.lceil=b(h,"\\lceil ","&#8968;");a.rceil=b(h,"\\rceil ","&#8969;");a.slash=b(h,"\\slash ",
"&#47;");a.opencurlybrace=b(h,"\\opencurlybrace ","&#123;");a.closecurlybrace=b(h,"\\closecurlybrace ","&#125;");a.caret=b(h,"\\caret ","^");a.underscore=b(h,"\\underscore ","_");a.backslash=b(h,"\\backslash ","\\");a.vert=b(h,"|");a.perp=a.perpendicular=b(h,"\\perp ","&perp;");a.nabla=a.del=b(h,"\\nabla ","&nabla;");a.hbar=b(h,"\\hbar ","&#8463;");a.AA=a.Angstrom=a.angstrom=b(h,"\\text\\AA ","&#8491;");a.ring=a.circ=a.circle=b(h,"\\circ ","&#8728;");a.bull=a.bullet=b(h,"\\bullet ","&bull;");a.setminus=
a.smallsetminus=b(h,"\\setminus ","&#8726;");a.not=a["\u00ac"]=a.neg=b(h,"\\neg ","&not;");a["\u2026"]=a.dots=a.ellip=a.hellip=a.ellipsis=a.hellipsis=b(h,"\\dots ","&hellip;");a.converges=a.darr=a.dnarr=a.dnarrow=a.downarrow=b(h,"\\downarrow ","&darr;");a.dArr=a.dnArr=a.dnArrow=a.Downarrow=b(h,"\\Downarrow ","&dArr;");a.diverges=a.uarr=a.uparrow=b(h,"\\uparrow ","&uarr;");a.uArr=a.Uparrow=b(h,"\\Uparrow ","&uArr;");a.to=b(x,"\\to ","&rarr;");a.rarr=a.rightarrow=b(h,"\\rightarrow ","&rarr;");a.implies=
b(x,"\\Rightarrow ","&rArr;");a.rArr=a.Rightarrow=b(h,"\\Rightarrow ","&rArr;");a.gets=b(x,"\\gets ","&larr;");a.larr=a.leftarrow=b(h,"\\leftarrow ","&larr;");a.impliedby=b(x,"\\Leftarrow ","&lArr;");a.lArr=a.Leftarrow=b(h,"\\Leftarrow ","&lArr;");a.harr=a.lrarr=a.leftrightarrow=b(h,"\\leftrightarrow ","&harr;");a.iff=b(x,"\\Leftrightarrow ","&hArr;");a.hArr=a.lrArr=a.Leftrightarrow=b(h,"\\Leftrightarrow ","&hArr;");a.Re=a.Real=a.real=b(h,"\\Re ","&real;");a.Im=a.imag=a.image=a.imagin=a.imaginary=
a.Imaginary=b(h,"\\Im ","&image;");a.part=a.partial=b(h,"\\partial ","&part;");a.inf=a.infin=a.infty=a.infinity=b(h,"\\infty ","&infin;");a.alef=a.alefsym=a.aleph=a.alephsym=b(h,"\\aleph ","&alefsym;");a.xist=a.xists=a.exist=a.exists=b(h,"\\exists ","&exist;");a.and=a.land=a.wedge=b(h,"\\wedge ","&and;");a.or=a.lor=a.vee=b(h,"\\vee ","&or;");a.o=a.O=a.empty=a.emptyset=a.oslash=a.Oslash=a.nothing=a.varnothing=b(x,"\\varnothing ","&empty;");a.cup=a.union=b(x,"\\cup ","&cup;");a.cap=a.intersect=a.intersection=
b(x,"\\cap ","&cap;");a.deg=a.degree=b(h,"^\\circ ","&deg;");a.ang=a.angle=b(h,"\\angle ","&ang;");var fa=v(O,function(a,b){a.init=function(a){b.init.call(this,"\\"+a+" ","<span>"+a+"</span>")};a.respace=function(){this.jQ[0].className=this[1]instanceof N||this[1]instanceof T?"":"non-italicized-function"}});a.ln=a.lg=a.log=a.span=a.proj=a.det=a.dim=a.min=a.max=a.mod=a.lcm=a.gcd=a.gcf=a.hcf=a.lim=fa;(function(){var b="sin cos tan sec cosec csc cotan cot".split(" "),e;for(e in b)a[b[e]]=a[b[e]+"h"]=
a["a"+b[e]]=a["arc"+b[e]]=a["a"+b[e]+"h"]=a["arc"+b[e]+"h"]=fa})();var R=function(){function b(a){for(var b=a[0]||K(),f=1;f<a.length;f+=1)a[f].children().adopt(b,b.ends[1],0);return b}var e=D.string,g=D.regex,f=D.any,u=D.optWhitespace,k=D.succeed,t=D.fail,l=D.letter.map(I),H=g(/^[^${}\\_^]/).map(h);g=g(/^[^\\a-eg-zA-Z]/).or(e("\\").then(g(/^[a-z]+/i).or(g(/^\s+/).result(" ")).or(f))).then(function(b){var f=a[b];return f?f(b).parser():t("unknown command: \\"+b)}).or(l).or(H);f=e("{").then(function(){return m}).skip(e("}"));
g=u.then(f.or(g.map(function(a){var b=K();a.adopt(b,0,0);return b})));var m=g.many().map(b).skip(u);e=e("[").then(g.then(function(a){return"]"!==a.join("latex")?k(a):t()}).many().map(b).skip(u)).skip(e("]"));u=m;u.block=g;u.optBlock=e;return u}(),ja=v(u,function(b){function e(a,b){if(a[1][b])a.insAtLeftEnd(a[1][b]);else if(a[-1][b])a.insAtRightEnd(a[-1][b]);else{var f=a.parent;do{var e=f[b];if(e&&("function"===typeof e&&(e=f[b](a)),!1===e||e instanceof K)){a.upDownCache[f.id]=u(a.parent,a[-1],a[1]);
e instanceof K&&((f=a.upDownCache[e.id])?f[1]?a.insLeftOf(f[1]):a.insAtRightEnd(f.parent):(f=g(a).left,a.insAtRightEnd(e),a.seekHoriz(f,e)));break}f=f.parent.parent}while(f)}return a.clearSelection().show()}function g(a){var b=a.jQ.removeClass("cursor").offset();a.jQ.addClass("cursor");return b}b.init=function(a){this.parent=this.root=a;var b=this.jQ=this._jQ=w('<span class="cursor">&zwj;</span>');this.blink=function(){b.toggleClass("blink")};this.upDownCache={}};b.show=function(){this.jQ=this._jQ.removeClass("blink");
"intervalId"in this?clearInterval(this.intervalId):(this[1]?this.selection&&this.selection.ends[-1][-1]===this[-1]?this.jQ.insertBefore(this.selection.jQ):this.jQ.insertBefore(this[1].jQ.first()):this.jQ.appendTo(this.parent.jQ),this.parent.focus());this.intervalId=setInterval(this.blink,500);return this};b.hide=function(){"intervalId"in this&&clearInterval(this.intervalId);delete this.intervalId;this.jQ.detach();this.jQ=w();return this};b.withDirInsertAt=function(a,b,g,e){var f=this.parent;this.parent=
b;this[a]=g;this[-a]=e;f.blur()};b.insDirOf=function(a,b){y(a);this.withDirInsertAt(a,b.parent,b[a],b);this.parent.jQ.addClass("hasCursor");this.jQ.insDirOf(a,b.jQ);return this};b.insLeftOf=function(a){return this.insDirOf(-1,a)};b.insRightOf=function(a){return this.insDirOf(1,a)};b.insAtDirEnd=function(a,b){y(a);this.withDirInsertAt(a,b,0,b.ends[a]);-1===a&&b.textarea?this.jQ.insDirOf(-a,b.textarea):this.jQ.insAtDirEnd(a,b.jQ);b.focus();return this};b.insAtLeftEnd=function(a){return this.insAtDirEnd(-1,
a)};b.insAtRightEnd=function(a){return this.insAtDirEnd(1,a)};b.hopDir=function(a){y(a);this.jQ.insDirOf(a,this[a].jQ);this[-a]=this[a];this[a]=this[a][a];return this};b.hopLeft=function(){return this.hopDir(-1)};b.hopRight=function(){return this.hopDir(1)};b.moveDirWithin=function(a,b){y(a);this[a]?this[a].ends[-a]?this.insAtDirEnd(-a,this[a].ends[-a]):this.hopDir(a):this.parent!==b&&(this.parent[a]?this.insAtDirEnd(-a,this.parent[a]):this.insDirOf(a,this.parent.parent))};b.moveLeftWithin=function(a){return this.moveDirWithin(-1,
a)};b.moveRightWithin=function(a){return this.moveDirWithin(1,a)};b.moveDir=function(a){y(a);this.upDownCache={};this.selection?this.insDirOf(a,this.selection.ends[a]).clearSelection():this.moveDirWithin(a,this.root);return this.show()};b.moveLeft=function(){return this.moveDir(-1)};b.moveRight=function(){return this.moveDir(1)};b.moveUp=function(){return e(this,"up")};b.moveDown=function(){return e(this,"down")};b.seek=function(a,b,g){this.upDownCache={};var f=this.clearSelection().show();if(a.hasClass("empty"))return f.insAtLeftEnd(m[a.attr("mathquill-block-id")]),
f;g=m[a.attr("mathquill-command-id")];if(g instanceof O)return a.outerWidth()>2*(b-a.offset().left)?f.insLeftOf(g):f.insRightOf(g),f;if(!g){var e=m[a.attr("mathquill-block-id")];e||(a=a.parent(),g=m[a.attr("mathquill-command-id")],g||(e=m[a.attr("mathquill-block-id")],e||(e=f.root)))}g?f.insRightOf(g):f.insAtRightEnd(e);return f.seekHoriz(b,f.root)};b.seekHoriz=function(a,b){var f=g(this).left-a;do{this.moveLeftWithin(b);var e=f;f=g(this).left-a}while(0<f&&(this[-1]||this.parent!==b));-f>e&&this.moveRightWithin(b);
return this};b.writeLatex=function(a){this.upDownCache={};this.show().deleteSelection();var b=D.all;if(a=R.skip(D.eof).or(b.result(!1)).parse(a))a.children().adopt(this.parent,this[-1],this[1]),m.jQize(a.join("html")).insertBefore(this.jQ),this[-1]=a.ends[1],a.finalizeInsert(),this.parent.bubble("redraw");return this.hide()};b.write=function(a){var b=this.prepareWrite();return this.insertCh(a,b)};b.insertCh=function(a,b){this.parent.write(this,a,b);return this};b.insertCmd=function(b,g){var f=a[b];
f?(f=f(b),g&&f.replaces(g),f.createLeftOf(this)):(f=Y(),f.replaces(b),f.ends[-1].focus=function(){delete this.focus;return this},f.createLeftOf(this),this.insRightOf(f),g&&g.remove());return this};b.unwrapGramp=function(){var a=this.parent.parent,b=a.parent,g=a[1],e=a[-1];a.disown().eachChild(function(f){f.isEmpty()||(f.children().adopt(b,e,g).each(function(b){b.jQ.insertBefore(a.jQ.first())}),e=f.ends[1])});if(!this[1])if(this[-1])this[1]=this[-1][1];else for(;!this[1];)if(this.parent=this.parent[1])this[1]=
this.parent.ends[-1];else{this[1]=a[1];this.parent=b;break}this[1]?this.insLeftOf(this[1]):this.insAtRightEnd(b);a.jQ.remove();a[-1]&&a[-1].respace();a[1]&&a[1].respace()};b.deleteDir=function(a){y(a);this.upDownCache={};this.show();if(!this.deleteSelection())if(this[a])this[a].isEmpty()?this[a]=this[a].remove()[a]:this.selectDir(a);else if(this.parent!==this.root){if(this.parent.parent.isEmpty())return this.insDirOf(-a,this.parent.parent).deleteDir(a);this.unwrapGramp()}this[-1]&&this[-1].respace();
this[1]&&this[1].respace();this.parent.bubble("redraw");return this};b.backspace=function(){return this.deleteDir(-1)};b.deleteForward=function(){return this.deleteDir(1)};b.selectFrom=function(a){var b=this,f=a;a:for(;;){for(var g=this;g!==b.parent.parent;g=g.parent.parent)if(g.parent===f.parent){a=g;break a}for(g=a;g!==f.parent.parent;g=g.parent.parent)if(b.parent===g.parent){a=b;f=g;break a}b.parent.parent&&(b=b.parent.parent);f.parent.parent&&(f=f.parent.parent)}if(a[1]!==f){for(b=a;b;b=b[1])if(b===
f[-1]){var e=!0;break}e||(e=f,f=a,a=e)}this.hide().selection=ha(a[-1][1]||a.parent.ends[-1],f[1][-1]||f.parent.ends[1]);this.insRightOf(f[1][-1]||f.parent.ends[1]);this.root.selectionChanged()};b.selectDir=function(a){y(a);this.upDownCache={};if(this.selection)if(this.selection.ends[a]===this[-a])this[a]?this.hopDir(a).selection.extendDir(a):this.parent!==this.root&&this.insDirOf(a,this.parent.parent).selection.levelUp();else{this.hopDir(a);if(this.selection.ends[a]===this.selection.ends[-a]){this.clearSelection().show();
return}this.selection.retractDir(a)}else{if(this[a])this.hopDir(a);else{if(this.parent===this.root)return;this.insDirOf(a,this.parent.parent)}this.hide().selection=ha(this[-a])}this.root.selectionChanged()};b.selectLeft=function(){return this.selectDir(-1)};b.selectRight=function(){return this.selectDir(1)};b.prepareMove=function(){this.upDownCache={};return this.show().clearSelection()};b.prepareEdit=function(){this.upDownCache={};return this.show().deleteSelection()};b.prepareWrite=function(){this.upDownCache=
{};return this.show().replaceSelection()};b.clearSelection=function(){this.selection&&(this.selection.clear(),delete this.selection,this.root.selectionChanged());return this};b.deleteSelection=function(){if(!this.selection)return!1;this[-1]=this.selection.ends[-1][-1];this[1]=this.selection.ends[1][1];this.selection.remove();this.root.selectionChanged();return delete this.selection};b.replaceSelection=function(){var a=this.selection;a&&(this[-1]=a.ends[-1][-1],this[1]=a.ends[1][1],delete this.selection);
return a}}),ha=v(Z,function(a,b){a.init=function(){b.init.apply(this,arguments);this.jQwrap(this.jQ)};a.jQwrap=function(a){this.jQ=a.wrapAll('<span class="selection"></span>').parent()};a.adopt=function(){this.jQ.replaceWith(this.jQ=this.jQ.children());return b.adopt.apply(this,arguments)};a.clear=function(){this.jQ.replaceWith(this.jQ.children());return this};a.levelUp=function(){var a=this.ends[-1]=this.ends[1]=this.ends[1].parent.parent;this.clear().jQwrap(a.jQ);return this};a.extendDir=function(a){y(a);
this.ends[a]=this.ends[a][a];this.ends[a].jQ.insAtDirEnd(a,this.jQ);return this};a.extendLeft=function(){return this.extendDir(-1)};a.extendRight=function(){return this.extendDir(1)};a.retractDir=function(a){y(a);this.ends[-a].jQ.insDirOf(-a,this.jQ);this.ends[-a]=this.ends[-a][a]};a.retractRight=function(){return this.retractDir(1)};a.retractLeft=function(){return this.retractDir(-1)}});F.fn.mathquill=function(a,b){switch(a){case "redraw":return this.each(function(){var a=w(this).attr("mathquill-block-id");
(a=a&&m[a])&&function ia(a){a.eachChild(ia);a.redraw&&a.redraw()}(a)});case "revert":return this.each(function(){var a=w(this).attr("mathquill-block-id");(a=a&&m[a])&&a.revert&&a.revert()});case "latex":if(1<arguments.length)return this.each(function(){var a=w(this).attr("mathquill-block-id");(a=a&&m[a])&&a.renderLatex(b)});var g=w(this).attr("mathquill-block-id");return(g=g&&m[g])&&g.latex();case "text":return(g=(g=w(this).attr("mathquill-block-id"))&&m[g])&&g.text();case "html":return this.html().replace(/ ?hasCursor|hasCursor /,
"").replace(/ class=(""|(?= |>))/g,"").replace(/<span class="?cursor( blink)?"?><\/span>/i,"").replace(/<span class="?textarea"?><textarea><\/textarea><\/span>/i,"");case "write":if(1<arguments.length)return this.each(function(){var a=w(this).attr("mathquill-block-id");(a=(a=a&&m[a])&&a.cursor)&&a.writeLatex(b).parent.blur()});case "cmd":if(1<arguments.length)return this.each(function(){var a=w(this).attr("mathquill-block-id");if(a=(a=a&&m[a])&&a.cursor){var f=a.prepareWrite();/^\\[a-z]+$/i.test(b)?
a.insertCmd(b.slice(1),f):a.insertCh(b,f);a.hide().parent.blur()}});case "writesimpfunc":if(1<arguments.length)return this.each(function(){var a=w(this).attr("mathquill-block-id");if(a=(a=a&&m[a])&&a.cursor)a.selection?a.writeLatex(b+"{"+a.selection.latex()+"}").parent.blur():a.writeLatex(b+"{}").parent.blur(),a.moveLeft()});case "writefunc":if(1<arguments.length)return this.each(function(){var a=w(this).attr("mathquill-block-id");if(a=(a=a&&m[a])&&a.cursor)a.selection?a.writeLatex(b+"\\left("+a.selection.latex()+
"\\right)").parent.blur():a.writeLatex(b+"\\left(\\right)").parent.blur(),a.moveLeft()});case "movecursor":if(1<arguments.length)return this.each(function(){var a=w(this).attr("mathquill-block-id");if(a=(a=a&&m[a])&&a.cursor)"b"==b?a.backspace():(a.clearSelection().show(),"l"==b?a.moveLeft():"r"==b?a.moveRight():"u"==b?a.moveUp():"d"==b&&a.moveDown())});case "writefrac":if(1<arguments.length)return this.each(function(){var a=w(this).attr("mathquill-block-id");if(a=(a=a&&m[a])&&a.cursor)a.selection?
a.writeLatex("\\frac{"+a.selection.latex()+"}{}").parent.blur():(a.writeLatex("\\frac{}{}").parent.blur(),a.moveLeft()),a.moveLeft()});case "writeint":if(1<arguments.length)return this.each(function(){var a=w(this).attr("mathquill-block-id");a=(a=a&&m[a])&&a.cursor;if("["==b)var f="\\left[",g="\\right]";else"("==b?(f="\\left(",g="\\right)"):(f=b+"{",g="}");a&&(a.selection?a.selection.latex().match(/,/)?a.writeLatex(f+a.selection.latex()+g).parent.blur():a.writeLatex(f+a.selection.latex()+","+g).parent.blur():
(a.writeLatex(f+","+g).parent.blur(),a.moveLeft()),a.moveLeft())});case "writebracket":if(1<arguments.length)return this.each(function(){var a=w(this).attr("mathquill-block-id");a=(a=a&&m[a])&&a.cursor;if("["==b)var f="\\left[",g="\\right]";else"("==b?(f="\\left(",g="\\right)"):"|"==b&&(f="\\left|",g="\\right|");a&&(a.selection?a.writeLatex(f+a.selection.latex()+g).parent.blur():a.writeLatex(f+g).parent.blur(),a.moveLeft())});default:var f="textbox"===a,e=f||"editable"===a,u=f?la:B;return this.each(function(){J(w(this),
u(),f,e)})}};F(function(){F(".mathquill-editable:not(.mathquill-rendered-math)").mathquill("editable");F(".mathquill-textbox:not(.mathquill-rendered-math)").mathquill("textbox");F(".mathquill-embedded-latex").mathquill()})})();var mqarea,mqmousebase;
$(function(){$(window).load(function(){mqarea=$(".mathquill-editable");$(".mathquill-rendered-math").mathquill("redraw");mqarea.find("input,textarea").focus();$("input,textarea").attr("autocapitalize","off");$("#mqee td.mqeebtn").bind("mouseover mouseup",function(){$(this).hasClass("mqeeactive")||$(this).addClass("mqeehighlight")}).bind("mousedown",function(){$(this).addClass("mqeeclick")}).bind("mouseout",function(){$(this).removeClass("mqeehighlight");$(this).removeClass("mqeeclick")}).bind("mouseup",
function(){$(this).removeClass("mqeeclick")}).bind("click",mqeeinsert);$("#mqeeclosebutton").bind("click",hideee);$("#mqeetopbar").mousedown(function(e){e.preventDefault&&e.preventDefault();$("body").addClass("unselectable");mqmousebase={left:e.pageX,top:e.pageY};$("body").bind("mousemove",mqeemousemove);$("body").mouseup(function(b){var e=$("#mqee").offset();lasteepos.left=e.left;lasteepos.top=e.top;$("body").unbind("mousemove",mqeemousemove);$("body").removeClass("unselectable");$(this).unbind(b)})});
$("#mqee td.mqeebtn").bind("touchstart",function(e){e.preventDefault&&e.preventDefault();$(this).addClass("mqeeclick")}).bind("touchend",function(e){e.preventDefault&&e.preventDefault();$(this).delay(500).removeClass("mqeeclick")}).bind("touchend",mqeeinsert);$("#mqeeclosebutton").bind("touchend",function(e){e.preventDefault&&e.preventDefault();hideee()});$("#mqeetopbar").bind("touchstart",function(e){e.preventDefault&&e.preventDefault();e=e.originalEvent.changedTouches[0]||e.originalEvent.touches[0];
mqmousebase={left:e.pageX,top:e.pageY};$("body").addClass("unselectable");$("body").bind("touchmove",mqeetouchmove);$("body").bind("touchend",function(b){var e=$("#mqee").offset();lasteepos.left=e.left;lasteepos.top=e.top;$("body").unbind("touchmove",mqeetouchmove);$("body").removeClass("unselectable");$(this).unbind(b)})})});$(document).ready(function(){$(".tab_content").hide();$("ul.tabs li").click(function(){$("ul.tabs li").removeClass("active");$(this).addClass("active");$(".tab_content").hide();
var e=$(this).find("a").attr("href");$(e).show();return!1})})});function mqPrepTabs(e,b){$(".tab_content").hide();$("ul.tabs li").removeClass("active").each(function(n,y){if(0==n){$(y).addClass("active").show();var J=$(y).find("a").attr("href");$(J).show()}else 1==n?$(y).hide():2==n?"int"==b?$(y).show():$(y).hide():3==n?"ineq"==b?$(y).show():$(y).hide():1==e?$(y).show():$(y).hide()})}
function mqeemousemove(e){$("#mqee").css("left",e.pageX-mqmousebase.left+lasteepos.left).css("top",e.pageY-mqmousebase.top+lasteepos.top);e.preventDefault&&e.preventDefault();e.stopPropagation&&e.stopPropagation();return!1}
function mqeetouchmove(e){var b=e.originalEvent.changedTouches[0]||e.originalEvent.touches[0];$("#mqee").css("left",b.pageX-mqmousebase.left+lasteepos.left).css("top",b.pageY-mqmousebase.top+lasteepos.top);e.preventDefault&&e.preventDefault();e.stopPropagation&&e.stopPropagation();return!1}
function mqeeinsert(e){e.preventDefault&&e.preventDefault();e.stopPropagation&&e.stopPropagation();e=$(this).attr("btntext");var b=$(this).attr("btntype");e=e.replace("\\\\","\\");0==b?mqarea.mathquill("cmd",e).find("input,textarea").focus():1==b?mqarea.mathquill("write",e).find("input,textarea").focus():2==b?mqarea.mathquill("writesimpfunc",e).find("input,textarea").focus():3==b?mqarea.mathquill("writefunc",e).find("input,textarea").focus():4==b?mqarea.mathquill("writeint",e).find("input,textarea").focus():
5==b?mqarea.mathquill("movecursor",e).find("input,textarea").focus():6==b?mqarea.mathquill("writebracket",e).find("input,textarea").focus():7==b&&mqarea.mathquill("writefrac",e).find("input,textarea").focus();return!1}var mqeeddclosetimer=null,cureedd=null,lasteepos=null;
function showeedd(e,b,n){mqeeddclosetimer&&(window.clearTimeout(mqeeddclosetimer),mqeeddclosetimer=null);hideee();cureedd={id:e,type:b,extras:n};b=$("#mqeedd");e=$("#"+e);n=e.offset();n.left+=e.outerWidth();b.css("left",n.left+"px").css("top",n.top+"px").height(e.outerHeight()-2).show()}function updateeeddpos(){if(cureedd){var e=$("#mqeedd"),b=$("#"+cureedd.id),n=b.offset();n.left+=b.outerWidth();e.css("left",n.left+"px").css("top",n.top+"px").height(b.outerHeight()-2).show()}}
function hideeedd(){mqeeddclosetimer=setTimeout(function(){$("#mqeedd").hide()},250)}function mqeetoggleactive(e){for(var b=1;5>=b;b++)e==b?($("#mqeetab"+b).addClass("mqeeactive").removeClass("mqeehighlight"),document.getElementById("mqee"+b).style.display=""):(document.getElementById("mqee"+b).style.display="none",$("#mqeetab"+b).removeClass("mqeeactive"));mqeeactivetab=e;mqarea.find("input,textarea").focus()}
function showee(){mqPrepTabs(cureedd.type-3,cureedd.extras);var e=$("#mqee");if(lasteepos){var b=$(window).scrollTop()-lasteepos.scroll;lasteepos.top+=b;lasteepos.scroll=$(window).scrollTop()}else lasteepos={left:($(window).width()-e.outerWidth())/2,top:$(window).scrollTop()+((window.innerHeight?window.innerHeight:$(window).height())-e.outerHeight())/2,scroll:$(window).scrollTop()};e.css("left",lasteepos.left).css("top",lasteepos.top).show();mqarea.mathquill("latex",AMtoMQ($("#"+cureedd.id).val()));
mqarea.find("input,textarea").focus()}function hideee(){$("#mqee").hide()}function savemathquill(){var e=MQtoAM(mqarea.mathquill("latex"));$("#"+cureedd.id).val(e);""!=e&&$("#"+cureedd.id).siblings("input[value=spec]").prop("checked",!0);(e=$("#pbtn"+cureedd.id.substr(2)))&&e.trigger("click");hideee()}var eebasiccurel=null,eebasicinit=!1,eebasicselstore=null,eebasicclosetimer=0,ddbasicclosetimer=0,cureebasicdd=null,eebasictype=0;
function eebasicinsert(e){el=document.getElementById(eebasiccurel);if(el.setSelectionRange)var b=el.selectionEnd-el.selectionStart;else if(document.selection&&document.selection.createRange){el.focus();var n=eebasicselstore;b=n.text.length}posshift=0;"("==e?(insb="(",insa=")",posshift=1):"sym"==e.substr(0,3)&&(insb="",insa=e.substr(3));el.setSelectionRange?(e=el.selectionEnd+insa.length+insb.length,el.value=el.value.substring(0,el.selectionStart)+insb+el.value.substring(el.selectionStart,el.selectionEnd)+
insa+el.value.substring(el.selectionEnd,el.value.length),el.focus(),0==b&&0<posshift&&(e-=posshift),el.setSelectionRange(e,e)):document.selection&&document.selection.createRange&&(n.text=insb+n.text+insa,0==b&&0<posshift&&n.move("character",-1*posshift),n.select());eebasicselstore=null}function showeebasicselstore(e){null==eebasicselstore&&document.selection&&document.selection.createRange&&(document.getElementById(e).focus(),eebasicselstore=document.selection.createRange())}
function showeebasic(e){el=document.getElementById(e);if(!el.setSelectionRange&&document.selection&&document.selection.createRange)var b=eebasicselstore;var n=document.getElementById("eebasic");if(0==eebasicinit){els=n.getElementsByTagName("td");for(var y=0;y<els.length;y++)els[y].onmouseover=eebasiccellhighlight,els[y].onmouseout=eebasiccellunhighlight,els[y].onmousedown=eebasiccellhighlightdown,els[y].onmouseup=eebasiccellhighlight;eebasicinit=!0}1==eebasictype?(document.getElementById("eenumber").style.display=
"none",document.getElementById("eeinterval").style.display=""):(document.getElementById("eenumber").style.display="",document.getElementById("eeinterval").style.display="none");e!=eebasiccurel?(eebasiccurel=e,p=findPos(el),n.style.top=p[1]+el.offsetHeight+"px",n.style.display="block",n.style.left=n.offsetWidth<el.offsetWidth?p[0]+el.offsetWidth+10-n.offsetWidth+"px":p[0]+"px"):(n.style.display="none",eebasiccurel=null);unhideebasice(0);el.setSelectionRange?el.focus():document.selection&&document.selection.createRange&&
b.select()}function unhideebasice(e){eebasiccancelclosetimer()}function hideebasice(e){null!=eebasiccurel&&(eebasicclosetimer=window.setTimeout(reallyhideebasice,250))}function hideebasicedd(){ddbasicclosetimer=window.setTimeout(function(){cureebasicdd=null;document.getElementById("eebasicdd").style.display="none"},250)}function reallyhideebasice(){document.getElementById("eebasic").style.display="none";eebasiccurel=null}
function eebasiccancelclosetimer(){eebasicclosetimer&&(window.clearTimeout(eebasicclosetimer),eebasicclosetimer=null)}function eebasiccellhighlight(){this.style.background="#ccf"}function eebasiccellunhighlight(){this.style.background="#fff"}function eebasiccellhighlightdown(){this.style.background="#99f";null==eebasicselstore&&document.selection&&document.selection.createRange&&(document.getElementById(eebasiccurel).focus(),eebasicselstore=document.selection.createRange())}
function showeebasicdd(e,b){eebasictype=b;ddbasicclosetimer&&(window.clearTimeout(ddbasicclosetimer),ddbasicclosetimer=null);var n=document.getElementById("eebasicdd"),y=document.getElementById(e);p=findPos(y);n.style.left=p[0]+y.offsetWidth+"px";n.style.top=p[1]+"px";n.style.height=y.offsetHeight-2+"px";n.style.lineHeight=y.offsetHeight+"px";n.style.width="10px";n.style.display="block";cureebasicdd=e}
var AMtoMQ=function(){function e(b,e){return b.input>e.input?1:-1}function b(b,e){var u="\\"==b.charAt(e)&&"\\"!=b.charAt(e+1)&&" "!=b.charAt(e+1)?b.slice(e+1):b.slice(e);for(var k=0;k<u.length&&32>=u.charCodeAt(k);k+=1);return u.slice(k)}function n(b){var e=0,u="";var k=!0;for(var m=1;m<=b.length&&k;m++){k=b.slice(0,m);var q,n=e;if(0==n){n=-1;for(q=v.length;n+1<q;)e=n+q>>1,v[e]<k?n=e:q=e;e=q}else for(e=n;e<v.length&&v[e]<k;e++);if(e<v.length&&b.slice(0,v[e].length)==v[e]){u=v[e];var y=e;m=u.length}k=
e<v.length&&b.slice(0,v[e].length)>=v[e]}D=w;if(""!=u)return w=A[y].ttype,A[y];w=0;e=1;k=b.slice(0,1);for(y=!0;"0"<=k&&"9">=k&&e<=b.length;)k=b.slice(e,e+1),e++;if("."==k&&(k=b.slice(e,e+1),"0"<=k&&"9">=k))for(y=!1,e++;"0"<=k&&"9">=k&&e<=b.length;)k=b.slice(e,e+1),e++;y&&1<e||2<e?(k=b.slice(0,e-1),b="mn"):(k=b.slice(0,1),b=("A">k||"Z"<k)&&("a">k||"z"<k)?"mo":"mi");return"-"==k&&3==D?(w=3,{input:k,tag:b,output:k,ttype:1,func:!0,val:!0}):{input:k,tag:b,output:k,ttype:0,val:!0}}function y(b){b=b.replace(/^\s\s*/,
"");var e=/\s/;for(var u=b.length;e.test(b.charAt(--u)););b=b.slice(0,u+1);e=b.charAt(0);if("("==e||"["==e)b=b.substr(1);e=b.substr(0,6);if("\\left("==e||"\\left["==e||"\\left{"==e)b=b.substr(6);e=b.substr(0,12);if("\\left\\lbrace"==e||"\\left\\langle"==e)b=b.substr(12);e=b.charAt(b.length-1);if(")"==e||"]"==e||"."==e)b=b.substr(0,b.length-7);e=b.substr(b.length-7,7);if("\\rbrace"==e||"\\rangle"==e)b=b.substr(0,b.length-13);return b}function J(b){pre="boolean"==typeof b.val&&b.val?"":"\\";return null==
b.tex?pre+(""==pre?b.input:b.input.toLowerCase()):pre+b.tex}function M(b){return null==b.tex?b.input:"\\"+b.tex}function F(e){var u="";e=b(e,0);var l=n(e);if(null==l||5==l.ttype&&0<L)return[null,e];8==l.ttype&&(e=l.output+b(e,l.input.length),l=n(e));switch(l.ttype){case 7:case 0:e=b(e,l.input.length);var k=J(l);k.charAt(0);return[k,e];case 4:return L++,e=b(e,l.input.length),k=Q(e,!0),L--,"\\right"==k[0].substr(0,6)?("\\right."==k[0].substr(0,7)?k[0]=k[0].substr(7):k[0]=k[0].substr(6),e="boolean"==
typeof l.invisible&&l.invisible?k[0]:M(l)+k[0]):e="boolean"==typeof l.invisible&&l.invisible?"\\left."+k[0]:"("==l.input&&"]"==k[0].substr(k[0].length-1)?"\\intervalopenleft{"+k[0].substr(0,k[0].length-7)+"}":"["==l.input&&")"==k[0].substr(k[0].length-1)?"\\intervalopenright{"+k[0].substr(0,k[0].length-7)+"}":"<<"==l.input&&"rangle"==k[0].substr(k[0].length-6)?"\\langle{"+k[0].substr(0,k[0].length-7-6)+"}":"\\left"+M(l)+k[0],[e,k[1]];case 10:l!=P&&(e=b(e,l.input.length));k="{"==e.charAt(0)?e.indexOf("}"):
"("==e.charAt(0)?e.indexOf(")"):"["==e.charAt(0)?e.indexOf("]"):l==P?e.slice(1).indexOf('"')+1:0;-1==k&&(k=e.length);var m=e.slice(1,k);u+="\\text{"+m+"}";e=b(e,k+1);return[u,e];case 1:e=b(e,l.input.length);k=F(e);if(null==k[0])return[J(l),e];if("boolean"==typeof l.func&&l.func){m=e.charAt(0);if("^"==m||"_"==m||"/"==m||"|"==m||","==m)return[J(l),e];e="-"==l.input?"-"+k[0]:"abs"==l.input?"\\left|"+y(k[0])+"\\right|":J(l)+("("==m?"":" ")+k[0];return[e,k[1]]}k[0]=y(k[0]);return"sqrt"==l.input?["\\sqrt{"+
k[0]+"}",k[1]]:[J(l)+"{"+k[0]+"}",k[1]];case 2:e=b(e,l.input.length);k=F(e);if(null==k[0])return[J(l),e];k[0]=y(k[0]);m=F(k[1]);if(null==m[0])return[J(l),e];m[0]=y(m[0]);"color"==l.input&&(u="{\\color{"+k[0].replace(/[\{\}]/g,"")+"}"+m[0]+"}}");if("root"==l.input||"stackrel"==l.input)u="root"==l.input?"\\nthroot{"+k[0]+"}{"+m[0]+"}":J(l)+"{"+k[0]+"}{"+m[0]+"}";"frac"==l.input&&(u="\\frac{"+k[0]+"}{"+m[0]+"}");return[u,m[1]];case 3:return e=b(e,l.input.length),[l.output,e];case 6:return e=b(e,l.input.length),
["\\quad\\text{"+l.input+"}\\quad",e];case 9:return L++,e=b(e,l.input.length),k=Q(e,!1),L--,m=k[0].charAt(k[0].length-1),"|"==m?(e="\\left|"+k[0],[e,k[1]]):["\\mid",e];default:return e=b(e,l.input.length),[J(l),e]}}function U(e){e=b(e,0);n(e);var u=F(e);var l=u[0];e=u[1];var k=n(e);3==k.ttype&&"/"!=k.input&&(e=b(e,k.input.length),u=F(e),u[0]=null==u[0]?"{}":y(u[0]),e=u[1],"_"==k.input?(k=n(e),"^"==k.input?(e=b(e,k.input.length),k=F(e),k[0]=y(k[0]),e=k[1],l="{"+l+("_{"+u[0]+"}"),l+="^{"+k[0]+"}",l+=
"}"):l+="_{"+u[0]+"}"):l=l+"^{"+u[0]+"}");return[l+" ",e]}function Q(e,v){var l="",k=!1;do{e=b(e,0);var m=U(e);var q=m[0];e=m[1];m=n(e);3==m.ttype&&"/"==m.input?(e=b(e,m.input.length),m=U(e),m[0]=null==m[0]?"{}":y(m[0]),e=m[1],q=y(q),q="\\frac{"+q+"}",q+="{"+m[0]+"}",l+=q,m=n(e)):void 0!=q&&(l+=q)}while((5!=m.ttype&&(9!=m.ttype||v)||0==L)&&null!=m&&""!=m.output);if(5==m.ttype||9==m.ttype){var u=l.length;if(2<u&&"{"==l.charAt(0)&&0<l.indexOf(",")){var w=l.charAt(u-2);if(")"==w||"]"==w){var H=l.charAt(6);
if("("==H&&")"==w&&"}"!=m.output||"["==H&&"]"==w){k="\\matrix{";var B=[];B.push(0);var D=!0,A=0,C=[[0]],a=0,F=0;for(q=1;q<u-1;q++)l.charAt(q)==H&&A++,l.charAt(q)==w&&(A--,0==A&&","==l.charAt(q+2)&&"{"==l.charAt(q+3)&&(B.push(q+2),a=q+2,C[a]=[q+2])),"["!=l.charAt(q)&&"("!=l.charAt(q)||F++,"]"!=l.charAt(q)&&")"!=l.charAt(q)||F--,","==l.charAt(q)&&1==F&&C[a].push(q);B.push(u);u=-1;if(0==A&&0<B.length)for(q=0;q<B.length-1;q++){0<q&&(k+="\\\\");if(0==q)if(1==C[B[q]].length)A=[l.substr(B[q]+7,B[q+1]-B[q]-
15)];else{A=[l.substring(B[q]+7,C[B[q]][1])];for(w=2;w<C[B[q]].length;w++)A.push(l.substring(C[B[q]][w-1]+1,C[B[q]][w]));A.push(l.substring(C[B[q]][C[B[q]].length-1]+1,B[q+1]-8))}else if(1==C[B[q]].length)A=[l.substr(B[q]+8,B[q+1]-B[q]-16)];else{A=[l.substring(B[q]+8,C[B[q]][1])];for(w=2;w<C[B[q]].length;w++)A.push(l.substring(C[B[q]][w-1]+1,C[B[q]][w]));A.push(l.substring(C[B[q]][C[B[q]].length-1]+1,B[q+1]-8))}0<u&&A.length!=u?D=!1:-1==u&&(u=A.length);k+=A.join("&")}D&&(l=k+"}")}}}e=b(e,m.input.length);
"boolean"==typeof m.invisible&&m.invisible?l+="\\right.":(q="\\right"+M(m),l+=q);k=!0}0<L&&!k&&(l+="\\right.");return[l,e]}var P={input:'"',tag:"mtext",output:"mbox",tex:null,ttype:10},A=[{input:"alpha",tag:"mi",output:"\u03b1",tex:null,ttype:0},{input:"beta",tag:"mi",output:"\u03b2",tex:null,ttype:0},{input:"chi",tag:"mi",output:"\u03c7",tex:null,ttype:0},{input:"delta",tag:"mi",output:"\u03b4",tex:null,ttype:0},{input:"Delta",tag:"mo",output:"\u0394",tex:null,ttype:0},{input:"epsi",tag:"mi",output:"\u03b5",
tex:"epsilon",ttype:0},{input:"varepsilon",tag:"mi",output:"\u025b",tex:null,ttype:0},{input:"eta",tag:"mi",output:"\u03b7",tex:null,ttype:0},{input:"gamma",tag:"mi",output:"\u03b3",tex:null,ttype:0},{input:"Gamma",tag:"mo",output:"\u0393",tex:null,ttype:0},{input:"iota",tag:"mi",output:"\u03b9",tex:null,ttype:0},{input:"kappa",tag:"mi",output:"\u03ba",tex:null,ttype:0},{input:"lambda",tag:"mi",output:"\u03bb",tex:null,ttype:0},{input:"Lambda",tag:"mo",output:"\u039b",tex:null,ttype:0},{input:"mu",
tag:"mi",output:"\u03bc",tex:null,ttype:0},{input:"nu",tag:"mi",output:"\u03bd",tex:null,ttype:0},{input:"omega",tag:"mi",output:"\u03c9",tex:null,ttype:0},{input:"Omega",tag:"mo",output:"\u03a9",tex:null,ttype:0},{input:"phi",tag:"mi",output:"\u03c6",tex:null,ttype:0},{input:"varphi",tag:"mi",output:"\u03d5",tex:null,ttype:0},{input:"Phi",tag:"mo",output:"\u03a6",tex:null,ttype:0},{input:"pi",tag:"mi",output:"\u03c0",tex:null,ttype:0},{input:"Pi",tag:"mo",output:"\u03a0",tex:null,ttype:0},{input:"psi",
tag:"mi",output:"\u03c8",tex:null,ttype:0},{input:"Psi",tag:"mi",output:"\u03a8",tex:null,ttype:0},{input:"rho",tag:"mi",output:"\u03c1",tex:null,ttype:0},{input:"sigma",tag:"mi",output:"\u03c3",tex:null,ttype:0},{input:"Sigma",tag:"mo",output:"\u03a3",tex:null,ttype:0},{input:"tau",tag:"mi",output:"\u03c4",tex:null,ttype:0},{input:"theta",tag:"mi",output:"\u03b8",tex:null,ttype:0},{input:"vartheta",tag:"mi",output:"\u03d1",tex:null,ttype:0},{input:"Theta",tag:"mo",output:"\u0398",tex:null,ttype:0},
{input:"upsilon",tag:"mi",output:"\u03c5",tex:null,ttype:0},{input:"xi",tag:"mi",output:"\u03be",tex:null,ttype:0},{input:"Xi",tag:"mo",output:"\u039e",tex:null,ttype:0},{input:"zeta",tag:"mi",output:"\u03b6",tex:null,ttype:0},{input:"*",tag:"mo",output:"\u22c5",tex:"cdot",ttype:0},{input:"xx",tag:"mo",output:"\u00d7",tex:"times",ttype:0},{input:"-:",tag:"mo",output:"\u00f7",tex:"div",ttype:0},{input:"uu",tag:"mo",output:"\u222a",tex:"cup",ttype:0},{input:"U",tag:"mo",output:"\u222a",tex:"cup",ttype:0},
{input:"sum",tag:"mo",output:"\u2211",tex:null,ttype:7},{input:"!=",tag:"mo",output:"\u2260",tex:"ne",ttype:0},{input:"lt",tag:"mo",output:"<",tex:null,ttype:0},{input:"gt",tag:"mo",output:">",tex:null,ttype:0},{input:"<=",tag:"mo",output:"\u2264",tex:"le",ttype:0},{input:"lt=",tag:"mo",output:"\u2264",tex:"leq",ttype:0},{input:"gt=",tag:"mo",output:"\u2265",tex:"geq",ttype:0},{input:">=",tag:"mo",output:"\u2265",tex:"ge",ttype:0},{input:"geq",tag:"mo",output:"\u2265",tex:null,ttype:0},{input:"in",
tag:"mo",output:"\u2208",tex:null,ttype:0},{input:"!in",tag:"mo",output:"\u2209",tex:"notin",ttype:0},{input:"sub",tag:"mo",output:"\u2282",tex:"subset",ttype:0},{input:"sup",tag:"mo",output:"\u2283",tex:"supset",ttype:0},{input:"sube",tag:"mo",output:"\u2286",tex:"subseteq",ttype:0},{input:"supe",tag:"mo",output:"\u2287",tex:"supseteq",ttype:0},{input:"(",tag:"mo",output:"(",tex:null,ttype:4},{input:")",tag:"mo",output:")",tex:null,ttype:5},{input:"[",tag:"mo",output:"[",tex:null,ttype:4},{input:"]",
tag:"mo",output:"]",tex:null,ttype:5},{input:"{",tag:"mo",output:"{",tex:"lbrace",ttype:4},{input:"}",tag:"mo",output:"}",tex:"rbrace",ttype:5},{input:"|",tag:"mo",output:"|",tex:null,ttype:9},{input:"(:",tag:"mo",output:"\u2329",tex:"langle",ttype:4},{input:":)",tag:"mo",output:"\u232a",tex:"rangle",ttype:5},{input:"<<",tag:"mo",output:"\u2329",tex:"langle",ttype:4},{input:">>",tag:"mo",output:"\u232a",tex:"rangle",ttype:5},{input:"int",tag:"mo",output:"\u222b",tex:null,ttype:0},{input:"+-",tag:"mo",
output:"\u00b1",tex:"pm",ttype:0},{input:"O/",tag:"mo",output:"\u2205",tex:"emptyset",ttype:0},{input:"oo",tag:"mo",output:"\u221e",tex:"infty",ttype:0},{input:"del",tag:"mo",output:"\u2202",tex:"partial",ttype:0},{input:"grad",tag:"mo",output:"\u2207",tex:"nabla",ttype:0},{input:"RR",tag:"mo",output:"\u211d",tex:"real",ttype:0},{input:"f",tag:"mi",output:"f",tex:null,ttype:1,func:!0,val:!0},{input:"lim",tag:"mo",output:"lim",tex:null,ttype:7},{input:"Lim",tag:"mo",output:"Lim",tex:null,ttype:7},
{input:"sin",tag:"mo",output:"sin",tex:null,ttype:1,func:!0},{input:"cos",tag:"mo",output:"cos",tex:null,ttype:1,func:!0},{input:"tan",tag:"mo",output:"tan",tex:null,ttype:1,func:!0},{input:"arcsin",tag:"mo",output:"arcsin",tex:null,ttype:1,func:!0},{input:"arccos",tag:"mo",output:"arccos",tex:null,ttype:1,func:!0},{input:"arctan",tag:"mo",output:"arctan",tex:null,ttype:1,func:!0},{input:"sinh",tag:"mo",output:"sinh",tex:null,ttype:1,func:!0},{input:"cosh",tag:"mo",output:"cosh",tex:null,ttype:1,
func:!0},{input:"tanh",tag:"mo",output:"tanh",tex:null,ttype:1,func:!0},{input:"cot",tag:"mo",output:"cot",tex:null,ttype:1,func:!0},{input:"coth",tag:"mo",output:"coth",tex:null,ttype:1,func:!0},{input:"sech",tag:"mo",output:"sech",tex:null,ttype:1,func:!0},{input:"csch",tag:"mo",output:"csch",tex:null,ttype:1,func:!0},{input:"sec",tag:"mo",output:"sec",tex:null,ttype:1,func:!0},{input:"csc",tag:"mo",output:"csc",tex:null,ttype:1,func:!0},{input:"log",tag:"mo",output:"log",tex:null,ttype:1,func:!0},
{input:"ln",tag:"mo",output:"ln",tex:null,ttype:1,func:!0},{input:"abs",tag:"mo",output:"abs",tex:null,ttype:1,func:!0},{input:"Sin",tag:"mo",output:"sin",tex:null,ttype:1,func:!0},{input:"Cos",tag:"mo",output:"cos",tex:null,ttype:1,func:!0},{input:"Tan",tag:"mo",output:"tan",tex:null,ttype:1,func:!0},{input:"Arcsin",tag:"mo",output:"arcsin",tex:null,ttype:1,func:!0},{input:"Arccos",tag:"mo",output:"arccos",tex:null,ttype:1,func:!0},{input:"Arctan",tag:"mo",output:"arctan",tex:null,ttype:1,func:!0},
{input:"Sinh",tag:"mo",output:"sinh",tex:null,ttype:1,func:!0},{input:"Sosh",tag:"mo",output:"cosh",tex:null,ttype:1,func:!0},{input:"Tanh",tag:"mo",output:"tanh",tex:null,ttype:1,func:!0},{input:"Cot",tag:"mo",output:"cot",tex:null,ttype:1,func:!0},{input:"Sec",tag:"mo",output:"sec",tex:null,ttype:1,func:!0},{input:"Csc",tag:"mo",output:"csc",tex:null,ttype:1,func:!0},{input:"Log",tag:"mo",output:"log",tex:null,ttype:1,func:!0},{input:"Ln",tag:"mo",output:"ln",tex:null,ttype:1,func:!0},{input:"Abs",
tag:"mo",output:"abs",tex:null,ttype:1,func:!0},{input:"sqrt",tag:"msqrt",output:"sqrt",tex:null,ttype:1},{input:"root",tag:"mroot",output:"root",tex:null,ttype:2},{input:"frac",tag:"mfrac",output:"/",tex:null,ttype:2},{input:"/",tag:"mfrac",output:"/",tex:null,ttype:3},{input:"stackrel",tag:"mover",output:"stackrel",tex:null,ttype:2},{input:"_",tag:"msub",output:"_",tex:null,ttype:3},{input:"^",tag:"msup",output:"^",tex:null,ttype:3},{input:"Sqrt",tag:"msqrt",output:"sqrt",tex:null,ttype:1},{input:"bar",
tag:"mover",output:"\u00af",tex:"overline",ttype:1,acc:!0},{input:"vec",tag:"mover",output:"\u2192",tex:null,ttype:1,acc:!0},{input:"text",tag:"mtext",output:"text",tex:null,ttype:10},{input:"mbox",tag:"mtext",output:"mbox",tex:null,ttype:10},P],v=[],L,D,w;(function(){var b=[],n;for(n=0;n<A.length;n++)"undefined"==typeof A[n].tex||null==A[n].tex||"boolean"==typeof A[n].notexcopy&&A[n].notexcopy||(b[b.length]={input:A[n].tex,tag:A[n].tag,output:A[n].output,ttype:A[n].ttype});A=A.concat(b);A.sort(e);
for(n=0;n<A.length;n++)v[n]=A[n].input})();return function(b){L=0;b=b.replace(/(&nbsp;|\u00a0|&#160;)/g,"");b=b.replace(/^\s*<(.*?)>\s*$/,"<<$1>>");b=b.replace(/&gt;/g,">");b=b.replace(/&lt;/g,"<");b=b.replace(/\s*\bor\b\s*/g,'" or "');b=b.replace(/all\s+real\s+numbers/g,'"all real numbers"');return null==b.match(/\S/)?"":Q(b.replace(/^\s+/g,""),!1)[0]}}();
function MQtoAM(e){for(e=e.replace(/\\:/g," ");-1!=(i=e.indexOf("\\left|"));){nested=0;do lb=e.indexOf("\\left|",i+1),rb=e.indexOf("\\right|",i+1),-1!=lb&&lb<rb?nested++:-1!=rb&&(-1==lb||rb<lb)&&nested--;while(0<nested&&-1!=rb);-1!=rb?(e=e.substring(0,rb)+")"+e.substring(rb+7),e=e.substring(0,i)+"abs("+e.substring(i+6)):e=e.substring(0,i)+"|"+e.substring(i+6)}e=e.replace(/\\text{\s*or\s*}/g," or ");e=e.replace(/\\text{all\s+real\s+numbers}/g,"all real numbers");e=e.replace(/\\Re/g,"RR");e=e.replace(/\\le(?!f)/g,
"<=");e=e.replace(/\\ge/g,">=");e=e.replace(/\\cup/g,"U");e=e.replace(/\\left/g,"");e=e.replace(/\\right/g,"");e=e.replace(/\\langle/g,"<");e=e.replace(/\\rangle/g,">");e=e.replace(/\\pm/g,"+-");e=e.replace(/\\cdot/g,"*");e=e.replace(/\\infty/g,"oo");e=e.replace(/\\nthroot/g,"root");e=e.replace(/\\varnothing/g,"DNE");e=e.replace(/\\overline/g,"bar");e=e.replace(/\\nabla/g,"grad");e=e.replace(/\\partial/g,"del");e=e.replace(/\\/g,"");e=e.replace(/sqrt\[(.*?)\]/g,"root($1)");for(e=e.replace(/(\d)frac/g,
"$1 frac");-1!=(i=e.indexOf("frac{"));){nested=1;for(curpos=i+5;0<nested&&curpos<e.length-1;)curpos++,c=e.charAt(curpos),"{"==c?nested++:"}"==c&&nested--;e=0==nested?e.substring(0,i)+"("+e.substring(i+5,curpos)+")/"+e.substring(curpos+1):e.substring(0,i)+e.substring(i+4)}e=e.replace(/_(\w)/g,"_$1 ");e=e.replace(/_{([\d\.]+)}/g,"_$1");e=e.replace(/{/g,"(");e=e.replace(/}/g,")");e=e.replace(/\(([\d\.]+)\)\/\(([\d\.]+)\)/g,"$1/$2");e=e.replace(/\/\(([\d\.]+)\)/g,"/$1");e=e.replace(/\(([\d\.]+)\)\//g,
"$1/");e=e.replace(/\/\(([a-zA-Z])\)/g,"/$1");e=e.replace(/\(([a-zA-Z])\)\//g,"$1/");e=e.replace(/\^\(-1\)/g,"^-1");return e=e.replace(/\^\((-?[\d\.]+)\)/g,"^$1")};
