var closetimer=0,ddmenuitem=0,homemenuloaded=0;function mopen(a,b){"homemenu"==a&&0==homemenuloaded&&(basicahah(imasroot+"/gethomemenu.php?cid="+b,"homemenu"),homemenuloaded=1);mcancelclosetime();ddmenuitem?(ddmenuitem.style.visibility="hidden",ddmenuitem=null):(ddmenuitem=document.getElementById(a),ddmenuitem.style.visibility="visible")}function mclose(){ddmenuitem&&(ddmenuitem.style.visibility="hidden",ddmenuitem=null)}function mclosetime(){closetimer=window.setTimeout(mclose,250)}
function mcancelclosetime(){closetimer&&(window.clearTimeout(closetimer),closetimer=null)}function basicahah(a,b,c){null==c&&(c=" Fetching data... ");document.getElementById(b).innerHTML=c;c=!1;window.XMLHttpRequest?(req=new XMLHttpRequest,c=!0):window.ActiveXObject&&(req=new ActiveXObject("Microsoft.XMLHTTP"),c=!0);c&&(req.onreadystatechange=function(){basicahahDone(a,b)},req.open("GET",a,!0),req.send(""))}
function basicahahDone(a,b){4==req.readyState&&(200==req.status?document.getElementById(b).innerHTML=req.responseText:document.getElementById(b).innerHTML=" AHAH Error:\n"+req.status+"\n"+req.statusText)}function arraysearch(a,b){for(var c=0;c<b.length;c++)if(b[c]==a)return c;return-1}var tipobj=0,curtipel=null;
function tipshow(a,b,c){if("undefined"!=typeof c&&"touchstart"==c.type){if(curtipel==a)return tipout(),!1;jQuery(document).on("touchstart.tipshow",function(){tipout(a)})}curtipel!=a&&("object"!=typeof tipobj&&(tipobj=document.createElement("div"),tipobj.className="tips",tipobj.setAttribute("role","tooltip"),tipobj.id="hovertipsholder",document.getElementsByTagName("body")[0].appendChild(tipobj)),curtipel=a,a.hasAttribute("data-tip")?tipobj.innerHTML=a.getAttribute("data-tip"):tipobj.innerHTML=b,tipobj.style.left=
"5px",$(tipobj).stop(!0,!0).fadeIn(100),tipobj.setAttribute("aria-hidden","false"),a.setAttribute("aria-describedby","hovertipsholder"),"undefined"!=typeof usingASCIIMath&&"undefined"!=typeof noMathRender&&usingASCIIMath&&!noMathRender&&-1!=tipobj.innerHTML.indexOf("`")&&rendermathnode(tipobj),b=findPos(a),self.innerHeight?x=self.innerWidth:document.documentElement&&document.documentElement.clientHeight?x=document.documentElement.clientWidth:document.body&&(x=document.body.clientWidth),c=0,"number"==
typeof window.pageYOffset?c=window.pageXOffset:document.body&&(document.body.scrollLeft||document.body.scrollTop)?c=document.body.scrollLeft:document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)&&(c=document.documentElement.scrollLeft),x+=c,b[0]+tipobj.offsetWidth>x-10?(b[0]=x-tipobj.offsetWidth-30,$(tipobj).addClass("tipright")):$(tipobj).removeClass("tipright"),tipobj.style.left=b[0]+15+"px",tipobj.style.top=30>b[1]?b[1]+20+"px":b[1]-tipobj.offsetHeight+
"px")}function tipout(a){jQuery(document).off("touchstart.tipshow");$(tipobj).fadeOut(100);tipobj.setAttribute("aria-hidden","true");curtipel&&curtipel.removeAttribute("aria-describedby");curtipel=null}var popupwins=[];
function popupwindow(a,b,c,d,e){"fit"==d&&(d=window.height-80);c="width="+c+",height="+d+",status=0,resizable=1,directories=0,menubar=0";null!=e&&1==e&&(c+=",scrollbars=1");"undefined"==typeof popupwins[a]||popupwins[a].closed||popupwins[a].focus();b.match(/^http/)?popupwins[a]=window.open(b,a,c):(e=window.open("",a,c),e.document.write("<html><head><title>Popup</title></head><body>"),e.document.write(b),e.document.write("</body></html>"),e.document.close(),popupwins[a]=e)}
function findPos(a){var b=curtop=0;if(a.offsetParent){do b+=a.offsetLeft,curtop+=a.offsetTop,a.offsetParent&&(a.parentNode&&a.offsetParent!=a.parentNode?(b-=a.parentNode.scrollLeft,curtop-=a.parentNode.scrollTop):(b-=a.offsetParent.scrollLeft,curtop-=a.offsetParent.scrollTop));while(a=a.offsetParent)}return[b,curtop]}
function togglepic(a){a.getAttribute("src").match("userimg_sm")?a.setAttribute("src",a.getAttribute("src").replace("_sm","_")):a.setAttribute("src",a.getAttribute("src").replace("_","_sm"))}function addLoadEvent(a){var b=window.onload;window.onload="function"!=typeof window.onload?a:function(){b&&b();a()}}
function submitlimiter(a){var b=a.target;if("submitted"==b.className)return alert("You have already submitted this page.  Please be patient while your submission is processed."),b.className="submitted2",a.preventDefault?a.preventDefault():a.returnValue=!1,!1;if("submitted2"==b.className)return a.preventDefault?a.preventDefault():a.returnValue=!1,!1;b.className="submitted";return!0}
function setupFormLimiters(){for(var a=document.getElementsByTagName("form"),b=0;b<a.length;b++)if("function"!=typeof a[b].onsubmit&&"nolimit"!=a[b].className&&"limitaftervalidate"!=a[b].className)$(a[b]).on("submit",submitlimiter)}addLoadEvent(setupFormLimiters);
function GB_move(a){a.preventDefault();if("touchmove"==a.type){a=a.originalEvent.changedTouches[0]||a.originalEvent.touches[0];var b=a.pageX;a=a.pageY}else b=a.pageX,a=a.pageY;var c=jQuery("#GB_window");c.css("left",Math.max(0,c.data("original_x")+(b-c.data("original_mouse_x")))).css("top",Math.max(0,c.data("original_y")+(a-c.data("original_mouse_y"))))}
function GB_drop(a){jQuery(window).off("touchmove.GBmove touchend.GBmove mousemove.GBmove mouseup.GBmove");jQuery("#GB_frameoverlay").remove();jQuery("body").css("user-select","")}
function GB_resize(a){a.preventDefault();if("touchmove"==a.type){a=a.originalEvent.changedTouches[0]||a.originalEvent.touches[0];var b=a.pageX,c=a.pageY}else b=a.pageX,c=a.pageY;b=Math.max(0,Math.min(b,document.documentElement.clientWidth-5));c=Math.max(0,Math.min(c,document.documentElement.clientHeight-5));a=jQuery("#GB_window");b-=a.data("original_mouse_x");c-=a.data("original_mouse_y");if(a[0].hasAttribute("data-lockratio")){var d=a.data("original_h")/a.data("original_w");(a.data("original_h")+
c)/(a.data("original_w")+b)>d?c=d*(a.data("original_w")+b)-a.data("original_h"):b=(a.data("original_h")+c)/d-a.data("original_w")}a.css("width",Math.max(0,a.data("original_w")+b)).css("height",Math.max(0,a.data("original_h")+c));$("#GB_frameholder").css("height",Math.max(0,a.data("original_h")+c)-36)}function GB_endresize(a){jQuery(window).off("touchmove.GBresize touchend.GBresize mousemove.GBresize mouseup.GBresize");jQuery("#GB_frameoverlay").remove();jQuery("body").css("user-select","")}
var GB_loaded=!1;
function GB_show(a,b,c,d){if(0==GB_loaded){var e=document.createElement("div");e.id="GB_overlay";e.onclick=GB_hide;document.getElementsByTagName("body")[0].appendChild(e);e=document.createElement("div");e.setAttribute("role","dialog");e.setAttribute("aria-labelledby","GB_title");e.setAttribute("tabindex",-1);e.id="GB_window";e.innerHTML='<div id="GB_caption"></div><div id="GB_loading">Loading...</div><div id="GB_frameholder" ></div><div id="GB_resizehandle"></div>';document.getElementsByTagName("body")[0].appendChild(e);GB_loaded=
!0;jQuery("#GB_caption").on("mousedown touchstart",function(a){if("input"!=a.target.nodeName.toLowerCase()&&"button"!=a.target.nodeName.toLowerCase()&&"a"!=a.target.nodeName.toLowerCase()){var b=document.getElementById("GB_window");if("touchstart"==a.type)var c=a.originalEvent.changedTouches[0]||a.originalEvent.touches[0];jQuery("#GB_window").data("original_x",b.getBoundingClientRect().left).data("original_y",b.getBoundingClientRect().top).data("original_mouse_x","touchstart"==a.type?c.pageX:a.pageX).data("original_mouse_y",
"touchstart"==a.type?c.pageY:a.pageY).css("left",b.getBoundingClientRect().left).css("top",b.getBoundingClientRect().top).css("margin",0);jQuery("#GB_window").append($("<div/>",{id:"GB_frameoverlay"}));jQuery("body").css("user-select","none");if("touchstart"==a.type)jQuery(window).on("touchmove.GBmove",GB_move).on("touchend.GBmove",GB_drop);else jQuery(window).on("mousemove.GBmove",GB_move).on("mouseup.GBmove",GB_drop)}});jQuery("#GB_resizehandle").on("mousedown touchstart",function(a){if("touchstart"==
a.type)var b=a.originalEvent.changedTouches[0]||a.originalEvent.touches[0];var c=document.getElementById("GB_window");jQuery("#GB_window").css("left",c.getBoundingClientRect().left).css("top",c.getBoundingClientRect().top).css("margin",0).data("original_w",$(c).width()).data("original_h",$(c).height()).data("original_mouse_x","touchstart"==a.type?b.pageX:a.pageX).data("original_mouse_y","touchstart"==a.type?b.pageY:a.pageY);jQuery("#GB_window").append($("<div/>",{id:"GB_frameoverlay"}));jQuery("body").css("user-select",
"none");if("touchstart"==a.type)jQuery(window).on("touchmove.GBresize",GB_resize).on("touchend.GBresize",GB_endresize);else jQuery(window).on("mousemove.GBresize",GB_resize).on("mouseup.GBresize",GB_endresize)})}"<"==b.charAt(0)?(document.getElementById("GB_frameholder").innerHTML="<div>"+b+"</div>",b.match(/data-enlarged/)&&jQuery("#GB_window").attr("data-lockratio",1),setTimeout(GB_doneload,50)):document.getElementById("GB_frameholder").innerHTML='<iframe onload="GB_doneload()" id="GB_frame" src="'+
b+'" title="'+a+'"></iframe>';jQuery("#GB_frameholder").isolatedScroll();b.match(/libtree/)?(document.getElementById("GB_caption").innerHTML='<span class="floatright"><input type="button" value="Use Libraries" onClick="document.getElementById(\'GB_frame\').contentWindow.setlib()" /> <a href="#" class="pointer" onclick="GB_hide();return false;" aria-label="Close">[X]</a>&nbsp;</span><span id="GB_title">Select Libraries</span><div class="clear"></div>',a=self.innerHeight||de&&de.clientHeight||document.body.clientHeight):
(document.getElementById("GB_caption").innerHTML='<span class="floatright"><a href="#" class="pointer" onclick="GB_hide();return false;" aria-label="Close">[X]</a></span><span id="GB_title">'+a+"</span>",document.getElementById("GB_caption").onclick=GB_hide,a="auto"==d?self.innerHeight||de&&de.clientHeight||document.body.clientHeight:d);document.getElementById("GB_window").style.display="block";document.getElementById("GB_overlay").style.display="block";document.getElementById("GB_loading").style.display=
"block";d=$(document).width();c>d-20&&(c=d-20);$("#GB_window").css("margin","").css("left","").css("top","");document.getElementById("GB_window").style.width=c+"px";document.getElementById("GB_window").style.height=a-30+"px";"<"!=b.charAt(0)&&(document.getElementById("GB_frameholder").style.height=a-30-36+"px");document.getElementById("GB_window").focus();$(document).on("keydown.GB",function(a){27==a.keyCode&&GB_hide()})}
function GB_doneload(){document.getElementById("GB_loading").style.display="none"}function GB_hide(){document.getElementById("GB_window").style.display="none";document.getElementById("GB_overlay").style.display="none";$(document).off("keydown.GB")}function chkAllNone(a,b,c,d){a=document.getElementById(a);for(i=0;i<=a.elements.length;i++)try{if("all"==b&&"checkbox"==a.elements[i].type||a.elements[i].name==b)a.elements[i].checked=d&&a.elements[i].className==d?!c:c}catch(e){}return!1}
var tinyMCEPreInit={base:imasroot+"/tinymce4"};
function initeditor(a,b,c,d,e){c=c||0;d=d||0;var f="";"exact"==a?f="#"+b.split(/,/).join(",#"):"textareas"==a?f="textarea."+b:"divs"==a?f="div."+b:"selector"==a&&(f=b);a={selector:f,inline:d,plugins:["lists advlist autolink attach image charmap anchor","searchreplace code link textcolor snippet","media table paste asciimath asciisvg rollups colorpicker"],menubar:!1,toolbar1:"myEdit myInsert styleselect | bold italic underline subscript superscript | forecolor backcolor | snippet code | saveclose",toolbar2:" alignleft aligncenter alignright | bullist numlist outdent indent  | attach link unlink image | table | asciimath asciimathcharmap asciisvg",
extended_valid_elements:"iframe[src|width|height|name|align|allowfullscreen|frameborder],param[name|value],@[sscr]",content_css:imasroot+(1==c?"/assessment/mathtest.css,":"/imascore.css,")+imasroot+"/themes/"+coursetheme,AScgiloc:imasroot+"/filter/graph/svgimg.php",convert_urls:!1,file_picker_callback:filePickerCallBackFunc,file_picker_types:"file image",images_upload_url:imasroot+"/tinymce4/upload_handler.php",paste_data_images:!0,default_link_target:"_blank",browser_spellcheck:!0,branding:!1,resize:"both",
width:"100%",content_style:"body {background-color: #ffffff !important;}",table_class_list:[{title:"None",value:""},{title:"Gridded",value:"gridded"},{title:"Gridded Centered",value:"gridded centered"}],style_formats_merge:!0,snippets:1==tinymceUseSnippets?imasroot+"/tinymce4/getsnippets.php":!1,style_formats:[{title:"Font Family",items:[{title:"Arial",inline:"span",styles:{"font-family":"arial"}},{title:"Book Antiqua",inline:"span",styles:{"font-family":"book antiqua"}},{title:"Comic Sans MS",inline:"span",
styles:{"font-family":"comic sans ms,sans-serif"}},{title:"Courier New",inline:"span",styles:{"font-family":"courier new,courier"}},{title:"Georgia",inline:"span",styles:{"font-family":"georgia,palatino"}},{title:"Helvetica",inline:"span",styles:{"font-family":"helvetica"}},{title:"Impact",inline:"span",styles:{"font-family":"impact,chicago"}},{title:"Open Sans",inline:"span",styles:{"font-family":"Open Sans"}},{title:"Symbol",inline:"span",styles:{"font-family":"symbol"}},{title:"Tahoma",inline:"span",
styles:{"font-family":"tahoma"}},{title:"Terminal",inline:"span",styles:{"font-family":"terminal,monaco"}},{title:"Times New Roman",inline:"span",styles:{"font-family":"times new roman,times"}},{title:"Verdana",inline:"span",styles:{"font-family":"Verdana"}}]},{title:"Font Size",items:[{title:"x-small",inline:"span",styles:{fontSize:"x-small","font-size":"x-small"}},{title:"small",inline:"span",styles:{fontSize:"small","font-size":"small"}},{title:"medium",inline:"span",styles:{fontSize:"medium",
"font-size":"medium"}},{title:"large",inline:"span",styles:{fontSize:"large","font-size":"large"}},{title:"x-large",inline:"span",styles:{fontSize:"x-large","font-size":"x-large"}},{title:"xx-large",inline:"span",styles:{fontSize:"xx-large","font-size":"xx-large"}}]}]};385>document.documentElement.clientWidth?(a.toolbar1="myEdit myInsert styleselect | bold italic underline | saveclose",a.toolbar2="bullist numlist outdent indent  | link image | asciimath asciisvg"):465>document.documentElement.clientWidth?
(a.toolbar1="myEdit myInsert styleselect | bold italic underline forecolor | saveclose",a.toolbar2="bullist numlist outdent indent  | link unlink image | asciimath asciisvg"):575>document.documentElement.clientWidth&&(a.toolbar1="myEdit myInsert styleselect | bold italic underline subscript superscript | forecolor | saveclose",a.toolbar2=" alignleft aligncenter | bullist numlist outdent indent  | link unlink image | asciimath asciimathcharmap asciisvg");e&&(a.setup=e);tinymce.remove();tinymce.init(a)}
function filePickerCallBack(a,b,c){b=imasroot+"/tinymce4/file_manager.php";switch(c.filetype){case "image":b+="?type=img";break;case "file":b+="?type=files"}tinyMCE.activeEditor.windowManager.open({file:b,title:"File Manager",width:350,height:450,resizable:"yes",inline:"yes",close_previous:"no"},{oninsert:function(b,c){a(b)}})}
function imascleanup(a,b){"get_from_editor"==a&&(b=b.replace(/\x3c!--([\s\S]*?)--\x3e|&lt;!--([\s\S]*?)--&gt;|<style>[\s\S]*?<\/style>/g,""),b=b.replace(/class="?Mso\w+"?/g,""),b=b.replace(/<p\s*>\s*<\/p>/gi,""),b=b.replace(/<script.*?\/script>/gi,""),b=b.replace(/<input[^>]*button[^>]*>/gi,""));return b}
function readCookie(a){a+="=";for(var b=document.cookie.split(";"),c=0;c<b.length;c++){for(var d=b[c];" "==d.charAt(0);)d=d.substring(1,d.length);if(0==d.indexOf(a))return unescape(d.substring(a.length,d.length))}return null}
function selectByDivID(a){var b=a.value;a=a.value.split(":")[0];for(var c=document.getElementsByTagName("div"),d=0;d<c.length;d++)c[d].className.match(a)&&(c[d].style.display=c[d].id==b?"block":"none");c=new Date;c.setDate(c.getDate()+365);document.cookie=a+"store="+escape(b)+";expires="+c.toGMTString()}
function setselectbycookie(){for(var a=document.getElementsByTagName("select"),b=0;b<a.length;b++)if(a[b].className.match("alts")){var c=a[b].className.replace(/alts/,"").replace(/\s/g,"");null!=(co=readCookie(c+"store"))&&(co=co.replace("store",""),a[b].value=co,selectByDivID(a[b]))}}addLoadEvent(setselectbycookie);var recordedunload=!1;
function recclick(a,b,c,d){if(0<cid){var e="",f;null!==(f=window.location.href.match(/showlinkedtext.*?&id=(\d+)/))&&0==recordedunload&&(e="&unloadinglinked="+f[1],recordedunload=!0);jQuery.ajax({type:"POST",url:imasroot+"/course/rectrack.php?cid="+cid,data:"type="+encodeURIComponent(a)+"&typeid="+encodeURIComponent(b)+"&info="+encodeURIComponent(c+"::"+d)+e})}}
function setuptracklinks(a,b){jQuery(b).attr("data-base")&&jQuery(b).click(function(a){var c=jQuery(this).attr("data-base").split("-");recclick(c[0],c[1],jQuery(this).attr("href"),jQuery(this).text());if("undefined"==typeof jQuery(b).attr("target"))return a.preventDefault(),setTimeout('window.location.href = "'+jQuery(this).attr("href")+'"',100),!1}).mousedown(function(a){3==a.which&&(a=jQuery(this).attr("data-base").split("-"),recclick(a[0],a[1],jQuery(this).attr("href"),jQuery(this).text()))})}
var videoembedcounter=0;
function togglevideoembed(){var a=this.id.substr(13),b=jQuery("#videoiframe"+a);if(0<b.length)"none"==b.css("display")?(b.show(),b.parent(".fluid-width-video-wrapper").show(),jQuery(this).text(" [-]"),jQuery(this).attr("title",_("Hide video")),jQuery(this).attr("aria-label",_("Hide embedded video"))):(b.hide(),b.get(0).contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}',"*"),b.parent(".fluid-width-video-wrapper").hide(),jQuery(this).text(" [+]"),jQuery(this).attr("title",_("Watch video here")),
jQuery(this).attr("aria-label",_("Embed video here")));else{b=jQuery(this).prev().attr("href");var c="?";if(b.match(/youtube\.com/))if(-1<b.indexOf("playlist?list=")){var d=b.split("list=")[1].split(/[#&]/)[0],e="www.youtube.com/embed/videoseries?list=";c="&"}else d=b.match(/\/embed\//)?b.split("/embed/")[1].split(/[#&\?]/)[0]:b.split("v=")[1].split(/[#&]/)[0],e="www.youtube.com/embed/";else b.match(/youtu\.be/)?(d=b.split(".be/")[1].split(/[#&]/)[0],e="www.youtube.com/embed/"):b.match(/vimeo/)&&
(d=b.split(".com/")[1].split(/[#&]/)[0],e="player.vimeo.com/video/");var f=b.match(/.*\Wt=((\d+)m)?((\d+)s)?.*/);null==f?(c+="rel=0",f=b.match(/.*start=(\d+)/),null!=f&&(c+="&start="+f[1])):c=c+"rel=0&start="+((f[2]?60*f[2]:0)+(f[4]?1*f[4]:0));f=b.match(/.*end=(\d+)/);null!=f&&(c+="&end="+f[1]);jQuery("<iframe/>",{id:"videoiframe"+a,width:640,height:400,src:("https:"==location.protocol?"https:":"http:")+"//"+e+d+(c+"&enablejsapi=1"),frameborder:0,allowfullscreen:1}).insertAfter(jQuery(this));jQuery(this).parent().fitVids();
jQuery("<br/>").insertAfter(jQuery(this));jQuery(this).text(" [-]");jQuery(this).attr("title",_("Hide video"));jQuery(this).prev().attr("data-base")&&(a=jQuery(this).prev().attr("data-base").split("-"),recclick(a[0],a[1],b,jQuery(this).prev().text()))}}
function setupvideoembeds(a,b){jQuery("<span/>",{text:" [+]",role:"button",title:_("Watch video here"),"aria-label":_("Embed video here"),id:"videoembedbtn"+videoembedcounter,click:togglevideoembed,keydown:function(a){13==a.which&&$(this).click()},tabindex:0,"class":"videoembedbtn"}).insertAfter(b);videoembedcounter++}function addNoopener(a,b){!b.rel&&b.target&&b.host!==window.location.host&&b.setAttribute("rel","noopener noreferrer")}
function addBlankTarget(a,b){b.host!==window.location.host&&b.setAttribute("target","_blank")}function addmultiselect(a,b){var c=jQuery(a).parent(),d=jQuery("#"+b).val(),e=jQuery("#"+b+" option[value="+d+"]").prop("disabled",!0).html();"null"!=d&&c.append('<div class="multiselitem"><span class="right"><a href="#" onclick="removemultiselect(this);return false;">Remove</a></span><input type="hidden" name="'+b+'[]" value="'+d+'"/>'+e+"</div>");jQuery("#"+b).val("null")}
function removemultiselect(a){a=jQuery(a).parent().parent();var b=a.find("input").val();a.parent().find("option[value="+b+"]").prop("disabled",!1);a.remove()}function hidefromcourselist(a,b,c){confirm("Are you SURE you want to hide this course from your course list?")&&jQuery.ajax({type:"GET",url:imasroot+"/admin/hidefromcourselist.php?tohide="+b+"&type="+c}).done(function(b){"OK"==b&&(jQuery(a).closest("ul.courselist > li").slideUp(),jQuery("#unhidelink"+c).show())});return!1}
function removeSelfAsCoteacher(a,b,c,d){c=c||"ul.courselist > li";d=d||null;confirm("Are you SURE you want to remove yourself as a co-teacher on this course?")&&jQuery.ajax({type:"POST",url:imasroot+"/admin/actions.php",data:{action:"removeself",id:b,uid:d}}).done(function(b){"OK"==b&&jQuery(a).closest(c).slideUp()});return!1}
function rotateimg(a){var b=$(a).data("rotation")?($(a).data("rotation")+90)%360:90;$(a).parent().css("height","auto");var c=$(a).parent().width();$(a).data("rotation",b).css({transform:"rotate("+b+"deg)"});if(90==b%180){$(a).css("transform-origin","0 0").css("max-width","none");var d=a.getBoundingClientRect();c=d.width>c?.95*c/d.width:1;90==b?$(a).data("rotation",b).css({transform:"rotate("+b+"deg) scale("+c+") translateY("+-d.width+"px) "}):$(a).data("rotation",b).css({transform:"rotate("+b+"deg) scale("+
c+") translateX("+-d.height+"px) "});d=a.getBoundingClientRect();$(a).parent().css("height",d.height)}else $(a).css("transform-origin","").css("max-width","80%"),$(a).parent().css("height","")}function sendLTIresizemsg(){var a=Math.max(document.body.scrollHeight,document.body.offsetHeight)+100;window.parent!=window.self&&parent.postMessage(JSON.stringify({subject:"lti.frameResize",height:a}),"*")}
jQuery(document).ready(function(a){a(window).on("message",function(b){if("string"==typeof b.originalEvent.data&&b.originalEvent.data.match(/lti\.frameResize/)){var c=JSON.parse(b.originalEvent.data);if("frame_id"in c)a("#"+c.frame_id).height(c.height);else if("iframe_resize_id"in c)a("#"+c.iframe_resize_id).height(c.height);else for(var d=document.getElementsByTagName("iframe"),e=0;e<d.length;e++)if(d[e].contentWindow===b.originalEvent.source){a(d[e]).height(c.height);break}}else"string"==typeof b.originalEvent.data&&
b.originalEvent.data.match(/\[iFrameSizer\]/)?(c=b.originalEvent.data.substr(13).split(":"),a("#"+c[0]).height(c[1])):"string"==typeof b.originalEvent.data&&b.originalEvent.data.match(/imathas\.update/)&&(c=JSON.parse(b.originalEvent.data),"qn"in c?(b=c.qn.replace(/[^\d]/,""),""!=b&&a("#qn"+b).val(c.value)):(b=c.id.replace(/[^\w\-]/,""),a("#"+b).hasClass("allowupdate")&&a("#"+b).val(c.value)))})});
jQuery(document).ready(function(a){"undefined"!=typeof isImathasAssessment&&a("a:not([target])").each(addBlankTarget);a("a").each(setuptracklinks).each(addNoopener);a('a[href*="youtu"]').each(setupvideoembeds);a('a[href*="vimeo"]').each(setupvideoembeds);a("body").fitVids()});
jQuery.fn.isolatedScroll=function(){this.bind("mousewheel DOMMouseScroll",function(a){var b=a.wheelDelta||a.originalEvent&&a.originalEvent.wheelDelta||-a.detail,c=0<=this.scrollTop+jQuery(this).outerHeight()-this.scrollHeight,d=0>=this.scrollTop;(0>b&&c||0<b&&d)&&a.preventDefault()});return this};
jQuery(document).ready(function(a){for(var b=a(".fixedonscroll"),c=[],d=0;d<b.length;d++)c[d]=a(b[d]).offset().top,a(b[d]).height()>a(window).height()&&(c[d]=-1);0<b.length&&a(window).scroll(function(){for(var d=a(window).scrollTop(),f=0;f<b.length;f++)d>c[f]&&0<c[f]?a(b[f]).css("position","fixed").css("top","5px").attr("data-fixed",!0):a(b[f]).css("position","static").attr("data-fixed",!1)})});
function _(a){var b="undefined"!=typeof i18njs&&i18njs[a]?i18njs[a]:a;if(1<arguments.length)for(var c=1;c<arguments.length;c++)b=b.replace("$"+c,arguments[c]);return b}function randID(){return"_"+Math.random().toString(36).substr(2,9)}function groupToggleAll(a){$(".grouptoggle").attr("aria-expanded",1==a?!1:!0).trigger("click")}
jQuery(document).ready(function(a){a(".grouptoggle").each(function(){var b=randID();a(this).next(".blockitems").hide().removeClass("hidden").attr("id","bi"+b);a(this).attr("id",b).attr("aria-controls","bi"+b).attr("aria-expanded",!1).attr("tabindex",0).css("cursor","pointer").on("click keydown",function(b){if("click"==b.type||13==b.which)"true"==a(this).attr("aria-expanded")?(a(this).attr("aria-expanded",!1),a(this).children("img").attr("src","../img/expand.gif"),a(this).next(".blockitems").slideUp()):
(a(this).attr("aria-expanded",!0),a(this).children("img").attr("src","../img/collapse.gif"),a(this).next(".blockitems").slideDown())})});a(".grouptoggle img").attr("alt","expand/collapse")});
(function(a){a.fn.fitVids=function(){return this.each(function(){a(this).find("iframe[src*='player.vimeo.com'],iframe[src*='youtube.com'],iframe[src*='youtube-nocookie.com']").each(function(){var b=a(this);if(0<b.closest(".textsegment").length||0<b.closest(".fluid-width-video-wrapper").length)return!0;b.parentsUntil(".intro","table").each(function(){a(this).css("width","100%")});var c=b.attr("height")&&!isNaN(parseInt(b.attr("height"),10))?parseInt(b.attr("height"),10):b.height(),d=isNaN(parseInt(b.attr("width"),
10))?b.width():parseInt(b.attr("width"),10);c/=d;b.attr("id")||b.attr("id","fitvid"+Math.floor(999999*Math.random()));b.wrap('<div class="fluid-width-video-wrapper"></div>').parent(".fluid-width-video-wrapper").css("padding-top",100*c+"%").wrap('<div class="video-wrapper-wrapper"></div>').parent(".video-wrapper-wrapper").css("max-width",d+"px");b.removeAttr("height").removeAttr("width").css("height","").css("width","")})})}})(window.jQuery||window.Zepto);
function setAltSelectors(a,b){$(".alts."+a).parents(".altWrap").find(".altContentOn").removeClass("altContentOn").addClass("altContentOff");$(".alts."+a).parents(".altWrap").find("."+b).addClass("altContentOn").removeClass("altContentOff");$("select.alts."+a).val(a+":"+b);var c=new Date;c.setDate(c.getDate()+365);document.cookie="alt_store_"+a+"="+escape(b)+";expires="+c.toGMTString()+";path=/"}
jQuery(document).ready(function(a){a(".alts").on("change",function(){var a=this.value.split(":");1<a.length&&setAltSelectors(a[0],a[1])}).each(function(b,c){var d=c.value.split(":");null!=(co=readCookie("alt_store_"+d[0]))?setAltSelectors(d[0],co):a(c).hasClass("setDefault")&&setAltSelectors(d[0],d[1])});a(document).on("keydown",function(b){8!==b.which||a(b.target).is("input[type='text']:not([readonly]),input[type='number']:not([readonly]),input:not([type]):not([readonly]),input[type='password']:not([readonly]), textarea, [contenteditable='true']")||
b.preventDefault()});a("div.breadcrumb").attr("role","navigation").attr("aria-label",_("Navigation breadcrumbs"));a("div.cpmid,div.cp").attr("role","group").attr("aria-label",_("Control link group"));a("#centercontent").length&&(a("#centercontent").attr("role","main"),a(".midwrapper").removeAttr("role"))});
jQuery(document).ready(function(a){function b(b){var c=a("#headermobilemenulist");"true"==c.attr("aria-hidden")?(a("#headermobilemenulist").slideDown(50,function(){a("#headermobilemenulist").addClass("menuexpanded").removeAttr("style");c.attr("aria-hidden",!1);a("#topnavmenu").attr("aria-expanded",!0)}),a("#navlist").slideDown(100,function(){a("#navlist").addClass("menuexpanded").removeAttr("style")})):(a("#navlist").slideUp(100,function(){a("#navlist").removeClass("menuexpanded").removeAttr("style")}),
a("#headermobilemenulist").slideUp(50,function(){a("#headermobilemenulist").removeClass("menuexpanded").removeAttr("style");c.attr("aria-hidden",!0);a("#topnavmenu").attr("aria-expanded",!1)}));b.preventDefault()}a("#topnavmenu").on("click",b).on("keydown",function(a){13!==a.which&&32!=a.which||b(a)})});var sagecellcounter=0;
function initSageCell(a){jQuery(a).find(".converttosagecell").each(function(){var a=jQuery(this);if(a.is("pre")){var c=this;var d=jQuery(c).html().replace(/<br\s*\/?>/g,"\n").replace(/<\/?[a-zA-Z][^>]*>/g,"")}else if(c=a.find("textarea"),0==c.length||""==jQuery(c[0]).val())if(0<a.find("pre").length)d=a.find("pre").html().replace(/<br\s*\/?>/g,"\n").replace(/<\/?[a-zA-Z][^>]*>/g,"").replace(/\n\n/g,"\n"),c=0==c.length?a.find("pre")[0]:c[0];else return!1;else d=jQuery(c[0]).val(),c=c[0];if(m=d.match(/^\s+/)){a=
m[0].length;var e=new RegExp("\\n\\s{"+a+"}","g");d=d.substr(a).replace(e,"\n").replace(/\s+$/,"")}a="sagecell-"+sagecellcounter;sagecellcounter++;e=imasroot+"/assessment/libs/sagecellframe.html?frame_id="+a;e+="&code="+encodeURIComponent(d);"undefined"!=typeof jQuery(c).attr("id")&&(e+="&update_id="+jQuery(c).attr("id"));jQuery(c).addClass("allowupdate").hide().after(jQuery("<iframe/>",{id:a,"class":"sagecellframe",style:"border:0",width:"100%",height:100,src:e}))})}jQuery(function(){initSageCell("body")});
function setActiveTab(a){var b=a.id;jQuery(a).closest(".tabwrap").find("li.active").removeClass("active");jQuery(a).closest(".tablist").find("a[role=tab]").attr("aria-selected",!1);jQuery(a).attr("aria-selected",!0);jQuery(a).parent().addClass("active");jQuery(a).closest(".tabwrap").find(".tabpanel").hide().attr("aria-hidden",!0);b=b.replace(/tab/,"tabpanel");jQuery(a).closest(".tabwrap").find("#"+b).show().attr("aria-hidden",!1)}
+function(a){function b(b){var c=b.attr("data-target");c||(c=(c=b.attr("href"))&&/#[A-Za-z]/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,""));return(c=c&&a(c))&&c.length?c:b.parent()}function c(c){c&&3===c.which||(a(".dropdown-backdrop").remove(),a('[data-toggle="dropdown"]').each(function(){var d=a(this),f=b(d),e={relatedTarget:this};!f.hasClass("open")||c&&"click"==c.type&&/input|textarea/i.test(c.target.tagName)&&a.contains(f[0],c.target)||(f.trigger(c=a.Event("hide.bs.dropdown",e)),c.isDefaultPrevented()||
(d.attr("aria-expanded","false"),f.removeClass("open").trigger("hidden.bs.dropdown",e)))}))}var d=function(b){a(b).on("click.bs.dropdown",this.toggle)};d.VERSION="3.3.5";d.prototype.toggle=function(d){var e=a(this);if(!e.is(".disabled, :disabled")){var f=b(e);d=f.hasClass("open");c();if(!d){if("ontouchstart"in document.documentElement&&!f.closest(".navbar-nav").length)a(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(a(this)).on("click",c);var g={relatedTarget:this};f.trigger(d=
a.Event("show.bs.dropdown",g));if(d.isDefaultPrevented())return;e.trigger("focus").attr("aria-expanded","true");f.toggleClass("open").trigger("shown.bs.dropdown",g)}return!1}};d.prototype.keydown=function(c){if(/(38|40|27|32)/.test(c.which)&&!/input|textarea/i.test(c.target.tagName)){var d=a(this);c.preventDefault();c.stopPropagation();if(!d.is(".disabled, :disabled")){var e=b(d),f=e.hasClass("open");if(!f&&27!=c.which||f&&27==c.which)return 27==c.which&&e.find('[data-toggle="dropdown"]').trigger("focus"),
d.trigger("click");d=e.find(".dropdown-menu li:not(.disabled):visible a");d.length&&(e=d.index(c.target),38==c.which&&0<e&&e--,40==c.which&&e<d.length-1&&e++,~e||(e=0),d.eq(e).trigger("focus"))}}};var e=a.fn.dropdown;a.fn.dropdown=function(b){return this.each(function(){var c=a(this),e=c.data("bs.dropdown");e||c.data("bs.dropdown",e=new d(this));"string"==typeof b&&e[b].call(c)})};a.fn.dropdown.Constructor=d;a.fn.dropdown.noConflict=function(){a.fn.dropdown=e;return this};a(document).on("click.bs.dropdown.data-api",
c).on("click.bs.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.bs.dropdown.data-api",'[data-toggle="dropdown"]',d.prototype.toggle).on("keydown.bs.dropdown.data-api",'[data-toggle="dropdown"]',d.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",d.prototype.keydown)}(jQuery);

var pi=Math.PI,ln=Math.log,e=Math.E,arcsin=Math.asin,arccos=Math.acos,arctan=Math.atan,sec=function(a){return 1/Math.cos(a)},csc=function(a){return 1/Math.sin(a)},cot=function(a){return 1/Math.tan(a)},arcsec=function(a){return arccos(1/a)},arccsc=function(a){return arcsin(1/a)},arccot=function(a){return arctan(1/a)},sinh=function(a){return(Math.exp(a)-Math.exp(-a))/2},cosh=function(a){return(Math.exp(a)+Math.exp(-a))/2},tanh=function(a){return(Math.exp(a)-Math.exp(-a))/(Math.exp(a)+Math.exp(-a))},
sech=function(a){return 1/cosh(a)},csch=function(a){return 1/sinh(a)},coth=function(a){return 1/tanh(a)},arcsinh=function(a){return ln(a+Math.sqrt(a*a+1))},arccosh=function(a){return ln(a+Math.sqrt(a*a-1))},arctanh=function(a){return ln((1+a)/(1-a))/2};sech=function(a){return 1/cosh(a)};csch=function(a){return 1/sinh(a)};coth=function(a){return 1/tanh(a)};
var arcsech=function(a){return arccosh(1/a)},arccsch=function(a){return arcsinh(1/a)},arccoth=function(a){return arctanh(1/a)},sign=function(a){return 0==a?0:0>a?-1:1},logten=function(a){return Math.LOG10E*Math.log(a)},sinn=function(a,d){return Math.pow(Math.sin(d),a)},cosn=function(a,d){return Math.pow(Math.cos(d),a)},tann=function(a,d){return Math.pow(Math.tan(d),a)},cscn=function(a,d){return 1/Math.pow(Math.sin(d),a)},secn=function(a,d){return 1/Math.pow(Math.cos(d),a)},cotn=function(a,d){return 1/
Math.pow(Math.tan(d),a)};function factorial(a,d){null==d&&(d=1);for(var g=a-d;0<g;g-=d)a*=g;return 0>a?NaN:0==a?1:a}function C(a,d){for(var g=1,l=0;l<d;l++)g*=(a-l)/(d-l);return g}function matchtolower(a){return a.toLowerCase()}function nthroot(a,d){return safepow(d,1/a)}function nthlogten(a,d){return Math.log(d)/Math.log(a)}var funcstoindexarr="sinh cosh tanh sech csch coth sqrt ln log exp sin cos tan sec csc cot abs root arcsin arccos arctan arcsec arccsc arccot arcsinh arccosh arctanh arcsech arccsch arccoth".split(" ");
function functoindex(a){for(var d=0;d<funcstoindexarr.length;d++)if(funcstoindexarr[d]==a)return"@"+d+"@"}function indextofunc(a,d){return funcstoindexarr[d]}function safepow(a,d){if(0>a&&Math.floor(d)!=d){for(var g=3;50>g;g+=2)if(1E-6>Math.abs(Math.round(g*d)-g*d))return 0==Math.round(g*d)%2?Math.pow(Math.abs(a),d):-1*Math.pow(Math.abs(a),d);return Math.sqrt(-1)}return Math.pow(a,d)}
function mathjs(a,d){a=a.replace("[","(");a=a.replace("]",")");a=a.replace(/root\s*(\d+)/,"root($1)");a=a.replace(/\|(.*?)\|/g,"abs($1)");a=a.replace(/arc(sin|cos|tan|sec|csc|cot|sinh|cosh|tanh|sech|csch|coth)/gi,"$1^-1");a=a.replace(/(Sin|Cos|Tan|Sec|Csc|Cot|Arc|Abs|Log|Exp|Ln|Sqrt)/gi,matchtolower);a=a.replace(/(sinh|cosh|tanh|sech|csch|coth|sqrt|ln|log|exp|sin|cos|tan|sec|csc|cot|abs|root)/g,functoindex);if(null!=d&&""!=d){var g=d.split("|");g.push("pi");g.sort(function(a,b){return b.length-a.length});
d=g.join("|");for(var l=[],h=0;h<g.length;h++){l[h]=!1;for(var c=0;c<g.length;c++)if(h!=c&&g[c].toLowerCase()==g[h].toLowerCase()&&g[c]!=g[h]){l[h]=!0;break}}a=a.replace(new RegExp("("+d+")","gi"),function(a,b){for(var c=0;c<g.length;c++)if(g[c]==b||!l[c]&&g[c].toLowerCase()==b.toLowerCase())return"(@v"+c+"@)"})}else a=a.replace(/pi/g,"(pi)");a=a.replace(/([0-9])E([\-0-9])/g,"$1(EE)$2");a=a.replace(/e/g,"(E)");a=a.replace(/@(\d+)@/g,indextofunc);a=a.replace(/log_([a-zA-Z\d\.]+)\s*\(/g,"nthlog($1,");
a=a.replace(/log_\(([a-zA-Z\/\d\.]+)\)\s*\(/g,"nthlog($1,");a=a.replace(/log/g,"logten");a=a.replace(/(sin|cos|tan|sec|csc|cot|sinh|cosh|tanh|sech|csch|coth)\^-1/g,"arc$1");a=a.replace(/(sin|cos|tan|sec|csc|cot)\^(\d+)\s*\(/g,"$1n($2,");a=a.replace(/root\s*\((\d+)\)\s*\(/g,"nthroot($1,");a=a.replace(/([0-9])\s+([0-9])/g,"$1*$2");a=a.replace(/#/g,"");a=a.replace(/\s/g,"");null!=d&&""!=d&&(a=a.replace(/@v(\d+)@/g,function(a,b){return g[b]}));a=a.replace(/([0-9])([\(a-zA-Z])/g,"$1*$2");a=a.replace(/(!)([0-9\(a-zA-Z])/g,
"$1*$2");a=a.replace(/\)([\(0-9a-zA-Z]|\.\d+)/g,")*$1");a=a.replace(/([0-9])\*\(EE\)\*?([\-0-9])/g,"$1e$2");for(var f,b,k;-1!=(h=a.indexOf("!"));){if(0==h)return"Error: missing argument";c=h-1;b=a.charAt(c);if("0"<=b&&"9">=b){for(c--;0<=c&&"0"<=(b=a.charAt(c))&&"9">=b;)c--;if("."==b)for(c--;0<=c&&"0"<=(b=a.charAt(c))&&"9">=b;)c--}else if(")"==b){k=1;for(c--;0<=c&&0<k;)b=a.charAt(c),"("==b?k--:")"==b&&k++,c--;for(;0<=c&&("a"<=(b=a.charAt(c))&&"z">=b||"A"<=b&&"Z">=b);)c--}else if("a"<=b&&"z">=b||"A"<=
b&&"Z">=b)for(c--;0<=c&&("a"<=(b=a.charAt(c))&&"z">=b||"A"<=b&&"Z">=b);)c--;else return"Error: incorrect syntax in "+a+" at position "+c;a=a.slice(0,c+1)+"factorial("+a.slice(c+1,h)+")"+a.slice(h+1)}for(;-1!=(h=a.lastIndexOf("^"));){if(0==h)return"Error: missing argument";c=h-1;b=a.charAt(c);if("0"<=b&&"9">=b){for(c--;0<=c&&"0"<=(b=a.charAt(c))&&"9">=b;)c--;if("."==b)for(c--;0<=c&&"0"<=(b=a.charAt(c))&&"9">=b;)c--}else if(")"==b){k=1;for(c--;0<=c&&0<k;)b=a.charAt(c),"("==b?k--:")"==b&&k++,c--;for(;0<=
c&&("a"<=(b=a.charAt(c))&&"z">=b||"A"<=b&&"Z">=b);)c--}else if("a"<=b&&"z">=b||"A"<=b&&"Z">=b)for(c--;0<=c&&("a"<=(b=a.charAt(c))&&"z">=b||"A"<=b&&"Z">=b);)c--;else return"Error: incorrect syntax in "+a+" at position "+c;if(h==a.length-1)return"Error: missing argument";f=h+1;b=a.charAt(f);nch=a.charAt(f+1);if("0"<=b&&"9">=b||"-"==b&&"("!=nch||"."==b){for(f++;f<a.length&&"0"<=(b=a.charAt(f))&&"9">=b;)f++;if("."==b)for(f++;f<a.length&&"0"<=(b=a.charAt(f))&&"9">=b;)f++}else if("("==b||"-"==b&&"("==nch)for("-"==
b&&f++,k=1,f++;f<a.length&&0<k;)b=a.charAt(f),"("==b?k++:")"==b&&k--,f++;else if("a"<=b&&"z">=b||"A"<=b&&"Z">=b){for(f++;f<a.length&&("a"<=(b=a.charAt(f))&&"z">=b||"A"<=b&&"Z">=b);)f++;if("("==b&&a.slice(h+1,f).match(/^(sinn|cosn|tann|secn|cscn|cotn|sin|cos|tan|sec|csc|cot|logten|nthlogten|log|ln|exp|arcsin|arccos|arctan|arcsec|arccsc|arccot|sinh|cosh|tanh|sech|csch|coth|arcsinh|arccosh|arctanh|arcsech|arccsch|arccoth|sqrt|abs|nthroot|factorial|safepow)$/))for(k=1,f++;f<a.length&&0<k;)b=a.charAt(f),
"("==b?k++:")"==b&&k--,f++}else return"Error: incorrect syntax in "+a+" at position "+f;a=a.slice(0,c+1)+"safepow("+a.slice(c+1,h)+","+a.slice(h+1,f)+")"+a.slice(f)}return a};

function updateeeddpos(){}function updateehpos(){}var onlyAscii=/^[\u0000-\u007f]*$/,LivePreviews=[];
function setupLivePreview(a){LivePreviews.hasOwnProperty(a)||("MathJax"==mathRenderer||"Katex"==mathRenderer?(LivePreviews[a]={delay:"MathJax"==mathRenderer?100:0,finaldelay:1E3,preview:null,buffer:null,timeout:null,finaltimeout:null,mjRunning:!1,mjPending:!1,oldText:null,Init:function(){$("#p"+a).css("positive","relative").append('<span id="lpbuf1'+a+'" style="visibility:hidden;position:absolute;"></span>').append('<span id="lpbuf2'+a+'" style="visibility:hidden;position:absolute;"></span>');this.preview=
document.getElementById("lpbuf1"+a);this.buffer=document.getElementById("lpbuf2"+a)},SwapBuffers:function(){var a=this.preview,d=this.buffer;this.buffer=a;this.preview=d;a.style.visibility="hidden";a.style.position="absolute";d.style.position="";d.style.visibility=""},Update:function(a){this.timeout&&clearTimeout(this.timeout);this.finaltimeout&&clearTimeout(this.finaltimeout);this.timeout=setTimeout(this.callback,this.delay);this.finaltimeout=setTimeout(this.DoFinalPreview,this.finaldelay)},RenderNow:function(a){this.buffer.innerHTML=
this.oldtext=a;this.mjRunning=!0;this.RenderBuffer()},RenderBuffer:function(){"MathJax"==mathRenderer?MathJax.Hub.Queue(["Typeset",MathJax.Hub,this.buffer],["PreviewDone",this]):"Katex"==mathRenderer&&(renderMathInElement(this.buffer),"undefined"!=typeof MathJax&&0<$(this.buffer).children(".mj").length?MathJax.Hub.Queue(["PreviewDone",this]):this.PreviewDone())},DoFinalPreview:function(){$("#pbtn"+a).trigger("click")},preformat:function(b){b=normalizemathunicode(b);if(intcalctoproc.hasOwnProperty(a))calcformat[a].match(/inequality/)?
(b=b.replace(/<=/g," le ").replace(/>=/g," ge ").replace(/</g," lt ").replace(/>/g," gt "),b.match(/all\s*real/i)&&(b="text("+b+")")):b=b.replace(/U/g,"uu");else if(vlist.hasOwnProperty(a))b=AMnumfuncPrepVar(a,b)[1];else if(ntupletoproc.hasOwnProperty(a))b=b.replace(/</g,"(:").replace(/>/g,":)");else if(calcformat.hasOwnProperty(a)){var d=calcformat[a];-1==d.indexOf("list")&&-1==d.indexOf("set")&&(b=b.replace(/(\d)\s*,\s*(?=\d{3}\b)/g,"$1"));-1!=d.indexOf("scinot")&&(b=b.replace(/(x|X|\u00D7)/,"xx"))}return b=
b.replace(/[^\u0000-\u007f]/g,"?")},CreatePreview:function(){this.timeout=null;if(!this.mjPending){var b=null==document.getElementById("tc"+a)?document.getElementById("qn"+a).value:document.getElementById("tc"+a).value;b!==this.oldtext&&(this.mjRunning?(this.mjPending=!0,MathJax.Hub.Queue(["CreatePreview",this])):(this.oldtext=b,this.buffer.innerHTML="`"+this.preformat(b)+"`",this.mjRunning=!0,this.RenderBuffer()))}},PreviewDone:function(){this.mjRunning=this.mjPending=!1;this.SwapBuffers();updateeeddpos();
updateehpos()}},"undefined"!=typeof MathJax?(LivePreviews[a].callback=MathJax.Callback(["CreatePreview",LivePreviews[a]]),LivePreviews[a].callback.autoReset=!0):LivePreviews[a].callback=function(){LivePreviews[a].CreatePreview()},LivePreviews[a].Init()):LivePreviews[a]={finaldelay:1E3,finaltimeout:null,Update:function(a){this.finaltimeout&&clearTimeout(this.finaltimeout);this.finaltimeout=setTimeout(this.DoFinalPreview,this.finaldelay)},RenderNow:function(b){var d=document.getElementById("p"+a);d.innerHTML=
b;rendermathnode(d)},DoFinalPreview:function(){$("#pbtn"+a).trigger("click")}})}function updateLivePreview(a){a=a.id.substr(2);setupLivePreview(a);LivePreviews[a].Update()}
function normalizemathunicode(a){a=a.replace(/[\x00-\x09\x0B\x0C\x0E-\x1F\x7F]/g,"");a=a.replace(/\u2013|\u2014|\u2015|\u2212/g,"-");a=a.replace(/\u2044|\u2215/g,"/");a=a.replace(/\u221e/g,"oo").replace(/\u2264/g,"<=").replace(/\u2265/g,">=").replace(/\u222a/g,"U");a=a.replace(/\u00b1/g,"+-").replace(/\u00f7/g,"/").replace(/\u00b7|\u2715|\u00d7|\u22c5/g,"*");a=a.replace(/\u221a/g,"sqrt").replace(/\u221b/g,"root(3)");a=a.replace(/\u00b2/g,"^2").replace(/\u00b3/g,"^3");a=a.replace(/\u2329/g,"<").replace(/\u232a/g,
">");a=a.replace(/\u2080/g,"_0").replace(/\u2081/g,"_1").replace(/\u2082/g,"_2").replace(/\u2083/g,"_3");a=a.replace(/\bOO\b/i,"oo");a=a.replace(/\u03b8/,"theta").replace(/\u03d5/,"phi").replace(/\u03c6/,"phi").replace(/\u03c0/,"pi").replace(/\u03c3/,"sigma").replace(/\u03bc/,"mu");a=a.replace(/\u03b1/,"alpha").replace(/\u03b2/,"beta").replace(/\u03b3/,"gamma").replace(/\u03b4/,"delta").replace(/\u03b5/,"epsilon").replace(/\u03ba/,"kappa");a=a.replace(/\u03bb/,"lambda").replace(/\u03c1/,"rho").replace(/\u03c4/,
"tau").replace(/\u03c7/,"chi").replace(/\u03c9/,"omega");return a=a.replace(/\u03a9/,"Omega").replace(/\u0393/,"Gamma").replace(/\u03a6/,"Phi").replace(/\u0394/,"Delta").replace(/\u03a3/,"Sigma")}function wrapAMnotice(a){return'<span class="AMHnotice">'+a+"</span>"}
function calculate(a,b,d){var c=document.getElementById(a).value;c=normalizemathunicode(c);c=c.replace(/=/,"");if(-1!=d.indexOf("list"))var e=c.split(/,/);else-1!=d.indexOf("set")?e=c.replace(/[\{\}]/g,"").split(/,/):(e=[],e[0]=c);for(c=0;c<e.length;c++){str=e[c];str=str.replace(/(\d)\s*,\s*(?=\d{3}\b)/g,"$1");var g="";if(str.match(/DNE/i))str=str.toUpperCase();else if(str.match(/oo$/)||str.match(/oo\W/))str="`"+str+"`";else{g+=singlevalsyntaxcheck(str,d);str.match(/,/)&&(g+=_("Invalid use of a comma."));
-1!=d.indexOf("allowxtimes")&&(str=str.replace(/(x|X|\u00D7)/,"*"));str=-1!=d.indexOf("mixed")?str.replace(/_/g," "):-1!=d.indexOf("scinot")?str.replace(/(x|X|\u00D7)/,"xx"):str.replace(/^\s+/,"").replace(/\s+$/,"");g+=syntaxcheckexpr(str,d);try{var f=str;f=f.replace(",","*NaN*");f.match(/^\s*[+-]?\s*((\d+(\.\d*)?)|(\.\d+))\s*%\s*$/)&&(f=f.replace(/%/,"")+"/100");-1!=d.indexOf("mixed")&&(f=f.replace(/(\d+)\s+(\d+|\(\d+\))\s*\/\s*(\d+|\(\d+\))/g,"($1+$2/$3)"));-1!=d.indexOf("scinot")&&(f=f.replace("xx",
"*"));var h=scopedmatheval(f)}catch(l){g=_("syntax incomplete")+". "+g,h=NaN}str=str.replace(/[^\u0000-\u007f]/g,"?");isNaN(h)||"Infinity"==h||""===h?""!=str&&(str="`"+str+"` = "+_("undefined")+". "+wrapAMnotice(g)):str=-1==d.indexOf("showval")?"`"+str+"` "+wrapAMnotice(g):"`"+str+" =` "+(1E-15>Math.abs(h)?0:h)+". "+wrapAMnotice(g)}e[c]=str+" "}c=e.join(", ");-1!=d.indexOf("set")&&(c=document.getElementById(a).value.match(/^\s*{.*?}\s*$/)?"{"+c+"}":c+wrapAMnotice(_("syntax error: this answer must be in set notation, a list wrapped in braces like {1,2,3}")));
a=b.substr(1);setupLivePreview(a);LivePreviews[a].RenderNow(c)}
function ineqtointerval(a){a=a.replace(/(\d)\s*,\s*(?=\d{3}\b)/g,"$1");a=a.split(/or/);for(i=0;i<a.length;i++){str=a[i];var b="";(pat=str.match(/^([^<]+)\s*(<=?)\s*([a-zA-Z]\(\s*[a-zA-Z]\s*\)|[a-zA-Z]+)\s*(<=?)([^<]+)$/))?(b="<="==pat[2]?b+"[":b+"(",b+=pat[1]+","+pat[5],b="<="==pat[4]?b+"]":b+")"):(pat=str.match(/^([^>]+)\s*(>=?)\s*([a-zA-Z]\(\s*[a-zA-Z]\s*\)|[a-zA-Z]+)\s*(>=?)([^>]+)$/))?(b=">="==pat[4]?b+"[":b+"(",b+=pat[5]+","+pat[1],b=">="==pat[2]?b+"]":b+")"):(pat=str.match(/^([^><]+)\s*([><]=?)\s*([a-zA-Z]\(\s*[a-zA-Z]\s*\)|[a-zA-Z]+)\s*$/))?
">"==pat[2]?b="(-oo,"+pat[1]+")":">="==pat[2]?b="(-oo,"+pat[1]+"]":"<"==pat[2]?b="("+pat[1]+",oo)":"<="==pat[2]&&(b="["+pat[1]+",oo)"):(pat=str.match(/^\s*([a-zA-Z]\(\s*[a-zA-Z]\s*\)|[a-zA-Z]+)\s*([><]=?)\s*([^><]+)$/))?"<"==pat[2]?b="(-oo,"+pat[3]+")":"<="==pat[2]?b="(-oo,"+pat[3]+"]":">"==pat[2]?b="("+pat[3]+",oo)":">="==pat[2]&&(b="["+pat[3]+",oo)"):b=str.match(/all\s*real/i)?"(-oo,oo)":"";a[i]=b}return b=a.join("U")}
function intcalculate(a,b,d){a=document.getElementById(a).value;a=-1!=d.indexOf("mixed")?a.replace(/_/g," ").replace(/^\s+/,"").replace(/\s+$/,""):a.replace(/^\s+/,"").replace(/\s+$/,"");a=normalizemathunicode(a);if(a.match(/DNE/i))a=a.toUpperCase();else if(""==a.replace(/\s+/g,""))a=_("no answer given");else{var c=[],e=[];if(-1!=d.indexOf("inequality")){var g=a=a.replace(/or/g," or ");a=ineqtointerval(a);var f=str.match(/\b([a-zA-Z]\(\s*[a-zA-Z]\s*\)|[a-zA-Z]+\b)/),h=str.match(/([a-zA-Z]\(\s*[a-zA-Z]\s*\)|[a-zA-Z]+)/);
f=null!=f?f[1]:null!=h?h[1]:""}else g=a;if(-1!=d.indexOf("list")){var l=0;h=[];for(var m=1;m<a.length-1;m++)","!=a.charAt(m)||")"!=a.charAt(m-1)&&"]"!=a.charAt(m-1)||"("!=a.charAt(m+1)&&"["!=a.charAt(m+1)||(h.push(a.substring(l,m)),l=m+1);h.push(a.substring(l))}else h=a.split(/\s*U\s*/i);l=!0;m="";for(i=0;i<h.length;i++){str=h[i];sm=str.charAt(0);em=str.charAt(str.length-1);vals=str.substring(1,str.length-1);vals=vals.split(/,/);if(2!=vals.length||"("!=sm&&"["!=sm||")"!=em&&"]"!=em){-1!=d.indexOf("inequality")?
(g=g.replace("<=","le").replace(">=","ge").replace("<","lt").replace(">","gt"),a="`"+g+"`: "+wrapAMnotice(_("invalid inequality notation"))):a="`"+g.replace(/U/g,"uu")+"`: "+wrapAMnotice(_("invalid interval notation"));l=!1;break}for(j=0;2>j;j++)if(vals[j].match(/oo$/)||vals[j].match(/oo\W/))c[j]=vals[j];else{var n="";q=NaN;n+=singlevalsyntaxcheck(vals[j],d);-1!=d.indexOf("mixed")?vals[j]=vals[j].replace(/_/g," ").replace(/^\s+/,"").replace(/\s+$/,""):vals[j]=vals[j].replace(/^\s+/,"").replace(/\s+$/,
"");n+=syntaxcheckexpr(vals[j],d);if(""==n)try{toeval=vals[j];-1!=d.indexOf("mixed")&&(toeval=toeval.replace(/(\d+)\s+(\d+|\(\d+\))\s*\/\s*(\d+|\(\d+\))/g,"($1+$2/$3)"));var q=scopedmatheval(toeval)}catch(p){n=_("syntax incomplete")+". "}isNaN(q)||"Infinity"==q||""===q?c[j]=_("undefined"):(vals[j]=vals[j],c[j]=(1E-15>Math.abs(q)?0:q).toString());""!=n&&(m+=n)}h[i]=sm+vals[0]+","+vals[1]+em;-1!=d.indexOf("inequality")?(c[0].match(/oo/)?c[1].match(/oo/)?e[i]="RR":e[i]=f+("]"==em?"le":"lt")+c[1]:c[1].match(/oo/)?
e[i]=f+("["==sm?"ge":"gt")+c[0]:e[i]=c[0]+("["==sm?"le":"lt")+f+("]"==em?"le":"lt")+c[1],e[i]=e[i].replace("undefined",'"undefined"')):e[i]=sm+c[0]+","+c[1]+em}l&&(-1!=d.indexOf("inequality")?g.match(/all\s*real/)?a=g:(g=g.replace(/or/g,' \\ "or" \\ '),g=g.replace(/<=/g,"le"),g=g.replace(/>=/g,"ge"),g=g.replace(/</g,"lt"),g=g.replace(/>/g,"gt"),a=-1==d.indexOf("showval")?"`"+g+"`. "+wrapAMnotice(m):"`"+g+"= "+e.join(' \\ "or" \\ ')+"`. "+wrapAMnotice(m)):a=-1==d.indexOf("showval")?"`"+h.join("uu")+
"`. "+wrapAMnotice(m):-1!=d.indexOf("list")?"`"+h.join(",")+"` = "+e.join(" , ")+". "+wrapAMnotice(m):"`"+h.join("uu")+"` = "+e.join(" U ")+". "+wrapAMnotice(m))}a=a.replace(/[^\u0000-\u007f]/g,"?");b=b.substr(1);setupLivePreview(b);LivePreviews[b].RenderNow(a)}
function ntuplecalc(a,b,d){var c=document.getElementById(a).value;c=normalizemathunicode(c);c=c.replace(/\(:|<</g,"<").replace(/:\)|>>/g,">");c=-1!=d.indexOf("mixed")?c.replace(/_/g," ").replace(/^\s+/,"").replace(/\s+$/,""):c.replace(/^\s+/,"").replace(/\s+$/,"");if(c.match(/DNE/i))c.toUpperCase(),outstr=a="DNE";else if(c.match(/^\s*oo\s*$/i))c.toLowerCase(),a="oo",outstr="`oo`";else{a="";var e=0,g=0,f="",h=!0;c.charAt(0).match(/[\(\[<\{]/)||(h=!1);for(var l=0;l<c.length;l++)if(dec=!1,0==e&&(a+=
c.charAt(l),g=l+1,","==c.charAt(l)&&(c.charAt(l+1).match(/[\(\[<\{]/)&&c.charAt(l-1).match(/[\)\]>\}]/)||(h=!1))),c.charAt(l).match(/[\(\[<\{]/)?e++:c.charAt(l).match(/[\)\]>\}]/)&&(e--,dec=!0),0==e&&dec||1==e&&","==c.charAt(l)){sub=c.substring(g,l);g=NaN;if("oo"==sub||"-oo"==sub)a+=sub;else{f+=singlevalsyntaxcheck(sub,d);f+=syntaxcheckexpr(sub,d);try{-1!=d.indexOf("mixed")&&(sub=sub.replace(/(\d+)\s+(\d+|\(\d+\))\s*\/\s*(\d+|\(\d+\))/g,"($1+$2/$3)")),g=scopedmatheval(sub)}catch(m){f+=_("syntax incomplete")+
". "}a=isNaN(g)||"Infinity"==g||""===g?a+_("undefined"):a+g}a+=c.charAt(l);g=l+1}0!=e&&(h=!1);0==h&&(f+=_("Invalid notation")+". ");c=c.replace(/[^\u0000-\u007f]/g,"?");c=c.replace(/</g,"(:").replace(/>/g,":)");outstr=-1==d.indexOf("showval")||0==h?"`"+c+"`. "+wrapAMnotice(f):"`"+c+"` = "+a+". "+wrapAMnotice(f)}null!=b&&(b=b.substr(1),setupLivePreview(b),LivePreviews[b].RenderNow(outstr));return a}
function complexcalc(a,b,d){var c=document.getElementById(a).value;c=normalizemathunicode(c);c=-1!=d.indexOf("mixed")?c.replace(/_/g," ").replace(/^\s+/,"").replace(/\s+$/,""):c.replace(/^\s+/,"").replace(/\s+$/,"");if(c.match(/DNE/i))c.toUpperCase(),d=a="DNE";else{var e=a="";for(var g=c.split(","),f=0;f<g.length;f++){var h=g[f];-1!=d.indexOf("mixed")&&(h=h.replace(/(\d+)\s+(\d+|\(\d+\))\s*\/\s*(\d+|\(\d+\))/g,"($1+$2/$3)"));h=mathjs(h,"i");if(-1==d.indexOf("sloppycomplex")){var l=parsecomplex(g[f]);
"string"==typeof l?e+=l:(e+=singlevalsyntaxcheck(l[0],d),e+=singlevalsyntaxcheck(l[1],d))}e+=syntaxcheckexpr(g[f],d);if(""==e)try{var m=scopedeval("var i=0;"+prepWithMath(h)),n=scopedeval("var i=1;"+prepWithMath(h)),q=scopedeval("var i=-1;"+prepWithMath(h))}catch(p){e+=_("syntax incomplete")}if("synerr"==m||"synerr"==n)e+=_("syntax incomplete"),m=NaN;if(isNaN(m)||"Infinity"==m||isNaN(n)||isNaN(q)||"Infinity"==n){a+=_("undefined");break}else n-=m,0!=f&&(a+=","),a+=m+(0<=n?"+":"")+n+"i"}c=c.replace(/[^\u0000-\u007f]/g,
"?");d=-1==d.indexOf("showval")?"`"+c+"`. "+wrapAMnotice(e):"`"+c+"` = "+a+". "+wrapAMnotice(e)}null!=b&&(b=b.substr(1),setupLivePreview(b),LivePreviews[b].RenderNow(d));return a}
function parsecomplex(a){var b,d;a=a.replace(/\s/,"");a=a.replace(/\((\d+\*?i|i)\)\/(\d+)/g,"$1/$2");a=a.replace(/sin/,"s$n");a=a.replace(/pi/,"p$");var c=a.length;if(2<a.split("i").length)return _("error - more than 1 i in expression");var e=a.indexOf("i");if(-1==e){var g=a;var f="0"}else{f=0;for(d=e-1;0<d;d--)if(g=a.charAt(d),")"==g)f++;else if("("==g)f--;else if(("+"==g||"-"==g)&&0==f)break;0>d&&(d=0);if(0!=f)return _("error - invalid form");f=0;for(b=e+1;b<c;b++)if(g=a.charAt(b),"("==g)f++;else if(")"==
g)f--;else if(("+"==g||"-"==g)&&0==f)break;if(0!=f)return _("error - invalid form");if(0<e-d&&0<b-e&&(b==c||0==d)){if(b==c)g=a.substr(0,d),f=a.substr(d,e-d);else if(0==d)g=a.substr(b),f=a.substr(0,e);else return _("error - invalid form");f+="*"+a.substr(e+1+("*"==a.charAt(e+1)?1:0),b-e-1);f=f.replace("-*","-1*").replace("+*","+1*");f=f.replace(/(\+|-)1\*(.+)/g,"$1$2")}else if(1<e-d)f=a.substr(d,e-d),g=a.substr(0,d)+a.substr(e+1);else if(1<b-e)if(0<e){if("+"!=a.charAt(e-1)&&"-"!=a.charAt(e-1))return _("error - invalid form");
f=a.charAt(e-1)+a.substr(e+1+("*"==a.charAt(e+1)?1:0),b-e-1);g=a.substr(0,e-1)+a.substr(b)}else f=a.substr(e+1,b-e-1),g=a.substr(0,e)+a.substr(b);else f="+"==a.charAt(d)?"1":"-"==a.charAt(d)?"-1":0==e?"1":a.charAt(d),g=(0<e?a.substr(0,d):"")+a.substr(e+1);""==g&&(g="0");"/"==f.charAt(0)?f="1"+f:"+"!=f.charAt(0)&&"-"!=f.charAt(0)||"/"!=f.charAt(1)||(f=f.charAt(0)+"1"+f.substr(1));"*"==f.charAt(f.length-1)&&(f=f.substr(0,f.length-1));"+"==f.charAt(0)&&(f=f.substr(1));"+"==g.charAt(0)&&(g=g.substr(1))}g=
g.replace("s$n","sin");g=g.replace("p$","pi");f=f.replace("s$n","sin");f=f.replace("p$","pi");f=f.replace(/\*\//g,"/");return[g,f]}
function matrixcalc(a,b,d,c,e){function g(a){var b="";try{var c=scopedmatheval(a)}catch(r){b=_("syntax incomplete")+". "}isNaN(c)||"Infinity"==c||""===c?""!=a&&(a=b=_("undefined")+". "):a=(1E-15>Math.abs(c)?0:c)+b;return[a,b]}var f="";"string"!=typeof e&&(e="");if(null!=d&&null!=c){for(var h=0,l="[",m="[",n=0;n<d;n++){0<n&&(l+=",",m+=",");l+="(";m+="(";for(var q=0;q<c;q++){0<q&&(l+=",",m+=",");val=normalizemathunicode(document.getElementById(a+"-"+h).value);l+=val;var p=g(val);p[1]+=syntaxcheckexpr(val,
e);""==p[1]&&(p[1]+=singlevalsyntaxcheck(val,e));""==f&&(f=p[1]);m+=p[0];h++}l+=")";m+=")"}l+="]";m+="]"}else{l=normalizemathunicode(document.getElementById(a).value);p=0;m=l.replace("[","(");m=m.replace("]",")");m=m.replace(/\s+/g,"");d=[];m=m.substring(1,m.length-1);for(a=c=0;a<m.length;a++)"("==m.charAt(a)?p++:")"==m.charAt(a)?p--:","==m.charAt(a)&&0==p&&(d[d.length]=m.substring(c+1,a-1),c=a+1);d[d.length]=m.substring(c+1,m.length-1);for(a=0;a<d.length;a++){calclist2=d[a].split(",");for(m=0;m<
calclist2.length;m++)p=g(calclist2[m]),p[1]+=syntaxcheckexpr(calclist2[m],e),""==p[1]&&(p[1]+=singlevalsyntaxcheck(calclist2[m],e)),""==f&&(f=p[1]),calclist2[m]=p[0];d[a]=calclist2.join(",")}m="[("+d.join("),(")+")]"}l=l.replace(/[^\u0000-\u007f]/g,"?");l=-1==e.indexOf("showval")?"`"+l+"`. "+f:"`"+l+"` = `"+m+"`. "+f;if(null!=b){b=document.getElementById(b);e=b.childNodes.length;for(a=0;a<e;a++)b.removeChild(b.firstChild);b.appendChild(document.createTextNode(l));noMathRender||rendermathnode(b)}return m}
function mathjsformat(a,b){var d=document.getElementById(a).value;document.getElementById(b).value=mathjs(d)}function stringqpreview(a,b){var d=document.getElementById(a).value,c=b.substr(1);setupLivePreview(c);LivePreviews[c].RenderNow("`"+d+"`")}
function AMnumfuncPrepVar(a,b){var d=vlist[a],c=flist[a],e=d.split("|");e.push("DNE");d.match(/lambda/)&&(b=b.replace(/lamda/,"lambda"));b=b.replace(/,/g,"").replace(/^\s+/,"").replace(/\s+$/,"");b=normalizemathunicode(b);var g=[];var f=b.replace(/(arcsinh|arccosh|arctanh|arcsech|arccsch|arccoth|arcsin|arccos|arctan|arcsec|arccsc|arccot|sinh|cosh|tanh|sech|csch|coth|sqrt|ln|log|exp|sin|cos|tan|sec|csc|cot|abs|root)/g,functoindex);for(var h=0;h<e.length;h++)if("varE"==e[h])b=b.replace("E","varE"),
f=f.replace("E","varE");else{g[h]=!1;for(var l=0;l<e.length;l++)if(h!=l&&e[l].toLowerCase()==e[h].toLowerCase()&&e[l]!=e[h]){g[h]=!0;break}}b=b.replace(new RegExp("("+d+")","gi"),function(a,b){for(var c=0;c<e.length;c++)if(e[c]==b||!g[c]&&e[c].toLowerCase()==b.toLowerCase())return"@v"+c+"@"});b=b.replace(/@v(\d+)@/g,function(a,b){return e[b]});f=f.replace(new RegExp("("+d+")","gi"),function(a,b){for(var c=0;c<e.length;c++)if(e[c]==b||!g[c]&&e[c].toLowerCase()==b.toLowerCase())return"@v"+c+"@"});f=
f.replace(/@v(\d+)@/g,function(a,b){return e[b]});l=[];for(h=0;h<e.length;h++)if(1<e[h].length){var m=!1;-1!=arraysearch(e[h].toLowerCase(),greekletters)&&(m=!0);if(e[h].match(/^\w+_\w+$/)){m=g[h]?"g":"gi";var n=(new RegExp(/^(\w+)_(\w+)$/,m)).exec(e[h]),q=new RegExp(n[1]+"_\\("+n[2]+"\\)",m);f=f.replace(q,e[h]);b=b.replace(q,e[h]);1<n[1].length&&-1==arraysearch(n[1].toLowerCase(),greekletters)&&(n[1]='"'+n[1]+'"');1<n[2].length&&-1==arraysearch(n[2].toLowerCase(),greekletters)&&(n[2]='"'+n[2]+'"');
f=f.replace(new RegExp(n[0],m),n[1]+"_"+n[2]);b=b.replace(new RegExp(n[0],"g"),"repvars"+h);e[h]="repvars"+h}else m||"varE"==e[h]||l.push(e[h])}0<l.length&&(vltq=l.join("|"),f=f.replace(new RegExp("("+vltq+")","g"),'"$1"'));f=f.replace("varE","E");f=f.replace(/@(\d+)@/g,indextofunc);d.match(/\bf\b/)&&!c.match(/\bf\b/)&&(f=f.replace(/([^a-zA-Z])f\^([\d\.]+)([^\d\.])/g,"$1f^$2{::}$3"),f=f.replace(/([^a-zA-Z])f\(/g,"$1f{::}("));d.match(/\bg\b/)&&!c.match(/\bg\b/)&&(f=f.replace(/([^a-zA-Z])g\^([\d\.]+)([^\d\.])/g,
"$1g^$2{::}$3"),f=f.replace(/([^a-zA-Z])g\(/g,"$1g{::}("));return[b,f,e.join("|")]}
function AMpreview(a,b){var d=a.slice(2),c=AMnumfuncPrepVar(d,document.getElementById(a).value),e=c[0],g=c[1],f=c[2],h=flist[d];ptlist=pts[d].split(",");var l="",m=0;c=NaN;var n=!1;1==iseqn[d]?(e.match(/=/)?1<e.match(/=/g).length&&(n=!0):n=!0,e=e.replace(/(.*)=(.*)/,"$1-($2)")):e.match(/=/)||(n=!0);""!=h&&(reg=new RegExp("("+h+")\\(","g"),e=e.replace(reg,"$1*sin($1+"));vars=f.split("|");for(h=prepWithMath(mathjs(e,f));m<ptlist.length&&(isNaN(c)||"Infinity"==c);){var q="";testvals=ptlist[m].split("~");
for(l=0;l<vars.length;l++)q+="var "+vars[l]+"="+testvals[l]+";";q+=h;l=_("syntax ok");try{c=scopedeval(q)}catch(p){l=_("syntax error")}"synerr"==c&&(l=_("syntax error"));m++}f=syntaxcheckexpr(e,"",f);if(isNaN(c)||"Infinity"==c)l=_("syntax error");""!=f&&(l=l==_("syntax ok")?l+(". "+_("warning")+": "+f):l+(". "+f));onlyAscii.test(e)||(l+=". "+_("Your answer contains an unrecognized symbol"),g=g.replace(/[^\u0000-\u007f]/g,"?"));1==iseqn[d]&&n?l=_("syntax error: this is not an equation"):"undefined"!==
typeof iseqn[d]||n||(l=_("syntax error: you gave an equation, not an expression"));if('"DNE"'==g||"oo"==g)l=_("syntax ok");d=b.substr(1);setupLivePreview(d);LivePreviews[d].RenderNow("`"+g+"` "+wrapAMnotice(l))}function AMmathpreview(a,b){for(var d=document.getElementById(a).value,c=document.getElementById(b),e=c.childNodes.length,g=0;g<e;g++)c.removeChild(c.firstChild);c.appendChild(document.createTextNode("`"+d+"`"));noMathRender||rendermathnode(c)}
function singlevalsyntaxcheck(a,b){if(!(a.match(/DNE/i)||a.match(/oo$/)||a.match(/oo\W/)||-1!=b.indexOf("allowmixed")&&a.match(/^\s*\-?\s*\d+\s*(_|\s)\s*(\d+|\(\d+\))\s*\/\s*(\d+|\(\d+\))\s*$/)))if(-1!=b.indexOf("fracordec")){if(a=a.replace(/([0-9])\s+([0-9])/g,"$1*$2").replace(/\s/g,""),!a.match(/^\-?\(?\d+\s*\/\s*\-?\d+\)?$/)&&!a.match(/^\-?\d+$/)&&!a.match(/^\-?(\d+|\d+\.\d*|\d*\.\d+)$/))return _(" invalid entry format")+". "}else if(-1!=b.indexOf("fraction")||-1!=b.indexOf("reducedfraction")){if(a=
a.replace(/([0-9])\s+([0-9])/g,"$1*$2").replace(/\s/g,""),!a.match(/^\(?\-?\(?\d+\)?\/\(?\d+\)?$/)&&!a.match(/^\(?\d+\)?\/\(?\-?\d+\)?$/)&&!a.match(/^\s*?\-?\d+\s*$/))return _("not a valid fraction")+". "}else if(-1!=b.indexOf("mixednumber")){if(!(a.match(/^\(?\-?\s*\(?\d+\)?\/\(?\d+\)?$/)||a.match(/^\(?\d+\)?\/\(?\-?\d+\)?$/)||a.match(/^\s*\-?\s*\d+\s*(_|\s)\s*(\d+|\(\d+\))\s*\/\s*(\d+|\(\d+\))\s*$/)||a.match(/^\s*\-?\s*\d+\s*$/)))return _("not a valid mixed number")+". ";a.replace(/_/," ")}else if(-1!=
b.indexOf("scinot")){if(a=a.replace(/\s/g,""),a=a.replace(/(x|X|\u00D7)/,"xx"),!a.match(/^\-?[1-9](\.\d*)?(\*|xx)10\^(\(?\-?\d+\)?)$/)){if(-1==b.indexOf("scinotordec"))return _("not valid scientific notation")+". ";if(!a.match(/^\-?(\d+|\d+\.\d*|\d*\.\d+)$/))return _("not valid decimal or scientific notation")+". "}}else if(-1!=b.indexOf("decimal")&&-1==b.indexOf("nodecimal")){if(!a.match(/^\-?(\d+|\d+\.\d*|\d*\.\d+)$/))return _(" not a valid integer or decimal number")+". "}else if(!onlyAscii.test(a))return _("Your answer contains an unrecognized symbol")+
". ";return""}
function syntaxcheckexpr(a,b,d){var c="";-1!=b.indexOf("notrig")&&a.match(/(sin|cos|tan|cot|sec|csc)/i)?c+=_("no trig functions allowed")+". ":-1!=b.indexOf("nodecimal")&&-1!=a.indexOf(".")?c+=_("no decimals allowed")+". ":-1==b.indexOf("mixed")&&a.match(/\-?\s*\d+\s*(_|\s)\s*(\d+|\(\d+\))\s*\/\s*(\d+|\(\d+\))/)&&(c+=_("mixed numbers are not allowed")+". ");for(var e=b=0,g=0,f=0;f<a.length;f++)"("==a.charAt(f)?b++:")"==a.charAt(f)?b--:"["==a.charAt(f)?e++:"]"==a.charAt(f)?e--:"|"==a.charAt(f)&&(g=
1-g);if(0!=b||0!=e)c+=" ("+_("unmatched parens")+"). ";0!=g&&(c+=" ("+_("unmatched absolute value bars")+"). ");reg=d?new RegExp("(sqrt|ln|log|exp|sinh|cosh|tanh|sech|csch|coth|sin|cos|tan|sec|csc|cot|abs)s*("+d+"|\\d+)","i"):/(sqrt|ln|log|exp|sinh|cosh|tanh|sech|csch|coth|sin|cos|tan|sec|csc|cot|abs)s*(\d+)/i;errstuff=a.match(reg);null!=errstuff&&(c+="["+_("use function notation")+" - "+_("use $1 instead of $2",errstuff[1]+"("+errstuff[2]+")",errstuff[0])+"]. ");d&&(reg=new RegExp("(repvars\\d+|arc|sqrt|root|ln|log|exp|sinh|cosh|tanh|sech|csch|coth|sin|cos|tan|sec|csc|cot|abs|pi|sign|DNE|e|oo|"+
d+")","ig"),a.replace(reg,"").match(/[a-zA-Z]/)&&(c+=_(" Check your variables - you might be using an incorrect one")+". "));if(2<(a.match(/\|/g)||[]).length)for(d=/\|.*?\|\s*(.|$)/g;match=d.exec(a);)if(""!=match[1]&&match[1].match(/[^+\-\*\/\^\)]/)){c+=_(" You may want to use abs(x) instead of |x| for absolute values to avoid ambiguity")+". ";break}a.match(/%/)&&!a.match(/^\s*[+-]?\s*((\d+(\.\d*)?)|(\.\d+))\s*%\s*$/)&&(c+=_(" Do not use the percent symbol, %")+". ");return c}
var greekletters="alpha beta chi delta epsilon gamma varphi phi psi sigma rho theta lambda mu nu omega tau".split(" "),calctoproc={},intcalctoproc={},calcformat={},functoproc={},matcalctoproc={},ntupletoproc={},complextoproc={},callbackstack={},matsize={},vlist={},flist={},pts={},iseqn={};
function doonsubmit(a,b,d){for(var c in callbackstack)callbackstack[c](c);if(null!=a){if("submitted"==a.className)return alert(_("You have already submitted this page.  Please be patient while your submission is processed.")),a.className="submitted2",!1;if("submitted2"==a.className)return!1;a.className="submitted";if(!d&&(b&&1==$("input[name=saveforlater]").attr("data-clicked")?(b=!0,$("input[name=saveforlater]").attr("data-clicked",0)):b=confirmSubmit(a),!b))return a.className="",!1}imathasDraw.encodea11ydraw();
for(c in intcalctoproc)if(c=parseInt(c),null!=document.getElementById("tc"+c)){fullstr=document.getElementById("tc"+c).value;fullstr=-1!=calcformat[c].indexOf("mixed")?fullstr.replace(/_/g," ").replace(/^\s+/,"").replace(/\s+$/,""):fullstr.replace(/\s+/g,"");fullstr=normalizemathunicode(fullstr);if(fullstr.match(/DNE/i))fullstr=fullstr.toUpperCase();else{-1!=calcformat[c].indexOf("inequality")&&(fullstr=ineqtointerval(fullstr));if(-1!=calcformat[c].indexOf("list")){b=0;a=[];for(d=1;d<fullstr.length-
1;d++)","!=fullstr.charAt(d)||")"!=fullstr.charAt(d-1)&&"]"!=fullstr.charAt(d-1)||"("!=fullstr.charAt(d+1)&&"["!=fullstr.charAt(d+1)||(a.push(fullstr.substring(b,d)),b=d+1);a.push(fullstr.substring(b))}else a=fullstr.split(/\s*U\s*/i);for(k=0;k<a.length;k++)if(str=a[k],0<str.length&&str.match(/,/)){sm=str.charAt(0);em=str.charAt(str.length-1);vals=str.substring(1,str.length-1);vals=vals.split(/,/);for(j=0;2>j;j++)if(!vals[j].match(/oo$/)&&!vals[j].match(/oo\W/)){b="";try{-1!=calcformat[c].indexOf("mixed")&&
(vals[j]=vals[j].replace(/(\d+)\s+(\d+|\(\d+\))\s*\/\s*(\d+|\(\d+\))/g,"($1+$2/$3)"));var e=scopedmatheval(vals[j])}catch(g){b="syntax incomplete"}isNaN(e)||"Infinity"==e||""===e||(vals[j]=(1E-15>Math.abs(e)?0:e)+b)}a[k]=sm+vals[0]+","+vals[1]+em}fullstr=-1!=calcformat[c].indexOf("list")?a.join(","):a.join("U")}document.getElementById("qn"+c).value=fullstr}for(c in calctoproc)if(c=parseInt(c),null!=document.getElementById("tc"+c)){str=document.getElementById("tc"+c).value;str=normalizemathunicode(str);
str=str.replace(/=/,"");if(-1!=calcformat[c].indexOf("list"))a=str.split(/,/);else if(-1!=calcformat[c].indexOf("set"))if(str.match(/^\s*{.*?}\s*$/))a=str.replace(/^\s*{(.*?)}\s*$/,"$1").split(/,/);else continue;else a=[],a[0]=str;for(b=0;b<a.length;b++){str=a[b];str=str.replace(/(\d)\s*,\s*(?=\d{3}\b)/g,"$1");str=str.replace(",","*NaN*");if(-1!=calcformat[c].indexOf("scinot")||-1!=calcformat[c].indexOf("allowxtimes"))str=str.replace(/(x|X|\u00D7)/,"*");str.match(/^\s*[+-]?\s*((\d+(\.\d*)?)|(\.\d+))\s*%\s*$/)&&
(str=str.replace(/%/,"")+"/100");str=str.replace(/(\d+)\s*_\s*(\d+|\(\d+\))\s*\/\s*(\d+|\(\d+\))/g,"($1+$2/$3)");-1!=calcformat[c].indexOf("mixed")&&(str=str.replace(/(\d+)\s+(\d+|\(\d+\))\s*\/\s*(\d+|\(\d+\))/g,"($1+$2/$3)"));e=str.match(/^\s*$/)?"":str.match(/oo$/)||str.match(/oo\W/)?str:str.match(/DNE/i)?str.toUpperCase():scopedmatheval(str);a[b]=e}document.getElementById("qn"+c).value=a.join(",")}for(c in matcalctoproc){c=parseInt(c);if(null!=matsize[c]){if(null==document.getElementById("qn"+
c+"-0"))continue;msize=matsize[c].split(",");str=matrixcalc("qn"+c,null,msize[0],msize[1])}else{if(null==document.getElementById("tc"+c))continue;str=matrixcalc("tc"+c,null)}document.getElementById("qn"+c).value=str}for(c in ntupletoproc)c=parseInt(c),null!=document.getElementById("tc"+c)&&(str=ntuplecalc("tc"+c,null,calcformat[c]),document.getElementById("qn"+c).value=str);for(c in complextoproc)c=parseInt(c),null!=document.getElementById("tc"+c)&&(str=complexcalc("tc"+c,null,calcformat[c]),document.getElementById("qn"+
c).value=str);for(c in functoproc)if(c=parseInt(c),null!=document.getElementById("tc"+c)){str=document.getElementById("tc"+c).value;str=str.replace(/,/g,"");str=normalizemathunicode(str);e=AMnumfuncPrepVar(c,str);str=e[0];varlist=e[2];if(1==iseqn[c])str=str.replace(/(.*)=(.*)/,"$1-($2)");else if(str.match("="))continue;fl=flist[c];""!=fl&&(reg=new RegExp("("+fl+")\\(","g"),str=str.replace(reg,"$1*sin($1+"));vars=varlist.split("|");e=document.getElementById("qn"+c);e.value=mathjs(str,varlist);ptlist=
pts[c].split(",");vals=[];for(a=0;a<ptlist.length;a++){inputs=ptlist[a].split("~");totest="";for(b=0;b<inputs.length;b++)totest+="var "+vars[b]+"="+inputs[b]+";";totest=""==e.value?totest+(Math.random()+";"):totest+(prepWithMath(e.value)+";");try{vals[a]=scopedeval(totest)}catch(g){vals[a]=NaN}"synerr"==vals[a]&&(vals[a]=NaN)}document.getElementById("qn"+c+"-vals").value=vals.join(",")}return!0}function scopedeval(a){try{return eval(a)}catch(b){return"synerr"}}
function scopedmatheval(a){if(a.match(/^\s*[a-df-zA-Z]\s*$/))return"";try{return eval(prepWithMath(mathjs(a)))}catch(b){return""}}function arraysearch(a,b){for(var d=0;d<b.length;d++)if(b[d]==a)return d;return-1}
function toggleinlinebtn(a,b){var d=document.getElementById(b),c=document.getElementById(a);"none"==c.style.display?(c.style.display="",c.setAttribute("aria-hidden",!1),d.setAttribute("aria-expanded",!0)):(c.style.display="none",c.setAttribute("aria-hidden",!0),d.setAttribute("aria-expanded",!1));c=d.innerHTML;d.innerHTML=c.match(/\[\+\]/)?c.replace(/\[\+\]/,"[-]"):c.replace(/\[\-\]/,"[+]")}
function assessbackgsave(){var a=$(this).attr("name").match(/^(qs|qn|tc)(\d+)/);if(null!==a&&window.FormData){a=1*a[2];1E3<a&&(a=Math.floor(a/1E3+.001)-1);"undefined"!=typeof tinyMCE&&tinyMCE.triggerSave();doonsubmit();var b=new FormData,d=new RegExp("^(qn|tc|qs)("+a+"\\b|"+(a+1)+"\\d{3})");$("input,select,textarea").each(function(a,e){e.name.match(d)&&("radio"!=e.type&&"checkbox"!=e.type||e.checked)&&("file"==e.type?b.append(e.name,e.files[0]):b.append(e.name,e.value))});b.append("backgroundsaveforlater",
1);b.append("tosaveqn",a);b.append("asidverify",document.getElementById("asidverify").value);b.append("disptime",document.getElementById("disptime").value);b.append("isreview",document.getElementById("isreview").value);$.ajax({type:"POST",url:window.location.origin+window.location.pathname,data:b,contentType:!1,processData:!1,qn:a}).done(function(a){-1!=assessFormIsDirty.indexOf(1*this.qn)&&assessFormIsDirty.splice(assessFormIsDirty.indexOf(1*this.qn),1)})}}
function assessbackgsubmit(a,b){a=parseInt(a);if(!confirmSubmit($("#embedqwrapper"+a)[0]))return!1;"undefined"!=typeof tinyMCE&&tinyMCE.triggerSave();doonsubmit();var d={},c=!!window.FormData;if(c)var e=new FormData;for(var g=[],f=document.getElementsByTagName("input"),h=0;h<f.length;h++)g.push(f[h]);f=document.getElementsByTagName("select");for(h=0;h<f.length;h++)g.push(f[h]);f=document.getElementsByTagName("textarea");for(h=0;h<f.length;h++)g.push(f[h]);f=null!=a?new RegExp("^(qn|tc|qs)("+a+"\\b|"+
(a+1)+"\\d{3})"):/^(qn|tc|qs)/;for(h=0;h<g.length;h++)g[h].name.match(f)&&("radio"!=g[h].type&&"checkbox"!=g[h].type||g[h].checked)&&(c?"file"==g[h].type?e.append(g[h].name,g[h].files[0]):e.append(g[h].name,g[h].value):"file"==g[h].type?alert("File upload submissions are not supported by this browser"):d[g[h].name]=g[h].value);null!==a?c?(e.append("toscore",a),e.append("verattempts",document.getElementById("verattempts"+a).value)):(d.toscore=a,d.verattempts=document.getElementById("verattempts"+a).value):
c?e.append("verattempts",document.getElementById("verattempts").value):d.verattempts=document.getElementById("verattempts").value;c?(e.append("asidverify",document.getElementById("asidverify").value),e.append("disptime",document.getElementById("disptime").value),e.append("isreview",document.getElementById("isreview").value)):(d.asidverify=document.getElementById("asidverify").value,d.disptime=document.getElementById("disptime").value,d.isreview=document.getElementById("isreview").value);d={type:"POST",
url:assesspostbackurl,data:c?e:d,dataType:"text",qn:a,noticetgt:b};c&&(d.contentType=!1,d.processData=!1);$.ajax(d).done(function(a){null!=this.noticetgt&&(document.getElementById(this.noticetgt).innerHTML="");if(null!==this.qn){for(var b=this.qn,c=[];-1<a.indexOf("<script")||-1<a.indexOf("\x3c/script");){var d=a.indexOf("<script"),e=a.indexOf(">",d),f=a.indexOf("\x3c/script",d),g=a.indexOf(">",f);c.push(a.substring(e+1,f));a=a.substring(0,d)+a.substring(g+1)}document.getElementById("embedqwrapper"+
b).innerHTML=a;usingASCIIMath&&rendermathnode(document.getElementById("embedqwrapper"+b));usingASCIISvg&&setTimeout("drawPics()",100);usingTinymceEditor&&initeditor("textareas","mceEditor");for(a=initstack.length=0;a<c.length;a++)try{if(k=c[a].match(/canvases\[(\d+)\]/))"undefined"!=typeof G_vmlCanvasManager&&(c[a]=c[a]+'G_vmlCanvasManager.initElement(document.getElementById("canvas'+k[1]+'"));'),c[a]=c[a]+"imathasDraw.initCanvases("+k[1]+");";eval(c[a])}catch(r){}for(a=0;a<initstack.length;a++)initstack[a]();
c=(b+1).toString().length;for(a in LivePreviews)(a==b||999<a&&a.toString().substr(0,c)==b+1)&&LivePreviews[a].Init();$(window).trigger("ImathasEmbedReload",[b]);-1!=assessFormIsDirty.indexOf(1*b)&&assessFormIsDirty.splice(assessFormIsDirty.indexOf(1*b),1);$("#embedqwrapper"+b).find("input,textarea").on("change",trackDirty);c=0;"undefined"!=typeof window.pageYOffset?c=window.pageYOffset:(c=document.body,a=document.documentElement,a=a.clientHeight?a:c,c=a.scrollTop);var h=findPos(document.getElementById("embedqwrapper"+
b))[1];c>h&&setTimeout(function(){window.scroll(0,h)},150)}}).fail(function(a){null!=this.noticetgt&&(document.getElementById(this.noticetgt).innerHTML=_("Submission Error"))})}function embedEnterHandler(a){$("#"+a+" input[type=text][name^=qn]").off("keydown.embedenterhandler").on("keydown.embedenterhandler",function(a){13==a.which&&(a.preventDefault(),a=parseInt($(this).closest(".embedqwrapper").attr("id").substr(13)),assessbackgsubmit(a,"submitnotice"+a))})}
$(window).on("ImathasEmbedReload",function(a,b){embedEnterHandler("embedqwrapper"+b)});
function AutoSuggest(a,b){var d=this;this.elem=a;this.suggestions=b;this.eligible=[];this.inputText=null;this.highlighted=-1;this.div=document.getElementById("autosuggest");null==this.div&&(this.div=document.createElement("div"),this.div.id="autosuggest",document.getElementsByTagName("body")[0].appendChild(this.div),this.div.appendChild(document.createElement("ul")));a.setAttribute("autocomplete","off");if(!a.id){var c="autosuggest"+AutoSuggestIdCounter;AutoSuggestIdCounter++;a.id=c}a.onkeydown=function(a){a=
d.getKeyCode(a);switch(a){case 9:d.useSuggestion("tab");break;case 13:return d.useSuggestion("enter"),!1;case 27:d.hideDiv();break;case 38:0<d.highlighted&&d.highlighted--;d.changeHighlight(a);break;case 40:d.highlighted<d.eligible.length-1&&d.highlighted++,d.changeHighlight(a)}};a.onkeyup=function(a){switch(d.getKeyCode(a)){case 9:case 27:case 38:case 40:break;default:1<this.value.length?(d.inputText=this.value,d.getEligible(),d.highlighted=0<d.eligible.length?0:-1,d.createDiv(),d.positionDiv(),
d.showDiv()):(d.hideDiv(),0==this.value.length&&(d.inputText=""))}};a.onblur=function(a){setTimeout(d.hideDiv,100)};this.useSuggestion=function(a){-1<this.highlighted&&(this.elem.value=this.eligible[this.highlighted]);this.hideDiv()};this.showDiv=function(){this.div.style.display="block"};this.hideDiv=function(){d.div.style.display="none";d.highlighted=-1};this.changeHighlight=function(){var a=this.div.getElementsByTagName("LI");for(i in a)a[i].className=this.highlighted==i?"selected":""};this.positionDiv=
function(){var a=this.elem,b=findPos(a);b[1]+=a.offsetHeight;this.div.style.left=b[0]+"px";this.div.style.top=b[1]+"px"};this.createDiv=function(){var a=document.createElement("ul");for(i in this.eligible){var b=this.eligible[i],c=document.createElement("li"),h=document.createElement("a");h.href="#";h.onclick=function(){return!1};h.innerHTML=b;c.appendChild(h);d.highlighted==i&&(c.className="selected");a.appendChild(c)}this.div.replaceChild(a,this.div.childNodes[0]);a.onmouseover=function(a){for(a=
d.getEventSource(a);a.parentNode&&"LI"!=a.tagName.toUpperCase();)a=a.parentNode;var b=d.div.getElementsByTagName("LI");for(i in b)if(b[i]==a){d.highlighted=i;break}d.changeHighlight()};a.onclick=function(a){d.useSuggestion("click");d.hideDiv();d.cancelEvent(a);return!1};this.div.className="suggestion_list";this.div.style.position="absolute"};this.getEligible=function(){this.eligible=[];if(-1==this.inputText.indexOf(" ")){var a=new RegExp("\\b"+this.inputText.toLowerCase());for(i in this.suggestions){var b=
this.suggestions[i];b.toLowerCase().match(a)&&(this.eligible[this.eligible.length]=b)}}};this.getKeyCode=function(a){if(a)return a.keyCode;if(window.event)return window.event.keyCode};this.getEventSource=function(a){if(a)return a.target;if(window.event)return window.event.srcElement};this.cancelEvent=function(a){a&&(a.preventDefault(),a.stopPropagation());window.event&&(window.event.returnValue=!1)}}var AutoSuggestIdCounter=0;function isBlank(a){return!a||0===a.length||/^\s*$/.test(a)}
function editdebit(a){var b=$("#qn"+(1*a.id.substr(2)-1));!isBlank(a.value)&&b.hasClass("iscredit")&&(b.is("select")?b.css("margin-right",20):b.width(b.width()+20),b.css("padding-left",0),b.removeClass("iscredit"))}function editcredit(a){var b=$("#qn"+(1*a.id.substr(2)-2));isBlank(a.value)||b.hasClass("iscredit")||(b.is("select")?b.css("margin-right",0):b.width(b.width()-20),b.css("padding-left",20),b.addClass("iscredit"))}
function initcreditboxes(){$(".creditbox").each(function(a,b){if(!isBlank(b.value)&&20!=$(b).css("padding-left")){var d=$("#qn"+(1*b.id.substr(2)-2));d.is("select")?d.css("margin-right",0):d.width(d.width()-20);d.css("padding-left",20);d.addClass("iscredit")}})}initstack.push(initcreditboxes);$(window).on("ImathasEmbedReload",initcreditboxes);
function initqsclickchange(){$("input[id^=qs][value=spec]").each(function(a,b){$(b).siblings("input[type=text]").off("keyup.qsclickchange").on("keyup.qsclickchange",function(a){8!=a.keyCode&&46!=a.keyCode&&$(b).prop("checked",!0)})})}$(window).on("ImathasEmbedReload",initqsclickchange);initstack.push(initqsclickchange);
function initShowAnswer(){$("input.sabtn + span.hidden").attr("aria-hidden",!0).attr("aria-expanded",!1);$("input.sabtn").each(function(){var a=$(this).siblings("span:first-of-type").attr("id");$(this).attr("aria-expanded",!1).attr("aria-controls",a).off("click.sashow").on("click.sashow",function(){"true"==$(this).attr("aria-expanded")?$(this).attr("aria-expanded",!1).siblings("span:first-of-type").attr("aria-hidden",!0).addClass("hidden"):$(this).attr("aria-expanded",!0).siblings("span:first-of-type").attr("aria-hidden",
!1).removeClass("hidden")})});$("input.dsbtn + div.hidden").attr("aria-hidden",!0).attr("aria-expanded",!1);$("input.dsbtn").each(function(){var a=$(this).siblings("div:first-of-type").attr("id");$(this).attr("aria-expanded",!1).attr("aria-controls",a).off("click.sashow").on("click.sashow",function(){"true"==$(this).attr("aria-expanded")?$(this).attr("aria-expanded",!1).siblings("div:first-of-type").attr("aria-hidden",!0).addClass("hidden"):$(this).attr("aria-expanded",!0).siblings("div:first-of-type").attr("aria-hidden",
!1).removeClass("hidden")})})}$(window).on("ImathasEmbedReload",initShowAnswer);initstack.push(initShowAnswer);
function assessmentTimer(a,b){var d=Date.now(),c,e,g,f,h;var l=setInterval(function(){c=a-Math.floor((Date.now()-d)/1E3);if(0>=c){c=0;clearInterval(l);if(b){document.getElementById("timelimitholder").className="noticetext";document.getElementById("timelimitholder").innerHTML=_("Time limit expired - submitting now");document.getElementById("timelimitholder").style.fontSize="300%";if(null==document.getElementById("qform")){setTimeout("window.location.href='"+imasroot+"/assessment/showtest.php?action=skip&superdone=true'",
2E3);return}var m=document.getElementById("qform"),n=m.getAttribute("action");m.setAttribute("action",n+"&superdone=true");doonsubmit(m,!0,!0)&&setTimeout('document.getElementById("qform").submit()',2E3);return 0}alert(_("Time Limit has elapsed"))}f=Math.floor(c%60);g=Math.floor(c/60%60);e=Math.floor(c/3600);0==e&&5>g&&(document.getElementById("timeremaining").className="noticetext");0==e&&0==g&&5>=f&&(document.getElementById("timeremaining").style.fontSize="150%");h=(0<e?e+":":"")+(0<e&&10>g?"0":
"")+g+":"+(10>f?"0":"")+f;document.getElementById("timeremaining").innerHTML=h},1E3);$(document).ready(function(){var a=$("#timerwrap"),b=a.position();$(window).scroll(function(){$(window).scrollTop()>=b.top?a.addClass("sticky"):a.removeClass("sticky")})})}
function toggletimer(){"[x]"==$("#timerhide").text()?($("#timercontent").hide(),$("#timerhide").text("["+_("Show Timer")+"]"),$("#timerhide").attr("title","["+_("Show Timer")+"]")):($("#timercontent").show(),$("#timerhide").text("[x]"),$("#timerhide").attr("title",_("Hide Timer")))}
function toggleintroshow(a){var b=document.getElementById("introtoggle"+a);a=document.getElementById("intropiece"+a);b.innerHTML.match("Hide")?(b.innerHTML=b.innerHTML.replace("Hide","Show"),$(b).attr("aria-expanded",!1),a.style.display="none",$(a).attr("aria-hidden",!0).attr("aria-expanded",!1)):(b.innerHTML=b.innerHTML.replace("Show","Hide"),$(b).attr("aria-expanded",!0),a.style.display="block",$(a).attr("aria-hidden",!1).attr("aria-expanded",!0))}
function togglemainintroshow(a){$("#intro").hasClass("hidden")?($(a).html(_("Hide Intro/Instructions")).attr("aria-expanded",!0),$("#intro").removeClass("hidden").addClass("intro").attr("aria-hidden",!1).attr("aria-expanded",!0)):($("#intro").addClass("hidden").attr("aria-hidden",!0).attr("aria-expanded",!1),$(a).html(_("Show Intro/Instructions")).attr("aria-expanded",!1))}
function prepWithMath(a){a=a.replace(/\b(abs|acos|asin|atan|ceil|floor|cos|sin|tan|sqrt|exp|max|min|pow)\(/g,"Math.$1(");a=a.replace(/\(E\)/g,"(Math.E)");return a=a.replace(/\((PI|pi)\)/g,"(Math.PI)")}var assessFormIsDirty=[];function trackDirty(){var a=$(this).attr("name").match(/^(qs|qn|tc)(\d+)/);null!==a&&(a=1*a[2],1E3<a&&(a=Math.floor(a/1E3+.001)-1),-1==assessFormIsDirty.indexOf(a)&&assessFormIsDirty.push(a))}
$(function(){$("div.question").find("input,select,textarea").on("change",trackDirty);$(window).on("beforeunload",function(){if(0==$("form.submitted,form.submitted2").length&&0<assessFormIsDirty.length)return _("Are you sure you want to leave this assessment? You may have unsubmitted work")})});

function checkComplete(b){if("undefined"!=typeof tinyMCE)try{tinyMCE.triggerSave()}catch(d){}var c=!0;$(b).find("input:visible,textarea:visible,select:visible").each(function(b,a){if("undefined"==typeof a.type||"undefined"==typeof a.name||""==a.name)return 1;if("text"==a.type||"textarea"==a.type||"password"==a.type||"file"==a.type)""==a.value&&0==$("#qs"+a.id.substr(2)+"-d:checked,#qs"+a.id.substr(2)+"-i:checked").length&&(c=!1);else if(-1!=a.type.indexOf("select")){if(-1==a.selectedIndex||"qn"==
a.name.substr(0,2)&&0==a.selectedIndex)c=!1}else"radio"==a.type&&0==$("input[name="+a.name+"]:checked").length&&(c=!1)});return c}function confirmSubmit(b){return checkComplete(b)?!0:confirm("Not all question parts have been answered.  Are you sure you want to submit this question?")}
function confirmSubmit2(b){return checkComplete(b)?!0:confirm("Not all questions have been answered completely.  If you are saving your answers for later, this is fine.  If you are submitting for grading, are you sure you want to submit now?")};

var canvases=[],drawla=[],imathasDraw=function(v){function L(a,g){var d=a[0];za.push(d);var b=a[1].substr(9).split(","),f=a[2],l=a[3],h=a[4],r=a[5];h==r&&(h=-1,r=1);var k=a[6],I=a[7],w=a[8],v=document.getElementById("a11ydraw"+d);Aa[d]=document.getElementById("qn"+d);e[d]={el:v,xmin:f,xmax:l,ymin:h,ymax:r,imgborder:k,imgwidth:I,imgheight:w};e[d].pixperx=(I-2*k)/(l-f);e[d].pixpery=h==r?1:(w-2*k)/(r-h);"inequality"==b[0]?(f=b.shift(),0==b.length?b=["line"]:"both"==b[0]&&(b=["line","parab"])):"twopoint"==
b[0]?(f=b.shift(),0==b.length&&(b=["line","parab","abs","circle","dot"])):"numberline"==b[0]?(f="basic",b.shift()):f="basic";e[d].afgroup=f;l={inequality:{line:[{mode:10,descr:_("Linear inequality with solid line"),inN:3,input:_("Enter 2 points on the line, then a third point in the shaded region")},{mode:10.2,descr:_("Linear inequality with dashed line"),inN:3,input:_("Enter 2 points on the line, then a third point in the shaded region")}],parab:[{mode:10.3,descr:_("Parabolic inequality with solid line"),
inN:3,input:_("Enter 2 points on the line, then a third point in the shaded region")},{mode:10.4,descr:_("Parabolic inequality with dashed line"),inN:3,input:_("Enter 2 points on the line, then a third point in the shaded region")}]},twopoint:{line:[{mode:5,descr:_("Line"),inN:2,input:_("Enter two points on the line")}],lineseg:[{mode:5.3,descr:_("Line segment"),inN:2,input:_("Enter the starting and ending point of the line segment")}],ray:[{mode:5.2,descr:_("Ray"),inN:2,input:_("Enter the starting point of the ray and another point on the ray")}],
parab:[{mode:6,descr:_("Parabola"),inN:2,input:_("Enter the vertex, then another point on the parabola")}],horizparab:[{mode:6.1,descr:_("Parabola opening right or left"),inN:2,input:_("Enter the vertex, then another point on the parabola")}],cubic:[{mode:6.3,descr:_("Cubic"),inN:2,input:_("Enter the inflection point, then another point on the cubic")}],cuberoot:[{mode:6.6,descr:_("Cube root"),inN:2,input:_("Enter the inflection point of the cube root, then another point on the graph")}],abs:[{mode:8,
descr:_("Absolute value"),inN:2,input:_("Enter the corner point of the absolute value, then another point on the graph")}],rational:[{mode:8.2,descr:_("Rational"),inN:2,input:_("Enter the point where the vertical and horizontal asymptote cross, then a point on the graph")}],exp:[{mode:8.3,descr:_("Exponential"),inN:2,input:_("Enter two points on the graph")}],log:[{mode:8.4,descr:_("Logarithm"),inN:2,input:_("Enter two points on the graph")}],genexp:[{mode:8.5,descr:_("Shifted Exponential"),inN:3,
input:_("Enter a point on the asymptote, then enter two points on the graph")}],genlog:[{mode:8.6,descr:_("Shifted Logarithm"),inN:3,input:_("Enter a point on the asymptote, then enter two points on the graph")}],circle:[{mode:7,descr:_("Circle"),inN:2,input:_("Enter the center point of the circle, then a point on the graph")}],ellipse:[{mode:7.2,descr:_("Ellipse"),inN:2,input:_("Enter the center point of the ellipse, then a point offset from the center by the horizontal radius and vertical radius")}],
hyperbola:[{mode:7.4,descr:_("Vertical hyperbola"),inN:2,input:_("Enter the center point of the hyperbola, then a point (x,y) where x is the x-coordinate of the co-vertex and y is the y-coordinate of the vertex")},{mode:7.5,descr:_("Horizontal hyperbola"),inN:2,input:_("Enter the center point of the hyperbola, then a point (x,y) where x is the x-coordinate of the vertex and y is the y-coordinate of the co-vertex")}],dot:[{mode:1,descr:_("Solid dot"),inN:1,input:_("Enter the coordinates of the dot")}],
opendot:[{mode:2,descr:_("Open dot"),inN:1,input:_("Enter the coordinates of the dot")}],trig:[{mode:9,descr:_("Cosine"),inN:2,input:_("Enter a point at the start of a phase, then a point half a phase further")},{mode:9.2,descr:_("Sine"),inN:2,input:_("Enter a point at the start of a phase, then a point a quarter phase further")}],vector:[{mode:5.4,descr:_("Vector"),inN:2,input:_("Enter the starting and ending point of the vector")}]},basic:{line:[{mode:0,descr:_("Lines"),inN:"list",input:_("Enter list of points to connect with lines")}],
lineseg:[{mode:.5,descr:_("Line segment"),inN:2,input:_("Enter the starting and ending point of the line segment")}],freehand:[{mode:.7,descr:_("Freehand"),inN:"list",input:_("Enter list of points to connect with lines")}],dot:[{mode:1,descr:_("Solid dot"),inN:1,input:_("Enter the coordinates of the dot")}],opendot:[{mode:2,descr:_("Open dot"),inN:1,input:_("Enter the coordinates of the dot")}],polygon:[{mode:0,descr:_("Polygon"),inN:"list",input:_("Enter list of points to place dots connected with lines"),
dotline:1}],closedpolygon:[{mode:0,descr:_("Polygon"),inN:"list",input:_("Enter list of points to place dots connected with lines"),dotline:2}]}};h=[];r=[];k=[];for(w=0;w<b.length;w++)if(l[f].hasOwnProperty(b[w])){if(0==w)var x=l[f][b[w]][0].mode;for(v=0;v<l[f][b[w]].length;v++)k[l[f][b[w]][v].mode]=l[f][b[w]][v],h.push(l[f][b[w]][v].mode),I='<option value="'+l[f][b[w]][v].mode+'"',I+=' data-af="'+b[w]+'">'+l[f][b[w]][v].descr+"</option>",r.push(I)}e[d].defmode=x;e[d].inputmodes=h;e[d].selects=r;
e[d].moderef=k;if(null==g&&n.hasOwnProperty(d)){for(w=0;w<n[d].length;w++)K(d,0,A(n[d][w],d));for(w=0;w<N[d].length;w++)K(d,1,A(N[d][w],d));for(w=0;w<H[d].length;w++)K(d,2,A(H[d][w],d));for(w=0;w<c[d].length;w++)K(d,z[d][w],A(c[d][w][0],d)+","+A(c[d][w][1],d));for(w=0;w<m[d].length;w++)K(d,S[d][w],A(m[d][w][0],d)+","+A(m[d][w][1],d)+","+A(m[d][w][2],d))}else if(null!=g)for(w=0;w<g.length;w++)K(d,g[w][0],g[w][1].replace(/\[/g,"(").replace(/\]/g,")"))}function K(a,c,d){var b=e[a];c=c||b.defmode;var f=
d||"";html='<select aria-label="'+_("Drawing element type")+'" onchange="imathasDraw.changea11ydraw(this,\''+a+"')\">";for(j in b.selects)html+=b.selects[j];html+="</select><br/>";html+='<span class="a11ydrawinstr"></span><br/>';html+='<input type="text" aria-label="'+_("Point list")+'" value="'+f+'"/>';html+='<button type="button" class="imgbutton" onclick="imathasDraw.removea11ydraw(this)">';html+=_("Remove")+"</button>";a=v("<li>",{"class":"a11ydrawrow"}).html(html);v(b.el).append(a);a.find("select").val(c);
a.find(".a11ydrawinstr").text(b.moderef[c].input);d||a.find("select").focus()}function A(a,c){var d=e[c];var b=(a[0]-d.imgborder)/d.pixperx+d.xmin;d=(d.imgheight-a[1]-d.imgborder)/d.pixpery+d.ymin;b=Math.round(100*b)/100;d=Math.round(100*d)/100;return"("+b+","+d+")"}function O(f,g,d,b,u,l,h,r,k,I,w,x,y,F,A){var D=document.getElementById(g);if(v(D).is(":hidden"))v(D).on("mouseover.imathasdrawwait touchstart.imathasdrawwait",function(){v(D).off("mouseover.imathasdrawwait touchstart.imathasdrawwait");
Fa(f)});D.style.userSelect="none";D.style.webkitUserSelect="none";D.style.MozUserSelect="none";g=U(D);e[f]={el:D,left:g.x,top:g.y,width:D.offsetWidth,height:D.offsetHeight,xmin:u,xmax:l,ymin:h,ymax:r,imgborder:k,imgwidth:I,imgheight:w,mode:x,dotline:y};"string"==typeof A&&-1!=A.indexOf(":")?(A=A.split(":"),e[f].snaptogridx=1*A[0],e[f].snaptogridy=1*A[1]):(e[f].snaptogridx=A,e[f].snaptogridy=A);e[f].pixperx=(I-2*k)/(l-u);e[f].pixpery=h==r?1:(w-2*k)/(r-h);Aa[f]=document.getElementById(b);null==n[f]&&
(n[f]=[]);null==N[f]&&(N[f]=[]);null==H[f]&&(H[f]=[]);null==c[f]&&(c[f]=[]);null==z[f]&&(z[f]=[]);null==m[f]&&(m[f]=[]);null==S[f]&&(S[f]=[]);pa[f]=F;Za[f]=new Image;Za[f].onload=function(){var b=a;a=f;t();a=b};Za[f].src=d}function t(f,g){try{var d=e[a].el.getContext("2d")}catch(Db){rb||(rb=!0,alert("Your browser does not support drawing answer entry.  Please try again using Internet Explorer 6+ (Windows), FireFox 1.5+ (Win/Mac), Safari 1.3+ (Mac), Opera 9+ (Win/Mac), or Camino (Mac)"))}d.fillStyle=
"rgb(0,0,255)";d.lineWidth=2;d.strokeStyle="rgb(0,0,255)";d.clearRect(0,0,e[a].imgwidth,e[a].imgheight);d.drawImage(Za[a],0,0);d.beginPath();for(var b=0;b<m[a].length;b++){var u=b%3;d.strokeStyle=sb[u];d.fillStyle=sb[u];var D=null,h=null,t=null,k=null,I=null;3==m[a][b].length?(h=m[a][b][1][0],k=m[a][b][1][1],t=m[a][b][2][0],I=m[a][b][2][1]):2==m[a][b].length?(h=m[a][b][1][0],k=m[a][b][1][1],t=f,I=g):F==b&&null!=f&&1==m[a][b].length&&(h=f,k=g);if(null!=t){d.save();d.fillStyle=Cb[u];d.beginPath();if(10.2>=
S[a][b]){h!=m[a][b][0][0]&&(D=(k-m[a][b][0][1])/(h-m[a][b][0][0]));if(1>Math.abs(h-m[a][b][0][0])||100<Math.abs(D))d.moveTo(m[a][b][0][0],0),d.lineTo(m[a][b][0][0],e[a].imgheight),t>h?(d.lineTo(e[a].imgwidth,e[a].imgheight),d.lineTo(e[a].imgwidth,0)):(d.lineTo(0,e[a].imgheight),d.lineTo(0,0));else{var w=D*(t-h)+k,y=m[a][b][0][1]-D*m[a][b][0][0],A=m[a][b][0][1]+D*(e[a].imgwidth-m[a][b][0][0]);d.moveTo(0,y);d.lineTo(e[a].imgwidth,A);I>w?(d.lineTo(e[a].imgwidth,e[a].imgheight),d.lineTo(0,e[a].imgheight)):
(d.lineTo(e[a].imgwidth,0),d.lineTo(0,0))}d.closePath()}else{var Z=d,G=m[a][b][0][0],K=m[a][b][0][1],O=h,L=k,M=t,U=I,P=e[a].imgwidth,T=e[a].imgheight;Z.beginPath();if(L==K)Z.moveTo(0,L),Z.lineTo(P,L),U<K?(Z.lineTo(P,0),Z.lineTo(0,0)):(Z.lineTo(P,T),Z.lineTo(0,T));else{var J=(L-K)/((O-G)*(O-G)),R=-2*J*G,ca=0;L>K&&(ca=T);var Y=J*G*G+K-ca,ea=Math.sqrt(R*R-4*J*Y);Y+=ca;var Q=(-R-ea)/(2*J),X=J*Q*Q+R*Q+Y,fa=(-R+ea)/(2*J),sa=X;if(fa<Q){var Fa=Q;Q=fa;fa=Fa}var wa=2*J*(Q-G),Da=X-wa*Q,Ea=-wa,za=(Da-(sa-Ea*
fa))/(Ea-wa),La=wa*za+Da;if(0>J&&U<J*M*M+R*M+Y||0<J&&U>J*M*M+R*M+Y)Z.moveTo(Q,X),Z.quadraticCurveTo(za,La,fa,sa);else{var gb=T;2>Math.abs(X-T)&&(gb=0);Z.moveTo(0,X);Z.lineTo(Q,X);Z.quadraticCurveTo(za,La,fa,sa);Z.lineTo(P,sa);Z.lineTo(P,gb);Z.lineTo(0,gb)}}Z.closePath()}d.fill();d.restore()}d.beginPath();if(null!=h)if(10.2>=S[a][b])h!=m[a][b][0][0]&&(D=(k-m[a][b][0][1])/(h-m[a][b][0][0])),1>Math.abs(h-m[a][b][0][0])||100<Math.abs(D)?10.2==S[a][b]?null!=l&&10<=l.mode&&11>l.mode&&l.num==b&&0==l.subnum?
(d.dashedLine(m[a][b][1][0],m[a][b][1][1],m[a][b][1][0],e[a].imgheight),d.dashedLine(m[a][b][1][0],m[a][b][1][1],m[a][b][1][0],0)):(d.dashedLine(m[a][b][0][0],m[a][b][0][1],m[a][b][0][0],e[a].imgheight),d.dashedLine(m[a][b][0][0],m[a][b][0][1],m[a][b][0][0],0)):(d.moveTo(m[a][b][0][0],0),d.lineTo(m[a][b][0][0],e[a].imgheight),d.stroke()):(y=m[a][b][0][1]-D*m[a][b][0][0],A=m[a][b][0][1]+D*(e[a].imgwidth-m[a][b][0][0]),10.2==S[a][b]?null!=l&&10<=l.mode&&11>l.mode&&l.num==b&&0==l.subnum?(d.dashedLine(m[a][b][1][0],
m[a][b][1][1],e[a].imgwidth,A),d.dashedLine(m[a][b][1][0],m[a][b][1][1],0,y)):(d.dashedLine(m[a][b][0][0],m[a][b][0][1],e[a].imgwidth,A),d.dashedLine(m[a][b][0][0],m[a][b][0][1],0,y)):(d.moveTo(0,y),d.lineTo(e[a].imgwidth,A),d.stroke()));else if(10.3==S[a][b]){if(h!=m[a][b][0][0])if(k==m[a][b][0][1])d.moveTo(0,k),d.lineTo(e[a].imgwidth,k);else{var E=(k-m[a][b][0][1])/((h-m[a][b][0][0])*(h-m[a][b][0][0]));if(k>m[a][b][0][1])var W=Math.sqrt((e[a].imgheight-m[a][b][0][1])/E)+m[a][b][0][0],ia=-1*Math.sqrt((e[a].imgheight-
m[a][b][0][1])/E)+m[a][b][0][0],Ma=m[a][b][0][1]-(e[a].imgheight-m[a][b][0][1]),ja=e[a].imgheight;else W=Math.sqrt((0-m[a][b][0][1])/E)+m[a][b][0][0],ia=-1*Math.sqrt((0-m[a][b][0][1])/E)+m[a][b][0][0],Ma=2*m[a][b][0][1],ja=0;var xa=W+2/3*(m[a][b][0][0]-W),ya=ja+2/3*(Ma-ja),Na=xa+(ia-W)/3,Oa=ya;d.moveTo(W,ja);d.bezierCurveTo(xa,ya,Na,Oa,ia,ja)}d.stroke()}else if(h!=m[a][b][0][0]){var Ba=d,ta=m[a][b][0][0],Ga=m[a][b][0][1],Ua=h,Ha=k,Va=e[a].imgwidth,eb=e[a].imgheight;if(Ha==Ga)Ba.moveTo(0,Ha),Ba.dashedLine(0,
Ha,Va,Ha);else{var ka=(Ha-Ga)/((Ua-ta)*(Ua-ta)),Ia=-2*ka*ta,hb=0;Ha>Ga&&(hb=eb);var $a=ka*ta*ta+Ga-hb,Wa=Math.sqrt(Ia*Ia-4*ka*$a);$a+=hb;var ab=(-Ia-Wa)/(2*ka),bb=(-Ia+Wa)/(2*ka);if(bb<ab){var fb=ab;ab=bb;bb=fb}for(var V=ta,Ca=Ga,Pa=0;V>ab-5&&-5<V;)0==Pa%2?Ba.moveTo(V,Ca):Ba.lineTo(V,Ca),V-=Math.min(Math.sqrt(64/(1+Math.pow(2*ka*(V-ta),2))),Math.sqrt(8/Math.abs(ka))),Ca=ka*V*V+Ia*V+$a,Pa++;V=ta;Ca=Ga;for(Pa=0;V<bb+5&&V<Va+5;)0==Pa%2?Ba.moveTo(V,Ca):Ba.lineTo(V,Ca),V+=Math.min(Math.sqrt(64/(1+Math.pow(2*
ka*(V-ta),2))),Math.sqrt(8/Math.abs(ka))),Ca=ka*V*V+Ia*V+$a,Pa++}Ba.stroke()}d.beginPath();for(var B=0;B<m[a][b].length;B++)2==B?(d.arc(m[a][b][B][0],m[a][b][B][1],4,0,2*Math.PI,!0),d.fill()):d.fillRect(m[a][b][B][0]-3,m[a][b][B][1]-3,6,6);1==m[a][b].length&&null!=h&&d.fillRect(h-3,k-3,6,6);d.beginPath()}d.fillStyle="rgb(0,0,255)";d.lineWidth=1==pa[a]?4:2;d.strokeStyle="rgb(0,0,255)";for(b=0;b<c[a].length;b++){if(5<=z[a][b]&&6>z[a][b]){if(k=h=D=null,2==c[a][b].length?(h=c[a][b][1][0],k=c[a][b][1][1]):
x==b&&null!=f&&1==c[a][b].length&&(h=f,k=g),null!=h)if(5.3==z[a][b]||5.4==z[a][b]){if(d.moveTo(c[a][b][0][0],c[a][b][0][1]),d.lineTo(h,k),5.4==z[a][b]){var da=[h-c[a][b][0][0],k-c[a][b][0][1]];var ib=Math.sqrt(da[0]*da[0]+da[1]*da[1]);if(1E-4<ib){da=[da[0]/ib,da[1]/ib];var cb=[-da[1],da[0]];d.moveTo(h-15*da[0]-4*cb[0],k-15*da[1]-5*cb[1]);d.lineTo(h,k);d.moveTo(h-15*da[0]+4*cb[0],k-15*da[1]+5*cb[1]);d.lineTo(h,k)}}}else h!=c[a][b][0][0]&&(D=(k-c[a][b][0][1])/(h-c[a][b][0][0])),1>Math.abs(h-c[a][b][0][0])||
100<Math.abs(D)?5.2==z[a][b]?(d.moveTo(c[a][b][0][0],c[a][b][0][1]),k>c[a][b][0][1]?d.lineTo(c[a][b][0][0],e[a].imgheight):d.lineTo(c[a][b][0][0],0)):(d.moveTo(c[a][b][0][0],0),d.lineTo(c[a][b][0][0],e[a].imgheight)):(y=c[a][b][0][1]-D*c[a][b][0][0],A=c[a][b][0][1]+D*(e[a].imgwidth-c[a][b][0][0]),y=c[a][b][0][1]-D*c[a][b][0][0],A=c[a][b][0][1]+D*(e[a].imgwidth-c[a][b][0][0]),5.2==z[a][b]?(d.moveTo(c[a][b][0][0],c[a][b][0][1]),h>c[a][b][0][0]?d.lineTo(e[a].imgwidth,A):d.lineTo(0,y)):(d.moveTo(0,y),
d.lineTo(e[a].imgwidth,A)))}else if(6==z[a][b]||6.1==z[a][b]){if(h=k=null,2==c[a][b].length?(h=c[a][b][1][0],k=c[a][b][1][1]):x==b&&null!=f&&1==c[a][b].length&&(h=f,k=g),null!=h)if(6==z[a][b])k==c[a][b][0][1]?(d.moveTo(0,k),d.lineTo(e[a].imgwidth,k)):h==c[a][b][0][0]?(d.moveTo(h,c[a][b][0][1]),k>c[a][b][0][1]?d.lineTo(h,e[a].imgheight):d.lineTo(h,0)):(E=(k-c[a][b][0][1])/((h-c[a][b][0][0])*(h-c[a][b][0][0])),k>c[a][b][0][1]?(W=Math.sqrt((e[a].imgheight-c[a][b][0][1])/E)+c[a][b][0][0],ia=-1*Math.sqrt((e[a].imgheight-
c[a][b][0][1])/E)+c[a][b][0][0],Ma=c[a][b][0][1]-(e[a].imgheight-c[a][b][0][1]),ja=e[a].imgheight):(W=Math.sqrt((0-c[a][b][0][1])/E)+c[a][b][0][0],ia=-1*Math.sqrt((0-c[a][b][0][1])/E)+c[a][b][0][0],Ma=2*c[a][b][0][1],ja=0),xa=W+2/3*(c[a][b][0][0]-W),ya=ja+2/3*(Ma-ja),Na=xa+(ia-W)/3,Oa=ya,d.moveTo(W,ja),d.bezierCurveTo(xa,ya,Na,Oa,ia,ja));else if(6.1==z[a][b])if(h==c[a][b][0][0])d.moveTo(h,0),d.lineTo(h,e[a].imgheight);else if(k==c[a][b][0][1])d.moveTo(c[a][b][0][0],k),h>c[a][b][0][0]?d.lineTo(e[a].imgwidth,
k):d.lineTo(0,k);else{E=(h-c[a][b][0][0])/((k-c[a][b][0][1])*(k-c[a][b][0][1]));if(h>c[a][b][0][0]){W=Math.sqrt((e[a].imgwidth-c[a][b][0][0])/E)+c[a][b][0][1];ia=-1*Math.sqrt((e[a].imgwidth-c[a][b][0][0])/E)+c[a][b][0][1];var Xa=c[a][b][0][0]-(e[a].imgwidth-c[a][b][0][0]),Qa=e[a].imgwidth}else W=Math.sqrt((0-c[a][b][0][0])/E)+c[a][b][0][1],ia=-1*Math.sqrt((0-c[a][b][0][0])/E)+c[a][b][0][1],Xa=2*c[a][b][0][0],Qa=0;ya=W+2/3*(c[a][b][0][1]-W);xa=Qa+2/3*(Xa-Qa);Oa=ya+(ia-W)/3;Na=xa;d.moveTo(Qa,W);d.bezierCurveTo(xa,
ya,Na,Oa,Qa,ia)}}else if(6.5==z[a][b]){if(h=k=null,2==c[a][b].length?(h=c[a][b][1][0],k=c[a][b][1][1]):x==b&&null!=f&&1==c[a][b].length&&(h=f,k=g),null!=h&&h!=c[a][b][0][0])if(k==c[a][b][0][1])d.moveTo(c[a][b][0][0],k),h>c[a][b][0][0]?d.lineTo(e[a].imgwidth,k):d.lineTo(0,k);else{var jb=h<c[a][b][0][0]?-1:1;E=(k-c[a][b][0][1])/Math.sqrt(jb*(h-c[a][b][0][0]));d.moveTo(c[a][b][0][0],c[a][b][0][1]);p=c[a][b][0][0];q=c[a][b][0][1];do p+=3*jb,d.lineTo(p,E*Math.sqrt(jb*(p-c[a][b][0][0]))+c[a][b][0][1]);
while(0<p&&p<e[a].imgwidth&&0<q&&q<e[a].imgheight)}}else if(6.3==z[a][b]){if(h=k=null,2==c[a][b].length?(h=c[a][b][1][0],k=c[a][b][1][1]):x==b&&null!=f&&1==c[a][b].length&&(h=f,k=g),null!=h&&h!=c[a][b][0][0])if(k==c[a][b][0][1])d.moveTo(0,k),d.lineTo(e[a].imgwidth,k);else{E=(k-c[a][b][0][1])/safepow(h-c[a][b][0][0],3);for(var q=0,p=0;p<e[a].imgwidth+4;p+=1)q=E*safepow(p-c[a][b][0][0],3)+c[a][b][0][1],-100>q&&(q=-100),q>e[a].imgheight+100&&(q=e[a].imgheight+100),0==p?d.moveTo(p,q):d.lineTo(p,q)}}else if(6.6==
z[a][b]){if(h=k=null,2==c[a][b].length?(h=c[a][b][1][0],k=c[a][b][1][1]):x==b&&null!=f&&1==c[a][b].length&&(h=f,k=g),null!=h&&h!=c[a][b][0][0])if(k==c[a][b][0][1])d.moveTo(0,k),d.lineTo(e[a].imgwidth,k);else for(E=(k-c[a][b][0][1])/safepow(h-c[a][b][0][0],1/3),p=q=0;p<e[a].imgwidth+4;p+=1)q=E*safepow(p-c[a][b][0][0],1/3)+c[a][b][0][1],-100>q&&(q=-100),q>e[a].imgheight+100&&(q=e[a].imgheight+100),0==p?d.moveTo(p,q):d.lineTo(p,q)}else if(7<=z[a][b]&&8>z[a][b]){if(h=k=null,2==c[a][b].length?(h=c[a][b][1][0],
k=c[a][b][1][1]):x==b&&null!=f&&1==c[a][b].length&&(h=f,k=g),null!=h&&(h!=c[a][b][0][0]||k!=c[a][b][0][1]))if(7==z[a][b])d.arc(c[a][b][0][0],c[a][b][0][1],Math.sqrt((h-c[a][b][0][0])*(h-c[a][b][0][0])+(k-c[a][b][0][1])*(k-c[a][b][0][1])),0,2*Math.PI,!0);else if(7.2==z[a][b]){var Ya=Math.abs(h-c[a][b][0][0]),tb=Math.abs(k-c[a][b][0][1]);if(x==b||null!=l&&l.num==b)d.strokeStyle="rgb(0,255,255)",d.lineWidth=1,d.dashedLine(h,k,h-2*(h-c[a][b][0][0]),k,5),d.dashedLine(h,k,h,k-2*(k-c[a][b][0][1]),5),d.dashedLine(h,
k-2*(k-c[a][b][0][1]),h-2*(h-c[a][b][0][0]),k-2*(k-c[a][b][0][1]),5),d.dashedLine(h-2*(h-c[a][b][0][0]),k,h-2*(h-c[a][b][0][0]),k-2*(k-c[a][b][0][1]),5),d.lineWidth=2;d.strokeStyle="rgb(0,0,255)";d.save();d.beginPath();d.translate(c[a][b][0][0]-Ya,c[a][b][0][1]-tb);d.scale(Ya,tb);d.arc(1,1,1,0,2*Math.PI,!1);d.restore()}else if(7.4==z[a][b]){var la=Math.abs(h-c[a][b][0][0]),ma=Math.abs(k-c[a][b][0][1]),ua=Math.abs(ma/la);d.strokeStyle="rgb(0,200,0)";d.dashedLine(c[a][b][0][0],c[a][b][0][1],e[a].imgwidth,
c[a][b][0][1]+ua*(e[a].imgwidth-c[a][b][0][0]));d.dashedLine(c[a][b][0][0],c[a][b][0][1],e[a].imgwidth,c[a][b][0][1]-ua*(e[a].imgwidth-c[a][b][0][0]));d.dashedLine(c[a][b][0][0],c[a][b][0][1],0,c[a][b][0][1]-ua*c[a][b][0][0]);d.dashedLine(c[a][b][0][0],c[a][b][0][1],0,c[a][b][0][1]+ua*c[a][b][0][0]);if(x==b||null!=l&&l.num==b)d.strokeStyle="rgb(0,255,255)",d.lineWidth=1,d.dashedLine(h,k,h-2*(h-c[a][b][0][0]),k,5),d.dashedLine(h,k,h,k-2*(k-c[a][b][0][1]),5),d.dashedLine(h,k-2*(k-c[a][b][0][1]),h-2*
(h-c[a][b][0][0]),k-2*(k-c[a][b][0][1]),5),d.dashedLine(h-2*(h-c[a][b][0][0]),k,h-2*(h-c[a][b][0][0]),k-2*(k-c[a][b][0][1]),5),d.lineWidth=2;d.beginPath();d.strokeStyle="rgb(0,0,255)";for(p=0;p<e[a].imgwidth+4;p+=3)q=c[a][b][0][1]+Math.sqrt((Math.pow(p-c[a][b][0][0],2)/(la*la)+1)*ma*ma),-100>q&&(q=-100),q>e[a].imgheight+100&&(q=e[a].imgheight+100),0==p?d.moveTo(p,q):d.lineTo(p,q);d.stroke();d.beginPath();for(p=0;p<e[a].imgwidth+4;p+=3)q=c[a][b][0][1]-Math.sqrt((Math.pow(p-c[a][b][0][0],2)/(la*la)+
1)*ma*ma),-100>q&&(q=-100),q>e[a].imgheight+100&&(q=e[a].imgheight+100),0==p?d.moveTo(p,q):d.lineTo(p,q)}else if(7.5==z[a][b]){ma=Math.abs(h-c[a][b][0][0]);la=Math.abs(k-c[a][b][0][1]);ua=Math.abs(la/ma);d.strokeStyle="rgb(0,200,0)";d.dashedLine(c[a][b][0][0],c[a][b][0][1],e[a].imgwidth,c[a][b][0][1]+ua*(e[a].imgwidth-c[a][b][0][0]));d.dashedLine(c[a][b][0][0],c[a][b][0][1],e[a].imgwidth,c[a][b][0][1]-ua*(e[a].imgwidth-c[a][b][0][0]));d.dashedLine(c[a][b][0][0],c[a][b][0][1],0,c[a][b][0][1]-ua*c[a][b][0][0]);
d.dashedLine(c[a][b][0][0],c[a][b][0][1],0,c[a][b][0][1]+ua*c[a][b][0][0]);if(x==b||null!=l&&l.num==b)d.strokeStyle="rgb(0,255,255)",d.lineWidth=1,d.dashedLine(h,k,h-2*(h-c[a][b][0][0]),k,5),d.dashedLine(h,k,h,k-2*(k-c[a][b][0][1]),5),d.dashedLine(h,k-2*(k-c[a][b][0][1]),h-2*(h-c[a][b][0][0]),k-2*(k-c[a][b][0][1]),5),d.dashedLine(h-2*(h-c[a][b][0][0]),k,h-2*(h-c[a][b][0][0]),k-2*(k-c[a][b][0][1]),5),d.lineWidth=2;d.beginPath();d.strokeStyle="rgb(0,0,255)";for(q=0;q<e[a].imgwidth+4;q+=3)p=c[a][b][0][0]+
Math.sqrt((Math.pow(q-c[a][b][0][1],2)/(la*la)+1)*ma*ma),-100>p&&(p=-100),p>e[a].imgwidth+100&&(p=e[a].imgwidth+100),0==q?d.moveTo(p,q):d.lineTo(p,q);d.stroke();d.beginPath();for(q=0;q<e[a].imgwidth+4;q+=3)p=c[a][b][0][0]-Math.sqrt((Math.pow(q-c[a][b][0][1],2)/(la*la)+1)*ma*ma),-100>p&&(p=-100),p>e[a].imgwidth+100&&(p=e[a].imgwidth+100),0==q?d.moveTo(p,q):d.lineTo(p,q)}}else if(8==z[a][b])k=h=D=null,2==c[a][b].length?(h=c[a][b][1][0],k=c[a][b][1][1]):x==b&&null!=f&&1==c[a][b].length&&(h=f,k=g),null!=
h&&(h!=c[a][b][0][0]&&(D=(k-c[a][b][0][1])/(h-c[a][b][0][0]),h<c[a][b][0][0]&&(D*=-1)),1>Math.abs(h-c[a][b][0][0])||100<Math.abs(D)?(d.moveTo(c[a][b][0][0],c[a][b][0][1]),k>c[a][b][0][1]?d.lineTo(c[a][b][0][0],e[a].imgheight):d.lineTo(c[a][b][0][0],0)):(y=c[a][b][0][1]+D*c[a][b][0][0],A=c[a][b][0][1]+D*(e[a].imgwidth-c[a][b][0][0]),d.moveTo(0,y),d.lineTo(c[a][b][0][0],c[a][b][0][1]),d.lineTo(e[a].imgwidth,A)));else if(8.3==z[a][b]){if(h=k=null,2==c[a][b].length?(h=c[a][b][1][0],k=c[a][b][1][1]):x==
b&&null!=f&&1==c[a][b].length&&(h=f,k=g),null!=h&&h!=c[a][b][0][0])if(k==c[a][b][0][1])d.moveTo(0,k),d.lineTo(e[a].imgwidth,k);else{var kb=e[a].ymax*e[a].pixpery+e[a].imgborder,ub=kb-c[a][b][0][1],Ja=kb-k;if(0<ub*Ja&&h!=c[a][b][0][0]){var na=safepow(Ja/ub,1/(h-c[a][b][0][0]));E=Ja/safepow(na,h);d.moveTo(c[a][b][0][0],c[a][b][0][1]);for(p=q=0;p<e[a].imgwidth+4;p+=3)q=kb-E*safepow(na,p),-100>q&&(q=-100),q>e[a].imgheight+100&&(q=e[a].imgheight+100),0==p?d.moveTo(p,q):d.lineTo(p,q)}}}else if(8.4==z[a][b]){if(h=
k=null,2==c[a][b].length?(h=c[a][b][1][0],k=c[a][b][1][1]):x==b&&null!=f&&1==c[a][b].length&&(h=f,k=g),null!=h&&h!=c[a][b][0][0]&&k!=c[a][b][0][1]){var lb=-e[a].xmin*e[a].pixperx+e[a].imgborder,vb=lb-c[a][b][0][0],Ka=lb-h;if(0<vb*Ka&&k!=c[a][b][0][1])for(na=safepow(Ka/vb,1/(k-c[a][b][0][1])),E=Ka/safepow(na,k),d.moveTo(c[a][b][0][0],c[a][b][0][1]),q=q=0;q<e[a].imgheight+4;q+=3)p=lb-E*safepow(na,q),-100>p&&(p=-100),p>e[a].imgwidth+100&&(p=e[a].imgwidth+100),0==q?d.moveTo(p,q):d.lineTo(p,q)}}else if(8.5==
z[a][b]){t=I=h=k=null;3==c[a][b].length?(h=c[a][b][1][0],k=c[a][b][1][1],t=c[a][b][2][0],I=c[a][b][2][1]):2==c[a][b].length?(h=c[a][b][1][0],k=c[a][b][1][1],t=f,I=g):x==b&&null!=f&&1==c[a][b].length&&(h=f,k=g);var Ra=c[a][b][0][1];d.strokeStyle="rgb(0,200,0)";d.dashedLine(5,Ra,e[a].imgwidth,Ra);d.beginPath();d.strokeStyle="rgb(0,0,255)";if(null!=t&&t!=h)if(I==k)d.moveTo(0,I),d.lineTo(e[a].imgwidth,I);else{Ja=Ra-k;var mb=Ra-I;if(0<Ja*mb&&t!=h)for(na=safepow(mb/Ja,1/(t-h)),E=mb/safepow(na,t),d.moveTo(h,
k),p=q=0;p<e[a].imgwidth+4;p+=3)q=Ra-E*safepow(na,p),-100>q&&(q=-100),q>e[a].imgheight+100&&(q=e[a].imgheight+100),0==p?d.moveTo(p,q):d.lineTo(p,q)}}else if(8.6==z[a][b]){t=I=h=k=null;3==c[a][b].length?(h=c[a][b][1][0],k=c[a][b][1][1],t=c[a][b][2][0],I=c[a][b][2][1]):2==c[a][b].length?(h=c[a][b][1][0],k=c[a][b][1][1],t=f,I=g):x==b&&null!=f&&1==c[a][b].length&&(h=f,k=g);var Sa=c[a][b][0][0];d.strokeStyle="rgb(0,200,0)";d.dashedLine(Sa,5,Sa,e[a].imgheight);d.beginPath();d.strokeStyle="rgb(0,0,255)";
if(null!=t&&t!=h&&I!=k){Ka=h-Sa;var nb=t-Sa;if(0<Ka*nb)for(na=safepow(nb/Ka,1/(I-k)),E=nb/safepow(na,I),d.moveTo(h,k),q=p=0;q<e[a].imgheight+4;q+=3)p=Sa+E*safepow(na,q),-100>p&&(p=-100),p>e[a].imgwidth+100&&(p=e[a].imgwidth+100),0==q?d.moveTo(p,q):d.lineTo(p,q)}}else if(8.2==z[a][b]){if(h=k=null,2==c[a][b].length?(h=c[a][b][1][0],k=c[a][b][1][1]):x==b&&null!=f&&1==c[a][b].length&&(h=f,k=g),d.strokeStyle="rgb(0,200,0)",d.dashedLine(5,c[a][b][0][1],e[a].imgwidth,c[a][b][0][1]),d.dashedLine(c[a][b][0][0],
5,c[a][b][0][0],e[a].imgheight),d.beginPath(),d.strokeStyle="rgb(0,0,255)",null!=h&&h!=c[a][b][0][0]&&k!=c[a][b][0][1]){E=(k-c[a][b][0][1])*(h-c[a][b][0][0]);for(p=c[a][b][0][0]-1;-4<p;p-=3)q=E/(p-c[a][b][0][0])+c[a][b][0][1],-100>q&&(q=-100),q>e[a].imgheight+100&&(q=e[a].imgheight+100),p==c[a][b][0][0]-1?d.moveTo(p,q):d.lineTo(p,q);for(p=c[a][b][0][0]+1;p<e[a].imgwidth+4;p+=3)q=E/(p-c[a][b][0][0])+c[a][b][0][1],-100>q&&(q=-100),q>e[a].imgheight+100&&(q=e[a].imgheight+100),p==c[a][b][0][0]+1?d.moveTo(p,
q):d.lineTo(p,q);d.stroke()}}else if(9==z[a][b]||9.1==z[a][b])if(h=k=null,2==c[a][b].length?(h=c[a][b][1][0],k=c[a][b][1][1]):x==b&&null!=f&&1==c[a][b].length&&(h=f,k=g),null!=h&&h!=c[a][b][0][0])if(k==c[a][b][0][1])d.moveTo(0,k),d.lineTo(e[a].imgwidth,k);else{if(9==z[a][b]){var wb=-1*Math.abs(k-c[a][b][0][1])/2,xb=(k+c[a][b][0][1])/2;E=Math.PI/Math.abs(h-c[a][b][0][0]);var yb=k<c[a][b][0][1]?h:c[a][b][0][0]}else 9.1==z[a][b]&&(wb=-1*Math.abs(k-c[a][b][0][1]),xb=c[a][b][0][1],E=.5*Math.PI/Math.abs(h-
c[a][b][0][0]),yb=k<c[a][b][0][1]?h:h+2*Math.abs(h-c[a][b][0][0]));for(p=q=0;p<e[a].imgwidth+4;p+=3)q=wb*Math.cos(E*(p-yb))+xb,0==p?d.moveTo(p,q):d.lineTo(p,q)}d.stroke();d.beginPath()}if(null===x&&ob.hasOwnProperty(e[a].mode)){d.strokeStyle="rgb(200,200,200)";if(8.5==e[a].mode)d.dashedLine(5,g,e[a].imgwidth,g);else if(8.6==e[a].mode)d.dashedLine(f,5,f,e[a].imgwidth);else if(8.2==e[a].mode)d.dashedLine(5,g,e[a].imgwidth,g),d.dashedLine(f,5,f,e[a].imgheight);else if(7.4==e[a].mode||7.5==e[a].mode)d.dashedLine(f,
g,e[a].imgwidth,g+(e[a].imgwidth-f)),d.dashedLine(f,g,e[a].imgwidth,g-(e[a].imgwidth-f)),d.dashedLine(f,g,0,g-f),d.dashedLine(f,g,0,g+f);d.beginPath();d.strokeStyle="rgb(0,0,255)"}d.fillStyle="rgba(0,0,255,.5)";for(b=0;b<n[a].length;b++){d.beginPath();for(B=0;B<n[a][b].length;B++)if(0==B){d.moveTo(n[a][b][B][0],n[a][b][B][1]);var oa=n[a][b][B][0];var va=n[a][b][B][1]}else{d.lineTo(n[a][b][B][0],n[a][b][B][1]);var ha=n[a][b][B][0];var qa=n[a][b][B][1]}b==r&&null!=f&&(d.lineTo(f,g),ha=f,qa=g);var aa=
.02*e[a].imgwidth;1==pa[a]&&ha>.98*e[a].imgwidth?(d.moveTo(ha,qa),d.lineTo(ha-aa,qa+aa),d.moveTo(ha,qa),d.lineTo(ha-aa,qa-aa)):1==pa[a]&&oa>.98*e[a].imgwidth&&(d.moveTo(oa,va),d.lineTo(oa-aa,va+aa),d.moveTo(oa,va),d.lineTo(oa-aa,va-aa));1==pa[a]&&ha<.02*e[a].imgwidth?(d.moveTo(ha,qa),d.lineTo(ha+aa,qa+aa),d.moveTo(ha,qa),d.lineTo(ha+aa,qa-aa)):1==pa[a]&&oa<.02*e[a].imgwidth&&(d.moveTo(oa,va),d.lineTo(oa+aa,va+aa),d.moveTo(oa,va),d.lineTo(oa+aa,va-aa));d.stroke();if(1<e[a].dotline&&!(1>n[a][b].length-
1)&&25>Math.pow(ha-oa,2)+Math.pow(qa-va,2)){d.moveTo(n[a][b][0][0],n[a][b][0][1]);for(B=1;B<n[a][b].length;B++)d.lineTo(n[a][b][B][0],n[a][b][B][1]);d.closePath();d.fill()}}d.fillStyle="rgb(0,0,255)";d.beginPath();for(b=0;b<N[a].length;b++)d.moveTo(N[a][b][0]+5,N[a][b][1]),d.arc(N[a][b][0],N[a][b][1],5,0,2*Math.PI,!0);d.fill();if(0<e[a].dotline){d.beginPath();for(b=0;b<n[a].length;b++)for(B=0;B<n[a][b].length;B++)if(0==B||25<Math.pow(n[a][b][B][0]-n[a][b][B-1][0],2)+Math.pow(n[a][b][B][1]-n[a][b][B-
1][1],2))d.moveTo(n[a][b][B][0]+5,n[a][b][B][1]),d.arc(n[a][b][B][0],n[a][b][B][1],5,0,2*Math.PI,!0);d.fill()}d.fillStyle="rgb(255,255,255)";d.beginPath();for(b=0;b<H[a].length;b++)d.moveTo(H[a][b][0]+5,H[a][b][1]),d.arc(H[a][b][0],H[a][b][1],4,0,2*Math.PI,!0);3>e[a].mode?d.fill():d.stroke();d.lineWidth=2;d.beginPath();for(b=0;b<H[a].length;b++)d.moveTo(H[a][b][0]+5,H[a][b][1]),d.arc(H[a][b][0],H[a][b][1],4,0,2*Math.PI,!0);d.stroke();for(b=0;b<c[a].length;b++)if(z[a][b]==e[a].mode){d.fillStyle="rgb(255,0,0)";
for(B=0;B<c[a][b].length;B++)d.fillRect(c[a][b][B][0]-3,c[a][b][B][1]-3,6,6);c[a][b].length<Ta[e[a].mode]&&null!=f&&x==b&&d.fillRect(f-3,g-3,6,6);d.fillStyle="rgb(0,0,255)"}for(var ba="",db=[],C=0;C<n[a].length;C++){db=pathsimplify(n[a][C]);0!=C&&(ba+=";");for(var ra=0;ra<db.length;ra++)0!=ra&&(ba+=","),ba+="("+db[ra][0]+","+db[ra][1]+")"}ba+=";;";for(C=0;C<N[a].length;C++)0!=C&&(ba+=","),ba+="("+N[a][C][0]+","+N[a][C][1]+")";ba+=";;";for(C=0;C<H[a].length;C++)0!=C&&(ba+=","),ba+="("+H[a][C][0]+","+
H[a][C][1]+")";ba+=";;";var zb=[],pb="";for(C=0;C<c[a].length;C++)if(c[a][C].length==Ta[z[a][C]]){pb="("+z[a][C];for(ra=0;ra<c[a][C].length;ra++)pb+=","+c[a][C][ra][0]+","+c[a][C][ra][1];zb.push(pb+")")}ba+=zb.join(",");ba+=";;";var Ab=[];for(C=0;C<m[a].length;C++)2<m[a][C].length&&Ab.push("("+S[a][C]+","+m[a][C][0][0]+","+m[a][C][0][1]+","+m[a][C][1][0]+","+m[a][C][1][1]+","+m[a][C][2][0]+","+m[a][C][2][1]+")");ba+=Ab.join(",");if(Aa[a].value!=ba){var qb=""!=Aa[a].value||";;;;;;;;"!=ba;Aa[a].value=
ba;qb&&v(Aa[a]).trigger("change")}}function ea(f,e){1==f?N[a].splice(e,1):2==f?H[a].splice(e,1):0<=f&&1>f?n[a].splice(e,1):5<=f&&10>f?(c[a].splice(e,1),z[a].splice(e,1),x=null):10<=f&&11>f&&(m[a].splice(e,1),S[a].splice(e,1),F=null);t()}function M(f){qb++;wa();if(ca&&1<f.originalEvent.touches.length)return sa=!0,v(document).on("touchend.imathasdraw",P),!0;ca?(window.clearTimeout(Ua),v(document).off("mousemove.imathasdraw"),v(".drawcanvas").on("touchstart.imathasdraw",function(a){ca=!0;M(a)}),v(".drawcanvas").on("touchmove.imathasdraw",
T),v(document).on("touchend.imathasdraw",P),v(document).on("touchcancel.imathasdraw",P)):(v(document).on("mousemove.imathasdraw",T),v(document).on("mouseup.imathasdraw",P));var g=Q(f);if(null==a||null==r&&null==x&&null==F)for(i in e){var d=U(e[i].el);if(d.x<g.x&&d.x+e[i].width>g.x&&d.y<g.y&&d.y+e[i].height>g.y){a=i;break}}if(null!=a)if(f.preventDefault(),X=!0,d=U(e[a].el),f={x:g.x-d.x,y:g.y-d.y},-1<f.x&&f.x<e[a].width&&-1<f.y&&f.y<e[a].height){0<e[a].snaptogridx&&(f=R(f,a));1==pa[a]&&(f.y=e[a].imgheight/
2);g=J(a,f);if(null!=g){if(-1==e[a].mode){ea(g[0],g[1]);return}null!=r&&1>g[0]&&r!=g[1]?g=null:null!=x&5<=g[0]&&10>g[0]&&x!=g[1]?g=null:null!=F&&10<=g[0]&&11>g[0]&&F!=g[1]&&(g=null)}null==g?(G("pendown"),1==e[a].mode?(N[a].push([f.x,f.y]),l={mode:1,num:N[a].length-1}):2==e[a].mode?(H[a].push([f.x,f.y]),l={mode:2,num:H[a].length-1}):0==e[a].mode||.7==e[a].mode?null==r?(n[a].push([[f.x,f.y]]),r=n[a].length-1):n[a][r].push([f.x,f.y]):.5==e[a].mode?null==r?(n[a].push([[f.x,f.y]]),r=n[a].length-1):(n[a][r].push([f.x,
f.y]),l=r=null):5<=e[a].mode&&10>e[a].mode?null==x?(c[a].push([[f.x,f.y]]),x=c[a].length-1,z[a][x]=e[a].mode,X=!1):(c[a][x].push([f.x,f.y]),c[a][x].length==Ta[e[a].mode]&&(l={mode:e[a].mode,num:x,subnum:1},x=null)):10<=e[a].mode&&11>e[a].mode&&(null==F?(m[a].push([[f.x,f.y]]),F=m[a].length-1,S[a][F]=e[a].mode,X=!1):(m[a][F].push([f.x,f.y]),2==m[a][F].length?l={mode:e[a].mode,num:F,subnum:1}:3==m[a][F].length&&(l={mode:e[a].mode,num:F,subnum:2},F=null)))):(0==g[0]||.5==g[0]?null==r?(G("move"),l={mode:e[a].mode,
num:g[1],subnum:g[2]},Da=n[a][g[1]][g[2]],g[2]==n[a][g[1]].length-1&&0==e[a].mode?r=g[1]:0==g[2]&&0==e[a].mode&&(r=g[1],n[a][r].reverse(),l.subnum=n[a][r].length-1)):g[1]==r&&g[2]==n[a][g[1]].length-1?(2>n[a][r].length&&n[a].splice(r,1),r=null):1<e[a].dotline&&g[1]==r&&0==g[2]?(n[a][r].push(n[a][r][0]),r=null):(G("pendown"),n[a][r].push([f.x,f.y])):1==g[0]?(G("move"),l={mode:1,num:g[1]}):2==g[0]?(G("move"),l={mode:2,num:g[1]}):5<=g[0]&&10>g[0]?(G("move"),l={mode:g[0],num:g[1],subnum:g[2]},Da=c[a][g[1]][g[2]]):
10<=g[0]&&11>g[0]&&(G("move"),l={mode:g[0],num:g[1],subnum:g[2]},Da=m[a][g[1]][g[2]]),La=!0);t()}else null!=r&&(2>n[a][r].length&&n[a].splice(r,1),G("pen")),null!=x&&(c[a][x].length<Ta[e[a].mode]&&(c[a].splice(x,1),z[a].splice(x,1)),G("pen")),null!=F&&(3>m[a][F].length&&(m[a].splice(F,1),S[a].splice(F,1)),G("pen")),l=F=x=r=null,t(),a=null}function J(a,g){if(ca){var d=Math.max(15*window.innerWidth/screen.width,15);d*=d}else d=-1==e[a].mode?50:25;if(0==e[a].mode||.5==e[a].mode||-1==e[a].mode)for(var b=
0;b<n[a].length;b++)for(var f=n[a][b].length-1;0<=f;f--){var l=Math.pow(n[a][b][f][0]-g.x,2)+Math.pow(n[a][b][f][1]-g.y,2);if(l<d)return[-1==e[a].mode?0:e[a].mode,b,f]}if(1==e[a].mode||-1==e[a].mode)for(b=0;b<N[a].length;b++)if(Math.pow(N[a][b][0]-g.x,2)+Math.pow(N[a][b][1]-g.y,2)<d)return[1,b];if(2==e[a].mode||-1==e[a].mode)for(b=0;b<H[a].length;b++)if(Math.pow(H[a][b][0]-g.x,2)+Math.pow(H[a][b][1]-g.y,2)<d)return[2,b];if(5<=e[a].mode&&10>e[a].mode||-1==e[a].mode)for(b=0;b<c[a].length;b++)for(f=
c[a][b].length-1;0<=f;f--)if(z[a][b]==e[a].mode||-1==e[a].mode)if(l=Math.pow(c[a][b][f][0]-g.x,2)+Math.pow(c[a][b][f][1]-g.y,2),l<d)return[z[a][b],b,f];if(10<=e[a].mode&&11>e[a].mode||-1==e[a].mode)for(b=0;b<m[a].length;b++)for(f=m[a][b].length-1;0<=f;f--)if(S[a][b]==e[a].mode||-1==e[a].mode)if(l=Math.pow(m[a][b][f][0]-g.x,2)+Math.pow(m[a][b][f][1]-g.y,2),l<d)return[S[a][b],b,f];return null}function P(f){var g=Q(f);X=!1;if(null!=a){var d=U(e[a].el),b={x:g.x-d.x,y:g.y-d.y};0<e[a].snaptogridx&&(b=R(b,
a));d=-1<b.x&&b.x<e[a].width&&-1<b.y&&b.y<e[a].height;1==La&&(5<=e[a].mode&&10>e[a].mode?(c[a].push([[b.x,b.y]]),x=c[a].length-1,z[a][x]=e[a].mode):10<=e[a].mode&&11>e[a].mode&&(m[a].push([[b.x,b.y]]),F=m[a].length-1,S[a][F]=e[a].mode));null!=Ea&&g.x==Ea.x&&g.y==Ea.y&&null!=r&&null==l&&(2>n[a][r].length&&n[a].splice(r,1),l=r=null,t());null!=r&&null==l&&(.5==e[a].mode&&1<n[a][r].length?(dragobj=r=null,t()):.7==e[a].mode&&(dragobj=r=null,t()));null!=x&&1==c[a][x].length&&(sa||!d?(c[a].splice(x,1),z[a].splice(x,
1),x=null,t()):null==J(a,b)&&(c[a][x].push([b.x,b.y]),x=null,t()));null!=F&&1==m[a][F].length&&(sa||!d?(m[a].splice(F,1),S[a].splice(F,1),F=null,t()):null==J(a,b)&&(m[a][F].push([b.x,b.y]),t()));null==r&&null==x?G("move"):G("pen");"undefined"!=typeof f&&f.preventDefault()}Ea=g;null!=a&&null!=l&&(d=U(e[a].el),-1<b.x&&b.x<e[a].width&&-1<b.y&&b.y<e[a].height?(0==l.mode&&1<e[a].dotline&&(0==l.subnum||l.subnum==n[a][l.num].length-1)&&25>Math.pow(n[a][l.num][0][0]-n[a][l.num][n[a][l.num].length-1][0],2)+
Math.pow(n[a][l.num][0][1]-n[a][l.num][n[a][l.num].length-1][1],2)&&(0==l.subnum?(n[a][l.num][n[a][l.num].length-1][0]=n[a][l.num][0][0],n[a][l.num][n[a][l.num].length-1][1]=n[a][l.num][0][1]):(n[a][l.num][0][0]=n[a][l.num][n[a][l.num].length-1][0],n[a][l.num][0][1]=n[a][l.num][n[a][l.num].length-1][1]),r=null,t()),l=null):(1==pa[a]&&(b.y=e[a].imgheight/2),1==l.mode?N[a].splice(l.num,1):2==l.mode?H[a].splice(l.num,1):.5==l.mode?n[a].splice(l.num,1):0==l.mode?n[a][l.num][l.subnum]=Da:5<=l.mode&&10>
l.mode?(c[a].splice(l.num,1),z[a].splice(l.num,1),x=null):10<=l.mode&&11>l.mode&&(m[a].splice(l.num,1),S[a].splice(l.num,1),F=null),l=null,t()));sa=!1;ca?Ua=window.setTimeout(function(){ca=!1;wa();v(document).on("mousemove.imathasdraw",T);v(".drawcanvas").on("touchstart.imathasdraw",function(a){ca=!0;M(a)});v(document).on("mousedown.imathasdraw",M)},350):(wa(),v(document).on("mousemove.imathasdraw",T),v(".drawcanvas").on("touchstart.imathasdraw",function(a){ca=!0;M(a)}),v(document).on("mousedown.imathasdraw",
M))}function T(f){var g=null;La=!1;var d=Q(f);for(i in e){var b=U(e[i].el);if(b.x<d.x&&b.x+e[i].width>d.x&&b.y<d.y&&b.y+e[i].height>d.y){g=i;break}}if(null!=g){fa=g;b=U(e[g].el);var u={x:d.x-b.x,y:d.y-b.y};0<e[g].snaptogridx&&(u=R(u,g));1==pa[g]&&(u.y=e[g].imgheight/2);-1<u.x&&u.x<e[g].width&&-1<u.y&&u.y<e[g].height&&null==l&&null==r&&(b=J(g,u),null==b?G("pen",g):-1!=e[g].mode&&G("move",g))}else null!=fa&&-1!=fa&&(null!=a?t():(a=fa,t(),a=null),fa=-1);if(null!=a){if(f.originalEvent.touches&&1<f.originalEvent.touches.length)return sa=
!0;"undefined"!=typeof f&&f.preventDefault();b=U(e[a].el);u={x:d.x-b.x,y:d.y-b.y};0<e[a].snaptogridx&&(u=R(u,a));1==pa[a]&&(u.y=e[a].imgheight/2);if(-1<u.x&&u.x<e[a].width&&-1<u.y&&u.y<e[a].height){if(null==l){if(X&&-1==e[a].mode){b=J(a,u);null!=b&&ea(b[0],b[1]);return}null!=r?!X||0!=e[a].mode&&.7!=e[a].mode?X&&.5==e[a].mode?(f=n[a][r].length-1,0==f?(f=Math.pow(n[a][r][f][0]-u.x,2)+Math.pow(n[a][r][f][1]-u.y,2),25<f?(n[a][r].push([u.x,u.y]),t()):t(u.x,u.y)):(n[a][r][f]=[u.x,u.y],t())):t(u.x,u.y):
(f=n[a][r].length-1,f=Math.pow(n[a][r][f][0]-u.x,2)+Math.pow(n[a][r][f][1]-u.y,2),25<f?(n[a][r].push([u.x,u.y]),t()):t(u.x,u.y)):null!=x?X?t():t(u.x,u.y):null!=F?X?t():t(u.x,u.y):(b=J(a,u),null==b?(G("pen"),ob.hasOwnProperty(e[a].mode)&&null!==g&&t(u.x,u.y)):(t(),-1!=e[a].mode&&G("move")))}else G("move"),0==l.mode||.5==l.mode?n[a][l.num][l.subnum]=[u.x,u.y]:1==l.mode?N[a][l.num]=[u.x,u.y]:2==l.mode?H[a][l.num]=[u.x,u.y]:5<=l.mode&&10>l.mode?c[a][l.num][l.subnum]=[u.x,u.y]:10<=l.mode&&11>l.mode&&(m[a][l.num][l.subnum]=
[u.x,u.y]),t();return!1}null==F||X||t()}else null!=g&&-1!=fa&&(a=g,ob.hasOwnProperty(e[a].mode)&&t(u.x,u.y),a=null)}function G(c,g){g=g||a;e[g].cursor!=c&&(e[g].el.style.cursor="move"==c?c:"url("+imasroot+"/img/"+c+".cur), auto",e[g].cursor=c)}function Q(a){a=a||window.event;if(ca)return a=a.originalEvent.changedTouches[0]||a.originalEvent.touches[0],{x:a.pageX,y:a.pageY};if(a.pageX||a.pageY)return{x:a.pageX,y:a.pageY};var c=document.documentElement,d=document.body;if(c&&(c.scrollTop||c.scrollLeft)){var b=
c.scrollLeft;c=c.scrollTop}else d?(b=d.scrollLeft,c=d.scrollTop):c=b=0;return{x:a.clientX+b,y:a.clientY+c}}function R(a,c){var d=a.x-e[c].imgborder+e[c].xmin*e[c].pixperx,b=a.y-e[c].imgborder-e[c].ymax*e[c].pixpery;d=Math.round(Math.round(d/(e[c].pixperx*e[c].snaptogridx))*e[c].pixperx*e[c].snaptogridx+e[c].imgborder-e[c].xmin*e[c].pixperx);b=Math.round(Math.round(b/(e[c].pixpery*e[c].snaptogridy))*e[c].pixpery*e[c].snaptogridy+e[c].imgborder+e[c].ymax*e[c].pixpery);return{x:d,y:b}}function Y(a,c){var d=
U(a),b=Q(c);return{x:b.x-d.x,y:b.y-d.y}}function U(a){if(a.className.match(/hidden/))return{x:-1E4,y:-1E4};a=v(a).offset();return{x:a.left,y:a.top}}function wa(){v(document).off("mousedown.imathasdraw").off("mousemove.imathasdraw").off("mouseup.imathasdraw");v(document).off("touchstart.imathasdraw").off("touchmove.imathasdraw").off("touchend.imathasdraw").off("touchcancel.imathasdraw");v(".drawcanvas").off("touchstart.imathasdraw").off("touchmove.imathasdraw").off("touchend.imathasdraw").off("touchcancel.imathasdraw")}
function Fa(f){wa();v(document).on("mousemove.imathasdraw",T);v(".drawcanvas").on("touchstart.imathasdraw",function(a){ca=!0;M(a)});v(document).on("mousedown.imathasdraw",M);try{CanvasRenderingContext2D.prototype.dashedLine=function(b,d,c,f,g){void 0==g&&(g=10);this.beginPath();this.moveTo(b,d);var h=c-b,k=f-d;g=Math.sqrt(h*h+k*k)/g;h/=g;k/=g;g=Math.floor(g);for(var l=0;l++<g&&-1<d&&d<e[a].imgheight+1&&-1<b&&b<e[a].imgwidth+1;)b+=h,d+=k,this[0==l%2?"moveTo":"lineTo"](b,d);this[0==l%2?"moveTo":"lineTo"](c,
f);this.stroke();this.closePath()}}catch(D){}for(var g in canvases)if("undefined"==typeof f||f==g){var d=null;if(null!=drawla[g]&&2<drawla[g].length){n[canvases[g][0]]=drawla[g][0];N[canvases[g][0]]=drawla[g][1];H[canvases[g][0]]=drawla[g][2];z[canvases[g][0]]=[];c[canvases[g][0]]=[];if(3<drawla[g].length&&0<drawla[g][3].length)for(var b=0;b<drawla[g][3].length;b++){z[canvases[g][0]][b]=drawla[g][3][b][0];c[canvases[g][0]][b]=[];for(var l=0;l<Ta[z[canvases[g][0]][b]];l++)c[canvases[g][0]][b].push(drawla[g][3][b].slice(1+
2*l,3+2*l))}S[canvases[g][0]]=[];m[canvases[g][0]]=[];if(4<drawla[g].length&&0<drawla[g][4].length)for(b=0;b<drawla[g][4].length;b++)S[canvases[g][0]][b]=drawla[g][4][b][0],m[canvases[g][0]][b]=[drawla[g][4][b].slice(1,3),drawla[g][4][b].slice(3,5),drawla[g][4][b].slice(5)];5<drawla[g].length&&(d=drawla[g][5])}"a11ydraw"==canvases[g][1].substr(0,8)?L(canvases[g],d):O(canvases[g][0],"canvas"+canvases[g][0],imasroot+"/filter/graph/imgs/"+canvases[g][1],"qn"+canvases[g][0],canvases[g][2],canvases[g][3],
canvases[g][4],canvases[g][5],canvases[g][6],canvases[g][7],canvases[g][8],canvases[g][9],canvases[g][10],canvases[g][11],canvases[g][12])}}function Va(a){for(var c,d=0;d<y.idnums.length;d++)if("undefined"==typeof a||a==y.idnums[d]){c=y.idnums[d];var b,e=c;var f=document.getElementById("qn"+e).value;if(b=f.match(/\(-oo,([\-\d\.]+)\)U\(([\-\d\.]+),oo\)/)){var h=3;f=b[1];b=b[2]}else(b=f.match(/\(-oo,([\-\d\.]+)\)/))?(h=0,f=b[1],b=2.5):(b=f.match(/\(([\-\d\.]+),oo\)/))?(h=1,f=b[1],b=2.5):(b=f.match(/\(([\-\d\.]+),([\-\d\.]+)\)/))?
(h=2,f=b[1],b=b[2]):(h=0,f=-1.5,b=2.5);document.getElementById("slid1"+e).style.left=60*f+250-6+"px";document.getElementById("slid2"+e).style.left=60*b+250-6+"px";document.getElementById("shaderegions"+e).selectedIndex=h;y.curslider.type=document.getElementById("shaderegions"+e).value;eb(e);v("#slid1"+c).on("touchstart.normslider mousedown.normslider",Wa);v("#slid2"+c).on("touchstart.normslider mousedown.normslider",Wa)}}function Wa(a){a=a||window.event;a.originalEvent.touches&&0<a.originalEvent.touches.length?
(ca=!0,v(document).on("touchmove.normslider",fb),v(document).on("touchend.normslider",Xa)):(v(document).on("mousemove.normslider",fb),v(document).on("mouseup.normslider",Xa));y.curslider.el=a.target||a.srcElement;y.curslider.id=y.curslider.el.id.substring(5);y.curslider.type=document.getElementById("shaderegions"+y.curslider.id).value;y.curslider.outnode=document.getElementById(y.outputid);y.curslider.startpos=Y(y.curslider.el,a);y.curslider.el.parentNode.style.cursor="pointer";U(y.curslider.el.parentNode);
a.preventDefault&&a.preventDefault();return!1}function fb(a){var c=y.curslider.id;a=a||window.event;var d=Y(y.curslider.el.parentNode,a);if(!(5>d.x||d.x>y.curslider.el.parentNode.offsetWidth-5||5>d.y||d.y>y.curslider.el.parentNode.offsetHeight-5))return y.curslider.el.style.left=6*Math.round((d.x-y.curslider.startpos.x-10)/6)+10+"px",Ya(c),a.preventDefault&&a.preventDefault(),!1}function Xa(a){null!==y.curslider.el&&(ca=!1,v(document).off("touchmove.normslider touchend.normslider"),v(document).off("mousemove.normslider mouseup.normslider"),
y.curslider.el.parentNode.style.cursor="",y.curslider.el=null)}function Ya(a){var c=parseInt(document.getElementById("slid1"+a).style.left)+6,d=parseInt(document.getElementById("slid2"+a).style.left)+6,b=Math.min(c,d),e=Math.max(c,d);"2O"==y.curslider.type?document.getElementById("normleft"+a).style.width=b+1+"px":"1L"==y.curslider.type?document.getElementById("normleft"+a).style.width=c+1+"px":"2B"==y.curslider.type&&(document.getElementById("normleft"+a).style.left=b+"px",document.getElementById("normleft"+
a).style.width=e-b+1+"px");"2O"==y.curslider.type?document.getElementById("normright"+a).style.width=500-e+"px":"1R"==y.curslider.type&&(document.getElementById("normright"+a).style.width=500-c+"px");b=(-4+(c-10)/60).toFixed(1);e=(-4+(d-10)/60).toFixed(1);var f=document.getElementById("slid1txt"+a);f.innerHTML=b;f.style.left=c-6+"px";c=document.getElementById("slid2txt"+a);c.innerHTML=e;c.style.left=d-6+"px";d=Math.min(b,e);c=Math.max(b,e);if("2O"==y.curslider.type)var h="(-oo,"+d+")U("+c+",oo)";
else"2B"==y.curslider.type?h="("+d+","+c+")":"1L"==y.curslider.type?h="(-oo,"+b+")":"1R"==y.curslider.type&&(h="("+b+",oo)");document.getElementById("qn"+a).value=h}function eb(a){var c=document.getElementById("shaderegions"+a).value;y.curslider.type=c;var d=parseInt(document.getElementById("slid1"+a).style.left)+6,b=parseInt(document.getElementById("slid2"+a).style.left)+6,e=Math.min(d,b);b=Math.max(d,b);"1R"==c||"1L"==c?(document.getElementById("slid2"+a).style.display="none",document.getElementById("slid2txt"+
a).style.display="none","1R"==c?(document.getElementById("normleft"+a).style.display="none",document.getElementById("normright"+a).style.display="",document.getElementById("normright"+a).style.right="0px",document.getElementById("normright"+a).style.width=500-d+"px"):(document.getElementById("normright"+a).style.display="none",document.getElementById("normleft"+a).style.display="",document.getElementById("normleft"+a).style.left="0px",document.getElementById("normleft"+a).style.width=d+"px")):"2O"==
c?(document.getElementById("slid2"+a).style.display="",document.getElementById("slid2txt"+a).style.display="",document.getElementById("normleft"+a).style.display="",document.getElementById("normright"+a).style.display="",document.getElementById("normright"+a).style.right="0px",document.getElementById("normleft"+a).style.left="0px",document.getElementById("normright"+a).style.width=500-b+"px",document.getElementById("normleft"+a).style.width=e+"px"):"2B"==c&&(document.getElementById("slid2"+a).style.display=
"",document.getElementById("slid2txt"+a).style.display="",document.getElementById("normleft"+a).style.display="",document.getElementById("normright"+a).style.display="none",document.getElementById("normleft"+a).style.left=e+"px",document.getElementById("normleft"+a).style.width=b-e+"px");Ya(a)}var X=!1,e=[],Za=[],Aa=[],za=[],n=[],N=[],H=[],c=[],z=[],m=[],S=[],r=null,pa=[],x=null,F=null,sb=["rgb(0,0,255)","rgb(255,0,0)","rgb(0,255,0)"],Cb=["rgba(0,0,255,.4)","rgba(255,0,0,.4)","rgba(0,255,0,.4)"],
l=null,Da=null,a=null,rb=!1,ca=!1,sa=!1,La=!1,Ua=null,Ta={5:2,"5.2":2,"5.3":2,"5.4":2,6:2,"6.1":2,"6.3":2,"6.5":2,"6.6":2,7:2,"7.2":2,"7.4":2,"7.5":2,8:2,"8.2":2,"8.3":2,"8.4":2,"8.5":3,"8.6":3,9:2,"9.1":2,10:3,"10.2":3,"10.3":3,"10.4":3},ob={"7.4":1,"7.5":1,"8.2":1,"8.5":1,"8.6":1},qb=0,Ea=null,fa=-1;"undefined"!=typeof initstack?initstack.push(Fa):v(function(){Fa()});var y={idnums:[],curslider:{el:null,startpos:[0,0],outnode:null}};"undefined"!=typeof initstack&&initstack.push(Va);return{initCanvases:Fa,
clearcanvas:function(e){n[e].length=0;N[e].length=0;H[e].length=0;c[e].length=0;z[e].length=0;m[e].length=0;S[e].length=0;a=e;t();l=r=a=null},clearlastline:function(c){0<n[c].length&&--n[c].length;a=c;t();l=r=a=null},settool:function(c,g,d){for(var b=document.getElementById("drawtools"+g),f=b.getElementsByTagName("span"),l=0;l<f.length;l++)f[l].className="";f=b.getElementsByTagName("img");for(l=0;l<f.length;l++)f[l].className="";c.className="sel";e[g].mode=d;a=g;t()},addnormslider:function(a){-1==
arraysearch(a,y.idnums)?y.idnums.push(a):Va(a)},chgnormtype:eb,adda11ydraw:K,changea11ydraw:function(a,c){var d=v(a).val();d=e[c].moderef[d];v(a).parent().find(".a11ydrawinstr").text(d.input)},encodea11ydraw:function(){for(var a=0;a<za.length;a++){var c=za[a],d=e[c],b=[],l=[],m=[],h=[],n=[],k=[];v("#a11ydraw"+c).find(".a11ydrawrow").each(function(a,c){var e=v(c).find("select").val(),f=v(c).find("input").val();k.push("["+e+',"'+f+'"]');f=f.replace(/[\(\)]/g,"").split(/\s*,\s*/);var g=[];for(a=1;a<
f.length;a+=2){try{f[a-1]=eval(prepWithMath(mathjs(f[a-1])))}catch(Bb){f[a-1]=NaN}try{f[a]=eval(prepWithMath(mathjs(f[a])))}catch(Bb){f[a]=NaN}f[a-1]=(f[a-1]-d.xmin)*d.pixperx+d.imgborder;f[a]=d.imgheight-(f[a]-d.ymin)*d.pixpery-d.imgborder;g.push(Math.round(f[a-1])+","+Math.round(f[a]))}1==e?l.push("("+g.join("),(")+")"):2==e?m.push("("+g.join("),(")+")"):1>e?b.push("("+g.join("),(")+")"):5<=e&&10>e&&2==g.length?h.push("("+e+","+g.join(",")+")"):10<=e&&3==g.length&&n.push("("+e+","+g.join(",")+")")});
Aa[c].value=b.join(";")+";;"+l.join(",")+";;"+m.join(",")+";;"+h.join(",")+";;"+n.join(",")+";;"+k.join(",")}},removea11ydraw:function(a){v(a).parent().remove()}}}(jQuery);
(function(){function v(L,K,A,O,t){for(var ea=O,M,J=K+1;J<A;J++){var P=L[J];var T=L[K],G=L[A],Q=T[0];T=T[1];var R=G[0]-Q,Y=G[1]-T;if(0!==R||0!==Y){var U=((P[0]-Q)*R+(P[1]-T)*Y)/(R*R+Y*Y);1<U?(Q=G[0],T=G[1]):0<U&&(Q+=R*U,T+=Y*U)}R=P[0]-Q;Y=P[1]-T;P=R*R+Y*Y;P>ea&&(M=J,ea=P)}ea>O&&(1<M-K&&v(L,K,M,O,t),t.push(L[M]),1<A-M&&v(L,M,A,O,t))}window.pathsimplify=function(L,K,A){if(2>=L.length)return L;K=void 0!==K?K*K:1;if(A)var O=L;else{A=L[0];for(var t=[A],ea=1,M=L.length;ea<M;ea++){O=L[ea];var J=O[0]-A[0],
P=O[1]-A[1];J*J+P*P>K&&(t.push(O),A=O)}A!==O&&t.push(O);O=t}L=O.length-1;A=[O[0]];v(O,0,L,K,A);A.push(O[L]);return A}})();

var ehcurel=null,ehclosetimer=0,ehddclosetimer=0,curehdd=null,eecurel=null;function showeh(a){if(null==eecurel){unhideeh(0);var c=document.getElementById(a),b=document.getElementById("eh");a!=ehcurel?(ehcurel=a,a=findPos(c),b.style.display="block",b.style.left=a[0]+"px",b.style.top=a[1]+c.offsetHeight+"px"):(b.style.display="none",ehcurel=null);c.focus()}}
function reshrinkeh(a){null==eecurel&&a==ehcurel&&(document.getElementById("ehdd").style.display="block",document.getElementById("eh").style.display="none",ehcurel=null,curehdd=a,unhideeh(0))}function unhideeh(a){ehcancelclosetimer()}function hideeh(a){null==ehcurel?ehddclosetimer=window.setTimeout(function(){curehdd=null;document.getElementById("ehdd").style.display="none"},250):ehclosetimer=window.setTimeout(reallyhideeh,250)}
function reallyhideeh(){document.getElementById("eh").style.display="none";ehcurel=null}function ehcancelclosetimer(){ehclosetimer&&(window.clearTimeout(ehclosetimer),ehclosetimer=null)}
function showehdd(a,c,b){if((null==eecurel||eecurel!=a)&&null!=document.getElementById("tips"+b)){ehddclosetimer&&a!=curehdd&&(window.clearTimeout(ehddclosetimer),ehddclosetimer=null);if(a!=ehcurel){var d=document.getElementById("ehdd"),e=document.getElementById(a),f=findPos(e);document.getElementById("ehddtext").innerHTML=c;document.getElementById("eh").innerHTML=document.getElementById("tips"+b).innerHTML;d.style.display="block";d.style.left=f[0]+"px";d.style.top=f[1]+e.offsetHeight+"px"}curehdd=
a}}function updateehpos(){if(curehdd||ehcurel){var a=document.getElementById("eh"),c=document.getElementById("ehdd"),b=document.getElementById(curehdd||ehcurel),d=findPos(b);a.style.left=d[0]+"px";a.style.top=d[1]+b.offsetHeight+"px";c.style.left=d[0]+"px";c.style.top=d[1]+b.offsetHeight+"px"}};
