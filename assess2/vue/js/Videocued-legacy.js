System.register(["./index-legacy.js?v=BKyallcW","./i18n-legacy.js?v=BYTFlhMA"],function(e,t){"use strict";var s,i,n,o,r,a,l,u,c,h,p,d,y,m,w,f,v,q,I,g,k,x,P,T,O,V,b,F;return{setters:[e=>{s=e.a,i=e.s,n=e.I,o=e.A,r=e.Q,a=e.F},e=>{l=e._,u=e.I,c=e.e,h=e.j,p=e.l,d=e.k,y=e.q,m=e.g,w=e.m,f=e.t,v=e.z,q=e.o,I=e.M,g=e.A,k=e.C,x=e.J,P=e.B,T=e.x,O=e.G,V=e.Z,b=e.F,F=e.f}],execute:function(){const t={class:"flex-nowrap-center"},S={class:"qname-wrap"},$=["title"],C={key:0,class:"redoicon"},j={key:1,class:"redoicon"},E=["aria-label"],_={key:0},L={class:"home"},N=["aria-label"],A={id:"playerwrapper"},R=["aria-hidden"];e("default",l({name:"videocued",components:{FullQuestionHeader:a,VideocuedNav:l({name:"VideocuedNav",props:["cue","toshow","showfollowup"],components:{MenuButton:I,VideocuedNavListItem:l({name:"VideocuedNavListItem",props:["option","selected"],components:{Icons:u},mixins:[s],computed:{statusIcon(){if("v"===this.option.type||"f"===this.option.type)return"video";if("q"===this.option.type){if("unattempted"===i.assessInfo.questions[this.option.qn].status){if(1===this.qsAttempted[this.option.qn])return"attempted";if(this.qsAttempted[this.option.qn]>0)return"partattempted"}return i.assessInfo.questions[this.option.qn].status}return"none"},nameHover(){return"q"===this.option.type&&0!==i.assessInfo.questions[this.option.qn].withdrawn?this.$t("header.withdrawn"):""},scoreDisplay(){if("q"!==this.option.type)return"";{const e=i.assessInfo.questions[this.option.qn];if(e.hasOwnProperty("gbscore")){let t=e.canretry?"(":"[";return t+=e.gbscore+"/"+e.points_possible,t+=e.canretry?")":"]",t}return this.$t("header.pts",e.points_possible)}},canRetry(){return"q"===this.option.type&&i.assessInfo.questions[this.option.qn].canretry},canRegen(){return"q"===this.option.type&&i.assessInfo.questions[this.option.qn].regens_remaining}}},[["render",function(e,s,i,n,o,r){const a=m("icons");return q(),c("span",t,[h("span",S,[d(a,{name:r.statusIcon,class:"qstatusicon"},null,8,["name"]),h("span",{class:w({greystrike:""!==r.nameHover}),title:r.nameHover},f(i.option.title),11,$),y(" "+f(r.scoreDisplay),1)]),i.selected?p("",!0):(q(),c("span",C,[r.canRetry?(q(),v(a,{key:0,name:"retry"})):p("",!0)])),i.selected?p("",!0):(q(),c("span",j,[r.canRegen?(q(),v(a,{key:0,name:"retake"})):p("",!0)]))])}]])},computed:{hasIntro:()=>""!==i.assessInfo.intro,navOptions(){var e=[];this.hasIntro&&e.push({onclick:()=>this.$emit("jumpto",-1,"i"),title:this.$t("intro"),type:"i"});for(let t=0;t<i.assessInfo.videocues.length;t++){const s=i.assessInfo.videocues[t];e.push({onclick:()=>this.$emit("jumpto",t,"v"),type:"v",title:s.title,cue:t}),s.hasOwnProperty("qn")&&e.push({onclick:()=>this.$emit("jumpto",t,"q"),type:"q",title:this.$t("question_n",{n:parseInt(s.qn)+1}),qn:parseInt(s.qn),cue:t,subitem:!0}),s.hasOwnProperty("followuptime")&&(s.followuplink||this.showfollowup.includes(t))&&e.push({onclick:()=>this.$emit("jumpto",t,"f"),type:"f",title:s.followuptitle,cue:t,subitem:!0})}return e},curOption(){const e=parseInt(this.cue);if(-1===e&&this.hasIntro)return 0;for(let t=this.hasIntro?1:0;t<this.navOptions.length;t++)if(this.navOptions[t].cue===e&&this.navOptions[t].type===this.toshow)return t;return-1},showNextPrev(){return Object.keys(this.navOptions).length>1},prevLink(){return this.curOption<=0?"":this.navOptions[this.curOption-1].internallink},nextLink(){return this.curOption>=this.navOptions.length-1?"":this.navOptions[this.curOption+1].internallink}}},[["render",function(e,t,s,i,n,o){const r=m("videocued-nav-list-item"),a=m("menu-button");return q(),c("div",{class:"subheader",role:"navigation","aria-label":e.$t("regions.qvidnav")},[d(a,{id:"qnav",options:o.navOptions,selected:o.curOption,searchby:"title"},{default:k(({option:e,selected:t})=>[d(r,{option:e,selected:t},null,8,["option","selected"])]),_:1},8,["options","selected"]),g(e.$slots,"default")],8,E)}]]),Question:r,VideocuedResultNav:l({name:"VideocuedResultNav",props:["qn","cue","playing"],computed:{qdata(){return i.assessInfo.questions[this.qn]},showNav(){return i.inProgress&&i.assessInfo.hasOwnProperty("questions")&&this.qdata.hasOwnProperty("score")&&(this.qdata.try>0||this.qdata.hasOwnProperty("tries_remaining_range"))&&0===this.qdata.withdrawn},showScores:()=>"during"===i.assessInfo.showscores,status(){if(!this.showScores||!this.qdata.hasOwnProperty("parts"))return"neutral";for(let e=0;e<this.qdata.parts.length;e++)if(0===this.qdata.parts[e].try||this.qdata.parts[e].rawscore<.98)return"neutral";return"correct"},nextVidType(){return i.assessInfo.videocues[this.cue].hasOwnProperty("followuptitle")?"followup":"nextseg"},hasNextVid(){return i.assessInfo.videocues[this.cue].hasOwnProperty("followuptitle")&&this.$emit("addfollowup",this.cue),"followup"===this.nextVidType||i.assessInfo.videocues.hasOwnProperty(this.cue+1)},nextVidTitle(){return"followup"===this.nextVidType?i.assessInfo.videocues[this.cue].followuptitle:i.assessInfo.videocues[this.cue+1].title},showSkip(){return"correct"===this.status&&"followup"===this.nextVidType&&i.assessInfo.videocues.hasOwnProperty(this.cue+1)},skipTitle(){return i.assessInfo.videocues[this.cue+1].title}},methods:{skipLink(){this.$emit("jumpto",this.cue+1,"v")},nextVidLink(){"followup"===this.nextVidType?this.$emit("jumpto",this.cue,"f"):this.$emit("jumpto",this.cue+1,"v")},startVid(){this.$emit("jumpto",-1===this.cue?0:this.cue,"rv")}}},[["render",function(e,t,s,i,n,o){return-1===s.qn||o.showNav?(q(),c("div",_,[-1!==s.qn||s.playing?p("",!0):(q(),c("button",{key:0,onClick:t[0]||(t[0]=(...e)=>o.startVid&&o.startVid(...e)),class:"primary"},f(e.$t("videocued.start")),1)),s.qn>-1&&o.hasNextVid?(q(),c("button",{key:1,onClick:t[1]||(t[1]=(...e)=>o.nextVidLink&&o.nextVidLink(...e)),class:w({primary:"correct"!==o.status||!o.showSkip})},f(e.$t("videocued.continue",{title:o.nextVidTitle})),3)):p("",!0),s.qn>-1&&o.showSkip?(q(),c("button",{key:2,onClick:t[2]||(t[2]=(...e)=>o.skipLink&&o.skipLink(...e)),class:"primary"},f(e.$t("videocued.skipto",{title:o.skipTitle})),1)):p("",!0)])):p("",!0)}]]),InterQuestionTextList:x,AssessHeader:o,IntroText:n},data:function(){return{videoWidth:600,aspectRatioPercent:56.2,ytplayer:null,timer:null,cue:0,toshow:"v",showfolloup:[],playing:!1}},computed:{curCue(){return this.cue>-1?i.assessInfo.videocues[this.cue]:{}},qn(){return"q"===this.toshow?parseInt(this.curCue.qn):-1},timeCues(){const e={};for(const t in i.assessInfo.videocues)i.assessInfo.videocues[t].hasOwnProperty("qn")&&(e[i.assessInfo.videocues[t].time]=parseInt(t));return e},nextVidTimes(){const e={};for(let t=0;t<i.assessInfo.videocues.length;t++)i.assessInfo.videocues[t].hasOwnProperty("followuptime")&&i.assessInfo.videocues.hasOwnProperty(t+1)?e[i.assessInfo.videocues[t].followuptime]=t:!i.assessInfo.videocues[t].hasOwnProperty("qn")&&i.assessInfo.videocues.hasOwnProperty(t+1)&&(e[i.assessInfo.videocues[t].time]=t);return e},intro:()=>i.assessInfo.intro,questionArray(){const e={};for(let t=0;t<i.assessInfo.questions.length;t++)e[t]=t;return e},lastQ:()=>i.assessInfo.questions.length-1,textList:()=>i.assessInfo.hasOwnProperty("interquestion_text")?i.assessInfo.interquestion_text:[]},methods:{createPlayer(){const e={autoplay:0,wmode:"transparent",fs:document.exitFullscreen||document.mozCancelFullScreen||document.webkitExitFullscreen||document.msExitFullscreen?1:0,controls:2,rel:0,modestbranding:1,showinfo:0,origin:window.location.protocol+"//"+window.location.host},t=i.assessInfo.videoar.split(":"),s=window.innerHeight-50;this.videoWidth=t[0]/t[1]*s,this.aspectRatioPercent=Math.round(1e3*s/this.videoWidth)/10,this.ytplayer=new window.YT.Player("player",{height:s,width:this.videoWidth,videoId:i.assessInfo.videoid,playerVars:e,events:{onReady:()=>this.handlePlayerReady(),onStateChange:e=>this.handlePlayerStateChange(e),onError:e=>this.handlePlayerError(e)}})},exitFullscreen(){(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)&&(document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen())},checkTime(){const e=Math.floor(this.ytplayer.getCurrentTime());!this.timeCues.hasOwnProperty(e)||"v"===this.toshow&&this.cue===this.timeCues[e]+1||"f"===this.toshow&&this.cue===this.timeCues[e]||this.ytplayer.getPlayerState()!==window.YT.PlayerState.PLAYING?(this.nextVidTimes.hasOwnProperty(e)&&this.cue===this.nextVidTimes[e]&&(this.cue=this.cue+1,this.toshow="v"),this.timer=window.setTimeout(()=>{this.checkTime()},200)):this.jumpTo(parseInt(this.timeCues[e]),"q")},handlePlayerReady(){window.$("iframe#player").removeAttr("height").removeAttr("width").css("height","").css("width","")},handlePlayerStateChange(e){e.data===window.YT.PlayerState.PLAYING?this.timer=window.setTimeout(()=>{this.checkTime()},200):e.data===window.YT.PlayerState.ENDED&&"v"===this.toshow&&this.curCue.hasOwnProperty("qn")&&(window.clearTimeout(this.timer),this.jumpTo(this.cue,"q")),this.playing=e.data===window.YT.PlayerState.PLAYING||e.data===window.YT.PlayerState.BUFFERING},handlePlayerError(e){i.errorMsg=e.data},jumpTo(e,t,s=0){if("rv"===t){if(this.ytplayer&&2===this.ytplayer.getPlayerState())return void this.ytplayer.playVideo();t="v"}if(-1===e||"q"===t)this.exitFullscreen(),this.ytplayer&&this.ytplayer.pauseVideo();else{if(null===this.ytplayer||"function"!=typeof this.ytplayer.seekTo)return 0===s&&(i.errorMsg="ytnotready"),void window.setTimeout(()=>{this.jumpTo(e,t,1)},100);s>0&&(i.errorMsg=null);const n=i.assessInfo.videocues[e];let o=0;if("v"===t){if(e>0){const t=i.assessInfo.videocues[e-1];o=t.hasOwnProperty("followuptime")?t.followuptime:t.time}}else"f"===t&&(o=n.time);this.ytplayer.seekTo(o,!0),this.ytplayer.playVideo()}this.cue=e,this.toshow=t},addShowFollowup(e){this.showfolloup.push(e)}},mounted(){if(window.YT)this.createPlayer();else if(window.onYouTubePlayerAPIReady=()=>{this.createPlayer()},!document.getElementById("yt_player_api")){const e=document.createElement("script");e.id="yt_player_api",e.src="https://www.youtube.com/player_api",document.head.appendChild(e)}},created(){""!==i.assessInfo.intro&&(this.cue=-1,this.toshow="i")}},[["render",function(e,t,s,i,n,o){const r=m("assess-header"),a=m("videocued-result-nav"),l=m("videocued-nav"),u=m("intro-text"),p=m("inter-question-text-list"),y=m("full-question-header"),v=m("question");return q(),c("div",L,[h("a",{href:"#",class:"sr-only",onClick:t[0]||(t[0]=P(t=>e.$refs.scrollpane.focus(),["prevent"]))},f(e.$t("jumptocontent")),1),d(r),d(l,{cue:e.cue,toshow:e.toshow,showfollowup:e.showfolloup,onJumpto:o.jumpTo},{default:k(()=>[d(a,{class:"med-left",qn:o.qn,cue:e.cue,playing:e.playing,onJumpto:o.jumpTo,onAddfollowup:o.addShowFollowup},null,8,["qn","cue","playing","onJumpto","onAddfollowup"])]),_:1},8,["cue","toshow","showfollowup","onJumpto"]),h("div",{class:"scrollpane",role:"region",ref:"scrollpane",tabindex:"-1","aria-label":e.$t("regions.q_and_vid")},[d(u,{active:-1==e.cue,html:o.intro,key:"-1"},null,8,["active","html"]),T(h("div",A,[h("div",{class:"video-wrapper-wrapper",style:V({"max-width":e.videoWidth+"px"})},[h("div",{class:"fluid-width-video-wrapper",style:V({"padding-bottom":e.aspectRatioPercent+"%"})},[...t[1]||(t[1]=[h("div",{id:"player"},null,-1)])],4)],4)],512),[[O,e.cue>-1&&-1===o.qn]]),(q(!0),c(b,null,F(o.questionArray,e=>(q(),c("div",{key:e,"aria-hidden":e!=o.qn,class:w({inactive:e!=o.qn})},[d(p,{pos:"before",qn:e,active:e==o.qn,textlist:o.textList,lastq:o.lastQ},null,8,["qn","active","textlist","lastq"]),T(d(y,{qn:e},null,8,["qn"]),[[O,e==o.qn]]),d(v,{qn:e,active:e==o.qn,getwork:1},null,8,["qn","active"]),d(p,{pos:"after",qn:e,active:e==o.qn,textlist:o.textList,lastq:o.lastQ},null,8,["qn","active","textlist","lastq"])],10,R))),128))],8,N)])}]]))}}});
