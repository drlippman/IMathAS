(function(e){function s(s){for(var r,i,o=s[0],c=s[1],d=s[2],u=0,h=[];u<o.length;u++)i=o[u],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&h.push(a[i][0]),a[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);l&&l(s);while(h.length)h.shift()();return n.push.apply(n,d||[]),t()}function t(){for(var e,s=0;s<n.length;s++){for(var t=n[s],r=!0,i=1;i<t.length;i++){var c=t[i];0!==a[c]&&(r=!1)}r&&(n.splice(s--,1),e=o(o.s=t[0]))}return e}var r={},a={gbviewassess:0},n=[];function i(e){return o.p+"js/"+({"lang-de-json":"lang-de-json"}[e]||e)+".js"}function o(s){if(r[s])return r[s].exports;var t=r[s]={i:s,l:!1,exports:{}};return e[s].call(t.exports,t,t.exports,o),t.l=!0,t.exports}o.e=function(e){var s=[],t=a[e];if(0!==t)if(t)s.push(t[2]);else{var r=new Promise((function(s,r){t=a[e]=[s,r]}));s.push(t[2]=r);var n,c=document.createElement("script");c.charset="utf-8",c.timeout=120,o.nc&&c.setAttribute("nonce",o.nc),c.src=i(e);var d=new Error;n=function(s){c.onerror=c.onload=null,clearTimeout(u);var t=a[e];if(0!==t){if(t){var r=s&&("load"===s.type?"missing":s.type),n=s&&s.target&&s.target.src;d.message="Loading chunk "+e+" failed.\n("+r+": "+n+")",d.name="ChunkLoadError",d.type=r,d.request=n,t[1](d)}a[e]=void 0}};var u=setTimeout((function(){n({type:"timeout",target:c})}),12e4);c.onerror=c.onload=n,document.head.appendChild(c)}return Promise.all(s)},o.m=e,o.c=r,o.d=function(e,s,t){o.o(e,s)||Object.defineProperty(e,s,{enumerable:!0,get:t})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,s){if(1&s&&(e=o(e)),8&s)return e;if(4&s&&"object"===typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(o.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&s&&"string"!=typeof e)for(var r in e)o.d(t,r,function(s){return e[s]}.bind(null,r));return t},o.n=function(e){var s=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(s,"a",s),s},o.o=function(e,s){return Object.prototype.hasOwnProperty.call(e,s)},o.p="vue/",o.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],d=c.push.bind(c);c.push=s,c=c.slice();for(var u=0;u<c.length;u++)s(c[u]);var l=d;n.push([1,"chunk-vendors","chunk-common"]),t()})({1:function(e,s,t){e.exports=t("c9fa")},"409a":function(e,s,t){},a02a:function(e,s,t){"use strict";t("409a")},ad35:function(e,s,t){},c9fa:function(e,s,t){"use strict";t.r(s);t("e260"),t("e6cf"),t("cca6"),t("a79d");var r=t("2b0e"),a=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{attrs:{id:"app",role:"main"}},[e.assessInfoLoaded?t("div",{staticClass:"gbmainview"},[t("h1",[e._v(e._s(e.$t("gradebook.detail_title")))]),t("h2",[e._v(e._s(e.aData.userfullname))]),t("h3",[e._v(e._s(e.aData.name))]),t("div",[e._v(" "+e._s(e.$t("gradebook.started"))+": "+e._s(e.startedString)),t("br"),e._v(" "+e._s(e.$t("gradebook.lastchange"))+": "+e._s(e.lastchangeString)+" "),e.aData.timeontask>0?t("span",[t("br"),e._v(" "+e._s(e.$tc("gradebook.time_onscreen",e.attemptCount))+": "+e._s(e.totalTimeOnTask)+" ")]):e._e(),e.aData.hasOwnProperty("timelimit_ext")?t("span",[t("br"),e._v(" "+e._s(e.$t("gradebook."+(e.aData.timelimit_ext>0?"has_timeext":"used_timeext"),{n:Math.abs(e.aData.timelimit_ext)}))+" ")]):e._e()]),t("div",[e._v(" "+e._s(e.$t("gradebook.due"))+": "+e._s(e.aData.enddate_disp)+" "),e.canEdit?t("button",{staticClass:"slim",attrs:{type:"button"},on:{click:e.makeException}},[e._v(" "+e._s(e.exceptionActionLabel)+" ")]):e._e(),e.aData.hasOwnProperty("original_enddate")?t("span",[t("br"),e._v(" "+e._s(e.$t("gradebook.originally_due"))+": "+e._s(e.aData.original_enddate_disp)+". "+e._s(e.extensionString)+" ")]):e._e(),e.aData.hasOwnProperty("attemptext")?t("span",[t("br"),e._v(" "+e._s(e.$t("gradebook.attemptext",{n:e.aData.attemptext}))+" ")]):e._e()]),e.canEdit&&e.aData.latepass_status>1?t("div",[e._v(" "+e._s(e.latepassBlockMsg)+" "),e.aData.latepass_status>6?t("button",{attrs:{type:"button"},on:{click:e.clearLPblock}},[e._v(" "+e._s(e.$t("gradebook.clear_latepass_block"))+" ")]):e._e()]):e._e(),t("div",[t("strong",[e._v(" "+e._s(e.$t("gradebook.gb_score"))+": "),e.aData.hasOwnProperty("scoreoverride")&&e.canEdit?t("span",[t("input",{attrs:{id:"assessoverride",size:"4"},domProps:{value:e.aData.scoreoverride},on:{input:e.setScoreOverride}}),e._v("/"+e._s(e.aData.points_possible)+" ")]):t("span",[e.canEdit||"N/A"!==e.aData.gbscore?t("span",[e._v(" "+e._s(e.aData.gbscore)+"/"+e._s(e.aData.points_possible)+" ")]):t("span",[e._v(" "+e._s(e.$t("gradebook.avail_"+e.aData.scoresingb))+" ")])])]),e.aData.hasOwnProperty("scoreoverride")?t("span",[e._v(" ("+e._s(e.$t("gradebook.overridden"))+") ")]):e.canEdit?t("span",[t("button",{staticClass:"slim",attrs:{type:"button"},on:{click:function(s){e.showOverride=!e.showOverride}}},[e._v(" "+e._s(e.$t("gradebook.override"))+" ")]),e.showOverride?t("span",[t("label",{attrs:{for:"assessoverride"}},[e._v(e._s(e.$t("gradebook.override")))]),e._v(": "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.assessOverride,expression:"assessOverride"}],attrs:{id:"assessoverride",size:"4"},domProps:{value:e.assessOverride},on:{input:function(s){s.target.composing||(e.assessOverride=s.target.value)}}})]):e._e()]):e._e(),e.canEdit?t("button",{staticClass:"slim",attrs:{type:"button"},on:{click:function(s){return e.clearAttempts("all")}}},[e._v(" "+e._s(e.$t("gradebook.clear_all"))+" ")]):e._e(),e.aData.hasOwnProperty("excused")?t("button",{staticClass:"slim",attrs:{type:"button"},on:{click:function(s){e.showExcused=!e.showExcused}}},[e._v(" "+e._s(e.$t("gradebook."+(e.showExcused?"hide":"show")+"_excused"))+" ")]):e._e()]),e.showExcused?t("div",{staticClass:"introtext"},[e._v(" "+e._s(e.$t("gradebook.excused_list"))+" "),t("ul",e._l(e.aData.excused,(function(s){return t("li",{key:s},[e._v(" "+e._s(s)+" ")])})),0)]):e._e(),e.canEdit?t("div",[e.showViewAsStu?t("a",{attrs:{href:e.viewAsStuUrl}},[e._v(" "+e._s(e.$t("gradebook.view_as_stu"))+" ")]):e._e(),e.showViewAsStu?t("span",[e._v("|")]):e._e(),t("a",{attrs:{href:e.viewAsStuUrl+"#/print"}},[e._v(" "+e._s(e.$t("gradebook.print"))+" ")])]):e._e(),0==e.aData.assess_versions.length?t("div",[e._v(" "+e._s(e.$t("gradebook.no_versions"))+" ")]):t("div",{staticClass:"gbmainview"},[t("div",[e._v(" "+e._s(e.scoreCalc)+" "),t("div",[e.viewFull||"by_assessment"===e.aData.submitby?t("gb-assess-select",{staticStyle:{display:"inline-block"},attrs:{versions:e.aData.assess_versions,submitby:e.aData.submitby,haspractice:e.aData.has_practice,selected:e.curAver},on:{setversion:e.changeAssessVersion}}):e._e(),!e.isByQuestion&&e.canEdit&&-1!=e.aData.assess_versions[e.curAver].status?t("button",{attrs:{type:"button"},on:{click:function(s){return e.clearAttempts("attempt")}}},[e._v(" "+e._s(e.$t("gradebook.clear_attempt"))+" ")]):e._e()],1),e.isUnsubmitted?t("div",[e._v(" "+e._s(e.$t("gradebook.unsubmitted"))+" "),t("button",{attrs:{type:"button"},on:{click:e.submitVersion}},[e._v(" "+e._s(e.$t("closed.submit_now"))+" ")]),!e.canEdit&&e.aData.can_use_latepass?t("button",{attrs:{type:"button"},on:{click:e.redeemLatePass}},[e._v(" "+e._s(e.$t("lti.use_latepass"))+" ")]):e._e()]):e._e()]),""!==e.curEndmsg?t("div",[e.viewFull?t("button",{attrs:{type:"button"},on:{click:function(s){e.showEndmsg=!e.showEndmsg}}},[e._v(" "+e._s(e.$t("gradebook."+(e.showEndmsg?"hide":"show")+"_endmsg"))+" ")]):e._e(),e.showEndmsg||!e.viewFull?t("div",{staticClass:"introtext",domProps:{innerHTML:e._s(e.curEndmsg)}}):e._e()]):e._e(),e.canEdit?t("div",[t("button",{on:{click:function(s){e.showFilters=!e.showFilters}}},[e._v(" "+e._s(e.$t("gradebook.filters"))+" ")]),e.showFilters?t("div",{staticClass:"tabpanel"},[t("p",[e._v(e._s(e.$t("gradebook.hide"))+":")]),t("ul",{staticStyle:{"list-style-type":"none",margin:"0","padding-left":"15px"}},[t("li",[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.hideUnanswered,expression:"hideUnanswered"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.hideUnanswered)?e._i(e.hideUnanswered,null)>-1:e.hideUnanswered},on:{change:function(s){var t=e.hideUnanswered,r=s.target,a=!!r.checked;if(Array.isArray(t)){var n=null,i=e._i(t,n);r.checked?i<0&&(e.hideUnanswered=t.concat([n])):i>-1&&(e.hideUnanswered=t.slice(0,i).concat(t.slice(i+1)))}else e.hideUnanswered=a}}}),e._v(" "+e._s(e.$t("gradebook.hide_unans"))+" ")])]),t("li",[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.hideZero,expression:"hideZero"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.hideZero)?e._i(e.hideZero,null)>-1:e.hideZero},on:{change:function(s){var t=e.hideZero,r=s.target,a=!!r.checked;if(Array.isArray(t)){var n=null,i=e._i(t,n);r.checked?i<0&&(e.hideZero=t.concat([n])):i>-1&&(e.hideZero=t.slice(0,i).concat(t.slice(i+1)))}else e.hideZero=a}}}),e._v(" "+e._s(e.$t("gradebook.hide_zero"))+" ")])]),t("li",[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.hideNonzero,expression:"hideNonzero"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.hideNonzero)?e._i(e.hideNonzero,null)>-1:e.hideNonzero},on:{change:function(s){var t=e.hideNonzero,r=s.target,a=!!r.checked;if(Array.isArray(t)){var n=null,i=e._i(t,n);r.checked?i<0&&(e.hideNonzero=t.concat([n])):i>-1&&(e.hideNonzero=t.slice(0,i).concat(t.slice(i+1)))}else e.hideNonzero=a}}}),e._v(" "+e._s(e.$t("gradebook.hide_nonzero"))+" ")])]),t("li",[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.hidePerfect,expression:"hidePerfect"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.hidePerfect)?e._i(e.hidePerfect,null)>-1:e.hidePerfect},on:{change:function(s){var t=e.hidePerfect,r=s.target,a=!!r.checked;if(Array.isArray(t)){var n=null,i=e._i(t,n);r.checked?i<0&&(e.hidePerfect=t.concat([n])):i>-1&&(e.hidePerfect=t.slice(0,i).concat(t.slice(i+1)))}else e.hidePerfect=a}}}),e._v(" "+e._s(e.$t("gradebook.hide_perfect"))+" ")])]),t("li",[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.hideFeedback,expression:"hideFeedback"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.hideFeedback)?e._i(e.hideFeedback,null)>-1:e.hideFeedback},on:{change:function(s){var t=e.hideFeedback,r=s.target,a=!!r.checked;if(Array.isArray(t)){var n=null,i=e._i(t,n);r.checked?i<0&&(e.hideFeedback=t.concat([n])):i>-1&&(e.hideFeedback=t.slice(0,i).concat(t.slice(i+1)))}else e.hideFeedback=a}}}),e._v(" "+e._s(e.$t("gradebook.hide_fb"))+" ")])]),t("li",[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.hideNowork,expression:"hideNowork"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.hideNowork)?e._i(e.hideNowork,null)>-1:e.hideNowork},on:{change:function(s){var t=e.hideNowork,r=s.target,a=!!r.checked;if(Array.isArray(t)){var n=null,i=e._i(t,n);r.checked?i<0&&(e.hideNowork=t.concat([n])):i>-1&&(e.hideNowork=t.slice(0,i).concat(t.slice(i+1)))}else e.hideNowork=a}}}),e._v(" "+e._s(e.$t("gradebook.hide_nowork"))+" ")])])]),t("p",[t("button",{attrs:{type:"button"},on:{click:e.showAllAns}},[e._v(" "+e._s(e.$t("gradebook.show_all_ans"))+" ")]),t("button",{attrs:{type:"button"},on:{click:function(s){e.showAllWork=!e.showAllWork}}},[e._v(" "+e._s(e.$t("gradebook.show_all_work"))+" ")]),t("button",{on:{click:e.previewFiles}},[e._v(" "+e._s(e.$t("gradebook.preview_files"))+" ")])])]):e._e()]):e._e(),e.viewFull?t("div",e._l(e.curQuestions,(function(s,r){return t("div",{key:r,staticClass:"bigquestionwrap",attrs:{id:"qwrap"+(r+1)}},[t("div",{staticClass:"headerpane"},[t("strong",[e._v(" "+e._s(e.$tc("question_n",r+1))+". ")]),"by_question"===e.aData.submitby?t("gb-question-select",{staticClass:"med-left",attrs:{versions:s,selected:e.curQver[r],qn:r},on:{setversion:e.changeQuestionVersion}}):s[e.curQver[r]].hasOwnProperty("gbscore")&&"N/A"!==s[e.curQver[r]].gbscore?t("span",[e._v(" "+e._s(e.$t("gradebook.score"))+": "),t("strong",[e._v(" "+e._s(s[e.curQver[r]].gbscore)+"/"+e._s(s[e.curQver[r]].points_possible)+" ")])]):e._e()],1),t("div",{staticClass:"scrollpane"},[t("gb-question",{class:{inactive:!e.showQuestion[r]},attrs:{qdata:s[e.curQver[r]],qn:r}}),t("gb-showwork",{attrs:{work:s[e.curQver[r]].work,worktime:s[e.curQver[r]].worktime,showall:e.showAllWork}})],1),t("gb-score-details",{attrs:{showfull:e.showQuestion[r],canedit:e.canEdit,qdata:s[e.curQver[r]],qn:r}})],1)})),0):e._e(),t("gb-feedback",{attrs:{qn:"gen",username:e.aData.userfullname,show:e.viewFull,canedit:e.canEdit,useeditor:e.useEditor,value:e.assessFeedback},on:{update:e.updateFeedback}}),t("div",[e.canEdit?t("button",{staticClass:"primary",attrs:{type:"button",disabled:!e.canSubmit},on:{click:function(s){return e.submitChanges(!0)}}},[e._v(" "+e._s(e.$t("gradebook.save"))+" ")]):e._e(),""!==e.savedMsg?t("span",{staticClass:"noticetext"},[e._v(" "+e._s(e.savedMsg)+" ")]):e._e(),t("button",{staticClass:"secondary",attrs:{type:"button",disabled:!e.canSubmit},on:{click:e.exit}},[e._v(" "+e._s(e.$t("gradebook.return"))+" ")])]),t("div",{staticClass:"floatrightbutton"},[""!==e.savedMsg?t("div",{staticClass:"noticetext"},[e._v(" "+e._s(e.savedMsg)+" ")]):e._e(),e.canEdit?t("button",{staticClass:"primary",attrs:{type:"button",disabled:!e.canSubmit},on:{click:e.submitChanges}},[e._v(" "+e._s(e.$t("gradebook.save"))+" ")]):e._e()]),e.showCategories?t("summary-categories",{attrs:{data:e.curQuestionVers}}):e._e(),t("gb-clear-attempts"),t("div",{staticStyle:{"margin-bottom":"100px"}})],1)]):t("div",[e._v(" "+e._s(e.$t("loading"))+" ")]),e.hasError?t("error-dialog",{attrs:{errormsg:e.errorMsg},on:{clearerror:e.clearError}}):e._e(),null!==e.confirmObj?t("confirm-dialog",{attrs:{data:e.confirmObj},on:{close:e.closeConfirm}}):e._e()],1)},n=[],i=(t("13d5"),t("a9e3"),t("b64b"),t("4d63"),t("ac1f"),t("25f0"),t("5319"),t("841c"),t("498a"),t("a434"),t("466d"),t("1276"),r["a"].observable({assessInfo:null,APIbase:null,aid:null,cid:null,uid:null,stu:0,queryString:"",exitUrl:"",inTransit:!1,saving:"",errorMsg:null,confirmObj:null,curAver:0,ispractice:!1,curQver:[],orig_submitby:null,scoreOverrides:{},feedbacks:{},clearAttempts:{show:!1,type:"",qn:0}})),o={loadGbAssessData:function(e,s){var t=this;i.inTransit?window.setTimeout((function(){return t.loadGbAssessData(e,s)}),20):null===i.assessInfo&&window.gbAssessData?(i.assessInfo=window.gbAssessData,"undefined"!==typeof e&&e()):(i.inTransit=!0,i.errorMsg=null,window.$.ajax({url:i.APIbase+"gbloadassess.php"+i.queryString,dataType:"json",xhrFields:{withCredentials:!0},crossDomain:!0}).done((function(s){s.hasOwnProperty("error")?t.handleError(s.error):(i.assessInfo=s,i.curAver=s.scored_version,t.setQverAsScored(s.scored_version),"undefined"!==typeof e&&e(),r["a"].nextTick((function(){if(window.initAnswerboxHighlights(),window.location.hash){var e=document.getElementById(window.location.hash.substring(1).replace(/\//,""));e&&e.scrollIntoView()}})))})).fail((function(e,s,r){t.handleError("parsererror"===s?"parseerror":"noserver")})).always((function(e){i.inTransit=!1})))},loadGbAssessVersion:function(e,s){var t=this;if(i.inTransit)window.setTimeout((function(){return t.loadGbAssessVersion(e,s)}),20);else{var a=i.queryString+"&ver="+e+"&practice="+(s?1:0);i.inTransit=!0,i.errorMsg=null,window.$.ajax({url:i.APIbase+"gbloadassessver.php"+a,dataType:"json",xhrFields:{withCredentials:!0},crossDomain:!0}).done((function(a){a.hasOwnProperty("error")?t.handleError(a.error):(s&&(e=i.assessInfo.assess_versions.length-1),r["a"].set(i.assessInfo.assess_versions,e,a),i.curAver=e,t.setQverAsScored(e),i.ispractice=s,s?(null===i.orig_submitby&&(i.orig_submitby=i.assessInfo.submitby),i.assessInfo.submitby="by_question"):null!==i.orig_submitby&&(i.assessInfo.submitby=i.orig_submitby),r["a"].nextTick((function(){window.initAnswerboxHighlights()})))})).fail((function(e,s,r){t.handleError("parsererror"===s?"parseerror":"noserver")})).always((function(e){i.inTransit=!1}))}},loadGbQuestionVersion:function(e,s,t,a){var n=this;if(i.inTransit)window.setTimeout((function(){return n.loadGbQuestionVersion(e,s,t,a)}),20);else{var o=i.queryString+"&ver="+s+"&qn="+e;o+="&practice="+(i.ispractice?1:0),null===i.assessInfo.assess_versions[i.curAver].questions[e][s].html||!0===t?(i.inTransit=!0,i.errorMsg=null,window.$.ajax({url:i.APIbase+"gbloadquestionver.php"+o,dataType:"json",xhrFields:{withCredentials:!0},crossDomain:!0}).done((function(t){t.hasOwnProperty("error")?n.handleError(t.error):(a&&a(),r["a"].set(i.assessInfo.assess_versions[i.curAver].questions[e],s,Object.assign(i.assessInfo.assess_versions[i.curAver].questions[e][s],t)),r["a"].set(i.curQver,e,s),r["a"].nextTick((function(){window.initAnswerboxHighlights()})))})).fail((function(e,s,t){n.handleError("parsererror"===s?"parseerror":"noserver")})).always((function(e){i.inTransit=!1}))):r["a"].set(i.curQver,e,s)}},saveChanges:function(e){var s=this;if(i.inTransit)window.setTimeout((function(){return s.saveChanges(e)}),20);else{if(0===Object.keys(i.scoreOverrides).length&&0===Object.keys(i.feedbacks).length)return i.saving="saved",void(e&&(window.location=window.exiturl));var t=i.queryString;i.inTransit=!0,i.saving="saving",i.errorMsg=null;var a=new FormData;a.append("scores",JSON.stringify(i.scoreOverrides)),a.append("feedback",JSON.stringify(i.feedbacks)),a.append("practice",i.ispractice?1:0),window.$.ajax({url:i.APIbase+"gbsave.php"+t,type:"POST",dataType:"json",data:a,processData:!1,contentType:!1,xhrFields:{withCredentials:!0},crossDomain:!0}).done((function(t){if(t.hasOwnProperty("error"))s.handleError(t.error);else{if(i.saving="saved",e)return i.scoreOverrides={},i.feedbacks={},void(window.location=window.exiturl);for(var a in i.scoreOverrides)if("gen"!==a){var n=a.split(/-/),o=i.assessInfo.assess_versions[n[0]].questions[n[1]][n[2]];o.scoreoverride&&""===i.scoreOverrides[a]&&("number"===typeof o.scoreoverride?r["a"].delete(o,"scoreoverride"):r["a"].delete(o.scoreoverride,n[3])),i.scoreOverrides[a]&&(o.scoreoverride||(i.assessInfo.assess_versions[n[0]].questions[n[1]][n[2]].scoreoverride={}),r["a"].set(i.assessInfo.assess_versions[n[0]].questions[n[1]][n[2]].scoreoverride,n[3],i.scoreOverrides[a]))}else""===i.scoreOverrides.gen?delete i.assessInfo.scoreoverride:(i.assessInfo.gbscore=i.scoreOverrides.gen,i.assessInfo.scoreoverride=i.scoreOverrides.gen);for(var c in t.newscores){var d=c.split(/-/);r["a"].set(i.assessInfo.assess_versions[d[0]].questions[d[1]][d[2]],"score",t.newscores[c][0]);for(var u=0;u<t.newscores[c][1].length;u++)r["a"].set(i.assessInfo.assess_versions[d[0]].questions[d[1]][d[2]].parts,u,t.newscores[c][1][u])}for(var l in i.feedbacks){var h=l.split(/-/);"g"===h[1]?r["a"].set(i.assessInfo.assess_versions[h[0]],"feedback",i.feedbacks[l]):r["a"].set(i.assessInfo.assess_versions[h[0]].questions[h[1]][h[2]],"feedback",i.feedbacks[l])}i.assessInfo.gbscore=t.gbscore,i.assessInfo.scored_version=t.scored_version;for(var p=0;p<t.assess_info.length;p++){i.assessInfo.assess_versions[p].score=t.assess_info[p].score;for(var v=0;v<t.assess_info[p].scoredvers.length;v++)if(i.assessInfo.assess_versions[p].hasOwnProperty("questions"))for(var f=i.assessInfo.assess_versions[p].questions[v],b=0;b<f.length;b++)b===t.assess_info[p].scoredvers[v]?f[b].scored=!0:f[b].scored&&r["a"].delete(f[b],"scored")}i.scoreOverrides={},i.feedbacks={}}})).fail((function(e){i.saving="save_fail"})).always((function(e){i.inTransit=!1}))}},clearLPblock:function(){i.clearAttempts.type="practiceview",this.clearAttempt(!0)},clearAttempt:function(e){var s=this,t={type:i.clearAttempts.type,keepver:e};"attempt"!==i.clearAttempts.type&&"qver"!==i.clearAttempts.type||(t.aver=i.curAver),"qver"===i.clearAttempts.type&&(t.qn=i.clearAttempts.qn,t.qver=i.curQver[t.qn]),window.$.ajax({url:i.APIbase+"gbclearattempt.php"+i.queryString,type:"POST",dataType:"json",data:t,xhrFields:{withCredentials:!0},crossDomain:!0}).done((function(e){if(e.hasOwnProperty("error"))s.handleError(e.error);else if("all"===i.clearAttempts.type&&0===t.keepver)window.location=window.exiturl;else if("all"===i.clearAttempts.type)o.loadGbAssessData();else if("practiceview"===i.clearAttempts.type)i.assessInfo.latepass_status=t.latepass_status;else if(i.assessInfo.gbscore=e.gbscore,i.assessInfo.scored_version=e.scored_version,"attempt"===i.clearAttempts.type){var a=new RegExp("^"+t.aver+"-");for(var n in i.scoreOverrides)n.match(a)&&r["a"].delete(i.scoreOverrides,n);e.hasOwnProperty("newver")?r["a"].set(i.assessInfo.assess_versions,t.aver,e.newver):(i.assessInfo.assess_versions.splice(t.aver,1),o.loadGbAssessVersion(e.scored_version,!1)),t.aver>0&&(i.curAver=t.aver-1)}else if("qver"===i.clearAttempts.type){var c=new RegExp("^"+t.aver+"-"+t.qn+"-"+t.qver+"-");for(var d in i.scoreOverrides)d.match(c)&&r["a"].delete(i.scoreOverrides,d);r["a"].set(i.assessInfo.assess_versions[t.aver],"score",e.assessinfo.score),r["a"].set(i.assessInfo.assess_versions[t.aver],"status",e.assessinfo.status),e.hasOwnProperty("newver")?(r["a"].set(i.assessInfo.assess_versions[t.aver].questions[t.qn],t.qver,e.newver),r["a"].set(i.assessInfo.assess_versions[t.aver].questions[t.qn][e.qinfo.scored_version],"scored",!0)):o.loadGbQuestionVersion(t.qn,e.qinfo.scored_version,!0,(function(){i.assessInfo.assess_versions[t.aver].questions[t.qn].splice(t.qver,1),r["a"].set(i.assessInfo.assess_versions[t.aver].questions[t.qn][e.qinfo.scored_version],"scored",!0)}))}})).fail((function(e){s.handleError("send_fail")})).always((function(e){i.inTransit=!1,i.clearAttempts.show=!1}))},endAssess:function(){var e=this;i.inTransit?window.setTimeout((function(){return e.endAssess()}),20):(i.inTransit=!0,i.errorMsg=null,window.$.ajax({url:i.APIbase+"endassess.php"+i.queryString,dataType:"json",xhrFields:{withCredentials:!0},crossDomain:!0}).done((function(s){s.hasOwnProperty("error")?e.handleError(s.error):(i.assessInfo=null,o.loadGbAssessData())})).fail((function(s,t,r){e.handleError("parsererror"===t?"parseerror":"noserver")})).always((function(e){i.inTransit=!1})))},setQverAsScored:function(e){var s,t=i.assessInfo.assess_versions[e].questions;e:for(var a=0;a<t.length;a++)for(s=0;s<t[a].length;s++){if(t[a][s].hasOwnProperty("scored")){r["a"].set(i.curQver,a,s);continue e}r["a"].set(i.curQver,a,t[a].length-1)}},setScoreOverride:function(e,s,t){var r=i.curAver,a=i.curQver[e],n=i.assessInfo.assess_versions[r].questions[e][a],o=r+"-"+e+"-"+a+"-"+s;if(""===t)i.scoreOverrides[o]="";else{var c=!0;n.singlescore?c=Math.abs(t-n.score/n.points_possible)>.001:n.parts[s]&&(c=Math.abs(t-n.parts[s].score/n.parts[s].points_possible)>.001),n.parts[s]&&n.parts[s].try>0&&(""===t||!c)?delete i.scoreOverrides[o]:i.scoreOverrides[o]=Math.round(1e4*t)/1e4}i.saving=""},setFeedback:function(e,s){var t=i.curAver,r=t,a=!0;if(null===e)r+="-g",s===i.assessInfo.assess_versions[i.curAver].feedback&&(a=!1);else{var n=i.curQver[e];r+="-"+e+"-"+n,s===i.assessInfo.assess_versions[i.curAver].questions[e][n].feedback&&(a=!1)}a?i.feedbacks[r]=s:delete i.feedbacks[r],i.saving=""},handleError:function(e){i.errorMsg=e}},c=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"questionwrap questionpane"},[t("div",{ref:"thisqwrap",staticClass:"question",attrs:{id:"questionwrap"+e.qn},domProps:{innerHTML:e._s(e.qdata.html)}})])},d=[],u={name:"GbQuestion",props:["qdata","qn"],data:function(){return{rendered:!1}},methods:{renderInit:function(){this.rendered||(setTimeout(window.drawPics,100),window.rendermathnode(this.$refs.thisqwrap),window.initSageCell(this.$refs.thisqwrap),window.initlinkmarkup(this.$refs.thisqwrap),window.imathasAssess.init(this.qdata.jsparams,!0,this.$refs.thisqwrap),this.rendered=!0)}},mounted:function(){this.renderInit()},watch:{qdata:function(e,s){null!==e&&(this.rendered=!1,this.$nextTick(this.renderInit))}}},l=u,h=t("2877"),p=Object(h["a"])(l,c,d,!1,null,null,null),v=p.exports,f=function(){var e=this,s=e.$createElement,t=e._self._c||s;return e.work?t("div",{staticClass:"questionpane viewworkwrap"},[t("div",[t("button",{staticClass:"slim",attrs:{type:"button"},on:{click:function(s){e.show=!e.show}}},[e._v(" "+e._s(e.btnLabel)+" ")]),e.show&&"0"!==e.worktime?t("span",{staticClass:"small"},[e._v(" "+e._s(e.$t("gradebook.lastchange"))+" "+e._s(e.worktime)+" ")]):e._e()]),t("transition",{attrs:{name:"fade"}},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],ref:"workbox",staticClass:"introtext",domProps:{innerHTML:e._s(e.work)}})])],1):e._e()},b=[],_=(t("7db0"),{name:"GbShowwork",props:["work","worktime","showall"],data:function(){return{show:!1,rendered:!1}},computed:{btnLabel:function(){return this.$t(this.show?"gradebook.hidework":"gradebook.showwork")}},methods:{renderInit:function(){!this.rendered&&this.work&&(setTimeout(window.drawPics,100),window.rendermathnode(this.$refs.workbox),window.initlinkmarkup(this.$refs.workbox),window.$(this.$refs.workbox).find("img").on("click",window.rotateimg),this.rendered=!0)}},mounted:function(){this.renderInit()},watch:{work:function(e,s){null!==e&&(this.rendered=!1,this.$nextTick(this.renderInit))},showall:function(e,s){this.show=e}}}),m=_,w=Object(h["a"])(m,f,b,!1,null,null,null),g=w.exports,k=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",[t("menu-button",{attrs:{id:"assess_select",options:e.navOptions,selected:e.selected,noarrow:1==e.navOptions.length,searchby:"ver"},scopedSlots:e._u([{key:"default",fn:function(s){var r=s.option;return[t("gb-assess-list-item",{attrs:{option:r,submitby:e.submitby}})]}}])})],1)},y=[],q=t("ad76"),$=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("span",[t("strong",[e._v(e._s(e.attemptNum)+".")]),e.option.hasOwnProperty("score")&&"N/A"!==e.option.score?t("span",[e._v(" "+e._s(e.$t("gradebook.score"))+": "),t("strong",[e._v(e._s(e.score))]),e._v(". ")]):e._e(),e.option.hasOwnProperty("status")?t("span",[e._v(" "+e._s(e.verStatus)+" ")]):e._e()])},A=[],x={name:"GbAssessListItem",props:["option","submitby"],computed:{attemptNum:function(){return 3===this.option.status?this.$t("gradebook.practice_attempt"):"by_question"===this.submitby?this.$t("gradebook.scored_attempt"):this.$tc("gradebook.attempt_n",this.option.ver+1)},verStatus:function(){if(-1===this.option.status)return this.$t("gradebook.not_started");if(0===this.option.status&&"by_assessment"===this.submitby)return this.$t("gradebook.not_submitted");if(1===this.option.status||2===this.option.status){var e="";return"by_question"===this.submitby?e+=this.$t("gradebook.lastchange"):e+=this.$t("gradebook.submitted"),e+=" "+this.option.lastchange_disp,e}return""},score:function(){return this.option.score+"/"+i.assessInfo.points_possible}}},O=x,P=Object(h["a"])(O,$,A,!1,null,null,null),I=P.exports,C={name:"GbAssessSelect",props:["versions","selected","submitby","haspractice"],components:{MenuButton:q["a"],GbAssessListItem:I},computed:{navOptions:function(){for(var e=this,s=[],t=function(t){var r={ver:t,status:e.versions[t].status,lastchange_disp:e.versions[t].lastchange_disp,onclick:function(){return e.$emit("setversion",t)}};e.versions[t].hasOwnProperty("score")&&(r.score=e.versions[t].score),s.push(r)},r=0;r<this.versions.length;r++)t(r);return s}},methods:{}},S=C,D=Object(h["a"])(S,k,y,!1,null,null,null),T=D.exports,E=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticStyle:{display:"inline-block"}},[t("menu-button",{attrs:{id:"qselect"+e.qn,options:e.navOptions,selected:e.selected,noarrow:1==e.navOptions.length,searchby:"ver"},scopedSlots:e._u([{key:"default",fn:function(s){var r=s.option;return[t("gb-question-list-item",{attrs:{option:r,total:e.navOptions.length}})]}}])})],1)},j=[],Q=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("span",[e._v(" "+e._s(e.attemptNum)+". "),e.option.hasOwnProperty("score")&&"N/A"!==e.option.score?t("span",[e._v(" "+e._s(e.$t("gradebook.score"))+": "),t("strong",[e._v(e._s(e.score))])]):e._e()])},M=[],F={name:"GbQuestionListItem",props:["option","total"],computed:{attemptNum:function(){return this.$tc("gradebook.version_n",this.option.ver+1)+(this.option.scored?"*":"")+"/"+this.total},score:function(){return this.option.score+"/"+this.option.ptsposs}}},N=F,G=Object(h["a"])(N,Q,M,!1,null,null,null),V=G.exports,L={name:"GbQuestionSelect",props:["versions","selected","qn"],components:{MenuButton:q["a"],GbQuestionListItem:V},computed:{navOptions:function(){for(var e=this,s=[],t=function(t){var r={ver:t,ptsposs:e.versions[t].points_possible,onclick:function(){return e.$emit("setversion",e.qn,t)}};e.versions[t].hasOwnProperty("score")&&(r.score=e.versions[t].score,r.scored=!0===e.versions[t].hasOwnProperty("scored")),s.push(r)},r=0;r<this.versions.length;r++)t(r);return s}}},U=L,z=Object(h["a"])(U,E,j,!1,null,null,null),B=z.exports,H=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"scoredetails"},[e.canedit?t("menu-button",{staticClass:"floatright",attrs:{options:e.moreOptions,position:"right",nobutton:"true",noarrow:"true",id:"qmore"+e.qn},scopedSlots:e._u([{key:"button",fn:function(){return[t("icons",{attrs:{name:"more",size:"medium"}})]},proxy:!0}],null,!1,3261159318)}):e._e(),e.canedit||e.qdata.hasOwnProperty("score")&&"N/A"!==e.qdata.score?t("div",[e._v(" "+e._s(e.$t("gradebook.score"))+": "),e._l(e.partPoss,(function(s,r){return t("span",{key:r},[e.canedit&&!e.isPractice?t("input",{directives:[{name:"model",rawName:"v-model",value:e.curScores[r],expression:"curScores[i]"}],attrs:{type:"text",size:"4",id:"scorebox"+e.qn+(e.partPoss.length>1?"-"+r:"")},domProps:{value:e.curScores[r]},on:{input:[function(s){s.target.composing||e.$set(e.curScores,r,s.target.value)},function(s){return e.updateScore(r,s)}]}}):t("span",[e._v(e._s(e.curScores[r]))]),e._v("/"+e._s(s)+" "),e.canedit&&!e.isPractice&&e.qdata.rubric>0?t("button",{staticClass:"plain nopad",on:{click:function(s){return e.showRubric(r)}}},[t("icons",{attrs:{name:"clipboard",alt:"icons.rubric",size:"small"}})],1):e._e(),e.canedit&&!e.isPractice&&e.qdata.rubric>0?t("button",{staticClass:"plain nopad rubriclink",staticStyle:{display:"none"},attrs:{id:"rublink-scorebox"+e.qn+(e.partPoss.length>1?"-"+r:"")},on:{click:function(s){return e.showRubric(r)}}},[t("icons",{attrs:{name:"clipboard",alt:"icons.rubric",size:"small"}})],1):e._e()])})),e.canedit&&!e.isPractice?t("button",{staticClass:"slim",attrs:{type:"button"},on:{click:e.allFull}},[e._v(" "+e._s(e.fullCreditLabel)+" ")]):e._e(),e.canedit&&e.hasManual&&!e.isPractice?t("button",{staticClass:"slim",attrs:{type:"button"},on:{click:e.manualFull}},[e._v(" "+e._s(e.$t("gradebook.full_manual_parts"))+" ")]):e._e(),e.canedit&&!e.isPractice&&!1===e.showfeedback?t("button",{staticClass:"slim",attrs:{type:"button"},on:{click:e.revealFeedback}},[e._v(" "+e._s(e.$t("gradebook.add_feedback"))+" ")]):e._e()],2):e._e(),t("gb-feedback",{ref:"fbbox",attrs:{show:e.showfeedback,canedit:e.canedit,useeditor:e.useEditor,qn:e.qn,value:e.qdata.feedback},on:{update:e.updateFeedback}}),e.showfull?t("div",[e.qdata.timeactive.total>0?t("span",[e._v(" "+e._s(e.$t("gradebook.time_on_version"))+": "+e._s(e.timeSpent)+". ")]):e._e(),e.qdata.lastchange?t("span",[e._v(" "+e._s(e.$t("gradebook.lastchange"))+" "+e._s(e.qdata.lastchange)+". ")]):e._e(),e.maxTry>1?t("button",{staticClass:"slim",attrs:{type:"button"},on:{click:function(s){e.showAllTries=!e.showAllTries}}},[e._v(" "+e._s(e.$t("gradebook.show_tries"))+" ")]):e._e(),e.hasPenalties?t("button",{staticClass:"slim",attrs:{type:"button"},on:{click:function(s){e.showPenalties=!e.showPenalties}}},[e._v(" "+e._s(e.$t("gradebook.show_penalties"))+" ")]):e._e(),e.hasAutoSaves?t("button",{staticClass:"slim",attrs:{type:"button"},on:{click:function(s){e.showAutosaves=!e.showAutosaves}}},[e._v(" "+e._s(e.$t("gradebook.show_autosaves"))+" ")]):e._e()]):e._e(),e.showAllTries?t("gb-all-tries",{attrs:{tries:e.qdata.other_tries,type:"tries",qn:e.qn}}):e._e(),e.showPenalties?t("gb-penalties",{attrs:{parts:e.qdata.parts,submitby:e.submitby}}):e._e(),e.showAutosaves?t("gb-all-tries",{attrs:{tries:e.qdata.autosaves,type:"autosave",submitby:e.submitby,qn:e.qn}}):e._e(),e.showfull&&e.qHelps.length>0?t("div",[e._v(" "+e._s(e.$t("gradebook.had_help"))+": "),e._l(e.qHelps,(function(s,r){return t("a",{key:r,attrs:{href:s.url,target:"_blank"}},[e._v(e._s(s.title))])}))],2):e._e(),e.qdata.category?t("div",[e._v(" "+e._s(e.$t("qdetails.category"))+": "+e._s(e.qdata.category)+" ")]):e._e(),t("div",[e.showMessage?t("a",{attrs:{href:e.messageHref,target:"help"}},[t("icons",{attrs:{name:"message"}}),e._v(" "+e._s(e.$t("helps.message_instructor"))+" ")],1):e._e(),e.postToForum>0?t("a",{attrs:{href:e.forumHref,target:"help"}},[t("icons",{attrs:{name:"forum"}}),e._v(" "+e._s(e.$t("helps.post_to_forum"))+" ")],1):e._e()])],1)},R=[],Z=(t("d81d"),t("53ca")),W=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{ref:"trywrap"},[t("p",["tries"===e.type?t("strong",[e._v(" "+e._s(e.$t("gradebook.all_tries"))+" ")]):"autosave"===e.type?t("strong",[e._v(" "+e._s(e.$t("gradebook.autosaves"))+" ")]):e._e()]),"autosave"===e.type?t("p",{staticClass:"subdued"},[e._v(" "+e._s(e.$t("gradebook.autosave_info"))+" "),"by_assessment"==e.submitby?t("span",[e._v(" "+e._s(e.$t("gradebook.autosave_byassess"))+" ")]):t("span")]):e._e(),e._l(e.processedTries,(function(s,r){return t("div",{key:r,staticClass:"med-below med-left"},[e.processedTries.length>1?t("div",[t("strong",[e._v(e._s(e.$t("gradebook.part_n",{n:r+1})))])]):e._e(),e._l(s,(function(s,r){return t("div",{key:r},["tries"==e.type?t("span",[e._v(" "+e._s(e.$t("gradebook.try_n",{n:r+1}))+": ")]):e._e(),t("span",{domProps:{innerHTML:e._s(s)}})])}))],2)}))],2)},J=[],Y=(t("a15b"),t("fb6a"),{name:"GbAllTries",props:["tries","qn","type","submitby"],data:function(){return{rendered:!1,drawToRender:[]}},computed:{processedTries:function(){var e,s,t=[];for(e in this.tries){var r=[];for(s in this.tries[e])if("object"===Object(Z["a"])(this.tries[e][s])&&"draw"===this.tries[e][s][0]){var a=this.qn+"-"+e+"-"+s,n=this.tries[e][s][2][6],i=this.tries[e][s][2][7];r[s]='<canvas id="canvasGBR'+a+'" width='+n+" height="+i+"></canvas>",r[s]+='<input type="hidden" id="qnGBR'+a+'"/>'}else r[s]=this.tries[e][s];t[e]=r}return t}},methods:{renderInit:function(){var e,s;if(!this.rendered)for(e in setTimeout(window.drawPics,100),window.rendermathnode(this.$refs.trywrap),this.tries)for(s in this.tries[e])if("object"===Object(Z["a"])(this.tries[e][s])&&"draw"===this.tries[e][s][0]){var t=this.tries[e][s][1].replace(/\(/g,"[").replace(/\)/g,"]").split(";;");""!==t[0]&&(t[0]="["+t[0].replace(/;/g,"],[")+"]"),t="[["+t.join("],[")+"]]";var r=this.qn+"-"+e+"-"+s;null===this.tries[e][s][2][0]&&(this.tries[e][s][2][0]=""),window.canvases["GBR"+r]=this.tries[e][s][2].slice(),window.canvases["GBR"+r].unshift("GBR"+r),window.drawla["GBR"+r]=JSON.parse(t),window.imathasDraw.initCanvases("GBR"+r)}}},mounted:function(){this.renderInit()},watch:{tries:function(e,s){null!==e&&(this.rendered=!1,this.$nextTick(this.renderInit))}}}),K=Y,X=Object(h["a"])(K,W,J,!1,null,null,null),ee=X.exports,se=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("table",{staticClass:"qdetails"},[t("thead",[t("tr",[t("th",[e._v(e._s(e.$t("qdetails.part")))]),t("th",[e._v(e._s(e.$t("penalties.applied")))])])]),t("tbody",e._l(e.parts,(function(s,r){return t("tr",{key:r},[t("td",[e._v(e._s(r+1))]),t("td",[-1!=e.partHasPenalties.indexOf(r)?t("penalties-applied",{staticClass:"med-left",attrs:{part:s,submitby:e.submitby}}):e._e()],1)])})),0)])},te=[],re=t("c428"),ae={name:"GbPenalties",props:["parts","submitby"],components:{PenaltiesApplied:re["a"]},computed:{partHasPenalties:function(){for(var e=[],s=0;s<this.parts.length;s++)this.parts[s].hasOwnProperty("penalties")&&this.parts[s].penalties.length>0&&e.push(s);return e}}},ne=ae,ie=Object(h["a"])(ne,se,te,!1,null,null,null),oe=ie.exports,ce=t("f05b"),de=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}]},[e._v(" "+e._s(e.username?e.$t("gradebook.feedback_for",{name:e.username}):e.$t("gradebook.feedback"))+":"),t("br"),e.canedit&&!e.useeditor?t("textarea",{ref:"fbbox",staticClass:"fbbox",attrs:{id:"fb"+e.qn,rows:"2",cols:"60"},domProps:{value:e.value},on:{input:e.updateFeedback}}):e.canedit?t("tinymce-input",{ref:"fbbox",attrs:{id:"fb"+e.qn,value:e.value},on:{input:e.updateFeedback}}):t("div",{ref:"fbbox",domProps:{innerHTML:e._s(e.value)}})],1)},ue=[],le=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{ref:"inbox",staticClass:"fbbox skipmathrender",attrs:{id:e.computedId,rows:e.rows}})},he=[],pe=(t("d3b7"),{name:"TinymceInput",props:{id:{default:null},value:{default:""},rows:{default:2}},data:function(){return{objTinymce:null}},computed:{computedId:function(){return"editor"===this.id||""===this.id||null===this.id?"editor-"+this.guidGenerator():this.id}},mounted:function(){this.$refs.inbox.innerHTML=this.value,this.initEditor()},updated:function(){this.initEditor()},methods:{guidGenerator:function(){function e(){return Math.random().toString(36).substr(2,9)}return"ed-"+e()+"-"+e()},initEditor:function(){var e=this;window.initeditor("exact",this.computedId,null,!0,(function(s){s.on("input change keyup undo redo",(function(t){e.updateValue(s.getContent())})).on("blur",(function(s){e.$emit("blur",!0)})).on("focus",(function(s){e.$emit("focus",!0)})),e.objTinymce=s}))},updateValue:function(e){this.$emit("input",e)},focus:function(){this.objTinymce.focus()}},watch:{value:function(e,s){"string"!==typeof e&&(e=""),e!==this.objTinymce.getContent()&&this.objTinymce.setContent(e)}}}),ve=pe,fe=Object(h["a"])(ve,le,he,!1,null,null,null),be=fe.exports,_e={name:"GbFeedback",props:["show","canedit","useeditor","value","qn","username"],components:{TinymceInput:be},data:function(){return{rendered:!1}},methods:{updateFeedback:function(e){var s;s=this.useeditor?e:e.target.value,this.$emit("update",s)},renderInit:function(){this.rendered||this.canedit||(setTimeout(window.drawPics,100),window.rendermathnode(this.$refs.fbbox))},focus:function(){this.$refs.fbbox.focus()}},mounted:function(){this.renderInit()},watch:{value:function(e,s){this.rendered=!1,this.$nextTick(this.renderInit)}}},me=_e,we=Object(h["a"])(me,de,ue,!1,null,null,null),ge=we.exports,ke={name:"GbScoreDetails",props:["qdata","qn","canedit","showfull"],components:{GbAllTries:ee,GbPenalties:oe,MenuButton:q["a"],Icons:ce["a"],GbFeedback:ge},data:function(){return{curScores:!1,showfeedback:!1,showAllTries:!1,showPenalties:!1,showAutosaves:!1}},computed:{answeights:function(){if(!this.qdata.answeights||this.qdata.singlescore)return[1];var e=this.qdata.answeights.map((function(e){return parseFloat(e)})),s=e.reduce((function(e,s){return e+s}));return e.map((function(e){return e/s}))},partPoss:function(){for(var e=[],s=0;s<this.answeights.length;s++)e[s]=Math.round(1e3*this.qdata.points_possible*this.answeights[s])/1e3;return e},initScores:function(){for(var e=[],s=0;s<this.answeights.length;s++)if(this.qdata.singlescore)e.push(this.qdata.score);else if(this.qdata.scoreoverride&&"object"!==Object(Z["a"])(this.qdata.scoreoverride)){var t=this.qdata.scoreoverride*this.answeights[s]*this.qdata.points_possible;t=Math.round(1e3*t)/1e3,e.push(t)}else this.qdata.scoreoverride&&this.qdata.scoreoverride.hasOwnProperty(s)?this.qdata.parts[s]&&this.qdata.parts[s].points_possible?e.push(Math.round(1e3*this.qdata.scoreoverride[s]*this.qdata.parts[s].points_possible)/1e3):e.push(Math.round(1e3*this.qdata.scoreoverride[s]*this.answeights[s]*this.qdata.points_possible)/1e3):0!==this.maxTry&&this.qdata.parts[s].hasOwnProperty("score")?e.push(this.qdata.parts[s].score):e.push("N/A");return e},fullCreditLabel:function(){return this.answeights.length>1?this.$t("gradebook.full_credit_parts"):this.$t("gradebook.full_credit")},timeSpent:function(){var e=Math.round(10*this.qdata.timeactive.total/60)/10+" "+this.$t("gradebook.minutes");return e},useEditor:function(){return"undefined"!==typeof window.tinyMCE},isPractice:function(){return i.ispractice},isLastVersion:function(){var e=i.assessInfo.assess_versions.length-1;return i.assessInfo.has_practice&&e--,i.curAver===e},maxTry:function(){for(var e=0,s=0;s<this.qdata.parts.length;s++)this.qdata.parts[s]&&this.qdata.parts[s].try&&this.qdata.parts[s].try>e&&(e=this.qdata.parts[s].try);return e},questionEditUrl:function(){var e="id="+this.qdata.qsetid+"&cid="+i.cid;return e+="&aid="+i.aid+"&qid="+this.qdata.qid,i.APIbase+"../course/moddataset.php?"+e},questionErrorUrl:function(){if(i.assessInfo.qerror_cid){var e="0-"+this.qdata.qsetid+"-"+this.qdata.seed+"-reperr-"+i.assessInfo.ver,s="add=new&cid="+i.assessInfo.qerror_cid+"&quoteq="+e+"&to="+this.qdata.qowner+"&title=Problem%20with%20question%20id%20"+this.qdata.qsetid;return i.APIbase+"../msgs/msglist.php?"+s}return""},useInMsg:function(){var e=this.qn+"-"+this.qdata.qsetid+"-"+this.qdata.seed+"-"+i.aid+"-"+i.assessInfo.ver,s="add=new&cid="+i.cid+"&quoteq="+e+"&to="+i.uid;return i.APIbase+"../msgs/msglist.php?"+s},moreOptions:function(){var e=this,s=[{label:this.$t("gradebook.use_in_msg"),link:this.useInMsg},{label:this.$t("gradebook.view_edit")+" ID "+this.qdata.qsetid+" Seed "+this.qdata.seed,link:this.questionEditUrl},{label:i.assessInfo.hasOwnProperty("qerrortitle")?i.assessInfo.qerrortitle:this.$t("gradebook.msg_owner"),link:this.questionErrorUrl}];return!this.isPractice&&this.isLastVersion&&s.push({label:this.$t("gradebook.clear_qwork"),onclick:function(){return e.clearWork()}}),s},hasPenalties:function(){for(var e=0;e<this.qdata.parts.length;e++)if(this.qdata.parts[e].hasOwnProperty("penalties")&&this.qdata.parts[e].penalties.length>0)return!0;return!1},hasManual:function(){if(1===this.qdata.parts.length)return!1;for(var e=0;e<this.qdata.parts.length;e++)if(this.qdata.parts[e].hasOwnProperty("req_manual")&&!0===this.qdata.parts[e].req_manual)return!0;return!1},hasAutoSaves:function(){return this.qdata.hasOwnProperty("autosaves")},submitby:function(){return i.assessInfo.submitby},qHelps:function(){if(this.qdata.jsparams){var e=this.qdata.jsparams.helps;for(var s in e)"video"===e[s].label?(e[s].icon="video",e[s].title=this.$t("helps.video")):"read"===e[s].label?(e[s].icon="file",e[s].title=this.$t("helps.read")):"ex"===e[s].label?(e[s].icon="file",e[s].title=this.$t("helps.written_example")):(e[s].icon="file",e[s].title=e[s].label);return e}return[]},showMessage:function(){return i.assessInfo.hasOwnProperty("help_features")&&!0===i.assessInfo.help_features.message&&!i.assessInfo.can_edit_scores},postToForum:function(){return i.assessInfo.hasOwnProperty("help_features")&&i.assessInfo.help_features.forum},quoteQ:function(){var e=this.qdata.questionsetid,s=this.qdata.seed,t=2;return this.qn+"-"+e+"-"+s+"-"+i.aid+"-"+t},messageHref:function(){var e=window.imasroot+"/msgs/msglist.php?";return e+=window.$.param({cid:i.cid,add:"new",quoteq:this.quoteQ,to:"instr"}),e},forumHref:function(){var e=window.imasroot+"/forums/thread.php?";return e+=window.$.param({cid:i.cid,forum:i.assessInfo.help_features.forum,modify:"new",quoteq:this.quoteQ}),e}},methods:{updateScore:function(e,s){if(""===this.curScores[e].trim())o.setScoreOverride(this.qn,e,"");else{var t=this.qdata.points_possible*this.answeights[e];o.setScoreOverride(this.qn,e,this.curScores[e]/t)}},revealFeedback:function(){var e=this;this.showfeedback=!0,this.$nextTick((function(){return e.$refs.fbbox.focus()}))},updateFeedback:function(e){o.setFeedback(this.qn,e)},allFull:function(){for(var e=0;e<this.answeights.length;e++)this.$set(this.curScores,e,this.partPoss[e]),o.setScoreOverride(this.qn,e,this.curScores[e]/this.partPoss[e])},manualFull:function(){for(var e=0;e<this.answeights.length;e++)this.qdata.parts[e]&&this.qdata.parts[e].hasOwnProperty("req_manual")&&!0===this.qdata.parts[e].req_manual&&(this.$set(this.curScores,e,this.partPoss[e]),o.setScoreOverride(this.qn,e,this.curScores[e]/this.partPoss[e]))},clearWork:function(){i.clearAttempts.type="qver",i.clearAttempts.qn=this.qn,i.clearAttempts.show=!0},initCurScores:function(){this.$set(this,"curScores",this.initScores),this.showfeedback=null!==this.qdata.feedback&&this.qdata.feedback.length>0},showRubric:function(e){window.imasrubrics||(window.imasrubrics=i.assessInfo.rubrics),this.showfeedback=!0,window.imasrubric_show(this.qdata.rubric,this.partPoss[e],"scorebox"+this.qn+(this.partPoss.length>1?"-"+e:""),"fb"+this.qn,this.qn+1+(this.partPoss.length>1?" part "+(e+1):""),600)}},mounted:function(){this.initCurScores()},watch:{qdata:{handler:function(e,s){this.initCurScores()},deep:!0}}},ye=ke,qe=(t("dbe6"),Object(h["a"])(ye,H,R,!1,null,null,null)),$e=qe.exports,Ae=function(){var e=this,s=e.$createElement,t=e._self._c||s;return e.showModal?t("div",{ref:"wrap",staticClass:"dialog-overlay"},[t("div",{staticClass:"dialog pane-body",attrs:{role:"alertdialog","aria-modal":"true","aria-label":e.$t("gradebook.clear_hdr"),"aria-describedby":"clearoptions",tabindex:"-1"}},["all"===e.showType?t("div",{staticClass:"clearoptions"},[t("p",[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.type,expression:"type"}],attrs:{type:"radio",value:"0"},domProps:{checked:e._q(e.type,"0")},on:{change:function(s){e.type="0"}}}),e._v(" "+e._s(e.$t("gradebook.clear_completely_msg"))+" ")])]),e.isByQuestion?t("p",[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.type,expression:"type"}],attrs:{type:"radio",value:"1"},domProps:{checked:e._q(e.type,"1")},on:{change:function(s){e.type="1"}}}),e._v(" "+e._s(e.$t("gradebook.clear_all_work_msg"))+" ")])]):e._e()]):"attempt"===e.showType?t("div",{staticClass:"clearoptions"},[t("p",[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.type,expression:"type"}],attrs:{type:"radio",value:"0"},domProps:{checked:e._q(e.type,"0")},on:{change:function(s){e.type="0"}}}),e._v(" "+e._s(e.$t("gradebook.clear_attempt_regen_msg"))+" ")])]),e.isLastAttempt?t("p",[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.type,expression:"type"}],attrs:{type:"radio",value:"1"},domProps:{checked:e._q(e.type,"1")},on:{change:function(s){e.type="1"}}}),e._v(" "+e._s(e.$t("gradebook.clear_attempt_msg"))+" ")])]):e._e()]):"qver"===e.showType?t("div",{staticClass:"clearoptions"},[e.isByQuestion?t("p",[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.type,expression:"type"}],attrs:{type:"radio",value:"0"},domProps:{checked:e._q(e.type,"0")},on:{change:function(s){e.type="0"}}}),e._v(" "+e._s(e.$t("gradebook.clear_qver_regen_msg"))+" ")])]):t("p",[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.type,expression:"type"}],attrs:{type:"radio",value:"0"},domProps:{checked:e._q(e.type,"0")},on:{change:function(s){e.type="0"}}}),e._v(" "+e._s(e.$t("gradebook.clear_qver_regen_msg2"))+" ")])]),e.isLastQAttempt?t("p",[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.type,expression:"type"}],attrs:{type:"radio",value:"1"},domProps:{checked:e._q(e.type,"1")},on:{change:function(s){e.type="1"}}}),e._v(" "+e._s(e.$t("gradebook.clear_qver_msg"))+" ")])]):e._e()]):e._e(),t("p",{staticClass:"noticetext"},[e._v(" "+e._s(e.$t("gradebook.clear_warning"))+" ")]),t("div",{staticClass:"flexrow",staticStyle:{"justify-content":"space-between"}},[t("button",{staticClass:"primary",on:{click:e.close}},[e._v(" Cancel ")]),t("button",{staticClass:"secondary",on:{click:e.doAction}},[e._v(" Continue ")])])])]):e._e()},xe=[],Oe=t("649c"),Pe=t.n(Oe),Ie={name:"GbClearAttempts",data:function(){return{type:0,dialog:null}},computed:{showModal:function(){return i.clearAttempts.show},showType:function(){return i.clearAttempts.type},isByQuestion:function(){return"by_question"===i.assessInfo.submitby},isLastAttempt:function(){var e=i.assessInfo.assess_versions.length-1;return i.assessInfo.has_practice&&e--,i.curAver===e},isLastQAttempt:function(){var e=i.assessInfo.assess_versions[i.curAver].questions[i.clearAttempts.qn].length-1;return i.curQver[i.clearAttempts.qn]===e}},methods:{close:function(){i.clearAttempts.show=!1,window.$(document).off("keyup.dialog"),this.dialog.destroy()},doAction:function(){o.clearAttempt(this.type)}},updated:function(){var e=this;i.clearAttempts.show&&(window.$(document).on("keyup.dialog",(function(s){"Escape"===s.key&&e.close()})),this.dialog=new Pe.a(this.$refs.wrap),this.dialog.show())}},Ce=Ie,Se=Object(h["a"])(Ce,Ae,xe,!1,null,null,null),De=Se.exports,Te=t("4632"),Ee=t("619f"),je=t("96ec"),Qe=(t("6e40"),{components:{GbQuestion:v,GbShowwork:g,GbAssessSelect:T,GbQuestionSelect:B,GbScoreDetails:$e,GbClearAttempts:De,SummaryCategories:Te["a"],ErrorDialog:Ee["a"],GbFeedback:ge,ConfirmDialog:je["a"]},data:function(){return{showOverride:!1,assessOverride:"",hidePerfect:!1,hideNonzero:!1,hideZero:!1,hideUnanswered:!1,hideFeedback:!1,hideNowork:!1,showFilters:!1,showEndmsg:!1,showExcused:!1,showAllWork:!1}},computed:{assessInfoLoaded:function(){return null!==i.assessInfo},aData:function(){return i.assessInfo},viewFull:function(){return this.aData.viewfull},canEdit:function(){return i.assessInfo.can_edit_scores&&this.viewFull},canSubmit:function(){return!i.inTransit},useEditor:function(){return"undefined"!==typeof window.tinyMCE},isByQuestion:function(){return"by_question"===this.aData.submitby},startedString:function(){return 0===this.aData.starttime?this.$t("gradebook.not_started"):this.aData.starttime_disp},lastchangeString:function(){return 0===this.aData.lastchange?this.$t("gradebook.not_submitted"):this.aData.lastchange_disp},totalTimeOnTask:function(){return Math.round(10*this.aData.timeontask/60)/10+" "+this.$t("gradebook.minutes")},attemptCount:function(){for(var e=0,s=0;s<this.aData.assess_versions.length;s++)this.aData.assess_versions[s].status<3&&e++;return e},extensionString:function(){return"latepass"===this.aData.extended_with.type?this.$tc("setlist.latepass_used",this.aData.extended_with.n):this.$t("setlist.extension")},curQuestions:function(){return this.aData.assess_versions[i.curAver].questions},curAver:function(){return i.curAver},curQver:function(){return i.curQver},curQuestionVers:function(){for(var e=[],s=0;s<this.curQuestions.length;s++)e[s]=this.curQuestions[s][this.curQver[s]];return e},curEndmsg:function(){return this.aData.assess_versions[i.curAver].endmsg||""},showCategories:function(){var e=!1;for(var s in this.curQuestionVers)if(this.curQuestionVers[s].hasOwnProperty("category")&&""!==this.curQuestionVers[s].category&&null!==this.curQuestionVers[s].category){e=!0;break}var t=this.curQuestionVers[0].hasOwnProperty("score")&&!isNaN(Number(this.curQuestionVers[0].score));return e&&t},scoreCalc:function(){if("by_question"===this.aData.submitby)return this.$t("gradebook.best_on_question");if("best"===this.aData.keepscore){var e=this.$t("gradebook.keep_best");return"number"===typeof this.aData.gbscore&&(e+=" ("+this.$tc("gradebook.attempt_n",this.aData.scored_version+1)+")"),e}return"average"===this.aData.keepscore?this.$t("gradebook.keep_avg"):"last"===this.aData.keepscore?this.$t("gradebook.keep_last"):""},showViewAsStu:function(){return this.aData.has_active_attempt||0===this.aData.scored_version&&-1===this.aData.assess_versions[0].status},viewAsStuUrl:function(){return"index.php?cid="+i.cid+"&aid="+i.aid+"&uid="+i.uid},showQuestion:function(){for(var e={},s=0;s<this.curQuestions.length;s++){var t=this.curQuestions[s][this.curQver[s]],r=!0;this.hidePerfect&&Math.abs(t.rawscore-1)<.002||this.hideUnanswered&&0===t.parts.reduce((function(e,s){return Math.max(e,s.try)}),0)||this.hideZero&&Math.abs(t.rawscore)<.002||this.hideNonzero&&Math.abs(t.rawscore)>.002&&Math.abs(t.rawscore)<.998||this.hideFeedback&&null!==t.feedback&&""!==t.feedback?r=!1:!this.hideNowork||t.hasOwnProperty("work")&&null!==t.work&&""!==t.work||(r=!1),e[s]=r}return e},hidePerfectLabel:function(){return this.hidePerfect?this.$t("gradebook.show_perfect"):this.$t("gradebook.hide_perfect")},hideCorrectLabel:function(){return this.hideCorrect?this.$t("gradebook.show_correct"):this.$t("gradebook.hide_correct")},hideUnansweredLabel:function(){return this.hideUnanswered?this.$t("gradebook.show_unans"):this.$t("gradebook.hide_unans")},exceptionActionLabel:function(){return this.aData.hasexception?this.$t("gradebook.edit_exception"):this.$t("gradebook.make_exception")},assessFeedback:function(){return this.aData.assess_versions[i.curAver].feedback||""},savedMsg:function(){return""===i.saving?"":this.$t("gradebook."+i.saving)},latepassBlockMsg:function(){var e;switch(this.aData.latepass_status){case 7:e="practice";break;case 8:e="gb";break;case 2:e="lpcutoff";break;case 3:e="courseend";break;case 4:e="pastdue";break;case 5:e="toolate";break;case 6:e="toofew";break}return this.$t("gradebook.latepass_blocked_"+e)},isUnsubmitted:function(){return"by_assessment"===this.aData.submitby&&0===this.aData.assess_versions[i.curAver].status},hasError:function(){return null!==i.errorMsg},errorMsg:function(){return i.errorMsg},confirmObj:function(){return i.confirmObj}},methods:{changeAssessVersion:function(e){var s=this;e!==i.curAver&&(Object.keys(i.scoreOverrides).length>0||Object.keys(i.feedbacks).length>0?i.confirmObj={body:"gradebook.unsaved_warn",action:function(){return s.doChangeAssessVersion(e)}}:this.doChangeAssessVersion(e))},doChangeAssessVersion:function(e){e!==i.curAver&&(3===this.aData.assess_versions[e].status?o.loadGbAssessVersion(0,!0):o.loadGbAssessVersion(e,!1))},changeQuestionVersion:function(e,s){if(s!==i.curQver[e]){var t=!1,r=new RegExp("^"+i.curAver+"-"+e+"-");for(var a in i.scoreOverrides)r.test(a)&&(t=!0);for(var n in i.feedbacks)r.test(n)&&(t=!0);t?i.confirmObj={body:"gradebook.unsaved_warn",action:function(){return o.loadGbQuestionVersion(e,s)}}:o.loadGbQuestionVersion(e,s)}},updateFeedback:function(e){o.setFeedback(null,e)},setScoreOverride:function(e){var s=e.target.value.trim();s!==this.aData.scoreoverride&&(i.scoreOverrides.gen=s,this.assessOverride=""),i.saving=""},submitChanges:function(e){!this.aData.hasOwnProperty("scoreoverride")&&this.showOverride&&(""!==this.assessOverride&&(i.scoreOverrides.gen=this.assessOverride),this.showOverride=!1);var s=!0===e;o.saveChanges(s)},exit:function(){window.location=window.exiturl},clearAttempts:function(e){i.clearAttempts.type=e,i.clearAttempts.show=!0},clearLPblock:function(){o.clearLPblock()},submitVersion:function(){o.endAssess()},redeemLatePass:function(){window.location=this.APIbase+"../course/redeemlatepass.php?cid="+i.cid+"&aid="+i.aid},makeException:function(){var e=i.APIbase+"../course/exception.php";e+="?cid="+i.cid+"&aid="+i.aid+"&uid="+i.uid,e+="&from=gb",window.location=e},showAllAns:function(){window.$("span[id^=ans]").toggleClass("hidden",!1).show(),window.$(".sabtn").replaceWith("<span>Answer: </span>"),window.$(".keybtn").attr("aria-expanded","true"),window.$("div[id^=dsbox]").toggleClass("hidden",!1).attr("aria-hidden",!1).attr("aria-expanded",!0),window.$("input[aria-controls^=dsbox]").attr("aria-expanded",!0)},beforeUnload:function(e){if(Object.keys(i.scoreOverrides).length>0||Object.keys(i.feedbacks).length>0)return e.preventDefault(),e.returnValue="You have unsaved changes","You have unsaved changes"},clearError:function(){i.errorMsg=null},closeConfirm:function(){i.confirmObj=null},previewFiles:function(){window.previewallfiles()}},created:function(){window.$(window).on("beforeunload",this.beforeUnload),"undefined"!==typeof window.APIbase?i.APIbase=window.APIbase:i.APIbase="vue/";var e=window.location.search.replace(/^.*cid=(\d+).*$/,"$1"),s=window.location.search.replace(/^.*aid=(\d+).*$/,"$1"),t=window.location.search.replace(/^.*uid=(\d+).*$/,"$1"),r=window.location.search.replace(/^.*stu=(\d+).*$/,"$1");null!==i.assessInfo&&i.cid===e&&i.aid===s&&i.uid===t||(i.cid=e,window.cid=e,i.aid=s,i.uid=t,i.stu=r,i.queryString="?cid="+i.cid+"&aid="+i.aid+"&uid="+i.uid,o.loadGbAssessData())}}),Me=Qe,Fe=(t("a02a"),Object(h["a"])(Me,a,n,!1,null,null,null)),Ne=Fe.exports,Ge=t("9225");r["a"].config.productionTip=!1,new r["a"]({i18n:Ge["a"],render:function(e){return e(Ne)}}).$mount("#app")},dbe6:function(e,s,t){"use strict";t("ad35")}});
//# sourceMappingURL=gbviewassess.js.map