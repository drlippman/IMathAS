import{_ as T,e as l,o as i,b as W,n as E,L as $,j as o,l as h,k as q,t as n,C as F,x as p,G as Q,T as Z,q as f,M as L,g as k,F as C,f as V,P as J,z as I,I as K,W as j,v as M,O as Y,X as D,H as X,J as ee,Q as se,R as te,S as re,Y as A,m as U,B as ae,U as ie,V as ne}from"./i18n.js?v=Coenjxmz";function Jt(){import.meta.url,import("_").catch(()=>1),(async function*(){})().next()}const oe={name:"RouterLink",props:["to","custom"]};function le(e,s,a,d,b,t){return i(),l("div")}const de=T(oe,[["render",le]]),r=W({assessInfo:null,APIbase:null,aid:null,cid:null,uid:null,stu:0,queryString:"",exitUrl:"",inTransit:!1,saving:"",errorMsg:null,confirmObj:null,curAver:0,ispractice:!1,curQver:[],orig_submitby:null,scoreOverrides:{},feedbacks:{},clearAttempts:{show:!1,type:"",qn:0}}),y={loadGbAssessData(e,s,a){if(r.inTransit){window.setTimeout(()=>this.loadGbAssessData(e,s,a),20);return}r.assessInfo===null&&window.gbAssessData?(r.assessInfo=window.gbAssessData,typeof s<"u"&&s()):(r.inTransit=!0,r.errorMsg=null,window.$.ajax({url:r.APIbase+"gbloadassess.php"+r.queryString,dataType:"json",data:{loadtexts:e?1:0},xhrFields:{withCredentials:!0},crossDomain:!0}).done(d=>{if(d.hasOwnProperty("error")){this.handleError(d.error);return}r.assessInfo=d,r.curAver=d.scored_version,this.setQverAsScored(d.scored_version),typeof s<"u"&&s(),E(()=>{if(window.initAnswerboxHighlights(),window.location.hash){const b=document.getElementById(window.location.hash.substring(1).replace(/\//,""));b&&b.scrollIntoView()}})}).fail((d,b,t)=>{this.handleError(b==="parsererror"?"parseerror":"noserver")}).always(d=>{r.inTransit=!1}))},loadGbAssessVersion(e,s){if(r.inTransit){window.setTimeout(()=>this.loadGbAssessVersion(e,s),20);return}const a=r.queryString+"&ver="+e+"&practice="+(s?1:0);r.inTransit=!0,r.errorMsg=null,window.$.ajax({url:r.APIbase+"gbloadassessver.php"+a,dataType:"json",xhrFields:{withCredentials:!0},crossDomain:!0}).done(d=>{if(d.hasOwnProperty("error")){this.handleError(d.error);return}s&&(e=r.assessInfo.assess_versions.length-1),delete r.assessInfo.interquestion_text,delete r.assessInfo.intro,r.assessInfo.assess_versions[e]=d,r.curAver=e,this.setQverAsScored(e),r.ispractice=s,s?(r.orig_submitby===null&&(r.orig_submitby=r.assessInfo.submitby),r.assessInfo.submitby="by_question"):r.orig_submitby!==null&&(r.assessInfo.submitby=r.orig_submitby),E(()=>{window.initAnswerboxHighlights()})}).fail((d,b,t)=>{this.handleError(b==="parsererror"?"parseerror":"noserver")}).always(d=>{r.inTransit=!1})},loadGbTexts(e){if(r.inTransit){window.setTimeout(()=>this.loadGbTexts(e),20);return}r.inTransit=!0,r.errorMsg=null,window.$.ajax({url:r.APIbase+"gbloadtexts.php"+r.queryString,dataType:"json",xhrFields:{withCredentials:!0},crossDomain:!0}).done(s=>{if(s.hasOwnProperty("error")){this.handleError(s.error);return}const a=[];for(let d=0;d<r.assessInfo.assess_versions[r.curAver].questions.length;d++)a[d]={},r.assessInfo.assess_versions[r.curAver].questions[d][r.curQver[d]].hasOwnProperty("text")&&(a[d]={text:r.assessInfo.assess_versions[r.curAver].questions[d][r.curQver[d]].text.slice()});s.hasOwnProperty("interquestion_text")&&$(s,a),r.assessInfo.intro=s.intro,r.assessInfo.interquestion_text=s.interquestion_text,e&&E(()=>{e()})}).fail((s,a,d)=>{this.handleError(a==="parsererror"?"parseerror":"noserver")}).always(s=>{r.inTransit=!1})},loadGbQuestionVersion(e,s,a,d){if(r.inTransit){window.setTimeout(()=>this.loadGbQuestionVersion(e,s,a,d),20);return}let b=r.queryString+"&ver="+s+"&qn="+e;if(b+="&practice="+(r.ispractice?1:0),r.assessInfo.assess_versions[r.curAver].questions[e][s].html!==null&&a!==!0){r.curQver[e]=s;return}r.inTransit=!0,r.errorMsg=null,window.$.ajax({url:r.APIbase+"gbloadquestionver.php"+b,dataType:"json",xhrFields:{withCredentials:!0},crossDomain:!0}).done(t=>{if(t.hasOwnProperty("error")){this.handleError(t.error);return}d&&d(),r.assessInfo.assess_versions[r.curAver].questions[e][s]=Object.assign(r.assessInfo.assess_versions[r.curAver].questions[e][s],t),r.curQver[e]=s,E(()=>{window.initAnswerboxHighlights()})}).fail((t,c,w)=>{this.handleError(c==="parsererror"?"parseerror":"noserver")}).always(t=>{r.inTransit=!1})},saveChanges(e,s,a){if(r.inTransit){window.setTimeout(()=>this.saveChanges(e,s,a),20);return}let d="";if(s&&(d="gbviewassess.php?cid="+r.cid+"&aid="+r.aid+"&uid="+r.assessInfo.nextstu,window.location.search.match(/from=/)&&(d+="&from="+window.location.search.replace(/^.*from=(\w+).*$/,"$1"))),Object.keys(r.scoreOverrides).length===0&&Object.keys(r.feedbacks).length===0&&!a){r.saving="saved",e?window.location=window.exiturl:s&&(window.location=d);return}const b=r.queryString;r.inTransit=!0,r.saving="saving",r.errorMsg=null;const t=new FormData;t.append("scores",JSON.stringify(r.scoreOverrides)),t.append("feedback",JSON.stringify(r.feedbacks)),t.append("practice",r.ispractice?1:0),a&&t.append("releasescore",1),window.$.ajax({url:r.APIbase+"gbsave.php"+b,type:"POST",dataType:"json",data:t,processData:!1,contentType:!1,xhrFields:{withCredentials:!0},crossDomain:!0}).done(c=>{if(c.hasOwnProperty("error")){this.handleError(c.error);return}if(r.saving="saved",(e||s)&&(r.scoreOverrides={},r.feedbacks={}),e){window.location=window.exiturl;return}else if(s){window.location=d;return}for(const w in r.scoreOverrides){if(w==="gen"){r.scoreOverrides.gen===""?delete r.assessInfo.scoreoverride:(r.assessInfo.gbscore=r.scoreOverrides.gen,r.assessInfo.scoreoverride=r.scoreOverrides.gen);continue}const m=w.split(/-/),g=r.assessInfo.assess_versions[m[0]].questions[m[1]][m[2]];g.hasOwnProperty("scoreoverride")&&r.scoreOverrides[w]===""&&(typeof g.scoreoverride=="number"?delete g.scoreoverride:delete g.scoreoverride[m[3]]),r.scoreOverrides.hasOwnProperty(w)&&r.scoreOverrides[w]!==""&&(g.hasOwnProperty("scoreoverride")||(r.assessInfo.assess_versions[m[0]].questions[m[1]][m[2]].scoreoverride={}),r.assessInfo.assess_versions[m[0]].questions[m[1]][m[2]].scoreoverride[m[3]]=r.scoreOverrides[w])}for(const w in c.newscores){const m=w.split(/-/);r.assessInfo.assess_versions[m[0]].questions[m[1]][m[2]].score=c.newscores[w][0];for(let g=0;g<c.newscores[w][1].length;g++)r.assessInfo.assess_versions[m[0]].questions[m[1]][m[2]].parts[g]=c.newscores[w][1][g]}for(const w in r.feedbacks){const m=w.split(/-/);m[1]==="g"?r.assessInfo.assess_versions[m[0]].feedback=r.feedbacks[w]:r.assessInfo.assess_versions[m[0]].questions[m[1]][m[2]].feedback=r.feedbacks[w]}r.assessInfo.gbscore=c.gbscore,r.assessInfo.scored_version=c.scored_version;for(let w=0;w<c.assess_info.length;w++){r.assessInfo.assess_versions[w].score=c.assess_info[w].score;for(let m=0;m<c.assess_info[w].scoredvers.length;m++){if(!r.assessInfo.assess_versions[w].hasOwnProperty("questions"))continue;const g=r.assessInfo.assess_versions[w].questions[m];for(let P=0;P<g.length;P++)P===c.assess_info[w].scoredvers[m]?g[P].scored=!0:g[P].scored&&delete g[P].scored}}r.scoreOverrides={},r.feedbacks={},a&&(r.assessInfo.manual_released=1)}).fail(c=>{r.saving="save_fail"}).always(c=>{r.inTransit=!1})},clearLPblock(){r.clearAttempts.type="practiceview",this.clearAttempt(!0)},setManualRelease(e){if(r.inTransit){window.setTimeout(()=>this.setManualRelease(e),20);return}const s=r.queryString;r.inTransit=!0,r.saving="saving",r.errorMsg=null;const a=new FormData;a.append("scores","{}"),a.append("feedback","{}"),a.append("practice",0),a.append("releasescore",e),window.$.ajax({url:r.APIbase+"gbsave.php"+s,type:"POST",dataType:"json",data:a,processData:!1,contentType:!1,xhrFields:{withCredentials:!0},crossDomain:!0}).done(d=>{if(d.hasOwnProperty("error")){this.handleError(d.error);return}r.saving="saved",r.assessInfo.manual_released=e}).fail(d=>{this.handleError("send_fail")}).always(d=>{r.inTransit=!1})},setVerAsLast(){if(r.inTransit){window.setTimeout(()=>this.setVerAsLast(),20);return}window.$.ajax({url:r.APIbase+"gbsetlast.php"+r.queryString,type:"POST",dataType:"json",data:{aver:r.curAver},xhrFields:{withCredentials:!0},crossDomain:!0}).done(e=>{if(e.hasOwnProperty("error")){this.handleError(e.error);return}const s=r.assessInfo.assess_versions[r.curAver];r.assessInfo.assess_versions.splice(r.curAver,1),r.assessInfo.assess_versions.push(s),r.curAver=r.assessInfo.assess_versions.length-1,r.assessInfo.gbscore=e.gbscore,r.assessInfo.scored_version=e.scored_version}).fail(e=>{this.handleError("send_fail")}).always(e=>{r.inTransit=!1})},clearAttempt(e){const s={type:r.clearAttempts.type,keepver:e};(r.clearAttempts.type==="attempt"||r.clearAttempts.type==="qver")&&(s.aver=r.curAver),r.clearAttempts.type==="qver"&&(s.qn=r.clearAttempts.qn,s.qver=r.curQver[s.qn]),window.$.ajax({url:r.APIbase+"gbclearattempt.php"+r.queryString,type:"POST",dataType:"json",data:s,xhrFields:{withCredentials:!0},crossDomain:!0}).done(a=>{if(a.hasOwnProperty("error")){this.handleError(a.error);return}if(r.clearAttempts.type==="all"&&s.keepver===0)window.location=window.exiturl;else if(r.clearAttempts.type==="all")y.loadGbAssessData();else if(r.clearAttempts.type==="practiceview")r.assessInfo.latepass_status=s.latepass_status;else if(r.assessInfo.gbscore=a.gbscore,r.assessInfo.scored_version=a.scored_version,r.clearAttempts.type==="attempt"){const d=new RegExp("^"+s.aver+"-");for(const b in r.scoreOverrides)b.match(d)&&delete r.scoreOverrides[b];a.hasOwnProperty("newver")?r.assessInfo.assess_versions[s.aver]=a.newver:(r.assessInfo.assess_versions.splice(s.aver,1),y.loadGbAssessVersion(a.scored_version,!1)),s.aver>0&&(r.curAver=s.aver-1)}else if(r.clearAttempts.type==="qver"){const d=new RegExp("^"+s.aver+"-"+s.qn+"-"+s.qver+"-");for(const b in r.scoreOverrides)b.match(d)&&delete r.scoreOverrides[b];r.assessInfo.assess_versions[s.aver].score=a.assessinfo.score,r.assessInfo.assess_versions[s.aver].status=a.assessinfo.status,a.hasOwnProperty("newver")?(r.assessInfo.assess_versions[s.aver].questions[s.qn][s.qver]=a.newver,r.assessInfo.assess_versions[s.aver].questions[s.qn][a.qinfo.scored_version].scored=!0):y.loadGbQuestionVersion(s.qn,a.qinfo.scored_version,!0,()=>{r.assessInfo.assess_versions[s.aver].questions[s.qn].splice(s.qver,1),r.assessInfo.assess_versions[s.aver].questions[s.qn][a.qinfo.scored_version].scored=!0})}}).fail(a=>{this.handleError("send_fail")}).always(a=>{r.inTransit=!1,r.clearAttempts.show=!1})},endAssess(){if(r.inTransit){window.setTimeout(()=>this.endAssess(),20);return}r.inTransit=!0,r.errorMsg=null,window.$.ajax({url:r.APIbase+"endassess.php"+r.queryString,dataType:"json",xhrFields:{withCredentials:!0},crossDomain:!0}).done(e=>{if(e.hasOwnProperty("error")){this.handleError(e.error);return}r.assessInfo=null,y.loadGbAssessData()}).fail((e,s,a)=>{this.handleError(s==="parsererror"?"parseerror":"noserver")}).always(e=>{r.inTransit=!1})},setQverAsScored(e){const s=r.assessInfo.assess_versions[e].questions;let a;e:for(let d=0;d<s.length;d++)for(a=0;a<s[d].length;a++){if(s[d][a].hasOwnProperty("scored")){r.curQver[d]=a;continue e}r.curQver[d]=s[d].length-1}},setScoreOverride(e,s,a){const d=r.curAver,b=r.curQver[e],t=r.assessInfo.assess_versions[d].questions[e][b],c=d+"-"+e+"-"+b+"-"+s;if(a==="")r.scoreOverrides[c]="";else{let w=!0;t.singlescore?w=Math.abs(a-t.score/t.points_possible)>.001:t.parts[s]&&(w=Math.abs(a-t.parts[s].score/t.parts[s].points_possible)>.001),t.parts[s]&&t.parts[s].try>0&&(a===""||!w)?delete r.scoreOverrides[c]:r.scoreOverrides[c]=Math.round(1e4*a)/1e4}r.saving=""},setFeedback(e,s){let d=r.curAver,b=!0;if(e===null)d+="-g",s===r.assessInfo.assess_versions[r.curAver].feedback&&(b=!1);else{const t=r.curQver[e];d+="-"+e+"-"+t,s===r.assessInfo.assess_versions[r.curAver].questions[e][t].feedback&&(b=!1)}b?r.feedbacks[d]=s:delete r.feedbacks[d],r.saving=""},handleError(e){r.errorMsg=e}},ue={name:"GbQuestion",props:["qdata","qn","disabled"],data:function(){return{rendered:!1}},methods:{renderInit(){this.rendered||(this.disabled&&window.$(this.$refs.thisqwrap).find("input,select,textarea").each(function(e,s){s.name.match(/^(qn|tc|qs)/)&&(s.disabled=!0)}),setTimeout(window.drawPics,100),window.rendermathnode(this.$refs.thisqwrap),window.initSageCell(this.$refs.thisqwrap),window.initlinkmarkup(this.$refs.thisqwrap),window.imathasAssess.init(this.qdata.jsparams,!0,this.$refs.thisqwrap),this.rendered=!0,this.$emit("qloaded",this.$refs.thisqwrap))}},mounted(){this.renderInit()},watch:{qdata:function(e,s){e!==null&&(this.rendered=!1,this.$nextTick(this.renderInit))}}},he={class:"questionwrap questionpane"},ce=["innerHTML","id"];function be(e,s,a,d,b,t){return i(),l("div",he,[o("div",{innerHTML:a.qdata.html,class:"question",id:"questionwrap"+a.qn,ref:"thisqwrap"},null,8,ce)])}const fe=T(ue,[["render",be]]),we={name:"GbShowwork",props:["work","worktime","showall","previewfiles"],data:function(){return{show:!1,rendered:!1}},computed:{btnLabel(){return this.$t(this.show?"gradebook-hidework":"gradebook-showwork")}},methods:{renderInit(){this.rendered||!this.work||(setTimeout(window.drawPics,100),window.rendermathnode(this.$refs.workbox),window.initlinkmarkup(this.$refs.workbox),window.$(this.$refs.workbox).find("img").on("click",window.rotateimg),this.rendered=!0,this.previewfiles&&window.togglepreviewallfiles(!0,this.$refs.wrap))}},mounted(){this.renderInit(),this.show=this.showall},watch:{work:function(e,s){e!==null&&(this.rendered=!1,this.$nextTick(this.renderInit))},showall:function(e,s){this.show=e}}},me={key:0,class:"questionpane viewworkwrap",ref:"wrap"},pe={key:0,class:"small"},ve=["innerHTML"];function ge(e,s,a,d,b,t){return a.work?(i(),l("div",me,[o("div",null,[o("button",{type:"button",class:"slim",onClick:s[0]||(s[0]=c=>e.show=!e.show)},n(t.btnLabel),1),e.show&&a.worktime!=="0"?(i(),l("span",pe,n(e.$t("gradebook-lastchange"))+" "+n(a.worktime),1)):h("",!0)]),q(Z,{name:"fade"},{default:F(()=>[p(o("div",{class:"introtext",ref:"workbox",innerHTML:a.work},null,8,ve),[[Q,e.show]])]),_:1})],512)):h("",!0)}const ke=T(we,[["render",ge]]),ye={name:"GbAssessListItem",props:["option","submitby"],computed:{attemptNum(){return this.option.status===3?this.$t("gradebook-practice_attempt"):this.submitby==="by_question"?this.$t("gradebook-scored_attempt"):this.$t("gradebook-attempt_n",{n:this.option.ver+1})},verStatus(){if(this.option.status===-1)return this.$t("gradebook-not_started");if(this.option.status===0&&this.submitby==="by_assessment")return this.$t("gradebook-not_submitted");if(this.option.status===1||this.option.status===2){let e="";return this.submitby==="by_question"?e+=this.$t("gradebook-lastchange"):e+=this.$t("gradebook-submitted"),e+=" "+this.option.lastchange_disp,e}else return""},score(){return this.option.score+"/"+r.assessInfo.points_possible}}},_e={key:0},qe={key:1};function Ae(e,s,a,d,b,t){return i(),l("span",null,[o("strong",null,n(t.attemptNum)+". ",1),a.option.hasOwnProperty("score")&&a.option.score!=="N/A"?(i(),l("span",_e,[f(n(e.$t("gradebook-score"))+": ",1),o("strong",null,n(t.score),1),s[0]||(s[0]=f(". ",-1))])):h("",!0),a.option.hasOwnProperty("status")?(i(),l("span",qe,n(t.verStatus),1)):h("",!0)])}const Ie=T(ye,[["render",Ae]]),Oe={name:"GbAssessSelect",props:["versions","selected","submitby","haspractice"],components:{MenuButton:L,GbAssessListItem:Ie},computed:{navOptions(){var e=[];for(let s=0;s<this.versions.length;s++){const a={ver:s,status:this.versions[s].status,lastchange_disp:this.versions[s].lastchange_disp,onclick:()=>this.$emit("setversion",s)};this.versions[s].hasOwnProperty("score")&&(a.score=this.versions[s].score),e.push(a)}return e}},methods:{}};function Te(e,s,a,d,b,t){const c=k("gb-assess-list-item"),w=k("menu-button");return i(),l("div",null,[q(w,{id:"assess_select",options:t.navOptions,selected:a.selected,noarrow:t.navOptions.length==1,searchby:"ver"},{default:F(({option:m})=>[q(c,{option:m,submitby:a.submitby},null,8,["option","submitby"])]),_:1},8,["options","selected","noarrow"])])}const Pe=T(Oe,[["render",Te]]),Se={name:"GbQuestionListItem",props:["option","total"],computed:{attemptNum(){return this.$t("gradebook-version_n",{n:this.option.ver+1})+(this.option.scored?"*":"")+"/"+this.total},score(){return this.option.score+"/"+this.option.ptsposs}}},De={key:0};function Ce(e,s,a,d,b,t){return i(),l("span",null,[f(n(t.attemptNum)+". ",1),a.option.hasOwnProperty("score")&&a.option.score!=="N/A"?(i(),l("span",De,[f(n(e.$t("gradebook-score"))+": ",1),o("strong",null,n(t.score),1)])):h("",!0)])}const Ve=T(Se,[["render",Ce]]),Qe={name:"GbQuestionSelect",props:["versions","selected","qn"],components:{MenuButton:L,GbQuestionListItem:Ve},computed:{navOptions(){var e=[];for(let s=0;s<this.versions.length;s++){const a={ver:s,ptsposs:this.versions[s].points_possible,onclick:()=>this.$emit("setversion",this.qn,s)};this.versions[s].hasOwnProperty("score")&&(a.score=this.versions[s].score,a.scored=this.versions[s].hasOwnProperty("scored")===!0),e.push(a)}return e}}},Ee={style:{display:"inline-block"}};function Fe(e,s,a,d,b,t){const c=k("gb-question-list-item"),w=k("menu-button");return i(),l("div",Ee,[q(w,{id:"qselect"+a.qn,options:t.navOptions,selected:a.selected,noarrow:t.navOptions.length==1,searchby:"ver"},{default:F(({option:m})=>[q(c,{option:m,total:t.navOptions.length},null,8,["option","total"])]),_:1},8,["id","options","selected","noarrow"])])}const Me=T(Qe,[["render",Fe]]),Le={name:"GbAllTries",props:["tries","qn","type","submitby"],data:function(){return{rendered:!1,drawToRender:[]}},computed:{processedTries(){const e=[];let s,a;for(s in this.tries){const d=[];for(a in this.tries[s])if(typeof this.tries[s][a]=="object"&&this.tries[s][a][0]==="draw"){const b=this.qn+"-"+s+"-"+a,t=this.tries[s][a][2][6],c=this.tries[s][a][2][7];d[a]='<canvas id="canvasGBR'+b+'" width='+t+" height="+c+"></canvas>",d[a]+='<input type="hidden" id="qnGBR'+b+'"/>'}else d[a]=this.tries[s][a];e[s]=d}return e}},methods:{renderInit(){if(this.rendered)return;setTimeout(window.drawPics,100),window.rendermathnode(this.$refs.trywrap);let e,s;for(e in this.tries)for(s in this.tries[e])if(typeof this.tries[e][s]=="object"&&this.tries[e][s][0]==="draw"){let a=this.tries[e][s][1].replace(/\(/g,"[").replace(/\)/g,"]").split(";;");a[0]!==""&&(a[0]="["+a[0].replace(/;/g,"],[")+"]"),a="[["+a.join("],[")+"]]";const d=this.qn+"-"+e+"-"+s,b=this.tries[e][s][2]||[];window.canvases["GBR"+d]=b.slice(),window.canvases["GBR"+d].unshift("GBR"+d),window.drawla["GBR"+d]=JSON.parse(a),window.imathasDraw.initCanvases("GBR"+d)}}},mounted(){this.renderInit()},watch:{tries:function(e,s){e!==null&&(this.rendered=!1,this.$nextTick(this.renderInit))}}},Ge={ref:"trywrap"},Ue={key:0},je={key:1},xe={key:0,class:"subdued"},Ne={key:0},Be={key:1},Re={key:0},He={key:0},ze=["innerHTML"];function We(e,s,a,d,b,t){return i(),l("div",Ge,[o("p",null,[a.type==="tries"?(i(),l("strong",Ue,n(e.$t("gradebook-all_tries")),1)):a.type==="autosave"?(i(),l("strong",je,n(e.$t("gradebook-autosaves")),1)):h("",!0)]),a.type==="autosave"?(i(),l("p",xe,[f(n(e.$t("gradebook-autosave_info"))+" ",1),a.submitby=="by_assessment"?(i(),l("span",Ne,n(e.$t("gradebook-autosave_byassess")),1)):(i(),l("span",Be))])):h("",!0),(i(!0),l(C,null,V(t.processedTries,(c,w)=>(i(),l("div",{key:w,class:"med-below med-left"},[t.processedTries.length>1?(i(),l("div",Re,[o("strong",null,n(e.$t("gradebook-part_n",{n:w+1})),1)])):h("",!0),(i(!0),l(C,null,V(c,(m,g)=>(i(),l("div",{key:g},[a.type=="tries"?(i(),l("span",He,n(e.$t("gradebook-try_n",{n:g+1}))+": ",1)):h("",!0),o("span",{innerHTML:m},null,8,ze)]))),128))]))),128))],512)}const $e=T(Le,[["render",We]]),Ze={name:"GbPenalties",props:["parts","submitby"],components:{PenaltiesApplied:J},computed:{partHasPenalties(){const e=[];for(let s=0;s<this.parts.length;s++)this.parts[s].hasOwnProperty("penalties")&&this.parts[s].penalties.length>0&&e.push(s);return e}}},Je={class:"qdetails"};function Ke(e,s,a,d,b,t){const c=k("penalties-applied");return i(),l("table",Je,[s[0]||(s[0]=o("caption",{class:"sr-only"},"Penalties Applied",-1)),o("thead",null,[o("tr",null,[o("th",null,n(e.$t("qdetails-part")),1),o("th",null,n(e.$t("penalties-applied")),1)])]),o("tbody",null,[(i(!0),l(C,null,V(a.parts,(w,m)=>(i(),l("tr",{key:m},[o("td",null,n(m+1),1),o("td",null,[t.partHasPenalties.indexOf(m)!=-1?(i(),I(c,{key:0,class:"med-left",part:w,submitby:a.submitby},null,8,["part","submitby"])):h("",!0)])]))),128))])])}const Ye=T(Ze,[["render",Ke]]),Xe={name:"TinymceInput",props:{id:{default:null},value:{default:""},rows:{default:2}},data:function(){return{objTinymce:null}},computed:{computedId:function(){return this.id==="editor"||this.id===""||this.id===null?"editor-"+this.guidGenerator():this.id}},mounted:function(){this.$refs.inbox.innerHTML=this.value,this.initEditor()},updated:function(){this.initEditor()},methods:{guidGenerator:function(){function e(){return Math.random().toString(36).substr(2,9)}return"ed-"+e()+"-"+e()},initEditor(){var e=this;window.initeditor("exact",this.computedId,null,!0,function(s){s.on("input change keyup undo redo",function(a){e.updateValue(s.getContent())}).on("blur",function(a){e.$emit("blur",!0)}).on("focus",function(a){e.$emit("focus",!0)}),e.objTinymce=s})},updateValue:function(e){this.$emit("input",e)},focus:function(){this.objTinymce.focus()}},watch:{value:function(e,s){typeof e!="string"&&(e=""),e!==this.objTinymce.getContent()&&this.objTinymce.setContent(e)}}},es=["id","rows"];function ss(e,s,a,d,b,t){return i(),l("div",{id:t.computedId,ref:"inbox",class:"fbbox skipmathrender",role:"textbox",rows:a.rows},null,8,es)}const ts=T(Xe,[["render",ss]]),rs={name:"GbFeedback",props:["show","canedit","useeditor","value","qn","username"],components:{TinymceInput:ts},data:function(){return{rendered:!1}},methods:{updateFeedback(e){let s;this.useeditor?s=e:s=e.target.value,this.$emit("update",s)},renderInit(){this.rendered||this.canedit||(setTimeout(window.drawPics,100),window.rendermathnode(this.$refs.fbbox))},focus(){this.$refs.fbbox.focus()}},mounted(){this.renderInit()},watch:{value:function(e,s){this.rendered=!1,this.$nextTick(this.renderInit)},show:function(e,s){this.$nextTick().then(()=>this.$nextTick()).then(()=>window.sendLTIresizemsg())}}},as=["id"],is=["id","aria-labelledby","value"],ns=["innerHTML"];function os(e,s,a,d,b,t){const c=k("tinymce-input");return p((i(),l("div",null,[o("span",{id:"fblbl"+a.qn},n(a.username?e.$t("gradebook-feedback_for",{name:a.username}):e.$t("gradebook-feedback")),9,as),s[1]||(s[1]=f(":",-1)),s[2]||(s[2]=o("br",null,null,-1)),a.canedit&&!a.useeditor?(i(),l("textarea",{key:0,class:"fbbox",id:"fb"+a.qn,"aria-labelledby":"fblbl"+a.qn,ref:"fbbox",rows:"2",cols:"60",value:a.value,onInput:s[0]||(s[0]=(...w)=>t.updateFeedback&&t.updateFeedback(...w))},null,40,is)):a.canedit?(i(),I(c,{key:1,ref:"fbbox",id:"fb"+a.qn,value:a.value,onInput:t.updateFeedback,"aria-labelledby":"fblbl"+a.qn},null,8,["id","value","onInput","aria-labelledby"])):(i(),l("div",{key:2,class:"fbbox",ref:"fbbox",innerHTML:a.value},null,8,ns))],512)),[[Q,a.show]])}const x=T(rs,[["render",os]]),ls={name:"GbScoreDetails",props:["qdata","qn","canedit","showfull"],components:{GbAllTries:$e,GbPenalties:Ye,MenuButton:L,Icons:K,GbFeedback:x},data:function(){return{curScores:[],showfeedback:!1,showAllTries:!1,showPenalties:!1,showAutosaves:!1}},computed:{answeights(){if(!this.qdata.answeights||this.qdata.singlescore)return[1];{const e=[];for(const a in this.qdata.answeights)e[a]=parseFloat(this.qdata.answeights[a]);const s=e.reduce((a,d)=>a+d);return e.map(a=>a/s)}},partPoss(){var e=[];for(let s=0;s<this.answeights.length;s++)e[s]=Math.round(1e3*this.qdata.points_possible*this.answeights[s])/1e3;return e},fullCreditLabel(){return this.answeights.length>1?this.$t("gradebook-full_credit_parts"):this.$t("gradebook-full_credit")},timeSpent(){return Math.round(10*this.qdata.timeactive.total/60)/10+" "+this.$t("gradebook-minutes")},useEditor(){return typeof window.tinyMCE<"u"},isPractice(){return r.ispractice},isLastVersion(){let e=r.assessInfo.assess_versions.length-1;return r.assessInfo.has_practice&&e--,r.curAver===e},maxTry(){let e=0;for(let s=0;s<this.qdata.parts.length;s++)this.qdata.parts[s]&&this.qdata.parts[s].try&&this.qdata.parts[s].try>e&&(e=this.qdata.parts[s].try);return e},questionEditUrl(){let e="id="+this.qdata.qsetid+"&cid="+r.cid;return e+="&aid="+r.aid+"&qid="+this.qdata.qid,r.APIbase+"../course/moddataset.php?"+e},questionErrorUrl(){if(r.assessInfo.qerror_cid){const e="0-"+this.qdata.qsetid+"-"+this.qdata.seed+"-reperr-"+r.assessInfo.ver,s="add=new&sendtype=msg&cid="+r.assessInfo.qerror_cid+"&quoteq="+e+"&to="+this.qdata.qowner+"&title=Problem%20with%20question%20id%20"+this.qdata.qsetid;return r.APIbase+"../course/sendmsgmodal.php?"+s}else return""},useInMsg(){const e=this.qn+"-"+this.qdata.qsetid+"-"+this.qdata.seed+"-"+r.aid+"-"+r.assessInfo.ver,s="add=new&sendtype=msg&cid="+r.cid+"&quoteq="+e+"&to="+r.uid;return r.APIbase+"../course/sendmsgmodal.php?"+s},moreOptions(){var s;const e=[{label:this.$t("gradebook-view_edit")+" ID "+this.qdata.qsetid+" Seed "+this.qdata.seed,link:this.questionEditUrl},{label:r.assessInfo.hasOwnProperty("qerrortitle")?r.assessInfo.qerrortitle:this.$t("gradebook-msg_owner"),link:this.questionErrorUrl,popup:!0,popupwidth:600,popupheight:"auto"}];return(s=r.assessInfo)!=null&&s.can_message&&e.unshift({label:this.$t("gradebook-use_in_msg"),link:this.useInMsg,popup:!0,popupwidth:600,popupheight:"auto"}),!this.isPractice&&this.isLastVersion&&e.push({label:this.$t("gradebook-clear_qwork"),onclick:()=>this.clearWork()}),e},hasPenalties(){for(let e=0;e<this.qdata.parts.length;e++)if(this.qdata.parts[e].hasOwnProperty("penalties")&&this.qdata.parts[e].penalties.length>0)return!0;return!1},hasManual(){if(this.qdata.parts.length===1)return!1;for(let e=0;e<this.qdata.parts.length;e++)if(this.qdata.parts[e].hasOwnProperty("req_manual")&&this.qdata.parts[e].req_manual===!0)return!0;return!1},hasAutoSaves(){return this.qdata.hasOwnProperty("autosaves")},submitby(){return r.assessInfo.submitby},qHelps(){if(this.qdata.jsparams){const e=this.qdata.jsparams.helps;for(const s in e)e[s].label==="video"?(e[s].icon="video",e[s].title=this.$t("helps-video")):e[s].label==="read"?(e[s].icon="file",e[s].title=this.$t("helps-read")):e[s].label==="ex"?(e[s].icon="file",e[s].title=this.$t("helps-written_example")):(e[s].icon="file",e[s].title=e[s].label);return e}else return[]},showMessage(){return r.assessInfo.hasOwnProperty("help_features")&&r.assessInfo.help_features.message===!0&&!r.assessInfo.can_edit_scores},postToForum(){return r.assessInfo.hasOwnProperty("help_features")&&r.assessInfo.help_features.forum},quoteQ(){const e=this.qdata.questionsetid,s=this.qdata.seed;return this.qn+"-"+e+"-"+s+"-"+r.aid+"-"+2},messageHref(){let e=window.imasroot+"/msgs/msglist.php?";return e+=window.$.param({cid:r.cid,add:"new",quoteq:this.quoteQ,to:"instr"}),e},forumHref(){let e=window.imasroot+"/forums/thread.php?";return e+=window.$.param({cid:r.cid,forum:r.assessInfo.help_features.forum,modify:"new",quoteq:this.quoteQ}),e}},methods:{updateScore(e,s){if(this.curScores[e].trim()==="")y.setScoreOverride(this.qn,e,"");else{const a=this.qdata.points_possible*this.answeights[e];y.setScoreOverride(this.qn,e,this.curScores[e]/a)}},revealFeedback(){this.showfeedback=!0,this.$nextTick(()=>this.$refs.fbbox.focus())},updateFeedback(e){y.setFeedback(this.qn,e)},allFull(){for(let e=0;e<this.answeights.length;e++)(this.curScores[e]==="N/A"||this.curScores[e]<this.partPoss[e])&&(this.curScores[e]=this.partPoss[e],y.setScoreOverride(this.qn,e,this.curScores[e]/this.partPoss[e]))},manualFull(){for(let e=0;e<this.answeights.length;e++)this.qdata.parts[e]&&this.qdata.parts[e].hasOwnProperty("req_manual")&&this.qdata.parts[e].req_manual===!0&&(this.curScores[e]==="N/A"||this.curScores[e]<this.partPoss[e])&&(this.curScores[e]=this.partPoss[e],y.setScoreOverride(this.qn,e,this.curScores[e]/this.partPoss[e]))},clearWork(){r.clearAttempts.type="qver",r.clearAttempts.qn=this.qn,r.clearAttempts.show=!0},initCurScores(){var e=[];for(let s=0;s<this.answeights.length;s++)if(this.qdata.singlescore)e.push(this.qdata.score);else if(this.qdata.scoreoverride&&typeof this.qdata.scoreoverride!="object"){let a=this.qdata.scoreoverride*this.answeights[s]*this.qdata.points_possible;a=Math.round(1e3*a)/1e3,e.push(a)}else this.qdata.scoreoverride&&this.qdata.scoreoverride.hasOwnProperty(s)?this.qdata.parts[s]&&this.qdata.parts[s].points_possible?e.push(Math.round(1e3*this.qdata.scoreoverride[s]*this.qdata.parts[s].points_possible)/1e3):e.push(Math.round(1e3*this.qdata.scoreoverride[s]*this.answeights[s]*this.qdata.points_possible)/1e3):this.maxTry===0||!this.qdata.parts[s].hasOwnProperty("score")?e.push("N/A"):e.push(this.qdata.parts[s].score);this.curScores=e,this.showfeedback=this.qdata.hasOwnProperty("feedback")&&this.qdata.feedback.length>0},showRubric(e){window.imasrubrics||(window.imasrubrics=r.assessInfo.rubrics),this.showfeedback=!0,window.imasrubric_show(this.qdata.rubric,this.partPoss[e],"scorebox"+this.qn+(this.partPoss.length>1?"-"+e:""),"fb"+this.qn,this.qn+1+(this.partPoss.length>1?" part "+(e+1):""),600)}},mounted(){this.initCurScores()},watch:{qdata:{handler:function(e,s){this.initCurScores()},deep:!0}}},ds={class:"scoredetails"},us={key:1},hs=["id","onUpdate:modelValue","aria-label","onInput"],cs={key:1},bs=["onClick"],fs=["onClick","id"],ws={key:2},ms={key:0},ps={key:1},vs={key:6},gs=["href"],ks={key:7},ys=["href"],_s=["href"];function qs(e,s,a,d,b,t){const c=k("icons"),w=k("menu-button"),m=k("gb-feedback"),g=k("gb-all-tries"),P=k("gb-penalties");return i(),l("div",ds,[a.canedit?(i(),I(w,{key:0,class:"floatright",options:t.moreOptions,position:"right",nobutton:"true",noarrow:"true",id:"qmore"+a.qn},{button:F(()=>[q(c,{name:"more",size:"medium"})]),_:1},8,["options","id"])):h("",!0),a.canedit||a.qdata.hasOwnProperty("score")&&a.qdata.score!=="N/A"?(i(),l("div",us,[f(n(e.$t("gradebook-score"))+": ",1),(i(!0),l(C,null,V(t.partPoss,(_,O)=>(i(),l("span",{key:O},[a.canedit&&!t.isPractice?p((i(),l("input",{key:0,type:"text",size:"4",id:"scorebox"+a.qn+(t.partPoss.length>1?"-"+O:""),pattern:"N\\/A|\\d*\\.?\\d*","onUpdate:modelValue":S=>e.curScores[O]=S,"aria-label":e.$t("gradebook-score")+(t.partPoss.length>1?" "+e.$t("gradebook-part_n",{n:O+1}):""),onInput:S=>t.updateScore(O,S),onKeyup:s[0]||(s[0]=M(S=>e.$emit("submitform"),["enter"]))},null,40,hs)),[[j,e.curScores[O]]]):(i(),l("span",cs,n(e.curScores[O]),1)),f("/"+n(_)+" ",1),a.canedit&&!t.isPractice&&a.qdata.rubric>0?(i(),l("button",{key:2,class:"plain nopad",onClick:S=>t.showRubric(O)},[q(c,{name:"clipboard",alt:"icons-rubric",size:"small"})],8,bs)):h("",!0),a.canedit&&!t.isPractice&&a.qdata.rubric>0?(i(),l("button",{key:3,style:{display:"none"},class:"plain nopad rubriclink",onClick:S=>t.showRubric(O),id:"rublink-scorebox"+a.qn+(t.partPoss.length>1?"-"+O:"")},[q(c,{name:"clipboard",alt:"icons-rubric",size:"small"})],8,fs)):h("",!0)]))),128)),a.canedit&&!t.isPractice?(i(),l("button",{key:0,type:"button",onClick:s[1]||(s[1]=(..._)=>t.allFull&&t.allFull(..._)),class:"slim"},n(t.fullCreditLabel),1)):h("",!0),a.canedit&&t.hasManual&&!t.isPractice?(i(),l("button",{key:1,type:"button",onClick:s[2]||(s[2]=(..._)=>t.manualFull&&t.manualFull(..._)),class:"slim"},n(e.$t("gradebook-full_manual_parts")),1)):h("",!0),a.canedit&&!t.isPractice&&e.showfeedback===!1?(i(),l("button",{key:2,type:"button",class:"slim",onClick:s[3]||(s[3]=(..._)=>t.revealFeedback&&t.revealFeedback(..._))},n(e.$t("gradebook-add_feedback")),1)):h("",!0)])):h("",!0),q(m,{show:e.showfeedback,canedit:a.canedit,useeditor:t.useEditor,ref:"fbbox",qn:a.qn,value:a.qdata.feedback,onUpdate:t.updateFeedback},null,8,["show","canedit","useeditor","qn","value","onUpdate"]),a.showfull?(i(),l("div",ws,[a.qdata.timeactive.total>0?(i(),l("span",ms,n(e.$t("gradebook-time_on_version"))+": "+n(t.timeSpent)+". ",1)):h("",!0),a.qdata.lastchange?(i(),l("span",ps,n(e.$t("gradebook-lastchange"))+" "+n(a.qdata.lastchange)+". ",1)):h("",!0),t.maxTry>1?(i(),l("button",{key:2,type:"button",class:"slim",onClick:s[4]||(s[4]=_=>e.showAllTries=!e.showAllTries)},n(e.$t("gradebook-show_tries")),1)):h("",!0),t.hasPenalties?(i(),l("button",{key:3,type:"button",class:"slim",onClick:s[5]||(s[5]=_=>e.showPenalties=!e.showPenalties)},n(e.$t("gradebook-show_penalties")),1)):h("",!0),t.hasAutoSaves?(i(),l("button",{key:4,type:"button",class:"slim",onClick:s[6]||(s[6]=_=>e.showAutosaves=!e.showAutosaves)},n(e.$t("gradebook-show_autosaves")),1)):h("",!0)])):h("",!0),e.showAllTries?(i(),I(g,{key:3,tries:a.qdata.other_tries,type:"tries",qn:a.qn},null,8,["tries","qn"])):h("",!0),e.showPenalties?(i(),I(P,{key:4,parts:a.qdata.parts,submitby:t.submitby},null,8,["parts","submitby"])):h("",!0),e.showAutosaves?(i(),I(g,{key:5,tries:a.qdata.autosaves,type:"autosave",submitby:t.submitby,qn:a.qn},null,8,["tries","submitby","qn"])):h("",!0),a.showfull&&t.qHelps.length>0?(i(),l("div",vs,[f(n(e.$t("gradebook-had_help"))+": ",1),(i(!0),l(C,null,V(t.qHelps,(_,O)=>(i(),l("a",{key:O,href:_.url,target:"_blank"},n(_.title),9,gs))),128))])):h("",!0),a.qdata.category?(i(),l("div",ks,n(e.$t("qdetails-category"))+": "+n(a.qdata.category),1)):h("",!0),o("div",null,[t.showMessage?(i(),l("a",{key:0,href:t.messageHref,target:"help"},[q(c,{name:"message"}),f(" "+n(e.$t("helps-message_instructor")),1)],8,ys)):h("",!0),t.postToForum>0?(i(),l("a",{key:1,href:t.forumHref,target:"help"},[q(c,{name:"forum"}),f(" "+n(e.$t("helps-post_to_forum")),1)],8,_s)):h("",!0)])])}const As=T(ls,[["render",qs]]),Is={name:"GbClearAttempts",data:function(){return{type:0,dialog:null}},computed:{showModal(){return r.clearAttempts.show},showType(){return r.clearAttempts.type},isByQuestion(){return r.assessInfo.submitby==="by_question"},isLastAttempt(){let e=r.assessInfo.assess_versions.length-1;return r.assessInfo.has_practice&&e--,r.curAver===e},isLastQAttempt(){const e=r.assessInfo.assess_versions[r.curAver].questions[r.clearAttempts.qn].length-1;return r.curQver[r.clearAttempts.qn]===e}},methods:{close(){r.clearAttempts.show=!1,window.$(document).off("keyup.dialog"),this.dialog.destroy()},doAction(){y.clearAttempt(this.type)}},updated(){r.clearAttempts.show&&(window.$(document).on("keyup.dialog",e=>{e.key==="Escape"&&this.close()}),this.dialog=new Y(this.$refs.wrap),this.dialog.show())}},Os={key:0,class:"dialog-overlay",ref:"wrap"},Ts=["aria-label"],Ps={key:0,class:"clearoptions"},Ss={key:0},Ds={key:1,class:"clearoptions"},Cs={key:0},Vs={key:2,class:"clearoptions"},Qs={key:0},Es={key:1},Fs={key:2},Ms={class:"noticetext"},Ls={class:"flexrow",style:{"justify-content":"space-between"}};function Gs(e,s,a,d,b,t){return t.showModal?(i(),l("div",Os,[o("div",{class:"dialog pane-body",role:"alertdialog","aria-modal":"true","aria-label":e.$t("gradebook-clear_hdr"),"aria-describedby":"clearoptions",tabindex:"-1"},[t.showType==="all"?(i(),l("div",Ps,[o("p",null,[o("label",null,[p(o("input",{type:"radio",value:"0","onUpdate:modelValue":s[0]||(s[0]=c=>e.type=c)},null,512),[[D,e.type]]),f(" "+n(e.$t("gradebook-clear_completely_msg")),1)])]),t.isByQuestion?(i(),l("p",Ss,[o("label",null,[p(o("input",{type:"radio",value:"1","onUpdate:modelValue":s[1]||(s[1]=c=>e.type=c)},null,512),[[D,e.type]]),f(" "+n(e.$t("gradebook-clear_all_work_msg")),1)])])):h("",!0)])):t.showType==="attempt"?(i(),l("div",Ds,[o("p",null,[o("label",null,[p(o("input",{type:"radio",value:"0","onUpdate:modelValue":s[2]||(s[2]=c=>e.type=c)},null,512),[[D,e.type]]),f(" "+n(e.$t("gradebook-clear_attempt_regen_msg")),1)])]),t.isLastAttempt?(i(),l("p",Cs,[o("label",null,[p(o("input",{type:"radio",value:"1","onUpdate:modelValue":s[3]||(s[3]=c=>e.type=c)},null,512),[[D,e.type]]),f(" "+n(e.$t("gradebook-clear_attempt_msg")),1)])])):h("",!0)])):t.showType==="qver"?(i(),l("div",Vs,[t.isByQuestion?(i(),l("p",Qs,[o("label",null,[p(o("input",{type:"radio",value:"0","onUpdate:modelValue":s[4]||(s[4]=c=>e.type=c)},null,512),[[D,e.type]]),f(" "+n(e.$t("gradebook-clear_qver_regen_msg")),1)])])):(i(),l("p",Es,[o("label",null,[p(o("input",{type:"radio",value:"0","onUpdate:modelValue":s[5]||(s[5]=c=>e.type=c)},null,512),[[D,e.type]]),f(" "+n(e.$t("gradebook-clear_qver_regen_msg2")),1)])])),t.isLastQAttempt?(i(),l("p",Fs,[o("label",null,[p(o("input",{type:"radio",value:"1","onUpdate:modelValue":s[6]||(s[6]=c=>e.type=c)},null,512),[[D,e.type]]),f(" "+n(e.$t("gradebook-clear_qver_msg")),1)])])):h("",!0)])):h("",!0),o("p",Ms,n(e.$t("gradebook-clear_warning")),1),o("div",Ls,[o("button",{class:"primary",onClick:s[7]||(s[7]=(...c)=>t.close&&t.close(...c))}," Cancel "),o("button",{class:"secondary",onClick:s[8]||(s[8]=(...c)=>t.doAction&&t.doAction(...c))}," Continue ")])],8,Ts)],512)):h("",!0)}const Us=T(Is,[["render",Gs]]);var js={};const xs={components:{GbQuestion:fe,GbShowwork:ke,GbAssessSelect:Pe,GbQuestionSelect:Me,GbScoreDetails:As,GbClearAttempts:Us,SummaryCategories:re,ErrorDialog:te,GbFeedback:x,ConfirmDialog:se,InterQuestionTextList:ee,InterQuestionText:X},data:function(){return{showOverride:!1,assessOverride:"",hide100:!1,hidePerfect:!1,hideNonzero:!1,hideZero:!1,hideUnanswered:!1,hideFeedback:!1,hideNowork:!1,showFilters:!1,showEndmsg:!1,showExcused:!1,showAllWork:!1,hidetexts:!0,op_previewFiles:!1,op_floatingSB:!1,op_showans:!1,sidebysideon:!1,op_oneatatime:!1,releaseOnSave:!1,curqn:0}},computed:{assessInfoLoaded(){return r.assessInfo!==null},aData(){return r.assessInfo},viewFull(){return this.aData.viewfull},canEdit(){return r.assessInfo.can_edit_scores&&this.viewFull},canSubmit(){return!r.inTransit},useEditor(){return typeof window.tinyMCE<"u"},isByQuestion(){return this.aData.submitby==="by_question"},startedString(){return this.aData.starttime===0?this.$t("gradebook-not_started"):this.aData.starttime_disp},lastchangeString(){return this.aData.lastchange===0?this.$t("gradebook-not_submitted"):this.aData.lastchange_disp},totalTimeOnTask(){return Math.round(10*this.aData.timeontask/60)/10+" "+this.$t("gradebook-minutes")},attemptCount(){let e=0;for(let s=0;s<this.aData.assess_versions.length;s++)this.aData.assess_versions[s].status<3&&e++;return e},extensionString(){return this.aData.extended_with.type==="latepass"?this.$t("setlist-latepass_used",{n:this.aData.extended_with.n}):this.$t("setlist-extension")},curQuestions(){return r.assessInfo===null?[]:this.aData.assess_versions[r.curAver].questions},curAver(){return r.curAver},curQver(){return r.curQver},curQuestionVers(){const e=[];for(let s=0;s<this.curQuestions.length;s++)e[s]=this.curQuestions[s][this.curQver[s]];return e},curEndmsg(){return this.aData.assess_versions[r.curAver].endmsg||""},showCategories(){let e=!1;for(const a in this.curQuestionVers)if(this.curQuestionVers[a].hasOwnProperty("category")&&this.curQuestionVers[a].category!==""&&this.curQuestionVers[a].category!==null){e=!0;break}const s=this.curQuestionVers[0].hasOwnProperty("score")&&!isNaN(Number(this.curQuestionVers[0].score));return e&&s},scoreCalc(){if(this.aData.submitby==="by_question")return this.$t("gradebook-best_on_question");if(this.aData.keepscore==="best"){let e=this.$t("gradebook-keep_best");return typeof this.aData.gbscore=="number"&&(e+=" ("+this.$t("gradebook-attempt_n",{n:this.aData.scored_version+1})+")"),e}else return this.aData.keepscore==="average"?this.$t("gradebook-keep_avg"):this.aData.keepscore==="last"?this.$t("gradebook-keep_last"):""},showViewAsStu(){return this.aData.has_active_attempt||this.aData.scored_version===0&&this.aData.assess_versions[0].status===-1},viewAsStuUrl(){return"index.php?cid="+r.cid+"&aid="+r.aid+"&uid="+r.uid},activityLogUrl(){return"../course/viewactionlog.php?cid="+r.cid+"&uid="+r.uid},showQuestion(){const e={};for(let s=0;s<this.curQuestions.length;s++){const a=this.curQuestions[s][this.curQver[s]];let d=!0;(this.hide100&&a.score>a.points_possible-.002||this.hidePerfect&&Math.abs(a.rawscore)>.998||this.hideUnanswered&&a.parts.reduce((b,t)=>Math.max(b,t.try),0)===0||this.hideZero&&Math.abs(a.rawscore)<.002||this.hideNonzero&&Math.abs(a.rawscore)>.002&&Math.abs(a.rawscore)<.998||this.hideFeedback&&a.feedback!==null&&a.feedback!==""||this.hideNowork&&(!a.hasOwnProperty("work")||a.work===null||a.work===""))&&(d=!1),e[s]=d}return e},nextVisible(){for(let e=this.curqn+1;e<this.curQuestions.length;e++)if(this.showQuestion[e])return e;return-1},prevVisible(){for(let e=this.curqn-1;e>=0;e--)if(this.showQuestion[e])return e;return-1},exceptionActionLabel(){return this.aData.hasexception?this.$t("gradebook-edit_exception"):this.$t("gradebook-make_exception")},assessFeedback(){return this.aData.assess_versions[r.curAver].feedback||""},savedMsg(){return r.saving===""?"":this.$t("gradebook-"+r.saving)},latepassBlockMsg(){var e;switch(this.aData.latepass_status){case 7:e="practice";break;case 8:e="gb";break;case 2:e="lpcutoff";break;case 3:e="courseend";break;case 4:e="pastdue";break;case 5:e="toolate";break;case 6:e="toofew";break}return this.$t("gradebook-latepass_blocked_"+e)},isUnsubmitted(){return this.aData.submitby==="by_assessment"&&this.aData.assess_versions[r.curAver].status===0},hasError(){return r.errorMsg!==null},errorMsg(){return r.errorMsg},confirmObj(){return r.confirmObj},lastQ(){return this.aData.assess_versions[r.curAver].questions.length-1},textList(){return r.assessInfo.hasOwnProperty("interquestion_text")?r.assessInfo.interquestion_text:[]},hasExit(){return window.exiturl&&window.exiturl!==""}},methods:{changeAssessVersion(e){e!==r.curAver&&(Object.keys(r.scoreOverrides).length>0||Object.keys(r.feedbacks).length>0?r.confirmObj={body:"gradebook-unsaved_warn",action:()=>this.doChangeAssessVersion(e)}:this.doChangeAssessVersion(e))},doChangeAssessVersion(e){e!==r.curAver&&(this.hidetexts=!0,this.aData.assess_versions[e].status===3?y.loadGbAssessVersion(0,!0):y.loadGbAssessVersion(e,!1))},changeQuestionVersion(e,s){if(s===r.curQver[e])return;let a=!1;const d=new RegExp("^"+r.curAver+"-"+e+"-");for(const b in r.scoreOverrides)d.test(b)&&(a=!0);for(const b in r.feedbacks)d.test(b)&&(a=!0);a?r.confirmObj={body:"gradebook-unsaved_warn",action:()=>y.loadGbQuestionVersion(e,s)}:y.loadGbQuestionVersion(e,s)},updateFeedback(e){y.setFeedback(null,e)},setScoreOverride(e){const s=e.target.value.trim();s!==this.aData.scoreoverride&&(r.scoreOverrides.gen=s,this.assessOverride=""),r.saving=""},submitChanges(e,s){!this.aData.hasOwnProperty("scoreoverride")&&this.showOverride&&(this.assessOverride!==""&&(r.scoreOverrides.gen=this.assessOverride),this.showOverride=!1);var a=e===!0,d=s===!0;y.saveChanges(a,d,this.releaseOnSave)},submitForm(){this.submitChanges(!0)},exit(){window.location=window.exiturl},clearAttempts(e){r.clearAttempts.type=e,r.clearAttempts.show=!0},setVerAsLast(){r.confirmObj={body:"gradebook-setaslast_warn",action:()=>y.setVerAsLast()}},setManualRelease(){this.releaseOnSave=!1,y.setManualRelease(1-this.aData.manual_released)},clearLPblock(){y.clearLPblock()},submitVersion(){y.endAssess()},redeemLatePass(){window.location=this.APIbase+"../course/redeemlatepass.php?cid="+r.cid+"&aid="+r.aid},makeException(){let e=r.APIbase+"../course/exception.php";e+="?cid="+r.cid+"&aid="+r.aid+"&uid="+r.uid,e+="&from=gb",window.location=e},beforeUnload(e){if(Object.keys(r.scoreOverrides).length>0||Object.keys(r.feedbacks).length>0)return e.preventDefault(),e.returnValue="You have unsaved changes","You have unsaved changes"},clearError(){r.errorMsg=null},closeConfirm(){r.confirmObj=null},showAllAns(){window.toggleshowallans(this.op_showans)},previewFiles(){window.togglepreviewallfiles(this.op_previewFiles)},toggleFloatingScoreboxes(){window.toggleScrollingScoreboxState(this.op_floatingSB)},sidebysideAction(){window.sidebysidemoveels(this.sidebysideon)},loadTexts(){r.assessInfo.hasOwnProperty("intro")||y.loadGbTexts()},storeFilters(){const e=["hide100","hidePerfect","hideNonzero","hideZero","hideUnanswered","hideFeedback","hideNowork","showEndmsg","showExcused","showAllWork","hidetexts","op_previewFiles","op_floatingSB","op_showans","sidebysideon","op_oneatatime"],s=[];for(const a of e)(a==="hidetexts"&&this[a]===!1||a!=="hidetexts"&&this[a]===!0)&&s.push(a);window.setCookie("gvaf"+r.aid,s.join(","))},questionLoaded(e){this.op_previewFiles&&window.togglepreviewallfiles(!0,e),this.op_showans&&window.toggleshowallans(!0,e),this.sidebysideon&&window.sidebysidemoveels(!0,e),this.$nextTick(window.sendLTIresizemsg)},setCurqn(e){this.curqn=e,this.$nextTick(()=>window.document.getElementById("qwrap"+(e+1)).scrollIntoView())},msgStu(){let e=r.APIbase+"../course/sendmsgmodal.php?add=new&sendtype=msg";e+="&cid="+r.cid+"&to="+r.uid,e+="&title="+encodeURIComponent(this.aData.name),window.GB_show(this.$t("gradebook-msg_student"),e,600,"auto",!1)}},created(){window.$(window).on("beforeunload",this.beforeUnload),typeof window.APIbase<"u"?r.APIbase=window.APIbase:r.APIbase=js.BASE_URL;const e=window.location.search.replace(/^.*cid=(\d+).*$/,"$1"),s=window.location.search.replace(/^.*aid=(\d+).*$/,"$1"),a=window.location.search.replace(/^.*uid=(\d+).*$/,"$1"),d=window.location.search.replace(/^.*stu=(\d+).*$/,"$1");if(r.assessInfo===null||r.cid!==e||r.aid!==s||r.uid!==a){r.cid=e,window.cid=e,r.aid=s,r.uid=a,r.stu=d,r.queryString="?cid="+r.cid+"&aid="+r.aid+"&uid="+r.uid;const b=window.readCookie("gvaf"+r.aid);if(b!==null&&b.length>0){this.showFilters=!0;const t=b.split(",");for(const c of t)c==="hidetexts"?this[c]=!1:this[c]=!0}y.loadGbAssessData(this.hidetexts===!1)}},mounted(){const e=window.readCookie("gvaf"+r.aid);e!==null&&e.length>0&&(e.split(",").indexOf("op_floatingSB")!==-1&&window.toggleScrollingScoreboxState(!0),this.$nextTick(window.sendLTIresizemsg))},updated(){this.$nextTick(window.sendLTIresizemsg)},watch:{showQuestion:{handler(e){this.op_oneatatime&&!e[this.curqn]&&(e[this.nextVisible]?this.curqn=this.nextVisible:e[this.prevVisible]&&(this.curqn=this.prevVisible))},deep:!0}}},Ns={id:"app",role:"main"},Bs={key:0},Rs={key:1,class:"gbmainview"},Hs={class:"pii-full-name"},zs={key:0},Ws={key:1},$s={key:1},Zs={key:2},Js={key:0},Ks={key:0},Ys=["value"],Xs={key:1},et={key:0},st={key:1},tt={key:0},rt={key:1},at={key:0},it={for:"assessoverride"},nt={key:1},ot=["disabled"],lt={key:2,class:"introtext"},dt={key:3},ut=["href"],ht={key:1},ct=["href"],bt=["href"],ft={key:4},wt={key:5,class:"gbmainview"},mt={key:0},pt={key:0},vt=["innerHTML"],gt={key:1},kt={style:{"list-style-type":"none",margin:"0","padding-left":"15px"}},yt={id:"showopts"},_t={key:2},qt={class:"noticetext"},At={key:3},It=["id"],Ot={class:"bigquestionwrap"},Tt={class:"headerpane"},Pt={key:0,class:"small subdued"},St={key:2},Dt={key:3},Ct={class:"scrollpane"},Vt={class:"sidepreview"},Qt={key:4},Et={key:0},Ft=["disabled"],Mt=["disabled"],Lt=["disabled"],Gt={key:4,class:"noticetext"},Ut=["disabled"],jt={key:5},xt=["disabled"],Nt=["disabled"],Bt={key:0,class:"noticetext"},Rt=["disabled"],Ht={class:"floatrightbutton"},zt={key:0,class:"noticetext"},Wt=["disabled"];function $t(e,s,a,d,b,t){var G;const c=k("gb-assess-select"),w=k("inter-question-text"),m=k("inter-question-text-list"),g=k("gb-question-select"),P=k("gb-question"),_=k("gb-showwork"),O=k("gb-score-details"),S=k("gb-feedback"),B=k("summary-categories"),R=k("gb-clear-attempts"),H=k("error-dialog"),z=k("confirm-dialog");return i(),l("div",Ns,[t.assessInfoLoaded?(i(),l("div",Rs,[o("h1",null,n(e.$t("gradebook-detail_title")),1),o("h2",null,[o("span",Hs,n(t.aData.userfullname),1)]),o("h3",null,n(t.aData.name),1),o("div",null,[f(n(e.$t("gradebook-started"))+": "+n(t.startedString),1),s[49]||(s[49]=o("br",null,null,-1)),f(" "+n(e.$t("gradebook-lastchange"))+": "+n(t.lastchangeString)+" ",1),t.aData.timeontask>0?(i(),l("span",zs,[s[47]||(s[47]=o("br",null,null,-1)),f(" "+n(e.$t("gradebook-time_onscreen",{n:t.attemptCount}))+": "+n(t.totalTimeOnTask),1)])):h("",!0),t.aData.hasOwnProperty("timelimit_ext")?(i(),l("span",Ws,[s[48]||(s[48]=o("br",null,null,-1)),f(" "+n(e.$t("gradebook-"+(t.aData.timelimit_ext>0?"has_timeext":"used_timeext"),{n:Math.abs(t.aData.timelimit_ext)})),1)])):h("",!0)]),o("div",null,[f(n(e.$t("gradebook-due"))+": "+n(t.aData.enddate_disp)+" ",1),t.canEdit&&t.aData.can_make_exception?(i(),l("button",{key:0,type:"button",class:"slim",onClick:s[0]||(s[0]=(...u)=>t.makeException&&t.makeException(...u))},n(t.exceptionActionLabel),1)):h("",!0),t.aData.hasOwnProperty("original_enddate")?(i(),l("span",$s,[s[50]||(s[50]=o("br",null,null,-1)),f(" "+n(e.$t("gradebook-originally_due"))+": "+n(t.aData.original_enddate_disp)+". "+n(t.extensionString),1)])):h("",!0),t.aData.hasOwnProperty("attemptext")?(i(),l("span",Zs,[s[51]||(s[51]=o("br",null,null,-1)),f(" "+n(e.$t("gradebook-attemptext",{n:t.aData.attemptext})),1)])):h("",!0)]),t.canEdit&&t.aData.latepass_status>1?(i(),l("div",Js,[f(n(t.latepassBlockMsg)+" ",1),t.aData.latepass_status>6?(i(),l("button",{key:0,type:"button",onClick:s[1]||(s[1]=(...u)=>t.clearLPblock&&t.clearLPblock(...u))},n(e.$t("gradebook-clear_latepass_block")),1)):h("",!0)])):h("",!0),o("div",null,[o("strong",null,[f(n(e.$t("gradebook-gb_score"))+": ",1),t.aData.hasOwnProperty("scoreoverride")&&t.canEdit?(i(),l("span",Ks,[o("input",{id:"assessoverride",size:"4",value:t.aData.scoreoverride,onInput:s[2]||(s[2]=(...u)=>t.setScoreOverride&&t.setScoreOverride(...u)),onKeyup:s[3]||(s[3]=M((...u)=>t.submitForm&&t.submitForm(...u),["enter"]))},null,40,Ys),f("/"+n(t.aData.points_possible),1)])):(i(),l("span",Xs,[!t.canEdit&&t.aData.gbscore==="N/A"?(i(),l("span",et,n(e.$t("gradebook-avail_"+t.aData.scoresingb)),1)):(i(),l("span",st,n(t.aData.gbscore)+"/"+n(t.aData.points_possible),1))]))]),t.aData.hasOwnProperty("scoreoverride")?(i(),l("span",tt," ("+n(e.$t("gradebook-overridden"))+") ",1)):t.canEdit?(i(),l("span",rt,[o("button",{class:"slim",type:"button",onClick:s[4]||(s[4]=u=>e.showOverride=!e.showOverride)},n(e.$t("gradebook-override")),1),e.showOverride?(i(),l("span",at,[o("label",it,n(e.$t("gradebook-override")),1),s[52]||(s[52]=f(": ",-1)),p(o("input",{id:"assessoverride",size:"4","onUpdate:modelValue":s[5]||(s[5]=u=>e.assessOverride=u),onKeyup:s[6]||(s[6]=M((...u)=>t.submitForm&&t.submitForm(...u),["enter"]))},null,544),[[j,e.assessOverride]])])):h("",!0)])):h("",!0),t.canEdit?(i(),l("button",{key:2,type:"button",class:"slim",onClick:s[7]||(s[7]=u=>t.clearAttempts("all"))},n(e.$t("gradebook-clear_all")),1)):h("",!0),t.aData.hasOwnProperty("excused")?(i(),l("button",{key:3,type:"button",class:"slim",onClick:s[8]||(s[8]=u=>e.showExcused=!e.showExcused)},n(e.$t("gradebook-"+(e.showExcused?"hide":"show")+"_excused")),1)):h("",!0)]),t.canEdit&&t.aData.scoresingb==="manual"?(i(),l("div",nt,[f(n(e.$t("gradebook-manualstatus"+t.aData.manual_released))+" ",1),o("button",{type:"button",class:"slim",disabled:!t.canSubmit,onClick:s[9]||(s[9]=(...u)=>t.setManualRelease&&t.setManualRelease(...u))},n(e.$t("gradebook-manualbutton"+t.aData.manual_released)),9,ot)])):h("",!0),e.showExcused?(i(),l("div",lt,[f(n(e.$t("gradebook-excused_list"))+" ",1),o("ul",null,[(i(!0),l(C,null,V(t.aData.excused,u=>(i(),l("li",{key:u},n(u),1))),128))])])):h("",!0),t.canEdit?(i(),l("div",dt,[t.showViewAsStu?(i(),l("a",{key:0,href:t.viewAsStuUrl},n(e.$t("gradebook-view_as_stu")),9,ut)):h("",!0),t.showViewAsStu?(i(),l("span",ht," | ")):h("",!0),o("a",{href:t.viewAsStuUrl+"#/print"},n(e.$t("gradebook-print")),9,ct),s[53]||(s[53]=f(" | ",-1)),o("a",{href:t.activityLogUrl,target:"_blank"},n(e.$t("gradebook-activitylog")),9,bt)])):h("",!0),t.aData.assess_versions.length==0?(i(),l("div",ft,n(e.$t("gradebook-no_versions")),1)):(i(),l("div",wt,[o("div",null,[f(n(t.scoreCalc)+" ",1),o("div",null,[t.viewFull||t.aData.submitby==="by_assessment"?(i(),I(c,{key:0,style:{display:"inline-block"},versions:t.aData.assess_versions,submitby:t.aData.submitby,haspractice:t.aData.has_practice,selected:t.curAver,onSetversion:t.changeAssessVersion},null,8,["versions","submitby","haspractice","selected","onSetversion"])):h("",!0),!t.isByQuestion&&t.canEdit&&t.aData.assess_versions[t.curAver].status!=-1?(i(),l("button",{key:1,type:"button",onClick:s[10]||(s[10]=u=>t.clearAttempts("attempt"))},n(e.$t("gradebook-clear_attempt")),1)):h("",!0),!t.isByQuestion&&t.canEdit&&t.aData.keepscore==="last"&&t.curAver<t.aData.assess_versions.length-1?(i(),l("button",{key:2,type:"button",onClick:s[11]||(s[11]=(...u)=>t.setVerAsLast&&t.setVerAsLast(...u))},n(e.$t("gradebook-set_as_last")),1)):h("",!0)]),t.isUnsubmitted?(i(),l("div",mt,[f(n(e.$t("gradebook-unsubmitted"))+" ",1),o("button",{type:"button",onClick:s[12]||(s[12]=(...u)=>t.submitVersion&&t.submitVersion(...u))},n(e.$t("closed-submit_now")),1),!t.canEdit&&t.aData.can_use_latepass?(i(),l("button",{key:0,type:"button",onClick:s[13]||(s[13]=(...u)=>t.redeemLatePass&&t.redeemLatePass(...u))},n(e.$t("lti-use_latepass")),1)):h("",!0)])):h("",!0)]),t.curEndmsg!==""?(i(),l("div",pt,[t.viewFull?(i(),l("button",{key:0,type:"button",onClick:s[14]||(s[14]=u=>e.showEndmsg=!e.showEndmsg)},n(e.$t("gradebook-"+(e.showEndmsg?"hide":"show")+"_endmsg")),1)):h("",!0),e.showEndmsg||!t.viewFull?(i(),l("div",{key:1,class:"introtext",innerHTML:t.curEndmsg},null,8,vt)):h("",!0)])):h("",!0),t.canEdit&&t.viewFull?(i(),l("div",gt,[o("button",{onClick:s[15]||(s[15]=u=>e.showFilters=!e.showFilters)},n(e.$t("gradebook-filters")),1),e.showFilters?(i(),l("div",{key:0,class:"tabpanel",onChange:s[35]||(s[35]=(...u)=>t.storeFilters&&t.storeFilters(...u))},[o("p",null,n(e.$t("gradebook-hide"))+":",1),o("ul",kt,[o("li",null,[o("label",null,[p(o("input",{type:"checkbox","onUpdate:modelValue":s[16]||(s[16]=u=>e.hideUnanswered=u)},null,512),[[A,e.hideUnanswered]]),f(" "+n(e.$t("gradebook-hide_unans")),1)])]),o("li",null,[o("label",null,[p(o("input",{type:"checkbox","onUpdate:modelValue":s[17]||(s[17]=u=>e.hideZero=u)},null,512),[[A,e.hideZero]]),f(" "+n(e.$t("gradebook-hide_zero")),1)])]),o("li",null,[o("label",null,[p(o("input",{type:"checkbox","onUpdate:modelValue":s[18]||(s[18]=u=>e.hideNonzero=u)},null,512),[[A,e.hideNonzero]]),f(" "+n(e.$t("gradebook-hide_nonzero")),1)])]),o("li",null,[o("label",null,[p(o("input",{type:"checkbox","onUpdate:modelValue":s[19]||(s[19]=u=>e.hidePerfect=u)},null,512),[[A,e.hidePerfect]]),f(" "+n(e.$t("gradebook-hide_perfect")),1)])]),o("li",null,[o("label",null,[p(o("input",{type:"checkbox","onUpdate:modelValue":s[20]||(s[20]=u=>e.hide100=u)},null,512),[[A,e.hide100]]),f(" "+n(e.$t("gradebook-hide_100")),1)])]),o("li",null,[o("label",null,[p(o("input",{type:"checkbox","onUpdate:modelValue":s[21]||(s[21]=u=>e.hideFeedback=u)},null,512),[[A,e.hideFeedback]]),f(" "+n(e.$t("gradebook-hide_fb")),1)])]),o("li",null,[o("label",null,[p(o("input",{type:"checkbox","onUpdate:modelValue":s[22]||(s[22]=u=>e.hideNowork=u)},null,512),[[A,e.hideNowork]]),f(" "+n(e.$t("gradebook-hide_nowork")),1)])]),o("li",null,[o("label",null,[p(o("input",{type:"checkbox","onUpdate:modelValue":s[23]||(s[23]=u=>e.hidetexts=u),onChange:s[24]||(s[24]=(...u)=>t.loadTexts&&t.loadTexts(...u))},null,544),[[A,e.hidetexts]]),f(" "+n(e.$t("gradebook-introtexts")),1)])])]),o("p",yt,[o("label",null,[p(o("input",{type:"checkbox","onUpdate:modelValue":s[25]||(s[25]=u=>e.op_showans=u),onChange:s[26]||(s[26]=(...u)=>t.showAllAns&&t.showAllAns(...u))},null,544),[[A,e.op_showans]]),f(n(e.$t("gradebook-show_all_ans")),1)]),o("label",null,[p(o("input",{type:"checkbox","onUpdate:modelValue":s[27]||(s[27]=u=>e.showAllWork=u)},null,512),[[A,e.showAllWork]]),f(n(e.$t("gradebook-show_all_work")),1)]),o("label",null,[p(o("input",{type:"checkbox","onUpdate:modelValue":s[28]||(s[28]=u=>e.op_previewFiles=u),onChange:s[29]||(s[29]=(...u)=>t.previewFiles&&t.previewFiles(...u))},null,544),[[A,e.op_previewFiles]]),f(n(e.$t("gradebook-preview_files")),1)]),o("label",null,[p(o("input",{type:"checkbox","onUpdate:modelValue":s[30]||(s[30]=u=>e.op_floatingSB=u),onChange:s[31]||(s[31]=(...u)=>t.toggleFloatingScoreboxes&&t.toggleFloatingScoreboxes(...u))},null,544),[[A,e.op_floatingSB]]),f(n(e.$t("gradebook-floating_scoreboxes")),1)]),o("label",null,[p(o("input",{type:"checkbox","onUpdate:modelValue":s[32]||(s[32]=u=>e.sidebysideon=u),onChange:s[33]||(s[33]=(...u)=>t.sidebysideAction&&t.sidebysideAction(...u))},null,544),[[A,e.sidebysideon]]),f(n(e.$t("gradebook-sidebyside")),1)]),o("label",null,[p(o("input",{type:"checkbox","onUpdate:modelValue":s[34]||(s[34]=u=>e.op_oneatatime=u)},null,512),[[A,e.op_oneatatime]]),f(n(e.$t("gradebook-oneatatime")),1)])])],32)):h("",!0)])):t.viewFull?(i(),l("div",_t,[o("button",{onClick:s[36]||(s[36]=u=>{e.hidetexts=!e.hidetexts,t.loadTexts()})},n(e.$t(e.hidetexts?"print-show_text":"print-hide_text")),1),o("p",qt,n(e.$t("gradebook-no_edit")),1)])):h("",!0),t.viewFull?(i(),l("div",At,[t.aData.hasOwnProperty("intro")&&t.aData.intro!==""?p((i(),I(w,{key:0,active:!e.hidetexts,textobj:{html:t.aData.intro},class:"questionpane introtext"},null,8,["active","textobj"])),[[Q,!e.hidetexts]]):h("",!0),(i(!0),l(C,null,V(t.curQuestions,(u,v)=>(i(),l("div",{key:v,id:"qwrap"+(v+1)},[p((i(),I(m,{pos:"beforeexact",qn:v,key:"iqt"+v,active:!e.hidetexts,lastq:t.lastQ,textlist:t.textList},null,8,["qn","active","lastq","textlist"])),[[Q,!e.hidetexts&&t.showQuestion[v]&&(!e.op_oneatatime||e.curqn===v)]]),p(o("div",Ot,[o("div",Tt,[o("strong",null,n(e.$t("question_n",{n:v+1}))+". ",1),u[t.curQver[v]].extracredit?(i(),l("em",Pt,n(e.$t("extracredit")),1)):h("",!0),t.aData.submitby==="by_question"?(i(),I(g,{key:1,versions:u,selected:t.curQver[v],qn:v,onSetversion:t.changeQuestionVersion,class:"med-left"},null,8,["versions","selected","qn","onSetversion"])):u[t.curQver[v]].hasOwnProperty("gbscore")&&u[t.curQver[v]].gbscore!=="N/A"?(i(),l("span",St,[f(n(e.$t("gradebook-score"))+": ",1),o("strong",null,n(u[t.curQver[v]].gbscore)+"/"+n(u[t.curQver[v]].points_possible),1)])):h("",!0),u[t.curQver[v]].useda11yalt?(i(),l("span",Dt," ("+n(e.$t("gradebook-a11yalt"))+")",1)):h("",!0)]),o("div",{class:U(["sidebyside",{sidebysideon:e.sidebysideon}])},[o("div",Ct,[q(P,{class:U({inactive:!t.showQuestion[v]}),qdata:u[t.curQver[v]],qn:v,disabled:!t.canEdit,onQloaded:t.questionLoaded},null,8,["class","qdata","qn","disabled","onQloaded"]),e.sidebysideon?h("",!0):(i(),I(_,{key:0,work:u[t.curQver[v]].work,worktime:u[t.curQver[v]].worktime,showall:e.showAllWork,previewfiles:e.op_previewFiles},null,8,["work","worktime","showall","previewfiles"]))]),o("div",Vt,[s[54]||(s[54]=o("div",{class:"sidepreviewtarget"},null,-1)),e.sidebysideon?(i(),I(_,{key:0,work:u[t.curQver[v]].work,worktime:u[t.curQver[v]].worktime,showall:e.showAllWork,previewfiles:e.op_previewFiles},null,8,["work","worktime","showall","previewfiles"])):h("",!0)])],2),q(O,{showfull:t.showQuestion[v],canedit:t.canEdit,qdata:u[t.curQver[v]],qn:v,onSubmitform:t.submitForm},null,8,["showfull","canedit","qdata","qn","onSubmitform"])],512),[[Q,t.showQuestion[v]&&(!e.op_oneatatime||e.curqn===v)]])],8,It))),128)),p(q(m,{pos:"after",qn:t.lastQ,active:!e.hidetexts,lastq:t.lastQ,textlist:t.textList},null,8,["qn","active","lastq","textlist"]),[[Q,!e.hidetexts]])])):h("",!0),q(S,{qn:"gen",username:t.aData.userfullname,show:t.viewFull&&(t.canEdit||t.assessFeedback!=="")&&(!e.op_oneatatime||t.nextVisible===-1),canedit:t.canEdit,useeditor:t.useEditor,value:t.assessFeedback,onUpdate:t.updateFeedback},null,8,["username","show","canedit","useeditor","value","onUpdate"]),!e.op_oneatatime||t.nextVisible===-1?(i(),l("div",Qt,[t.canEdit&&t.aData.scoresingb==="manual"&&t.aData.manual_released==0?(i(),l("p",Et,[o("label",null,[p(o("input",{type:"checkbox","onUpdate:modelValue":s[37]||(s[37]=u=>e.releaseOnSave=u)},null,512),[[A,e.releaseOnSave]]),f(" "+n(e.$t("gradebook-release_on_save")),1)])])):h("",!0),e.op_oneatatime?(i(),l("button",{key:1,disabled:t.prevVisible===-1,type:"button",class:"secondary",onClick:s[38]||(s[38]=u=>t.setCurqn(t.prevVisible))},n(e.$t("gradebook-prevq")),9,Ft)):h("",!0),t.canEdit?(i(),l("button",{key:2,type:"button",disabled:!t.canSubmit,class:"primary",onClick:s[39]||(s[39]=u=>t.submitChanges(!0))},n(e.$t("gradebook-save")),9,Mt)):h("",!0),t.canEdit&&t.aData.nextstu?(i(),l("button",{key:3,type:"button",disabled:!t.canSubmit,class:"primary",onClick:s[40]||(s[40]=u=>t.submitChanges(!1,!0))},n(e.$t("gradebook-savenext")),9,Lt)):h("",!0),t.savedMsg!==""?(i(),l("span",Gt,n(t.savedMsg),1)):h("",!0),t.hasExit?(i(),l("button",{key:5,type:"button",class:"secondary",disabled:!t.canSubmit,onClick:s[41]||(s[41]=(...u)=>t.exit&&t.exit(...u))},n(e.$t("gradebook-return")),9,Ut)):h("",!0),t.canEdit&&((G=t.aData)!=null&&G.can_message)?(i(),l("a",{key:6,href:"#",onClick:s[42]||(s[42]=ae((...u)=>t.msgStu&&t.msgStu(...u),["prevent"])),target:"_blank"},n(e.$t("gradebook-msg_student")),1)):h("",!0)])):(i(),l("div",jt,[o("button",{disabled:t.prevVisible===-1,type:"button",class:"secondary",onClick:s[43]||(s[43]=u=>t.setCurqn(t.prevVisible))},n(e.$t("gradebook-prevq")),9,xt),o("button",{disabled:t.nextVisible===-1,type:"button",class:"primary",onClick:s[44]||(s[44]=u=>t.setCurqn(t.nextVisible))},n(e.$t("gradebook-nextq")),9,Nt),t.savedMsg!==""?(i(),l("span",Bt,n(t.savedMsg),1)):h("",!0),t.hasExit?(i(),l("button",{key:1,type:"button",class:"secondary",disabled:!t.canSubmit,onClick:s[45]||(s[45]=(...u)=>t.exit&&t.exit(...u))},n(e.$t("gradebook-return")),9,Rt)):h("",!0)])),o("div",Ht,[t.savedMsg!==""?(i(),l("div",zt,n(t.savedMsg),1)):h("",!0),t.canEdit?(i(),l("button",{key:1,type:"button",disabled:!t.canSubmit,class:"primary",onClick:s[46]||(s[46]=(...u)=>t.submitChanges&&t.submitChanges(...u))},n(e.$t("gradebook-save")),9,Wt)):h("",!0)]),t.showCategories?(i(),I(B,{key:6,data:t.curQuestionVers},null,8,["data"])):h("",!0),q(R),s[55]||(s[55]=o("div",{style:{"margin-bottom":"100px"}},null,-1))]))])):(i(),l("div",Bs,n(e.$t("loading")),1)),t.hasError?(i(),I(H,{key:2,errormsg:t.errorMsg,onClearerror:t.clearError},null,8,["errormsg","onClearerror"])):h("",!0),t.confirmObj!==null?(i(),I(z,{key:3,data:t.confirmObj,onClose:t.closeConfirm},null,8,["data","onClose"])):h("",!0)])}const Zt=T(xs,[["render",$t]]),N=ie(Zt).use(ne);N.component("RouterLink",de);N.mount("#app");export{Jt as __vite_legacy_guard};
