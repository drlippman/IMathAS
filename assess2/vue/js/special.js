(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["special"],{1148:function(e,t,s){"use strict";var n=s("a691"),i=s("1d80");e.exports="".repeat||function(e){var t=String(i(this)),s="",o=n(e);if(o<0||o==1/0)throw RangeError("Wrong number of repetitions");for(;o>0;(o>>>=1)&&(t+=t))1&o&&(s+=t);return s}},1912:function(e,t,s){"use strict";s.r(t);var n=s("7a23"),i={class:"home"},o={key:1,class:"subheader"},r={key:0,id:"livepoll_qsettings",style:{"flex-grow":"1"}},l={key:1,style:{"flex-grow":"1"}},c={key:2},u={key:1,class:"questionpane"};function a(e,t,s,a,h,p){var b=Object(n["A"])("assess-header"),f=Object(n["A"])("livepoll-nav"),d=Object(n["A"])("timer"),v=Object(n["A"])("livepoll-settings"),O=Object(n["A"])("question"),w=Object(n["A"])("livepoll-results");return Object(n["u"])(),Object(n["f"])("div",i,[Object(n["i"])(b),p.isTeacher?(Object(n["u"])(),Object(n["f"])(f,{key:0,qn:p.curqn,onSelectq:p.selectQuestion,onOpenq:p.openInput,onCloseq:p.closeInput,onNewversion:p.newVersion},null,8,["qn","onSelectq","onOpenq","onCloseq","onNewversion"])):Object(n["g"])("",!0),p.curstate>0&&p.curqn>-1&&(p.isTeacher||p.timelimit>0)?(Object(n["u"])(),Object(n["f"])("div",o,[p.isTeacher?(Object(n["u"])(),Object(n["f"])("div",r,[Object(n["i"])("label",null,[Object(n["M"])(Object(n["i"])("input",{type:"checkbox","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.showQuestion=t})},null,512),[[n["F"],e.showQuestion]]),Object(n["h"])(" "+Object(n["D"])(e.$t("livepoll.show_question")),1)]),Object(n["i"])("label",null,[Object(n["M"])(Object(n["i"])("input",{type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=function(t){return e.showResults=t})},null,512),[[n["F"],e.showResults]]),Object(n["h"])(" "+Object(n["D"])(e.$t("livepoll.show_results")),1)]),Object(n["i"])("label",null,[Object(n["M"])(Object(n["i"])("input",{type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=function(t){return e.showAnswers=t}),onChange:t[4]||(t[4]=function(){return p.updateShowAnswers&&p.updateShowAnswers.apply(p,arguments)})},null,544),[[n["F"],e.showAnswers]]),Object(n["h"])(" "+Object(n["D"])(p.showAnswersLabel),1)])])):(Object(n["u"])(),Object(n["f"])("div",l)),p.timelimit>0&&p.starttime>0?(Object(n["u"])(),Object(n["f"])(d,{key:2,end:1e3*(p.starttime+p.timelimit),total:p.timelimit},null,8,["end","total"])):Object(n["g"])("",!0)])):Object(n["g"])("",!0),!p.isTeacher&&p.curstate>0?(Object(n["u"])(),Object(n["f"])("div",c,[Object(n["i"])("h2",null,Object(n["D"])(e.$t("question_n",{n:p.curqn+1})),1)])):Object(n["g"])("",!0),Object(n["i"])("div",{class:"scrollpane","aria-label":e.$t("regions.questions")},[!p.isTeacher||0!==p.curstate&&-1!==p.curqn?Object(n["g"])("",!0):(Object(n["u"])(),Object(n["f"])(v,{key:0,class:"questionpane"})),!p.isTeacher&&p.curstate<2?(Object(n["u"])(),Object(n["f"])("div",u,Object(n["D"])(e.$t("livepoll.waiting")),1)):Object(n["g"])("",!0),p.curqn>=0&&(p.isTeacher&&p.curstate>0||!p.isTeacher&&p.curstate>1)?Object(n["M"])((Object(n["u"])(),Object(n["f"])(O,{key:2,qn:p.curqn,active:!0,state:p.curstate,seed:p.curseed},null,8,["qn","state","seed"])),[[n["J"],e.showQuestion]]):Object(n["g"])("",!0),p.isTeacher?(Object(n["u"])(),Object(n["f"])(w,{showresults:e.showResults,showans:4===p.curstate,qn:p.curqn,key:p.curqn+"-"+p.curseed},null,8,["showresults","showans","qn"])):Object(n["g"])("",!0)],8,["aria-label"])])}s("c975"),s("b64b"),s("e25e"),s("ac1f"),s("1276");var h=s("97cd"),p={class:"subheader"},b={style:{"flex-grow":"1"}};function f(e,t,s,i,o,r){var l=Object(n["A"])("menu-button"),c=Object(n["A"])("icons");return Object(n["u"])(),Object(n["f"])("div",p,[Object(n["i"])("div",{class:"flexrow",style:{"flex-grow":"1"},role:"navigation","aria-label":e.$t("regions.qnav")},[Object(n["i"])(l,{id:"qnav",options:r.navOptions,selected:r.dispqn,searchby:"dispqn"},{default:Object(n["L"])((function(e){var t=e.option;return[Object(n["h"])(Object(n["D"])(t.title),1)]})),_:1},8,["options","selected"]),r.showNextPrev?(Object(n["u"])(),Object(n["f"])("button",{key:0,onClick:t[1]||(t[1]=function(e){return r.selectQuestion(r.dispqn-1)}),disabled:r.dispqn<=0,class:"secondarybtn",id:"qprev","aria-label":e.$t("previous")},[Object(n["i"])(c,{name:"left"})],8,["disabled","aria-label"])):Object(n["g"])("",!0),r.showNextPrev?(Object(n["u"])(),Object(n["f"])("button",{key:1,onClick:t[2]||(t[2]=function(e){return r.selectQuestion(r.dispqn+1)}),disabled:r.dispqn>=r.navOptions.length-1,class:"secondarybtn",id:"qnext","aria-label":e.$t("next")},[Object(n["i"])(c,{name:"right"})],8,["disabled","aria-label"])):Object(n["g"])("",!0)],8,["aria-label"]),Object(n["i"])("div",b,[2===r.curstate&&r.dispqn>0?(Object(n["u"])(),Object(n["f"])("button",{key:0,class:"primary",onClick:t[3]||(t[3]=function(){return r.closeQuestion&&r.closeQuestion.apply(r,arguments)})},Object(n["D"])(e.$t("livepoll.close_input")),1)):r.curstate>0&&r.dispqn>0?(Object(n["u"])(),Object(n["f"])("button",{key:1,class:"primary",onClick:t[4]||(t[4]=function(){return r.openQuestion&&r.openQuestion.apply(r,arguments)})},Object(n["D"])(e.$t("livepoll.open_input")),1)):Object(n["g"])("",!0),r.curstate>2&&r.dispqn>0?(Object(n["u"])(),Object(n["f"])("button",{key:2,class:"secondary",onClick:t[5]||(t[5]=function(){return r.newVersion&&r.newVersion.apply(r,arguments)})},[Object(n["i"])(c,{name:"retake"}),Object(n["h"])(" "+Object(n["D"])(e.$t("livepoll.new_version")),1)])):Object(n["g"])("",!0)]),Object(n["i"])("div",null,Object(n["D"])(r.studentCount),1)])}var d=s("ad76"),v=s("f05b"),O=s("6081"),w={name:"LivepollNav",props:["qn"],components:{MenuButton:d["a"],Icons:v["a"]},computed:{navOptions:function(){var e=this,t=[];t.push({onclick:function(){return e.$emit("selectq",0)},title:this.$t("livepoll.settings"),dispqn:0});var s=function(s){var n=parseInt(s)+1;t.push({onclick:function(){return e.$emit("selectq",n)},title:e.$t("question_n",{n:n}),dispqn:n})};for(var n in O["b"].assessInfo.questions)s(n);return t},showNextPrev:function(){return Object.keys(this.navOptions).length>1},dispqn:function(){return parseInt(this.qn)+1},curstate:function(){return O["b"].assessInfo.livepoll_status.curstate},studentCount:function(){return this.$tc("livepoll.stucnt",O["b"].livepollStuCnt)}},methods:{selectQuestion:function(e){this.$emit("selectq",e)},openQuestion:function(){this.$emit("openq")},closeQuestion:function(){this.$emit("closeq")},newVersion:function(){this.$emit("newversion")}}};s("a0f9");w.render=f;var j=w,m=Object(n["i"])("br",null,null,-1),y=Object(n["i"])("br",null,null,-1),q=Object(n["i"])("br",null,null,-1),g=Object(n["i"])("br",null,null,-1);function I(e,t,s,i,o,r){return Object(n["u"])(),Object(n["f"])("div",null,[Object(n["i"])("h2",null,Object(n["D"])(e.$t("livepoll.settings")),1),Object(n["i"])("p",null,[Object(n["i"])("label",null,[Object(n["M"])(Object(n["i"])("input",{type:"checkbox","onUpdate:modelValue":t[1]||(t[1]=function(e){return r.showQuestionDefault=e})},null,512),[[n["F"],r.showQuestionDefault]]),Object(n["h"])(" "+Object(n["D"])(e.$t("livepoll.show_question_default")),1)]),m,Object(n["i"])("label",null,[Object(n["M"])(Object(n["i"])("input",{type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=function(e){return r.showResultsLiveDefault=e})},null,512),[[n["F"],r.showResultsLiveDefault]]),Object(n["h"])(" "+Object(n["D"])(e.$t("livepoll.show_results_live_default")),1)]),y,Object(n["i"])("label",null,[Object(n["M"])(Object(n["i"])("input",{type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=function(e){return r.showResultsAfter=e})},null,512),[[n["F"],r.showResultsAfter]]),Object(n["h"])(" "+Object(n["D"])(e.$t("livepoll.show_results_after")),1)]),q,Object(n["i"])("label",null,[Object(n["M"])(Object(n["i"])("input",{type:"checkbox","onUpdate:modelValue":t[4]||(t[4]=function(e){return r.showAnswersAfter=e})},null,512),[[n["F"],r.showAnswersAfter]]),Object(n["h"])(" "+Object(n["D"])(e.$t("livepoll.show_answers_after")),1)]),g,Object(n["i"])("label",null,[Object(n["M"])(Object(n["i"])("input",{type:"checkbox","onUpdate:modelValue":t[5]||(t[5]=function(e){return r.useTimer=e})},null,512),[[n["F"],r.useTimer]]),Object(n["h"])(" "+Object(n["D"])(e.$t("livepoll.use_timer")),1)]),Object(n["M"])(Object(n["i"])("span",null,[Object(n["M"])(Object(n["i"])("input",{type:"text",size:"3","onUpdate:modelValue":t[6]||(t[6]=function(e){return r.questionTimelimit=e})},null,512),[[n["I"],r.questionTimelimit]]),Object(n["h"])(" "+Object(n["D"])(e.$t("livepoll.seconds")),1)],512),[[n["J"],r.useTimer]])])])}var k={name:"LivepollSettings",computed:{showQuestionDefault:{set:function(e){this.$set(O["b"].livepollSettings,"showQuestionDefault",e)},get:function(){return O["b"].livepollSettings.showQuestionDefault}},showResultsLiveDefault:{set:function(e){this.$set(O["b"].livepollSettings,"showResultsLiveDefault",e)},get:function(){return O["b"].livepollSettings.showResultsLiveDefault}},showResultsAfter:{set:function(e){this.$set(O["b"].livepollSettings,"showResultsAfter",e)},get:function(){return O["b"].livepollSettings.showResultsAfter}},showAnswersAfter:{set:function(e){this.$set(O["b"].livepollSettings,"showAnswersAfter",e)},get:function(){return O["b"].livepollSettings.showAnswersAfter}},useTimer:{set:function(e){this.$set(O["b"].livepollSettings,"useTimer",e)},get:function(){return O["b"].livepollSettings.useTimer}},questionTimelimit:{set:function(e){this.$set(O["b"].livepollSettings,"questionTimelimit",e)},get:function(){return O["b"].livepollSettings.questionTimelimit}}}};k.render=I;var x=k,P={key:0};function T(e,t,s,i,o,r){var l=Object(n["A"])("livepoll-results-choices"),c=Object(n["A"])("livepoll-results-general");return r.qinfo&&r.qinfo.answeights?(Object(n["u"])(),Object(n["f"])("div",P,[Object(n["i"])("p",null,Object(n["D"])(e.$tc("livepoll.numresults",r.numResults)),1),Object(n["M"])(Object(n["i"])("div",null,[(Object(n["u"])(!0),Object(n["f"])(n["a"],null,Object(n["y"])(r.results,(function(e,t){return Object(n["u"])(),Object(n["f"])("div",{key:s.qn+"-"+t,class:"med-below"},[e.hasOwnProperty("choices")?(Object(n["u"])(),Object(n["f"])(l,{key:0,results:e,showans:s.showans},null,8,["results","showans"])):(Object(n["u"])(),Object(n["f"])(c,{key:1,results:e,showans:s.showans,itemid:s.qn+"-"+t},null,8,["results","showans","itemid"]))])})),128))],512),[[n["J"],s.showresults&&r.numResults>0]])])):Object(n["g"])("",!0)}s("a15b"),s("4e82"),s("a9e3"),s("b680"),s("d3b7"),s("25f0"),s("466d"),s("5319");var A={class:"LPres"},$={style:{"min-width":"10em"}},L={class:"LPresbarwrap"},S={class:"LPresval"};function _(e,t,s,i,o,r){return Object(n["u"])(),Object(n["f"])("table",A,[Object(n["i"])("thead",null,[Object(n["i"])("tr",null,[Object(n["i"])("th",null,Object(n["D"])(e.$t("livepoll.answer")),1),Object(n["i"])("th",$,Object(n["D"])(e.$t("livepoll.frequency")),1)])]),Object(n["i"])("tbody",null,[(Object(n["u"])(!0),Object(n["f"])(n["a"],null,Object(n["y"])(s.results.choices,(function(e,t){return Object(n["u"])(),Object(n["f"])("tr",{key:t,class:[s.showans?s.results.scoredata[t]>0?"LPshowcorrect":"LPshowwrong":""]},[Object(n["i"])("td",{innerHTML:e},null,8,["innerHTML"]),Object(n["i"])("td",null,[Object(n["i"])("span",L,[Object(n["i"])("span",{class:"LPresbar",style:{width:Math.round(100*s.results.datatots[t]/s.results.maxfreq)+"%"}},[Object(n["i"])("span",S,Object(n["D"])(s.results.datatots[t]),1)],4)])])],2)})),128))])])}var R={name:"LivepollResultsChoices",props:["results","showans"],methods:{onUpdate:function(){var e=this;this.$nextTick((function(){setTimeout(window.drawPics,100),window.rendermathnode(e.$refs.main)}))}},mounted:function(){this.onUpdate()},watch:{results:function(e,t){this.onUpdate()}}};R.render=_;var D=R,N={key:0,class:"LPdrawgrid",ref:"main"},V={key:1,class:"LPres",ref:"main"},F={style:{"min-width":"10em"}},C={key:0},M={key:1},E={class:"LPresbarwrap"},Q={class:"LPresval"};function U(e,t,s,i,o,r){return"draw"===s.results.qtype&&0===s.results.initpts[11]?(Object(n["u"])(),Object(n["f"])("div",N,[(Object(n["u"])(!0),Object(n["f"])(n["a"],null,Object(n["y"])(r.sortedKeys,(function(e,t){return Object(n["u"])(),Object(n["f"])("div",{key:e,class:[s.showans?s.results.scoredata[e]>0?s.results.scoredata[e]<.99?"LPshowpartial":"LPshowcorrect":"LPshowwrong":""]},[Object(n["i"])("canvas",{class:"drawcanvas",id:"canvasLP"+s.itemid+"-"+t,width:s.results.initpts[6],height:s.results.initpts[7]},null,8,["id","width","height"]),Object(n["i"])("input",{type:"hidden",id:"qnLP"+s.itemid+"-"+t},null,8,["id"])],2)})),128))],512)):(Object(n["u"])(),Object(n["f"])("table",V,[Object(n["i"])("thead",null,[Object(n["i"])("tr",null,[Object(n["i"])("th",null,Object(n["D"])(e.$t("livepoll.answer")),1),Object(n["i"])("th",F,Object(n["D"])(e.$t("livepoll.frequency")),1)])]),Object(n["i"])("tbody",null,[(Object(n["u"])(!0),Object(n["f"])(n["a"],null,Object(n["y"])(r.sortedKeys,(function(e,t){return Object(n["u"])(),Object(n["f"])("tr",{key:e,class:[s.showans?s.results.scoredata[e]>0?s.results.scoredata[e]<.99?"LPshowpartial":"LPshowcorrect":"LPshowwrong":""]},["draw"===s.results.qtype?(Object(n["u"])(),Object(n["f"])("td",C,[Object(n["i"])("canvas",{class:"drawcanvas",id:"canvasLP"+s.itemid+"-"+t,width:s.results.initpts[6],height:s.results.initpts[7]},null,8,["id","width","height"]),Object(n["i"])("input",{type:"hidden",id:"qnLP"+s.itemid+"-"+t},null,8,["id"])])):(Object(n["u"])(),Object(n["f"])("td",M,Object(n["D"])(e),1)),Object(n["i"])("td",null,[Object(n["i"])("span",E,[Object(n["i"])("span",{class:"LPresbar",style:{width:Math.round(100*s.results.datatots[e]/s.results.maxfreq)+"%"}},[Object(n["i"])("span",Q,Object(n["D"])(s.results.datatots[e]),1)],4)])])],2)})),128))])],512))}s("fb6a");var J={name:"LivepollResultsGeneral",props:["results","showans","itemid"],computed:{sortedKeys:function(){var e=this.results.datatots,t=Object.keys(e);return t.sort((function(t,s){return e[s]-e[t]}))}},methods:{onUpdate:function(){var e=this;if("draw"===this.results.qtype){for(var t=0;t<this.sortedKeys.length;t++){var s=this.sortedKeys[t].replace(/\(/g,"[").replace(/\)/g,"]");s=s.split(";;"),""!==s[0]&&(s[0]="["+s[0].replace(/;/g,"],[")+"]"),s="[["+s.join("],[")+"]]";var n="LP"+this.itemid+"-"+t;window.canvases[n]=this.results.initpts.slice(),window.canvases[n].unshift(n),window.drawla[n]=JSON.parse(s)}this.$nextTick((function(){for(var t=0;t<e.sortedKeys.length;t++)window.imathasDraw.initCanvases("LP"+e.itemid+"-"+t)}))}this.$nextTick((function(){setTimeout(window.drawPics,100),window.rendermathnode(e.$refs.main)}))}},mounted:function(){this.onUpdate()},watch:{results:function(e,t){this.onUpdate()}}};J.render=U;var H=J,Y={name:"LivepollResults",props:["qn","showresults","showans"],components:{LivepollResultsChoices:D,LivepollResultsGeneral:H},computed:{qinfo:function(){return O["b"].assessInfo.questions[this.qn]},numResults:function(){return O["b"].livepollResults.hasOwnProperty(this.qn)?Object.keys(O["b"].livepollResults[this.qn]).length:0},params:function(){for(var e=[],t=0;t<this.qinfo.answeights.length;t++)0===t&&this.qinfo.jsparams.hasOwnProperty(this.qn)?e[t]=this.qinfo.jsparams[this.qn]:e[t]=this.qinfo.jsparams[1e3*(this.qn+1)+t];return e},results:function(){for(var e=[],t=0;t<this.qinfo.answeights.length;t++){var s={},n={};if(this.params[t].hasOwnProperty("livepoll_choices"))for(var i=0;i<this.params[t].livepoll_choices.length;i++)s[i]=0,n[i]=0;var o=this.params[t].qtype,r="choices"===o||"multans"===o;if(r){var l=void 0;l="choices"===o?this.params[t].livepoll_ans.toString().split(/\s+or\s+/):this.params[t].livepoll_ans.toString().split(/\s*,\s*/);for(var c=0;c<l.length;c++)n[l[c]]=1}var u=[],a=void 0;for(var h in O["b"].livepollResults[this.qn]){var p=O["b"].livepollResults[this.qn][h].ans[t];p=r?p.toString().split("|"):o.match(/calc/)||"numfunc"===o?["`"+p+"`"]:[p],"draw"===o&&(a=this.condenseDraw(p[0]),u.hasOwnProperty(a)||(u[a]=p[0]));for(var b=0;b<p.length;b++)"draw"===o&&s.hasOwnProperty(u[a])?s[u[a]]+=1:s.hasOwnProperty(p[b])?s[p[b]]+=1:(s[p[b]]=1,n[p[b]]=O["b"].livepollResults[this.qn][h].score[t])}var f=1;for(var d in s)s[d]>f&&(f=s[d]);if(e[t]={datatots:s,scoredata:n,maxfreq:f,qtype:o},r&&(e[t].choices=this.params[t].livepoll_choices),"draw"===o){for(var v=this.params[t].livepoll_drawinit,w=1;w<Math.min(11,v.length);w++)v[w]=Number(v[w]);e[t].initpts=v}}return e}},methods:{condenseDraw:function(e){if(""===e)return e;var t=e.replace(/\(/g,"[").replace(/\)/g,"]");t=t.split(";;"),""!==t[0]&&(t[0]="["+t[0].replace(/;/g,"],[")+"]"),t="[["+t.join("],[")+"]]";var s,n,i,o,r=JSON.parse(t);if(r[0].length>0)for(var l=0;l<r[0].length;l++)2===r[0][l].length&&r[0][l].sort((function(e,t){return e[0]===t[0]?e[1]-t[1]:e[0]-t[0]}));else if(r.length>4&&r[4].length>0)return e;if(r[1].length>0&&r[1].sort((function(e,t){return e[0]===t[0]?e[1]-t[1]:e[0]-t[0]})),r[2].length>0&&r[2].sort((function(e,t){return e[0]===t[0]?e[1]-t[1]:e[0]-t[0]})),r.length>3&&r[3].length>0)for(var c=0;c<r[3].length;c++)s=r[3][c],5===s[0]?(s[1]===s[3]?n=[5,"x",s[1]]:(i=(s[4]-s[2])/(s[3]-s[1]),o=s[2]-i*s[1],n=[5,i.toFixed(4),o.toFixed(2)]),r[3][c]=n):5.2===s[0]?(s[1]===s[3]?n=[5.2,"x",s[1],s[2]]:(i=(s[4]-s[2])/(s[3]-s[1]),n=[5.2,i.toFixed(4),s[1],s[2]]),r[3][c]=n):5.3===s[0]?(n=s[1]<s[3]||s[1]===s[3]&&s[2]<s[4]?[5.3,s[1],s[2],s[3],s[4]]:[5.3,s[3],s[4],s[1],s[2]],r[3][c]=n):6===s[0]?(s[1]===s[3]?n=[6,"x",s[1],s[2]]:(i=(s[4]-s[2])/((s[3]-s[1])*(s[3]-s[1])),n=[6,i.toFixed(4),s[1],s[2]]),r[3][c]=n):6.5===s[0]?(s[1]===s[3]?n=[6.5,"x",s[1],s[2]]:(o=s[3]>s[1]?1:-1,i=(s[4]-s[2])/Math.sqrt(Math.abs(s[3]-s[1])),n=[6.5,i.toFixed(4),o,s[1],s[2]]),r[3][c]=n):8===s[0]&&(s[1]===s[3]?n=[8,"x",s[1],s[2]]:(i=(s[4]-s[2])/Math.abs(s[3]-s[1]),n=[8,i.toFixed(4),s[1],s[2]]),r[3][c]=n);return JSON.stringify(r)}}};s("dce7");Y.render=T;var G=Y,z=s("5dc8"),K=s("84ac"),W={name:"livepoll",components:{LivepollNav:j,Question:z["a"],LivepollSettings:x,LivepollResults:G,AssessHeader:h["a"],Timer:K["a"]},data:function(){return{showQuestion:!0,showResults:!0,showAnswers:!0,onSettings:!1,livepollTimer:null,socket:null}},computed:{isTeacher:function(){return O["b"].assessInfo.is_teacher},curqn:function(){return this.onSettings?-1:parseInt(O["b"].assessInfo.livepoll_status.curquestion)-1},curseed:function(){return O["b"].assessInfo.livepoll_status.seed},curstate:function(){return O["b"].assessInfo.livepoll_status.curstate},starttime:function(){return O["b"].assessInfo.livepoll_status.startt},timelimit:function(){return O["b"].livepollSettings.useTimer?parseInt(O["b"].livepollSettings.questionTimelimit):O["b"].assessInfo.livepoll_status.timelimit?parseInt(O["b"].assessInfo.livepoll_status.timelimit):0},showAnswersLabel:function(){return this.curstate<3?this.$t("livepoll.show_answers_after"):this.$t("livepoll.show_answers")}},methods:{updateUsercount:function(e){O["b"].livepollStuCnt=e.cnt,0===e.teachcnt&&(O["b"].assessInfo.livepoll_status.curstate=0)},addResult:function(e){O["b"].livepollResults.hasOwnProperty(this.curqn)||this.$set(O["b"].livepollResults,this.curqn,{}),e.score=JSON.parse(e.score),e.ans=JSON.parse(e.ans),this.$set(O["b"].livepollResults[this.curqn],e.user,e)},showHandler:function(e){if("showq"===e.action){if(O["a"].clearInitValue(e.qn),-1!==e.startt.indexOf("-")){var t=e.startt.split("-");e.startt=t[0],e.timelimit=t[1]}else e.timelimit=0;this.$set(O["b"].assessInfo,"livepoll_status",{curstate:2,curquestion:parseInt(e.qn)+1,seed:parseInt(e.seed),startt:parseInt(e.startt),timelimit:parseInt(e.timelimit)})}else this.$set(O["b"].assessInfo,"livepoll_status",Object.assign(O["b"].assessInfo.livepoll_status,{curquestion:parseInt(e.qn)+1,curstate:parseInt(e.action),timelimit:0}))},selectQuestion:function(e){clearTimeout(this.livepollTimer);var t=parseInt(e)-1;if(-1!==t){if(this.onSettings=!1,t!==this.curqn){this.showQuestion=O["b"].livepollSettings.showQuestionDefault,this.showResults=O["b"].livepollSettings.showResultsLiveDefault,this.showAnswers=O["b"].livepollSettings.showAnswersAfter;var s=1;O["b"].livepollResults[t]&&Object.keys(O["b"].livepollResults[t]).length>0&&(s=this.showAnswers?4:3),t>=0&&O["a"].setLivepollStatus({newquestion:e,newstate:s})}}else this.onSettings=!0},openInput:function(){var e=this;O["a"].setLivepollStatus({newquestion:this.curqn+1,newstate:2,timelimit:this.timelimit}),this.timelimit>0&&(this.livepollTimer=window.setTimeout((function(){return e.closeInput()}),1e3*this.timelimit))},closeInput:function(){clearTimeout(this.livepollTimer);var e=this.showAnswers?4:3;O["b"].livepollSettings.showResultsAfter&&(this.showResults=!0),O["a"].setLivepollStatus({newquestion:this.curqn+1,newstate:e})},newVersion:function(){O["a"].setLivepollStatus({newquestion:this.curqn+1,newstate:1,forceregen:1}),this.$set(O["b"].livepollResults,this.curqn,{})},updateShowAnswers:function(){if(this.curstate>2){var e=this.showAnswers?4:3;O["a"].setLivepollStatus({newquestion:this.curqn+1,newstate:e})}}},mounted:function(){var e=this,t=O["b"].assessInfo.livepoll_server,s=O["b"].assessInfo.livepoll_data,n="room="+s.room+"&now="+s.now;s.sig&&(n+="&sig="+encodeURIComponent(s.sig)),this.socket=window.io("https://"+t+":3000",{query:n}),this.socket.off(),this.socket.on("livepoll usercount",(function(t){return e.updateUsercount(t)})),O["b"].assessInfo.is_teacher?this.socket.on("livepoll qans",(function(t){return e.addResult(t)})):this.socket.on("livepoll show",(function(t){return e.showHandler(t)}))},created:function(){0===O["b"].assessInfo.livepoll_status.curquestion&&this.isTeacher&&(this.onSettings=!0)}};s("7513");W.render=a;t["default"]=W},"1dcf":function(e,t,s){},"296b":function(e,t,s){"use strict";s.r(t);var n=s("7a23"),i={class:"home"},o={id:"playerwrapper"},r=Object(n["i"])("div",{id:"player"},null,-1);function l(e,t,s,l,c,u){var a=Object(n["A"])("assess-header"),h=Object(n["A"])("videocued-result-nav"),p=Object(n["A"])("videocued-nav"),b=Object(n["A"])("intro-text"),f=Object(n["A"])("inter-question-text-list"),d=Object(n["A"])("full-question-header"),v=Object(n["A"])("question");return Object(n["u"])(),Object(n["f"])("div",i,[Object(n["i"])("a",{href:"#",class:"sr-only",onClick:t[1]||(t[1]=Object(n["O"])((function(t){return e.$refs.scrollpane.focus()}),["prevent"]))},Object(n["D"])(e.$t("jumptocontent")),1),Object(n["i"])(a),Object(n["i"])(p,{cue:e.cue,toshow:e.toshow,onJumpto:u.jumpTo},{default:Object(n["L"])((function(){return[Object(n["i"])(h,{class:"med-left",qn:u.qn,cue:e.cue,onJumpto:u.jumpTo},null,8,["qn","cue","onJumpto"])]})),_:1},8,["cue","toshow","onJumpto"]),Object(n["i"])("div",{class:"scrollpane",role:"region",ref:"scrollpane",tabindex:"-1","aria-label":e.$t("regions.q_and_vid")},[Object(n["i"])(b,{active:-1==e.cue,html:u.intro,key:"-1"},null,8,["active","html"]),Object(n["M"])(Object(n["i"])("div",o,[Object(n["i"])("div",{class:"video-wrapper-wrapper",style:{"max-width":e.videoWidth+"px"}},[Object(n["i"])("div",{class:"fluid-width-video-wrapper",style:{"padding-bottom":e.aspectRatioPercent+"%"}},[r],4)],4)],512),[[n["J"],e.cue>-1&&-1===u.qn]]),(Object(n["u"])(!0),Object(n["f"])(n["a"],null,Object(n["y"])(u.questionArray,(function(e){return Object(n["u"])(),Object(n["f"])("div",{key:e,"aria-hidden":e!=u.qn,class:{inactive:e!=u.qn}},[Object(n["i"])(f,{pos:"before",qn:e,active:e==u.qn,textlist:u.textList,lastq:u.lastQ},null,8,["qn","active","textlist","lastq"]),Object(n["M"])(Object(n["i"])(d,{qn:e},null,8,["qn"]),[[n["J"],e==u.qn]]),Object(n["i"])(v,{qn:e,active:e==u.qn,getwork:1},null,8,["qn","active"]),Object(n["i"])(f,{pos:"after",qn:e,active:e==u.qn,textlist:u.textList,lastq:u.lastQ},null,8,["qn","active","textlist","lastq"])],10,["aria-hidden"])})),128))],8,["aria-label"])])}s("e25e"),s("ac1f"),s("1276");var c=s("97cd");function u(e,t,s,i,o,r){var l=Object(n["A"])("videocued-nav-list-item"),c=Object(n["A"])("menu-button");return Object(n["u"])(),Object(n["f"])("div",{class:"subheader",role:"navigation","aria-label":e.$t("regions.qvidnav")},[Object(n["i"])(c,{id:"qnav",options:r.navOptions,selected:r.curOption,searchby:"title"},{default:Object(n["L"])((function(e){var t=e.option,s=e.selected;return[Object(n["i"])(l,{option:t,selected:s},null,8,["option","selected"])]})),_:1},8,["options","selected"]),Object(n["z"])(e.$slots,"default")],8,["aria-label"])}s("b64b");var a=s("ad76"),h={class:"flex-nowrap-center"},p={class:"qname-wrap"},b={key:0,class:"redoicon"},f={key:1,class:"redoicon"};function d(e,t,s,i,o,r){var l=Object(n["A"])("icons");return Object(n["u"])(),Object(n["f"])("span",h,[Object(n["i"])("span",p,[Object(n["i"])(l,{name:r.statusIcon,class:"qstatusicon"},null,8,["name"]),Object(n["i"])("span",{class:{greystrike:""!==r.nameHover},title:r.nameHover},Object(n["D"])(s.option.title),11,["title"]),Object(n["h"])(" "+Object(n["D"])(r.scoreDisplay),1)]),s.selected?Object(n["g"])("",!0):(Object(n["u"])(),Object(n["f"])("span",b,[r.canRetry?(Object(n["u"])(),Object(n["f"])(l,{key:0,name:"retry"})):Object(n["g"])("",!0)])),s.selected?Object(n["g"])("",!0):(Object(n["u"])(),Object(n["f"])("span",f,[r.canRegen?(Object(n["u"])(),Object(n["f"])(l,{key:0,name:"retake"})):Object(n["g"])("",!0)]))])}var v=s("f05b"),O=s("6081"),w=s("6c5a"),j={name:"VideocuedNavListItem",props:["option","selected"],components:{Icons:v["a"]},mixins:[w["a"]],computed:{statusIcon:function(){if("v"===this.option.type||"f"===this.option.type)return"video";if("q"===this.option.type){if("unattempted"===O["b"].assessInfo.questions[this.option.qn].status){if(1===this.qsAttempted[this.option.qn])return"attempted";if(this.qsAttempted[this.option.qn]>0)return"partattempted"}return O["b"].assessInfo.questions[this.option.qn].status}return"none"},nameHover:function(){return"q"===this.option.type&&0!==O["b"].assessInfo.questions[this.option.qn].withdrawn?this.$t("header.withdrawn"):""},scoreDisplay:function(){if("q"!==this.option.type)return"";var e=O["b"].assessInfo.questions[this.option.qn];if(e.hasOwnProperty("gbscore")){var t=e.canretry?"(":"[";return t+=e.gbscore+"/"+e.points_possible,t+=e.canretry?")":"]",t}return this.$tc("header.pts",e.points_possible)},canRetry:function(){if("q"===this.option.type){var e=O["b"].assessInfo.questions[this.option.qn];return e.canretry}return!1},canRegen:function(){if("q"===this.option.type){var e=O["b"].assessInfo.questions[this.option.qn];return e.regens_remaining}return!1}}};s("8f61");j.render=d;var m=j,y={name:"VideocuedNav",props:["cue","toshow"],components:{MenuButton:a["a"],VideocuedNavListItem:m},computed:{hasIntro:function(){return""!==O["b"].assessInfo.intro},navOptions:function(){var e=this,t=[];this.hasIntro&&t.push({onclick:function(){return e.$emit("jumpto",-1,"i")},title:this.$t("intro"),type:"i"});for(var s=function(s){var n=O["b"].assessInfo.videocues[s];t.push({onclick:function(){return e.$emit("jumpto",s,"v")},type:"v",title:n.title,cue:s}),n.hasOwnProperty("qn")&&t.push({onclick:function(){return e.$emit("jumpto",s,"q")},type:"q",title:e.$t("question_n",{n:parseInt(n.qn)+1}),qn:parseInt(n.qn),cue:s,subitem:!0}),n.hasOwnProperty("followuptime")&&t.push({onclick:function(){return e.$emit("jumpto",s,"f")},type:"f",title:n.followuptitle,cue:s,subitem:!0})},n=0;n<O["b"].assessInfo.videocues.length;n++)s(n);return t},curOption:function(){var e=parseInt(this.cue);if(-1===e&&this.hasIntro)return 0;for(var t=this.hasIntro?1:0;t<this.navOptions.length;t++)if(this.navOptions[t].cue===e&&this.navOptions[t].type===this.toshow)return t;return-1},showNextPrev:function(){return Object.keys(this.navOptions).length>1},prevLink:function(){return this.curOption<=0?"":this.navOptions[this.curOption-1].internallink},nextLink:function(){return this.curOption>=this.navOptions.length-1?"":this.navOptions[this.curOption+1].internallink}}};s("911c");y.render=u;var q=y,g=s("e536"),I=s("0597"),k={key:0};function x(e,t,s,i,o,r){return-1===s.qn||r.showNav?(Object(n["u"])(),Object(n["f"])("div",k,[-1===s.qn&&-1===s.cue?(Object(n["u"])(),Object(n["f"])("button",{key:0,onClick:t[1]||(t[1]=function(){return r.startVid&&r.startVid.apply(r,arguments)}),class:"primary"},Object(n["D"])(e.$t("videocued.start")),1)):Object(n["g"])("",!0),s.qn>-1&&r.hasNextVid?(Object(n["u"])(),Object(n["f"])("button",{key:1,onClick:t[2]||(t[2]=function(){return r.nextVidLink&&r.nextVidLink.apply(r,arguments)}),class:{primary:"correct"!==r.status||!r.showSkip}},Object(n["D"])(e.$t("videocued.continue",{title:r.nextVidTitle})),3)):Object(n["g"])("",!0),s.qn>-1&&r.showSkip?(Object(n["u"])(),Object(n["f"])("button",{key:2,onClick:t[3]||(t[3]=function(){return r.skipLink&&r.skipLink.apply(r,arguments)}),class:"primary"},Object(n["D"])(e.$t("videocued.skipto",{title:r.skipTitle})),1)):Object(n["g"])("",!0)])):Object(n["g"])("",!0)}var P={name:"VideocuedResultNav",props:["qn","cue"],computed:{qdata:function(){return O["b"].assessInfo.questions[this.qn]},showNav:function(){return O["b"].inProgress&&O["b"].assessInfo.hasOwnProperty("questions")&&this.qdata.hasOwnProperty("score")&&(this.qdata.try>0||this.qdata.hasOwnProperty("tries_remaining_range"))&&0===this.qdata.withdrawn},showScores:function(){return"during"===O["b"].assessInfo.showscores},status:function(){if(!this.showScores||!this.qdata.hasOwnProperty("parts"))return"neutral";for(var e=0;e<this.qdata.parts.length;e++)if(0===this.qdata.parts[e].try||this.qdata.parts[e].rawscore<.98)return"neutral";return"correct"},nextVidType:function(){return O["b"].assessInfo.videocues[this.cue].hasOwnProperty("followuptitle")?"followup":"nextseg"},hasNextVid:function(){return"followup"===this.nextVidType||O["b"].assessInfo.videocues.hasOwnProperty(this.cue+1)},nextVidTitle:function(){return"followup"===this.nextVidType?O["b"].assessInfo.videocues[this.cue].followuptitle:O["b"].assessInfo.videocues[this.cue+1].title},showSkip:function(){return"correct"===this.status&&"followup"===this.nextVidType&&O["b"].assessInfo.videocues.hasOwnProperty(this.cue+1)},skipTitle:function(){return O["b"].assessInfo.videocues[this.cue+1].title}},methods:{skipLink:function(){this.$emit("jumpto",this.cue+1,"v")},nextVidLink:function(){"followup"===this.nextVidType?this.$emit("jumpto",this.cue,"f"):this.$emit("jumpto",this.cue+1,"v")},startVid:function(){this.$emit("jumpto",0,"v")}}};P.render=x;var T=P,A=s("5dc8"),$=s("eeaa"),L={name:"videocued",components:{FullQuestionHeader:g["a"],VideocuedNav:q,Question:A["a"],VideocuedResultNav:T,InterQuestionTextList:I["a"],AssessHeader:c["a"],IntroText:$["a"]},data:function(){return{videoWidth:600,aspectRatioPercent:56.2,ytplayer:null,timer:null,cue:0,toshow:"v"}},computed:{curCue:function(){return this.cue>-1?O["b"].assessInfo.videocues[this.cue]:{}},qn:function(){return"q"===this.toshow?parseInt(this.curCue.qn):-1},timeCues:function(){var e={};for(var t in O["b"].assessInfo.videocues)O["b"].assessInfo.videocues[t].hasOwnProperty("qn")&&(e[O["b"].assessInfo.videocues[t].time]=parseInt(t));return e},nextVidTimes:function(){for(var e={},t=0;t<O["b"].assessInfo.videocues.length;t++)O["b"].assessInfo.videocues[t].hasOwnProperty("followuptime")&&O["b"].assessInfo.videocues.hasOwnProperty(t+1)?e[O["b"].assessInfo.videocues[t].followuptime]=t:!O["b"].assessInfo.videocues[t].hasOwnProperty("qn")&&O["b"].assessInfo.videocues.hasOwnProperty(t+1)&&(e[O["b"].assessInfo.videocues[t].time]=t);return e},intro:function(){return O["b"].assessInfo.intro},questionArray:function(){for(var e={},t=0;t<O["b"].assessInfo.questions.length;t++)e[t]=t;return e},lastQ:function(){return O["b"].assessInfo.questions.length-1},textList:function(){return O["b"].assessInfo.hasOwnProperty("interquestion_text")?O["b"].assessInfo.interquestion_text:[]}},methods:{createPlayer:function(){var e=this,t=!!(document.exitFullscreen||document.mozCancelFullScreen||document.webkitExitFullscreen||document.msExitFullscreen),s={autoplay:0,wmode:"transparent",fs:t?1:0,controls:2,rel:0,modestbranding:1,showinfo:0,origin:window.location.protocol+"//"+window.location.host},n=O["b"].assessInfo.videoar.split(":"),i=window.innerHeight-50;this.videoWidth=n[0]/n[1]*i,this.aspectRatioPercent=Math.round(1e3*i/this.videoWidth)/10,this.ytplayer=new window.YT.Player("player",{height:i,width:this.videoWidth,videoId:O["b"].assessInfo.videoid,playerVars:s,events:{onReady:function(){return e.handlePlayerReady()},onStateChange:function(t){return e.handlePlayerStateChange(t)},onError:function(t){return e.handlePlayerError(t)}}})},exitFullscreen:function(){var e=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;e&&(document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen())},checkTime:function(){var e=this,t=Math.floor(this.ytplayer.getCurrentTime());!this.timeCues.hasOwnProperty(t)||"v"===this.toshow&&this.cue===this.timeCues[t]+1||"f"===this.toshow&&this.cue===this.timeCues[t]||this.ytplayer.getPlayerState()!==window.YT.PlayerState.PLAYING?(this.nextVidTimes.hasOwnProperty(t)&&this.cue===this.nextVidTimes[t]&&(this.cue=this.cue+1,this.toshow="v"),this.timer=window.setTimeout((function(){e.checkTime()}),200)):this.jumpTo(parseInt(this.timeCues[t]),"q")},handlePlayerReady:function(){window.$("iframe#player").removeAttr("height").removeAttr("width").css("height","").css("width","")},handlePlayerStateChange:function(e){var t=this;e.data===window.YT.PlayerState.PLAYING?this.timer=window.setTimeout((function(){t.checkTime()}),200):e.data===window.YT.PlayerState.ENDED&&"v"===this.toshow&&this.curCue.hasOwnProperty("qn")&&(window.clearTimeout(this.timer),this.jumpTo(this.cue,"q"))},handlePlayerError:function(e){O["b"].errorMsg=e.data},jumpTo:function(e,t){if(-1===e||"q"===t)this.exitFullscreen(),this.ytplayer&&this.ytplayer.pauseVideo();else{if(null===this.ytplayer||"function"!==typeof this.ytplayer.seekTo)return void(O["b"].errorMsg="ytnotready");var s=O["b"].assessInfo.videocues[e],n=0;if("v"===t){if(e>0){var i=O["b"].assessInfo.videocues[e-1];n=i.hasOwnProperty("followuptime")?i.followuptime:i.time}}else"f"===t&&(n=s.time);this.ytplayer.seekTo(n,!0),this.ytplayer.playVideo()}this.cue=e,this.toshow=t}},mounted:function(){var e=this;if(window.YT)this.createPlayer();else{window.onYouTubePlayerAPIReady=function(){e.createPlayer()};var t=document.createElement("script");t.src="https://www.youtube.com/player_api",document.head.appendChild(t)}},created:function(){""!==O["b"].assessInfo.intro&&(this.cue=-1,this.toshow="i")}};L.render=l;t["default"]=L},3158:function(e,t,s){},"408a":function(e,t,s){var n=s("c6b6");e.exports=function(e){if("number"!=typeof e&&"Number"!=n(e))throw TypeError("Incorrect invocation");return+e}},"46e9":function(e,t,s){},"59cf":function(e,t,s){},7513:function(e,t,s){"use strict";s("59cf")},"8f61":function(e,t,s){"use strict";s("3158")},"911c":function(e,t,s){"use strict";s("b4cd")},a0f9:function(e,t,s){"use strict";s("1dcf")},a9e3:function(e,t,s){"use strict";var n=s("83ab"),i=s("da84"),o=s("94ca"),r=s("6eeb"),l=s("5135"),c=s("c6b6"),u=s("7156"),a=s("c04e"),h=s("d039"),p=s("7c73"),b=s("241c").f,f=s("06cf").f,d=s("9bf2").f,v=s("58a8").trim,O="Number",w=i[O],j=w.prototype,m=c(p(j))==O,y=function(e){var t,s,n,i,o,r,l,c,u=a(e,!1);if("string"==typeof u&&u.length>2)if(u=v(u),t=u.charCodeAt(0),43===t||45===t){if(s=u.charCodeAt(2),88===s||120===s)return NaN}else if(48===t){switch(u.charCodeAt(1)){case 66:case 98:n=2,i=49;break;case 79:case 111:n=8,i=55;break;default:return+u}for(o=u.slice(2),r=o.length,l=0;l<r;l++)if(c=o.charCodeAt(l),c<48||c>i)return NaN;return parseInt(o,n)}return+u};if(o(O,!w(" 0o1")||!w("0b1")||w("+0x1"))){for(var q,g=function(e){var t=arguments.length<1?0:e,s=this;return s instanceof g&&(m?h((function(){j.valueOf.call(s)})):c(s)!=O)?u(new w(y(t)),s,g):y(t)},I=n?b(w):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),k=0;I.length>k;k++)l(w,q=I[k])&&!l(g,q)&&d(g,q,f(w,q));g.prototype=j,j.constructor=g,r(i,O,g)}},b4cd:function(e,t,s){},b680:function(e,t,s){"use strict";var n=s("23e7"),i=s("a691"),o=s("408a"),r=s("1148"),l=s("d039"),c=1..toFixed,u=Math.floor,a=function(e,t,s){return 0===t?s:t%2===1?a(e,t-1,s*e):a(e*e,t/2,s)},h=function(e){var t=0,s=e;while(s>=4096)t+=12,s/=4096;while(s>=2)t+=1,s/=2;return t},p=function(e,t,s){var n=-1,i=s;while(++n<6)i+=t*e[n],e[n]=i%1e7,i=u(i/1e7)},b=function(e,t){var s=6,n=0;while(--s>=0)n+=e[s],e[s]=u(n/t),n=n%t*1e7},f=function(e){var t=6,s="";while(--t>=0)if(""!==s||0===t||0!==e[t]){var n=String(e[t]);s=""===s?n:s+r.call("0",7-n.length)+n}return s},d=c&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!l((function(){c.call({})}));n({target:"Number",proto:!0,forced:d},{toFixed:function(e){var t,s,n,l,c=o(this),u=i(e),d=[0,0,0,0,0,0],v="",O="0";if(u<0||u>20)throw RangeError("Incorrect fraction digits");if(c!=c)return"NaN";if(c<=-1e21||c>=1e21)return String(c);if(c<0&&(v="-",c=-c),c>1e-21)if(t=h(c*a(2,69,1))-69,s=t<0?c*a(2,-t,1):c/a(2,t,1),s*=4503599627370496,t=52-t,t>0){p(d,0,s),n=u;while(n>=7)p(d,1e7,0),n-=7;p(d,a(10,n,1),0),n=t-1;while(n>=23)b(d,1<<23),n-=23;b(d,1<<n),p(d,1,1),b(d,2),O=f(d)}else p(d,0,s),p(d,1<<-t,0),O=f(d)+r.call("0",u);return u>0?(l=O.length,O=v+(l<=u?"0."+r.call("0",u-l)+O:O.slice(0,l-u)+"."+O.slice(l-u))):O=v+O,O}})},dce7:function(e,t,s){"use strict";s("46e9")}}]);
//# sourceMappingURL=special.js.map