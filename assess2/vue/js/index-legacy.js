System.register(["./i18n-legacy.js?v=1xeLgN-d"],function(e,t){"use strict";var s,n,i,a,o,r,l,u,c,d,p,h,m,f,w,g,y,b,v,_,q,k,I,x,$,T,P,A,O,S,D,E,C,Q,M,L,j,R,N,V,F,G,B,H,U,W,z,K,J;return{setters:[e=>{s=e.s,n=e.d,i=e.u,a=e.a,o=e.c,r=e.p,l=e.r,u=e.w,c=e.h,d=e.n,p=e.b,h=e.i,m=e._,f=e.I,w=e.e,g=e.F,y=e.f,b=e.g,v=e.o,_=e.j,q=e.k,k=e.l,I=e.m,x=e.t,$=e.q,T=e.v,P=e.x,A=e.y,O=e.P,S=e.z,D=e.A,E=e.B,C=e.C,Q=e.T,M=e.D,L=e.E,j=e.G,R=e.S,N=e.M,V=e.H,F=e.J,G=e.K,B=e.L,H=e.N,U=e.O,W=e.Q,z=e.R,K=e.U,J=e.V}],execute:function(){
/*!
			 * vue-router v4.6.4
			 * (c) 2025 Eduardo San Martin Morote
			 * @license MIT
			 */
const Y="undefined"!=typeof document;function X(e){return"object"==typeof e||"displayName"in e||"props"in e||"__vccOpts"in e}const Z=Object.assign;function ee(e,t){const s={};for(const n in t){const i=t[n];s[n]=se(i)?i.map(e):e(i)}return s}const te=()=>{},se=Array.isArray;function ne(e,t){const s={};for(const n in e)s[n]=n in t?t[n]:e[n];return s}const ie=/#/g,ae=/&/g,oe=/\//g,re=/=/g,le=/\?/g,ue=/\+/g,ce=/%5B/g,de=/%5D/g,pe=/%5E/g,he=/%60/g,me=/%7B/g,fe=/%7C/g,we=/%7D/g,ge=/%20/g;function ye(e){return null==e?"":encodeURI(""+e).replace(fe,"|").replace(ce,"[").replace(de,"]")}function be(e){return ye(e).replace(ue,"%2B").replace(ge,"+").replace(ie,"%23").replace(ae,"%26").replace(he,"`").replace(me,"{").replace(we,"}").replace(pe,"^")}function ve(e){return be(e).replace(re,"%3D")}function _e(e){return function(e){return ye(e).replace(ie,"%23").replace(le,"%3F")}(e).replace(oe,"%2F")}function qe(e){if(null==e)return null;try{return decodeURIComponent(""+e)}catch(t){}return""+e}const ke=/\/$/;function Ie(e,t,s="/"){let n,i={},a="",o="";const r=t.indexOf("#");let l=t.indexOf("?");return l=r>=0&&l>r?-1:l,l>=0&&(n=t.slice(0,l),a=t.slice(l,r>0?r:t.length),i=e(a.slice(1))),r>=0&&(n=n||t.slice(0,r),o=t.slice(r,t.length)),n=function(e,t){if(e.startsWith("/"))return e;if(!e)return t;const s=t.split("/"),n=e.split("/"),i=n[n.length-1];".."!==i&&"."!==i||n.push("");let a,o,r=s.length-1;for(a=0;a<n.length;a++)if(o=n[a],"."!==o){if(".."!==o)break;r>1&&r--}return s.slice(0,r).join("/")+"/"+n.slice(a).join("/")}(null!=n?n:t,s),{fullPath:n+a+o,path:n,query:i,hash:qe(o)}}function xe(e,t){return t&&e.toLowerCase().startsWith(t.toLowerCase())?e.slice(t.length)||"/":e}function $e(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function Te(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var s in e)if(!Pe(e[s],t[s]))return!1;return!0}function Pe(e,t){return se(e)?Ae(e,t):se(t)?Ae(t,e):e?.valueOf()===t?.valueOf()}function Ae(e,t){return se(t)?e.length===t.length&&e.every((e,s)=>e===t[s]):1===e.length&&e[0]===t}const Oe={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let Se=function(e){return e.pop="pop",e.push="push",e}({}),De=function(e){return e.back="back",e.forward="forward",e.unknown="",e}({});function Ee(e){if(!e)if(Y){const t=document.querySelector("base");e=(e=t&&t.getAttribute("href")||"/").replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return"/"!==e[0]&&"#"!==e[0]&&(e="/"+e),e.replace(ke,"")}const Ce=/^[^#]+#/;function Qe(e,t){return e.replace(Ce,"#")+t}const Me=()=>({left:window.scrollX,top:window.scrollY});function Le(e){let t;if("el"in e){const s=e.el,n="string"==typeof s&&s.startsWith("#"),i="string"==typeof s?n?document.getElementById(s.slice(1)):document.querySelector(s):s;if(!i)return;t=function(e,t){const s=document.documentElement.getBoundingClientRect(),n=e.getBoundingClientRect();return{behavior:t.behavior,left:n.left-s.left-(t.left||0),top:n.top-s.top-(t.top||0)}}(i,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(null!=t.left?t.left:window.scrollX,null!=t.top?t.top:window.scrollY)}function je(e,t){return(history.state?history.state.position-t:-1)+e}const Re=new Map;function Ne(e){return"string"==typeof e||"symbol"==typeof e}let Ve=function(e){return e[e.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",e[e.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",e[e.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",e[e.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",e[e.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",e}({});const Fe=Symbol("");function Ge(e,t){return Z(new Error,{type:e,[Fe]:!0},t)}function Be(e,t){return e instanceof Error&&Fe in e&&(null==t||!!(e.type&t))}function He(e){const t={};if(""===e||"?"===e)return t;const s=("?"===e[0]?e.slice(1):e).split("&");for(let n=0;n<s.length;++n){const e=s[n].replace(ue," "),i=e.indexOf("="),a=qe(i<0?e:e.slice(0,i)),o=i<0?null:qe(e.slice(i+1));if(a in t){let e=t[a];se(e)||(e=t[a]=[e]),e.push(o)}else t[a]=o}return t}function Ue(e){let t="";for(let s in e){const n=e[s];s=ve(s),null!=n?(se(n)?n.map(e=>e&&be(e)):[n&&be(n)]).forEach(e=>{void 0!==e&&(t+=(t.length?"&":"")+s,null!=e&&(t+="="+e))}):void 0!==n&&(t+=(t.length?"&":"")+s)}return t}function We(e){const t={};for(const s in e){const n=e[s];void 0!==n&&(t[s]=se(n)?n.map(e=>null==e?null:""+e):null==n?n:""+n)}return t}Ve.MATCHER_NOT_FOUND,Ve.NAVIGATION_GUARD_REDIRECT,Ve.NAVIGATION_ABORTED,Ve.NAVIGATION_CANCELLED,Ve.NAVIGATION_DUPLICATED;const ze=Symbol(""),Ke=Symbol(""),Je=Symbol(""),Ye=Symbol(""),Xe=Symbol("");function Ze(){let e=[];return{add:function(t){return e.push(t),()=>{const s=e.indexOf(t);s>-1&&e.splice(s,1)}},list:()=>e.slice(),reset:function(){e=[]}}}function et(e,t,s,n,i,a=e=>e()){const o=n&&(n.enterCallbacks[i]=n.enterCallbacks[i]||[]);return()=>new Promise((r,l)=>{const u=e=>{var a;!1===e?l(Ge(Ve.NAVIGATION_ABORTED,{from:s,to:t})):e instanceof Error?l(e):"string"==typeof(a=e)||a&&"object"==typeof a?l(Ge(Ve.NAVIGATION_GUARD_REDIRECT,{from:t,to:e})):(o&&n.enterCallbacks[i]===o&&"function"==typeof e&&o.push(e),r())},c=a(()=>e.call(n&&n.instances[i],t,s,u));let d=Promise.resolve(c);e.length<3&&(d=d.then(u)),d.catch(e=>l(e))})}function tt(e,t,s,n,i=e=>e()){const a=[];for(const o of e)for(const e in o.components){let r=o.components[e];if("beforeRouteEnter"===t||o.instances[e])if(X(r)){const l=(r.__vccOpts||r)[t];l&&a.push(et(l,s,n,o,e,i))}else{let l=r();a.push(()=>l.then(a=>{if(!a)throw new Error(`Couldn't resolve component "${e}" at "${o.path}"`);const r=(l=a).__esModule||"Module"===l[Symbol.toStringTag]||l.default&&X(l.default)?a.default:a;var l;o.mods[e]=a,o.components[e]=r;const u=(r.__vccOpts||r)[t];return u&&et(u,s,n,o,e,i)()}))}}return a}function st(e,t){const{pathname:s,search:n,hash:i}=t,a=e.indexOf("#");if(a>-1){let t=i.includes(e.slice(a))?e.slice(a).length:1,s=i.slice(t);return"/"!==s[0]&&(s="/"+s),xe(s,"")}return xe(s,e)+n+i}function nt(e,t,s,n=!1,i=!1){return{back:e,current:t,forward:s,replaced:n,position:window.history.length,scroll:i?Me():null}}function it(e){const{history:t,location:s}=window,n={value:st(e,s)},i={value:t.state};function a(n,a,o){const r=e.indexOf("#"),l=r>-1?(s.host&&document.querySelector("base")?e:e.slice(r))+n:location.protocol+"//"+location.host+e+n;try{t[o?"replaceState":"pushState"](a,"",l),i.value=a}catch(u){console.error(u),s[o?"replace":"assign"](l)}}return i.value||a(n.value,{back:null,current:n.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0),{location:n,state:i,push:function(e,s){const o=Z({},i.value,t.state,{forward:e,scroll:Me()});a(o.current,o,!0),a(e,Z({},nt(n.value,e,null),{position:o.position+1},s),!1),n.value=e},replace:function(e,s){a(e,Z({},t.state,nt(i.value.back,e,i.value.forward,!0),s,{position:i.value.position}),!0),n.value=e}}}function at(e){const t=it(e=Ee(e)),s=function(e,t,s,n){let i=[],a=[],o=null;const r=({state:a})=>{const r=st(e,location),l=s.value,u=t.value;let c=0;if(a){if(s.value=r,t.value=a,o&&o===l)return void(o=null);c=u?a.position-u.position:0}else n(r);i.forEach(e=>{e(s.value,l,{delta:c,type:Se.pop,direction:c?c>0?De.forward:De.back:De.unknown})})};function l(){if("hidden"===document.visibilityState){const{history:e}=window;if(!e.state)return;e.replaceState(Z({},e.state,{scroll:Me()}),"")}}return window.addEventListener("popstate",r),window.addEventListener("pagehide",l),document.addEventListener("visibilitychange",l),{pauseListeners:function(){o=s.value},listen:function(e){i.push(e);const t=()=>{const t=i.indexOf(e);t>-1&&i.splice(t,1)};return a.push(t),t},destroy:function(){for(const e of a)e();a=[],window.removeEventListener("popstate",r),window.removeEventListener("pagehide",l),document.removeEventListener("visibilitychange",l)}}}(e,t.state,t.location,t.replace),n=Z({location:"",base:e,go:function(e,t=!0){t||s.pauseListeners(),history.go(e)},createHref:Qe.bind(null,e)},t,s);return Object.defineProperty(n,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(n,"state",{enumerable:!0,get:()=>t.state.value}),n}let ot=function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.Group=2]="Group",e}({});var rt=function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.ParamRegExp=2]="ParamRegExp",e[e.ParamRegExpEnd=3]="ParamRegExpEnd",e[e.EscapeNext=4]="EscapeNext",e}(rt||{});const lt={type:ot.Static,value:""},ut=/[a-zA-Z0-9_]/,ct="[^/]+?",dt={sensitive:!1,strict:!1,start:!0,end:!0};var pt=function(e){return e[e._multiplier=10]="_multiplier",e[e.Root=90]="Root",e[e.Segment=40]="Segment",e[e.SubSegment=30]="SubSegment",e[e.Static=40]="Static",e[e.Dynamic=20]="Dynamic",e[e.BonusCustomRegExp=10]="BonusCustomRegExp",e[e.BonusWildcard=-50]="BonusWildcard",e[e.BonusRepeatable=-20]="BonusRepeatable",e[e.BonusOptional=-8]="BonusOptional",e[e.BonusStrict=.7000000000000001]="BonusStrict",e[e.BonusCaseSensitive=.25]="BonusCaseSensitive",e}(pt||{});const ht=/[.+*?^${}()[\]/\\]/g;function mt(e,t){let s=0;for(;s<e.length&&s<t.length;){const n=t[s]-e[s];if(n)return n;s++}return e.length<t.length?1===e.length&&e[0]===pt.Static+pt.Segment?-1:1:e.length>t.length?1===t.length&&t[0]===pt.Static+pt.Segment?1:-1:0}function ft(e,t){let s=0;const n=e.score,i=t.score;for(;s<n.length&&s<i.length;){const e=mt(n[s],i[s]);if(e)return e;s++}if(1===Math.abs(i.length-n.length)){if(wt(n))return 1;if(wt(i))return-1}return i.length-n.length}function wt(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const gt={strict:!1,end:!0,sensitive:!1};function yt(e,t,s){const n=function(e,t){const s=Z({},dt,t),n=[];let i=s.start?"^":"";const a=[];for(const r of e){const e=r.length?[]:[pt.Root];s.strict&&!r.length&&(i+="/");for(let t=0;t<r.length;t++){const n=r[t];let o=pt.Segment+(s.sensitive?pt.BonusCaseSensitive:0);if(n.type===ot.Static)t||(i+="/"),i+=n.value.replace(ht,"\\$&"),o+=pt.Static;else if(n.type===ot.Param){const{value:e,repeatable:s,optional:l,regexp:u}=n;a.push({name:e,repeatable:s,optional:l});const c=u||ct;c!==ct&&(o+=pt.BonusCustomRegExp);let d=s?`((?:${c})(?:/(?:${c}))*)`:`(${c})`;t||(d=l&&r.length<2?`(?:/${d})`:"/"+d),l&&(d+="?"),i+=d,o+=pt.Dynamic,l&&(o+=pt.BonusOptional),s&&(o+=pt.BonusRepeatable),".*"===c&&(o+=pt.BonusWildcard)}e.push(o)}n.push(e)}if(s.strict&&s.end){const e=n.length-1;n[e][n[e].length-1]+=pt.BonusStrict}s.strict||(i+="/?"),s.end?i+="$":s.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const o=new RegExp(i,s.sensitive?"":"i");return{re:o,score:n,keys:a,parse:function(e){const t=e.match(o),s={};if(!t)return null;for(let n=1;n<t.length;n++){const e=t[n]||"",i=a[n-1];s[i.name]=e&&i.repeatable?e.split("/"):e}return s},stringify:function(t){let s="",n=!1;for(const i of e){n&&s.endsWith("/")||(s+="/"),n=!1;for(const e of i)if(e.type===ot.Static)s+=e.value;else if(e.type===ot.Param){const{value:a,repeatable:o,optional:r}=e,l=a in t?t[a]:"";if(se(l)&&!o)throw new Error(`Provided param "${a}" is an array but it is not repeatable (* or + modifiers)`);const u=se(l)?l.join("/"):l;if(!u){if(!r)throw new Error(`Missing required param "${a}"`);i.length<2&&(s.endsWith("/")?s=s.slice(0,-1):n=!0)}s+=u}}return s||"/"}}}(function(e){if(!e)return[[]];if("/"===e)return[[lt]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(e){throw new Error(`ERR (${s})/"${u}": ${e}`)}let s=rt.Static,n=s;const i=[];let a;function o(){a&&i.push(a),a=[]}let r,l=0,u="",c="";function d(){u&&(s===rt.Static?a.push({type:ot.Static,value:u}):s===rt.Param||s===rt.ParamRegExp||s===rt.ParamRegExpEnd?(a.length>1&&("*"===r||"+"===r)&&t(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),a.push({type:ot.Param,value:u,regexp:c,repeatable:"*"===r||"+"===r,optional:"*"===r||"?"===r})):t("Invalid state to consume buffer"),u="")}function p(){u+=r}for(;l<e.length;)if(r=e[l++],"\\"!==r||s===rt.ParamRegExp)switch(s){case rt.Static:"/"===r?(u&&d(),o()):":"===r?(d(),s=rt.Param):p();break;case rt.EscapeNext:p(),s=n;break;case rt.Param:"("===r?s=rt.ParamRegExp:ut.test(r)?p():(d(),s=rt.Static,"*"!==r&&"?"!==r&&"+"!==r&&l--);break;case rt.ParamRegExp:")"===r?"\\"==c[c.length-1]?c=c.slice(0,-1)+r:s=rt.ParamRegExpEnd:c+=r;break;case rt.ParamRegExpEnd:d(),s=rt.Static,"*"!==r&&"?"!==r&&"+"!==r&&l--,c="";break;default:t("Unknown state")}else n=s,s=rt.EscapeNext;return s===rt.ParamRegExp&&t(`Unfinished custom RegExp for param "${u}"`),d(),o(),i}(e.path),s),i=Z(n,{record:e,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf==!t.record.aliasOf&&t.children.push(i),i}function bt(e,t){const s=[],n=new Map;function i(e,s,n){const r=!n,l=_t(e);l.aliasOf=n&&n.record;const u=ne(t,e),c=[l];if("alias"in e){const t="string"==typeof e.alias?[e.alias]:e.alias;for(const e of t)c.push(_t(Z({},l,{components:n?n.record.components:l.components,path:e,aliasOf:n?n.record:l})))}let d,p;for(const t of c){const{path:c}=t;if(s&&"/"!==c[0]){const e=s.record.path,n="/"===e[e.length-1]?"":"/";t.path=s.record.path+(c&&n+c)}if(d=yt(t,s,u),n?n.alias.push(d):(p=p||d,p!==d&&p.alias.push(d),r&&e.name&&!kt(d)&&a(e.name)),xt(d)&&o(d),l.children){const e=l.children;for(let t=0;t<e.length;t++)i(e[t],d,n&&n.children[t])}n=n||d}return p?()=>{a(p)}:te}function a(e){if(Ne(e)){const t=n.get(e);t&&(n.delete(e),s.splice(s.indexOf(t),1),t.children.forEach(a),t.alias.forEach(a))}else{const t=s.indexOf(e);t>-1&&(s.splice(t,1),e.record.name&&n.delete(e.record.name),e.children.forEach(a),e.alias.forEach(a))}}function o(e){const t=function(e,t){let s=0,n=t.length;for(;s!==n;){const i=s+n>>1;ft(e,t[i])<0?n=i:s=i+1}const i=function(e){let t=e;for(;t=t.parent;)if(xt(t)&&0===ft(e,t))return t}(e);return i&&(n=t.lastIndexOf(i,n-1)),n}(e,s);s.splice(t,0,e),e.record.name&&!kt(e)&&n.set(e.record.name,e)}return t=ne(gt,t),e.forEach(e=>i(e)),{addRoute:i,resolve:function(e,t){let i,a,o,r={};if("name"in e&&e.name){if(i=n.get(e.name),!i)throw Ge(Ve.MATCHER_NOT_FOUND,{location:e});o=i.record.name,r=Z(vt(t.params,i.keys.filter(e=>!e.optional).concat(i.parent?i.parent.keys.filter(e=>e.optional):[]).map(e=>e.name)),e.params&&vt(e.params,i.keys.map(e=>e.name))),a=i.stringify(r)}else if(null!=e.path)a=e.path,i=s.find(e=>e.re.test(a)),i&&(r=i.parse(a),o=i.record.name);else{if(i=t.name?n.get(t.name):s.find(e=>e.re.test(t.path)),!i)throw Ge(Ve.MATCHER_NOT_FOUND,{location:e,currentLocation:t});o=i.record.name,r=Z({},t.params,e.params),a=i.stringify(r)}const l=[];let u=i;for(;u;)l.unshift(u.record),u=u.parent;return{name:o,path:a,params:r,matched:l,meta:It(l)}},removeRoute:a,clearRoutes:function(){s.length=0,n.clear()},getRoutes:function(){return s},getRecordMatcher:function(e){return n.get(e)}}}function vt(e,t){const s={};for(const n of t)n in e&&(s[n]=e[n]);return s}function _t(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:qt(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function qt(e){const t={},s=e.props||!1;if("component"in e)t.default=s;else for(const n in e.components)t[n]="object"==typeof s?s[n]:s;return t}function kt(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function It(e){return e.reduce((e,t)=>Z(e,t.meta),{})}function xt({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function $t(e){const t=h(Je),s=h(Ye),n=o(()=>{const s=i(e.to);return t.resolve(s)}),a=o(()=>{const{matched:e}=n.value,{length:t}=e,i=e[t-1],a=s.matched;if(!i||!a.length)return-1;const o=a.findIndex($e.bind(null,i));if(o>-1)return o;const r=Pt(e[t-2]);return t>1&&Pt(i)===r&&a[a.length-1].path!==r?a.findIndex($e.bind(null,e[t-2])):o}),r=o(()=>a.value>-1&&function(e,t){for(const s in t){const n=t[s],i=e[s];if("string"==typeof n){if(n!==i)return!1}else if(!se(i)||i.length!==n.length||n.some((e,t)=>e.valueOf()!==i[t].valueOf()))return!1}return!0}(s.params,n.value.params)),l=o(()=>a.value>-1&&a.value===s.matched.length-1&&Te(s.params,n.value.params));return{route:n,href:o(()=>n.value.href),isActive:r,isExactActive:l,navigate:function(s={}){if(function(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey||e.defaultPrevented||void 0!==e.button&&0!==e.button)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}(s)){const s=t[i(e.replace)?"replace":"push"](i(e.to)).catch(te);return e.viewTransition&&"undefined"!=typeof document&&"startViewTransition"in document&&document.startViewTransition(()=>s),s}return Promise.resolve()}}}const Tt=n({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:$t,setup(e,{slots:t}){const s=p($t(e)),{options:n}=h(Je),i=o(()=>({[At(e.activeClass,n.linkActiveClass,"router-link-active")]:s.isActive,[At(e.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:s.isExactActive}));return()=>{const n=t.default&&(1===(a=t.default(s)).length?a[0]:a);var a;return e.custom?n:c("a",{"aria-current":s.isExactActive?e.ariaCurrentValue:null,href:s.href,onClick:s.navigate,class:i.value},n)}}});function Pt(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const At=(e,t,s)=>null!=e?e:null!=t?t:s;function Ot(e,t){if(!e)return null;const s=e(t);return 1===s.length?s[0]:s}const St=n({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:s}){const n=h(Xe),a=o(()=>e.route||n.value),d=h(Ke,0),p=o(()=>{let e=i(d);const{matched:t}=a.value;let s;for(;(s=t[e])&&!s.components;)e++;return e}),m=o(()=>a.value.matched[p.value]);r(Ke,o(()=>p.value+1)),r(ze,m),r(Xe,a);const f=l();return u(()=>[f.value,m.value,e.name],([e,t,s],[n,i,a])=>{t&&(t.instances[s]=e,i&&i!==t&&e&&e===n&&(t.leaveGuards.size||(t.leaveGuards=i.leaveGuards),t.updateGuards.size||(t.updateGuards=i.updateGuards))),!e||!t||i&&$e(t,i)&&n||(t.enterCallbacks[s]||[]).forEach(t=>t(e))},{flush:"post"}),()=>{const n=a.value,i=e.name,o=m.value,r=o&&o.components[i];if(!r)return Ot(s.default,{Component:r,route:n});const l=o.props[i],u=l?!0===l?n.params:"function"==typeof l?l(n):l:null,d=c(r,Z({},u,t,{onVnodeUnmounted:e=>{e.component.isUnmounted&&(o.instances[i]=null)},ref:f}));return Ot(s.default,{Component:d,route:n})||d}}}),Dt={class:"settings-list"},Et={key:0,class:"noticetext"},Ct={key:1,class:"small subdued"},Qt={key:2,class:"small subdued"},Mt={key:3,class:"small subdued"},Lt={key:4,class:"small subdued"},jt=m({name:"SettingsList",components:{Icons:f},data:function(){return{now:new Date}},computed:{settingRows(){var e=[],t=qo.assessInfo;return t.in_practice?e.push({icon:"alert",str:this.$t("setlist-practice")}):(e.push(this.getPointsObj()),t.enddate<2e9&&e.push(this.getDateObj()),"by_assessment"===t.submitby&&t.allowed_attempts>1&&e.push(this.getAttemptsObj()),t.timelimit>0&&e.push(this.getTimelimitObj())),e}},methods:{getPointsObj(){var e=qo.assessInfo,t={icon:"square-check",str:this.$t("setlist-points_possible",{pts:e.points_possible})};return qo.assessInfo.hasOwnProperty("excused")&&(t.alert=this.$t("setlist-excused")),t},getDateObj(){var e=qo.assessInfo,t=e.enddate_disp,s={icon:"calendar",str:this.$t("setlist-due_at",{date:t})};if(e.hasOwnProperty("original_enddate")){var n=e.original_enddate_disp;if(s.sub=this.$t("setlist-originally_due",{date:n}),"latepass"===e.extended_with.type?s.sub+=" "+this.$t("setlist-latepass_used",{n:e.extended_with.n}):s.sub+=" "+this.$t("setlist-extension"),e.exceptionpenalty>0){const t=(new Date).getTime();1e3*e.original_enddate>t?s.alert2=this.$t("setlist-penalty_after",{p:e.exceptionpenalty,date:e.original_enddate_disp}):s.alert2=this.$t("setlist-penalty",{p:e.exceptionpenalty})}}return e.hasOwnProperty("earlybonusends")&&(s.alert=this.$t("setlist-earlybonus",{p:e.earlybonus[0],date:e.earlybonusends_disp})),e.can_use_latepass>0&&(s.latepass=this.$t("setlist-latepass_needed",{n:e.can_use_latepass,date:e.latepass_extendto_disp}),s.latepass_label=this.$t("closed-use_latepass",{n:e.can_use_latepass})),s},getAttemptsObj(){var e,t,s,n,i=qo.assessInfo,a=i.allowed_attempts-i.prev_attempts.length;let o="";i.hasOwnProperty("attemptext")&&(o=0===i.prev_attempts.length?this.$t("setlist-take",{n:a}):this.$t("setlist-take_more",{n:a}),a=Math.max(0,a-i.attemptext)),t=0===i.prev_attempts.length?this.$t("setlist-take",{n:a}):this.$t("setlist-take_more",{n:a}),i.has_active_attempt?(e=this.$t("setlist-attempt_inprogress"),s=this.$t("setlist-cur_attempt_n_of",{n:i.prev_attempts.length+1,nmax:i.allowed_attempts})):(e=t,s=""),"best"===i.keepscore?s+=this.$t("setlist-keep_highest"):"average"===i.keepscore?s+=this.$t("setlist-keep_average"):"last"===i.keepscore&&(s+=this.$t("setlist-keep_last"));const r=i.prev_attempts.length+1;if(r>i.retake_penalty.n&&i.retake_penalty.penalty>0){const e=i.retake_penalty.penalty*(r-i.retake_penalty.n);n=this.$t("setlist-retake_penalty",{p:e})}return{icon:"retake",str:e,altstr:o,sub:s,alert:n}},getTimelimitObj(){var e=qo.assessInfo,t={icon:"timer"};if(e.has_active_attempt&&e.timelimit_ext&&e.timelimit_ext<0)t.str=this.$t("setlist-timelimit_ext_used",{n:Math.abs(e.timelimit_ext)});else{var s=e.timelimit*e.timelimit_multiplier;e.overtime_grace>0?t.str=this.$t(e.overtime_penalty>0?"setlist.timelimit_wgrace_penalty":"setlist.timelimit_wgrace",{time:this.formatTimeLimit(s),grace:this.formatTimeLimit(e.overtime_grace*e.timelimit_multiplier),penalty:e.overtime_penalty}):t.str=this.$t("setlist-timelimit",{time:this.formatTimeLimit(s)}),1===qo.timelimit_restricted?t.altstr=this.$t("setlist-timelimit_restricted",{due:e.enddate_disp}):2===qo.timelimit_restricted&&(t.altstr=this.$t(e.overtime_penalty>0?"setlist.timelimit_wgrace_restricted_penalty":"setlist.timelimit_wgrace_restricted",{time:this.formatTimeLimit(s),due:e.enddate_disp,penalty:e.overtime_penalty})),e.timelimit_multiplier>1&&(t.sub=this.$t("setlist-timelimit_extend",{time:this.formatTimeLimit(e.timelimit)}))}if(e.has_active_attempt)if(qo.timelimit_expired)qo.timelimit_grace_expired?e.timelimit_ext&&e.timelimit_ext>0&&(t.str=this.$t("setlist-timelimit_ext",{n:e.timelimit_ext})):t.alert=this.$t("setlist-time_grace_expires",{date:e.timelimit_expires_disp,grace:e.timelimit_grace_disp});else{const s=e.timelimit_expires_disp;e.overtime_grace>0&&e.timelimit_grace>e.timelimit_expires?t.alert=this.$t("setlist-time_expires_wgrace",{date:s,grace:e.timelimit_grace_disp}):t.alert=this.$t("setlist-time_expires",{date:s})}else e.timelimit_ext&&e.timelimit_ext>0&&(t.alert=this.$t("setlist-timelimit_ext",{n:e.timelimit_ext}));return t},formatTimeLimit(e){const t=Math.floor(e/3600),s=Math.floor(e/60)-60*t,n=e-60*s-3600*t;let i="";return t>0&&(i+=this.$t("hours",{n:t})),s>0&&(""!==i&&(i+=" "),i+=this.$t("minutes",{n:s})),n>0&&(""!==i&&(i+=" "),i+=this.$t("seconds",{n:n})),i},redeemLatePass(){var e=qo.assessInfo;qo.confirmObj={body:this.$t("closed-latepassn",{n:e.latepasses_avail})+" "+this.$t("setlist-latepass_needed",{n:e.can_use_latepass,date:e.latepass_extendto_disp}),ok:this.$t("closed-use_latepass",{n:e.can_use_latepass}),action:()=>ko.redeemLatePass()}}}},[["render",function(e,t,s,n,i,a){const o=b("icons");return v(),w("div",Dt,[(v(!0),w(g,null,y(a.settingRows,(e,s)=>(v(),w("div",{class:"flexrow",key:s},[_("div",null,[q(o,{name:e.icon,size:"small"},null,8,["name"])]),_("div",null,[_("div",{class:I({strikethrough:!!e.altstr})},x(e.str),3),e.altstr?(v(),w("div",Et,x(e.altstr),1)):k("",!0),e.sub?(v(),w("div",Ct,x(e.sub),1)):k("",!0),e.alert?(v(),w("div",Qt,[q(o,{name:"alert",size:"micro"}),$(" "+x(e.alert),1)])):k("",!0),e.alert2?(v(),w("div",Mt,[q(o,{name:"alert",size:"micro"}),$(" "+x(e.alert2),1)])):k("",!0),e.latepass?(v(),w("div",Lt,[$(x(e.latepass)+" ",1),_("button",{onClick:t[0]||(t[0]=(...e)=>a.redeemLatePass&&a.redeemLatePass(...e)),class:"slim secondary"},x(e.latepass_label),1)])):k("",!0)])]))),128))])}]]),Rt={for:"password"},Nt=["value"],Vt=m({name:"PasswordEntry",props:["modelValue"],methods:{handleInput(e){this.$emit("update:modelValue",e.target.value)},handleEnter(e){e.preventDefault(),e.stopPropagation(),this.$emit("onenter")}}},[["render",function(e,t,s,n,i,a){return v(),w("div",null,[_("label",Rt,x(e.$t("password-label")),1),_("input",{value:s.modelValue,id:"password",name:"password",type:"password",autocomplete:"off",onInput:t[0]||(t[0]=(...e)=>a.handleInput&&a.handleInput(...e)),onKeydown:t[1]||(t[1]=T((...e)=>a.handleEnter&&a.handleEnter(...e),["enter"]))},null,40,Nt)])}]]),Ft={key:0},Gt={key:1},Bt={key:0},Ht={class:"no-margin-top"},Ut=["onClick"],Wt={key:2},zt={key:3},Kt={for:"addtogroup"},Jt={value:"0"},Yt=["value"],Xt=m({name:"GroupEntry",data:function(){return{newMember:0,newGroupMembers:[]}},computed:{groupMax:()=>qo.assessInfo.groupmax,groupMembers(){var e=[];if(!qo.assessInfo.hasOwnProperty("group_members"))return e;for(let t=0;t<qo.assessInfo.group_members.length;t++)e.push({name:qo.assessInfo.group_members[t],new:!1});for(let t=0;t<this.newGroupMembers.length;t++)e.push({name:qo.assessInfo.group_avail[this.newGroupMembers[t]],new:!0,index:t});return e},availableUsers(){var e=[];for(const t in qo.assessInfo.group_avail)-1===this.newGroupMembers.indexOf(t)&&e.push({id:t,name:qo.assessInfo.group_avail[t]});return e},showMax:()=>2===qo.assessInfo.isgroup,canAddMembers(){return!this.canViewAll&&2===qo.assessInfo.isgroup&&this.groupMembers.length<qo.assessInfo.groupmax},isPresetGroups:()=>3===qo.assessInfo.isgroup,canViewAll:()=>qo.assessInfo.can_view_all,teacherNote(){return this.isPresetGroups?this.$t("group-teacher_preset"):this.$t("group-teacher_auto",{n:qo.assessInfo.groupmax})}},methods:{removeMember(e){this.newGroupMembers.splice(e,1),this.handleChange()},addMember(){this.newMember>0&&(this.newGroupMembers.push(this.newMember),this.newMember=0,this.handleChange())},handleChange(){this.$emit("update-new-group",this.newGroupMembers)}}},[["render",function(e,t,s,n,i,a){return v(),w("div",null,[_("div",null,x(e.$t("group-isgroup")),1),a.canViewAll?(v(),w("div",Ft,x(a.teacherNote),1)):a.groupMembers.length>0?(v(),w("div",Gt,[$(x(e.$t("group-members"))+" ",1),a.showMax?(v(),w("span",Bt," ("+x(e.$t("group-max",{n:a.groupMax}))+") ",1)):k("",!0),_("ul",Ht,[(v(!0),w(g,null,y(a.groupMembers,(t,s)=>(v(),w("li",{key:s},[$(x(t.name)+" ",1),t.new?(v(),w("button",{key:0,class:"plain slim subdued",tabindex:"0",onClick:e=>a.removeMember(t.index)},x(e.$t("group-remove")),9,Ut)):k("",!0)]))),128))])])):a.isPresetGroups?(v(),w("div",Wt,x(e.$t("group-needpreset")),1)):k("",!0),a.canAddMembers?(v(),w("div",zt,[_("label",Kt,x(e.$t("group-add")),1),P(_("select",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.newMember=t),id:"addtogroup"},[_("option",Jt,x(e.$t("group-select")),1),(v(!0),w(g,null,y(a.availableUsers,e=>(v(),w("option",{value:e.id,key:e.id},x(e.name),9,Yt))),128))],512),[[A,e.newMember]]),_("button",{class:"slim",onClick:t[1]||(t[1]=(...e)=>a.addMember&&a.addMember(...e))},x(e.$t("group-addbutton")),1)])):k("",!0)])}]]),Zt={class:"pane-body"},es={class:"scorelist med-below"},ts={key:0},ss={key:0,class:"med-left"},ns={key:0},is=["href"],as=m({name:"PreviousAttempts",props:["caption"],computed:{prevAttempts:()=>qo.assessInfo.prev_attempts,totPoss:()=>qo.assessInfo.points_possible,ainfo:()=>qo.assessInfo,showGbLink(){const e=qo.assessInfo.viewingb;return("immediately"===e||"after_take"===e)&&this.prevAttempts.length>0&&!qo.assessInfo.can_view_all},gbUrl(){let e="gbviewassess.php?";return e+="cid="+qo.cid,e+="&aid="+qo.aid,e+="&uid="+qo.uid,e}}},[["render",function(e,t,s,n,i,a){return v(),w("div",Zt,[_("table",es,[_("caption",null,x(s.caption),1),_("thead",null,[_("tr",null,[_("th",null,x(e.$t("prev-date")),1),a.prevAttempts[0].hasOwnProperty("score")?(v(),w("th",ts,x(e.$t("prev-score")),1)):k("",!0)])]),_("tbody",null,[(v(!0),w(g,null,y(a.prevAttempts,(e,t)=>(v(),w("tr",{key:t},[_("td",null,x(e.date),1),e.hasOwnProperty("score")?(v(),w("td",ss,x(Math.round(1e3*e.score/a.totPoss)/10)+"% ",1)):k("",!0)]))),128))])]),a.showGbLink?(v(),w("p",ns,[_("a",{href:a.gbUrl},x(e.$t("prev-viewingb")),9,is)])):k("",!0)])}]]),os={key:0,class:"pane-header"},rs={class:"small subdued"},ls=m({name:"SummaryGbScore",computed:{ainfo:()=>qo.assessInfo,scoreUsed(){return"override"===this.ainfo.scored_attempt.kept?this.$t("summary-use_override"):"best"===this.ainfo.keepscore&&"by_assessment"===this.ainfo.submitby?this.$t("setlist-keep_highest"):"best"===this.ainfo.keepscore&&"by_question"===this.ainfo.submitby?this.$t("setlist-keep_highest_q"):"average"===this.ainfo.keepscore?this.$t("setlist-keep_average"):"last"===this.ainfo.keepscore?this.$t("setlist-keep_last"):""},showGBScore(){return this.ainfo.hasOwnProperty("scored_attempt")&&this.ainfo.scored_attempt.hasOwnProperty("score")&&"none"!==this.ainfo.showscores},gbScore(){return Math.round(1e3*this.ainfo.scored_attempt.score/this.ainfo.points_possible)/10}}},[["render",function(e,t,s,n,i,a){return a.showGBScore?(v(),w("div",os,[_("strong",null,x(e.$t("summary-recordedscore"))+": "+x(a.gbScore)+"%",1),t[0]||(t[0]=_("br",null,null,-1)),_("span",rs,x(a.scoreUsed),1)])):k("",!0)}]]),us={class:"home flexpanes"},cs={style:{"flex-grow":"1"}},ds=["innerHTML"],ps={class:"settings-list"},hs={key:0,class:"flexrow"},ms={key:1,class:"flexrow"},fs={key:0,class:"noticetext"},ws={key:1,class:"noticetext"},gs={key:0},ys={key:1},bs={key:2,class:"noticetext"},vs={key:3},_s={key:4},qs={key:5},ks=["href"],Is=["href"],xs={key:6,class:"noticetext"},$s={key:0},Ts={key:1,class:"pane-body"},Ps=["href"],As=m({name:"Launch",components:{SettingsList:jt,PasswordEntry:Vt,GroupEntry:Xt,SummaryGbScore:ls,PreviousAttempts:as,Icons:f},data:function(){return{password:"",newGroupMembers:[]}},computed:{aInfo:()=>qo.assessInfo,errorMsg(){return null===qo.errorMsg?null:this.$t("error-"+qo.errorMsg)},startLabel(){return this.aInfo.has_active_attempt?this.$t("launch-continue_assess"):"by_assessment"===this.aInfo.submitby&&this.aInfo.prev_attempts.length>0?this.$t("launch-retake_assess"):this.$t("launch-start_assess")},timeLimitExpired(){if(qo.timelimit_expired&&qo.timelimit_grace_expired&&this.aInfo.has_active_attempt){const e=this.aInfo.timelimit_expires_disp;return this.$t("setlist-time_expired",{date:e})}return""},timeLimitExt(){return this.aInfo.timelimit_ext&&this.aInfo.timelimit_ext>0&&this.aInfo.has_active_attempt?this.$t("setlist-timelimit_ext",{n:this.aInfo.timelimit_ext}):""},okToLaunch(){return!(!this.showPreviewAll&&3===this.aInfo.isgroup&&0===this.aInfo.group_members.length||this.aInfo.timelimit>0&&this.aInfo.has_active_attempt&&(qo.timelimit_expired&&"kick_out"===this.aInfo.timelimit_type||qo.timelimit_grace_expired&&"allow_overtime"===this.aInfo.timelimit_type)&&""===this.timeLimitExt)},showPreviewAll(){return qo.assessInfo.can_view_all&&!this.aInfo.view_as_stu},showReset(){return this.aInfo.is_teacher&&!this.aInfo.view_as_stu&&(this.aInfo.has_active_attempt||this.aInfo.prev_attempts.length>0||this.aInfo.has_unsubmitted_scored)},hasExit:()=>window.exiturl&&""!==window.exiturl,canAddWork(){return(!this.aInfo.has_active_attempt||"by_question"===this.aInfo.submitby)&&this.aInfo.showwork_after&&(0===this.aInfo.showwork_cutoff||this.aInfo.showwork_cutoff_in>0)},showTutorLinks(){return this.aInfo.hasOwnProperty("tutor_gblinks")},showGbLink(){return this.aInfo.is_lti&&"immediately"===this.aInfo.viewingb&&this.aInfo.has_active_attempt&&!qo.assessInfo.can_view_all},gbUrl(){let e="gbviewassess.php?";return e+="cid="+qo.cid,e+="&aid="+qo.aid,e+="&uid="+qo.uid,e}},methods:{startAssess(){if(!this.okToLaunch)return;const e=this.aInfo.timelimit;if(this.aInfo.has_password){const e=document.getElementById("password");e&&e.value!==this.password&&(this.password=e.value)}0===e?this.reallyStartAssess():qo.confirmObj={body:"launch-timewarning",ok:"launch-start_assess",action:()=>this.reallyStartAssess()}},teacherPreviewAll(){ko.startAssess(!1,"",[],null,!0)},reallyStartAssess(){const e=this.password;this.password="",ko.startAssess(!1,e,this.newGroupMembers)},endAssess(){ko.endAssess()},doReset(){ko.loadAssessData(null,!0)},updateNewGroup(e){this.newGroupMembers=e},exitAssess(){window.location=window.exiturl}},mounted(){if("livepoll"===this.aInfo.displaymethod){var e=document.createElement("script");e.src="https://"+this.aInfo.livepoll_server+":3000/socket.io/socket.io.js",document.getElementsByTagName("head")[0].appendChild(e)}else if("video_cued"===this.aInfo.displaymethod&&!window.YT){const e=document.createElement("script");e.id="yt_player_api",e.src="https://www.youtube.com/player_api",document.head.appendChild(e)}setTimeout(window.drawPics,50),window.rendermathnode(this.$refs.summary),window.initlinkmarkup(this.$refs.summary)}},[["render",function(e,t,s,n,i,a){const o=b("settings-list"),r=b("icons"),l=b("password-entry"),u=b("group-entry"),c=b("summary-gb-score"),d=b("previous-attempts");return v(),w("div",us,[_("div",cs,[_("h1",null,x(a.aInfo.name),1),_("div",{class:"med-below",innerHTML:a.aInfo.summary,ref:"summary"},null,8,ds),q(o),_("div",ps,[a.aInfo.has_password?(v(),w("div",hs,[_("div",null,[q(r,{name:"lock",size:"small"})]),q(l,{modelValue:e.password,"onUpdate:modelValue":t[0]||(t[0]=t=>e.password=t),onOnenter:a.startAssess},null,8,["modelValue","onOnenter"])])):k("",!0),a.aInfo.isgroup>0?(v(),w("div",ms,[_("div",null,[q(r,{name:"group",size:"small"})]),q(u,{onUpdateNewGroup:a.updateNewGroup},null,8,["onUpdateNewGroup"])])):k("",!0)]),null!==a.errorMsg?(v(),w("p",fs,x(a.errorMsg),1)):k("",!0),""!==a.timeLimitExpired?(v(),w("p",ws,[q(r,{name:"alert"}),$(" "+x(a.timeLimitExpired)+" ",1),t[8]||(t[8]=_("br",null,null,-1)),""!==a.timeLimitExt?(v(),w("span",gs,[q(r,{name:"alert"}),$(" "+x(a.timeLimitExt),1)])):(v(),w("span",ys,[_("button",{type:"button",class:"primary",onClick:t[1]||(t[1]=(...e)=>a.endAssess&&a.endAssess(...e))},x(e.$t("closed-submit_now")),1)]))])):""!==a.timeLimitExt?(v(),w("p",bs,[q(r,{name:"alert"}),$(" "+x(a.timeLimitExt),1)])):k("",!0),a.canAddWork?(v(),w("p",vs,[$(x(e.$t("work-add_prev")),1),t[9]||(t[9]=_("br",null,null,-1)),_("button",{type:"button",class:"secondary",onClick:t[2]||(t[2]=t=>e.$router.push("/showwork"))},x(e.$t("work-add")),1)])):k("",!0),a.showReset?(v(),w("p",_s,[$(x(e.$t("launch-resetmsg"))+" ",1),t[10]||(t[10]=_("br",null,null,-1)),_("button",{type:"button",class:"secondary",onClick:t[3]||(t[3]=(...e)=>a.doReset&&a.doReset(...e))},x(e.$t("launch-doreset")),1)])):k("",!0),a.showTutorLinks?(v(),w("p",qs,[$(x(e.$t("launch-gblinks"))+": ",1),_("a",{href:a.aInfo.tutor_gblinks[0],target:"_blank"},x(e.$t("launch-scorelist")),9,ks),t[11]||(t[11]=$("   ",-1)),_("a",{href:a.aInfo.tutor_gblinks[1],target:"_blank"},x(e.$t("launch-itemanalysis")),9,Is)])):k("",!0),a.aInfo.view_as_stu?(v(),w("p",xs,x(e.$t("launch-view_as_stu",{name:a.aInfo.stu_fullname})),1)):k("",!0),_("p",null,[a.okToLaunch?(v(),w("button",{key:0,type:"button",class:"primary",onClick:t[4]||(t[4]=(...e)=>a.startAssess&&a.startAssess(...e))},x(a.startLabel),1)):k("",!0),_("input",{type:"submit",style:{display:"none"},onClick:t[5]||(t[5]=(...e)=>a.startAssess&&a.startAssess(...e)),value:"Submit"}),a.showPreviewAll?(v(),w("button",{key:1,class:"secondary",onClick:t[6]||(t[6]=(...e)=>a.teacherPreviewAll&&a.teacherPreviewAll(...e))},x(e.$t("closed-teacher_previewall_button")),1)):k("",!0),a.hasExit?(v(),w("button",{key:2,type:"button",class:"secondary",onClick:t[7]||(t[7]=(...e)=>a.exitAssess&&a.exitAssess(...e))},x(e.$t("closed-exit")),1)):k("",!0)])]),a.aInfo.hasOwnProperty("prev_attempts")&&a.aInfo.prev_attempts.length>0?(v(),w("div",$s,[q(c),q(d,{caption:e.$t("prev-previous_attempts")},null,8,["caption"])])):a.showGbLink?(v(),w("div",Ts,[_("p",null,[_("a",{href:a.gbUrl},x(e.$t("prev-viewingb")),9,Ps)])])):k("",!0)])}]]),Os={class:"home flexpanes"},Ss={style:{"flex-grow":"1"}},Ds={key:0},Es=["href"],Cs=["href"],Qs={key:1},Ms={key:2},Ls={key:3},js={key:4},Rs={key:0},Ns={key:5},Vs={key:6},Fs={key:0},Gs={key:7},Bs={key:0},Hs={key:8},Us={key:9},Ws={key:0},zs=m({name:"Closed",components:{Icons:f,PreviousAttempts:as,SummaryGbScore:ls},computed:{settings:()=>qo.assessInfo,closedMessage(){return"hidden"===this.settings.available?this.$t("closed-hidden"):"notyet"===this.settings.available?this.$t("closed-notyet",{sd:this.settings.startdate_disp,ed:this.settings.enddate_disp}):"practice"===this.settings.available||"pastdue"===this.settings.available?this.$t("closed-pastdue",{ed:this.settings.enddate_disp}):"needprereq"===this.settings.available?this.$t("closed-needprereq")+" "+this.$t("closed-prereqreq",{score:this.settings.reqscorevalue,name:this.settings.reqscorename}):this.settings.hasOwnProperty("pasttime")?this.$t("closed-pasttime"):!1===this.settings.has_active_attempt&&!1===this.settings.can_retake?this.$t("closed-no_attempts"):""},hasActive(){return"by_assessment"===this.settings.submitby&&("yes"===this.settings.available&&this.settings.has_active_attempt||"yes"!==this.settings.available&&this.settings.has_unsubmitted_scored)},hasActiveMsg(){return this.settings.hasOwnProperty("timelimit_expiresin")&&1e3*this.settings.timelimit_expiresin<0?this.$t("closed-unsubmitted_overtime"):this.$t("closed-unsubmitted_pastdue")},showLatePassOffer(){return"needprereq"!==this.settings.available&&!this.settings.hasOwnProperty("pasttime")},latepassExtendMsg(){return this.$t("closed-latepass_needed",{n:this.settings.can_use_latepass,date:this.settings.latepass_extendto_disp})},primaryAction(){return this.settings.can_use_latepass>0&&this.showLatePassOffer?"latepass":"practice"===this.settings.available?"practice":window.exiturl&&""!==window.exiturl?"exit":""},primaryButton(){return"latepass"===this.primaryAction?this.$t("closed-use_latepass",{n:this.settings.can_use_latepass}):"practice"===this.primaryAction?this.$t("closed-do_practice"):"exit"===this.primaryAction?this.$t("closed-exit"):""},secondaryAction(){return"practice"!==this.primaryAction&&"practice"===this.settings.available?"practice":window.exiturl&&""!==window.exiturl&&"exit"!==this.primaryAction?"exit":""},secondaryButton(){return"practice"===this.secondaryAction?this.$t("closed-do_practice"):"exit"===this.secondaryAction?this.$t("closed-exit"):""},canViewScored(){return!this.canViewAll&&1===this.settings.can_viewingb&&this.settings.prev_attempts.length>0&&("practice"===this.settings.available||"pastdue"===this.settings.available)},canViewAll:()=>qo.assessInfo.can_view_all,showReset:()=>qo.assessInfo.hasOwnProperty("show_reset")||qo.assessInfo.is_teacher&&!qo.assessInfo.view_as_stu&&(qo.assessInfo.has_active_attempt||qo.assessInfo.prev_attempts.length>0||qo.assessInfo.has_unsubmitted_scored),canAddWork:()=>qo.assessInfo.showwork_after&&!qo.showwork_expired&&(!qo.assessInfo.has_active_attempt||"by_question"===qo.assessInfo.submitby),showTutorLinks:()=>qo.assessInfo.hasOwnProperty("tutor_gblinks")},methods:{handleViewScored(){0===this.settings.can_use_latepass?window.location=qo.APIbase+"gbviewassess.php?cid="+qo.cid+"&aid="+qo.aid+"&uid="+qo.uid:qo.confirmObj={body:"closed-confirm",action:()=>{window.location=qo.APIbase+"gbviewassess.php?cid="+qo.cid+"&aid="+qo.aid+"&uid="+qo.uid}}},handlePrimary(){"latepass"===this.primaryAction?ko.redeemLatePass():"practice"===this.primaryAction?ko.startAssess(!0,"",[]):"exit"===this.primaryAction&&(window.location=window.exiturl)},handleSecondary(){"practice"===this.secondaryAction&&0===this.settings.can_use_latepass?ko.startAssess(!0,"",[]):"practice"===this.secondaryAction?qo.confirmObj={body:"closed-confirm",action:()=>{ko.startAssess(!0,"",[])}}:"exit"===this.secondaryAction&&(window.location=window.exiturl)},teacherPreview(){ko.startAssess(!1,"",[])},teacherPreviewAll(){ko.startAssess(!1,"",[],null,!0)},doReset(){ko.loadAssessData(null,!0)},endAssess(){ko.endAssess()}}},[["render",function(e,t,s,n,i,a){const o=b("icons"),r=b("summary-gb-score"),l=b("previous-attempts");return v(),w("div",Os,[_("div",Ss,[_("h1",null,x(a.settings.name),1),_("p",null,x(a.closedMessage),1),a.showTutorLinks?(v(),w("p",Ds,[$(x(e.$t("launch-gblinks"))+": ",1),_("a",{href:a.settings.tutor_gblinks[0],target:"_blank"},x(e.$t("launch-scorelist")),9,Es),t[8]||(t[8]=$("   ",-1)),_("a",{href:a.settings.tutor_gblinks[1],target:"_blank"},x(e.$t("launch-itemanalysis")),9,Cs)])):k("",!0),a.hasActive?(v(),w("p",Qs,[$(x(a.hasActiveMsg)+" ",1),t[9]||(t[9]=_("br",null,null,-1)),_("button",{type:"button",class:"primary",onClick:t[0]||(t[0]=(...e)=>a.endAssess&&a.endAssess(...e))},x(e.$t("closed-submit_now")),1)])):a.canAddWork?(v(),w("p",Ms,[$(x(e.$t("work-add_prev")),1),t[10]||(t[10]=_("br",null,null,-1)),_("button",{type:"button",class:"secondary",onClick:t[1]||(t[1]=t=>e.$router.push("/showwork"))},x(e.$t("work-add")),1)])):k("",!0),a.settings.can_use_latepass>0&&a.showLatePassOffer?(v(),w("p",Ls,[$(x(e.$t("closed-latepassn",{n:a.settings.latepasses_avail}))+" ",1),t[11]||(t[11]=_("br",null,null,-1)),$(" "+x(a.latepassExtendMsg),1)])):k("",!0),0==a.settings.can_use_latepass&&a.settings.latepass_reason>1&&a.showLatePassOffer?(v(),w("p",js,[$(x(e.$t("latepass-reason"+a.settings.latepass_reason))+" ",1),6==a.settings.latepass_reason?(v(),w("span",Rs,x(e.$t("closed-latepassn",{n:a.settings.latepasses_avail})),1)):k("",!0)])):k("",!0),"practice"===a.settings.available&&0===a.settings.can_use_latepass?(v(),w("p",Ns,x(e.$t("closed-practice_no_latepass")),1)):"practice"===a.settings.available&&a.settings.can_use_latepass>0?(v(),w("p",Vs,[$(x(e.$t("closed-practice_w_latepass"))+" ",1),t[13]||(t[13]=_("br",null,null,-1)),q(o,{name:"alert",size:"micro"}),$(" "+x(e.$t("closed-will_block_latepass"))+" ",1),a.settings.hasOwnProperty("excused")?(v(),w("span",Fs,[t[12]||(t[12]=_("br",null,null,-1)),q(o,{name:"alert",size:"micro"}),$(" "+x(e.$t("setlist-excused")),1)])):k("",!0)])):k("",!0),a.canViewScored?(v(),w("p",Gs,[$(x(e.$t("closed-can_view_scored"))+" ",1),a.settings.can_use_latepass>0?(v(),w("span",Bs,[t[14]||(t[14]=_("br",null,null,-1)),q(o,{name:"alert",size:"micro"}),$(" "+x(e.$t("closed-will_block_latepass")),1)])):k("",!0)])):k("",!0),_("p",null,[""!=a.primaryButton?(v(),w("button",{key:0,class:"primary",onClick:t[2]||(t[2]=(...e)=>a.handlePrimary&&a.handlePrimary(...e))},x(a.primaryButton),1)):k("",!0),a.canViewScored?(v(),w("button",{key:1,class:"secondarybtn",onClick:t[3]||(t[3]=(...e)=>a.handleViewScored&&a.handleViewScored(...e))},x(e.$t("closed-view_scored")),1)):k("",!0),""!=a.secondaryButton?(v(),w("button",{key:2,class:"secondarybtn",onClick:t[4]||(t[4]=(...e)=>a.handleSecondary&&a.handleSecondary(...e))},x(a.secondaryButton),1)):k("",!0)]),a.canViewAll&&a.showReset?(v(),w("p",Hs,[$(x(e.$t("launch-resetmsg"))+" ",1),t[15]||(t[15]=_("br",null,null,-1)),_("button",{type:"button",class:"primary",onClick:t[5]||(t[5]=(...e)=>a.doReset&&a.doReset(...e))},x(e.$t("launch-doreset")),1)])):k("",!0),a.canViewAll?(v(),w("p",Us,[$(x(e.$t("closed-teacher_preview"))+" ",1),t[16]||(t[16]=_("br",null,null,-1)),_("button",{class:"primary",onClick:t[6]||(t[6]=(...e)=>a.teacherPreview&&a.teacherPreview(...e))},x(e.$t("closed-teacher_preview_button")),1),_("button",{class:"secondary",onClick:t[7]||(t[7]=(...e)=>a.teacherPreviewAll&&a.teacherPreviewAll(...e))},x(e.$t("closed-teacher_previewall_button")),1)])):k("",!0)]),a.settings.hasOwnProperty("prev_attempts")&&a.settings.prev_attempts.length>0?(v(),w("div",Ws,[q(r),q(l,{caption:e.$t("prev-scored_attempts")},null,8,["caption"])])):k("",!0)])}]]),Ks={class:"assess-header headerpane"},Js={style:{"flex-grow":"1"}},Ys=m({name:"SummaryHeader",computed:{ainfo:()=>qo.assessInfo,retakeLabel(){return"by_assessment"===this.ainfo.submitby&&this.ainfo.prev_attempts.length<this.ainfo.allowed_attempts?this.$t("launch-retake_assess"):"by_question"===this.ainfo.submitby&&qo.inAssess&&this.ainfo.has_active_attempt?this.$t("launch-continue_assess"):""},hasExit(){return window.exiturl&&""!==window.exiturl&&!this.ainfo.is_lti}},methods:{exit(){window.location=window.exiturl},retake(){qo.assessInfo=null,this.$router.push("/")}}},[["render",function(e,t,s,n,i,a){return v(),w("div",Ks,[_("div",Js,[_("h1",null,x(a.ainfo.name),1)]),_("div",null,[""!=a.retakeLabel?(v(),w("button",{key:0,onClick:t[0]||(t[0]=(...e)=>a.retake&&a.retake(...e))},x(a.retakeLabel),1)):k("",!0),a.hasExit?(v(),w("button",{key:1,onClick:t[1]||(t[1]=(...e)=>a.exit&&a.exit(...e))},x(e.$t("closed-exit")),1)):k("",!0)])])}]]),Xs={key:0},Zs={class:"larger"},en={key:0},tn={key:1},sn={key:1},nn=m({name:"SummaryScoreTotal",components:{},computed:{ainfo:()=>qo.assessInfo,showTotal(){return"none"!==this.ainfo.showscores},scoreTotal(){if(this.ainfo.hasOwnProperty("score"))return this.ainfo.score;{let e=0;for(const t in this.ainfo.questions)e+=this.ainfo.questions[t].score;return e}},retakePenalty(){if("by_question"===this.ainfo.submitby)return 0;const e=this.ainfo.prev_attempts.length;return e>this.ainfo.retake_penalty.n?this.ainfo.retake_penalty.penalty*(e-this.ainfo.retake_penalty.n):0},latePenalty(){if("by_question"===this.ainfo.submitby)return 0;let e=0;for(const t in this.ainfo.questions){const s=this.ainfo.questions[t].parts;for(let t=0;t<s.length;t++)if(s[t].hasOwnProperty("penalties")&&s[t].penalties.hasOwnProperty("late"))e+=s[t].penalties.late;else if(e>0)return 0}return e},scoreTotalPercent(){return Math.round(1e3*this.scoreTotal/this.ainfo.points_possible)/10},viewWorkType(){return"never"===this.ainfo.viewingb?"never":"after_due"===this.ainfo.viewingb?"never"===this.ainfo.scoresingb||"manual"===this.ainfo.scoresingb?"work_after":"after_due":"after_lp"===this.ainfo.viewingb?"never"===this.ainfo.scoresingb||"manual"===this.ainfo.scoresingb?"work_after_lp":"after_lp":"never"===this.ainfo.scoresingb||"manual"===this.ainfo.scoresingb?"work":"after_due"===this.ainfo.scoresingb?"work_scores_after":"immediately"}}},[["render",function(e,t,s,n,i,a){return v(),w("div",null,[a.showTotal?(v(),w("p",Xs,[_("strong",Zs,x(e.$t("summary-score"))+": "+x(a.scoreTotalPercent)+"% ",1),t[2]||(t[2]=_("br",null,null,-1)),$(" "+x(e.$t("summary-scorepts",{pts:a.scoreTotal,poss:a.ainfo.points_possible}))+" ",1),a.retakePenalty>0?(v(),w("span",en,[t[0]||(t[0]=_("br",null,null,-1)),$(" "+x(e.$t("summary-retake_penalty",{n:a.retakePenalty})),1)])):k("",!0),a.latePenalty>0?(v(),w("span",tn,[t[1]||(t[1]=_("br",null,null,-1)),$(" "+x(e.$t("summary-late_penalty",{n:a.latePenalty})),1)])):k("",!0)])):(v(),w("p",sn,x(e.$t("summary-no_total"))+" "+x(e.$t("summary-viewwork_"+a.viewWorkType)),1))])}]]),an={class:"qdetails"},on={key:0},rn={key:0},ln={key:1},un={key:2},cn={key:0},dn={key:1},pn={key:2},hn=m({name:"QuestionDetailsTable",props:["qinfo","caption","showtries","submitby"],components:{Icons:f,PenaltiesApplied:O},computed:{parts(){return this.qinfo.parts},doShowTries(){return!(!1===this.showtries)},partHasPenalties(){const e=[];for(let t=0;t<this.parts.length;t++)this.parts[t].hasOwnProperty("penalties")&&this.parts[t].penalties.length>0&&e.push(t);return e},triesRemaining(){const e=[];for(let t=0;t<this.parts.length;t++)0===this.parts[t].points_possible?e[t]="":this.qinfo.hasOwnProperty("did_jump_to_ans")?e[t]=0:e[t]=this.qinfo.tries_max-this.parts[t].try;return e},hasPenalty(){return this.partHasPenalties.length>0},showScore(){return this.qinfo.hasOwnProperty("score")},partIcons(){const e=[];for(let t=0;t<this.parts.length;t++)0===this.parts[t].try?e[t]="unattempted":this.parts[t].hasOwnProperty("rawscore")?this.parts[t].rawscore>.99?e[t]="correct":this.parts[t].rawscore<.01?e[t]="incorrect":e[t]="partial":e[t]="attempted";return e}}},[["render",function(e,t,s,n,i,a){const o=b("icons"),r=b("penalties-applied");return v(),w("table",an,[s.caption?(v(),w("caption",on,x(s.caption),1)):k("",!0),_("thead",null,[_("tr",null,[_("th",null,x(e.$t("qdetails-part")),1),a.showScore?(v(),w("th",rn,x(e.$t("qdetails-score")),1)):k("",!0),a.doShowTries?(v(),w("th",ln,x(e.$t("qdetails-try")),1)):k("",!0),a.hasPenalty?(v(),w("th",un,x(e.$t("qdetails-penalties")),1)):k("",!0)])]),_("tbody",null,[(v(!0),w(g,null,y(a.parts,(e,t)=>(v(),w("tr",{key:t},[_("td",null,[q(o,{name:a.partIcons[t]},null,8,["name"]),$(" "+x(t+1),1)]),a.showScore?(v(),w("td",cn,x(e.score)+"/"+x(e.points_possible),1)):k("",!0),a.doShowTries?(v(),w("td",dn,x(a.triesRemaining[t]),1)):k("",!0),a.hasPenalty?(v(),w("td",pn,[-1!=a.partHasPenalties.indexOf(t)?(v(),S(r,{key:0,part:e,submitby:s.submitby},null,8,["part","submitby"])):k("",!0)])):k("",!0)]))),128))])])}]]),mn=["id","aria-controls","aria-expanded"],fn=["id"],wn={class:"scorelist"},gn={key:0,class:"small subdued"},yn={key:0},bn={key:1},vn=m({name:"SummaryScoreList",components:{Icons:f,QuestionDetailsTable:hn,ClickToShow:m({name:"ClickToShow",props:["id"],data:function(){return{open:!1,closetimer:null}},methods:{triggerOpen(e){this.open="boolean"==typeof e?e:!this.open,this.open||this.$refs.button.focus()}}},[["render",function(e,t,s,n,i,a){return v(),w("span",null,[_("span",{id:s.id,ref:"button",role:"button",tabindex:"0",onClick:t[0]||(t[0]=(...e)=>a.triggerOpen&&a.triggerOpen(...e)),onKeydown:[t[1]||(t[1]=T(E((...e)=>a.triggerOpen&&a.triggerOpen(...e),["prevent"]),["enter"])),t[2]||(t[2]=T(E((...e)=>a.triggerOpen&&a.triggerOpen(...e),["prevent"]),["space"]))],class:"dropdown-button","aria-controls":s.id+"_pane","aria-expanded":e.open?"true":"false"},[D(e.$slots,"button")],40,mn),e.open?(v(),w("div",{key:0,id:s.id+"_pane"},[D(e.$slots,"default")],8,fn)):k("",!0)])}]])},computed:{questions:()=>qo.assessInfo.questions,noTries(){var e={};for(const t in this.questions)if(this.questions[t].hasOwnProperty("parts")){let s=!0;for(const e in this.questions[t].parts)if(this.questions[t].parts[e].try>0){s=!1;break}e[t]=s}else e[t]=!0;return e}}},[["render",function(e,t,s,n,i,a){const o=b("icons"),r=b("question-details-table"),l=b("click-to-show");return v(),w("table",wn,[t[0]||(t[0]=_("caption",{class:"sr-only"},"Scores",-1)),_("thead",null,[_("tr",null,[_("th",null,x(e.$t("scorelist-question")),1),_("th",null,x(e.$t("scorelist-score")),1)])]),_("tbody",null,[(v(!0),w(g,null,y(a.questions,(t,s)=>(v(),w("tr",{key:s},[_("td",null,[q(o,{name:t.status},null,8,["name"]),$(" "+x(e.$t("question_n",{n:s+1}))+" ",1),t.extracredit?(v(),w("em",gn,x(e.$t("extracredit")),1)):k("",!0)]),a.noTries[s]?(v(),w("td",yn,x(e.$t("scorelist-unattempted")),1)):(v(),w("td",bn,[$(x(e.$t("scorelist-pts",{pts:t.gbscore,poss:t.points_possible}))+"    ",1),t.has_details?(v(),S(l,{key:0,class:"question-details",id:"qd_"+s},{button:C(()=>[q(o,{name:"info",size:"small"}),$(" "+x(e.$t("header-details")),1)]),default:C(()=>[q(r,{qinfo:t,showtries:!1},null,8,["qinfo"])]),_:2},1032,["id"])):k("",!0)]))]))),128))])])}]]),_n={key:0},qn={class:"big"},kn={class:"pii-full-name"},In=m({name:"SummaryDiagInfo",computed:{showDiagInfo:()=>qo.assessInfo.is_diag,diagUserName:()=>qo.assessInfo.userfullname+": "+qo.assessInfo.diag_userid}},[["render",function(e,t,s,n,i,a){return a.showDiagInfo?(v(),w("div",_n,[_("p",qn,[_("span",kn,x(a.diagUserName),1)]),_("p",null,x(e.$t("longdate",{date:new Date})),1)])):k("",!0)}]]),xn={key:0},$n={key:1},Tn={key:2},Pn={key:3},An={key:4},On=["onClick","onKeypress"],Sn={key:3},Dn=m({name:"ScoreResult",props:["qdata","qn"],data:function(){return{expanded:!0}},watch:{qdata:function(e){this.expanded=!0}},components:{Icons:f},computed:{showScores(){return!(this.qdata.hasOwnProperty("parts")&&1===this.qdata.parts.length&&this.qdata.parts[0].req_manual||"during"!==qo.assessInfo.showscores)},status(){let e,t=-1,s=-2,n=0,i=0;if(this.qdata.hasOwnProperty("parts")&&(i=this.qdata.parts.length),!this.showScores||!this.qdata.hasOwnProperty("parts")||1===this.qdata.parts.length&&this.qdata.parts[0].req_manual)e="neutral";else{let i=0,a=0,o=0;for(let e=0;e<this.qdata.parts.length;e++)0===parseFloat(this.qdata.answeights[e])?o++:this.qdata.parts[e].hasOwnProperty("rawscore")?this.qdata.parts[e].rawscore>.99?(t=e,i++):(t=e,this.qdata.parts[e].rawscore<.01&&a++,s<0&&!this.qdata.parts[e].req_manual&&(s=this.qdata.parts[e].try<this.qdata.tries_max?e:-1)):n++;this.qdata.singlescore?e=this.qdata.rawscore>.99?"correct":this.qdata.rawscore<.01?"incorrect":"partial":(e="partial",i===this.qdata.parts.length-o?e="correct":a===this.qdata.parts.length-o&&(e="incorrect"))}return{general:e,firstincorrect:s,lasttried:t,untried:n,partcount:i}},partStatusMessage(){return this.status.partcount>1&&"neutral"!==this.status.general?-2===this.status.firstincorrect?this.$t("scoreresult-allpartscorrect"):this.$t("scoreresult-onepartincorrect"):""},hasManualScore(){if("during"!==qo.assessInfo.showscores||!this.qdata.hasOwnProperty("parts"))return!1;for(let e=0;e<this.qdata.parts.length;e++)if(this.qdata.parts[e].hasOwnProperty("req_manual")&&this.qdata.parts[e].req_manual)return!0;return!1},showRetryButtons:()=>"livepoll"!==qo.assessInfo.displaymethod,showNext(){return"skip"===qo.assessInfo.displaymethod&&this.qn<qo.assessInfo.questions.length-1},showSubmit(){return"by_assessment"===qo.assessInfo.submitby&&this.qn===qo.assessInfo.questions.length-1}},methods:{trySimilar(){ko.loadQuestion(this.qn,!0)},submitAssess(){ko.submitAssessment()},jumpToIncorrect(e){this.focusOnPart(this.status.firstincorrect,!1)},jumpToLastTried(e){this.focusOnPart(this.status.lasttried,!0)},getQuestionEl(e){const t=1e3*(parseInt(this.qn)+1)+e,s=window.$("#qnwrap"+t);if(s.length>0)return[s.attr("tabindex","-1")[0],!1];const n=window.$("[id^=mqinput-qn"+t+"]");if(window.MQ&&n.length>0)return[n[0],!0];const i=window.$("input[name^=qn"+t+"],select[name^=qn"+t+"],textarea[name^=qn"+t+"]");return i.length>0?[i[0],!1]:void 0},focusOnPart(e,t){const s=this.getQuestionEl(e);t?window.$(s[0]).nextAll(".afterquestion").first().attr("tabindex","-1")[0].focus():s[1]?window.MQ(s[0]).focus():s[0].focus()}}},[["render",function(e,t,s,n,i,a){const o=b("icons"),r=b("router-link");return v(),S(Q,{name:"fade"},{default:C(()=>[e.expanded?(v(),w("div",{key:0,class:I(["scoreresult",a.status.general]),tabindex:"-1"},[a.showScores?(v(),w("p",xn,[$(x(e.$t("scoreresult-scorelast"))+" ",1),_("strong",null,x(e.$t("scoreresult-scorepts",{pts:s.qdata.score,poss:s.qdata.points_possible}))+". ",1),$(" "+x(e.$t("scoreresult-see_details")),1)])):(v(),w("p",$n,x(e.$t("scoreresult-submitted")),1)),a.hasManualScore?(v(),w("p",Tn,[q(o,{name:"info"}),$(" "+x(e.$t("scoreresult-manual_grade")),1)])):k("",!0),a.showScores&&"correct"!==a.status.general&&a.status.partcount>1&&(a.status.firstincorrect>-1||a.status.untried>0)?(v(),w("p",Pn,[$(x(a.partStatusMessage)+" ",1),a.status.firstincorrect>-1?(v(),w("a",{key:0,href:"#",onClick:t[0]||(t[0]=E((...e)=>a.jumpToIncorrect&&a.jumpToIncorrect(...e),["prevent"]))},x(e.$t("scoreresult-jumptoincorrect"))+". ",1)):k("",!0),a.status.untried>0?(v(),w("a",{key:1,href:"#",onClick:t[1]||(t[1]=E((...e)=>a.jumpToLastTried&&a.jumpToLastTried(...e),["prevent"]))},x(e.$t("scoreresult-jumptolast"))+". ",1)):k("",!0)])):k("",!0),a.showRetryButtons?(v(),w("p",An,[a.showNext?(v(),S(r,{key:0,to:"/skip/"+(this.qn+2),custom:""},{default:C(({navigate:t})=>[_("button",{type:"button",onClick:t,onKeypress:T(t,["enter"]),role:"link"},[q(o,{name:"right",alt:""}),$(" "+x(e.$t("scoreresult-next")),1)],40,On)]),_:1},8,["to"])):k("",!0),a.showSubmit?(v(),w("button",{key:1,type:"button",class:"primary",onClick:t[2]||(t[2]=(...e)=>a.submitAssess&&a.submitAssess(...e))},x(e.$t("header-assess_submit")),1)):k("",!0),s.qdata.canregen?(v(),w("button",{key:2,type:"button",onClick:t[3]||(t[3]=(...e)=>a.trySimilar&&a.trySimilar(...e))},[q(o,{name:"retake",alt:""}),$(" "+x(e.$t("scoreresult-trysimilar")),1)])):k("",!0),s.qdata.canretry_primary?(v(),w("span",Sn,x(e.$t("scoreresult-retryq")),1)):k("",!0)])):k("",!0)],2)):k("",!0)]),_:1})}]]),En=["id"],Cn={class:"sr-only"},Qn=["aria-labelledby"],Mn=["onClick","aria-describedby"],Ln={key:0},jn=["href"],Rn={key:1},Nn=["href"],Vn=m({name:"QuestionHelps",props:["qn"],components:{Icons:f,TooltipSpan:M},computed:{showMessage:()=>qo.assessInfo.hasOwnProperty("help_features")&&!0===qo.assessInfo.help_features.message,postToForum:()=>qo.assessInfo.hasOwnProperty("help_features")&&qo.assessInfo.help_features.forum,qHelps(){const e={};if(qo.assessInfo.questions[this.qn].jsparams){const t=qo.assessInfo.questions[this.qn].jsparams.helps;for(const s in t)e.hasOwnProperty(t[s].label)?e[t[s].label]++:e[t[s].label]=1,"video"===t[s].label?(t[s].icon="video",t[s].title=this.$t("helps-video")):"read"===t[s].label?(t[s].icon="file",t[s].title=this.$t("helps-read")):"ex"===t[s].label?(t[s].icon="file",t[s].title=this.$t("helps-written_example")):(t[s].icon="file",t[s].title=t[s].label),t[s].cnt=e[t[s].label];return t}return[]},showCnts(){return this.qHelps.filter(e=>e.cnt>1).length>0},quoteQ(){const e=qo.assessInfo.questions[this.qn].questionsetid,t=qo.assessInfo.questions[this.qn].seed;return this.qn+"-"+e+"-"+t+"-"+qo.aid+"-2"},messageHref(){let e=window.imasroot+"/msgs/msglist.php?";return e+=window.$.param({cid:qo.cid,add:"new",quoteq:this.quoteQ,to:"instr"}),e},forumHref(){let e=window.imasroot+"/forums/thread.php?";return e+=window.$.param({cid:qo.cid,forum:qo.assessInfo.help_features.forum,modify:"new",quoteq:this.quoteQ}),e}},methods:{loadHelp(e){if(e.ref){const t="Q"+e.ref.split(/-/)[1]+": ";if(e.url.match(/watchvid\.php/)){const s=e.url.split(/url=/);window.recclick("extref",e.ref,t+decodeURIComponent(s[1]))}else window.recclick("extref",e.ref,t+e.url)}window.popupwindow("help",e.url,e.w,e.h,!0)}}},[["render",function(e,t,s,n,i,a){const o=b("icons"),r=b("tooltip-span");return v(),w("div",null,[_("span",{id:"qhelp"+s.qn},[$(x(e.$t("helps-help")),1),_("span",Cn,x(e.$t("question_n",{n:s.qn+1})),1),t[0]||(t[0]=$(": ",-1))],8,En),_("ul",{class:"helplist","aria-labelledby":"qhelp"+s.qn},[(v(!0),w(g,null,y(a.qHelps,(e,t)=>(v(),w("li",{key:t},[q(r,{tip:e.descr,tipid:"qhtip"+s.qn+"-"+t},{default:C(()=>[_("a",{href:"#",onClick:E(t=>a.loadHelp(e),["prevent"]),"aria-describedby":e.descr?"qhtip"+s.qn+"-"+t:void 0},[q(o,{name:e.icon,alt:""},null,8,["name"]),$(" "+x(e.title)+" ",1),_("span",{class:I({"sr-only":!a.showCnts})},x(e.cnt),3)],8,Mn)]),_:2},1032,["tip","tipid"])]))),128)),a.showMessage?(v(),w("li",Ln,[_("a",{href:a.messageHref,target:"help"},[q(o,{name:"message"}),$(" "+x(e.$t("helps-message_instructor")),1)],8,jn)])):k("",!0),a.postToForum>0?(v(),w("li",Rn,[_("a",{href:a.forumHref,target:"help"},[q(o,{name:"forum"}),$(" "+x(e.$t("helps-post_to_forum")),1)],8,Nn)])):k("",!0)],8,Qn)])}]]),Fn={class:"showworkwrap"},Gn={key:0},Bn=["id","rows","aria-label"],Hn={key:1,class:"feedbackwrap"},Un={class:"nomark"},Wn=["href"],zn=["onClick"],Kn={key:0,class:"noticetext"},Jn=m({name:"ShowworkInput",props:{id:{default:null},qn:{default:null},value:{default:""},rows:{default:2},active:{default:!0}},data:function(){return{objTinymce:null,filelist:[],uploading:!1}},computed:{computedId:function(){return"editor"===this.id||""===this.id||null===this.id?"editor-"+this.guidGenerator():this.id},worktype:function(){return 4===qo.assessInfo.showworktype?1:0}},mounted:function(){0===this.worktype&&(this.$refs.inbox.innerHTML=this.value),this.active&&this.initEditor()},updated:function(){this.active&&0===this.worktype&&null===this.objTinymce&&this.initEditor()},methods:{guidGenerator:function(){function e(){return Math.random().toString(36).substr(2,9)}return"ed-"+e()+"-"+e()},initEditor(){var e=this;1===this.worktype?(window.$(this.$refs.fileinput).on("focus",function(t){e.$emit("focus",!0)}),this.updateFilelist(this.value),this.objTinymce={value:this.value}):window.tinymce?window.initeditor("exact",this.computedId,null,!1,function(t){t.on("input change keyup undo redo",function(s){e.updateValue(t.getContent())}).on("blur",function(t){e.$emit("blur",!0)}).on("focus",function(t){e.$emit("focus",!0)}),e.objTinymce=t}):(window.$(this.$refs.inbox).on("focus",function(t){e.$emit("focus",!0)}).on("blur",function(t){e.$emit("blur",!0)}).on("input change keyup undo redo",function(t){e.updateValue(t.target.value)}),e.objTinymce=this.$refs.inbox)},updateFilelist:function(e){const t=[],s=e.match(/<(a[^>]*href|img[^>]*src)="(.*?)"/g);if(null!==s)for(let n=0;n<s.length;n++)t.push(s[n].replace(/^.*?(href|src)="(.*?)"/,"$2"));this.filelist=t},updateValue:function(e){e.length>3e4&&(e=e.substr(0,3e4)),this.$emit("input",e)},focus:function(){this.objTinymce.focus()},uploadFile:function(){window.doImageUploadResize(this.$refs.fileinput,e=>{if(!e.files||0===e.files.length)return ko.handleError("file_error_cant_read"),void(this.$refs.fileinput.value="");if(e.files[0].size>1536e4)return ko.handleError("file_toolarge"),void(this.$refs.fileinput.value="");const t=new FormData;t.append("type","attach"),t.append("file",e.files[0]),this.uploading=!0,window.$.ajax({url:qo.APIbase.replace(/\/\w+\/$/,"")+"/tinymce8/upload_handler.php",type:"POST",dataType:"json",data:t,processData:!1,contentType:!1,xhrFields:{withCredentials:!0},crossDomain:!0}).done(e=>{e.location?(this.filelist.push(e.location),this.updateValueFromFilelist()):ko.handleError("file_upload_error")}).fail(e=>{ko.handleError("file_upload_error")}).always(()=>{this.$refs.fileinput.value=null,this.uploading=!1})})},removeFile:function(e){qo.confirmObj={body:"work-remove",action:()=>{const t=this.filelist[e];this.filelist.splice(e,1),this.updateValueFromFilelist(),window.$.ajax({url:qo.APIbase+"../tinymce8/upload_handler.php",type:"POST",dataType:"json",data:{remove:t},xhrFields:{withCredentials:!0},crossDomain:!0})}}},updateValueFromFilelist:function(){let e="";if(this.filelist.length>0){e+='<ul class="nomark">';for(let t=0;t<this.filelist.length;t++)e+='<li><a href="'+this.filelist[t]+'" class="attach" target="_blank">'+this.filelist[t].split("/").pop()+"</a></li>";e+="</ul>"}this.objTinymce.value=e,this.$emit("input",e),this.$emit("blur",e)}},watch:{active:function(e,t){!0===e&&null===this.objTinymce&&this.initEditor()},value:function(e,t){"string"!=typeof e&&(e=""),1===this.worktype?e!==this.objTinymce.value&&this.updateFilelist(e):window.tinymce?e!==this.objTinymce.getContent()&&this.objTinymce.setContent(e):e!==this.objTinymce.value&&(this.objTinymce.value=e)}}},[["render",function(e,t,s,n,i,a){return v(),w("div",Fn,[0===a.worktype?(v(),w("div",Gn,[$(x(e.$t("question-showwork"))+" ",1),_("textarea",{id:a.computedId,ref:"inbox",class:"fbbox swbox",rows:s.rows,"aria-label":e.$t("question-showwork_n",{n:s.qn+1})},null,8,Bn)])):(v(),w("div",Hn,[$(x(e.$t("question-uploadwork"))+" ",1),_("ul",Un,[(v(!0),w(g,null,y(e.filelist,(t,s)=>(v(),w("li",{key:s},[_("a",{href:t,class:"attach",target:"_blank"},x(t.split("/").pop()),9,Wn),_("button",{onClick:e=>a.removeFile(s)},x(e.$t("group-remove")),9,zn)]))),128)),_("li",null,[_("input",{type:"file",ref:"fileinput",onChange:t[0]||(t[0]=(...e)=>a.uploadFile&&a.uploadFile(...e))},null,544),e.uploading?(v(),w("span",Kn,x(e.$t("question-uploading")),1)):k("",!0)])]),t[1]||(t[1]=_("div",null,null,-1))]))])}]]),Yn={class:"questionwrap questionpane",ref:"main"},Xn={key:0},Zn={key:2,class:"scoreresult neutral",tabindex:"-1"},ei={key:3,class:"noticetext"},ti={key:4,class:"small"},si=["innerHTML","id"],ni={key:7},ii={key:8,class:"submitbtnwrap"},ai=["disabled"],oi={class:"sr-only"},ri=["disabled"],li={key:9,class:"submitbtnwrap"},ui=["onClick","onKeypress","disabled"],ci=e("Q",m({name:"Question",props:["qn","active","state","seed","disabled","getwork"],components:{ScoreResult:Dn,QuestionHelps:Vn,ShowworkInput:Jn,Icons:f},data:function(){return{work:"",lastWorkVal:"",showWorkInput:!1,loadingAttempted:!1}},computed:{questionData(){return qo.assessInfo.questions[this.qn]},canSubmit:()=>!qo.inTransit,canJumpToAnswer(){return this.questionData.jump_to_answer},questionContentLoaded(){return null!==this.questionData.html},hasSeqNext(){return this.questionData.jsparams&&this.questionData.jsparams.hasseqnext},hasSubmitAll(){return this.questionData.jsparams&&1===this.questionData.jsparams.submitall},buttonsOk(){return qo.inProgress&&this.questionContentLoaded&&!qo.inPrintView&&!this.disabled&&0===this.questionData.withdrawn&&this.questionData.canretry},showSubmit(){return this.buttonsOk&&("by_question"===qo.assessInfo.submitby||"during"===qo.assessInfo.showscores||this.hasSeqNext)&&("livepoll"!==qo.assessInfo.displaymethod||2===this.state)},showNext(){return this.buttonsOk&&!this.showSubmit&&"skip"===qo.assessInfo.displaymethod&&this.qn<qo.assessInfo.questions.length-1},submitClass(){return"by_assessment"!==qo.assessInfo.submitby&&this.questionData.canretry_primary?"primary":"secondary"},showScore(){return qo.inProgress&&!qo.inPrintView&&!this.disabled&&!0!==this.questionData.hadSeqNext&&(this.questionData.hasOwnProperty("score")||"attempted"===this.questionData.status)&&(this.questionData.try>0||this.questionData.hasOwnProperty("tries_remaining_range"))&&0===this.questionData.withdrawn},showResults:()=>qo.assessInfo.show_results,submitLabel(){let e="question-";return"by_question"===qo.assessInfo.submitby?e+="submit":"during"===qo.assessInfo.showscores?e+="checkans":e+="saveans",this.hasSeqNext?e+="_seqnext":this.hasSubmitAll&&(e+="_submitall"),this.$t(e)},showHelps(){return qo.assessInfo.hasOwnProperty("help_features")&&(!0===qo.assessInfo.help_features.message||qo.assessInfo.help_features.forum>0)||this.questionData.jsparams&&this.questionData.jsparams.helps.length>0},errorsToShow(){let e=[];return qo.assessInfo.hasOwnProperty("scoreerrors")&&qo.assessInfo.scoreerrors.hasOwnProperty(this.qn)&&(e=e.concat(qo.assessInfo.scoreerrors[this.qn])),this.questionData.hasOwnProperty("errors")&&(e=e.concat(this.questionData.errors)),e},showWork(){return 1===this.getwork&&1&qo.assessInfo.questions[this.qn].showwork||2===this.getwork&&2&qo.assessInfo.questions[this.qn].showwork}},methods:{loadQuestionIfNeeded(e){this.questionContentLoaded&&!this.loadingAttempted&&(this.loadingAttempted=this.questionContentLoaded),this.questionContentLoaded||this.loadingAttempted||!this.active||null!==qo.errorMsg?this.questionContentLoaded&&this.active&&!this.questionData.rendered&&!0!==e&&this.renderAndTrack():(this.loadingAttempted=!0,ko.loadQuestion(this.qn,!1,!1))},submitQuestion(){ko.submitQuestion(this.qn,!1),qo.timeActive[this.qn]=0,qo.timeActivated[this.qn]=new Date},jumpToAnswer(){qo.confirmObj={body:"question-jump_warn",action:()=>ko.loadQuestion(this.qn,!1,!0)}},updateTime(e){if(!qo.timeActivated.hasOwnProperty(this.qn)||e)qo.timeActivated[this.qn]=new Date;else if(qo.timeActivated.hasOwnProperty(this.qn)){const e=new Date;qo.timeActive[this.qn]+=e-qo.timeActivated[this.qn],delete qo.timeActivated[this.qn]}},addDirtyTrackers(){window.$("#questionwrap"+this.qn).find("input[name],select[name],textarea[name]").off("focus.dirtytrack").off("change.dirtytrack").off("input.dirtytrack").on("focus.dirtytrack",function(){"radio"===this.type||"checkbox"===this.type||window.$(this).attr("data-lastval",window.$(this).val())}).on("input.dirtytrack",function(){qo.somethingDirty=!0}).on("change.dirtytrack",function(){const e=window.$(this).val().trim();let t=!1;if("radio"===this.type||"checkbox"===this.type?t=!0:e===window.$(this).attr("data-lastval")||""===e&&""===window.$(this).attr("data-lastval").trim()||(t=!0),t){qo.somethingDirty=!0;const e=window.$(this).attr("name").match(/^(qs|qn|tc)(\d+)/);if(null!==e){var s=1*e[2],n=0;s>=1e3&&(n=s%1e3,s=Math.floor(s/1e3+.001)-1);const t=new Date,i=qo.timeActive[s]+(t-qo.timeActivated[s]);ko.doAutosave(s,n,i)}}})},disableOutOfTries(){const e=this.questionData.tries_max;let t=0;for(const n in this.questionData.jsparams)n.match(/^\d+$/)&&t++;for(const n in this.questionData.parts){var s;this.questionData.parts[n].try>=e&&this.questionData.answeights[n]>0&&(s=1===Object.keys(this.questionData.parts).length&&t>1?new RegExp("^(qn|tc|qs)("+this.qn+"\\b|"+(this.qn+1)+"\\d{3}\\b)"):0===parseInt(n)?new RegExp("^(qn|tc|qs)("+this.qn+"\\b|"+(1e3*(this.qn+1)+1*n)+"\\b)"):new RegExp("^(qn|tc|qs)"+(1e3*(this.qn+1)+1*n)+"\\b"),window.$("#questionwrap"+this.qn).find("input,select,textarea").each(function(e,t){t.name.match(s)&&(t.disabled=!0)}))}},renderAndTrack(){!this.questionData.rendered&&this.active&&(setTimeout(window.drawPics,100),window.initlinkmarkup(this.$refs.thisqwrap),window.rendermathnode(this.$refs.thisqwrap),window.initSageCell(this.$refs.thisqwrap),window.setupSeqPartToggles(this.$refs.thisqwrap),this.updateTime(!0),this.setInitValues(),qo.timeActive[this.qn]+=ko.getInitTimeactive(this.qn),this.addDirtyTrackers(),this.work=this.questionData.work,window.$("#questionwrap"+this.qn).find(".seqsep").attr("aria-level","full"===qo.assessInfo.displaymethod?3:2),this.disabled&&window.$("#questionwrap"+this.qn).find("input,select,textarea").each(function(e,t){t.name.match(/^(qn|tc|qs)\d/)&&(t.disabled=!0)}),window.imathasAssess.init(this.questionData.jsparams,qo.enableMQ,this.$refs.thisqwrap),setTimeout(window.sendLTIresizemsg,100),ko.setRendered(this.qn,!0))},setInitValues(){var e=/^(qn|tc|qs)\d/,t=this.qn;window.$("#questionwrap"+this.qn).find("input,select,textarea").each(function(s,n){n.name.match(e)&&("radio"===n.type||"checkbox"===n.type?n.checked&&ko.setInitValue(t,n.name,n.value):ko.setInitValue(t,n.name,window.$(n).val()))}),this.showWork&&(ko.setInitValue(t,"sw"+this.qn,this.questionData.work),this.work=this.questionData.work)},updateWork(e){this.work=e},workChanged(){if(this.work!==this.lastWorkVal)if(qo.work[this.qn]=this.work,1===this.getwork){const e=new Date,t=qo.timeActive[this.qn]+(e-qo.timeActivated[this.qn]);ko.doAutosave(this.qn,"sw",t)}else 2===this.getwork&&this.$emit("workchanged",this.work)},workFocused(){this.lastWorkVal=this.work},trySimilar(){ko.loadQuestion(this.qn,!0)}},updated(){this.questionContentLoaded?(this.disableOutOfTries(),this.renderAndTrack()):this.loadQuestionIfNeeded()},created(){this.loadQuestionIfNeeded(!0),qo.timeActive.hasOwnProperty(this.qn)||(qo.timeActive[this.qn]=0)},mounted(){this.questionContentLoaded&&(this.disableOutOfTries(),this.renderAndTrack())},beforeUnmount(){ko.setRendered(this.qn,!1)},watch:{active:function(e,t){this.loadQuestionIfNeeded(),this.updateTime(e),!1===e&&L(this.$refs.main)},state:function(e,t){(e>1&&t<=1||4===e&&t<4||3===e&&4===t)&&ko.loadQuestion(this.qn,!1,!1)},qn:function(e,t){ko.setRendered(t,!1)},seed:function(e,t){ko.loadQuestion(this.qn,!1,!1)}}},[["render",function(e,t,s,n,i,a){const o=b("score-result"),r=b("icons"),l=b("question-helps"),u=b("showwork-input"),c=b("router-link");return v(),w("div",Yn,[a.questionContentLoaded?k("",!0):(v(),w("div",Xn,x(e.$t("loading")),1)),a.showScore&&a.showResults?(v(),S(o,{key:1,qdata:a.questionData,qn:s.qn},null,8,["qdata","qn"])):a.showScore&&a.questionData.canregen?(v(),w("div",Zn,[_("button",{type:"button",onClick:t[0]||(t[0]=(...e)=>a.trySimilar&&a.trySimilar(...e))},[q(r,{name:"retake",alt:""}),$(" "+x(e.$t("scoreresult-trysimilar")),1)])])):k("",!0),0!==a.questionData.withdrawn?(v(),w("p",ei,[q(r,{name:"alert",color:"warn",size:"medium"}),$(" "+x(e.$t("question-withdrawn")),1)])):k("",!0),a.errorsToShow.length>0?(v(),w("div",ti,[_("ul",null,[(v(!0),w(g,null,y(a.errorsToShow,(e,t)=>(v(),w("li",{key:t},x(e),1))),128))])])):k("",!0),a.questionContentLoaded?(v(),w("div",{key:5,innerHTML:a.questionData.html,class:"question",id:"questionwrap"+s.qn,ref:"thisqwrap"},null,8,si)):k("",!0),a.showHelps?(v(),S(l,{key:6,qn:s.qn},null,8,["qn"])):k("",!0),a.showWork&&a.questionContentLoaded?(v(),w("div",ni,[2!==s.getwork?(v(),w("button",{key:0,onClick:t[1]||(t[1]=t=>e.showWorkInput=!e.showWorkInput)},x(e.showWorkInput?e.$t("work-hide"):e.$t("work-add")),1)):k("",!0),P(_("div",null,[q(u,{id:"sw"+s.qn,qn:s.qn,value:a.questionData.work,rows:"3",active:2===s.getwork||e.showWorkInput,onInput:a.updateWork,onBlur:a.workChanged,onFocus:a.workFocused},null,8,["id","qn","value","active","onInput","onBlur","onFocus"])],512),[[j,2===s.getwork||e.showWorkInput]])])):k("",!0),a.showSubmit?(v(),w("div",ii,[_("button",{type:"button",onClick:t[2]||(t[2]=(...e)=>a.submitQuestion&&a.submitQuestion(...e)),class:I(a.submitClass),disabled:!a.canSubmit},[$(x(a.submitLabel)+" ",1),_("span",oi,x(e.$t("question_n",{n:s.qn+1})),1)],10,ai),a.canJumpToAnswer?(v(),w("button",{key:0,type:"button",onClick:t[3]||(t[3]=(...e)=>a.jumpToAnswer&&a.jumpToAnswer(...e)),class:"secondary",disabled:!a.canSubmit},x(e.$t("question-jump_to_answer")),9,ri)):k("",!0)])):a.showNext?(v(),w("div",li,[q(c,{to:"/skip/"+(this.qn+2),custom:""},{default:C(({navigate:t})=>[_("button",{type:"button",onClick:t,onKeypress:T(t,["enter"]),role:"link",class:"secondarybtn",disabled:!a.canSubmit},[q(r,{name:"right"}),$(" "+x(e.$t("question-next")),1)],40,ui)]),_:1},8,["to"])])):k("",!0)],512)}]])),di={class:"pane-header nowrap"},pi={class:"pane-body"},hi={key:0},mi={key:1},fi={class:"nowrap"},wi={key:2},gi={class:"nowrap"},yi={key:4},bi={key:5},vi={class:"small subdued",style:{"text-align":"right"}},_i=["href"],qi=m({name:"QuestionDetailPane",props:["qn","className","id"],components:{QuestionDetailsTable:hn,PenaltiesApplied:O},computed:{qinfo(){return qo.assessInfo.questions[this.qn]},hasParts(){return this.qinfo.hasOwnProperty("parts")&&this.qinfo.parts.length>1&&0===this.qinfo.withdrawn&&this.qinfo.parts[0].hasOwnProperty("points_possible")&&!this.qinfo.singlescore},hasOnePartPenalties(){return this.qinfo.hasOwnProperty("parts")&&1===this.qinfo.parts.length&&this.qinfo.parts[0].hasOwnProperty("penalties")&&this.qinfo.parts[0].penalties.length>0},showScore(){return this.qinfo.hasOwnProperty("score")},showGBScore(){return this.qinfo.hasOwnProperty("gbscore")},gbScoreString(){return qo.assessInfo.in_practice?this.$t("qdetails-bestpractice"):this.$t("qdetails-gbscore")},hasCategory(){return 1===qo.assessInfo.showcat&&this.qinfo.hasOwnProperty("category")&&""!==this.qinfo.category&&null!==this.qinfo.category},submitby:()=>qo.assessInfo.submitby,licenseUrl(){return window.imasroot+"/course/showlicense.php?id="+this.qinfo.questionsetid}}},[["render",function(e,t,s,n,i,a){const o=b("question-details-table"),r=b("penalties-applied");return v(),w("div",null,[_("div",di,x(e.$t("qdetails-question_details")),1),_("div",pi,[1===a.qinfo.extracredit?(v(),w("p",hi,x(e.$t("qdetails-extracredit")),1)):k("",!0),a.showGBScore?(v(),w("p",mi,[$(x(a.gbScoreString)+": ",1),_("span",fi,x(e.$t("scoreresult-scorepts",{pts:a.qinfo.gbscore,poss:a.qinfo.points_possible})),1)])):k("",!0),a.showScore?(v(),w("p",wi,[$(x(e.$t("qdetails-lastscore"))+": ",1),_("span",gi,x(e.$t("scoreresult-scorepts",{pts:a.qinfo.score,poss:a.qinfo.points_possible})),1)])):k("",!0),a.hasParts?(v(),S(o,{key:3,caption:e.$t("qdetails-lasttry"),qinfo:a.qinfo,submitby:a.submitby},null,8,["caption","qinfo","submitby"])):k("",!0),a.hasOnePartPenalties?(v(),w("div",yi,[_("p",null,x(e.$t("penalties-applied"))+":",1),q(r,{class:"med-left",part:a.qinfo.parts[0],submitby:a.submitby},null,8,["part","submitby"])])):k("",!0),a.hasCategory?(v(),w("p",bi,[_("strong",null,x(e.$t("qdetails-category"))+":",1),$(" "+x(a.qinfo.category),1)])):k("",!0),_("p",vi,[_("a",{target:"license",href:a.licenseUrl},x(e.$t("qdetails-license")),9,_i)])])])}]]),ki=["id","aria-controls","aria-expanded"],Ii=["id"],xi=m({name:"Dropdown",props:["id","position","tip"],components:{TooltipSpan:M},data:function(){return{open:!1,closetimer:null}},methods:{triggerOpen(e){this.open="boolean"==typeof e?e:!this.open,this.open?this.$nextTick(()=>{this.$refs.pane.style.right="",this.$refs.pane.style.left="";const e=this.$refs.pane.getBoundingClientRect(),t=document.documentElement.clientWidth;e.right>t?this.$refs.pane.style.right="12px":e.left<0&&(this.$refs.pane.style.left="12px")}):this.$refs.button.focus()},handleFocusout(){this.closetimer=setTimeout(()=>{this.open=!1},50)},handleFocusin(){clearTimeout(this.closetimer)}}},[["render",function(e,t,s,n,i,a){const o=b("tooltip-span");return v(),w("span",{onKeydown:t[3]||(t[3]=T(e=>a.triggerOpen(!1),["esc"])),class:"dropdown-wrap",onFocusin:t[4]||(t[4]=(...e)=>a.handleFocusin&&a.handleFocusin(...e)),onFocusout:t[5]||(t[5]=(...e)=>a.handleFocusout&&a.handleFocusout(...e))},[q(o,{show:!e.open&&s.tip,tip:s.tip},{default:C(()=>[_("span",{id:s.id,ref:"button",role:"button",tabindex:"0",onClick:t[0]||(t[0]=(...e)=>a.triggerOpen&&a.triggerOpen(...e)),onKeydown:[t[1]||(t[1]=T(E((...e)=>a.triggerOpen&&a.triggerOpen(...e),["prevent"]),["enter"])),t[2]||(t[2]=T(E((...e)=>a.triggerOpen&&a.triggerOpen(...e),["prevent"]),["space"]))],class:"dropdown-button noselect","aria-controls":s.id+"_pane","aria-expanded":e.open?"true":"false"},[D(e.$slots,"button")],40,ki)]),_:3},8,["show","tip"]),q(Q,{name:"fade"},{default:C(()=>[e.open?(v(),w("div",{key:0,class:"dropdown-pane",id:s.id+"_pane",ref:"pane"},[D(e.$slots,"default")],8,Ii)):k("",!0)]),_:3})],32)}]]),$i={class:"headericons"},Ti=m({name:"QuestionHeaderIcons",props:["showscore","curQData","qn","showretry"],components:{Dropdown:xi,Icons:f,QuestionDetailsPane:qi,TooltipSpan:M},computed:{dispqn(){return parseInt(this.qn)+1},scoreDisplay(){return 0===this.dispqn?"":this.showscore&&this.curQData.hasOwnProperty("gbscore")&&this.curQData.tries_max>1?this.curQData.gbscore+"/"+this.$t("header-pts",{n:this.curQData.points_possible}):this.$t("header-pts",{n:this.curQData.points_possible})},scoreTip(){return this.showscore&&this.curQData.hasOwnProperty("gbscore")&&this.curQData.tries_max>1?this.$t("qdetails-gbscore"):this.$t("header-possible",{n:this.curQData.points_possible})},retryInfo(){if(this.qn<0)return{};let e,t;if(this.curQData.hasOwnProperty("tries_remaining_range")){const s=this.curQData.tries_remaining_range;e=this.$t("qinfo-tries_remaining_range",{min:s[0],max:s[1]}),t=s[0]+"-"+s[1]}else e=this.$t("qinfo-tries_remaining",{n:this.curQData.tries_remaining}),t=this.curQData.tries_remaining;return{msg:e,cnt:t}},showDetails(){if(this.qn<0)return!1;const e=this.curQData.hasOwnProperty("category")&&""!==this.curQData.category;return this.curQData.has_details||e||this.curQData.hasOwnProperty("gbscore")}}},[["render",function(e,t,s,n,i,a){const o=b("icons"),r=b("tooltip-span"),l=b("question-details-pane"),u=b("dropdown");return v(),w("div",$i,[""!==a.scoreDisplay?(v(),S(r,{key:0,tip:a.scoreTip,tabindex:"0"},{default:C(()=>[q(o,{name:"square-check",alt:"qdetails-gbscore"}),$(" "+x(a.scoreDisplay),1)]),_:1},8,["tip"])):k("",!0),s.qn>=0&&s.curQData.canretry&&!1!==s.showretry?(v(),S(r,{key:1,tip:a.retryInfo.msg,tabindex:"0"},{default:C(()=>[q(o,{name:"retry"}),$(" "+x(a.retryInfo.cnt),1)]),_:1},8,["tip"])):k("",!0),s.qn>=0&&s.curQData.canregen&&!1!==s.showretry?(v(),S(r,{key:2,tip:e.$t("qinfo-regens_remaining",{n:s.curQData.regens_remaining}),tabindex:"0"},{default:C(()=>[q(o,{name:"retake"}),$(" "+x(s.curQData.regens_remaining),1)]),_:1},8,["tip"])):k("",!0),a.showDetails?(v(),S(u,{key:3,id:"qd-dd-"+s.qn,class:"question-details"},{button:C(()=>[q(o,{name:"info",size:"medium"}),$(" "+x(e.$t("header-details")),1)]),default:C(()=>[q(l,{qn:s.qn},null,8,["qn"])]),_:1},8,["id"])):k("",!0)])}]]),Pi=e("a",{computed:{qsAttempted(){const e=[];for(const t in qo.assessInfo.questions)e[t]=0,"by_assessment"===qo.assessInfo.submitby&&1===qo.assessInfo.questions[t].tries_max&&qo.assessInfo.questions[t].hasOwnProperty("parts_entered")&&qo.assessInfo.questions[t].hasOwnProperty("answeights")?qo.assessInfo.questions[t].parts_entered.length>=qo.assessInfo.questions[t].answeights.length?e[t]=1:qo.assessInfo.questions[t].parts_entered.length>0&&(e[t]=.5):qo.assessInfo.questions[t].try>0&&(e[t]=1);return e}}}),Ai={class:"full-question-header"},Oi={style:{"flex-grow":"1"}},Si={key:0,class:"small subdued"},Di=e("F",m({name:"SkipQuestionHeader",props:["qn","showretry"],components:{QuestionHeaderIcons:Ti,Icons:f},mixins:[Pi],data:function(){return{}},computed:{ainfo:()=>qo.assessInfo,curQData(){return qo.assessInfo.questions[this.qn]},dispqn(){return parseInt(this.qn)+1},statusIcon(){if(0===this.dispqn)return"none";if("unattempted"===this.curQData.status){if(1===this.qsAttempted[this.qn])return"attempted";if(this.qsAttempted[this.qn]>0)return"partattempted"}return this.curQData.status},nameHover(){return 0!==this.curQData.withdrawn?this.$t("header-withdrawn"):""}}},[["render",function(e,t,s,n,i,a){const o=b("icons"),r=b("question-header-icons");return v(),w("div",Ai,[_("div",Oi,[q(o,{name:a.statusIcon,class:"qstatusicon"},null,8,["name"]),_("h2",{class:I({inlineheader:!0,greystrike:0!==a.curQData.withdrawn})},[$(x(e.$t("question_n",{n:a.dispqn}))+" ",1),a.curQData.extracredit?(v(),w("em",Si,x(e.$t("extracredit")),1)):k("",!0)],2)]),q(r,{showscore:!0,curQData:a.curQData,qn:s.qn,showretry:s.showretry},null,8,["curQData","qn","showretry"])])}]])),Ei=["id"],Ci=["aria-selected","onClick","onKeydown","aria-controls","id"],Qi=["id","aria-labelledby"],Mi={class:"home"},Li={class:"flexpanes"},ji={style:{"flex-grow":"1"}},Ri=["innerHTML"],Ni={key:1},Vi={id:"excusedlist"},Fi={key:2},Gi={key:0},Bi=m({name:"Summary",components:{SummaryHeader:Ys,SummaryScoreTotal:nn,SummaryGbScore:ls,SummaryScoreList:vn,SummaryCategories:R,SummaryReshowQuestions:m({name:"SummaryReshowQuestions",props:["active"],components:{Question:ci,FullQuestionHeader:Di},computed:{questions:()=>qo.assessInfo.questions}},[["render",function(e,t,s,n,i,a){const o=b("full-question-header"),r=b("question");return v(),w("div",null,[(v(!0),w(g,null,y(a.questions,(e,t)=>(v(),w("div",{key:t},[q(o,{qn:t,showretry:!1},null,8,["qn"]),(v(),S(r,{qn:t,key:"sq"+t,active:s.active,disabled:!0},null,8,["qn","active"]))]))),128))])}]]),SummaryDiagInfo:In,PreviousAttempts:as,VueTabs:m({name:"VueTabs",props:["id"],data:function(){return{activeTabHash:"",tabs:[]}},provide(){return{addTab:e=>{1===this.tabs.push(e)&&(this.activeTabHash=e.hash)},activeTabHash:o(()=>this.activeTabHash)}},methods:{setActive(e){this.activeTabHash=this.tabs[e].hash,this.$nextTick(()=>{document.getElementById(this.tabs[e].hash).focus()})},setFocus(e){this.$refs.tab[e].focus()},handleKey(e,t){const s=this.tabs.length,n=e.key.toLowerCase();let i=!1;"enter"===n||" "===n?(this.setActive(t),i=!0):"arrowleft"===n?(this.setFocus((t-1+s)%s),i=!0):"arrowright"===n?(this.setFocus((t+1)%s),i=!0):"home"===n?(this.setFocus(0),i=!0):"end"===n&&(this.setFocus(s-1),i=!0),i&&(e.preventDefault(),e.stopPropagation())}}},[["render",function(e,t,s,n,i,a){return v(),w("div",null,[_("ul",{class:"vuetablist",id:s.id},[(v(!0),w(g,null,y(e.tabs,(t,s)=>(v(),w("li",{key:s,class:I({active:t.hash===e.activeTabHash}),"aria-selected":t.hash===e.activeTabHash,ref_for:!0,ref:"tab",tabindex:"0",onClick:e=>a.setActive(s),onKeydown:e=>a.handleKey(e,s),"aria-controls":t.hash,id:t.hash+"_tab"},x(t.name),43,Ci))),128))],8,Ei),D(e.$slots,"default",{ref:"slot"})])}]]),VueTab:m({name:"VueTab",data:function(){return{active:!1,delayedactive:!1,hash:""}},props:["name"],inject:["addTab","activeTabHash"],created(){this.hash="vuetab_"+this.name.toLowerCase().replace(/ /g,"-"),this.addTab({name:this.name,hash:this.hash})},watch:{activeTabHash(){this.active=this.activeTabHash===this.hash,this.active?this.$nextTick(()=>{this.delayedactive=!0}):this.delayedactive=!1}}},[["render",function(e,t,s,n,i,a){return P((v(),w("div",{tabindex:"0",id:e.hash,"aria-labelledby":e.hash+"_tab",class:"vuetabpanel"},[D(e.$slots,"default",{active:e.delayedactive})],8,Qi)),[[j,e.active]])}]])},data:function(){return{activeTab:0}},computed:{ainfo:()=>qo.assessInfo,hasScore:()=>qo.assessInfo.hasOwnProperty("score"),showTotal(){return"none"!==this.ainfo.showscores},showScores(){return"during"===this.ainfo.showscores||"at_end"===this.ainfo.showscores},showReviewQ(){return this.ainfo.questions&&null!==this.ainfo.questions[0].html},hasCategories(){let e=!1;if(!this.showScores)return!1;for(const t in this.ainfo.questions)if(this.ainfo.questions[t].hasOwnProperty("category")&&""!==this.ainfo.questions[t].category&&null!==this.ainfo.questions[t].category){e=!0;break}return e}},methods:{loadScoresIfNeeded(){this.hasScore||ko.getScores()}},created(){this.loadScoresIfNeeded()},updated(){this.loadScoresIfNeeded()}},[["render",function(e,t,s,n,i,a){const o=b("summary-header"),r=b("summary-diag-info"),l=b("summary-score-total"),u=b("summary-score-list"),c=b("summary-categories"),d=b("vue-tab"),p=b("summary-reshow-questions"),h=b("vue-tabs"),m=b("summary-gb-score"),f=b("previous-attempts");return v(),w("div",Mi,[q(o,{class:"headerpane"}),_("div",Li,[_("div",ji,[q(r),q(l),a.ainfo.hasOwnProperty("endmsg")&&""!=a.ainfo.endmsg?(v(),w("div",{key:0,innerHTML:a.ainfo.endmsg,class:"introtext"},null,8,Ri)):k("",!0),a.ainfo.hasOwnProperty("newexcused")&&Object.keys(a.ainfo.newexcused).length>0?(v(),w("div",Ni,[_("p",null,x(e.$t("summary-new_excused")),1),_("ul",Vi,[(v(!0),w(g,null,y(a.ainfo.newexcused,(e,t)=>(v(),w("li",{key:t},x(e),1))),128))])])):k("",!0),a.showScores?(v(),w("div",Fi,[q(h,{id:"scoretabs"},{default:C(()=>[q(d,{name:e.$t("summary-scorelist")},{default:C(()=>[q(u),t[0]||(t[0]=_("p",null," ",-1)),a.hasCategories?(v(),S(c,{key:0,data:a.ainfo.questions},null,8,["data"])):k("",!0)]),_:1},8,["name"]),a.showReviewQ?(v(),S(d,{key:0,name:e.$t("summary-reshowquestions")},{default:C(({active:e})=>[q(p,{active:e},null,8,["active"])]),_:1},8,["name"])):k("",!0)]),_:1})])):k("",!0)]),a.ainfo.hasOwnProperty("prev_attempts")&&a.ainfo.prev_attempts.length>0?(v(),w("div",Gi,[q(m),q(f,{caption:e.$t("prev-all_attempts")},null,8,["caption"])])):k("",!0)])])}]]),Hi={key:2,class:"sronly"},Ui=e("T",m({name:"Timer",props:["end","total","grace"],components:{Icons:f},data:function(){return{hours:0,minutes:0,seconds:0,timeString:"",interval:null,open:!0,gaveWarning:!1}},created(){this.updateTimer(),this.interval=setInterval(this.updateTimer,1e3)},mounted(){var e=window.$("#timerbox"),t=e.offset();window.$(window).scroll(function(){window.$(window).scrollTop()>=t.top?e.addClass("sticky"):e.removeClass("sticky")})},beforeUnmount(){clearInterval(this.interval)},computed:{warningTime(){return Math.max(60,Math.min(.05*this.total,300))}},methods:{updateTimer:function(){const e=(new Date).getTime();this.timeString="";let t=Math.max(0,this.end-e);0===t&&this.grace>0&&(t=Math.max(0,this.grace-e),this.timeString+=this.$t("timer-overtime")+" "),!this.gaveWarning&&t<1e3*this.warningTime&&(this.open=!0,this.gaveWarning=!0),this.hours=Math.floor(t/36e5),this.minutes=Math.floor(t%36e5/6e4),this.seconds=Math.floor(t%6e4/1e3),0===this.hours&&this.minutes<5?(this.timeString+=this.hours>0?this.hours+":":"",this.timeString+=(this.minutes<10?"0":"")+this.minutes+":",this.timeString+=(this.seconds<10?"0":"")+this.seconds):(this.timeString+=this.hours>0?this.hours+this.$t("timer-hrs",{n:this.hours}):"",this.timeString+=this.minutes>0?this.minutes+this.$t("timer-min",{n:this.minutes}):"")},toggleShow:function(){this.open=!this.open}}},[["render",function(e,t,s,n,i,a){const o=b("icons");return v(),w("button",{type:"button",class:"plain",id:"timerbox",onClick:t[0]||(t[0]=(...e)=>a.toggleShow&&a.toggleShow(...e))},[q(o,{name:"timer",size:"small"}),e.open?(v(),w("span",{key:0,class:I({noticetext:0===e.hours&&60*e.minutes+e.seconds<a.warningTime})},x(e.timeString),3)):k("",!0),e.open?(v(),S(o,{key:1,name:"close",size:"small",color:"subdued"})):(v(),w("span",Hi,x(e.$t("timer-show")),1))])}]])),Wi={class:"home"},zi={class:"assess-header headerpane"},Ki={style:{"flex-grow":"1"}},Ji={key:0},Yi={key:0},Xi={key:1},Zi={key:1},ea=m({name:"Summary",components:{Question:ci,FullQuestionHeader:Di,ShowworkInput:Jn,Timer:Ui},data:function(){return{loaded:!1,duringAssess:!1,work:{}}},computed:{ainfo:()=>qo.assessInfo,mode:()=>qo.inAssess?"aftertake":"gb",readyToShow(){return"gb"===this.mode&&qo.assessInfo.hasOwnProperty("questions")||"aftertake"===this.mode&&qo.assessInfo.hasOwnProperty("score")},hasScore:()=>qo.assessInfo.hasOwnProperty("score"),questions(){var e={};for(var t in qo.assessInfo.questions)2&qo.assessInfo.questions[t].showwork&&(e[t]=qo.assessInfo.questions[t]);return e},saveLabel(){return qo.inAssess?this.$t("work-save_continue"):this.$t("work-save")}},methods:{loadScoresIfNeeded(){"gb"!==this.mode||this.readyToShow?"aftertake"!==this.mode||this.readyToShow||ko.getScores():ko.getQuestions()},workChanged(e,t){qo.work[e]=t},save(){ko.submitWork()}},created(){this.loadScoresIfNeeded()},updated(){this.loadScoresIfNeeded()}},[["render",function(e,t,s,n,i,a){const o=b("timer"),r=b("full-question-header"),l=b("question"),u=b("showwork-input");return v(),w("div",Wi,[_("div",zi,[_("div",Ki,[_("h1",null,x(e.$t("work-add"))+": "+x(a.ainfo.name),1)]),a.ainfo.showwork_cutoff>0?(v(),S(o,{key:0,total:60*a.ainfo.showwork_cutoff,end:a.ainfo.showwork_local_cutoff_expires,grace:0},null,8,["total","end"])):k("",!0),_("div",null,[_("button",{onClick:t[0]||(t[0]=(...e)=>a.save&&a.save(...e)),class:"primary"},x(a.saveLabel),1)])]),a.readyToShow?(v(),w("div",Ji,[a.ainfo.showwork_cutoff>0?(v(),w("p",Yi,x(e.$t("work-duein",{date:a.ainfo.showwork_cutoff_expires_disp})),1)):k("",!0),0===a.questions.length?(v(),w("p",Xi,x(e.$t("work-noquestions")),1)):k("",!0),(v(!0),w(g,null,y(a.questions,(e,t)=>(v(),w("div",{key:t},[q(r,{qn:t,showretry:!1},null,8,["qn"]),null!==e.html?(v(),S(l,{qn:t,key:"sq"+t,active:!0,disabled:!0,getwork:2,onWorkchanged:e=>a.workChanged(t,e)},null,8,["qn","onWorkchanged"])):(v(),w("div",Zi,[q(u,{id:"sw"+t,qn:t,value:e.work,rows:"3",onInput:e=>a.workChanged(t,e)},null,8,["id","qn","value","onInput"])]))]))),128)),_("div",null,[_("button",{onClick:t[1]||(t[1]=(...e)=>a.save&&a.save(...e)),class:"primary"},x(a.saveLabel),1)])])):k("",!0)])}]]),ta={key:0,id:"resource-pane"},sa={class:"pane-header"},na={class:"pane-body"},ia={style:{"flex-grow":"1","margin-right":"12px"}},aa=["onClick","title","aria-label"],oa=["href","target","title","aria-label"],ra=m({name:"ResourcePane",props:["showicon"],components:{Icons:f},computed:{assessResources:()=>qo.assessInfo.resources,docEl:()=>window.document.documentElement},methods:{popout(e){window.GB_show(e.label,e.link,760,"auto",!1,"left",["skip-question-header","assess-header","resource-dropdown"])}}},[["render",function(e,t,s,n,i,a){const o=b("icons");return a.assessResources.length>0?(v(),w("div",ta,[_("div",sa,[s.showicon?(v(),S(o,{key:0,name:"file"})):k("",!0),t[0]||(t[0]=$(" Resources ",-1))]),_("div",na,[(v(!0),w(g,null,y(a.assessResources,(t,s)=>(v(),w("div",{key:s,class:"flexrow"},[_("span",ia,x(t.label),1),_("button",{onClick:e=>a.popout(t),class:"min1000",title:e.$t("resource-sidebar"),"aria-label":e.$t("resource-sidebar")+" "+t.label},[q(o,{name:"sidebar",alt:""})],8,aa),_("a",{class:"abutton",href:t.link,target:"res"+s,title:e.$t("resource-newtab"),"aria-label":e.$t("resource-newtab")+" "+t.label},[q(o,{name:"extlink",alt:""})],8,oa)]))),128))])])):k("",!0)}]]),la=["href","aria-label"],ua={key:0,class:"badgeicon"},ca=["aria-label"],da={style:{"flex-grow":"1"}},pa={class:"med-left subdued"},ha={class:"flexgroup"},ma=["disabled"],fa=["disabled"],wa={class:"assess-header"},ga=["href","aria-label"],ya=["aria-label","aria-checked"],ba=e("A",m({name:"AssessHeader",components:{Icons:f,LtiMenu:m({name:"LtiMenu",components:{MenuButton:N,Icons:f},computed:{LtiOptions(){const e=[];return e.push({label:this.$t("lti-userprefs"),onclick:()=>{window.GB_show(this.$t("lti-userprefs"),qo.APIbase+"../admin/ltiuserprefs.php?cid="+qo.cid+"&greybox=true",800,"auto",!0,0,0,{label:"Update Info",func:"doSubmit"})}}),qo.assessInfo.in_practice&&qo.assessInfo.prev_attempts.length>0&&e.push({label:this.$t("closed-view_scored"),link:qo.APIbase+"gbviewassess.php?cid="+qo.cid+"&aid="+qo.aid+"&uid="+qo.uid,target:"_self"}),qo.assessInfo.can_use_latepass&&e.push({label:this.$t("lti-use_latepass"),link:qo.APIbase+"../course/redeemlatepass.php?cid="+qo.cid+"&aid="+qo.aid,target:"_self"}),e}}},[["render",function(e,t,s,n,i,a){const o=b("icons"),r=b("menu-button");return v(),S(r,{options:a.LtiOptions,position:"right",nobutton:"true",noarrow:"true",searchby:"label",id:"ltimenubutton",header:e.$t("lti-more")},{button:C(()=>[q(o,{name:"more",size:"medium"})]),_:1},8,["options","header"])}]]),Dropdown:xi,ResourcePane:ra,Timer:Ui,TooltipSpan:M,BadgedIcon:m({name:"BadgedIcon",props:["link","icon","label","cnt"],components:{Icons:f,TooltipSpan:M},computed:{msglink:()=>qo.APIbase+"../msgs/msglist.php?cid="+qo.cid,msgcnt:()=>qo.assessInfo.lti_msgcnt}},[["render",function(e,t,s,n,i,a){const o=b("icons"),r=b("tooltip-span");return v(),S(r,{tip:e.$t(s.label,{n:s.cnt}),style:{display:"inline-block"},hasbutton:!0},{default:C(()=>[_("a",{href:s.link,class:"noextlink badgewrap",target:"_blank","aria-label":e.$t(s.label,{n:s.cnt})},[q(o,{name:s.icon,size:"medium"},null,8,["name"]),s.cnt>0?(v(),w("div",ua,x(s.cnt),1)):k("",!0)],8,la)]),_:1},8,["tip"])}]])},data:function(){return{resourceMenuShowing:!1}},mixins:[Pi],computed:{ainfo:()=>qo.assessInfo,canSubmit:()=>!qo.inTransit,primarySubmit(){return"by_assessment"===this.ainfo.submitby&&Object.keys(qo.initValues).length===this.ainfo.questions.length||"by_question"===this.ainfo.submitby&&this.qAttempted===this.ainfo.questions.length},curScorePoints(){let e=0,t=0;for(const s in this.ainfo.questions)0===this.ainfo.questions[s].extracredit&&(e+=1*this.ainfo.questions[s].points_possible),this.ainfo.show_scores_during&&this.ainfo.questions[s].hasOwnProperty("gbscore")&&(t+=1*this.ainfo.questions[s].gbscore);return t=Math.round(1e3*t)/1e3,this.ainfo.in_practice?this.$t("header-practicescore",{pts:t,poss:e}):this.ainfo.show_scores_during?this.$t("header-score",{pts:t,poss:e}):this.$t("header-possible",{n:e})},qAttempted(){let e=0;for(let t=0;t<this.qsAttempted.length;t++)1===this.qsAttempted[t]&&e++;return e},curAnswered(){const e=this.ainfo.questions.length;return this.$t("header-answered",{n:this.qAttempted,tot:e})},assessSubmitLabel(){return"by_assessment"===this.ainfo.submitby?this.$t("header-assess_submit"):this.hasShowWorkAfter&&!this.ainfo.in_practice?this.$t("work-add"):"during"===this.ainfo.showscores?this.$t("header-done"):""},saveStatus:()=>qo.autoSaving?1:0!==Object.keys(qo.autosaveQueue).length||qo.somethingDirty?3:2,saveStatusMsg(){return 1===this.saveStatus?this.$t("header-work_saving"):2===this.saveStatus?this.$t("header-work_saved"):(this.saveStatus,"")},showPrint(){return 1!==this.ainfo.noprint},printLink:()=>window.location.pathname+window.location.search+"#/print",MQenabled:()=>qo.enableMQ,hasShowWorkAfter(){let e=!1;if(qo.assessInfo.hasOwnProperty("showwork_cutoff_in")&&qo.assessInfo.showwork_cutoff_in<0)return!1;for(let t=0;t<qo.assessInfo.questions.length;t++)if(2&qo.assessInfo.questions[t].showwork){e=!0;break}return e},msglink:()=>qo.APIbase+"../msgs/msglist.php?cid="+qo.cid,forumlink(){return qo.APIbase+"../forums/thread.php?cid="+qo.cid+"&forum= "+this.ainfo.help_features.forum}},methods:{handleSubmit(){"by_assessment"===this.ainfo.submitby?ko.submitAssessment():ko.gotoSummary()},handleSaveWork(){0===Object.keys(qo.autosaveQueue).length?(qo.autoSaving=!0,setTimeout(()=>{qo.autoSaving=!1,qo.somethingDirty=!1},300)):ko.submitAutosave()},toggleMQuse(){qo.enableMQ?ko.disableMQ():ko.enableMQ()}}},[["render",function(e,t,s,n,i,a){const o=b("timer"),r=b("icons"),l=b("resource-pane"),u=b("dropdown"),c=b("tooltip-span"),d=b("badged-icon"),p=b("lti-menu");return v(),w("div",{id:"assess-header",class:I({"assess-header":!0,headerpane:!0,practice:a.ainfo.in_practice}),role:"region","aria-label":e.$t("regions-aheader")},[_("div",da,[_("h1",null,x(a.ainfo.name),1),_("div",null,[_("span",{class:I({practicenotice:a.ainfo.in_practice})},x(a.curScorePoints),3),t[3]||(t[3]=$()),_("span",pa,x(a.curAnswered),1)])]),a.ainfo.timelimit>0?(v(),S(o,{key:0,total:a.ainfo.timelimit,end:a.ainfo.timelimit_local_expires,grace:a.ainfo.timelimit_local_grace},null,8,["total","end","grace"])):k("",!0),_("div",ha,[a.saveStatus>0?(v(),w("span",{key:0,class:I(["noticetext",3===a.saveStatus?"sr-only":""]),"aria-live":"polite","aria-atomic":"true"},x(a.saveStatusMsg),3)):k("",!0),3===a.saveStatus?(v(),w("button",{key:1,class:"secondary",onClick:t[0]||(t[0]=(...e)=>a.handleSaveWork&&a.handleSaveWork(...e)),disabled:!a.canSubmit},x(e.$t("header-work_save")),9,ma)):k("",!0),""!==a.assessSubmitLabel?(v(),w("button",{key:2,class:I({primary:a.primarySubmit,secondary:!a.primarySubmit}),onClick:t[1]||(t[1]=(...e)=>a.handleSubmit&&a.handleSubmit(...e)),disabled:!a.canSubmit},x(a.assessSubmitLabel),11,fa)):k("",!0)]),_("div",wa,[a.ainfo.resources.length>0?(v(),S(u,{key:0,id:"resource-dropdown",tip:e.$t("header-resources_header")},{button:C(()=>[q(r,{name:"file",size:"medium"})]),default:C(()=>[q(l)]),_:1},8,["tip"])):k("",!0),a.showPrint?(v(),S(c,{key:1,tip:e.$t("print-print_version"),hasbutton:!0},{default:C(()=>[_("a",{href:a.printLink,class:"noextlink",target:"_blank","aria-label":e.$t("print-print_version")},[q(r,{name:"print",size:"medium"})],8,ga)]),_:1},8,["tip"])):k("",!0),q(c,{tip:e.$t("header-use_mq"),style:{display:"inline-block"},hasbutton:!0},{default:C(()=>[_("button",{onClick:t[2]||(t[2]=(...e)=>a.toggleMQuse&&a.toggleMQuse(...e)),role:"switch",class:I({plain:!0,"switch-toggle":!0}),"aria-label":e.$t("header-use_mq"),"aria-checked":a.MQenabled},[q(r,{name:a.MQenabled?"eqned":"eqnedoff",color:a.MQenabled?"#060":"#600",size:"medium"},null,8,["name","color"]),t[4]||(t[4]=_("span",{class:"switch-toggle__ui"},null,-1))],8,ya)]),_:1},8,["tip"]),a.ainfo.is_lti&&a.ainfo.lti_showmsg?(v(),S(d,{key:2,link:a.msglink,icon:"message",label:"lti-msgs",cnt:a.ainfo.lti_msgcnt},null,8,["link","cnt"])):k("",!0),a.ainfo.is_lti&&a.ainfo.help_features.forum>0?(v(),S(d,{key:3,link:a.forumlink,icon:"forum",label:"lti-forum",cnt:a.ainfo.lti_forumcnt},null,8,["link","cnt"])):k("",!0),q(p)])],10,ca)}]])),va={class:"flex-nowrap-center"},_a={class:"qname-wrap"},qa=["title"],ka={key:0,class:"small subdued"},Ia={key:1,class:"subdued"},xa={key:2,class:"redoicon"},$a={key:3,class:"redoicon"},Ta={id:"skip-question-header"},Pa={class:"flexrow wrap",style:{"flex-grow":"1"}},Aa=["aria-label"],Oa=["onClick","onKeypress","disabled","aria-label","title"],Sa=["onClick","onKeypress","disabled","aria-label","title"],Da=m({name:"SkipQuestionHeader",props:["qn"],components:{QuestionHeaderIcons:Ti,Icons:f,MenuButton:N,SkipQuestionListItem:m({name:"SkipQuestionListItem",props:["option","showretry","showretake","selected"],components:{Icons:f},computed:{statusIcon(){return 0===this.option.dispqn?"none":this.option.status},nameDisp(){return 0===this.option.dispqn?this.$t("intro"):this.$t("question_n",{n:this.option.dispqn})},nameHover(){return 0!==this.option.withdrawn?this.$t("header-withdrawn"):""},scoreDisplay(){return 0===this.option.dispqn?"":this.option.hasOwnProperty("gbscore")&&this.option.tries_max>1?this.option.gbscore+"/"+this.$t("header-pts",{n:this.option.points_possible}):"("+this.$t("header-pts",{n:this.option.points_possible})+")"}}},[["render",function(e,t,s,n,i,a){const o=b("icons");return v(),w("span",va,[s.option.dispqn>0?(v(),S(o,{key:0,name:a.statusIcon,class:"qstatusicon"},null,8,["name"])):k("",!0),_("span",_a,[_("span",{class:I({greystrike:s.option.withdrawn>0}),title:a.nameHover},[$(x(a.nameDisp)+" ",1),s.option.extracredit?(v(),w("em",ka,x(e.$t("extracredit")),1)):k("",!0)],10,qa)]),""===a.scoreDisplay||s.selected?k("",!0):(v(),w("span",Ia,x(a.scoreDisplay),1)),s.showretry&&!s.selected?(v(),w("span",xa,[s.option.canretry?(v(),S(o,{key:0,name:"retry"})):k("",!0)])):k("",!0),s.showretake&&!s.selected?(v(),w("span",$a,[s.option.regens_remaining?(v(),S(o,{key:0,name:"retake"})):k("",!0)])):k("",!0)])}]])},mixins:[Pi],data:function(){return{}},computed:{ainfo:()=>qo.assessInfo,curQData(){return qo.assessInfo.questions[this.qn]},dispqn(){return parseInt(this.qn)+1},hasIntro:()=>""!==qo.assessInfo.intro||qo.assessInfo.resources.length>0,navOptions(){var e=[];this.hasIntro&&e.push({internallink:"/skip/0",dispqn:0,withdrawn:0});for(const t in qo.assessInfo.questions){const s=parseInt(t)+1,n={internallink:"/skip/"+s,dispqn:s};for(const e in qo.assessInfo.questions[t])n[e]=qo.assessInfo.questions[t][e];"unattempted"===n.status&&(1===this.qsAttempted[t]?n.status="attempted":this.qsAttempted[t]>0&&(n.status="partattempted")),e.push(n)}return e},showScore(){return this.qn>-1&&qo.assessInfo.questions[this.qn].hasOwnProperty("gbscore")},anyHaveRetry(){for(const e in qo.assessInfo.questions)if(qo.assessInfo.questions[e].canretry)return!0;return!1},anyHaveRetake(){for(const e in qo.assessInfo.questions)if(qo.assessInfo.questions[e].regens_remaining)return!0;return!1},curOption(){return this.hasIntro?this.dispqn:this.dispqn-1},showNextPrev(){return Object.keys(this.navOptions).length>1}},methods:{changeQuestion(e){}}},[["render",function(e,t,s,n,i,a){const o=b("skip-question-list-item"),r=b("menu-button"),l=b("icons"),u=b("router-link"),c=b("question-header-icons");return v(),w("div",Ta,[_("div",Pa,[_("div",{id:"skip-question-select",role:"navigation","aria-label":e.$t("regions-qnav")},[q(r,{id:"qnav",options:a.navOptions,selected:a.curOption,onChange:a.changeQuestion,searchby:"dispqn"},{default:C(({option:e,selected:t})=>[q(o,{showretry:a.anyHaveRetry,showretake:a.anyHaveRetake,option:e,selected:t},null,8,["showretry","showretake","option","selected"])]),_:1},8,["options","selected","onChange"]),a.showNextPrev?(v(),S(u,{key:0,to:"/skip/"+(a.dispqn-1),custom:""},{default:C(({navigate:t})=>[_("button",{type:"button",onClick:t,onKeypress:T(t,["enter"]),role:"link",disabled:s.qn<(this.hasIntro?0:1),class:"secondarybtn",id:"qprev","aria-label":e.$t("previous"),title:e.$t("previous")},[q(l,{name:"left"})],40,Oa)]),_:1},8,["to"])):k("",!0),a.showNextPrev?(v(),S(u,{key:1,to:"/skip/"+(a.dispqn+1),custom:""},{default:C(({navigate:t})=>[_("button",{type:"button",onClick:t,onKeypress:T(t,["enter"]),role:"link",disabled:s.qn>=a.ainfo.questions.length-1,class:"secondarybtn",id:"qnext","aria-label":e.$t("next"),title:e.$t("next")},[q(l,{name:"right"})],40,Sa)]),_:1},8,["to"])):k("",!0)],8,Aa)]),q(c,{showscore:a.showScore,curQData:a.curQData,qn:s.qn,showretry:!0},null,8,["showscore","curQData","qn"])])}]]),Ea={key:0},Ca=m({name:"InterQuestionTextSkiplist",props:["qn","pos"],components:{InterQuestionText:V},computed:{lastQuestion:()=>qo.assessInfo.questions.length-1,showtext(){const e=[];for(const t in this.texts){const s=this.texts[t];e[t]="before"===this.pos&&this.qn>=s.displayBefore&&this.qn<=s.displayUntil||"after"===this.pos&&this.qn===this.lastQuestion}return e},texts(){if(!qo.assessInfo.hasOwnProperty("interquestion_text"))return[];const e=[];for(const t in qo.assessInfo.interquestion_text){const s=qo.assessInfo.interquestion_text[t];("before"===this.pos&&s.displayBefore<=this.lastQuestion||"after"===this.pos&&s.displayBefore>this.lastQuestion)&&""!==s.text&&e.push({html:s.text,expanded:!0,displayBefore:s.displayBefore,displayUntil:s.displayUntil})}return e}}},[["render",function(e,t,s,n,i,a){const o=b("inter-question-text");return a.texts.length>0?(v(),w("div",Ea,[(v(!0),w(g,null,y(a.texts,(e,t)=>(v(),w("div",{key:t},[P(q(o,{class:"questionpane introtext",textobj:e,active:a.showtext[t]},null,8,["textobj","active"]),[[j,a.showtext[t]]])]))),128))])):k("",!0)}]]),Qa={class:"questionpane introtext"},Ma=["innerHTML"],La=e("I",m({name:"IntroText",components:{ResourcePane:ra},props:["html","active"],mounted(){""!==this.html&&(setTimeout(window.drawPics,100),window.rendermathnode(this.$refs.introtext),window.initSageCell(this.$refs.introtext),window.initlinkmarkup(this.$refs.introtext))},watch:{active:function(e,t){!1===e&&""!==this.html&&L(this.$refs.introtext)}}},[["render",function(e,t,s,n,i,a){const o=b("resource-pane");return P((v(),w("div",Qa,[""!==s.html?(v(),w("div",{key:0,innerHTML:s.html,ref:"introtext"},null,8,Ma)):k("",!0),q(o,{showicon:!0,style:{display:"inline-block"}})],512)),[[j,s.active]])}]])),ja={class:"home"},Ra=["aria-label"],Na=["onClick","onKeypress"],Va=["aria-hidden"],Fa={class:"sr-only"},Ga=m({name:"skip",components:{SkipQuestionHeader:Da,Question:ci,InterQuestionTextSkiplist:Ca,AssessHeader:ba,IntroText:La,Icons:f},computed:{qn(){return parseInt(this.$route.params.qn)-1},intro:()=>qo.assessInfo.intro,questionArray(){const e={};for(let t=0;t<qo.assessInfo.questions.length;t++)e[t]=t;return e}}},[["render",function(e,t,s,n,i,a){const o=b("assess-header"),r=b("skip-question-header"),l=b("intro-text"),u=b("icons"),c=b("router-link"),d=b("inter-question-text-skiplist"),p=b("question");return v(),w("div",ja,[_("a",{href:"#",class:"sr-only",id:"skipnav",onClick:t[0]||(t[0]=E(t=>e.$refs.scrollpane.focus(),["prevent"]))},x(e.$t("jumptocontent")),1),q(o),q(r,{qn:a.qn},null,8,["qn"]),_("div",{class:"scrollpane",role:"region",ref:"scrollpane",tabindex:"-1","aria-label":e.$t("regions-questions")},[q(l,{active:-1==a.qn,html:a.intro,key:"-1"},null,8,["active","html"]),-1==a.qn?(v(),S(c,{key:0,to:"/skip/1",custom:""},{default:C(({navigate:t})=>[_("button",{type:"button",onClick:t,onKeypress:T(t,["enter"]),role:"link"},[q(u,{name:"right",alt:""}),$(" "+x(e.$t("question-firstq")),1)],40,Na)]),_:1})):k("",!0),q(d,{pos:"before",qn:a.qn},null,8,["qn"]),(v(!0),w(g,null,y(a.questionArray,t=>(v(),w("div",{key:t,class:I({inactive:t!=a.qn}),"aria-hidden":t!=a.qn},[_("h2",Fa,x(e.$t("question_n",{n:t+1})),1),q(p,{qn:t,active:t==a.qn,getwork:1},null,8,["qn","active"])],10,Va))),128)),q(d,{pos:"after",qn:a.qn},null,8,["qn"])],8,Ra)])}]]),Ba={class:"home"},Ha={key:0,class:"headerpane noticetext"},Ua=["href"],Wa=["href"],za=["aria-label"],Ka={key:1},Ja=m({name:"Full",data:function(){return{showTexts:!0}},components:{Question:ci,AssessHeader:ba,FullQuestionHeader:Di,InterQuestionTextList:F,IntroText:La},computed:{intro:()=>qo.assessInfo.intro,hasIntro:()=>""!==qo.assessInfo.intro||qo.assessInfo.resources.length>0,isPreviewAll:()=>!!qo.assessInfo.preview_all,questionArray(){const e={};for(let t=0;t<qo.assessInfo.questions.length;t++)e[t]=t;return e},lastQ:()=>qo.assessInfo.questions.length-1,showSubmit:()=>"by_assessment"===qo.assessInfo.submitby,textToggleLabel(){return this.showTexts?this.$t("print-hide_text"):this.$t("print-show_text")},textList:()=>qo.assessInfo.hasOwnProperty("interquestion_text")?qo.assessInfo.interquestion_text:[],settingsLink:()=>"../course/addassessment2.php?id="+qo.aid+"&cid="+qo.cid,questionsLink:()=>"../course/addquestions2.php?aid="+qo.aid+"&cid="+qo.cid},methods:{submitAssess(){ko.submitAssessment()},showAllAns(){window.$("span[id^='ans']").removeClass("hidden").toggle(),window.$(".keybtn").attr("aria-expanded",function(e,t){return!JSON.parse(t)})}}},[["render",function(e,t,s,n,i,a){const o=b("assess-header"),r=b("intro-text"),l=b("inter-question-text-list"),u=b("full-question-header"),c=b("question");return v(),w("div",Ba,[_("a",{href:"#",class:"sr-only",id:"skipnav",onClick:t[0]||(t[0]=E(t=>e.$refs.scrollpane.focus(),["prevent"]))},x(e.$t("jumptocontent")),1),q(o),a.isPreviewAll?(v(),w("p",Ha,[$(x(e.$t("header-preview_all"))+" ",1),_("button",{type:"button",class:"secondary",onClick:t[1]||(t[1]=(...e)=>a.showAllAns&&a.showAllAns(...e))},x(e.$t("gradebook-show_all_ans")),1),_("button",{type:"button",class:"secondary",onClick:t[2]||(t[2]=t=>e.showTexts=!e.showTexts)},x(a.textToggleLabel),1),_("a",{href:a.settingsLink},x(e.$t("links-settings")),9,Ua),t[4]||(t[4]=$("  ",-1)),_("a",{href:a.questionsLink},x(e.$t("links-questions")),9,Wa)])):k("",!0),_("div",{class:"scrollpane fulldisp",role:"region",ref:"scrollpane",tabindex:"-1","aria-label":e.$t("regions-questions")},[a.hasIntro?(v(),S(r,{key:0,active:e.showTexts,html:a.intro},null,8,["active","html"])):k("",!0),(v(!0),w(g,null,y(a.questionArray,t=>(v(),w("div",{key:t},[P((v(),S(l,{pos:"beforeexact",qn:t,key:"iqt"+t,textlist:a.textList,lastq:a.lastQ,active:e.showTexts},null,8,["qn","textlist","lastq","active"])),[[j,e.showTexts]]),q(u,{qn:t},null,8,["qn"]),(v(),S(c,{qn:t,active:"true",key:"q"+t,getwork:1},null,8,["qn"]))]))),128)),P(q(l,{pos:"after",qn:a.lastQ,textlist:a.textList,lastq:a.lastQ,active:e.showTexts},null,8,["qn","textlist","lastq","active"]),[[j,e.showTexts]])],8,za),a.showSubmit?(v(),w("p",Ka,[_("button",{type:"button",class:"primary",onClick:t[3]||(t[3]=(...e)=>a.submitAssess&&a.submitAssess(...e))},x(e.$t("header-assess_submit")),1)])):k("",!0)])}]]),Ya={class:"home print"},Xa={class:"assess-header headerpane"},Za={style:{"flex-grow":"1"}},eo={class:"pii-full-name"},to={class:"hideonprint headerpane"},so={class:"scrollpane"},no=m({name:"Print",components:{Question:ci,FullQuestionHeader:Di,InterQuestionTextList:F,IntroText:La},data:function(){return{showTexts:!0,showQs:!0}},computed:{ainfo:()=>qo.assessInfo,intro:()=>qo.assessInfo.intro,questionArray(){const e={};for(let t=0;t<qo.assessInfo.questions.length;t++)e[t]=t;return e},lastQ:()=>qo.assessInfo.questions.length-1,textToggleLabel(){return this.showTexts?this.$t("print-hide_text"):this.$t("print-show_text")},qToggleLabel(){return this.showQs?this.$t("print-hide_qs"):this.$t("print-show_qs")},textList:()=>qo.assessInfo.hasOwnProperty("interquestion_text")?qo.assessInfo.interquestion_text:[]},methods:{doPrint(){window.print()}}},[["render",function(e,t,s,n,i,a){const o=b("intro-text"),r=b("inter-question-text-list"),l=b("full-question-header"),u=b("question");return v(),w("div",Ya,[_("div",Xa,[_("h1",Za,x(a.ainfo.name),1),_("div",null,[_("span",eo,x(a.ainfo.userfullname),1)])]),_("p",to,[_("strong",null,x(e.$t("print-print_version")),1),_("button",{type:"button",class:"primary",onClick:t[0]||(t[0]=(...e)=>a.doPrint&&a.doPrint(...e))},x(e.$t("print-print")),1),_("button",{type:"button",onClick:t[1]||(t[1]=t=>e.showTexts=!e.showTexts)},x(a.textToggleLabel),1),_("button",{type:"button",onClick:t[2]||(t[2]=t=>e.showQs=!e.showQs)},x(a.qToggleLabel),1)]),_("div",so,[""!==a.intro?(v(),S(o,{key:0,active:e.showTexts,html:a.intro},null,8,["active","html"])):k("",!0),_("div",null,[(v(!0),w(g,null,y(a.questionArray,t=>(v(),w("div",{key:t},[P((v(),S(r,{pos:"beforeexact",qn:t,key:"iqt"+t,textlist:a.textList,lastq:a.lastQ,active:e.showTexts},null,8,["qn","textlist","lastq","active"])),[[j,e.showTexts]]),e.showQs?(v(),S(l,{key:0,qn:t},null,8,["qn"])):k("",!0),P((v(),S(u,{class:"med-left",qn:t,active:e.showQs,key:"q"+t,disabled:!0},null,8,["qn","active"])),[[j,e.showQs]])]))),128)),P(q(r,{pos:"after",qn:a.lastQ,active:e.showTexts,textlist:a.textList,lastq:a.lastQ},null,8,["qn","active","textlist","lastq"]),[[j,e.showTexts]])])])])}]]),io={class:"flex-nowrap-center"},ao={class:"qname-wrap"},oo={class:"subdued nowrap"},ro=["aria-label"],lo=["onClick","onKeypress","disabled","aria-label"],uo=["onClick","onKeypress","disabled","aria-label"],co={class:"home"},po=["aria-label"],ho=["aria-hidden"],mo={key:0,class:"noqtext"},fo={key:1},wo={key:0},go={key:1},yo=m({name:"FullPaged",components:{Question:ci,AssessHeader:ba,FullPagedNav:m({name:"FullPagedNav",props:["page"],components:{Icons:f,MenuButton:N,FullPagedListItem:m({name:"FullPagedListItem",props:["option","selected"],components:{Icons:f},computed:{statusIcon(){return 0===this.option.disppage?"none":this.option.numquestions===this.option.numattempted?"attempted":"unattempted"},nameDisp(){return 0===this.option.disppage?this.$t("intro"):this.option.title},qStatus(){return 0===this.option.disppage||0===this.option.numquestions?"":this.$t("header-answered",{n:this.option.numattempted,tot:this.option.numquestions})}}},[["render",function(e,t,s,n,i,a){const o=b("icons");return v(),w("span",io,[_("span",ao,["none"!==a.statusIcon?(v(),S(o,{key:0,name:a.statusIcon,class:"qstatusicon"},null,8,["name"])):k("",!0),$(" "+x(a.nameDisp),1)]),_("span",oo,x(a.qStatus),1)])}]])},mixins:[Pi],data:function(){return{}},computed:{disppage(){return parseInt(this.page)+1},pagesData:()=>qo.assessInfo.interquestion_pages,hasIntro:()=>""!==qo.assessInfo.intro||qo.assessInfo.resources.length>0,navOptions(){var e=[];this.hasIntro&&(e[0]={internallink:"/full/page/0",title:this.$t("intro"),disppage:0});for(const t in this.pagesData){const s=parseInt(t)+1;let n=0;for(let e=0;e<this.pagesData[t][0].questions.length;e++){const s=this.pagesData[t][0].questions[e];("unattempted"!==qo.assessInfo.questions[s].status||1===this.qsAttempted[s])&&n++}e[s]={disppage:s,title:this.pagesData[t][0].pagetitle,internallink:"/full/page/"+s,numquestions:this.pagesData[t][0].questions.length,numattempted:n}}return e},showNextPrev(){return Object.keys(this.navOptions).length>1}}},[["render",function(e,t,s,n,i,a){const o=b("full-paged-list-item"),r=b("menu-button"),l=b("icons"),u=b("router-link");return v(),w("div",{class:"subheader pagenav",role:"navigation","aria-label":e.$t("regions-pagenav")},[q(r,{id:"qnav",options:a.navOptions,selected:a.disppage,searchby:"title"},{default:C(({option:e,selected:t})=>[q(o,{option:e,selected:t},null,8,["option","selected"])]),_:1},8,["options","selected"]),a.showNextPrev?(v(),S(u,{key:0,to:"/full/page/"+(a.disppage-1),custom:""},{default:C(({navigate:t})=>[_("button",{type:"button",onClick:t,onKeypress:T(t,["enter"]),role:"link",disabled:s.page<(this.hasIntro?0:1),class:"secondarybtn",id:"qprev","aria-label":e.$t("previous")},[q(l,{name:"left"})],40,lo)]),_:1},8,["to"])):k("",!0),a.showNextPrev?(v(),S(u,{key:1,to:"/full/page/"+(a.disppage+1),custom:""},{default:C(({navigate:t})=>[_("button",{type:"button",onClick:t,onKeypress:T(t,["enter"]),role:"link",disabled:s.page>=a.pagesData.length-1,class:"secondarybtn",id:"qnext","aria-label":e.$t("next")},[q(l,{name:"right"})],40,uo)]),_:1},8,["to"])):k("",!0)],8,ro)}]]),FullQuestionHeader:Di,InterQuestionTextList:F,IntroText:La},computed:{page(){return parseInt(this.$route.params.page)-1},allPages:()=>qo.assessInfo.interquestion_pages,intro:()=>qo.assessInfo.intro,hasIntro:()=>""!==qo.assessInfo.intro||qo.assessInfo.resources.length>0,showSubmit:()=>"by_assessment"===qo.assessInfo.submitby,lastQ(){const e=[];let t;for(const s in this.allPages)t=this.allPages[s][0].questions,e[s]=t[t.length-1];return e}},methods:{submitAssess(){ko.submitAssessment()}}},[["render",function(e,t,s,n,i,a){const o=b("assess-header"),r=b("full-paged-nav"),l=b("intro-text"),u=b("inter-question-text-list"),c=b("full-question-header"),d=b("question"),p=b("router-link");return v(),w("div",co,[_("a",{href:"#",class:"sr-only",id:"skipnav",onClick:t[0]||(t[0]=E(t=>e.$refs.scrollpane.focus(),["prevent"]))},x(e.$t("jumptocontent")),1),q(o),q(r,{page:a.page},null,8,["page"]),_("div",{class:"scrollpane",role:"region",ref:"scrollpane",tabindex:"-1","aria-label":e.$t("regions-questions")},[q(l,{active:-1===a.page&&a.hasIntro,html:a.intro},null,8,["active","html"]),(v(!0),w(g,null,y(a.allPages,(e,t)=>(v(),w("div",{key:t,class:I({inactive:t!==a.page}),"aria-hidden":t!==a.page},[0===e[0].questions.length?(v(),w("div",mo,[(v(),S(u,{pos:"all",textlist:e,lastq:a.lastQ[t],active:t===a.page,key:"iqtp"+t},null,8,["textlist","lastq","active"]))])):(v(),w("div",fo,[(v(!0),w(g,null,y(e[0].questions,s=>(v(),w("div",{key:s,class:"fullpaged"},[(v(),S(u,{pos:"beforeexact",qn:s,key:"iqt"+s,textlist:e,lastq:a.lastQ[t],active:t===a.page},null,8,["qn","textlist","lastq","active"])),_("div",null,[q(c,{qn:s},null,8,["qn"]),(v(),S(d,{qn:s,active:t===a.page,key:"q"+s,getwork:1},null,8,["qn","active"]))])]))),128)),(v(),S(u,{id:"aftertext",pos:"after",qn:e[0].questions[e[0].questions.length-1],key:"iqte"+t,textlist:e,lastq:a.lastQ[t],active:t===a.page},null,8,["qn","textlist","lastq","active"]))]))],10,ho))),128)),a.page<a.allPages.length-1?(v(),w("div",wo,[t[2]||(t[2]=_("p",null," ",-1)),_("p",null,[q(p,{to:"/full/page/"+(a.page+2)},{default:C(()=>[$(x(e.$t("pages-next")),1)]),_:1},8,["to"])])])):a.showSubmit?(v(),w("p",go,[_("button",{type:"button",class:"primary",onClick:t[1]||(t[1]=(...e)=>a.submitAssess&&a.submitAssess(...e))},x(e.$t("header-assess_submit")),1)])):k("",!0)],8,po)])}]]);var bo={};const vo=function(e){const t=bt(e.routes,e),n=e.parseQuery||He,o=e.stringifyQuery||Ue,r=e.history,l=Ze(),u=Ze(),c=Ze(),p=s(Oe);let h=Oe;Y&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const m=ee.bind(null,e=>""+e),f=ee.bind(null,_e),w=ee.bind(null,qe);function g(e,s){if(s=Z({},s||p.value),"string"==typeof e){const i=Ie(n,e,s.path),a=t.resolve({path:i.path},s),o=r.createHref(i.fullPath);return Z(i,a,{params:w(a.params),hash:qe(i.hash),redirectedFrom:void 0,href:o})}let i;if(null!=e.path)i=Z({},e,{path:Ie(n,e.path,s.path).path});else{const t=Z({},e.params);for(const e in t)null==t[e]&&delete t[e];i=Z({},e,{params:f(t)}),s.params=f(s.params)}const a=t.resolve(i,s),l=e.hash||"";a.params=m(w(a.params));const u=function(e,t){const s=t.query?e(t.query):"";return t.path+(s&&"?")+s+(t.hash||"")}(o,Z({},e,{hash:(c=l,ye(c).replace(me,"{").replace(we,"}").replace(pe,"^")),path:a.path}));var c;const d=r.createHref(u);return Z({fullPath:u,hash:l,query:o===Ue?We(e.query):e.query||{}},a,{redirectedFrom:void 0,href:d})}function y(e){return"string"==typeof e?Ie(n,e,p.value.path):Z({},e)}function b(e,t){if(h!==e)return Ge(Ve.NAVIGATION_CANCELLED,{from:t,to:e})}function v(e){return q(e)}function _(e,t){const s=e.matched[e.matched.length-1];if(s&&s.redirect){const{redirect:n}=s;let i="function"==typeof n?n(e,t):n;return"string"==typeof i&&(i=i.includes("?")||i.includes("#")?i=y(i):{path:i},i.params={}),Z({query:e.query,hash:e.hash,params:null!=i.path?{}:e.params},i)}}function q(e,t){const s=h=g(e),n=p.value,i=e.state,a=e.force,r=!0===e.replace,l=_(s,n);if(l)return q(Z(y(l),{state:"object"==typeof l?Z({},i,l.state):i,force:a,replace:r}),t||s);const u=s;let c;return u.redirectedFrom=t,!a&&function(e,t,s){const n=t.matched.length-1,i=s.matched.length-1;return n>-1&&n===i&&$e(t.matched[n],s.matched[i])&&Te(t.params,s.params)&&e(t.query)===e(s.query)&&t.hash===s.hash}(o,n,s)&&(c=Ge(Ve.NAVIGATION_DUPLICATED,{to:u,from:n}),Q(n,n,!0,!1)),(c?Promise.resolve(c):x(u,n)).catch(e=>Be(e)?Be(e,Ve.NAVIGATION_GUARD_REDIRECT)?e:C(e):E(e,u,n)).then(e=>{if(e){if(Be(e,Ve.NAVIGATION_GUARD_REDIRECT))return q(Z({replace:r},y(e.to),{state:"object"==typeof e.to?Z({},i,e.to.state):i,force:a}),t||u)}else e=T(u,n,!0,r,i);return $(u,n,e),e})}function k(e,t){const s=b(e,t);return s?Promise.reject(s):Promise.resolve()}function I(e){const t=j.values().next().value;return t&&"function"==typeof t.runWithContext?t.runWithContext(e):e()}function x(e,t){let s;const[n,i,a]=function(e,t){const s=[],n=[],i=[],a=Math.max(t.matched.length,e.matched.length);for(let o=0;o<a;o++){const a=t.matched[o];a&&(e.matched.find(e=>$e(e,a))?n.push(a):s.push(a));const r=e.matched[o];r&&(t.matched.find(e=>$e(e,r))||i.push(r))}return[s,n,i]}
/*!
			 * vue-router v4.6.4
			 * (c) 2025 Eduardo San Martin Morote
			 * @license MIT
			 */(e,t);s=tt(n.reverse(),"beforeRouteLeave",e,t);for(const r of n)r.leaveGuards.forEach(n=>{s.push(et(n,e,t))});const o=k.bind(null,e,t);return s.push(o),N(s).then(()=>{s=[];for(const n of l.list())s.push(et(n,e,t));return s.push(o),N(s)}).then(()=>{s=tt(i,"beforeRouteUpdate",e,t);for(const n of i)n.updateGuards.forEach(n=>{s.push(et(n,e,t))});return s.push(o),N(s)}).then(()=>{s=[];for(const n of a)if(n.beforeEnter)if(se(n.beforeEnter))for(const i of n.beforeEnter)s.push(et(i,e,t));else s.push(et(n.beforeEnter,e,t));return s.push(o),N(s)}).then(()=>(e.matched.forEach(e=>e.enterCallbacks={}),s=tt(a,"beforeRouteEnter",e,t,I),s.push(o),N(s))).then(()=>{s=[];for(const n of u.list())s.push(et(n,e,t));return s.push(o),N(s)}).catch(e=>Be(e,Ve.NAVIGATION_CANCELLED)?e:Promise.reject(e))}function $(e,t,s){c.list().forEach(n=>I(()=>n(e,t,s)))}function T(e,t,s,n,i){const a=b(e,t);if(a)return a;const o=t===Oe,l=Y?history.state:{};s&&(n||o?r.replace(e.fullPath,Z({scroll:o&&l&&l.scroll},i)):r.push(e.fullPath,i)),p.value=e,Q(e,t,s,o),C()}let P;function A(){P||(P=r.listen((e,t,s)=>{if(!R.listening)return;const n=g(e),i=_(n,R.currentRoute.value);if(i)return void q(Z(i,{replace:!0,force:!0}),n).catch(te);h=n;const a=p.value;var o,l;Y&&(o=je(a.fullPath,s.delta),l=Me(),Re.set(o,l)),x(n,a).catch(e=>Be(e,Ve.NAVIGATION_ABORTED|Ve.NAVIGATION_CANCELLED)?e:Be(e,Ve.NAVIGATION_GUARD_REDIRECT)?(q(Z(y(e.to),{force:!0}),n).then(e=>{Be(e,Ve.NAVIGATION_ABORTED|Ve.NAVIGATION_DUPLICATED)&&!s.delta&&s.type===Se.pop&&r.go(-1,!1)}).catch(te),Promise.reject()):(s.delta&&r.go(-s.delta,!1),E(e,n,a))).then(e=>{(e=e||T(n,a,!1))&&(s.delta&&!Be(e,Ve.NAVIGATION_CANCELLED)?r.go(-s.delta,!1):s.type===Se.pop&&Be(e,Ve.NAVIGATION_ABORTED|Ve.NAVIGATION_DUPLICATED)&&r.go(-1,!1)),$(n,a,e)}).catch(te)}))}let O,S=Ze(),D=Ze();function E(e,t,s){C(e);const n=D.list();return n.length?n.forEach(n=>n(e,t,s)):console.error(e),Promise.reject(e)}function C(e){return O||(O=!e,A(),S.list().forEach(([t,s])=>e?s(e):t()),S.reset()),e}function Q(t,s,n,i){const{scrollBehavior:a}=e;if(!Y||!a)return Promise.resolve();const o=!n&&function(e){const t=Re.get(e);return Re.delete(e),t}(je(t.fullPath,0))||(i||!n)&&history.state&&history.state.scroll||null;return d().then(()=>a(t,s,o)).then(e=>e&&Le(e)).catch(e=>E(e,t,s))}const M=e=>r.go(e);let L;const j=new Set,R={currentRoute:p,listening:!0,addRoute:function(e,s){let n,i;return Ne(e)?(n=t.getRecordMatcher(e),i=s):i=e,t.addRoute(i,n)},removeRoute:function(e){const s=t.getRecordMatcher(e);s&&t.removeRoute(s)},clearRoutes:t.clearRoutes,hasRoute:function(e){return!!t.getRecordMatcher(e)},getRoutes:function(){return t.getRoutes().map(e=>e.record)},resolve:g,options:e,push:v,replace:function(e){return v(Z(y(e),{replace:!0}))},go:M,back:()=>M(-1),forward:()=>M(1),beforeEach:l.add,beforeResolve:u.add,afterEach:c.add,onError:D.add,isReady:function(){return O&&p.value!==Oe?Promise.resolve():new Promise((e,t)=>{S.add([e,t])})},install(e){e.component("RouterLink",Tt),e.component("RouterView",St),e.config.globalProperties.$router=R,Object.defineProperty(e.config.globalProperties,"$route",{enumerable:!0,get:()=>i(p)}),Y&&!L&&p.value===Oe&&(L=!0,v(r.location).catch(e=>{}));const t={};for(const n in Oe)Object.defineProperty(t,n,{get:()=>p.value[n],enumerable:!0});e.provide(Je,R),e.provide(Ye,a(t)),e.provide(Xe,p);const s=e.unmount;j.add(e),e.unmount=function(){j.delete(e),j.size<1&&(h=Oe,P&&P(),P=null,p.value=Oe,L=!1,O=!1),s()}}};function N(e){return e.reduce((e,t)=>e.then(()=>I(t)),Promise.resolve())}return R}({history:(_o=window.imasroot+"/assess2/",(_o=location.host?_o||location.pathname+location.search:"").includes("#")||(_o+="#"),at(_o)),routes:[{path:"/",name:"launch",component:As,beforeEnter:(e,t,s)=>{("yes"===qo.assessInfo.available||"practice"===qo.assessInfo.available&&qo.assessInfo.in_practice)&&(qo.assessInfo.has_active_attempt||qo.assessInfo.can_retake)?s():s({path:"/closed",replace:!0})}},{path:"/closed",name:"closed",component:zs,beforeEnter:(e,t,s)=>{("yes"===qo.assessInfo.available||"practice"===qo.assessInfo.available&&qo.assessInfo.in_practice)&&(qo.assessInfo.has_active_attempt||qo.assessInfo.can_retake)?s({path:"/",replace:!0}):s()}},{path:"/skip/:qn",name:"skip",component:Ga,beforeEnter:(e,t,s)=>{qo.inProgress?s():s({path:"/",replace:!0})}},{path:"/full",name:"full",component:Ja,beforeEnter:(e,t,s)=>{qo.inProgress?s():s({path:"/",replace:!0})}},{path:"/full/page/:page",name:"fullpaged",component:yo,beforeEnter:(e,t,s)=>{qo.inProgress?s():s({path:"/",replace:!0})}},{path:"/videocued",component:()=>G(()=>t.import("./Videocued-legacy.js?v=za-NaQyU"),void 0,t.meta.url),beforeEnter:(e,t,s)=>{qo.inProgress?s():s({path:"/",replace:!0})}},{path:"/livepoll",component:()=>G(()=>t.import("./Livepoll-legacy.js?v=BuIbnxvy"),void 0,t.meta.url),beforeEnter:(e,t,s)=>{qo.inProgress?s():s({path:"/",replace:!0})}},{path:"/summary",name:"summary",component:Bi,beforeEnter:(e,t,s)=>{!("yes"===qo.assessInfo.available||"practice"===qo.assessInfo.available&&qo.assessInfo.in_practice)||qo.assessInfo.has_active_attempt&&"by_question"!==qo.assessInfo.submitby?s({path:"/",replace:!0}):s()}},{path:"/showwork",name:"showwork",component:ea,beforeEnter:(e,t,s)=>{qo.assessInfo.in_practice||qo.assessInfo.has_active_attempt&&"by_question"!==qo.assessInfo.submitby||qo.showwork_expired?s({path:"/",replace:!0}):s()}},{path:"/print",name:"print",component:no,beforeEnter:(e,t,s)=>{if("yes"===qo.assessInfo.available&&qo.assessInfo.has_active_attempt||"practice"===qo.assessInfo.available||qo.assessInfo.can_view_all)if(qo.inPrintView=!0,qo.assessInfo.hasOwnProperty("questions"))s();else{const e="practice"===qo.assessInfo.available;ko.startAssess(e,"",[],()=>s())}else s({path:"/",replace:!0})}}],scrollBehavior:(e,t,s)=>s||new Promise((e,t)=>{setTimeout(()=>{e({left:0,top:0})},50)})});var _o;vo.beforeEach((e,t,s)=>{void 0!==window.APIbase?qo.APIbase=window.APIbase:qo.APIbase=bo.BASE_URL;const n=window.location.search.replace(/^.*cid=(\d+).*$/,"$1"),i=window.location.search.replace(/^.*aid=(\d+).*$/,"$1");let a=0;window.location.search.match(/uid=/)&&(a=window.location.search.replace(/^.*uid=(\d+).*$/,"$1")),null===qo.assessInfo||qo.cid!==n||qo.aid!==i||qo.uid!==a?(qo.cid=n,window.cid=n,qo.aid=i,qo.uid=a,qo.queryString="?cid="+qo.cid+"&aid="+qo.aid,0!==qo.uid&&(qo.queryString+="&uid="+qo.uid),ko.loadAssessData(()=>s())):qo.inPrintView&&"/print"!==e.name?s({path:"/print",replace:!0}):s()}),vo.afterEach((e,t)=>{d(window.sendLTIresizemsg)});const qo=e("s",p({assessInfo:null,APIbase:null,aid:null,cid:null,uid:null,queryString:"",inAssess:!1,inTransit:!1,autoSaving:!1,errorMsg:null,confirmObj:null,lastLoaded:[],inProgress:!1,autosaveQueue:{},autosaveTimeactive:{},timeActive:{},timeActivated:{},initValues:{},initTimes:{},work:{},autosaveTimer:null,somethingDirty:!1,noUnload:!1,timelimit_timer:null,timelimit_expired:!1,timelimit_grace_expired:!1,timelimit_restricted:0,enddate_timer:null,showwork_timer:null,showwork_expired:!1,show_enddate_dialog:!1,inPrintView:!1,enableMQ:!0,lastPos:null,livepollServer:"",livepollSettings:{showQuestionDefault:!0,showResultsLiveDefault:!1,showResultsAfter:!0,showAnswersAfter:!0,useTimer:!1,questionTimelimit:60},livepollStuCnt:0,livepollResults:{}})),ko=e("b",{loadAssessData(e,t){let s=qo.queryString;!0===t&&(s+="&reset=1"),qo.inTransit?window.setTimeout(()=>this.loadAssessData(e,t),20):(qo.inTransit=!0,qo.errorMsg=null,qo.inAssess=!1,window.$.ajax({url:qo.APIbase+"loadassess.php"+s,dataType:"json",xhrFields:{withCredentials:!0},crossDomain:!0}).done(t=>{t.hasOwnProperty("error")?this.handleError(t.error):(qo.inProgress=!1,qo.timelimit_expired=!1,clearTimeout(qo.timelimit_timer),t=this.processSettings(t),qo.assessInfo=t,null!=e&&e())}).fail((e,t,s)=>{this.handleError("parsererror"===t?"parseerror":"noserver")}).always(e=>{qo.inTransit=!1}))},startAssess(e,t,s,n,i){qo.inTransit?window.setTimeout(()=>this.startAssess(e,t,s,n),20):(qo.inTransit=!0,qo.errorMsg=null,window.$.ajax({url:qo.APIbase+"startassess.php"+qo.queryString,type:"POST",dataType:"json",data:{practice:e,preview_all:i?1:0,password:t,in_print:qo.inPrintView?1:0,new_group_members:s.join(","),cur_group:qo.assessInfo.stugroupid,has_ltisourcedid:qo.assessInfo.is_lti&&qo.assessInfo.has_ltisourcedid?1:0},xhrFields:{withCredentials:!0},crossDomain:!0}).done(e=>{if(e.hasOwnProperty("error"))this.handleError(e.error);else if(window.imathasDraw.reset(),e=this.processSettings(e),qo.assessInfo=Object.assign({},qo.assessInfo,e),qo.autosaveQueue={},qo.autosaveTimeactive={},qo.initValues={},qo.initTimes={},qo.timeActive={},qo.timeActivated={},qo.work={},qo.inAssess=!0,e.error)this.handleError(e.error);else if(qo.assessInfo.has_active_attempt){if(qo.inProgress=!0,null!=n)return void n();"skip"===qo.assessInfo.displaymethod?""!==qo.assessInfo.intro||qo.assessInfo.resources.length>0?vo.push("/skip/0"):vo.push("/skip/1"):"full"===qo.assessInfo.displaymethod?qo.assessInfo.hasOwnProperty("interquestion_pages")?""!==qo.assessInfo.intro||qo.assessInfo.resources.length>0?vo.push("/full/page/0"):vo.push("/full/page/1"):vo.push("/full"):"video_cued"===qo.assessInfo.displaymethod?vo.push("/videocued"):"livepoll"===qo.assessInfo.displaymethod&&vo.push("/livepoll")}}).fail((e,t,s)=>{this.handleError("parsererror"===t?"parseerror":"noserver")}).always(e=>{qo.inTransit=!1}))},loadQuestion(e,t,s,n){if(this.prepForSave("all"),qo.inTransit)return void window.setTimeout(()=>this.loadQuestion(e,t,s),20);if(qo.somethingDirty&&null==n)return void window.setTimeout(()=>this.loadQuestion(e,t,s,!0),50);qo.inTransit=!0,t&&(this.clearInitValue(e),qo.assessInfo.hasOwnProperty("scoreerrors")&&qo.assessInfo.scoreerrors.hasOwnProperty(e)&&delete qo.assessInfo.scoreerrors[e]);const i=new FormData;i.append("qn",e),i.append("practice",qo.assessInfo.in_practice),i.append("regen",t?1:0),i.append("jumptoans",s?1:0),qo.assessInfo.preview_all&&i.append("preview_all",!0),Object.keys(qo.autosaveQueue).length>0&&(ko.clearAutosaveTimer(),this.addAutosaveData(i)),window.$.ajax({url:qo.APIbase+"loadquestion.php"+qo.queryString,type:"POST",dataType:"text",data:i,processData:!1,contentType:!1,xhrFields:{withCredentials:!0},crossDomain:!0}).done(s=>{try{var n=JSON.parse(s.trim().replace(/^\uFEFF/,""));if(n.hasOwnProperty("error"))return void this.handleError(n.error);n.hasOwnProperty("warning")&&this.handleError(n.warning),n.saved_autosaves&&this.markAutosavesDone(),delete n.saved_autosaves,t&&qo.assessInfo.questions[e].jsparams&&window.imathasAssess.clearparams(qo.assessInfo.questions[e].jsparams),n=this.processSettings(n),this.copySettings(n)}catch(i){console.log("Response text:",s),this.handleError("parseerror")}}).fail((e,t,s)=>{"parsererror"===t&&console.log("Response text:",e.responseText),this.handleError("parsererror"===t?"parseerror":"noserver")}).always(e=>{qo.inTransit=!1})},prepForSave(e){for(let t in window.callbackstack)t=parseInt(t),("all"===e||e.indexOf(t<1e3?t:Math.floor(t/1e3)-1)>-1)&&window.callbackstack[t](t);void 0!==window.tinyMCE&&window.tinyMCE.triggerSave()},submitAssessment(){let e="header.confirm_assess_submit";if("by_assessment"===qo.assessInfo.submitby){let t=0;const s=this.getChangedQuestions();for(const e in qo.assessInfo.questions)(qo.assessInfo.questions[e].try>0||qo.assessInfo.questions[e].hasOwnProperty("parts_entered")&&qo.assessInfo.questions[e].hasOwnProperty("answeights")&&qo.assessInfo.questions[e].parts_entered.length>=qo.assessInfo.questions[e].answeights.length||s.hasOwnProperty(e))&&t++;t!==qo.assessInfo.questions.length&&(e="header.confirm_assess_unattempted_submit"),qo.confirmObj={body:e,action:()=>{var e=[];for(let t=0;t<qo.assessInfo.questions.length;t++)e.push(t);this.submitQuestion(e,!0)}}}},submitWork(){if(qo.inTransit)return void window.setTimeout(()=>this.submitWork(),20);void 0!==window.tinyMCE&&window.tinyMCE.triggerSave(),qo.inTransit=!0;const e={};window.$(".swbox").each(function(){const e=parseInt(this.id.substr(2));qo.assessInfo.questions[e].hasOwnProperty("work")&&this.value===qo.assessInfo.questions[e].work||(qo.work[e]=this.value)});for(const t in qo.work)e[t]=qo.work[t];if(0===Object.keys(e).length)return qo.inTransit=!1,qo.errorMsg=null,void(qo.inAssess?vo.push("/summary"):"yes"===qo.assessInfo.available?vo.push("/"):window.location=window.exiturl);window.$.ajax({url:qo.APIbase+"savework.php"+qo.queryString,type:"POST",dataType:"json",data:{work:e},xhrFields:{withCredentials:!0},crossDomain:!0}).done(e=>{if(e.hasOwnProperty("error")&&"workafter_expired"!==e.error)return this.handleError(e.error),void("already_submitted"===e.error&&(e=this.processSettings(e),this.copySettings(e)));qo.errorMsg=null;for(const t in qo.work)qo.assessInfo.questions[parseInt(t)].work=qo.work[t],delete qo.work[t];qo.inAssess?vo.push("/summary"):"yes"===qo.assessInfo.available?vo.push("/"):window.location=window.exiturl}).fail((e,t,s)=>{this.handleError("parsererror"===t?"parseerror":"noserver")}).always(e=>{qo.inTransit=!1})},submitQuestion(e,t){if(qo.somethingDirty=!1,this.clearAutosaveTimer(),qo.inTransit)return void window.setTimeout(()=>this.submitQuestion(e,t),20);qo.inTransit=!0,"object"!=typeof e&&(e=[e]),this.prepForSave(e);const s=[],n=this.getChangedQuestions(e);let i=!1;for(let c=0;c<e.length;c++){const t=parseInt(e[c]);document.getElementById("sw"+t)&&(qo.work[t]=document.getElementById("sw"+t).value),qo.work[t]&&qo.work[t]!==ko.getInitValue(t,"sw"+t)&&(i=!0)}if(0===Object.keys(n).length&&!i&&!t)return qo.errorMsg="nochange",void(qo.inTransit=!1);window.MQeditor.resetEditor(),window.imathasAssess.clearTips(),window.setTimeout(()=>this.clearAutosave(e),100);const a=new FormData;let o;const r=[];for(const c in n){if("full"!==qo.assessInfo.displaymethod){if(qo.timeActivated.hasOwnProperty(c)){const e=new Date;qo.timeActive[c]+=e-qo.timeActivated[c]}r.push(qo.timeActive[c])}let e;1===n[c].length&&0===n[c][0]&&(o=window.imathasAssess.preSubmit(c),!1!==o&&a.append("qn"+c+"-val",o));for(let t=0;t<n[c].length;t++)e=1e3*(parseInt(c)+1)+n[c][t],o=window.imathasAssess.preSubmit(e),!1!==o&&a.append("qn"+e+"-val",o)}for(let c=0;c<e.length;c++){const t=parseInt(e[c]);var l=new RegExp("^(qn|tc|qs)("+t+"\\b|"+(t+1)+"\\d{3})");window.$("#questionwrap"+t).find("input,select,textarea").each(function(e,t){t.name.match(l)&&("radio"!==t.type&&"checkbox"!==t.type||t.checked)&&("file"===t.type&&t.files.length>0?a.append(t.name,t.files[0]):"file"===t.type?document.getElementById(t.name+"-autosave")&&a.append(t.name,"file-autosave"):a.append(t.name,window.imathasAssess.preSubmitString(t.name,t.value)))}),qo.work[t]&&qo.work[t]!==ko.getInitValue(t,"sw"+t)&&a.append("sw"+t,qo.work[t]),s[c]=qo.lastLoaded[t].getTime()}a.append("toscoreqn",JSON.stringify(n)),a.append("timeactive",r.join(",")),a.append("lastloaded",s.join(",")),a.append("verification",JSON.stringify(this.getVerificationData(n))),t&&a.append("endattempt",t),qo.assessInfo.in_practice&&a.append("practice",!0),qo.assessInfo.preview_all&&a.append("preview_all",!0),this.addAutosaveData(a,Object.keys(n));const u=1===e.length&&qo.assessInfo.questions[e[0]].jsparams&&qo.assessInfo.questions[e[0]].jsparams.hasseqnext;window.$.ajax({url:qo.APIbase+"scorequestion.php"+qo.queryString,type:"POST",dataType:"json",data:a,processData:!1,contentType:!1,xhrFields:{withCredentials:!0},crossDomain:!0}).done(s=>{if(s.hasOwnProperty("error"))return this.handleError(s.error),void("already_submitted"===s.error&&(s=this.processSettings(s),this.copySettings(s)));qo.errorMsg=null,s.saved_autosaves&&this.markAutosavesDone(),delete s.saved_autosaves;for(const e in n)qo.assessInfo.hasOwnProperty("scoreerrors")&&qo.assessInfo.scoreerrors.hasOwnProperty(e)&&delete qo.assessInfo.scoreerrors[e],qo.initValues.hasOwnProperty(e)&&delete qo.initValues[e],qo.work.hasOwnProperty(e)&&delete qo.work[e];s=this.processSettings(s),this.copySettings(s),!qo.assessInfo.in_practice&&window.inTreeReader&&this.updateTreeReader();let i=!1;for(let e=0;e<qo.assessInfo.questions.length;e++)if(2&qo.assessInfo.questions[e].showwork){i=!0;break}t?(qo.inProgress=!1,i&&!qo.assessInfo.in_practice?vo.push("/showwork"):vo.push("/summary")):1===e.length&&(qo.assessInfo.questions[e[0]].hadSeqNext=u,d(()=>{var t;u?(t=window.$("#questionwrap"+e[0]).find(".seqsep").last().next()[0],window.$("#questionwrap"+e[0]).find(".seqsep").last().focus()):(t=document.getElementById("questionwrap"+e[0]).parentNode.parentNode,window.$(t).find(".scoreresult").focus());var s=t.getBoundingClientRect();(s.top<0||s.bottom>document.documentElement.clientHeight)&&t.scrollIntoView()}))}).fail((e,t,s)=>{this.handleError("parsererror"===t?"parseerror":"noserver")}).always(e=>{qo.inTransit=!1})},gotoSummary(){let e=!1;for(let t=0;t<qo.assessInfo.questions.length;t++)if(2&qo.assessInfo.questions[t].showwork){e=!0,qo.assessInfo.showwork_after=!0;break}"by_question"===qo.assessInfo.submitby&&(e&&!qo.assessInfo.in_practice?vo.push("/showwork"):vo.push("/summary"))},doAutosave(e,t,s){qo.inTransit?window.setTimeout(()=>this.doAutosave(e,t,s),20):(qo.somethingDirty=!1,qo.autosaveQueue.hasOwnProperty(e)||(qo.autosaveQueue[e]=[]),-1===qo.autosaveQueue[e].indexOf(t)&&qo.autosaveQueue[e].push(t),qo.autosaveTimeactive[e]=s,null===qo.autosaveTimer&&(qo.autosaveTimer=window.setTimeout(()=>{this.submitAutosave(!0)},6e4)))},clearAutosave(e){for(const t in e)qo.autosaveQueue.hasOwnProperty(e[t])&&delete qo.autosaveQueue[e[t]];0===Object.keys(qo.autosaveQueue).length&&this.clearAutosaveTimer()},clearAutosaveTimer(){window.clearTimeout(qo.autosaveTimer),qo.autosaveTimer=null},addAutosaveData(e,t){t=t||[];const s={},n={};let i;for(const o in qo.autosaveQueue){if(-1!==t.indexOf(o))continue;n[o]=qo.autosaveQueue[o],1===qo.autosaveQueue[o].length&&0===qo.autosaveQueue[o][0]&&(i=window.imathasAssess.preSubmit(o),!1!==i&&e.append("qn"+o+"-val",i));const r=[];let l;for(const t in qo.autosaveQueue[o]){const s=qo.autosaveQueue[o][t];"sw"!==s?(0===s&&r.push(o),l=1e3*(1*o+1)+1*s,r.push(l),i=window.imathasAssess.preSubmit(l),!1!==i&&e.append("qn"+l+"-val",i)):e.append("sw"+o,qo.work[o])}var a=new RegExp("^(qn|tc|qs)("+r.join("\\b|")+"\\b)");window.$("#questionwrap"+o).find("input,select,textarea").each(function(t,s){s.name.match(a)&&("radio"!==s.type&&"checkbox"!==s.type||s.checked)&&("file"===s.type?0===s.files.length?e.append(s.name,""):e.append(s.name,s.files[0]):e.append(s.name,window.imathasAssess.preSubmitString(s.name,s.value)))}),s[o]=qo.lastLoaded[o].getTime()}e.append("autosave-tosaveqn",JSON.stringify(n)),e.append("autosave-lastloaded",JSON.stringify(s)),e.append("autosave-verification",JSON.stringify(this.getVerificationData(n))),"full"===qo.assessInfo.displaymethod?e.append("autosave-timeactive",""):e.append("autosave-timeactive",JSON.stringify(qo.autosaveTimeactive))},markAutosavesDone(){for(const e in qo.autosaveQueue)for(const t in qo.autosaveQueue[e])qo.assessInfo.questions[parseInt(e)].hasOwnProperty("parts_entered")&&-1===qo.assessInfo.questions[parseInt(e)].parts_entered.indexOf(qo.autosaveQueue[e][t])&&qo.assessInfo.questions[parseInt(e)].parts_entered.push(qo.autosaveQueue[e][t]);qo.autosaveQueue={}},submitAutosave(e){if(qo.somethingDirty=!1,this.clearAutosaveTimer(),0===Object.keys(qo.autosaveQueue).length)return;if(qo.inTransit)return void window.setTimeout(()=>this.submitAutosave(e),20);qo.inTransit=!0,qo.autoSaving=!0,this.prepForSave(Object.keys(qo.autosaveQueue));const t=new FormData;if(this.addAutosaveData(t),qo.assessInfo.in_practice&&t.append("practice",!0),qo.assessInfo.preview_all&&t.append("preview_all",!0),!1===e&&navigator.sendBeacon)return navigator.sendBeacon(qo.APIbase+"autosave.php"+qo.queryString,t),qo.inTransit=!1,qo.autoSaving=!1,void(qo.autosaveQueue={});window.$.ajax({url:qo.APIbase+"autosave.php"+qo.queryString,type:"POST",dataType:"json",data:t,async:e,processData:!1,contentType:!1,xhrFields:{withCredentials:!0},crossDomain:!0}).done(e=>{if(e.hasOwnProperty("error"))return this.handleError(e.error),void("already_submitted"===e.error&&(e=this.processSettings(e),this.copySettings(e)));e.hasOwnProperty("warning")&&this.handleError(e.warning),"done"===e.autosave&&(this.markAutosavesDone(),delete e.autosave),e=this.processSettings(e),this.copySettings(e)}).fail((e,t,s)=>{this.handleError("parsererror"===t?"parseerror":"noserver")}).always(e=>{qo.inTransit=!1,qo.autoSaving=!1})},handleTimelimitUp(){qo.assessInfo.has_active_attempt&&(qo.errorMsg="timesup_submitting",this.prepForSave("all"),setTimeout(()=>{const e=Object.keys(this.getChangedQuestions());this.submitQuestion(e,!0)},1e3))},handleShowworklimitUp(){void 0!==window.tinyMCE&&window.tinyMCE.triggerSave(),qo.errorMsg="workafter_submitting",qo.showwork_expired=!0,setTimeout(()=>{this.submitWork()},1e3)},handleDueDate(){ko.submitAutosave(),qo.show_enddate_dialog=!0},endAssess(e){qo.somethingDirty=!1,this.clearAutosaveTimer(),window.MQeditor.resetEditor(),window.imathasAssess.clearTips(),qo.inTransit?window.setTimeout(()=>this.endAssess(e),20):(qo.inTransit=!0,qo.errorMsg=null,window.$.ajax({url:qo.APIbase+"endassess.php"+qo.queryString,dataType:"json",xhrFields:{withCredentials:!0},crossDomain:!0}).done(t=>{t.hasOwnProperty("error")?this.handleError(t.error):(t=this.processSettings(t),this.copySettings(t),qo.inProgress=!1,"function"==typeof e&&e())}).fail((e,t,s)=>{this.handleError("parsererror"===t?"parseerror":"noserver")}).always(e=>{qo.inTransit=!1}))},getScores(){qo.inTransit?window.setTimeout(()=>this.getScores(),20):(qo.inTransit=!0,window.$.ajax({url:qo.APIbase+"getscores.php"+qo.queryString,type:"GET",dataType:"json",xhrFields:{withCredentials:!0},crossDomain:!0}).done(e=>{e.hasOwnProperty("error")?this.handleError(e.error):(e=this.processSettings(e),this.copySettings(e))}).fail((e,t,s)=>{this.handleError("parsererror"===t?"parseerror":"noserver")}).always(e=>{qo.inTransit=!1}))},getQuestions(){qo.inTransit?window.setTimeout(()=>this.getQuestions(),20):(qo.inTransit=!0,window.$.ajax({url:qo.APIbase+"getquestions.php"+qo.queryString,type:"GET",dataType:"json",xhrFields:{withCredentials:!0},crossDomain:!0}).done(e=>{e.hasOwnProperty("error")?this.handleError(e.error):(e=this.processSettings(e),this.copySettings(e))}).fail((e,t,s)=>{this.handleError("parsererror"===t?"parseerror":"noserver")}).always(e=>{qo.inTransit=!1}))},redeemLatePass(e){qo.inTransit?window.setTimeout(()=>this.redeemLatePass(e),20):(qo.inTransit=!0,window.$.ajax({url:qo.APIbase+"uselatepass.php"+qo.queryString,type:"POST",dataType:"json",xhrFields:{withCredentials:!0},crossDomain:!0}).done(t=>{t.hasOwnProperty("error")?this.handleError(t.error):(t=this.processSettings(t),this.copySettings(t),"function"==typeof e?e():vo.push("/"))}).fail((e,t,s)=>{this.handleError("parsererror"===t?"parseerror":"noserver")}).always(e=>{qo.inTransit=!1}))},routeToStart(){vo.push("/")},setLivepollStatus(e){qo.inTransit?window.setTimeout(()=>this.setLivepollStatus(e),20):(qo.inTransit=!0,qo.errorMsg=null,window.$.ajax({url:qo.APIbase+"livepollstatus.php"+qo.queryString,type:"POST",dataType:"json",data:e,xhrFields:{withCredentials:!0},crossDomain:!0}).done(e=>{e.hasOwnProperty("error")?this.handleError(e.error):(e=this.processSettings(e),this.copySettings(e))}).fail((e,t,s)=>{this.handleError("parsererror"===t?"parseerror":"noserver")}).always(e=>{qo.inTransit=!1}))},getVerificationData(e){const t={},s="by_question"===qo.assessInfo.submitby,n=qo.assessInfo.prev_attempts.length;for(const i in e){const e=[],a=qo.assessInfo.questions[i];for(let t=0;t<a.parts.length;t++)e[t]=a.parts[t].try;t[i]={tries:e,regen:s?a.regen:n}}return t},setInitValue(e,t,s){qo.initValues.hasOwnProperty(e)||(qo.initValues[e]={});let n=0;if(t.match(/^sw/))n="sw";else{const i=t.match(/^(qs|qn|tc)(\d+)/)[2];i>1e3&&(n=i%1e3),"draw"===qo.assessInfo.questions[e].jsparams[i].qtype&&""===s&&(s=";;;;;;;;")}qo.assessInfo.questions[e].hasOwnProperty("usedautosave")&&-1!==qo.assessInfo.questions[e].usedautosave.indexOf(n)||qo.initValues[e].hasOwnProperty(t)||(qo.initValues[e][t]=s)},getInitValue:(e,t)=>qo.initValues.hasOwnProperty(e)&&qo.initValues[e].hasOwnProperty(t)?qo.initValues[e][t]:"",clearInitValue(e){qo.initValues[e]={}},getInitTimeactive(e){if(qo.assessInfo.questions[e].hasOwnProperty("autosave_timeactive")){var t=qo.assessInfo.questions[e].autosave_timeactive;return qo.assessInfo.questions[e].autosave_timeactive=0,t}return 0},setRendered(e,t){qo.assessInfo&&(qo.assessInfo.questions[e].rendered=t)},getChangedQuestions(e){if("object"!=typeof e){if(!qo.assessInfo.hasOwnProperty("questions"))return{};e=[];for(let t=0;t<qo.assessInfo.questions.length;t++)e.push(t)}const t={};let s;for(let i=0;i<e.length;i++){const a=e[i];qo.assessInfo.questions[a].showwork&&qo.work.hasOwnProperty(a)&&qo.work[a]!==ko.getInitValue(a,"sw"+a)&&(t.hasOwnProperty(a)||(t[a]=[]));var n=new RegExp("^(qn|tc|qs)("+a+"\\b|"+(1*a+1)+"\\d{3})");if(window.$("#questionwrap"+a).find("input,select,textarea").each(function(e,i){if(null!==(s=i.name.match(n))){let e=!1;if("radio"===i.type||"checkbox"===i.type?i.checked&&i.value!==ko.getInitValue(a,i.name)?e=!0:i.checked||i.value!==ko.getInitValue(a,i.name)||(e=!0):("file"===i.type&&null!==document.getElementById(i.name+"-autosave")||i.value.trim()!==ko.getInitValue(a,i.name)&&""!==i.value.trim())&&(e=!0),e){t.hasOwnProperty(a)||(t[a]=[]);let e=0;const n=parseInt(s[2]);n>1e3&&(e=n%1e3),-1===t[a].indexOf(e)&&t[a].push(e)}}}),qo.assessInfo.questions[a].hasOwnProperty("jsparams")){const e=qo.assessInfo.questions[a].jsparams;for(const s in e)if(e.submitall||s.match(/\d/)&&e[s].hasOwnProperty("submitblank")){let e=0;s>1e3&&(e=s%1e3),t.hasOwnProperty(a)||(t[a]=[]),-1===t[a].indexOf(e)&&t[a].push(e)}}}return t},handleError(e){qo.assessInfo.hasOwnProperty("is_lti")&&qo.assessInfo.is_lti&&"no_session"===e&&(e="lti_no_session"),qo.errorMsg=e},updateTreeReader(){let e=0;for(const n in qo.assessInfo.questions)qo.assessInfo.questions[n].try>0&&e++;let t=0;e===qo.assessInfo.questions.length?t=2:e>0&&(t=1);try{top.updateTRunans(qo.aid,t)}catch(s){}},enableMQ(){qo.enableMQ=!0,window.imathasAssess.clearLivePreviewTimeouts(),window.$("input[type=button][id^=pbtn],button[id^=pbtn]").hide(),window.$("span[id^=p] span[id^=lpbuf]").empty(),window.MQeditor.toggleMQAll("input[data-mq]",!0)},disableMQ(){qo.enableMQ=!1,window.$("input[type=button][id^=pbtn],button[id^=pbtn]").show().trigger("click"),window.MQeditor.toggleMQAll("input[data-mq]",!1)},copySettings(e){if(e.hasOwnProperty("questions")){qo.assessInfo.hasOwnProperty("questions")||(qo.assessInfo.questions=[]);for(const t in e.questions){const s=parseInt(t);null===e.questions[t].category&&qo.assessInfo.questions.hasOwnProperty(s)&&qo.assessInfo.questions[s].hasOwnProperty("category")&&(e.questions[t].category=qo.assessInfo.questions[s].category),qo.assessInfo.questions[s]=e.questions[t]}delete e.questions}qo.assessInfo=Object.assign({},qo.assessInfo,e)},processSettings(e){if(e.hasOwnProperty("questions"))for(const t in e.questions){const s=e.questions[t];if(e.questions[t].canretry=s.try<s.tries_max,e.questions[t].canretry_primary=e.questions[t].canretry,e.questions[t].tries_remaining=s.tries_max-s.try,!e.questions[t].did_jump_to_ans&&s.hasOwnProperty("parts")){let n=1e10,i=0,a=!1;for(const e in s.parts){const t=s.tries_max-s.parts[e].try,o=s.hasOwnProperty("answeights")&&0===parseFloat(s.answeights[e])||s.parts[e].hasOwnProperty("points_possible")&&0===parseFloat(s.parts[e].points_possible);t<n&&(!o||0===parseInt(e)&&0===parseInt(s.try))&&(n=t),t>i&&(!o||0===parseInt(e)&&0===parseInt(s.try))&&(i=t),t>0&&(!s.parts[e].hasOwnProperty("rawscore")||s.parts[e].rawscore<1||s.parts[e].req_manual)&&(a=!0)}e.questions[t].canretry_primary=a,n!==i&&(e.questions[t].tries_remaining_range=[n,i])}"undefined"!==s.hasOwnProperty("regens_max")&&s.regen<s.regens_max-1?(e.questions[t].canregen=!0,e.questions[t].regens_remaining=s.regens_max-s.regen-1):(e.questions[t].canregen=!1,e.questions[t].regens_remaining=0),e.questions[t].has_details=s.hasOwnProperty("parts")&&(s.parts.length>1||s.parts[0].hasOwnProperty("penalties")&&s.parts[0].penalties.length>0),0!==e.questions[t].withdrawn&&(e.questions[t].canretry=!1,e.questions[t].tries_remaining=0,e.questions[t].canregen=!1,e.questions[t].regens_remaining=0),qo.lastLoaded[t]=new Date}if(e.hasOwnProperty("showscores")&&(e.show_scores_during="during"===e.showscores),e.hasOwnProperty("regen")&&(e.regens_remaining=e.regens_max-e.regen-1),e.hasOwnProperty("enableMQ")&&(qo.enableMQ=e.enableMQ),e.hasOwnProperty("enddate_in")&&e.enddate_in>0&&null===qo.timelimit_timer&&e.enddate_in<1728e3){window.clearTimeout(qo.enddate_timer);const t=(new Date).getTime(),s=1e3*e.enddate_in;e.enddate_local=t+s,qo.enddate_timer=setTimeout(()=>{this.handleDueDate()},s)}if(e.hasOwnProperty("showwork_cutoff_in")){window.clearTimeout(qo.showwork_timer);const t=(new Date).getTime(),s=1e3*e.showwork_cutoff_in;e.showwork_local_cutoff_expires=t+s,s>0?(qo.showwork_timer=setTimeout(()=>{this.handleShowworklimitUp()},s),qo.showwork_expired=!1):qo.showwork_expired=!0}if(e.hasOwnProperty("timelimit_expiresin")){window.clearTimeout(qo.timelimit_timer),window.clearTimeout(qo.enddate_timer);const t=(new Date).getTime();e.hasOwnProperty("timelimit_expires")&&(e.timelimit_expires===e.enddate?qo.timelimit_restricted=1:e.timelimit_grace===e.enddate&&(qo.timelimit_restricted=2));const s=1e3*e.timelimit_expiresin,n=1e3*e.timelimit_gracein;e.timelimit_local_expires=t+s,e.timelimit_local_grace=n>0?t+n:0,s>0?(e.timelimit_gracein>0?qo.timelimit_timer=setTimeout(()=>{this.handleTimelimitUp()},n):qo.timelimit_timer=setTimeout(()=>{this.handleTimelimitUp()},s),qo.timelimit_expired=!1,qo.timelimit_grace_expired=!1):(qo.timelimit_expired=!0,qo.timelimit_grace_expired=!0,e.timelimit_gracein>0&&n>0&&(qo.timelimit_timer=setTimeout(()=>{this.handleTimelimitUp()},n),qo.timelimit_grace_expired=!1))}else e.timelimit>0&&(e.enddate_in<e.timelimit?qo.timelimit_restricted=1:e.enddate_in<e.timelimit+e.overtime_grace?qo.timelimit_restricted=2:qo.timelimit_restricted=0);if(e.hasOwnProperty("questions")&&e.hasOwnProperty("interquestion_text")&&B(e,e.questions),e.hasOwnProperty("interquestion_text")&&H(e,e.questions),e.hasOwnProperty("noprint")&&1===e.noprint){const e=document.createElement("style");e.type="text/css",e.media="print",e.innerText="body { display: none;}",document.head.appendChild(e)}if(e.hasOwnProperty("livepoll_server")&&""===qo.livepollServer){const t=document.createElement("script");t.src="https://"+e.livepoll_server+":3000/socket.io/socket.io.js",document.head.appendChild(t),qo.livepollServer=e.livepoll_server}return e.hasOwnProperty("useMQ")&&(!0!==e.useMQ||qo.enableMQ?!1===e.useMQ&&qo.enableMQ&&this.disableMQ():this.enableMQ()),e.hasOwnProperty("name")&&(window.document.title=e.name),e}}),Io={class:"fullwrap",ref:"wrap"},xo={class:"dialog-overlay",tabindex:"-1"},$o={class:"pane-header flexrow",id:"duedialog_hdr"},To={style:{"flex-grow":"1"}},Po={class:"pane-body",id:"duedialog_body"},Ao={key:0},Oo={key:1},So={id:"app",role:"main"},Do={key:0};K(m({components:{ErrorDialog:z,DueDialog:m({name:"DueDialog",data:function(){return{dialog:null}},components:{Icons:f},computed:{settings:()=>qo.assessInfo,latepassExtendMsg(){return this.$t("closed-latepass_needed",{n:this.settings.can_use_latepass,date:this.settings.latepass_extendto_disp})},hasUnsubmitted(){return"by_assessment"===this.settings.submitby||Object.keys(ko.getChangedQuestions()).length>0},unsubmittedMessage(){return"by_question"===this.settings.submitby?this.$t("duedialog-byq_unsubmitted"):this.$t("duedialog-bya_unsubmitted")},exitPrimary(){return!this.hasUnsubmitted&&!this.canUseLatePass}},methods:{closeDialog(){qo.show_enddate_dialog=!1},submitNow(){ko.endAssess(()=>{this.exit()})},useLatepass(){ko.redeemLatePass(()=>{qo.show_enddate_dialog=!1})},exit(){this.closeDialog(),window.exiturl&&""!==window.exiturl?(qo.noUnload=!0,window.location=window.exiturl):ko.routeToStart()}},mounted(){const e=qo.lastPos;window.$(document).on("keyup.dialog",e=>{"Escape"===e.key&&this.closeDialog()}),this.dialog=new U(this.$refs.wrap),this.dialog.show(),window.innerHeight>2e3&&null!==e&&(this.$refs.dialog.style.top=Math.max(20,e-this.$refs.dialog.offsetHeight)+"px")},beforeUnmount(){window.$(document).off("keyup.dialog"),this.dialog.destroy()}},[["render",function(e,t,s,n,i,a){const o=b("icons");return v(),w("div",Io,[_("div",xo,[_("div",{class:"dialog",ref:"dialog",role:"alertdialog","aria-modal":"true","aria-labelledby":"duedialog_hdr","aria-describedby":"duedialog_body",tabindex:"-1",onClick:t[3]||(t[3]=E(()=>{},["stop"]))},[_("div",$o,[_("div",To,[q(o,{name:"alert"}),$(" "+x(e.$t("duedialog-due")),1)])]),_("div",Po,[_("p",null,x(e.$t("duedialog-nowdue")),1),a.settings.can_use_latepass>0&&a.settings.latepass_after?(v(),w("p",Ao,[$(x(e.$t("closed-latepassn",{n:a.settings.latepasses_avail}))+" ",1),t[4]||(t[4]=_("br",null,null,-1)),$(" "+x(a.latepassExtendMsg)+" ",1),t[5]||(t[5]=_("br",null,null,-1)),_("button",{onClick:t[0]||(t[0]=(...e)=>a.useLatepass&&a.useLatepass(...e)),class:"primary"},x(e.$t("closed-use_latepass",{n:this.settings.can_use_latepass})),1)])):k("",!0),a.hasUnsubmitted?(v(),w("p",Oo,[$(x(a.unsubmittedMessage)+" ",1),t[6]||(t[6]=_("br",null,null,-1)),_("button",{onClick:t[1]||(t[1]=(...e)=>a.submitNow&&a.submitNow(...e)),class:"primary"},x(e.$t("duedialog-submitnow")),1)])):k("",!0),_("p",null,[_("button",{class:I({primary:a.exitPrimary,secondary:!a.exitPrimary}),onClick:t[2]||(t[2]=(...e)=>a.exit&&a.exit(...e))},x(e.$t("closed-exit")),3)])])],512)])],512)}]]),ConfirmDialog:W},data:function(){return{prewarned:!1}},computed:{assessInfoLoaded:()=>null!==qo.assessInfo,hasError:()=>null!==qo.errorMsg,errorMsg:()=>qo.errorMsg,confirmObj:()=>qo.confirmObj,assessName:()=>qo.assessInfo.name,showDueDialog:()=>qo.show_enddate_dialog,lastPos:()=>qo.lastPos},methods:{beforeUnload(e){Object.keys(qo.autosaveQueue).length>0&&ko.submitAutosave(!1);var t=!0;if(qo.assessInfo.hasOwnProperty("questions")){let e=0;const s=qo.assessInfo.questions.length;for(const t in qo.assessInfo.questions)qo.assessInfo.questions[t].try>0&&e++;e===s&&(t=!1)}if(qo.noUnload);else{if(!qo.inProgress&&Object.keys(qo.work).length>0&&!this.prewarned)return e.preventDefault(),this.prewarned=!1,this.$t("unload-unsubmitted_work");if(qo.inProgress){if(Object.keys(ko.getChangedQuestions()).length>0&&!this.prewarned)return e.preventDefault(),this.prewarned=!1,this.$t("unload-unsubmitted_questions");if("by_assessment"===qo.assessInfo.submitby&&qo.assessInfo.has_active_attempt&&!this.prewarned)return e.preventDefault(),t?this.$t("unload-unsubmitted_assessment"):this.$t("unload-unsubmitted_done_assessment")}}this.prewarned=!1},clearError(){qo.errorMsg=null},closeConfirm(){qo.confirmObj=null}},created(){window.$(document).on("click",function(e){qo.lastPos=e.pageY}),window.$(document).on("focusin",function(e){e.target&&e.target.getBoundingClientRect&&(qo.lastPos=e.target.getBoundingClientRect().top)}),window.$(window).on("beforeunload",this.beforeUnload);var e=this;window.$("a").not('#app a, a[href="#"]').on("click",function(t){return"by_assessment"===qo.assessInfo.submitby&&qo.assessInfo.has_active_attempt?(t.preventDefault(),qo.confirmObj={body:"unload-unsubmitted_assessment",action:()=>{e.prewarned=!0,window.location=t.currentTarget.href}},!1):!qo.inProgress&&Object.keys(qo.work).length>0?(t.preventDefault(),qo.confirmObj={body:"unload-unsubmitted_work",action:()=>{e.prewarned=!0,window.location=t.currentTarget.href}},!1):void 0})}},[["render",function(e,t,s,n,i,a){const o=b("router-view"),r=b("error-dialog"),l=b("due-dialog"),u=b("confirm-dialog");return v(),w("div",So,[a.assessInfoLoaded?k("",!0):(v(),w("div",Do,x(e.$t("loading")),1)),a.assessInfoLoaded?(v(),S(o,{key:1})):k("",!0),a.hasError?(v(),S(r,{key:2,errormsg:a.errorMsg,lastpos:a.lastPos,onClearerror:a.clearError},null,8,["errormsg","lastpos","onClearerror"])):k("",!0),a.showDueDialog?(v(),S(l,{key:3})):k("",!0),null!==a.confirmObj?(v(),S(u,{key:4,data:a.confirmObj,lastpos:a.lastPos,onClose:a.closeConfirm},null,8,["data","lastpos","onClose"])):k("",!0)])}]])).use(vo).use(J).mount("#app")}}});
