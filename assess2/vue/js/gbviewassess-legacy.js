System.register(["./i18n-legacy.js?v=BzZ87Bm8"],function(e,s){"use strict";var t,a,r,o,i,n,l,d,u,c,h,p,b,w,v,m,g,k,y,f,_,q,x,$,A,I,O,P,T,S,D,C,Q,E,V,F;return{setters:[e=>{t=e._,a=e.e,r=e.o,o=e.b,i=e.n,n=e.L,l=e.j,d=e.l,u=e.k,c=e.t,h=e.C,p=e.x,b=e.G,w=e.T,v=e.q,m=e.M,g=e.g,k=e.F,y=e.f,f=e.P,_=e.z,q=e.I,x=e.W,$=e.v,A=e.O,I=e.X,O=e.H,P=e.J,T=e.Q,S=e.R,D=e.S,C=e.Y,Q=e.m,E=e.B,V=e.U,F=e.V}],execute:function(){const e=t({name:"RouterLink",props:["to","custom"]},[["render",function(e,s,t,o,i,n){return r(),a("div")}]]),s=o({assessInfo:null,APIbase:null,aid:null,cid:null,uid:null,stu:0,queryString:"",exitUrl:"",inTransit:!1,saving:"",errorMsg:null,confirmObj:null,curAver:0,ispractice:!1,curQver:[],orig_submitby:null,scoreOverrides:{},feedbacks:{},clearAttempts:{show:!1,type:"",qn:0}}),M={loadGbAssessData(e,t,a){s.inTransit?window.setTimeout(()=>this.loadGbAssessData(e,t,a),20):null===s.assessInfo&&window.gbAssessData?(s.assessInfo=window.gbAssessData,void 0!==t&&t()):(s.inTransit=!0,s.errorMsg=null,window.$.ajax({url:s.APIbase+"gbloadassess.php"+s.queryString,dataType:"json",data:{loadtexts:e?1:0},xhrFields:{withCredentials:!0},crossDomain:!0}).done(e=>{e.hasOwnProperty("error")?this.handleError(e.error):(s.assessInfo=e,s.curAver=e.scored_version,this.setQverAsScored(e.scored_version),void 0!==t&&t(),i(()=>{if(window.initAnswerboxHighlights(),window.location.hash){const e=document.getElementById(window.location.hash.substring(1).replace(/\//,""));e&&e.scrollIntoView()}}))}).fail((e,s,t)=>{this.handleError("parsererror"===s?"parseerror":"noserver")}).always(e=>{s.inTransit=!1}))},loadGbAssessVersion(e,t){if(s.inTransit)return void window.setTimeout(()=>this.loadGbAssessVersion(e,t),20);const a=s.queryString+"&ver="+e+"&practice="+(t?1:0);s.inTransit=!0,s.errorMsg=null,window.$.ajax({url:s.APIbase+"gbloadassessver.php"+a,dataType:"json",xhrFields:{withCredentials:!0},crossDomain:!0}).done(a=>{a.hasOwnProperty("error")?this.handleError(a.error):(t&&(e=s.assessInfo.assess_versions.length-1),delete s.assessInfo.interquestion_text,delete s.assessInfo.intro,s.assessInfo.assess_versions[e]=a,s.curAver=e,this.setQverAsScored(e),s.ispractice=t,t?(null===s.orig_submitby&&(s.orig_submitby=s.assessInfo.submitby),s.assessInfo.submitby="by_question"):null!==s.orig_submitby&&(s.assessInfo.submitby=s.orig_submitby),i(()=>{window.initAnswerboxHighlights()}))}).fail((e,s,t)=>{this.handleError("parsererror"===s?"parseerror":"noserver")}).always(e=>{s.inTransit=!1})},loadGbTexts(e){s.inTransit?window.setTimeout(()=>this.loadGbTexts(e),20):(s.inTransit=!0,s.errorMsg=null,window.$.ajax({url:s.APIbase+"gbloadtexts.php"+s.queryString,dataType:"json",xhrFields:{withCredentials:!0},crossDomain:!0}).done(t=>{if(t.hasOwnProperty("error"))return void this.handleError(t.error);const a=[];for(let e=0;e<s.assessInfo.assess_versions[s.curAver].questions.length;e++)a[e]={},s.assessInfo.assess_versions[s.curAver].questions[e][s.curQver[e]].hasOwnProperty("text")&&(a[e]={text:s.assessInfo.assess_versions[s.curAver].questions[e][s.curQver[e]].text.slice()});t.hasOwnProperty("interquestion_text")&&n(t,a),s.assessInfo.intro=t.intro,s.assessInfo.interquestion_text=t.interquestion_text,e&&i(()=>{e()})}).fail((e,s,t)=>{this.handleError("parsererror"===s?"parseerror":"noserver")}).always(e=>{s.inTransit=!1}))},loadGbQuestionVersion(e,t,a,r){if(s.inTransit)return void window.setTimeout(()=>this.loadGbQuestionVersion(e,t,a,r),20);let o=s.queryString+"&ver="+t+"&qn="+e;o+="&practice="+(s.ispractice?1:0),null===s.assessInfo.assess_versions[s.curAver].questions[e][t].html||!0===a?(s.inTransit=!0,s.errorMsg=null,window.$.ajax({url:s.APIbase+"gbloadquestionver.php"+o,dataType:"json",xhrFields:{withCredentials:!0},crossDomain:!0}).done(a=>{a.hasOwnProperty("error")?this.handleError(a.error):(r&&r(),s.assessInfo.assess_versions[s.curAver].questions[e][t]=Object.assign(s.assessInfo.assess_versions[s.curAver].questions[e][t],a),s.curQver[e]=t,i(()=>{window.initAnswerboxHighlights()}))}).fail((e,s,t)=>{this.handleError("parsererror"===s?"parseerror":"noserver")}).always(e=>{s.inTransit=!1})):s.curQver[e]=t},saveChanges(e,t,a){if(s.inTransit)return void window.setTimeout(()=>this.saveChanges(e,t,a),20);let r="";if(t&&(r="gbviewassess.php?cid="+s.cid+"&aid="+s.aid+"&uid="+s.assessInfo.nextstu,window.location.search.match(/from=/)&&(r+="&from="+window.location.search.replace(/^.*from=(\w+).*$/,"$1"))),0===Object.keys(s.scoreOverrides).length&&0===Object.keys(s.feedbacks).length&&!a)return s.saving="saved",void(e?window.location=window.exiturl:t&&(window.location=r));const o=s.queryString;s.inTransit=!0,s.saving="saving",s.errorMsg=null;const i=new FormData;i.append("scores",JSON.stringify(s.scoreOverrides)),i.append("feedback",JSON.stringify(s.feedbacks)),i.append("practice",s.ispractice?1:0),a&&i.append("releasescore",1),window.$.ajax({url:s.APIbase+"gbsave.php"+o,type:"POST",dataType:"json",data:i,processData:!1,contentType:!1,xhrFields:{withCredentials:!0},crossDomain:!0}).done(o=>{if(o.hasOwnProperty("error"))this.handleError(o.error);else if(s.saving="saved",(e||t)&&(s.scoreOverrides={},s.feedbacks={}),e)window.location=window.exiturl;else if(t)window.location=r;else{for(const e in s.scoreOverrides){if("gen"===e){""===s.scoreOverrides.gen?delete s.assessInfo.scoreoverride:(s.assessInfo.gbscore=s.scoreOverrides.gen,s.assessInfo.scoreoverride=s.scoreOverrides.gen);continue}const t=e.split(/-/),a=s.assessInfo.assess_versions[t[0]].questions[t[1]][t[2]];a.hasOwnProperty("scoreoverride")&&""===s.scoreOverrides[e]&&("number"==typeof a.scoreoverride?delete a.scoreoverride:delete a.scoreoverride[t[3]]),s.scoreOverrides.hasOwnProperty(e)&&""!==s.scoreOverrides[e]&&(a.hasOwnProperty("scoreoverride")||(s.assessInfo.assess_versions[t[0]].questions[t[1]][t[2]].scoreoverride={}),s.assessInfo.assess_versions[t[0]].questions[t[1]][t[2]].scoreoverride[t[3]]=s.scoreOverrides[e])}for(const e in o.newscores){const t=e.split(/-/);s.assessInfo.assess_versions[t[0]].questions[t[1]][t[2]].score=o.newscores[e][0];for(let a=0;a<o.newscores[e][1].length;a++)s.assessInfo.assess_versions[t[0]].questions[t[1]][t[2]].parts[a]=o.newscores[e][1][a]}for(const e in s.feedbacks){const t=e.split(/-/);"g"===t[1]?s.assessInfo.assess_versions[t[0]].feedback=s.feedbacks[e]:s.assessInfo.assess_versions[t[0]].questions[t[1]][t[2]].feedback=s.feedbacks[e]}s.assessInfo.gbscore=o.gbscore,s.assessInfo.scored_version=o.scored_version;for(let e=0;e<o.assess_info.length;e++){s.assessInfo.assess_versions[e].score=o.assess_info[e].score;for(let t=0;t<o.assess_info[e].scoredvers.length;t++){if(!s.assessInfo.assess_versions[e].hasOwnProperty("questions"))continue;const a=s.assessInfo.assess_versions[e].questions[t];for(let s=0;s<a.length;s++)s===o.assess_info[e].scoredvers[t]?a[s].scored=!0:a[s].scored&&delete a[s].scored}}s.scoreOverrides={},s.feedbacks={},a&&(s.assessInfo.manual_released=1)}}).fail(e=>{s.saving="save_fail"}).always(e=>{s.inTransit=!1})},clearLPblock(){s.clearAttempts.type="practiceview",this.clearAttempt(!0)},setManualRelease(e){if(s.inTransit)return void window.setTimeout(()=>this.setManualRelease(e),20);const t=s.queryString;s.inTransit=!0,s.saving="saving",s.errorMsg=null;const a=new FormData;a.append("scores","{}"),a.append("feedback","{}"),a.append("practice",0),a.append("releasescore",e),window.$.ajax({url:s.APIbase+"gbsave.php"+t,type:"POST",dataType:"json",data:a,processData:!1,contentType:!1,xhrFields:{withCredentials:!0},crossDomain:!0}).done(t=>{t.hasOwnProperty("error")?this.handleError(t.error):(s.saving="saved",s.assessInfo.manual_released=e)}).fail(e=>{this.handleError("send_fail")}).always(e=>{s.inTransit=!1})},setVerAsLast(){s.inTransit?window.setTimeout(()=>this.setVerAsLast(),20):window.$.ajax({url:s.APIbase+"gbsetlast.php"+s.queryString,type:"POST",dataType:"json",data:{aver:s.curAver},xhrFields:{withCredentials:!0},crossDomain:!0}).done(e=>{if(e.hasOwnProperty("error"))return void this.handleError(e.error);const t=s.assessInfo.assess_versions[s.curAver];s.assessInfo.assess_versions.splice(s.curAver,1),s.assessInfo.assess_versions.push(t),s.curAver=s.assessInfo.assess_versions.length-1,s.assessInfo.gbscore=e.gbscore,s.assessInfo.scored_version=e.scored_version}).fail(e=>{this.handleError("send_fail")}).always(e=>{s.inTransit=!1})},clearAttempt(e){const t={type:s.clearAttempts.type,keepver:e};"attempt"!==s.clearAttempts.type&&"qver"!==s.clearAttempts.type||(t.aver=s.curAver),"qver"===s.clearAttempts.type&&(t.qn=s.clearAttempts.qn,t.qver=s.curQver[t.qn]),window.$.ajax({url:s.APIbase+"gbclearattempt.php"+s.queryString,type:"POST",dataType:"json",data:t,xhrFields:{withCredentials:!0},crossDomain:!0}).done(e=>{if(e.hasOwnProperty("error"))this.handleError(e.error);else if("all"===s.clearAttempts.type&&0===t.keepver)window.location=window.exiturl;else if("all"===s.clearAttempts.type)M.loadGbAssessData();else if("practiceview"===s.clearAttempts.type)s.assessInfo.latepass_status=t.latepass_status;else if(s.assessInfo.gbscore=e.gbscore,s.assessInfo.scored_version=e.scored_version,"attempt"===s.clearAttempts.type){const a=new RegExp("^"+t.aver+"-");for(const e in s.scoreOverrides)e.match(a)&&delete s.scoreOverrides[e];e.hasOwnProperty("newver")?s.assessInfo.assess_versions[t.aver]=e.newver:(s.assessInfo.assess_versions.splice(t.aver,1),M.loadGbAssessVersion(e.scored_version,!1)),t.aver>0&&(s.curAver=t.aver-1)}else if("qver"===s.clearAttempts.type){const a=new RegExp("^"+t.aver+"-"+t.qn+"-"+t.qver+"-");for(const e in s.scoreOverrides)e.match(a)&&delete s.scoreOverrides[e];s.assessInfo.assess_versions[t.aver].score=e.assessinfo.score,s.assessInfo.assess_versions[t.aver].status=e.assessinfo.status,e.hasOwnProperty("newver")?(s.assessInfo.assess_versions[t.aver].questions[t.qn][t.qver]=e.newver,s.assessInfo.assess_versions[t.aver].questions[t.qn][e.qinfo.scored_version].scored=!0):M.loadGbQuestionVersion(t.qn,e.qinfo.scored_version,!0,()=>{s.assessInfo.assess_versions[t.aver].questions[t.qn].splice(t.qver,1),s.assessInfo.assess_versions[t.aver].questions[t.qn][e.qinfo.scored_version].scored=!0})}}).fail(e=>{this.handleError("send_fail")}).always(e=>{s.inTransit=!1,s.clearAttempts.show=!1})},endAssess(){s.inTransit?window.setTimeout(()=>this.endAssess(),20):(s.inTransit=!0,s.errorMsg=null,window.$.ajax({url:s.APIbase+"endassess.php"+s.queryString,dataType:"json",xhrFields:{withCredentials:!0},crossDomain:!0}).done(e=>{e.hasOwnProperty("error")?this.handleError(e.error):(s.assessInfo=null,M.loadGbAssessData())}).fail((e,s,t)=>{this.handleError("parsererror"===s?"parseerror":"noserver")}).always(e=>{s.inTransit=!1}))},setQverAsScored(e){const t=s.assessInfo.assess_versions[e].questions;let a;e:for(let r=0;r<t.length;r++)for(a=0;a<t[r].length;a++){if(t[r][a].hasOwnProperty("scored")){s.curQver[r]=a;continue e}s.curQver[r]=t[r].length-1}},setScoreOverride(e,t,a){const r=s.curAver,o=s.curQver[e],i=s.assessInfo.assess_versions[r].questions[e][o],n=r+"-"+e+"-"+o+"-"+t;if(""===a)s.scoreOverrides[n]="";else{let e=!0;i.singlescore?e=Math.abs(a-i.score/i.points_possible)>.001:i.parts[t]&&(e=Math.abs(a-i.parts[t].score/i.parts[t].points_possible)>.001),i.parts[t]&&i.parts[t].try>0&&(""===a||!e)?delete s.scoreOverrides[n]:s.scoreOverrides[n]=Math.round(1e4*a)/1e4}s.saving=""},setFeedback(e,t){let a=s.curAver,r=!0;if(null===e)a+="-g",t===s.assessInfo.assess_versions[s.curAver].feedback&&(r=!1);else{const o=s.curQver[e];a+="-"+e+"-"+o,t===s.assessInfo.assess_versions[s.curAver].questions[e][o].feedback&&(r=!1)}r?s.feedbacks[a]=t:delete s.feedbacks[a],s.saving=""},handleError(e){s.errorMsg=e}},L={class:"questionwrap questionpane"},j=["innerHTML","id"],G=t({name:"GbQuestion",props:["qdata","qn","disabled"],data:function(){return{rendered:!1}},methods:{renderInit(){this.rendered||(this.disabled&&window.$(this.$refs.thisqwrap).find("input,select,textarea").each(function(e,s){s.name.match(/^(qn|tc|qs)/)&&(s.disabled=!0)}),setTimeout(window.drawPics,100),window.rendermathnode(this.$refs.thisqwrap),window.initSageCell(this.$refs.thisqwrap),window.initlinkmarkup(this.$refs.thisqwrap),window.imathasAssess.init(this.qdata.jsparams,!0,this.$refs.thisqwrap),this.rendered=!0,this.$emit("qloaded",this.$refs.thisqwrap))}},mounted(){this.renderInit()},watch:{qdata:function(e,s){null!==e&&(this.rendered=!1,this.$nextTick(this.renderInit))}}},[["render",function(e,s,t,o,i,n){return r(),a("div",L,[l("div",{innerHTML:t.qdata.html,class:"question",id:"questionwrap"+t.qn,ref:"thisqwrap"},null,8,j)])}]]),U={key:0,class:"questionpane viewworkwrap",ref:"wrap"},B={key:0,class:"small"},N=["innerHTML"],R=t({name:"GbShowwork",props:["work","worktime","showall","previewfiles"],data:function(){return{show:!1,rendered:!1}},computed:{btnLabel(){return this.$t(this.show?"gradebook-hidework":"gradebook-showwork")}},methods:{renderInit(){!this.rendered&&this.work&&(setTimeout(window.drawPics,100),window.rendermathnode(this.$refs.workbox),window.initlinkmarkup(this.$refs.workbox),window.$(this.$refs.workbox).find("img").on("click",window.rotateimg),this.rendered=!0,this.previewfiles&&window.togglepreviewallfiles(!0,this.$refs.wrap))}},mounted(){this.renderInit(),this.show=this.showall},watch:{work:function(e,s){null!==e&&(this.rendered=!1,this.$nextTick(this.renderInit))},showall:function(e,s){this.show=e}}},[["render",function(e,s,t,o,i,n){return t.work?(r(),a("div",U,[l("div",null,[l("button",{type:"button",class:"slim",onClick:s[0]||(s[0]=s=>e.show=!e.show)},c(n.btnLabel),1),e.show&&"0"!==t.worktime?(r(),a("span",B,c(e.$t("gradebook-lastchange"))+" "+c(t.worktime),1)):d("",!0)]),u(w,{name:"fade"},{default:h(()=>[p(l("div",{class:"introtext",ref:"workbox",innerHTML:t.work},null,8,N),[[b,e.show]])]),_:1})],512)):d("",!0)}]]),H={key:0},z={key:1},W=t({name:"GbAssessSelect",props:["versions","selected","submitby","haspractice"],components:{MenuButton:m,GbAssessListItem:t({name:"GbAssessListItem",props:["option","submitby"],computed:{attemptNum(){return 3===this.option.status?this.$t("gradebook-practice_attempt"):"by_question"===this.submitby?this.$t("gradebook-scored_attempt"):this.$t("gradebook-attempt_n",{n:this.option.ver+1})},verStatus(){if(-1===this.option.status)return this.$t("gradebook-not_started");if(0===this.option.status&&"by_assessment"===this.submitby)return this.$t("gradebook-not_submitted");if(1===this.option.status||2===this.option.status){let e="";return"by_question"===this.submitby?e+=this.$t("gradebook-lastchange"):e+=this.$t("gradebook-submitted"),e+=" "+this.option.lastchange_disp,e}return""},score(){return this.option.score+"/"+s.assessInfo.points_possible}}},[["render",function(e,s,t,o,i,n){return r(),a("span",null,[l("strong",null,c(n.attemptNum)+". ",1),t.option.hasOwnProperty("score")&&"N/A"!==t.option.score?(r(),a("span",H,[v(c(e.$t("gradebook-score"))+": ",1),l("strong",null,c(n.score),1),s[0]||(s[0]=v(". ",-1))])):d("",!0),t.option.hasOwnProperty("status")?(r(),a("span",z,c(n.verStatus),1)):d("",!0)])}]])},computed:{navOptions(){var e=[];for(let s=0;s<this.versions.length;s++){const t={ver:s,status:this.versions[s].status,lastchange_disp:this.versions[s].lastchange_disp,onclick:()=>this.$emit("setversion",s)};this.versions[s].hasOwnProperty("score")&&(t.score=this.versions[s].score),e.push(t)}return e}},methods:{}},[["render",function(e,s,t,o,i,n){const l=g("gb-assess-list-item"),d=g("menu-button");return r(),a("div",null,[u(d,{id:"assess_select",options:n.navOptions,selected:t.selected,noarrow:1==n.navOptions.length,searchby:"ver"},{default:h(({option:e})=>[u(l,{option:e,submitby:t.submitby},null,8,["option","submitby"])]),_:1},8,["options","selected","noarrow"])])}]]),Z={key:0},J={style:{display:"inline-block"}},K=t({name:"GbQuestionSelect",props:["versions","selected","qn"],components:{MenuButton:m,GbQuestionListItem:t({name:"GbQuestionListItem",props:["option","total"],computed:{attemptNum(){return this.$t("gradebook-version_n",{n:this.option.ver+1})+(this.option.scored?"*":"")+"/"+this.total},score(){return this.option.score+"/"+this.option.ptsposs}}},[["render",function(e,s,t,o,i,n){return r(),a("span",null,[v(c(n.attemptNum)+". ",1),t.option.hasOwnProperty("score")&&"N/A"!==t.option.score?(r(),a("span",Z,[v(c(e.$t("gradebook-score"))+": ",1),l("strong",null,c(n.score),1)])):d("",!0)])}]])},computed:{navOptions(){var e=[];for(let s=0;s<this.versions.length;s++){const t={ver:s,ptsposs:this.versions[s].points_possible,onclick:()=>this.$emit("setversion",this.qn,s)};this.versions[s].hasOwnProperty("score")&&(t.score=this.versions[s].score,t.scored=!0===this.versions[s].hasOwnProperty("scored")),e.push(t)}return e}}},[["render",function(e,s,t,o,i,n){const l=g("gb-question-list-item"),d=g("menu-button");return r(),a("div",J,[u(d,{id:"qselect"+t.qn,options:n.navOptions,selected:t.selected,noarrow:1==n.navOptions.length,searchby:"ver"},{default:h(({option:e})=>[u(l,{option:e,total:n.navOptions.length},null,8,["option","total"])]),_:1},8,["id","options","selected","noarrow"])])}]]),Y={ref:"trywrap"},X={key:0},ee={key:1},se={key:0,class:"subdued"},te={key:0},ae={key:1},re={key:0},oe={key:0},ie=["innerHTML"],ne=t({name:"GbAllTries",props:["tries","qn","type","submitby"],data:function(){return{rendered:!1,drawToRender:[]}},computed:{processedTries(){const e=[];let s,t;for(s in this.tries){const a=[];for(t in this.tries[s])if("object"==typeof this.tries[s][t]&&"draw"===this.tries[s][t][0]){const e=this.qn+"-"+s+"-"+t,r=this.tries[s][t][2][6],o=this.tries[s][t][2][7];a[t]='<canvas id="canvasGBR'+e+'" width='+r+" height="+o+"></canvas>",a[t]+='<input type="hidden" id="qnGBR'+e+'"/>'}else a[t]=this.tries[s][t];e[s]=a}return e}},methods:{renderInit(){if(this.rendered)return;let e,s;for(e in setTimeout(window.drawPics,100),window.rendermathnode(this.$refs.trywrap),this.tries)for(s in this.tries[e])if("object"==typeof this.tries[e][s]&&"draw"===this.tries[e][s][0]){let t=this.tries[e][s][1].replace(/\(/g,"[").replace(/\)/g,"]").split(";;");""!==t[0]&&(t[0]="["+t[0].replace(/;/g,"],[")+"]"),t="[["+t.join("],[")+"]]";const a=this.qn+"-"+e+"-"+s,r=this.tries[e][s][2]||[];window.canvases["GBR"+a]=r.slice(),window.canvases["GBR"+a].unshift("GBR"+a),window.drawla["GBR"+a]=JSON.parse(t),window.imathasDraw.initCanvases("GBR"+a)}}},mounted(){this.renderInit()},watch:{tries:function(e,s){null!==e&&(this.rendered=!1,this.$nextTick(this.renderInit))}}},[["render",function(e,s,t,o,i,n){return r(),a("div",Y,[l("p",null,["tries"===t.type?(r(),a("strong",X,c(e.$t("gradebook-all_tries")),1)):"autosave"===t.type?(r(),a("strong",ee,c(e.$t("gradebook-autosaves")),1)):d("",!0)]),"autosave"===t.type?(r(),a("p",se,[v(c(e.$t("gradebook-autosave_info"))+" ",1),"by_assessment"==t.submitby?(r(),a("span",te,c(e.$t("gradebook-autosave_byassess")),1)):(r(),a("span",ae))])):d("",!0),(r(!0),a(k,null,y(n.processedTries,(s,o)=>(r(),a("div",{key:o,class:"med-below med-left"},[n.processedTries.length>1?(r(),a("div",re,[l("strong",null,c(e.$t("gradebook-part_n",{n:o+1})),1)])):d("",!0),(r(!0),a(k,null,y(s,(s,o)=>(r(),a("div",{key:o},["tries"==t.type?(r(),a("span",oe,c(e.$t("gradebook-try_n",{n:o+1}))+": ",1)):d("",!0),l("span",{innerHTML:s},null,8,ie)]))),128))]))),128))],512)}]]),le={class:"qdetails"},de=t({name:"GbPenalties",props:["parts","submitby"],components:{PenaltiesApplied:f},computed:{partHasPenalties(){const e=[];for(let s=0;s<this.parts.length;s++)this.parts[s].hasOwnProperty("penalties")&&this.parts[s].penalties.length>0&&e.push(s);return e}}},[["render",function(e,s,t,o,i,n){const u=g("penalties-applied");return r(),a("table",le,[s[0]||(s[0]=l("caption",{class:"sr-only"},"Penalties Applied",-1)),l("thead",null,[l("tr",null,[l("th",null,c(e.$t("qdetails-part")),1),l("th",null,c(e.$t("penalties-applied")),1)])]),l("tbody",null,[(r(!0),a(k,null,y(t.parts,(e,s)=>(r(),a("tr",{key:s},[l("td",null,c(s+1),1),l("td",null,[-1!=n.partHasPenalties.indexOf(s)?(r(),_(u,{key:0,class:"med-left",part:e,submitby:t.submitby},null,8,["part","submitby"])):d("",!0)])]))),128))])])}]]),ue=["id","rows"],ce=["id"],he=["id","aria-labelledby","value"],pe=["innerHTML"],be=t({name:"GbFeedback",props:["show","canedit","useeditor","value","qn","username"],components:{TinymceInput:t({name:"TinymceInput",props:{id:{default:null},value:{default:""},rows:{default:2}},data:function(){return{objTinymce:null}},computed:{computedId:function(){return"editor"===this.id||""===this.id||null===this.id?"editor-"+this.guidGenerator():this.id}},mounted:function(){this.$refs.inbox.innerHTML=this.value,this.initEditor()},updated:function(){this.initEditor()},methods:{guidGenerator:function(){function e(){return Math.random().toString(36).substr(2,9)}return"ed-"+e()+"-"+e()},initEditor(){var e=this;window.initeditor("exact",this.computedId,null,!0,function(s){s.on("input change keyup undo redo",function(t){e.updateValue(s.getContent())}).on("blur",function(s){e.$emit("blur",!0)}).on("focus",function(s){e.$emit("focus",!0)}),e.objTinymce=s})},updateValue:function(e){this.$emit("input",e)},focus:function(){this.objTinymce.focus()}},watch:{value:function(e,s){"string"!=typeof e&&(e=""),e!==this.objTinymce.getContent()&&this.objTinymce.setContent(e)}}},[["render",function(e,s,t,o,i,n){return r(),a("div",{id:n.computedId,ref:"inbox",class:"fbbox skipmathrender",role:"textbox",rows:t.rows},null,8,ue)}]])},data:function(){return{rendered:!1}},methods:{updateFeedback(e){let s;s=this.useeditor?e:e.target.value,this.$emit("update",s)},renderInit(){this.rendered||this.canedit||(setTimeout(window.drawPics,100),window.rendermathnode(this.$refs.fbbox))},focus(){this.$refs.fbbox.focus()}},mounted(){this.renderInit()},watch:{value:function(e,s){this.rendered=!1,this.$nextTick(this.renderInit)},show:function(e,s){this.$nextTick().then(()=>this.$nextTick()).then(()=>window.sendLTIresizemsg())}}},[["render",function(e,s,t,o,i,n){const d=g("tinymce-input");return p((r(),a("div",null,[l("span",{id:"fblbl"+t.qn},c(t.username?e.$t("gradebook-feedback_for",{name:t.username}):e.$t("gradebook-feedback")),9,ce),s[1]||(s[1]=v(":",-1)),s[2]||(s[2]=l("br",null,null,-1)),t.canedit&&!t.useeditor?(r(),a("textarea",{key:0,class:"fbbox",id:"fb"+t.qn,"aria-labelledby":"fblbl"+t.qn,ref:"fbbox",rows:"2",cols:"60",value:t.value,onInput:s[0]||(s[0]=(...e)=>n.updateFeedback&&n.updateFeedback(...e))},null,40,he)):t.canedit?(r(),_(d,{key:1,ref:"fbbox",id:"fb"+t.qn,value:t.value,onInput:n.updateFeedback,"aria-labelledby":"fblbl"+t.qn},null,8,["id","value","onInput","aria-labelledby"])):(r(),a("div",{key:2,class:"fbbox",ref:"fbbox",innerHTML:t.value},null,8,pe))],512)),[[b,t.show]])}]]),we={class:"scoredetails"},ve={key:1},me=["id","onUpdate:modelValue","aria-label","onInput"],ge={key:1},ke=["onClick"],ye=["onClick","id"],fe={key:2},_e={key:0},qe={key:1},xe={key:6},$e=["href"],Ae={key:7},Ie=["href"],Oe=["href"],Pe={key:0,class:"dialog-overlay",ref:"wrap"},Te=["aria-label"],Se={key:0,class:"clearoptions"},De={key:0},Ce={key:1,class:"clearoptions"},Qe={key:0},Ee={key:2,class:"clearoptions"},Ve={key:0},Fe={key:1},Me={key:2},Le={class:"noticetext"},je={class:"flexrow",style:{"justify-content":"space-between"}};var Ge={};const Ue={id:"app",role:"main"},Be={key:0},Ne={key:1,class:"gbmainview"},Re={class:"pii-full-name"},He={key:0},ze={key:1},We={key:1},Ze={key:2},Je={key:0},Ke={key:0},Ye=["value"],Xe={key:1},es={key:0},ss={key:1},ts={key:0},as={key:1},rs={key:0},os={for:"assessoverride"},is={key:1},ns=["disabled"],ls={key:2,class:"introtext"},ds={key:3},us=["href"],cs={key:1},hs=["href"],ps=["href"],bs={key:4},ws={key:5,class:"gbmainview"},vs={key:0},ms={key:0},gs=["innerHTML"],ks={key:1},ys={style:{"list-style-type":"none",margin:"0","padding-left":"15px"}},fs={id:"showopts"},_s={key:2},qs={class:"noticetext"},xs={key:3},$s=["id"],As={class:"bigquestionwrap"},Is={class:"headerpane"},Os={key:0,class:"small subdued"},Ps={key:2},Ts={key:3},Ss={class:"scrollpane"},Ds={class:"sidepreview"},Cs={key:4},Qs={key:0},Es=["disabled"],Vs=["disabled"],Fs=["disabled"],Ms={key:4,class:"noticetext"},Ls=["disabled"],js={key:5},Gs=["disabled"],Us=["disabled"],Bs={key:0,class:"noticetext"},Ns=["disabled"],Rs={class:"floatrightbutton"},Hs={key:0,class:"noticetext"},zs=["disabled"],Ws=V(t({components:{GbQuestion:G,GbShowwork:R,GbAssessSelect:W,GbQuestionSelect:K,GbScoreDetails:t({name:"GbScoreDetails",props:["qdata","qn","canedit","showfull"],components:{GbAllTries:ne,GbPenalties:de,MenuButton:m,Icons:q,GbFeedback:be},data:function(){return{curScores:[],showfeedback:!1,showAllTries:!1,showPenalties:!1,showAutosaves:!1}},computed:{answeights(){if(!this.qdata.answeights||this.qdata.singlescore)return[1];{const e=[];for(const t in this.qdata.answeights)e[t]=parseFloat(this.qdata.answeights[t]);const s=e.reduce((e,s)=>e+s);return e.map(e=>e/s)}},partPoss(){var e=[];for(let s=0;s<this.answeights.length;s++)e[s]=Math.round(1e3*this.qdata.points_possible*this.answeights[s])/1e3;return e},fullCreditLabel(){return this.answeights.length>1?this.$t("gradebook-full_credit_parts"):this.$t("gradebook-full_credit")},timeSpent(){return Math.round(10*this.qdata.timeactive.total/60)/10+" "+this.$t("gradebook-minutes")},useEditor:()=>void 0!==window.tinyMCE,isPractice:()=>s.ispractice,isLastVersion(){let e=s.assessInfo.assess_versions.length-1;return s.assessInfo.has_practice&&e--,s.curAver===e},maxTry(){let e=0;for(let s=0;s<this.qdata.parts.length;s++)this.qdata.parts[s]&&this.qdata.parts[s].try&&this.qdata.parts[s].try>e&&(e=this.qdata.parts[s].try);return e},questionEditUrl(){let e="id="+this.qdata.qsetid+"&cid="+s.cid;return e+="&aid="+s.aid+"&qid="+this.qdata.qid,s.APIbase+"../course/moddataset.php?"+e},questionErrorUrl(){if(s.assessInfo.qerror_cid){const e="0-"+this.qdata.qsetid+"-"+this.qdata.seed+"-reperr-"+s.assessInfo.ver,t="add=new&sendtype=msg&cid="+s.assessInfo.qerror_cid+"&quoteq="+e+"&to="+this.qdata.qowner+"&title=Problem%20with%20question%20id%20"+this.qdata.qsetid;return s.APIbase+"../course/sendmsgmodal.php?"+t}return""},useInMsg(){const e=this.qn+"-"+this.qdata.qsetid+"-"+this.qdata.seed+"-"+s.aid+"-"+s.assessInfo.ver,t="add=new&sendtype=msg&cid="+s.cid+"&quoteq="+e+"&to="+s.uid;return s.APIbase+"../course/sendmsgmodal.php?"+t},moreOptions(){const e=[{label:this.$t("gradebook-view_edit")+" ID "+this.qdata.qsetid+" Seed "+this.qdata.seed,link:this.questionEditUrl},{label:s.assessInfo.hasOwnProperty("qerrortitle")?s.assessInfo.qerrortitle:this.$t("gradebook-msg_owner"),link:this.questionErrorUrl,popup:!0,popupwidth:600,popupheight:"auto"}];return s.assessInfo?.can_message&&e.unshift({label:this.$t("gradebook-use_in_msg"),link:this.useInMsg,popup:!0,popupwidth:600,popupheight:"auto"}),!this.isPractice&&this.isLastVersion&&e.push({label:this.$t("gradebook-clear_qwork"),onclick:()=>this.clearWork()}),e},hasPenalties(){for(let e=0;e<this.qdata.parts.length;e++)if(this.qdata.parts[e].hasOwnProperty("penalties")&&this.qdata.parts[e].penalties.length>0)return!0;return!1},hasManual(){if(1===this.qdata.parts.length)return!1;for(let e=0;e<this.qdata.parts.length;e++)if(this.qdata.parts[e].hasOwnProperty("req_manual")&&!0===this.qdata.parts[e].req_manual)return!0;return!1},hasAutoSaves(){return this.qdata.hasOwnProperty("autosaves")},submitby:()=>s.assessInfo.submitby,qHelps(){if(this.qdata.jsparams){const e=this.qdata.jsparams.helps;for(const s in e)"video"===e[s].label?(e[s].icon="video",e[s].title=this.$t("helps-video")):"read"===e[s].label?(e[s].icon="file",e[s].title=this.$t("helps-read")):"ex"===e[s].label?(e[s].icon="file",e[s].title=this.$t("helps-written_example")):(e[s].icon="file",e[s].title=e[s].label);return e}return[]},showMessage:()=>s.assessInfo.hasOwnProperty("help_features")&&!0===s.assessInfo.help_features.message&&!s.assessInfo.can_edit_scores,postToForum:()=>s.assessInfo.hasOwnProperty("help_features")&&s.assessInfo.help_features.forum,quoteQ(){const e=this.qdata.questionsetid,t=this.qdata.seed;return this.qn+"-"+e+"-"+t+"-"+s.aid+"-2"},messageHref(){let e=window.imasroot+"/msgs/msglist.php?";return e+=window.$.param({cid:s.cid,add:"new",quoteq:this.quoteQ,to:"instr"}),e},forumHref(){let e=window.imasroot+"/forums/thread.php?";return e+=window.$.param({cid:s.cid,forum:s.assessInfo.help_features.forum,modify:"new",quoteq:this.quoteQ}),e}},methods:{updateScore(e,s){if(""===this.curScores[e].trim())M.setScoreOverride(this.qn,e,"");else{const s=this.qdata.points_possible*this.answeights[e];M.setScoreOverride(this.qn,e,this.curScores[e]/s)}},revealFeedback(){this.showfeedback=!0,this.$nextTick(()=>this.$refs.fbbox.focus())},updateFeedback(e){M.setFeedback(this.qn,e)},allFull(){for(let e=0;e<this.answeights.length;e++)("N/A"===this.curScores[e]||this.curScores[e]<this.partPoss[e])&&(this.curScores[e]=this.partPoss[e],M.setScoreOverride(this.qn,e,this.curScores[e]/this.partPoss[e]))},manualFull(){for(let e=0;e<this.answeights.length;e++)this.qdata.parts[e]&&this.qdata.parts[e].hasOwnProperty("req_manual")&&!0===this.qdata.parts[e].req_manual&&("N/A"===this.curScores[e]||this.curScores[e]<this.partPoss[e])&&(this.curScores[e]=this.partPoss[e],M.setScoreOverride(this.qn,e,this.curScores[e]/this.partPoss[e]))},clearWork(){s.clearAttempts.type="qver",s.clearAttempts.qn=this.qn,s.clearAttempts.show=!0},initCurScores(){var e=[];for(let s=0;s<this.answeights.length;s++)if(this.qdata.singlescore)e.push(this.qdata.score);else if(this.qdata.scoreoverride&&"object"!=typeof this.qdata.scoreoverride){let t=this.qdata.scoreoverride*this.answeights[s]*this.qdata.points_possible;t=Math.round(1e3*t)/1e3,e.push(t)}else this.qdata.scoreoverride&&this.qdata.scoreoverride.hasOwnProperty(s)?this.qdata.parts[s]&&this.qdata.parts[s].points_possible?e.push(Math.round(1e3*this.qdata.scoreoverride[s]*this.qdata.parts[s].points_possible)/1e3):e.push(Math.round(1e3*this.qdata.scoreoverride[s]*this.answeights[s]*this.qdata.points_possible)/1e3):0!==this.maxTry&&this.qdata.parts[s].hasOwnProperty("score")?e.push(this.qdata.parts[s].score):e.push("N/A");this.curScores=e,this.showfeedback=this.qdata.hasOwnProperty("feedback")&&this.qdata.feedback.length>0},showRubric(e){window.imasrubrics||(window.imasrubrics=s.assessInfo.rubrics),this.showfeedback=!0,window.imasrubric_show(this.qdata.rubric,this.partPoss[e],"scorebox"+this.qn+(this.partPoss.length>1?"-"+e:""),"fb"+this.qn,this.qn+1+(this.partPoss.length>1?" part "+(e+1):""),600)}},mounted(){this.initCurScores()},watch:{qdata:{handler:function(e,s){this.initCurScores()},deep:!0}}},[["render",function(e,s,t,o,i,n){const b=g("icons"),w=g("menu-button"),m=g("gb-feedback"),f=g("gb-all-tries"),q=g("gb-penalties");return r(),a("div",we,[t.canedit?(r(),_(w,{key:0,class:"floatright",options:n.moreOptions,position:"right",nobutton:"true",noarrow:"true",id:"qmore"+t.qn},{button:h(()=>[u(b,{name:"more",size:"medium"})]),_:1},8,["options","id"])):d("",!0),t.canedit||t.qdata.hasOwnProperty("score")&&"N/A"!==t.qdata.score?(r(),a("div",ve,[v(c(e.$t("gradebook-score"))+": ",1),(r(!0),a(k,null,y(n.partPoss,(o,i)=>(r(),a("span",{key:i},[t.canedit&&!n.isPractice?p((r(),a("input",{key:0,type:"text",size:"4",id:"scorebox"+t.qn+(n.partPoss.length>1?"-"+i:""),pattern:"N\\/A|\\d*\\.?\\d*","onUpdate:modelValue":s=>e.curScores[i]=s,"aria-label":e.$t("gradebook-score")+(n.partPoss.length>1?" "+e.$t("gradebook-part_n",{n:i+1}):""),onInput:e=>n.updateScore(i,e),onKeyup:s[0]||(s[0]=$(s=>e.$emit("submitform"),["enter"]))},null,40,me)),[[x,e.curScores[i]]]):(r(),a("span",ge,c(e.curScores[i]),1)),v("/"+c(o)+" ",1),t.canedit&&!n.isPractice&&t.qdata.rubric>0?(r(),a("button",{key:2,class:"plain nopad",onClick:e=>n.showRubric(i)},[u(b,{name:"clipboard",alt:"icons-rubric",size:"small"})],8,ke)):d("",!0),t.canedit&&!n.isPractice&&t.qdata.rubric>0?(r(),a("button",{key:3,style:{display:"none"},class:"plain nopad rubriclink",onClick:e=>n.showRubric(i),id:"rublink-scorebox"+t.qn+(n.partPoss.length>1?"-"+i:"")},[u(b,{name:"clipboard",alt:"icons-rubric",size:"small"})],8,ye)):d("",!0)]))),128)),t.canedit&&!n.isPractice?(r(),a("button",{key:0,type:"button",onClick:s[1]||(s[1]=(...e)=>n.allFull&&n.allFull(...e)),class:"slim"},c(n.fullCreditLabel),1)):d("",!0),t.canedit&&n.hasManual&&!n.isPractice?(r(),a("button",{key:1,type:"button",onClick:s[2]||(s[2]=(...e)=>n.manualFull&&n.manualFull(...e)),class:"slim"},c(e.$t("gradebook-full_manual_parts")),1)):d("",!0),t.canedit&&!n.isPractice&&!1===e.showfeedback?(r(),a("button",{key:2,type:"button",class:"slim",onClick:s[3]||(s[3]=(...e)=>n.revealFeedback&&n.revealFeedback(...e))},c(e.$t("gradebook-add_feedback")),1)):d("",!0)])):d("",!0),u(m,{show:e.showfeedback,canedit:t.canedit,useeditor:n.useEditor,ref:"fbbox",qn:t.qn,value:t.qdata.feedback,onUpdate:n.updateFeedback},null,8,["show","canedit","useeditor","qn","value","onUpdate"]),t.showfull?(r(),a("div",fe,[t.qdata.timeactive.total>0?(r(),a("span",_e,c(e.$t("gradebook-time_on_version"))+": "+c(n.timeSpent)+". ",1)):d("",!0),t.qdata.lastchange?(r(),a("span",qe,c(e.$t("gradebook-lastchange"))+" "+c(t.qdata.lastchange)+". ",1)):d("",!0),n.maxTry>1?(r(),a("button",{key:2,type:"button",class:"slim",onClick:s[4]||(s[4]=s=>e.showAllTries=!e.showAllTries)},c(e.$t("gradebook-show_tries")),1)):d("",!0),n.hasPenalties?(r(),a("button",{key:3,type:"button",class:"slim",onClick:s[5]||(s[5]=s=>e.showPenalties=!e.showPenalties)},c(e.$t("gradebook-show_penalties")),1)):d("",!0),n.hasAutoSaves?(r(),a("button",{key:4,type:"button",class:"slim",onClick:s[6]||(s[6]=s=>e.showAutosaves=!e.showAutosaves)},c(e.$t("gradebook-show_autosaves")),1)):d("",!0)])):d("",!0),e.showAllTries?(r(),_(f,{key:3,tries:t.qdata.other_tries,type:"tries",qn:t.qn},null,8,["tries","qn"])):d("",!0),e.showPenalties?(r(),_(q,{key:4,parts:t.qdata.parts,submitby:n.submitby},null,8,["parts","submitby"])):d("",!0),e.showAutosaves?(r(),_(f,{key:5,tries:t.qdata.autosaves,type:"autosave",submitby:n.submitby,qn:t.qn},null,8,["tries","submitby","qn"])):d("",!0),t.showfull&&n.qHelps.length>0?(r(),a("div",xe,[v(c(e.$t("gradebook-had_help"))+": ",1),(r(!0),a(k,null,y(n.qHelps,(e,s)=>(r(),a("a",{key:s,href:e.url,target:"_blank"},c(e.title),9,$e))),128))])):d("",!0),t.qdata.category?(r(),a("div",Ae,c(e.$t("qdetails-category"))+": "+c(t.qdata.category),1)):d("",!0),l("div",null,[n.showMessage?(r(),a("a",{key:0,href:n.messageHref,target:"help"},[u(b,{name:"message"}),v(" "+c(e.$t("helps-message_instructor")),1)],8,Ie)):d("",!0),n.postToForum>0?(r(),a("a",{key:1,href:n.forumHref,target:"help"},[u(b,{name:"forum"}),v(" "+c(e.$t("helps-post_to_forum")),1)],8,Oe)):d("",!0)])])}]]),GbClearAttempts:t({name:"GbClearAttempts",data:function(){return{type:0,dialog:null}},computed:{showModal:()=>s.clearAttempts.show,showType:()=>s.clearAttempts.type,isByQuestion:()=>"by_question"===s.assessInfo.submitby,isLastAttempt(){let e=s.assessInfo.assess_versions.length-1;return s.assessInfo.has_practice&&e--,s.curAver===e},isLastQAttempt(){const e=s.assessInfo.assess_versions[s.curAver].questions[s.clearAttempts.qn].length-1;return s.curQver[s.clearAttempts.qn]===e}},methods:{close(){s.clearAttempts.show=!1,window.$(document).off("keyup.dialog"),this.dialog.destroy()},doAction(){M.clearAttempt(this.type)}},updated(){s.clearAttempts.show&&(window.$(document).on("keyup.dialog",e=>{"Escape"===e.key&&this.close()}),this.dialog=new A(this.$refs.wrap),this.dialog.show())}},[["render",function(e,s,t,o,i,n){return n.showModal?(r(),a("div",Pe,[l("div",{class:"dialog pane-body",role:"alertdialog","aria-modal":"true","aria-label":e.$t("gradebook-clear_hdr"),"aria-describedby":"clearoptions",tabindex:"-1"},["all"===n.showType?(r(),a("div",Se,[l("p",null,[l("label",null,[p(l("input",{type:"radio",value:"0","onUpdate:modelValue":s[0]||(s[0]=s=>e.type=s)},null,512),[[I,e.type]]),v(" "+c(e.$t("gradebook-clear_completely_msg")),1)])]),n.isByQuestion?(r(),a("p",De,[l("label",null,[p(l("input",{type:"radio",value:"1","onUpdate:modelValue":s[1]||(s[1]=s=>e.type=s)},null,512),[[I,e.type]]),v(" "+c(e.$t("gradebook-clear_all_work_msg")),1)])])):d("",!0)])):"attempt"===n.showType?(r(),a("div",Ce,[l("p",null,[l("label",null,[p(l("input",{type:"radio",value:"0","onUpdate:modelValue":s[2]||(s[2]=s=>e.type=s)},null,512),[[I,e.type]]),v(" "+c(e.$t("gradebook-clear_attempt_regen_msg")),1)])]),n.isLastAttempt?(r(),a("p",Qe,[l("label",null,[p(l("input",{type:"radio",value:"1","onUpdate:modelValue":s[3]||(s[3]=s=>e.type=s)},null,512),[[I,e.type]]),v(" "+c(e.$t("gradebook-clear_attempt_msg")),1)])])):d("",!0)])):"qver"===n.showType?(r(),a("div",Ee,[n.isByQuestion?(r(),a("p",Ve,[l("label",null,[p(l("input",{type:"radio",value:"0","onUpdate:modelValue":s[4]||(s[4]=s=>e.type=s)},null,512),[[I,e.type]]),v(" "+c(e.$t("gradebook-clear_qver_regen_msg")),1)])])):(r(),a("p",Fe,[l("label",null,[p(l("input",{type:"radio",value:"0","onUpdate:modelValue":s[5]||(s[5]=s=>e.type=s)},null,512),[[I,e.type]]),v(" "+c(e.$t("gradebook-clear_qver_regen_msg2")),1)])])),n.isLastQAttempt?(r(),a("p",Me,[l("label",null,[p(l("input",{type:"radio",value:"1","onUpdate:modelValue":s[6]||(s[6]=s=>e.type=s)},null,512),[[I,e.type]]),v(" "+c(e.$t("gradebook-clear_qver_msg")),1)])])):d("",!0)])):d("",!0),l("p",Le,c(e.$t("gradebook-clear_warning")),1),l("div",je,[l("button",{class:"primary",onClick:s[7]||(s[7]=(...e)=>n.close&&n.close(...e))}," Cancel "),l("button",{class:"secondary",onClick:s[8]||(s[8]=(...e)=>n.doAction&&n.doAction(...e))}," Continue ")])],8,Te)],512)):d("",!0)}]]),SummaryCategories:D,ErrorDialog:S,GbFeedback:be,ConfirmDialog:T,InterQuestionTextList:P,InterQuestionText:O},data:function(){return{showOverride:!1,assessOverride:"",hide100:!1,hidePerfect:!1,hideNonzero:!1,hideZero:!1,hideUnanswered:!1,hideFeedback:!1,hideNowork:!1,showFilters:!1,showEndmsg:!1,showExcused:!1,showAllWork:!1,hidetexts:!0,op_previewFiles:!1,op_floatingSB:!1,op_showans:!1,sidebysideon:!1,op_oneatatime:!1,releaseOnSave:!1,curqn:0}},computed:{assessInfoLoaded:()=>null!==s.assessInfo,aData:()=>s.assessInfo,viewFull(){return this.aData.viewfull},canEdit(){return s.assessInfo.can_edit_scores&&this.viewFull},canSubmit:()=>!s.inTransit,useEditor:()=>void 0!==window.tinyMCE,isByQuestion(){return"by_question"===this.aData.submitby},startedString(){return 0===this.aData.starttime?this.$t("gradebook-not_started"):this.aData.starttime_disp},lastchangeString(){return 0===this.aData.lastchange?this.$t("gradebook-not_submitted"):this.aData.lastchange_disp},totalTimeOnTask(){return Math.round(10*this.aData.timeontask/60)/10+" "+this.$t("gradebook-minutes")},attemptCount(){let e=0;for(let s=0;s<this.aData.assess_versions.length;s++)this.aData.assess_versions[s].status<3&&e++;return e},extensionString(){return"latepass"===this.aData.extended_with.type?this.$t("setlist-latepass_used",{n:this.aData.extended_with.n}):this.$t("setlist-extension")},curQuestions(){return null===s.assessInfo?[]:this.aData.assess_versions[s.curAver].questions},curAver:()=>s.curAver,curQver:()=>s.curQver,curQuestionVers(){const e=[];for(let s=0;s<this.curQuestions.length;s++)e[s]=this.curQuestions[s][this.curQver[s]];return e},curEndmsg(){return this.aData.assess_versions[s.curAver].endmsg||""},showCategories(){let e=!1;for(const t in this.curQuestionVers)if(this.curQuestionVers[t].hasOwnProperty("category")&&""!==this.curQuestionVers[t].category&&null!==this.curQuestionVers[t].category){e=!0;break}const s=this.curQuestionVers[0].hasOwnProperty("score")&&!isNaN(Number(this.curQuestionVers[0].score));return e&&s},scoreCalc(){if("by_question"===this.aData.submitby)return this.$t("gradebook-best_on_question");if("best"===this.aData.keepscore){let e=this.$t("gradebook-keep_best");return"number"==typeof this.aData.gbscore&&(e+=" ("+this.$t("gradebook-attempt_n",{n:this.aData.scored_version+1})+")"),e}return"average"===this.aData.keepscore?this.$t("gradebook-keep_avg"):"last"===this.aData.keepscore?this.$t("gradebook-keep_last"):""},showViewAsStu(){return this.aData.has_active_attempt||0===this.aData.scored_version&&-1===this.aData.assess_versions[0].status},viewAsStuUrl:()=>"index.php?cid="+s.cid+"&aid="+s.aid+"&uid="+s.uid,activityLogUrl:()=>"../course/viewactionlog.php?cid="+s.cid+"&uid="+s.uid,showQuestion(){const e={};for(let s=0;s<this.curQuestions.length;s++){const t=this.curQuestions[s][this.curQver[s]];let a=!0;this.hide100&&t.score>t.points_possible-.002||this.hidePerfect&&Math.abs(t.rawscore)>.998||this.hideUnanswered&&0===t.parts.reduce((e,s)=>Math.max(e,s.try),0)||this.hideZero&&Math.abs(t.rawscore)<.002||this.hideNonzero&&Math.abs(t.rawscore)>.002&&Math.abs(t.rawscore)<.998||this.hideFeedback&&null!==t.feedback&&""!==t.feedback?a=!1:!this.hideNowork||t.hasOwnProperty("work")&&null!==t.work&&""!==t.work||(a=!1),e[s]=a}return e},nextVisible(){for(let e=this.curqn+1;e<this.curQuestions.length;e++)if(this.showQuestion[e])return e;return-1},prevVisible(){for(let e=this.curqn-1;e>=0;e--)if(this.showQuestion[e])return e;return-1},exceptionActionLabel(){return this.aData.hasexception?this.$t("gradebook-edit_exception"):this.$t("gradebook-make_exception")},assessFeedback(){return this.aData.assess_versions[s.curAver].feedback||""},savedMsg(){return""===s.saving?"":this.$t("gradebook-"+s.saving)},latepassBlockMsg(){var e;switch(this.aData.latepass_status){case 7:e="practice";break;case 8:e="gb";break;case 2:e="lpcutoff";break;case 3:e="courseend";break;case 4:e="pastdue";break;case 5:e="toolate";break;case 6:e="toofew"}return this.$t("gradebook-latepass_blocked_"+e)},isUnsubmitted(){return"by_assessment"===this.aData.submitby&&0===this.aData.assess_versions[s.curAver].status},hasError:()=>null!==s.errorMsg,errorMsg:()=>s.errorMsg,confirmObj:()=>s.confirmObj,lastQ(){return this.aData.assess_versions[s.curAver].questions.length-1},textList:()=>s.assessInfo.hasOwnProperty("interquestion_text")?s.assessInfo.interquestion_text:[],hasExit:()=>window.exiturl&&""!==window.exiturl},methods:{changeAssessVersion(e){e!==s.curAver&&(Object.keys(s.scoreOverrides).length>0||Object.keys(s.feedbacks).length>0?s.confirmObj={body:"gradebook-unsaved_warn",action:()=>this.doChangeAssessVersion(e)}:this.doChangeAssessVersion(e))},doChangeAssessVersion(e){e!==s.curAver&&(this.hidetexts=!0,3===this.aData.assess_versions[e].status?M.loadGbAssessVersion(0,!0):M.loadGbAssessVersion(e,!1))},changeQuestionVersion(e,t){if(t===s.curQver[e])return;let a=!1;const r=new RegExp("^"+s.curAver+"-"+e+"-");for(const o in s.scoreOverrides)r.test(o)&&(a=!0);for(const o in s.feedbacks)r.test(o)&&(a=!0);a?s.confirmObj={body:"gradebook-unsaved_warn",action:()=>M.loadGbQuestionVersion(e,t)}:M.loadGbQuestionVersion(e,t)},updateFeedback(e){M.setFeedback(null,e)},setScoreOverride(e){const t=e.target.value.trim();t!==this.aData.scoreoverride&&(s.scoreOverrides.gen=t,this.assessOverride=""),s.saving=""},submitChanges(e,t){!this.aData.hasOwnProperty("scoreoverride")&&this.showOverride&&(""!==this.assessOverride&&(s.scoreOverrides.gen=this.assessOverride),this.showOverride=!1);var a=!0===e,r=!0===t;M.saveChanges(a,r,this.releaseOnSave)},submitForm(){this.submitChanges(!0)},exit(){window.location=window.exiturl},clearAttempts(e){s.clearAttempts.type=e,s.clearAttempts.show=!0},setVerAsLast(){s.confirmObj={body:"gradebook-setaslast_warn",action:()=>M.setVerAsLast()}},setManualRelease(){this.releaseOnSave=!1,M.setManualRelease(1-this.aData.manual_released)},clearLPblock(){M.clearLPblock()},submitVersion(){M.endAssess()},redeemLatePass(){window.location=this.APIbase+"../course/redeemlatepass.php?cid="+s.cid+"&aid="+s.aid},makeException(){let e=s.APIbase+"../course/exception.php";e+="?cid="+s.cid+"&aid="+s.aid+"&uid="+s.uid,e+="&from=gb",window.location=e},beforeUnload(e){if(Object.keys(s.scoreOverrides).length>0||Object.keys(s.feedbacks).length>0)return e.preventDefault(),e.returnValue="You have unsaved changes","You have unsaved changes"},clearError(){s.errorMsg=null},closeConfirm(){s.confirmObj=null},showAllAns(){window.toggleshowallans(this.op_showans)},previewFiles(){window.togglepreviewallfiles(this.op_previewFiles)},toggleFloatingScoreboxes(){window.toggleScrollingScoreboxState(this.op_floatingSB)},sidebysideAction(){window.sidebysidemoveels(this.sidebysideon)},loadTexts(){s.assessInfo.hasOwnProperty("intro")||M.loadGbTexts()},storeFilters(){const e=["hide100","hidePerfect","hideNonzero","hideZero","hideUnanswered","hideFeedback","hideNowork","showEndmsg","showExcused","showAllWork","hidetexts","op_previewFiles","op_floatingSB","op_showans","sidebysideon","op_oneatatime"],t=[];for(const s of e)("hidetexts"===s&&!1===this[s]||"hidetexts"!==s&&!0===this[s])&&t.push(s);window.setCookie("gvaf"+s.aid,t.join(","))},questionLoaded(e){this.op_previewFiles&&window.togglepreviewallfiles(!0,e),this.op_showans&&window.toggleshowallans(!0,e),this.sidebysideon&&window.sidebysidemoveels(!0,e),this.$nextTick(window.sendLTIresizemsg)},setCurqn(e){this.curqn=e,this.$nextTick(()=>window.document.getElementById("qwrap"+(e+1)).scrollIntoView())},msgStu(){let e=s.APIbase+"../course/sendmsgmodal.php?add=new&sendtype=msg";e+="&cid="+s.cid+"&to="+s.uid,e+="&title="+encodeURIComponent(this.aData.name),window.GB_show(this.$t("gradebook-msg_student"),e,600,"auto",!1)}},created(){window.$(window).on("beforeunload",this.beforeUnload),void 0!==window.APIbase?s.APIbase=window.APIbase:s.APIbase=Ge.BASE_URL;const e=window.location.search.replace(/^.*cid=(\d+).*$/,"$1"),t=window.location.search.replace(/^.*aid=(\d+).*$/,"$1"),a=window.location.search.replace(/^.*uid=(\d+).*$/,"$1"),r=window.location.search.replace(/^.*stu=(\d+).*$/,"$1");if(null===s.assessInfo||s.cid!==e||s.aid!==t||s.uid!==a){s.cid=e,window.cid=e,s.aid=t,s.uid=a,s.stu=r,s.queryString="?cid="+s.cid+"&aid="+s.aid+"&uid="+s.uid;const o=window.readCookie("gvaf"+s.aid);if(null!==o&&o.length>0){this.showFilters=!0;const e=o.split(",");for(const s of e)this[s]="hidetexts"!==s}M.loadGbAssessData(!1===this.hidetexts)}},mounted(){const e=window.readCookie("gvaf"+s.aid);null!==e&&e.length>0&&(-1!==e.split(",").indexOf("op_floatingSB")&&window.toggleScrollingScoreboxState(!0),this.$nextTick(window.sendLTIresizemsg))},updated(){this.$nextTick(window.sendLTIresizemsg)},watch:{showQuestion:{handler(e){this.op_oneatatime&&!e[this.curqn]&&(e[this.nextVisible]?this.curqn=this.nextVisible:e[this.prevVisible]&&(this.curqn=this.prevVisible))},deep:!0}}},[["render",function(e,s,t,o,i,n){const h=g("gb-assess-select"),w=g("inter-question-text"),m=g("inter-question-text-list"),f=g("gb-question-select"),q=g("gb-question"),A=g("gb-showwork"),I=g("gb-score-details"),O=g("gb-feedback"),P=g("summary-categories"),T=g("gb-clear-attempts"),S=g("error-dialog"),D=g("confirm-dialog");return r(),a("div",Ue,[n.assessInfoLoaded?(r(),a("div",Ne,[l("h1",null,c(e.$t("gradebook-detail_title")),1),l("h2",null,[l("span",Re,c(n.aData.userfullname),1)]),l("h3",null,c(n.aData.name),1),l("div",null,[v(c(e.$t("gradebook-started"))+": "+c(n.startedString),1),s[49]||(s[49]=l("br",null,null,-1)),v(" "+c(e.$t("gradebook-lastchange"))+": "+c(n.lastchangeString)+" ",1),n.aData.timeontask>0?(r(),a("span",He,[s[47]||(s[47]=l("br",null,null,-1)),v(" "+c(e.$t("gradebook-time_onscreen",{n:n.attemptCount}))+": "+c(n.totalTimeOnTask),1)])):d("",!0),n.aData.hasOwnProperty("timelimit_ext")?(r(),a("span",ze,[s[48]||(s[48]=l("br",null,null,-1)),v(" "+c(e.$t("gradebook-"+(n.aData.timelimit_ext>0?"has_timeext":"used_timeext"),{n:Math.abs(n.aData.timelimit_ext)})),1)])):d("",!0)]),l("div",null,[v(c(e.$t("gradebook-due"))+": "+c(n.aData.enddate_disp)+" ",1),n.canEdit&&n.aData.can_make_exception?(r(),a("button",{key:0,type:"button",class:"slim",onClick:s[0]||(s[0]=(...e)=>n.makeException&&n.makeException(...e))},c(n.exceptionActionLabel),1)):d("",!0),n.aData.hasOwnProperty("original_enddate")?(r(),a("span",We,[s[50]||(s[50]=l("br",null,null,-1)),v(" "+c(e.$t("gradebook-originally_due"))+": "+c(n.aData.original_enddate_disp)+". "+c(n.extensionString),1)])):d("",!0),n.aData.hasOwnProperty("attemptext")?(r(),a("span",Ze,[s[51]||(s[51]=l("br",null,null,-1)),v(" "+c(e.$t("gradebook-attemptext",{n:n.aData.attemptext})),1)])):d("",!0)]),n.canEdit&&n.aData.latepass_status>1?(r(),a("div",Je,[v(c(n.latepassBlockMsg)+" ",1),n.aData.latepass_status>6?(r(),a("button",{key:0,type:"button",onClick:s[1]||(s[1]=(...e)=>n.clearLPblock&&n.clearLPblock(...e))},c(e.$t("gradebook-clear_latepass_block")),1)):d("",!0)])):d("",!0),l("div",null,[l("strong",null,[v(c(e.$t("gradebook-gb_score"))+": ",1),n.aData.hasOwnProperty("scoreoverride")&&n.canEdit?(r(),a("span",Ke,[l("input",{id:"assessoverride",size:"4",value:n.aData.scoreoverride,onInput:s[2]||(s[2]=(...e)=>n.setScoreOverride&&n.setScoreOverride(...e)),onKeyup:s[3]||(s[3]=$((...e)=>n.submitForm&&n.submitForm(...e),["enter"]))},null,40,Ye),v("/"+c(n.aData.points_possible),1)])):(r(),a("span",Xe,[n.canEdit||"N/A"!==n.aData.gbscore?(r(),a("span",ss,c(n.aData.gbscore)+"/"+c(n.aData.points_possible),1)):(r(),a("span",es,c(e.$t("gradebook-avail_"+n.aData.scoresingb)),1))]))]),n.aData.hasOwnProperty("scoreoverride")?(r(),a("span",ts," ("+c(e.$t("gradebook-overridden"))+") ",1)):n.canEdit?(r(),a("span",as,[l("button",{class:"slim",type:"button",onClick:s[4]||(s[4]=s=>e.showOverride=!e.showOverride)},c(e.$t("gradebook-override")),1),e.showOverride?(r(),a("span",rs,[l("label",os,c(e.$t("gradebook-override")),1),s[52]||(s[52]=v(": ",-1)),p(l("input",{id:"assessoverride",size:"4","onUpdate:modelValue":s[5]||(s[5]=s=>e.assessOverride=s),onKeyup:s[6]||(s[6]=$((...e)=>n.submitForm&&n.submitForm(...e),["enter"]))},null,544),[[x,e.assessOverride]])])):d("",!0)])):d("",!0),n.canEdit?(r(),a("button",{key:2,type:"button",class:"slim",onClick:s[7]||(s[7]=e=>n.clearAttempts("all"))},c(e.$t("gradebook-clear_all")),1)):d("",!0),n.aData.hasOwnProperty("excused")?(r(),a("button",{key:3,type:"button",class:"slim",onClick:s[8]||(s[8]=s=>e.showExcused=!e.showExcused)},c(e.$t("gradebook-"+(e.showExcused?"hide":"show")+"_excused")),1)):d("",!0)]),n.canEdit&&"manual"===n.aData.scoresingb?(r(),a("div",is,[v(c(e.$t("gradebook-manualstatus"+n.aData.manual_released))+" ",1),l("button",{type:"button",class:"slim",disabled:!n.canSubmit,onClick:s[9]||(s[9]=(...e)=>n.setManualRelease&&n.setManualRelease(...e))},c(e.$t("gradebook-manualbutton"+n.aData.manual_released)),9,ns)])):d("",!0),e.showExcused?(r(),a("div",ls,[v(c(e.$t("gradebook-excused_list"))+" ",1),l("ul",null,[(r(!0),a(k,null,y(n.aData.excused,e=>(r(),a("li",{key:e},c(e),1))),128))])])):d("",!0),n.canEdit?(r(),a("div",ds,[n.showViewAsStu?(r(),a("a",{key:0,href:n.viewAsStuUrl},c(e.$t("gradebook-view_as_stu")),9,us)):d("",!0),n.showViewAsStu?(r(),a("span",cs," | ")):d("",!0),l("a",{href:n.viewAsStuUrl+"#/print"},c(e.$t("gradebook-print")),9,hs),s[53]||(s[53]=v(" | ",-1)),l("a",{href:n.activityLogUrl,target:"_blank"},c(e.$t("gradebook-activitylog")),9,ps)])):d("",!0),0==n.aData.assess_versions.length?(r(),a("div",bs,c(e.$t("gradebook-no_versions")),1)):(r(),a("div",ws,[l("div",null,[v(c(n.scoreCalc)+" ",1),l("div",null,[n.viewFull||"by_assessment"===n.aData.submitby?(r(),_(h,{key:0,style:{display:"inline-block"},versions:n.aData.assess_versions,submitby:n.aData.submitby,haspractice:n.aData.has_practice,selected:n.curAver,onSetversion:n.changeAssessVersion},null,8,["versions","submitby","haspractice","selected","onSetversion"])):d("",!0),!n.isByQuestion&&n.canEdit&&-1!=n.aData.assess_versions[n.curAver].status?(r(),a("button",{key:1,type:"button",onClick:s[10]||(s[10]=e=>n.clearAttempts("attempt"))},c(e.$t("gradebook-clear_attempt")),1)):d("",!0),!n.isByQuestion&&n.canEdit&&"last"===n.aData.keepscore&&n.curAver<n.aData.assess_versions.length-1?(r(),a("button",{key:2,type:"button",onClick:s[11]||(s[11]=(...e)=>n.setVerAsLast&&n.setVerAsLast(...e))},c(e.$t("gradebook-set_as_last")),1)):d("",!0)]),n.isUnsubmitted?(r(),a("div",vs,[v(c(e.$t("gradebook-unsubmitted"))+" ",1),l("button",{type:"button",onClick:s[12]||(s[12]=(...e)=>n.submitVersion&&n.submitVersion(...e))},c(e.$t("closed-submit_now")),1),!n.canEdit&&n.aData.can_use_latepass?(r(),a("button",{key:0,type:"button",onClick:s[13]||(s[13]=(...e)=>n.redeemLatePass&&n.redeemLatePass(...e))},c(e.$t("lti-use_latepass")),1)):d("",!0)])):d("",!0)]),""!==n.curEndmsg?(r(),a("div",ms,[n.viewFull?(r(),a("button",{key:0,type:"button",onClick:s[14]||(s[14]=s=>e.showEndmsg=!e.showEndmsg)},c(e.$t("gradebook-"+(e.showEndmsg?"hide":"show")+"_endmsg")),1)):d("",!0),e.showEndmsg||!n.viewFull?(r(),a("div",{key:1,class:"introtext",innerHTML:n.curEndmsg},null,8,gs)):d("",!0)])):d("",!0),n.canEdit&&n.viewFull?(r(),a("div",ks,[l("button",{onClick:s[15]||(s[15]=s=>e.showFilters=!e.showFilters)},c(e.$t("gradebook-filters")),1),e.showFilters?(r(),a("div",{key:0,class:"tabpanel",onChange:s[35]||(s[35]=(...e)=>n.storeFilters&&n.storeFilters(...e))},[l("p",null,c(e.$t("gradebook-hide"))+":",1),l("ul",ys,[l("li",null,[l("label",null,[p(l("input",{type:"checkbox","onUpdate:modelValue":s[16]||(s[16]=s=>e.hideUnanswered=s)},null,512),[[C,e.hideUnanswered]]),v(" "+c(e.$t("gradebook-hide_unans")),1)])]),l("li",null,[l("label",null,[p(l("input",{type:"checkbox","onUpdate:modelValue":s[17]||(s[17]=s=>e.hideZero=s)},null,512),[[C,e.hideZero]]),v(" "+c(e.$t("gradebook-hide_zero")),1)])]),l("li",null,[l("label",null,[p(l("input",{type:"checkbox","onUpdate:modelValue":s[18]||(s[18]=s=>e.hideNonzero=s)},null,512),[[C,e.hideNonzero]]),v(" "+c(e.$t("gradebook-hide_nonzero")),1)])]),l("li",null,[l("label",null,[p(l("input",{type:"checkbox","onUpdate:modelValue":s[19]||(s[19]=s=>e.hidePerfect=s)},null,512),[[C,e.hidePerfect]]),v(" "+c(e.$t("gradebook-hide_perfect")),1)])]),l("li",null,[l("label",null,[p(l("input",{type:"checkbox","onUpdate:modelValue":s[20]||(s[20]=s=>e.hide100=s)},null,512),[[C,e.hide100]]),v(" "+c(e.$t("gradebook-hide_100")),1)])]),l("li",null,[l("label",null,[p(l("input",{type:"checkbox","onUpdate:modelValue":s[21]||(s[21]=s=>e.hideFeedback=s)},null,512),[[C,e.hideFeedback]]),v(" "+c(e.$t("gradebook-hide_fb")),1)])]),l("li",null,[l("label",null,[p(l("input",{type:"checkbox","onUpdate:modelValue":s[22]||(s[22]=s=>e.hideNowork=s)},null,512),[[C,e.hideNowork]]),v(" "+c(e.$t("gradebook-hide_nowork")),1)])]),l("li",null,[l("label",null,[p(l("input",{type:"checkbox","onUpdate:modelValue":s[23]||(s[23]=s=>e.hidetexts=s),onChange:s[24]||(s[24]=(...e)=>n.loadTexts&&n.loadTexts(...e))},null,544),[[C,e.hidetexts]]),v(" "+c(e.$t("gradebook-introtexts")),1)])])]),l("p",fs,[l("label",null,[p(l("input",{type:"checkbox","onUpdate:modelValue":s[25]||(s[25]=s=>e.op_showans=s),onChange:s[26]||(s[26]=(...e)=>n.showAllAns&&n.showAllAns(...e))},null,544),[[C,e.op_showans]]),v(c(e.$t("gradebook-show_all_ans")),1)]),l("label",null,[p(l("input",{type:"checkbox","onUpdate:modelValue":s[27]||(s[27]=s=>e.showAllWork=s)},null,512),[[C,e.showAllWork]]),v(c(e.$t("gradebook-show_all_work")),1)]),l("label",null,[p(l("input",{type:"checkbox","onUpdate:modelValue":s[28]||(s[28]=s=>e.op_previewFiles=s),onChange:s[29]||(s[29]=(...e)=>n.previewFiles&&n.previewFiles(...e))},null,544),[[C,e.op_previewFiles]]),v(c(e.$t("gradebook-preview_files")),1)]),l("label",null,[p(l("input",{type:"checkbox","onUpdate:modelValue":s[30]||(s[30]=s=>e.op_floatingSB=s),onChange:s[31]||(s[31]=(...e)=>n.toggleFloatingScoreboxes&&n.toggleFloatingScoreboxes(...e))},null,544),[[C,e.op_floatingSB]]),v(c(e.$t("gradebook-floating_scoreboxes")),1)]),l("label",null,[p(l("input",{type:"checkbox","onUpdate:modelValue":s[32]||(s[32]=s=>e.sidebysideon=s),onChange:s[33]||(s[33]=(...e)=>n.sidebysideAction&&n.sidebysideAction(...e))},null,544),[[C,e.sidebysideon]]),v(c(e.$t("gradebook-sidebyside")),1)]),l("label",null,[p(l("input",{type:"checkbox","onUpdate:modelValue":s[34]||(s[34]=s=>e.op_oneatatime=s)},null,512),[[C,e.op_oneatatime]]),v(c(e.$t("gradebook-oneatatime")),1)])])],32)):d("",!0)])):n.viewFull?(r(),a("div",_s,[l("button",{onClick:s[36]||(s[36]=s=>{e.hidetexts=!e.hidetexts,n.loadTexts()})},c(e.$t(e.hidetexts?"print-show_text":"print-hide_text")),1),l("p",qs,c(e.$t("gradebook-no_edit")),1)])):d("",!0),n.viewFull?(r(),a("div",xs,[n.aData.hasOwnProperty("intro")&&""!==n.aData.intro?p((r(),_(w,{key:0,active:!e.hidetexts,textobj:{html:n.aData.intro},class:"questionpane introtext"},null,8,["active","textobj"])),[[b,!e.hidetexts]]):d("",!0),(r(!0),a(k,null,y(n.curQuestions,(t,o)=>(r(),a("div",{key:o,id:"qwrap"+(o+1)},[p((r(),_(m,{pos:"beforeexact",qn:o,key:"iqt"+o,active:!e.hidetexts,lastq:n.lastQ,textlist:n.textList},null,8,["qn","active","lastq","textlist"])),[[b,!e.hidetexts&&n.showQuestion[o]&&(!e.op_oneatatime||e.curqn===o)]]),p(l("div",As,[l("div",Is,[l("strong",null,c(e.$t("question_n",{n:o+1}))+". ",1),t[n.curQver[o]].extracredit?(r(),a("em",Os,c(e.$t("extracredit")),1)):d("",!0),"by_question"===n.aData.submitby?(r(),_(f,{key:1,versions:t,selected:n.curQver[o],qn:o,onSetversion:n.changeQuestionVersion,class:"med-left"},null,8,["versions","selected","qn","onSetversion"])):t[n.curQver[o]].hasOwnProperty("gbscore")&&"N/A"!==t[n.curQver[o]].gbscore?(r(),a("span",Ps,[v(c(e.$t("gradebook-score"))+": ",1),l("strong",null,c(t[n.curQver[o]].gbscore)+"/"+c(t[n.curQver[o]].points_possible),1)])):d("",!0),t[n.curQver[o]].useda11yalt?(r(),a("span",Ts," ("+c(e.$t("gradebook-a11yalt"))+")",1)):d("",!0)]),l("div",{class:Q(["sidebyside",{sidebysideon:e.sidebysideon}])},[l("div",Ss,[u(q,{class:Q({inactive:!n.showQuestion[o]}),qdata:t[n.curQver[o]],qn:o,disabled:!n.canEdit,onQloaded:n.questionLoaded},null,8,["class","qdata","qn","disabled","onQloaded"]),e.sidebysideon?d("",!0):(r(),_(A,{key:0,work:t[n.curQver[o]].work,worktime:t[n.curQver[o]].worktime,showall:e.showAllWork,previewfiles:e.op_previewFiles},null,8,["work","worktime","showall","previewfiles"]))]),l("div",Ds,[s[54]||(s[54]=l("div",{class:"sidepreviewtarget"},null,-1)),e.sidebysideon?(r(),_(A,{key:0,work:t[n.curQver[o]].work,worktime:t[n.curQver[o]].worktime,showall:e.showAllWork,previewfiles:e.op_previewFiles},null,8,["work","worktime","showall","previewfiles"])):d("",!0)])],2),u(I,{showfull:n.showQuestion[o],canedit:n.canEdit,qdata:t[n.curQver[o]],qn:o,onSubmitform:n.submitForm},null,8,["showfull","canedit","qdata","qn","onSubmitform"])],512),[[b,n.showQuestion[o]&&(!e.op_oneatatime||e.curqn===o)]])],8,$s))),128)),p(u(m,{pos:"after",qn:n.lastQ,active:!e.hidetexts,lastq:n.lastQ,textlist:n.textList},null,8,["qn","active","lastq","textlist"]),[[b,!e.hidetexts]])])):d("",!0),u(O,{qn:"gen",username:n.aData.userfullname,show:n.viewFull&&(n.canEdit||""!==n.assessFeedback)&&(!e.op_oneatatime||-1===n.nextVisible),canedit:n.canEdit,useeditor:n.useEditor,value:n.assessFeedback,onUpdate:n.updateFeedback},null,8,["username","show","canedit","useeditor","value","onUpdate"]),e.op_oneatatime&&-1!==n.nextVisible?(r(),a("div",js,[l("button",{disabled:-1===n.prevVisible,type:"button",class:"secondary",onClick:s[43]||(s[43]=e=>n.setCurqn(n.prevVisible))},c(e.$t("gradebook-prevq")),9,Gs),l("button",{disabled:-1===n.nextVisible,type:"button",class:"primary",onClick:s[44]||(s[44]=e=>n.setCurqn(n.nextVisible))},c(e.$t("gradebook-nextq")),9,Us),""!==n.savedMsg?(r(),a("span",Bs,c(n.savedMsg),1)):d("",!0),n.hasExit?(r(),a("button",{key:1,type:"button",class:"secondary",disabled:!n.canSubmit,onClick:s[45]||(s[45]=(...e)=>n.exit&&n.exit(...e))},c(e.$t("gradebook-return")),9,Ns)):d("",!0)])):(r(),a("div",Cs,[n.canEdit&&"manual"===n.aData.scoresingb&&0==n.aData.manual_released?(r(),a("p",Qs,[l("label",null,[p(l("input",{type:"checkbox","onUpdate:modelValue":s[37]||(s[37]=s=>e.releaseOnSave=s)},null,512),[[C,e.releaseOnSave]]),v(" "+c(e.$t("gradebook-release_on_save")),1)])])):d("",!0),e.op_oneatatime?(r(),a("button",{key:1,disabled:-1===n.prevVisible,type:"button",class:"secondary",onClick:s[38]||(s[38]=e=>n.setCurqn(n.prevVisible))},c(e.$t("gradebook-prevq")),9,Es)):d("",!0),n.canEdit?(r(),a("button",{key:2,type:"button",disabled:!n.canSubmit,class:"primary",onClick:s[39]||(s[39]=e=>n.submitChanges(!0))},c(e.$t("gradebook-save")),9,Vs)):d("",!0),n.canEdit&&n.aData.nextstu?(r(),a("button",{key:3,type:"button",disabled:!n.canSubmit,class:"primary",onClick:s[40]||(s[40]=e=>n.submitChanges(!1,!0))},c(e.$t("gradebook-savenext")),9,Fs)):d("",!0),""!==n.savedMsg?(r(),a("span",Ms,c(n.savedMsg),1)):d("",!0),n.hasExit?(r(),a("button",{key:5,type:"button",class:"secondary",disabled:!n.canSubmit,onClick:s[41]||(s[41]=(...e)=>n.exit&&n.exit(...e))},c(e.$t("gradebook-return")),9,Ls)):d("",!0),n.canEdit&&n.aData?.can_message?(r(),a("a",{key:6,href:"#",onClick:s[42]||(s[42]=E((...e)=>n.msgStu&&n.msgStu(...e),["prevent"])),target:"_blank"},c(e.$t("gradebook-msg_student")),1)):d("",!0)])),l("div",Rs,[""!==n.savedMsg?(r(),a("div",Hs,c(n.savedMsg),1)):d("",!0),n.canEdit?(r(),a("button",{key:1,type:"button",disabled:!n.canSubmit,class:"primary",onClick:s[46]||(s[46]=(...e)=>n.submitChanges&&n.submitChanges(...e))},c(e.$t("gradebook-save")),9,zs)):d("",!0)]),n.showCategories?(r(),_(P,{key:6,data:n.curQuestionVers},null,8,["data"])):d("",!0),u(T),s[55]||(s[55]=l("div",{style:{"margin-bottom":"100px"}},null,-1))]))])):(r(),a("div",Be,c(e.$t("loading")),1)),n.hasError?(r(),_(S,{key:2,errormsg:n.errorMsg,onClearerror:n.clearError},null,8,["errormsg","onClearerror"])):d("",!0),null!==n.confirmObj?(r(),_(D,{key:3,data:n.confirmObj,onClose:n.closeConfirm},null,8,["data","onClose"])):d("",!0)])}]])).use(F);Ws.component("RouterLink",e),Ws.mount("#app")}}});
